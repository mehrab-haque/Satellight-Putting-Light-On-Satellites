{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Md. Mehrab Haque\\\\Desktop\\\\satellight\\\\src\\\\components\\\\FPVView.js\";\nimport React, { useState, createRef, useRef, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport { getSatelliteInfo } from \"tle.js\";\nimport WorldWind from '@nasaworldwind/worldwind';\nimport { sat_data } from '../assets/master';\nvar wwd,\n    timeDiff,\n    animator,\n    interval,\n    map,\n    marker,\n    infoWindow,\n    polyLine,\n    poly = [],\n    tle,\n    data;\nconst FPVView = forwardRef((props, ref) => {\n  tle = [props.data.tle_line1, props.data.tle_line2];\n  timeDiff = props.timeDiff;\n  const containerRef = useRef();\n  const [satCode, setSatCode] = useState(props.satCode);\n  const [satData, setSatData] = useState(props.data);\n  const [timestamp, setTimestamp] = useState(Date.now() + timeDiff);\n  useImperativeHandle(ref, () => ({\n    setSatellite(sat) {\n      setSatData(sat.data);\n      setSatCode(sat.satCode);\n    },\n\n    setTimeDiff(val) {\n      timeDiff = val;\n    }\n\n  }));\n  useEffect(() => {\n    WorldWind.Logger.setLoggingLevel(WorldWind.Logger.LEVEL_WARNING);\n    wwd = new WorldWind.WorldWindow(containerRef.current);\n    animator = new WorldWind.GoToAnimator(wwd);\n    var bMNGOneImageLayer = new WorldWind.BMNGOneImageLayer();\n    var bMNGLayer = new WorldWind.BMNGLayer();\n    var bMNGLandSatLayer = new WorldWind.BMNGLandsatLayer();\n    var atmosphereLayer = new WorldWind.AtmosphereLayer(require('../assets/starfield.png'));\n    var starFieldLayer = new WorldWind.StarFieldLayer();\n    var layers = [{\n      layer: bMNGOneImageLayer,\n      enabled: true\n    }, {\n      layer: bMNGLayer,\n      enabled: true\n    }, {\n      layer: bMNGLandSatLayer,\n      enabled: true\n    }, {\n      layer: starFieldLayer,\n      enabled: true\n    }, {\n      layer: atmosphereLayer,\n      enabled: true\n    }, {\n      layer: new WorldWind.ViewControlsLayer(wwd),\n      enabled: true\n    }];\n\n    for (var l = 0; l < layers.length; l++) {\n      layers[l].layer.enabled = layers[l].enabled;\n      wwd.addLayer(layers[l].layer);\n    }\n\n    atmosphereLayer.time = Date.now() + timeDiff;\n\n    function runSimulation() {\n      atmosphereLayer.time = new Date(Date.now() + timeDiff);\n      wwd.redraw();\n      requestAnimationFrame(runSimulation);\n    }\n\n    requestAnimationFrame(runSimulation);\n  }, []);\n  useEffect(() => {\n    if (satCode) {\n      interval = setInterval(() => {\n        var currData = getSatelliteInfo(tle, Date.now() + timeDiff, 23.762397, 90.418917);\n        wwd.goTo(new WorldWind.Position(currData.lat, currData.lng, currData.height * 1000));\n        setTimestamp(Date.now() + timeDiff);\n      }, 100);\n    } else {\n      clearInterval(interval);\n    }\n  }, [satCode]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: '#ffffff',\n      backgroundColor: '#00000088',\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, satData.sat_name), /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: containerRef,\n    className: \"globeBg\",\n    style: {\n      backgroundColor: '#000000',\n      width: \"100%\",\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }));\n});\nexport default FPVView;","map":{"version":3,"sources":["C:/Users/Md. Mehrab Haque/Desktop/satellight/src/components/FPVView.js"],"names":["React","useState","createRef","useRef","useEffect","forwardRef","useImperativeHandle","getSatelliteInfo","WorldWind","sat_data","wwd","timeDiff","animator","interval","map","marker","infoWindow","polyLine","poly","tle","data","FPVView","props","ref","tle_line1","tle_line2","containerRef","satCode","setSatCode","satData","setSatData","timestamp","setTimestamp","Date","now","setSatellite","sat","setTimeDiff","val","Logger","setLoggingLevel","LEVEL_WARNING","WorldWindow","current","GoToAnimator","bMNGOneImageLayer","BMNGOneImageLayer","bMNGLayer","BMNGLayer","bMNGLandSatLayer","BMNGLandsatLayer","atmosphereLayer","AtmosphereLayer","require","starFieldLayer","StarFieldLayer","layers","layer","enabled","ViewControlsLayer","l","length","addLayer","time","runSimulation","redraw","requestAnimationFrame","setInterval","currData","goTo","Position","lat","lng","height","clearInterval","color","backgroundColor","position","sat_name","width"],"mappings":"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","sourcesContent":["import React,{useState,createRef,useRef,useEffect,forwardRef, useImperativeHandle} from 'react'\r\nimport { getSatelliteInfo } from \"tle.js\";\r\nimport WorldWind from '@nasaworldwind/worldwind'\r\nimport {sat_data} from '../assets/master'\r\n\r\nvar wwd,timeDiff,animator,interval,map,marker,infoWindow,polyLine,poly=[],tle,data\r\n\r\nconst FPVView=forwardRef((props,ref)=>{\r\n  tle=[props.data.tle_line1,props.data.tle_line2]\r\n  timeDiff=props.timeDiff\r\n  const containerRef=useRef()\r\n  const [satCode,setSatCode]=useState(props.satCode)\r\n  const [satData,setSatData]=useState(props.data)\r\n  const [timestamp,setTimestamp]=useState(Date.now()+timeDiff)\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    setSatellite(sat){\r\n      setSatData(sat.data)\r\n      setSatCode(sat.satCode)\r\n    },\r\n    setTimeDiff(val){\r\n      timeDiff=val\r\n    }\r\n }));\r\n\r\n\r\n\r\n  useEffect(()=>{\r\n    WorldWind.Logger.setLoggingLevel(WorldWind.Logger.LEVEL_WARNING);\r\n    wwd = new WorldWind.WorldWindow(containerRef.current);\r\n    animator=new WorldWind.GoToAnimator(wwd)\r\n    var bMNGOneImageLayer = new WorldWind.BMNGOneImageLayer();\r\n    var bMNGLayer=new WorldWind.BMNGLayer()\r\n    var bMNGLandSatLayer=new WorldWind.BMNGLandsatLayer();\r\n    var atmosphereLayer = new WorldWind.AtmosphereLayer(require('../assets/starfield.png'));\r\n    var starFieldLayer=new WorldWind.StarFieldLayer()\r\n\r\n    var layers = [\r\n        {layer:bMNGOneImageLayer,enabled:true},\r\n        {layer:bMNGLayer,enabled:true},\r\n        {layer:bMNGLandSatLayer,enabled:true},\r\n        {layer:starFieldLayer,enabled:true},\r\n        {layer:atmosphereLayer,enabled:true},\r\n        {layer: new WorldWind.ViewControlsLayer(wwd), enabled: true}\r\n    ];\r\n\r\n    for (var l = 0; l < layers.length; l++) {\r\n        layers[l].layer.enabled = layers[l].enabled;\r\n        wwd.addLayer(layers[l].layer);\r\n    }\r\n        atmosphereLayer.time = Date.now()+timeDiff;\r\n        function runSimulation() {\r\n            atmosphereLayer.time = new Date(Date.now()+timeDiff)\r\n            wwd.redraw();\r\n            requestAnimationFrame(runSimulation);\r\n        }\r\n        requestAnimationFrame(runSimulation);\r\n  },[])\r\n\r\n  useEffect(()=>{\r\n    if(satCode) {\r\n      interval = setInterval(() => {\r\n        var currData=getSatelliteInfo(tle,Date.now()+timeDiff,23.762397,90.418917)\r\n        wwd.goTo(new WorldWind.Position(currData.lat,currData.lng,currData.height*1000));\r\n        setTimestamp(Date.now()+timeDiff)\r\n      }, 100);\r\n    } else {\r\n      clearInterval(interval);\r\n    }\r\n  },[satCode])\r\n\r\n  return(\r\n    <div>\r\n      <div style={{color:'#ffffff',backgroundColor:'#00000088',position:'absolute'}}>\r\n        {satData.sat_name}\r\n      </div>\r\n      <canvas ref={containerRef} className='globeBg' style={{ backgroundColor:'#000000',width: \"100%\", height: \"100%\" }}/>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default FPVView\r\n"]},"metadata":{},"sourceType":"module"}