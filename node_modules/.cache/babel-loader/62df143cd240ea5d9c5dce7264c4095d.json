{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Md. Mehrab Haque\\\\Desktop\\\\satellight\\\\src\\\\components\\\\MapView.js\";\nimport React, { useState, createRef, useRef, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport { getSatelliteInfo } from \"tle.js\";\n\nfunction getNormalizedCoord(coord, zoom) {\n  const y = coord.y;\n  let x = coord.x;\n  const tileRange = 1 << zoom;\n\n  if (y < 0 || y >= tileRange) {\n    return null;\n  }\n\n  if (x < 0 || x >= tileRange) {\n    x = (x % tileRange + tileRange) % tileRange;\n  }\n\n  return {\n    x: x,\n    y: y\n  };\n}\n\nconst MapView = forwardRef((props, ref) => {\n  var map,\n      marker,\n      infoWindow,\n      polyLine,\n      poly = [],\n      tle = [props.data.tle_line1, props.data.tle_line2],\n      timeDiff = props.timeDiff,\n      data = props.data;\n  const initialData = getSatelliteInfo(tle, Date.now() + timeDiff, 0, 0);\n  const containerRef = useRef();\n  useEffect(() => {\n    map = new window.google.maps.Map(containerRef.current, {\n      center: {\n        lat: initialData.lat,\n        lng: initialData.lng\n      },\n      zoom: 3,\n      streetViewControl: false,\n      mapTypeControlOptions: {\n        mapTypeIds: [window.google.maps.MapTypeId.ROADMAP, window.google.maps.MapTypeId.HYBRID]\n      }\n    });\n    const icon = {\n      url: props.data.icon_url,\n      scaledSize: {\n        width: 40,\n        height: 40\n      }\n    };\n    let iconMarker = new window.google.maps.MarkerImage(props.data.icon_url, null, new window.google.maps.Point(0, 0),\n    /* origin is 0,0 */\n    new window.google.maps.Point(30, 30),\n    /* anchor is bottom center of the scaled image */\n    new window.google.maps.Size(60, 50));\n    marker = new window.google.maps.Marker({\n      position: map.center,\n      icon: iconMarker,\n      title: \"Hello World!\"\n    });\n    marker.setMap(map);\n    polyLine = new window.google.maps.Polyline({\n      path: poly,\n      geodesic: true,\n      strokeColor: \"#FF0000\",\n      strokeOpacity: 1.0,\n      strokeWeight: 4\n    });\n    polyLine.setMap(map);\n  }, []);\n  useEffect(() => {\n    const posInterval = setInterval(() => {\n      var currData = getSatelliteInfo(tle, Date.now() + timeDiff, 0, 0);\n      marker.setPosition({\n        lat: currData.lat,\n        lng: currData.lng\n      });\n      /*var info=`<div>\r\n          <span>International Space Station</span><br/>\r\n          <center><img style={{marginTop:'5px'}}  height=\"30px\" width='40px' src='https://satellitedatanasa.s3.ap-south-1.amazonaws.com/countryFlag/america.png'/></center>`+\r\n          '<center>Lat:'+curr.lat.toFixed(3)+', Lng:'+curr.lng.toFixed(3)+'</center>'+\r\n          '<center>Velocity:'+currData.velocity.toFixed(3)+'km/s <br/> Height:'+currData.height.toFixed(3)+'km</center>'+\r\n          '</div>'\r\n        infowindow.setContent(info)*/\n    }, 100);\n    const pathInterval = setInterval(() => {\n      var currData = getSatelliteInfo(tle, Date.now() + timeDiff, 0, 0);\n      poly.push(currData);\n      polyLine.setPath(poly);\n    }, 1000);\n    return () => {\n      clearInterval(posInterval);\n    };\n  }, []);\n  useImperativeHandle(ref, () => ({}));\n  useEffect(() => {}, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  });\n});\nexport default MapView;","map":{"version":3,"sources":["C:/Users/Md. Mehrab Haque/Desktop/satellight/src/components/MapView.js"],"names":["React","useState","createRef","useRef","useEffect","forwardRef","useImperativeHandle","getSatelliteInfo","getNormalizedCoord","coord","zoom","y","x","tileRange","MapView","props","ref","map","marker","infoWindow","polyLine","poly","tle","data","tle_line1","tle_line2","timeDiff","initialData","Date","now","containerRef","window","google","maps","Map","current","center","lat","lng","streetViewControl","mapTypeControlOptions","mapTypeIds","MapTypeId","ROADMAP","HYBRID","icon","url","icon_url","scaledSize","width","height","iconMarker","MarkerImage","Point","Size","Marker","position","title","setMap","Polyline","path","geodesic","strokeColor","strokeOpacity","strokeWeight","posInterval","setInterval","currData","setPosition","pathInterval","push","setPath","clearInterval"],"mappings":"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","sourcesContent":["import React,{useState,createRef,useRef,useEffect,forwardRef, useImperativeHandle} from 'react'\r\nimport { getSatelliteInfo } from \"tle.js\";\r\n\r\nfunction getNormalizedCoord(coord, zoom) {\r\n        const y = coord.y;\r\n        let x = coord.x;\r\n        const tileRange = 1 << zoom;\r\n        if (y < 0 || y >= tileRange) {\r\n          return null;\r\n        }\r\n        if (x < 0 || x >= tileRange) {\r\n          x = ((x % tileRange) + tileRange) % tileRange;\r\n        }\r\n        return {\r\n          x: x,\r\n          y: y\r\n        };\r\n      }\r\n\r\n\r\nconst MapView=forwardRef((props,ref)=>{\r\n\r\n  var map,marker,infoWindow,polyLine,poly=[],tle=[props.data.tle_line1,props.data.tle_line2],timeDiff=props.timeDiff,data=props.data\r\n  const initialData=getSatelliteInfo(tle,Date.now()+timeDiff,0,0)\r\n  const containerRef=useRef()\r\n\r\n\r\n  useEffect(()=>{\r\n    map = new window.google.maps.Map(containerRef.current, {\r\n      center: {\r\n        lat: initialData.lat,\r\n        lng: initialData.lng\r\n      },\r\n      zoom: 3,\r\n      streetViewControl: false,\r\n      mapTypeControlOptions: {\r\n        mapTypeIds: [window.google.maps.MapTypeId.ROADMAP,window.google.maps.MapTypeId.HYBRID]\r\n      }\r\n    });\r\n\r\n    const icon = { url: props.data.icon_url, scaledSize: { width: 40, height: 40 } };\r\n    let iconMarker = new window.google.maps.MarkerImage(\r\n                      props.data.icon_url,\r\n                      null,\r\n                      new window.google.maps.Point(0, 0), /* origin is 0,0 */\r\n                      new window.google.maps.Point(30, 30), /* anchor is bottom center of the scaled image */\r\n                      new window.google.maps.Size(60, 50)\r\n                  );\r\n\r\n     marker = new window.google.maps.Marker({\r\n        position: map.center,\r\n        icon:iconMarker,\r\n        title:\"Hello World!\"\r\n    });\r\n    marker.setMap(map);\r\n    polyLine= new window.google.maps.Polyline({\r\n      path: poly,\r\n      geodesic: true,\r\n      strokeColor: \"#FF0000\",\r\n      strokeOpacity: 1.0,\r\n      strokeWeight: 4\r\n    });\r\n\r\n    polyLine.setMap(map)\r\n\r\n  },[])\r\n\r\n  useEffect(()=>{\r\n\r\n    const posInterval = setInterval(() => {\r\n      var currData=getSatelliteInfo(tle,Date.now()+timeDiff,0,0)\r\n\r\n      marker.setPosition({\r\n        lat:currData.lat,\r\n        lng:currData.lng\r\n      })\r\n\r\n      /*var info=`<div>\r\n          <span>International Space Station</span><br/>\r\n          <center><img style={{marginTop:'5px'}}  height=\"30px\" width='40px' src='https://satellitedatanasa.s3.ap-south-1.amazonaws.com/countryFlag/america.png'/></center>`+\r\n          '<center>Lat:'+curr.lat.toFixed(3)+', Lng:'+curr.lng.toFixed(3)+'</center>'+\r\n          '<center>Velocity:'+currData.velocity.toFixed(3)+'km/s <br/> Height:'+currData.height.toFixed(3)+'km</center>'+\r\n          '</div>'\r\n\r\n      infowindow.setContent(info)*/\r\n\r\n    }, 100);\r\n    const pathInterval = setInterval(() => {\r\n      var currData=getSatelliteInfo(tle,Date.now()+timeDiff,0,0)\r\n      poly.push(currData)\r\n      polyLine.setPath(poly)\r\n    }, 1000);\r\n    return () => {clearInterval(posInterval);}\r\n  },[])\r\n\r\n\r\n  useImperativeHandle(ref, () => ({\r\n\r\n }));\r\n\r\n\r\n\r\n  useEffect(()=>{\r\n\r\n  },[])\r\n\r\n  return(\r\n    <div ref={containerRef} style={{ width: \"100%\", height: \"100%\" }}/>\r\n  )\r\n})\r\n\r\nexport default MapView\r\n"]},"metadata":{},"sourceType":"module"}