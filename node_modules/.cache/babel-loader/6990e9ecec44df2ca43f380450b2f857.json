{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Md. Mehrab Haque\\\\Desktop\\\\satellight\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _defineProperty from\"C:\\\\Users\\\\Md. Mehrab Haque\\\\Desktop\\\\satellight\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import React,{useState,useEffect,useRef}from'react';import{makeStyles,useTheme,Snackbar,Button,Dialog,DialogActions,DialogContent,DialogTitle,TextField,Avatar,Tooltip,Drawer,IconButton,Hidden,CssBaseline,AppBar,Toolbar,List,Typography,Divider,ListItem}from'@material-ui/core';import ToggleButton from'@material-ui/lab/ToggleButton';import ToggleButtonGroup from'@material-ui/lab/ToggleButtonGroup';import{deepOrange,deepPurple}from'@material-ui/core/colors';import MenuIcon from'@material-ui/icons/Menu';import ExploreIcon from'@material-ui/icons/Explore';import Brightness4Icon from'@material-ui/icons/Brightness4';import SportsBaseballIcon from'@material-ui/icons/SportsBaseball';import VisibilityIcon from'@material-ui/icons/Visibility';import CheckCircleIcon from'@material-ui/icons/CheckCircle';import AccessAlarmsIcon from'@material-ui/icons/AccessAlarms';import MessageIcon from'@material-ui/icons/Message';import RoomIcon from'@material-ui/icons/Room';import TrackChangesIcon from'@material-ui/icons/TrackChanges';import Cookies from'universal-cookie';import*as firebase from'firebase';import{sat_data}from'../assets/master';import MapView from'./MapView';import NightSkyView from'./NightSkyView';import ModelView from'./ModelView';import FPVView from'./FPVView';import{getSatelliteInfo}from\"tle.js\";function calcCrow(lat1,lon1,lat2,lon2){var R=6371;// km\nvar dLat=toRad(lat2-lat1);var dLon=toRad(lon2-lon1);var lat1=toRad(lat1);var lat2=toRad(lat2);var a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.sin(dLon/2)*Math.sin(dLon/2)*Math.cos(lat1)*Math.cos(lat2);var c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));var d=R*c;return d;}function toRad(Value){return Value*Math.PI/180;}var COOKIE_AGE=31536000;var drawerWidth=240;var useStyles=makeStyles(function(theme){return{root:{display:\"flex\"},paper:{padding:theme.spacing(2),textAlign:'center',color:theme.palette.text.secondary},media:{height:0,paddingTop:'56.25%'// 16:9\n},stepperRoot:{width:'100%'},canvasPaper:{padding:theme.spacing(1),color:theme.palette.text.secondary},drawer:_defineProperty({},theme.breakpoints.up('sm'),{width:drawerWidth,flexShrink:0}),full:{width:drawerWidth-50},appBar:_defineProperty({},theme.breakpoints.up('sm'),{width:\"calc(100% - \".concat(drawerWidth,\"px)\"),height:'10vh',marginLeft:drawerWidth}),menuButton:_defineProperty({marginRight:theme.spacing(2)},theme.breakpoints.up('sm'),{display:'none'}),toolbar:theme.mixins.toolbar,drawerPaper:{width:drawerWidth},content:{flexGrow:1,padding:theme.spacing(0,0),height:'90vh'},root1:{height:'100%'},eliminationGrid:{display:\"flex\",flexDirection:\"column\",justifyContent:\"center\"},orange:{color:theme.palette.getContrastText(deepOrange[500]),backgroundColor:deepOrange[500]},purple:{color:theme.palette.getContrastText(deepPurple[500]),backgroundColor:deepPurple[500]}};});var sat_codes=Object.keys(sat_data);var tokenObject={};function splitMulti(string,tokens){var str=string.toLowerCase();var tempChar=tokens[0];for(var i=1;i<tokens.length;i++){str=str.split(tokens[i]).join(tempChar);}str=str.split(tempChar);return str;}sat_codes.map(function(code){var sat=sat_data[code];var tokens='';tokens+=code;splitMulti(sat.type,[' ',',','.']).map(function(token){tokens+=token.trim();});splitMulti(sat.country_name,[' ',',','.']).map(function(token){tokens+=token.trim();});splitMulti(sat.launch_date,[' ',',','.']).map(function(token){tokens+=token.trim();});splitMulti(sat.name,[' ',',','.']).map(function(token){tokens+=token.trim();});splitMulti(sat.sat_name,[' ',',','.']).map(function(token){tokens+=token.trim();});if('isGeoStationary'in sat&&sat.isGeoStationary)tokens+='geostationary';tokenObject[code]=tokens;});var canvasDim=250,cookies=new Cookies(),isCookied=true,interval,defaultSatCode='25544',commentsRef=null,startup=true;if(cookies.get('intro')==undefined||cookies.get('intro')==null)isCookied=false;var Main=function Main(props){var window=props.window;var classes=useStyles();var theme=useTheme();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),mobileOpen=_useState2[0],setMobileOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),notification=_useState4[0],setNotification=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState('map'),_useState8=_slicedToArray(_useState7,2),mode=_useState8[0],setMode=_useState8[1];var _useState9=useState('live'),_useState10=_slicedToArray(_useState9,2),time=_useState10[0],setTime=_useState10[1];var _useState11=useState(defaultSatCode),_useState12=_slicedToArray(_useState11,2),satellite=_useState12[0],setSatellite=_useState12[1];var _useState13=useState(sat_data),_useState14=_slicedToArray(_useState13,2),searchFilter=_useState14[0],setSearchFilter=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),timeDialog=_useState16[0],setTimeDialog=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),desDialog=_useState18[0],setDesDialog=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),timeDiff=_useState20[0],setTimeDiff=_useState20[1];var _useState21=useState(!isCookied),_useState22=_slicedToArray(_useState21,2),video=_useState22[0],setVideo=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),social=_useState24[0],setSocial=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),developer=_useState26[0],setDeveloper=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),comments=_useState28[0],setComments=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),addComment=_useState30[0],setAddComment=_useState30[1];var _useState31=useState(null),_useState32=_slicedToArray(_useState31,2),location=_useState32[0],setLocation=_useState32[1];var _useState33=useState({}),_useState34=_slicedToArray(_useState33,2),commentsData=_useState34[0],setCommentsData=_useState34[1];var _useState35=useState({}),_useState36=_slicedToArray(_useState35,2),stats=_useState36[0],setStats=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),finder=_useState38[0],setFinder=_useState38[1];var _useState39=useState(null),_useState40=_slicedToArray(_useState39,2),satData=_useState40[0],setSatData=_useState40[1];var viewRef=useRef();var containerRef=useRef();var timeRef=useRef();var commentRef=useRef();var nameRef=useRef();var hRef=useRef();var vRef=useRef();var notify=function notify(message){setMessage(message);setNotification(true);};var handleDrawerToggle=function handleDrawerToggle(){setMobileOpen(!mobileOpen);};var handleMode=function handleMode(event,newMode){if(newMode!=null)setMode(newMode);};var handleTime=function handleTime(event,newTime){if(newTime!=null)setTime(newTime);};var fpv=function fpv(){setMode('fpv');};var modelSatClick=function modelSatClick(code){setSatellite(code);setDesDialog(true);};var gotoTimeLine=function gotoTimeLine(){var timeDiffTmp=new Date(timeRef.current.value).getTime()-Date.now();viewRef.current.setTimeDiff(timeDiffTmp);setTimeDiff(timeDiffTmp);setTimeDialog(false);};useEffect(function(){if(!video&&!startup){setSocial(true);}},[video]);useEffect(function(){startup=false;firebase.firestore().collection('satellight').doc('stats').onSnapshot(function(docSnapshot){setStats(docSnapshot.data());},function(err){console.log(err);});navigator.geolocation.getCurrentPosition(function(position){setLocation({lat:position.coords.latitude,lng:position.coords.longitude});});},[]);var countView=function countView(code){firebase.firestore().collection('satellight').doc('stats').update(_defineProperty({},code+'_v',firebase.firestore.FieldValue.increment(1)));};var countComment=function countComment(code){firebase.firestore().collection('satellight').doc('stats').update(_defineProperty({},code+'_c',firebase.firestore.FieldValue.increment(1)));};useEffect(function(){if(time=='other')setTimeDialog(true);else if(time=='live'){setTimeDiff(0);viewRef.current.setTimeDiff(0);}},[time]);var setCookie=function setCookie(){cookies.set('intro',true,{path:'/',maxAge:COOKIE_AGE});};useEffect(function(){if(!comments&&commentsRef!=null)commentsRef.off();},[comments]);var loadComments=function loadComments(code){commentsRef=firebase.database().ref().child('comments').child(code);commentsRef.on('value',function(snapshot){if(snapshot.val()!=null)setCommentsData(snapshot.val());else setCommentsData({});});setComments(true);};var postComment=function postComment(){var name=nameRef.current.value.trim();var comment=commentRef.current.value.trim();if(name.length==0||comment.length==0)notify('Fields can\\'t be empty.');else{setAddComment(false);commentsRef.push().set({name:name,comment:comment,timestamp:Date.now()}).then(function(){notify('Comment added');countComment(satellite);}).catch(function(err){notify(err.message);});}};var filter=function filter(e){var keywords=splitMulti(e.target.value,[' ',',','.']);var filteredList={};var keys=Object.keys(tokenObject);keys.map(function(key){var isMatched=false;var token='';keywords.map(function(keyword){token+=keyword;});if(tokenObject[key].includes(token))filteredList[key]=sat_data[key];});setSearchFilter(filteredList);};useEffect(function(){if(location!=null){viewRef.current.location(location);}},[location]);useEffect(function(){if(finder){interval=setInterval(function(){if(satellite!=null&&location!=null){var sat=sat_data[satellite];var tle=[sat.tle_line1,sat.tle_line2];var info=getSatelliteInfo(tle,Date.now()+timeDiff,location.lat,location.lng,0);setSatData(info);//console.log(info.elevation)\nvar ctx1=hRef.current.getContext(\"2d\");ctx1.clearRect(0,0,canvasDim,canvasDim);ctx1.beginPath();ctx1.strokeStyle=\"#000000\";ctx1.moveTo(canvasDim/2,canvasDim/2);ctx1.lineTo(canvasDim/2,canvasDim);ctx1.moveTo(canvasDim/2,canvasDim/2);ctx1.lineTo(canvasDim/2,0);ctx1.moveTo(canvasDim/2,canvasDim/2);ctx1.lineTo(canvasDim,canvasDim/2);ctx1.moveTo(canvasDim/2,canvasDim/2);ctx1.lineTo(0,canvasDim/2);//ctx1.lineTo()\nctx1.font=\"20px Arial\";ctx1.fillText(\"N\",canvasDim/2+5,20);ctx1.fillText(\"S\",canvasDim/2+5,canvasDim);ctx1.fillText(\"W\",0,canvasDim/2-5);ctx1.fillText(\"E\",canvasDim-20,canvasDim/2-5);ctx1.fill();ctx1.stroke();ctx1.beginPath();ctx1.moveTo(canvasDim/2,canvasDim/2);ctx1.strokeStyle=\"#00aa00\";var hAngle=info.azimuth-90;var hX=Math.cos(hAngle*Math.PI/180)*canvasDim/2;var hY=Math.sin(hAngle*Math.PI/180)*canvasDim/2;ctx1.lineTo(hX+canvasDim/2,hY+canvasDim/2);ctx1.stroke();var ctx2=vRef.current.getContext(\"2d\");ctx2.clearRect(0,0,canvasDim,canvasDim);ctx2.beginPath();ctx2.strokeStyle=\"#000000\";ctx2.moveTo(canvasDim/2,canvasDim/2);ctx2.lineTo(canvasDim/2,canvasDim);ctx2.moveTo(canvasDim/2,canvasDim/2);ctx2.lineTo(canvasDim/2,0);ctx2.moveTo(canvasDim/2,canvasDim/2);ctx2.lineTo(canvasDim,canvasDim/2);ctx2.moveTo(canvasDim/2,canvasDim/2);ctx2.lineTo(0,canvasDim/2);//ctx1.lineTo()\nctx2.font=\"20px Arial\";ctx2.fillText(\"Above Head\",canvasDim/2+5,20);ctx2.fillText(\"Below Feet\",canvasDim/2+5,canvasDim);ctx2.fillText(\"Horizontal\",0,canvasDim/2-5);ctx2.fill();ctx2.stroke();ctx2.beginPath();ctx2.moveTo(canvasDim/2,canvasDim/2);ctx2.strokeStyle=\"#00aa00\";var vAngle=-info.elevation;var vX=Math.cos(vAngle*Math.PI/180)*canvasDim/2;var vY=Math.sin(vAngle*Math.PI/180)*canvasDim/2;ctx2.lineTo(vX+canvasDim/2,vY+canvasDim/2);ctx2.stroke();}},200);}else{clearInterval(interval);}},[finder]);var closestSat=function closestSat(){navigator.geolocation.getCurrentPosition(function(position){setLocation({lat:position.coords.latitude,lng:position.coords.longitude});});if(location!=null){var min=10000000,minCode;Object.keys(sat_data).map(function(code){var sat=sat_data[code];var tle=[sat.tle_line1,sat.tle_line2];var info=getSatelliteInfo(tle,Date.now()+timeDiff,location.lat,location.lng,0);var geoDistance=calcCrow(location.lat,location.lng,info.lat,info.lng);if(geoDistance<min){min=geoDistance;minCode=code;}});setSatellite(minCode);}};var showDirection=function showDirection(){navigator.geolocation.getCurrentPosition(function(position){setLocation({lat:position.coords.latitude,lng:position.coords.longitude});});if(location!=null)setFinder(true);};useEffect(function(){viewRef.current.setSatellite({satCode:satellite,data:sat_data[satellite]});countView(satellite);},[satellite]);var container=window!==undefined?function(){return window().document.body;}:undefined;var drawer=/*#__PURE__*/React.createElement(\"div\",{className:\"explorer\"},/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(Button,{style:{marginTop:'10px'},onClick:function onClick(){setVideo(true);},variant:\"outlined\",color:\"secondary\"},\"Usage\"),/*#__PURE__*/React.createElement(Button,{style:{marginTop:'10px',marginLeft:'5px'},onClick:function onClick(){setDeveloper(true);},variant:\"outlined\",color:\"primary\"},\"Developer\"),/*#__PURE__*/React.createElement(ToggleButtonGroup,{value:mode,exclusive:true,onChange:handleMode,\"aria-label\":\"text alignment\",style:{marginTop:'10px'}},/*#__PURE__*/React.createElement(ToggleButton,{value:\"map\",\"aria-label\":\"left aligned\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"Map View\"},/*#__PURE__*/React.createElement(ExploreIcon,null))),/*#__PURE__*/React.createElement(ToggleButton,{value:\"night\",\"aria-label\":\"centered\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"Night Sky View\"},/*#__PURE__*/React.createElement(Brightness4Icon,null))),/*#__PURE__*/React.createElement(ToggleButton,{value:\"3d\",\"aria-label\":\"right aligned\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"3D Model View\"},/*#__PURE__*/React.createElement(SportsBaseballIcon,null))),/*#__PURE__*/React.createElement(ToggleButton,{value:\"fpv\",\"aria-label\":\"justified\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"First Person View\"},/*#__PURE__*/React.createElement(VisibilityIcon,null)))),/*#__PURE__*/React.createElement(ToggleButtonGroup,{value:time,exclusive:true,onChange:handleTime,\"aria-label\":\"text alignment\",style:{marginTop:'5px'}},/*#__PURE__*/React.createElement(ToggleButton,{value:\"live\",\"aria-label\":\"left aligned\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"Live\"},/*#__PURE__*/React.createElement(CheckCircleIcon,null))),/*#__PURE__*/React.createElement(ToggleButton,{onClick:function onClick(){setTimeDialog(true);},value:\"other\",\"aria-label\":\"left aligned\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"Past/Future\"},/*#__PURE__*/React.createElement(AccessAlarmsIcon,null)))),/*#__PURE__*/React.createElement(ToggleButton,{style:{marginTop:'-16px'},onClick:showDirection,value:\"other\",\"aria-label\":\"left aligned\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"Where to look at to see the selected satellite from your location\"},/*#__PURE__*/React.createElement(TrackChangesIcon,null))),/*#__PURE__*/React.createElement(ToggleButton,{style:{marginTop:'-16px'},onClick:closestSat,value:\"other\",\"aria-label\":\"left aligned\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"Closest satellite from your location considering latitude and longitude\"},/*#__PURE__*/React.createElement(RoomIcon,null))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(TextField,{style:{marginTop:'5px'},onChange:filter,id:\"outlined-basic\",label:\"Search\",variant:\"outlined\"})),/*#__PURE__*/React.createElement(List,null,Object.keys(searchFilter).map(function(key,ind){var sat=searchFilter[key];return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(ListItem,{selected:key==satellite,onClick:function onClick(){return setSatellite(key);},button:true},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Typography,{className:classes.full,variant:\"subtitle1\",gutterBottom:true},sat.name),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",gutterBottom:true},sat.country_name),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(Avatar,{alt:sat.country_name,src:sat.real_images[0]}),/*#__PURE__*/React.createElement(Avatar,{alt:sat.country_name,src:sat.country_flag})),/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(Button,{style:{marginTop:'10px'},onClick:function onClick(){setDesDialog(true);},variant:\"outlined\",color:\"primary\"},\"Details\")),/*#__PURE__*/React.createElement(Typography,{style:{marginTop:'10px'},variant:\"body2\",gutterBottom:true},/*#__PURE__*/React.createElement(VisibilityIcon,{color:\"primary\"}),/*#__PURE__*/React.createElement(\"font\",{className:\"statLabel\",color:\"#00977bb\"},key+'_v'in stats?stats[key+'_v']:0),/*#__PURE__*/React.createElement(\"div\",{style:{float:'right',cursor:'pointer'},onClick:function onClick(){loadComments(key);}},/*#__PURE__*/React.createElement(MessageIcon,{color:\"primary\"}),/*#__PURE__*/React.createElement(\"font\",{className:\"statLabel\",color:\"#00977bb\"},key+'_c'in stats?stats[key+'_c']:0))))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Divider,null));})),/*#__PURE__*/React.createElement(Divider,null));return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Snackbar,{anchorOrigin:{vertical:'top',horizontal:'right'},open:notification,onClose:function onClose(){setNotification(false);},autoHideDuration:3000,message:message}),/*#__PURE__*/React.createElement(Dialog,{open:video,onClose:function onClose(){setVideo(false);},\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"How to use\"),/*#__PURE__*/React.createElement(DialogContent,{className:classes.root},/*#__PURE__*/React.createElement(\"iframe\",{width:\"560\",height:\"315\",src:\"https://www.youtube.com/embed/jHfov2AC6ZA\",frameborder:\"0\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowfullscreen:true})),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setVideo(false);},color:\"primary\"},\"Close\"))),/*#__PURE__*/React.createElement(Dialog,{open:social,onClose:function onClose(){setSocial(false);},\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Social Features\"),/*#__PURE__*/React.createElement(DialogContent,{className:classes.root},/*#__PURE__*/React.createElement(\"img\",{src:require('../assets/social.jpg'),width:\"100%\"})),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setSocial(false);setCookie();},color:\"secondary\"},\"Don't show again\"),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setSocial(false);},color:\"primary\"},\"Close\"))),/*#__PURE__*/React.createElement(Dialog,{open:developer,onClose:function onClose(){setDeveloper(false);},\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Md. Mehrab Haque , Bangladesh\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},\"Currently studying CSE in BUET (L-1/T-2 currently (2020))\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},\"Email : mehrab.haque.0001@gmail.com\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},/*#__PURE__*/React.createElement(\"a\",{href:\"https://github.com/mehrab-haque\"},\"Github\"),/*#__PURE__*/React.createElement(\"span\",null,\" \"),/*#__PURE__*/React.createElement(\"span\",null,\" \"),/*#__PURE__*/React.createElement(\"a\",{href:\"https://www.facebook.com/mdmehrab.haque.9\"},\"Facebook\"),/*#__PURE__*/React.createElement(\"span\",null,\" \"),/*#__PURE__*/React.createElement(\"span\",null,\" \"),/*#__PURE__*/React.createElement(\"a\",{href:\"https://www.linkedin.com/in/md-mehrab-haque-1607401a0/\"},\"LinkedIn\"),/*#__PURE__*/React.createElement(\"span\",null,\" \"),/*#__PURE__*/React.createElement(\"span\",null,\" \")),/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"img\",{width:\"50%\",style:{borderRadius:'100%'},src:require('../assets/me.png')})),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},\"This web app is a part of the project \\\"Satellight\\\" which is submitted to NASA space app challenge, me and my other team-mates are participating as \\\"BUET Zenith\\\", they are also contributing to other parts of the project such as android, arduino and data collection.\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\"Rabib Jahin : Raw data collection (which is implemented in this site).\"),/*#__PURE__*/React.createElement(\"li\",null,\"Tamim Ehsan : Arduino pointer device and presentation.\"),/*#__PURE__*/React.createElement(\"li\",null,\"Hasan Masum : Android\"),/*#__PURE__*/React.createElement(\"li\",null,\"Md. Jehadul Karim Sabit : Android\"),/*#__PURE__*/React.createElement(\"li\",null,\"Fabiha Tasneem : Presentation\")))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setDeveloper(false);},color:\"primary\"},\"Ok\"))),/*#__PURE__*/React.createElement(Dialog,{open:comments,onClose:function onClose(){setComments(false);},\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},sat_data[satellite].name),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setAddComment(true);},color:\"primary\",variant:\"outlined\",fullWidth:true},\"+ Add Your Comment\"),Object.keys(commentsData).reverse().map(function(commentKey){var comment=commentsData[commentKey];return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:'#eaeaea',marginTop:'5px',padding:'4px'}},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(Avatar,{className:classes.orange},comment.name.substr(0,1)),/*#__PURE__*/React.createElement(\"div\",{style:{padding:'4px'}},/*#__PURE__*/React.createElement(\"font\",null,/*#__PURE__*/React.createElement(\"b\",null,comment.name)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\"},new Date(comment.timestamp).toLocaleString()))),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},comment.comment));})),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setComments(false);},color:\"primary\"},\"Ok\"))),/*#__PURE__*/React.createElement(Dialog,{open:addComment,onClose:function onClose(){setAddComment(false);},\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Add Comment\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(TextField,{inputRef:nameRef,label:\"Your Name\",variant:\"outlined\",fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{style:{marginTop:'5px'},inputRef:commentRef,label:\"Your Comment\",multiline:true,variant:\"outlined\",fullWidth:true,rows:4}),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setAddComment(false);},color:\"primary\"},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{onClick:postComment,color:\"primary\"},\"Post Comment\"))),/*#__PURE__*/React.createElement(Dialog,{open:timeDialog,onClose:function onClose(){setTimeDialog(false);},\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Set timeline\"),/*#__PURE__*/React.createElement(DialogContent,{className:classes.root},/*#__PURE__*/React.createElement(TextField,{inputRef:timeRef,id:\"datetime-local\",label:\"timeline starting point\",type:\"datetime-local\",defaultValue:\"2020-10-01T22:30\",InputLabelProps:{shrink:true}})),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setTimeDialog(false);},color:\"secondary\"},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{onClick:gotoTimeLine,color:\"primary\"},\"Go\"))),/*#__PURE__*/React.createElement(Dialog,{open:finder,onClose:function onClose(){setFinder(false);},\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Find \",sat_data[satellite].sat_name,\" from your location based on the selected timeline (present/past/future)\"),/*#__PURE__*/React.createElement(DialogContent,{className:classes.root},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Horizontal Angle : \",satData!=null?satData.azimuth.toFixed(3):'',\" Degrees\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"canvas\",{ref:hRef,width:canvasDim,height:canvasDim})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h3\",null,\"Vertical Angle : \",satData!=null?satData.elevation.toFixed(3):'',\" Degrees\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"canvas\",{ref:vRef,width:canvasDim,height:canvasDim})))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setFinder(false);},color:\"primary\"},\"Ok\"))),/*#__PURE__*/React.createElement(Dialog,{open:desDialog,onClose:function onClose(){setDesDialog(false);},\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},sat_data[satellite].sat_name),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},sat_data[satellite].name,sat_data[satellite].isGeoStationary?'(Geostationary)':''),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},/*#__PURE__*/React.createElement(\"br\",null),\"Country : \",sat_data[satellite].country_name),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},/*#__PURE__*/React.createElement(\"br\",null),\"Type : \",sat_data[satellite].type),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},/*#__PURE__*/React.createElement(\"br\",null),\"Launch Date : \",sat_data[satellite].launch_date),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},/*#__PURE__*/React.createElement(\"br\",null),\"Mission Duration : \",sat_data[satellite].mission_duration),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},/*#__PURE__*/React.createElement(\"br\",null),\"Launch Mass : \",sat_data[satellite].launch_mass),/*#__PURE__*/React.createElement(\"br\",null),sat_data[satellite].real_images.map(function(url){return/*#__PURE__*/React.createElement(\"img\",{style:{marginLeft:'2px'},src:url,width:\"30%\"});}),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},/*#__PURE__*/React.createElement(\"br\",null),sat_data[satellite].description),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"b\",null,/*#__PURE__*/React.createElement(\"u\",null,\"Use Cases :\")),/*#__PURE__*/React.createElement(Typography,{variant:\"body\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"ul\",null,sat_data[satellite].use_cases.map(function(usage,ind){return/*#__PURE__*/React.createElement(\"li\",null,usage);})))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setDesDialog(false);},color:\"secondary\"},\"Ok\"))),/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(AppBar,{style:{backgroundColor:'#0090ff'},position:\"fixed\",className:classes.appBar},/*#__PURE__*/React.createElement(Toolbar,null,/*#__PURE__*/React.createElement(IconButton,{color:\"inherit\",\"aria-label\":\"open drawer\",edge:\"start\",onClick:handleDrawerToggle,className:classes.menuButton},/*#__PURE__*/React.createElement(MenuIcon,null)),/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",noWrap:true},\"Satellight : putting light on satellites\"))),/*#__PURE__*/React.createElement(\"nav\",{className:classes.drawer,\"aria-label\":\"mailbox folders\"},/*#__PURE__*/React.createElement(Hidden,{smUp:true,implementation:\"css\"},/*#__PURE__*/React.createElement(Drawer,{container:container,variant:\"temporary\",anchor:theme.direction==='rtl'?'right':'left',open:mobileOpen,onClose:handleDrawerToggle,classes:{paper:classes.drawerPaper},ModalProps:{keepMounted:true// Better open performance on mobile.\n}},drawer)),/*#__PURE__*/React.createElement(Hidden,{xsDown:true,implementation:\"css\"},/*#__PURE__*/React.createElement(Drawer,{classes:{paper:classes.drawerPaper},variant:\"permanent\",open:true},drawer))),/*#__PURE__*/React.createElement(\"main\",{className:classes.content},/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:'-6px',padding:'0px'},className:classes.toolbar}),/*#__PURE__*/React.createElement(\"div\",{className:\"container\",ref:containerRef,style:{height:'100%'}},mode=='map'?/*#__PURE__*/React.createElement(MapView,{location:location,fpv:fpv,key:[satellite,timeDiff],ref:viewRef,satCode:satellite,data:sat_data[satellite],timeDiff:timeDiff}):mode=='night'?/*#__PURE__*/React.createElement(NightSkyView,{location:location,fpv:fpv,key:[satellite,timeDiff],ref:viewRef,satCode:satellite,data:sat_data[satellite],timeDiff:timeDiff}):mode=='3d'?/*#__PURE__*/React.createElement(ModelView,{location:location,show:modelSatClick,parent:containerRef,ref:viewRef,satCode:satellite,data:sat_data[satellite],timeDiff:timeDiff}):mode=='fpv'?/*#__PURE__*/React.createElement(FPVView,{location:location,ref:viewRef,satCode:satellite,data:sat_data[satellite],timeDiff:timeDiff}):/*#__PURE__*/React.createElement(\"br\",null))));};export default Main;","map":{"version":3,"sources":["C:/Users/Md. Mehrab Haque/Desktop/satellight/src/components/Main.js"],"names":["React","useState","useEffect","useRef","makeStyles","useTheme","Snackbar","Button","Dialog","DialogActions","DialogContent","DialogTitle","TextField","Avatar","Tooltip","Drawer","IconButton","Hidden","CssBaseline","AppBar","Toolbar","List","Typography","Divider","ListItem","ToggleButton","ToggleButtonGroup","deepOrange","deepPurple","MenuIcon","ExploreIcon","Brightness4Icon","SportsBaseballIcon","VisibilityIcon","CheckCircleIcon","AccessAlarmsIcon","MessageIcon","RoomIcon","TrackChangesIcon","Cookies","firebase","sat_data","MapView","NightSkyView","ModelView","FPVView","getSatelliteInfo","calcCrow","lat1","lon1","lat2","lon2","R","dLat","toRad","dLon","a","Math","sin","cos","c","atan2","sqrt","d","Value","PI","COOKIE_AGE","drawerWidth","useStyles","theme","root","display","paper","padding","spacing","textAlign","color","palette","text","secondary","media","height","paddingTop","stepperRoot","width","canvasPaper","drawer","breakpoints","up","flexShrink","full","appBar","marginLeft","menuButton","marginRight","toolbar","mixins","drawerPaper","content","flexGrow","root1","eliminationGrid","flexDirection","justifyContent","orange","getContrastText","backgroundColor","purple","sat_codes","Object","keys","tokenObject","splitMulti","string","tokens","str","toLowerCase","tempChar","i","length","split","join","map","code","sat","type","token","trim","country_name","launch_date","name","sat_name","isGeoStationary","canvasDim","cookies","isCookied","interval","defaultSatCode","commentsRef","startup","get","undefined","Main","props","window","classes","mobileOpen","setMobileOpen","notification","setNotification","message","setMessage","mode","setMode","time","setTime","satellite","setSatellite","searchFilter","setSearchFilter","timeDialog","setTimeDialog","desDialog","setDesDialog","timeDiff","setTimeDiff","video","setVideo","social","setSocial","developer","setDeveloper","comments","setComments","addComment","setAddComment","location","setLocation","commentsData","setCommentsData","stats","setStats","finder","setFinder","satData","setSatData","viewRef","containerRef","timeRef","commentRef","nameRef","hRef","vRef","notify","handleDrawerToggle","handleMode","event","newMode","handleTime","newTime","fpv","modelSatClick","gotoTimeLine","timeDiffTmp","Date","current","value","getTime","now","firestore","collection","doc","onSnapshot","docSnapshot","data","err","console","log","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lng","longitude","countView","update","FieldValue","increment","countComment","setCookie","set","path","maxAge","off","loadComments","database","ref","child","on","snapshot","val","postComment","comment","push","timestamp","then","catch","filter","e","keywords","target","filteredList","key","isMatched","keyword","includes","setInterval","tle","tle_line1","tle_line2","info","ctx1","getContext","clearRect","beginPath","strokeStyle","moveTo","lineTo","font","fillText","fill","stroke","hAngle","azimuth","hX","hY","ctx2","vAngle","elevation","vX","vY","clearInterval","closestSat","min","minCode","geoDistance","showDirection","satCode","container","document","body","marginTop","ind","real_images","country_flag","float","cursor","vertical","horizontal","require","borderRadius","reverse","commentKey","substr","toLocaleString","shrink","toFixed","mission_duration","launch_mass","url","description","use_cases","usage","direction","keepMounted","marginBottom"],"mappings":"0VAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,CAAiCC,MAAjC,KAA8C,OAA9C,CACA,OAAOC,UAAP,CAAkBC,QAAlB,CAA2BC,QAA3B,CAAoCC,MAApC,CAA2CC,MAA3C,CAAkDC,aAAlD,CAAgEC,aAAhE,CAA8EC,WAA9E,CAA0FC,SAA1F,CAAoGC,MAApG,CAA2GC,OAA3G,CAAmHC,MAAnH,CAA0HC,UAA1H,CAAqIC,MAArI,CAA4IC,WAA5I,CAAwJC,MAAxJ,CAA+JC,OAA/J,CAAuKC,IAAvK,CAA4KC,UAA5K,CAAuLC,OAAvL,CAA+LC,QAA/L,KAA8M,mBAA9M,CACA,MAAOC,CAAAA,YAAP,KAAyB,+BAAzB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,oCAA9B,CACA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,0BAAvC,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,eAAP,KAA4B,gCAA5B,CACA,MAAOC,CAAAA,kBAAP,KAA+B,mCAA/B,CACA,MAAOC,CAAAA,cAAP,KAA2B,+BAA3B,CACA,MAAOC,CAAAA,eAAP,KAA4B,gCAA5B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,iCAA7B,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,iCAA7B,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,UAA1B,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAASC,gBAAT,KAAiC,QAAjC,CAEA,QAASC,CAAAA,QAAT,CAAkBC,IAAlB,CAAwBC,IAAxB,CAA8BC,IAA9B,CAAoCC,IAApC,CACI,CACE,GAAIC,CAAAA,CAAC,CAAG,IAAR,CAAc;AACd,GAAIC,CAAAA,IAAI,CAAGC,KAAK,CAACJ,IAAI,CAACF,IAAN,CAAhB,CACA,GAAIO,CAAAA,IAAI,CAAGD,KAAK,CAACH,IAAI,CAACF,IAAN,CAAhB,CACA,GAAID,CAAAA,IAAI,CAAGM,KAAK,CAACN,IAAD,CAAhB,CACA,GAAIE,CAAAA,IAAI,CAAGI,KAAK,CAACJ,IAAD,CAAhB,CAEA,GAAIM,CAAAA,CAAC,CAAGC,IAAI,CAACC,GAAL,CAASL,IAAI,CAAC,CAAd,EAAmBI,IAAI,CAACC,GAAL,CAASL,IAAI,CAAC,CAAd,CAAnB,CACNI,IAAI,CAACC,GAAL,CAASH,IAAI,CAAC,CAAd,EAAmBE,IAAI,CAACC,GAAL,CAASH,IAAI,CAAC,CAAd,CAAnB,CAAsCE,IAAI,CAACE,GAAL,CAASX,IAAT,CAAtC,CAAuDS,IAAI,CAACE,GAAL,CAAST,IAAT,CADzD,CAEA,GAAIU,CAAAA,CAAC,CAAG,EAAIH,IAAI,CAACI,KAAL,CAAWJ,IAAI,CAACK,IAAL,CAAUN,CAAV,CAAX,CAAyBC,IAAI,CAACK,IAAL,CAAU,EAAEN,CAAZ,CAAzB,CAAZ,CACA,GAAIO,CAAAA,CAAC,CAAGX,CAAC,CAAGQ,CAAZ,CACA,MAAOG,CAAAA,CAAP,CACD,CAGL,QAAST,CAAAA,KAAT,CAAeU,KAAf,CACA,CACI,MAAOA,CAAAA,KAAK,CAAGP,IAAI,CAACQ,EAAb,CAAkB,GAAzB,CACH,CAED,GAAMC,CAAAA,UAAU,CAAC,QAAjB,CACA,GAAMC,CAAAA,WAAW,CAAG,GAApB,CACA,GAAMC,CAAAA,SAAS,CAAGhE,UAAU,CAAC,SAACiE,KAAD,QAAY,CACvCC,IAAI,CAAE,CACJC,OAAO,CAAE,MADL,CADiC,CAIvCC,KAAK,CAAE,CACLC,OAAO,CAAEJ,KAAK,CAACK,OAAN,CAAc,CAAd,CADJ,CAELC,SAAS,CAAE,QAFN,CAGLC,KAAK,CAAEP,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmBC,SAHrB,CAJgC,CASvCC,KAAK,CAAE,CACLC,MAAM,CAAE,CADH,CAELC,UAAU,CAAE,QAAU;AAFjB,CATgC,CAavCC,WAAW,CAAE,CACXC,KAAK,CAAE,MADI,CAb0B,CAgBvCC,WAAW,CAAE,CACXZ,OAAO,CAAEJ,KAAK,CAACK,OAAN,CAAc,CAAd,CADE,CAEXE,KAAK,CAAEP,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmBC,SAFf,CAhB0B,CAoBvCO,MAAM,oBACHjB,KAAK,CAACkB,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CADG,CAC0B,CAC5BJ,KAAK,CAAEjB,WADqB,CAE5BsB,UAAU,CAAE,CAFgB,CAD1B,CApBiC,CA0BvCC,IAAI,CAAC,CACHN,KAAK,CAAEjB,WAAW,CAAC,EADhB,CA1BkC,CA6BvCwB,MAAM,oBACHtB,KAAK,CAACkB,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CADG,CAC0B,CAC5BJ,KAAK,uBAAiBjB,WAAjB,OADuB,CAE5Bc,MAAM,CAAC,MAFqB,CAG5BW,UAAU,CAAEzB,WAHgB,CAD1B,CA7BiC,CAoCvC0B,UAAU,kBACRC,WAAW,CAAEzB,KAAK,CAACK,OAAN,CAAc,CAAd,CADL,EAEPL,KAAK,CAACkB,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CAFO,CAEsB,CAC5BjB,OAAO,CAAE,MADmB,CAFtB,CApC6B,CA0CvCwB,OAAO,CAAE1B,KAAK,CAAC2B,MAAN,CAAaD,OA1CiB,CA2CvCE,WAAW,CAAE,CACXb,KAAK,CAAEjB,WADI,CA3C0B,CA8CvC+B,OAAO,CAAE,CACPC,QAAQ,CAAE,CADH,CAEP1B,OAAO,CAAEJ,KAAK,CAACK,OAAN,CAAc,CAAd,CAAgB,CAAhB,CAFF,CAGPO,MAAM,CAAC,MAHA,CA9C8B,CAmDvCmB,KAAK,CAAC,CACJnB,MAAM,CAAC,MADH,CAnDiC,CAsDvCoB,eAAe,CAAG,CAChB9B,OAAO,CAAE,MADO,CAEhB+B,aAAa,CAAE,QAFC,CAGhBC,cAAc,CAAE,QAHA,CAtDqB,CA2DvCC,MAAM,CAAE,CACN5B,KAAK,CAAEP,KAAK,CAACQ,OAAN,CAAc4B,eAAd,CAA8B9E,UAAU,CAAC,GAAD,CAAxC,CADD,CAEN+E,eAAe,CAAE/E,UAAU,CAAC,GAAD,CAFrB,CA3D+B,CA+DvCgF,MAAM,CAAE,CACN/B,KAAK,CAAEP,KAAK,CAACQ,OAAN,CAAc4B,eAAd,CAA8B7E,UAAU,CAAC,GAAD,CAAxC,CADD,CAEN8E,eAAe,CAAE9E,UAAU,CAAC,GAAD,CAFrB,CA/D+B,CAAZ,EAAD,CAA5B,CAqEA,GAAIgF,CAAAA,SAAS,CAACC,MAAM,CAACC,IAAP,CAAYrE,QAAZ,CAAd,CACA,GAAIsE,CAAAA,WAAW,CAAC,EAAhB,CACA,QAASC,CAAAA,UAAT,CAAoBC,MAApB,CAA4BC,MAA5B,CAAmC,CACjC,GAAIC,CAAAA,GAAG,CAACF,MAAM,CAACG,WAAP,EAAR,CACM,GAAIC,CAAAA,QAAQ,CAAGH,MAAM,CAAC,CAAD,CAArB,CACA,IAAI,GAAII,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAGJ,MAAM,CAACK,MAA1B,CAAkCD,CAAC,EAAnC,CAAsC,CAClCH,GAAG,CAAGA,GAAG,CAACK,KAAJ,CAAUN,MAAM,CAACI,CAAD,CAAhB,EAAqBG,IAArB,CAA0BJ,QAA1B,CAAN,CACH,CACDF,GAAG,CAAGA,GAAG,CAACK,KAAJ,CAAUH,QAAV,CAAN,CACA,MAAOF,CAAAA,GAAP,CACP,CACDP,SAAS,CAACc,GAAV,CAAc,SAAAC,IAAI,CAAE,CAClB,GAAIC,CAAAA,GAAG,CAACnF,QAAQ,CAACkF,IAAD,CAAhB,CACA,GAAIT,CAAAA,MAAM,CAAC,EAAX,CACAA,MAAM,EAAES,IAAR,CACAX,UAAU,CAACY,GAAG,CAACC,IAAL,CAAU,CAAC,GAAD,CAAK,GAAL,CAAS,GAAT,CAAV,CAAV,CAAmCH,GAAnC,CAAuC,SAAAI,KAAK,CAAE,CAC5CZ,MAAM,EAAEY,KAAK,CAACC,IAAN,EAAR,CACD,CAFD,EAGAf,UAAU,CAACY,GAAG,CAACI,YAAL,CAAkB,CAAC,GAAD,CAAK,GAAL,CAAS,GAAT,CAAlB,CAAV,CAA2CN,GAA3C,CAA+C,SAAAI,KAAK,CAAE,CACpDZ,MAAM,EAAEY,KAAK,CAACC,IAAN,EAAR,CACD,CAFD,EAGAf,UAAU,CAACY,GAAG,CAACK,WAAL,CAAiB,CAAC,GAAD,CAAK,GAAL,CAAS,GAAT,CAAjB,CAAV,CAA0CP,GAA1C,CAA8C,SAAAI,KAAK,CAAE,CACnDZ,MAAM,EAAEY,KAAK,CAACC,IAAN,EAAR,CACD,CAFD,EAIAf,UAAU,CAACY,GAAG,CAACM,IAAL,CAAU,CAAC,GAAD,CAAK,GAAL,CAAS,GAAT,CAAV,CAAV,CAAmCR,GAAnC,CAAuC,SAAAI,KAAK,CAAE,CAC5CZ,MAAM,EAAEY,KAAK,CAACC,IAAN,EAAR,CACD,CAFD,EAGAf,UAAU,CAACY,GAAG,CAACO,QAAL,CAAc,CAAC,GAAD,CAAK,GAAL,CAAS,GAAT,CAAd,CAAV,CAAuCT,GAAvC,CAA2C,SAAAI,KAAK,CAAE,CAChDZ,MAAM,EAAEY,KAAK,CAACC,IAAN,EAAR,CACD,CAFD,EAGA,GAAG,mBAAqBH,CAAAA,GAArB,EAA4BA,GAAG,CAACQ,eAAnC,CACElB,MAAM,EAAE,eAAR,CAEFH,WAAW,CAACY,IAAD,CAAX,CAAkBT,MAAlB,CACD,CAxBD,EA2BA,GAAImB,CAAAA,SAAS,CAAC,GAAd,CAAkBC,OAAO,CAAG,GAAI/F,CAAAA,OAAJ,EAA5B,CAA0CgG,SAAS,CAAC,IAApD,CAAyDC,QAAzD,CAAkEC,cAAc,CAAC,OAAjF,CAAyFC,WAAW,CAAC,IAArG,CAA0GC,OAAO,CAAC,IAAlH,CACA,GAAGL,OAAO,CAACM,GAAR,CAAY,OAAZ,GAAsBC,SAAtB,EAAmCP,OAAO,CAACM,GAAR,CAAY,OAAZ,GAAsB,IAA5D,CAAiEL,SAAS,CAAC,KAAV,CAGjE,GAAMO,CAAAA,IAAI,CAAC,QAALA,CAAAA,IAAK,CAAAC,KAAK,CAAE,IACRC,CAAAA,MADQ,CACGD,KADH,CACRC,MADQ,CAEhB,GAAMC,CAAAA,OAAO,CAAG7E,SAAS,EAAzB,CACA,GAAMC,CAAAA,KAAK,CAAGhE,QAAQ,EAAtB,CAHgB,cAIoBJ,QAAQ,CAAC,KAAD,CAJ5B,wCAITiJ,UAJS,eAIGC,aAJH,8BAKqBlJ,QAAQ,CAAC,KAAD,CAL7B,yCAKTmJ,YALS,eAKIC,eALJ,8BAMWpJ,QAAQ,CAAC,EAAD,CANnB,yCAMTqJ,OANS,eAMDC,UANC,8BAOQtJ,QAAQ,CAAC,KAAD,CAPhB,yCAOTuJ,IAPS,eAOHC,OAPG,8BAQKxJ,QAAQ,CAAC,MAAD,CARb,0CAQTyJ,IARS,gBAQJC,OARI,gCASe1J,QAAQ,CAACwI,cAAD,CATvB,2CASTmB,SATS,gBASCC,YATD,gCAUqB5J,QAAQ,CAACwC,QAAD,CAV7B,2CAUTqH,YAVS,gBAUIC,eAVJ,gCAWiB9J,QAAQ,CAAC,KAAD,CAXzB,2CAWT+J,UAXS,gBAWEC,aAXF,gCAYehK,QAAQ,CAAC,KAAD,CAZvB,2CAYTiK,SAZS,gBAYCC,YAZD,gCAaalK,QAAQ,CAAC,CAAD,CAbrB,2CAaTmK,QAbS,gBAaAC,WAbA,gCAcOpK,QAAQ,CAAC,CAACsI,SAAF,CAdf,2CAcT+B,KAdS,gBAcHC,QAdG,gCAeStK,QAAQ,CAAC,KAAD,CAfjB,2CAeTuK,MAfS,gBAeFC,SAfE,gCAgBexK,QAAQ,CAAC,KAAD,CAhBvB,2CAgBTyK,SAhBS,gBAgBCC,YAhBD,gCAiBa1K,QAAQ,CAAC,KAAD,CAjBrB,2CAiBT2K,QAjBS,gBAiBAC,WAjBA,gCAkBiB5K,QAAQ,CAAC,KAAD,CAlBzB,2CAkBT6K,UAlBS,gBAkBEC,aAlBF,gCAmBa9K,QAAQ,CAAC,IAAD,CAnBrB,2CAmBT+K,QAnBS,gBAmBAC,WAnBA,gCAoBqBhL,QAAQ,CAAC,EAAD,CApB7B,2CAoBTiL,YApBS,gBAoBIC,eApBJ,gCAqBOlL,QAAQ,CAAC,EAAD,CArBf,2CAqBTmL,KArBS,gBAqBHC,QArBG,gCAsBSpL,QAAQ,CAAC,KAAD,CAtBjB,2CAsBTqL,MAtBS,gBAsBFC,SAtBE,gCAuBWtL,QAAQ,CAAC,IAAD,CAvBnB,2CAuBTuL,OAvBS,gBAuBDC,UAvBC,gBAyBhB,GAAMC,CAAAA,OAAO,CAACvL,MAAM,EAApB,CACA,GAAMwL,CAAAA,YAAY,CAACxL,MAAM,EAAzB,CACA,GAAMyL,CAAAA,OAAO,CAACzL,MAAM,EAApB,CACA,GAAM0L,CAAAA,UAAU,CAAC1L,MAAM,EAAvB,CACA,GAAM2L,CAAAA,OAAO,CAAC3L,MAAM,EAApB,CACA,GAAM4L,CAAAA,IAAI,CAAC5L,MAAM,EAAjB,CACA,GAAM6L,CAAAA,IAAI,CAAC7L,MAAM,EAAjB,CAEA,GAAM8L,CAAAA,MAAM,CAAC,QAAPA,CAAAA,MAAO,CAAA3C,OAAO,CAAE,CACpBC,UAAU,CAACD,OAAD,CAAV,CACAD,eAAe,CAAC,IAAD,CAAf,CACD,CAHD,CAKA,GAAM6C,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC/B/C,aAAa,CAAC,CAACD,UAAF,CAAb,CACD,CAFD,CAIA,GAAMiD,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAQC,OAAR,CAAoB,CACrC,GAAGA,OAAO,EAAE,IAAZ,CACE5C,OAAO,CAAC4C,OAAD,CAAP,CACH,CAHD,CAKA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACF,KAAD,CAAQG,OAAR,CAAoB,CACrC,GAAGA,OAAO,EAAE,IAAZ,CACE5C,OAAO,CAAC4C,OAAD,CAAP,CACH,CAHD,CAKA,GAAMC,CAAAA,GAAG,CAAC,QAAJA,CAAAA,GAAI,EAAI,CACZ/C,OAAO,CAAC,KAAD,CAAP,CACD,CAFD,CAIA,GAAMgD,CAAAA,aAAa,CAAC,QAAdA,CAAAA,aAAc,CAAA9E,IAAI,CAAE,CACxBkC,YAAY,CAAClC,IAAD,CAAZ,CACAwC,YAAY,CAAC,IAAD,CAAZ,CACD,CAHD,CAKA,GAAMuC,CAAAA,YAAY,CAAC,QAAbA,CAAAA,YAAa,EAAI,CACrB,GAAIC,CAAAA,WAAW,CAAC,GAAIC,CAAAA,IAAJ,CAAShB,OAAO,CAACiB,OAAR,CAAgBC,KAAzB,EAAgCC,OAAhC,GAA0CH,IAAI,CAACI,GAAL,EAA1D,CACAtB,OAAO,CAACmB,OAAR,CAAgBxC,WAAhB,CAA4BsC,WAA5B,EACAtC,WAAW,CAACsC,WAAD,CAAX,CACA1C,aAAa,CAAC,KAAD,CAAb,CACD,CALD,CAOA/J,SAAS,CAAC,UAAI,CACZ,GAAG,CAACoK,KAAD,EAAU,CAAC3B,OAAd,CAAsB,CACpB8B,SAAS,CAAC,IAAD,CAAT,CACD,CACF,CAJQ,CAIP,CAACH,KAAD,CAJO,CAAT,CAMApK,SAAS,CAAC,UAAI,CACZyI,OAAO,CAAC,KAAR,CACAnG,QAAQ,CAACyK,SAAT,GAAqBC,UAArB,CAAgC,YAAhC,EAA8CC,GAA9C,CAAkD,OAAlD,EAA2DC,UAA3D,CAAsE,SAAAC,WAAW,CAAI,CACnFhC,QAAQ,CAACgC,WAAW,CAACC,IAAZ,EAAD,CAAR,CACD,CAFD,CAEG,SAAAC,GAAG,CAAI,CACRC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACD,CAJD,EAKAG,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyC,SAASC,QAAT,CAAmB,CAC1D5C,WAAW,CAAC,CACV6C,GAAG,CAACD,QAAQ,CAACE,MAAT,CAAgBC,QADV,CAEVC,GAAG,CAACJ,QAAQ,CAACE,MAAT,CAAgBG,SAFV,CAAD,CAAX,CAID,CALD,EAMD,CAbQ,CAaP,EAbO,CAAT,CAeA,GAAMC,CAAAA,SAAS,CAAC,QAAVA,CAAAA,SAAU,CAAAxG,IAAI,CAAE,CACpBnF,QAAQ,CAACyK,SAAT,GAAqBC,UAArB,CAAgC,YAAhC,EAA8CC,GAA9C,CAAkD,OAAlD,EAA2DiB,MAA3D,oBACGzG,IAAI,CAAC,IADR,CACcnF,QAAQ,CAACyK,SAAT,CAAmBoB,UAAnB,CAA8BC,SAA9B,CAAwC,CAAxC,CADd,GAGD,CAJD,CAMA,GAAMC,CAAAA,YAAY,CAAC,QAAbA,CAAAA,YAAa,CAAA5G,IAAI,CAAE,CACvBnF,QAAQ,CAACyK,SAAT,GAAqBC,UAArB,CAAgC,YAAhC,EAA8CC,GAA9C,CAAkD,OAAlD,EAA2DiB,MAA3D,oBACGzG,IAAI,CAAC,IADR,CACcnF,QAAQ,CAACyK,SAAT,CAAmBoB,UAAnB,CAA8BC,SAA9B,CAAwC,CAAxC,CADd,GAGD,CAJD,CAKApO,SAAS,CAAC,UAAI,CACZ,GAAGwJ,IAAI,EAAE,OAAT,CACEO,aAAa,CAAC,IAAD,CAAb,CADF,IAEK,IAAGP,IAAI,EAAE,MAAT,CAAgB,CACnBW,WAAW,CAAC,CAAD,CAAX,CACAqB,OAAO,CAACmB,OAAR,CAAgBxC,WAAhB,CAA4B,CAA5B,EACD,CACF,CAPQ,CAOP,CAACX,IAAD,CAPO,CAAT,CASA,GAAM8E,CAAAA,SAAS,CAAC,QAAVA,CAAAA,SAAU,EAAI,CAClBlG,OAAO,CAACmG,GAAR,CAAY,OAAZ,CAAoB,IAApB,CAAyB,CAAEC,IAAI,CAAE,GAAR,CAAaC,MAAM,CAAEzK,UAArB,CAAzB,EACD,CAFD,CAIAhE,SAAS,CAAC,UAAI,CACZ,GAAG,CAAC0K,QAAD,EAAalC,WAAW,EAAE,IAA7B,CACEA,WAAW,CAACkG,GAAZ,GACH,CAHQ,CAGP,CAAChE,QAAD,CAHO,CAAT,CAKA,GAAMiE,CAAAA,YAAY,CAAC,QAAbA,CAAAA,YAAa,CAAAlH,IAAI,CAAE,CACvBe,WAAW,CAAClG,QAAQ,CAACsM,QAAT,GAAoBC,GAApB,GAA0BC,KAA1B,CAAgC,UAAhC,EAA4CA,KAA5C,CAAkDrH,IAAlD,CAAZ,CACAe,WAAW,CAACuG,EAAZ,CAAe,OAAf,CAAwB,SAASC,QAAT,CAAmB,CACzC,GAAGA,QAAQ,CAACC,GAAT,IAAgB,IAAnB,CAAwBhE,eAAe,CAAC+D,QAAQ,CAACC,GAAT,EAAD,CAAf,CAAxB,IACKhE,CAAAA,eAAe,CAAC,EAAD,CAAf,CACN,CAHD,EAIAN,WAAW,CAAC,IAAD,CAAX,CACD,CAPD,CASA,GAAMuE,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,EAAI,CACpB,GAAIlH,CAAAA,IAAI,CAAC4D,OAAO,CAACe,OAAR,CAAgBC,KAAhB,CAAsB/E,IAAtB,EAAT,CACA,GAAIsH,CAAAA,OAAO,CAACxD,UAAU,CAACgB,OAAX,CAAmBC,KAAnB,CAAyB/E,IAAzB,EAAZ,CACA,GAAGG,IAAI,CAACX,MAAL,EAAa,CAAb,EAAkB8H,OAAO,CAAC9H,MAAR,EAAgB,CAArC,CACE0E,MAAM,CAAC,yBAAD,CAAN,CADF,IAEI,CACFlB,aAAa,CAAC,KAAD,CAAb,CACArC,WAAW,CAAC4G,IAAZ,GAAmBb,GAAnB,CAAuB,CACrBvG,IAAI,CAACA,IADgB,CAErBmH,OAAO,CAACA,OAFa,CAGrBE,SAAS,CAAC3C,IAAI,CAACI,GAAL,EAHW,CAAvB,EAIGwC,IAJH,CAIQ,UAAI,CACVvD,MAAM,CAAC,eAAD,CAAN,CACAsC,YAAY,CAAC3E,SAAD,CAAZ,CACD,CAPD,EAOG6F,KAPH,CAOS,SAAAlC,GAAG,CAAE,CACZtB,MAAM,CAACsB,GAAG,CAACjE,OAAL,CAAN,CACD,CATD,EAUD,CACF,CAlBD,CAoBA,GAAMoG,CAAAA,MAAM,CAAC,QAAPA,CAAAA,MAAO,CAAAC,CAAC,CAAE,CACd,GAAIC,CAAAA,QAAQ,CAAC5I,UAAU,CAAC2I,CAAC,CAACE,MAAF,CAAS/C,KAAV,CAAgB,CAAC,GAAD,CAAK,GAAL,CAAS,GAAT,CAAhB,CAAvB,CACA,GAAIgD,CAAAA,YAAY,CAAC,EAAjB,CACA,GAAIhJ,CAAAA,IAAI,CAACD,MAAM,CAACC,IAAP,CAAYC,WAAZ,CAAT,CACAD,IAAI,CAACY,GAAL,CAAS,SAAAqI,GAAG,CAAE,CACZ,GAAIC,CAAAA,SAAS,CAAC,KAAd,CACA,GAAIlI,CAAAA,KAAK,CAAC,EAAV,CACA8H,QAAQ,CAAClI,GAAT,CAAa,SAAAuI,OAAO,CAAE,CACpBnI,KAAK,EAAEmI,OAAP,CACD,CAFD,EAGA,GAAGlJ,WAAW,CAACgJ,GAAD,CAAX,CAAiBG,QAAjB,CAA0BpI,KAA1B,CAAH,CACEgI,YAAY,CAACC,GAAD,CAAZ,CAAkBtN,QAAQ,CAACsN,GAAD,CAA1B,CACH,CARD,EASAhG,eAAe,CAAC+F,YAAD,CAAf,CAED,CAfD,CAiBA5P,SAAS,CAAC,UAAI,CACZ,GAAI8K,QAAQ,EAAE,IAAd,CAAoB,CAClBU,OAAO,CAACmB,OAAR,CAAgB7B,QAAhB,CAAyBA,QAAzB,EACD,CACF,CAJQ,CAIP,CAACA,QAAD,CAJO,CAAT,CAMA9K,SAAS,CAAC,UAAI,CACZ,GAAGoL,MAAH,CAAW,CACT9C,QAAQ,CAAE2H,WAAW,CAAC,UAAM,CAC1B,GAAGvG,SAAS,EAAE,IAAX,EAAmBoB,QAAQ,EAAE,IAAhC,CAAqC,CACnC,GAAIpD,CAAAA,GAAG,CAACnF,QAAQ,CAACmH,SAAD,CAAhB,CACA,GAAIwG,CAAAA,GAAG,CAAC,CAACxI,GAAG,CAACyI,SAAL,CAAezI,GAAG,CAAC0I,SAAnB,CAAR,CACA,GAAIC,CAAAA,IAAI,CAACzN,gBAAgB,CAACsN,GAAD,CAAKxD,IAAI,CAACI,GAAL,GAAW5C,QAAhB,CAAyBY,QAAQ,CAAC8C,GAAlC,CAAsC9C,QAAQ,CAACiD,GAA/C,CAAmD,CAAnD,CAAzB,CACAxC,UAAU,CAAC8E,IAAD,CAAV,CACA;AAEA,GAAIC,CAAAA,IAAI,CAAGzE,IAAI,CAACc,OAAL,CAAa4D,UAAb,CAAwB,IAAxB,CAAX,CACAD,IAAI,CAACE,SAAL,CAAe,CAAf,CAAkB,CAAlB,CAAqBrI,SAArB,CAA+BA,SAA/B,EAEAmI,IAAI,CAACG,SAAL,GACAH,IAAI,CAACI,WAAL,CAAmB,SAAnB,CACAJ,IAAI,CAACK,MAAL,CAAYxI,SAAS,CAAC,CAAtB,CAAyBA,SAAS,CAAC,CAAnC,EACAmI,IAAI,CAACM,MAAL,CAAYzI,SAAS,CAAC,CAAtB,CAAwBA,SAAxB,EACAmI,IAAI,CAACK,MAAL,CAAYxI,SAAS,CAAC,CAAtB,CAAyBA,SAAS,CAAC,CAAnC,EACAmI,IAAI,CAACM,MAAL,CAAYzI,SAAS,CAAC,CAAtB,CAAyB,CAAzB,EACAmI,IAAI,CAACK,MAAL,CAAYxI,SAAS,CAAC,CAAtB,CAAyBA,SAAS,CAAC,CAAnC,EACAmI,IAAI,CAACM,MAAL,CAAYzI,SAAZ,CAAuBA,SAAS,CAAC,CAAjC,EACAmI,IAAI,CAACK,MAAL,CAAYxI,SAAS,CAAC,CAAtB,CAAyBA,SAAS,CAAC,CAAnC,EACAmI,IAAI,CAACM,MAAL,CAAY,CAAZ,CAAezI,SAAS,CAAC,CAAzB,EACA;AAEAmI,IAAI,CAACO,IAAL,CAAY,YAAZ,CACAP,IAAI,CAACQ,QAAL,CAAc,GAAd,CAAmB3I,SAAS,CAAC,CAAV,CAAY,CAA/B,CAAkC,EAAlC,EACAmI,IAAI,CAACQ,QAAL,CAAc,GAAd,CAAmB3I,SAAS,CAAC,CAAV,CAAY,CAA/B,CAAkCA,SAAlC,EACAmI,IAAI,CAACQ,QAAL,CAAc,GAAd,CAAmB,CAAnB,CAAsB3I,SAAS,CAAC,CAAV,CAAY,CAAlC,EACAmI,IAAI,CAACQ,QAAL,CAAc,GAAd,CAAmB3I,SAAS,CAAC,EAA7B,CAAiCA,SAAS,CAAC,CAAV,CAAY,CAA7C,EAEAmI,IAAI,CAACS,IAAL,GAEAT,IAAI,CAACU,MAAL,GACAV,IAAI,CAACG,SAAL,GACAH,IAAI,CAACK,MAAL,CAAYxI,SAAS,CAAC,CAAtB,CAAyBA,SAAS,CAAC,CAAnC,EACAmI,IAAI,CAACI,WAAL,CAAmB,SAAnB,CACA,GAAIO,CAAAA,MAAM,CAACZ,IAAI,CAACa,OAAL,CAAa,EAAxB,CACA,GAAIC,CAAAA,EAAE,CAAC5N,IAAI,CAACE,GAAL,CAASwN,MAAM,CAAC1N,IAAI,CAACQ,EAAZ,CAAe,GAAxB,EAA6BoE,SAA7B,CAAuC,CAA9C,CACA,GAAIiJ,CAAAA,EAAE,CAAC7N,IAAI,CAACC,GAAL,CAASyN,MAAM,CAAC1N,IAAI,CAACQ,EAAZ,CAAe,GAAxB,EAA6BoE,SAA7B,CAAuC,CAA9C,CACAmI,IAAI,CAACM,MAAL,CAAYO,EAAE,CAAChJ,SAAS,CAAC,CAAzB,CAA2BiJ,EAAE,CAACjJ,SAAS,CAAC,CAAxC,EACAmI,IAAI,CAACU,MAAL,GAIA,GAAIK,CAAAA,IAAI,CAAGvF,IAAI,CAACa,OAAL,CAAa4D,UAAb,CAAwB,IAAxB,CAAX,CACAc,IAAI,CAACb,SAAL,CAAe,CAAf,CAAkB,CAAlB,CAAqBrI,SAArB,CAA+BA,SAA/B,EAEAkJ,IAAI,CAACZ,SAAL,GACAY,IAAI,CAACX,WAAL,CAAmB,SAAnB,CACAW,IAAI,CAACV,MAAL,CAAYxI,SAAS,CAAC,CAAtB,CAAyBA,SAAS,CAAC,CAAnC,EACAkJ,IAAI,CAACT,MAAL,CAAYzI,SAAS,CAAC,CAAtB,CAAwBA,SAAxB,EACAkJ,IAAI,CAACV,MAAL,CAAYxI,SAAS,CAAC,CAAtB,CAAyBA,SAAS,CAAC,CAAnC,EACAkJ,IAAI,CAACT,MAAL,CAAYzI,SAAS,CAAC,CAAtB,CAAyB,CAAzB,EACAkJ,IAAI,CAACV,MAAL,CAAYxI,SAAS,CAAC,CAAtB,CAAyBA,SAAS,CAAC,CAAnC,EACAkJ,IAAI,CAACT,MAAL,CAAYzI,SAAZ,CAAuBA,SAAS,CAAC,CAAjC,EACAkJ,IAAI,CAACV,MAAL,CAAYxI,SAAS,CAAC,CAAtB,CAAyBA,SAAS,CAAC,CAAnC,EACAkJ,IAAI,CAACT,MAAL,CAAY,CAAZ,CAAezI,SAAS,CAAC,CAAzB,EACA;AAEAkJ,IAAI,CAACR,IAAL,CAAY,YAAZ,CACAQ,IAAI,CAACP,QAAL,CAAc,YAAd,CAA4B3I,SAAS,CAAC,CAAV,CAAY,CAAxC,CAA2C,EAA3C,EACAkJ,IAAI,CAACP,QAAL,CAAc,YAAd,CAA4B3I,SAAS,CAAC,CAAV,CAAY,CAAxC,CAA2CA,SAA3C,EACAkJ,IAAI,CAACP,QAAL,CAAc,YAAd,CAA4B,CAA5B,CAA+B3I,SAAS,CAAC,CAAV,CAAY,CAA3C,EAEAkJ,IAAI,CAACN,IAAL,GAEAM,IAAI,CAACL,MAAL,GACAK,IAAI,CAACZ,SAAL,GACAY,IAAI,CAACV,MAAL,CAAYxI,SAAS,CAAC,CAAtB,CAAyBA,SAAS,CAAC,CAAnC,EACAkJ,IAAI,CAACX,WAAL,CAAmB,SAAnB,CACA,GAAIY,CAAAA,MAAM,CAAC,CAACjB,IAAI,CAACkB,SAAjB,CACA,GAAIC,CAAAA,EAAE,CAACjO,IAAI,CAACE,GAAL,CAAS6N,MAAM,CAAC/N,IAAI,CAACQ,EAAZ,CAAe,GAAxB,EAA6BoE,SAA7B,CAAuC,CAA9C,CACA,GAAIsJ,CAAAA,EAAE,CAAClO,IAAI,CAACC,GAAL,CAAS8N,MAAM,CAAC/N,IAAI,CAACQ,EAAZ,CAAe,GAAxB,EAA6BoE,SAA7B,CAAuC,CAA9C,CACAkJ,IAAI,CAACT,MAAL,CAAYY,EAAE,CAACrJ,SAAS,CAAC,CAAzB,CAA2BsJ,EAAE,CAACtJ,SAAS,CAAC,CAAxC,EACAkJ,IAAI,CAACL,MAAL,GAGD,CACF,CA7EoB,CA6ElB,GA7EkB,CAArB,CA8ED,CA/ED,IA+EO,CACLU,aAAa,CAACpJ,QAAD,CAAb,CACD,CACF,CAnFQ,CAmFP,CAAC8C,MAAD,CAnFO,CAAT,CAsFA,GAAMuG,CAAAA,UAAU,CAAC,QAAXA,CAAAA,UAAW,EAAI,CACnBnE,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyC,SAASC,QAAT,CAAmB,CAC1D5C,WAAW,CAAC,CACV6C,GAAG,CAACD,QAAQ,CAACE,MAAT,CAAgBC,QADV,CAEVC,GAAG,CAACJ,QAAQ,CAACE,MAAT,CAAgBG,SAFV,CAAD,CAAX,CAID,CALD,EAMA,GAAGlD,QAAQ,EAAE,IAAb,CAAkB,CAChB,GAAI8G,CAAAA,GAAG,CAAC,QAAR,CAAiBC,OAAjB,CACAlL,MAAM,CAACC,IAAP,CAAYrE,QAAZ,EAAsBiF,GAAtB,CAA0B,SAAAC,IAAI,CAAE,CAC9B,GAAIC,CAAAA,GAAG,CAACnF,QAAQ,CAACkF,IAAD,CAAhB,CACA,GAAIyI,CAAAA,GAAG,CAAC,CAACxI,GAAG,CAACyI,SAAL,CAAezI,GAAG,CAAC0I,SAAnB,CAAR,CACA,GAAIC,CAAAA,IAAI,CAACzN,gBAAgB,CAACsN,GAAD,CAAKxD,IAAI,CAACI,GAAL,GAAW5C,QAAhB,CAAyBY,QAAQ,CAAC8C,GAAlC,CAAsC9C,QAAQ,CAACiD,GAA/C,CAAmD,CAAnD,CAAzB,CACA,GAAI+D,CAAAA,WAAW,CAACjP,QAAQ,CAACiI,QAAQ,CAAC8C,GAAV,CAAc9C,QAAQ,CAACiD,GAAvB,CAA2BsC,IAAI,CAACzC,GAAhC,CAAoCyC,IAAI,CAACtC,GAAzC,CAAxB,CACA,GAAG+D,WAAW,CAACF,GAAf,CAAmB,CACjBA,GAAG,CAACE,WAAJ,CACAD,OAAO,CAACpK,IAAR,CACD,CACF,CATD,EAUAkC,YAAY,CAACkI,OAAD,CAAZ,CACD,CACF,CArBD,CAuBA,GAAME,CAAAA,aAAa,CAAC,QAAdA,CAAAA,aAAc,EAAI,CACtBvE,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyC,SAASC,QAAT,CAAmB,CAC1D5C,WAAW,CAAC,CACV6C,GAAG,CAACD,QAAQ,CAACE,MAAT,CAAgBC,QADV,CAEVC,GAAG,CAACJ,QAAQ,CAACE,MAAT,CAAgBG,SAFV,CAAD,CAAX,CAID,CALD,EAMA,GAAGlD,QAAQ,EAAE,IAAb,CAAkBO,SAAS,CAAC,IAAD,CAAT,CACnB,CARD,CAUArL,SAAS,CAAC,UAAI,CACZwL,OAAO,CAACmB,OAAR,CAAgBhD,YAAhB,CAA6B,CAC3BqI,OAAO,CAACtI,SADmB,CAE3B0D,IAAI,CAAC7K,QAAQ,CAACmH,SAAD,CAFc,CAA7B,EAIAuE,SAAS,CAACvE,SAAD,CAAT,CACD,CANQ,CAMP,CAACA,SAAD,CANO,CAAT,CAQA,GAAMuI,CAAAA,SAAS,CAAGnJ,MAAM,GAAKH,SAAX,CAAuB,iBAAMG,CAAAA,MAAM,GAAGoJ,QAAT,CAAkBC,IAAxB,EAAvB,CAAsDxJ,SAAxE,CACA,GAAMvD,CAAAA,MAAM,cACV,2BAAK,SAAS,CAAC,UAAf,eACA,+CAEA,oBAAC,MAAD,EAAQ,KAAK,CAAE,CAACgN,SAAS,CAAC,MAAX,CAAf,CAAmC,OAAO,CAAE,kBAAI,CAAC/H,QAAQ,CAAC,IAAD,CAAR,CAAe,CAAhE,CAAkE,OAAO,CAAC,UAA1E,CAAqF,KAAK,CAAC,WAA3F,UAFA,cAKA,oBAAC,MAAD,EAAS,KAAK,CAAE,CAAC+H,SAAS,CAAC,MAAX,CAAkB1M,UAAU,CAAC,KAA7B,CAAhB,CAAqD,OAAO,CAAE,kBAAI,CAAC+E,YAAY,CAAC,IAAD,CAAZ,CAAmB,CAAtF,CAAwF,OAAO,CAAC,UAAhG,CAA2G,KAAK,CAAC,SAAjH,cALA,cASE,oBAAC,iBAAD,EACE,KAAK,CAAEnB,IADT,CAEE,SAAS,KAFX,CAGE,QAAQ,CAAE2C,UAHZ,CAIE,aAAW,gBAJb,CAKE,KAAK,CAAE,CAACmG,SAAS,CAAC,MAAX,CALT,eAOI,oBAAC,YAAD,EAAc,KAAK,CAAC,KAApB,CAA0B,aAAW,cAArC,eACE,oBAAC,OAAD,EAAS,KAAK,CAAC,UAAf,eACE,oBAAC,WAAD,MADF,CADF,CAPJ,cAYI,oBAAC,YAAD,EAAc,KAAK,CAAC,OAApB,CAA4B,aAAW,UAAvC,eACE,oBAAC,OAAD,EAAS,KAAK,CAAC,gBAAf,eACE,oBAAC,eAAD,MADF,CADF,CAZJ,cAiBI,oBAAC,YAAD,EAAc,KAAK,CAAC,IAApB,CAAyB,aAAW,eAApC,eACE,oBAAC,OAAD,EAAS,KAAK,CAAC,eAAf,eACE,oBAAC,kBAAD,MADF,CADF,CAjBJ,cAsBI,oBAAC,YAAD,EAAc,KAAK,CAAC,KAApB,CAA0B,aAAW,WAArC,eACE,oBAAC,OAAD,EAAS,KAAK,CAAC,mBAAf,eACE,oBAAC,cAAD,MADF,CADF,CAtBJ,CATF,cAuCI,oBAAC,iBAAD,EACE,KAAK,CAAE5I,IADT,CAEE,SAAS,KAFX,CAGE,QAAQ,CAAE4C,UAHZ,CAIE,aAAW,gBAJb,CAKE,KAAK,CAAE,CAACgG,SAAS,CAAC,KAAX,CALT,eAOA,oBAAC,YAAD,EAAc,KAAK,CAAC,MAApB,CAA2B,aAAW,cAAtC,eACE,oBAAC,OAAD,EAAS,KAAK,CAAC,MAAf,eACE,oBAAC,eAAD,MADF,CADF,CAPA,cAYA,oBAAC,YAAD,EAAc,OAAO,CAAE,kBAAI,CAACrI,aAAa,CAAC,IAAD,CAAb,CAAoB,CAAhD,CAAkD,KAAK,CAAC,OAAxD,CAAgE,aAAW,cAA3E,eACE,oBAAC,OAAD,EAAS,KAAK,CAAC,aAAf,eACE,oBAAC,gBAAD,MADF,CADF,CAZA,CAvCJ,cAyDE,oBAAC,YAAD,EAAc,KAAK,CAAE,CAACqI,SAAS,CAAC,OAAX,CAArB,CAA0C,OAAO,CAAEL,aAAnD,CAAkE,KAAK,CAAC,OAAxE,CAAgF,aAAW,cAA3F,eACE,oBAAC,OAAD,EAAS,KAAK,CAAC,mEAAf,eACE,oBAAC,gBAAD,MADF,CADF,CAzDF,cA8DE,oBAAC,YAAD,EAAc,KAAK,CAAE,CAACK,SAAS,CAAC,OAAX,CAArB,CAA0C,OAAO,CAAET,UAAnD,CAA+D,KAAK,CAAC,OAArE,CAA6E,aAAW,cAAxF,eACE,oBAAC,OAAD,EAAS,KAAK,CAAC,yEAAf,eACE,oBAAC,QAAD,MADF,CADF,CA9DF,cAmEE,8BAnEF,cAqEI,oBAAC,SAAD,EAAW,KAAK,CAAE,CAACS,SAAS,CAAC,KAAX,CAAlB,CAAqC,QAAQ,CAAE5C,MAA/C,CAAuD,EAAE,CAAC,gBAA1D,CAA2E,KAAK,CAAC,QAAjF,CAA0F,OAAO,CAAC,UAAlG,EArEJ,CADA,cAwEE,oBAAC,IAAD,MAEI7I,MAAM,CAACC,IAAP,CAAYgD,YAAZ,EAA0BpC,GAA1B,CAA8B,SAACqI,GAAD,CAAKwC,GAAL,CAAW,CACvC,GAAI3K,CAAAA,GAAG,CAACkC,YAAY,CAACiG,GAAD,CAApB,CACA,mBACE,4CACE,oBAAC,OAAD,MADF,cAEE,oBAAC,OAAD,MAFF,cAGE,oBAAC,QAAD,EAAU,QAAQ,CAAEA,GAAG,EAAEnG,SAAzB,CAAoC,OAAO,CAAE,yBAAKC,CAAAA,YAAY,CAACkG,GAAD,CAAjB,EAA7C,CAAuE,MAAM,KAA7E,eACE,4CACE,oBAAC,UAAD,EAAY,SAAS,CAAE9G,OAAO,CAACvD,IAA/B,CAAqC,OAAO,CAAC,WAA7C,CAAyD,YAAY,KAArE,EACGkC,GAAG,CAACM,IADP,CADF,cAIE,oBAAC,UAAD,EAAY,OAAO,CAAC,OAApB,CAA4B,YAAY,KAAxC,EACGN,GAAG,CAACI,YADP,CAJF,cAOE,2BAAK,KAAK,CAAE,CAACzD,OAAO,CAAC,MAAT,CAAZ,eACE,oBAAC,MAAD,EAAQ,GAAG,CAAEqD,GAAG,CAACI,YAAjB,CAA+B,GAAG,CAAEJ,GAAG,CAAC4K,WAAJ,CAAgB,CAAhB,CAApC,EADF,cAEE,oBAAC,MAAD,EAAQ,GAAG,CAAE5K,GAAG,CAACI,YAAjB,CAA+B,GAAG,CAAEJ,GAAG,CAAC6K,YAAxC,EAFF,CAPF,cAWE,+CACE,oBAAC,MAAD,EAAQ,KAAK,CAAE,CAACH,SAAS,CAAC,MAAX,CAAf,CAAmC,OAAO,CAAE,kBAAI,CAACnI,YAAY,CAAC,IAAD,CAAZ,CAAmB,CAApE,CAAsE,OAAO,CAAC,UAA9E,CAAyF,KAAK,CAAC,SAA/F,YADF,CAXF,cAgBE,oBAAC,UAAD,EAAY,KAAK,CAAE,CAACmI,SAAS,CAAC,MAAX,CAAnB,CAAuC,OAAO,CAAC,OAA/C,CAAuD,YAAY,KAAnE,eACE,oBAAC,cAAD,EAAgB,KAAK,CAAC,SAAtB,EADF,cAEE,4BAAM,SAAS,CAAC,WAAhB,CAA4B,KAAK,CAAC,UAAlC,EACGvC,GAAG,CAAC,IAAJ,EAAY3E,CAAAA,KAAZ,CAAkBA,KAAK,CAAC2E,GAAG,CAAC,IAAL,CAAvB,CAAkC,CADrC,CAFF,cAKI,2BAAK,KAAK,CAAE,CAAC2C,KAAK,CAAC,OAAP,CAAeC,MAAM,CAAC,SAAtB,CAAZ,CAA8C,OAAO,CAAE,kBAAI,CAAC9D,YAAY,CAACkB,GAAD,CAAZ,CAAkB,CAA9E,eACE,oBAAC,WAAD,EAAa,KAAK,CAAC,SAAnB,EADF,cAEE,4BAAM,SAAS,CAAC,WAAhB,CAA4B,KAAK,CAAC,UAAlC,EACGA,GAAG,CAAC,IAAJ,EAAY3E,CAAAA,KAAZ,CAAkBA,KAAK,CAAC2E,GAAG,CAAC,IAAL,CAAvB,CAAkC,CADrC,CAFF,CALJ,CAhBF,CADF,CAHF,cAkCA,oBAAC,OAAD,MAlCA,cAmCA,oBAAC,OAAD,MAnCA,CADF,CAuCD,CAzCD,CAFJ,CAxEF,cAsHE,oBAAC,OAAD,MAtHF,CADF,CA2HA,mBACI,2BAAK,SAAS,CAAE9G,OAAO,CAAC3E,IAAxB,eACA,oBAAC,QAAD,EACE,YAAY,CAAE,CACZsO,QAAQ,CAAE,KADE,CAEZC,UAAU,CAAE,OAFA,CADhB,CAKE,IAAI,CAAEzJ,YALR,CAME,OAAO,CAAE,kBAAI,CAACC,eAAe,CAAC,KAAD,CAAf,CAAuB,CANvC,CAOE,gBAAgB,CAAE,IAPpB,CAQE,OAAO,CAAEC,OARX,EADA,cAWA,oBAAC,MAAD,EAAQ,IAAI,CAAEgB,KAAd,CAAqB,OAAO,CAAE,kBAAI,CAACC,QAAQ,CAAC,KAAD,CAAR,CAAgB,CAAnD,CAAqD,kBAAgB,mBAArE,eACI,oBAAC,WAAD,EAAa,EAAE,CAAC,mBAAhB,eADJ,cAEI,oBAAC,aAAD,EAAe,SAAS,CAAEtB,OAAO,CAAC3E,IAAlC,eACE,8BAAQ,KAAK,CAAC,KAAd,CAAoB,MAAM,CAAC,KAA3B,CAAiC,GAAG,CAAC,2CAArC,CAAiF,WAAW,CAAC,GAA7F,CAAiG,KAAK,CAAC,0FAAvG,CAAkM,eAAe,KAAjN,EADF,CAFJ,cAKI,oBAAC,aAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAI,CAACiG,QAAQ,CAAC,KAAD,CAAR,CAAgB,CAAtC,CAAwC,KAAK,CAAC,SAA9C,UADF,CALJ,CAXA,cAsBE,oBAAC,MAAD,EAAQ,IAAI,CAAEC,MAAd,CAAsB,OAAO,CAAE,kBAAI,CAACC,SAAS,CAAC,KAAD,CAAT,CAAiB,CAArD,CAAuD,kBAAgB,mBAAvE,eACI,oBAAC,WAAD,EAAa,EAAE,CAAC,mBAAhB,oBADJ,cAEI,oBAAC,aAAD,EAAe,SAAS,CAAExB,OAAO,CAAC3E,IAAlC,eACE,2BAAK,GAAG,CAAEwO,OAAO,CAAC,sBAAD,CAAjB,CAA2C,KAAK,CAAC,MAAjD,EADF,CAFJ,cAKI,oBAAC,aAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAI,CAACrI,SAAS,CAAC,KAAD,CAAT,CAAiB+D,SAAS,GAAI,CAApD,CAAsD,KAAK,CAAC,WAA5D,qBADF,cAIE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAI,CAAC/D,SAAS,CAAC,KAAD,CAAT,CAAiB,CAAvC,CAAyC,KAAK,CAAC,SAA/C,UAJF,CALJ,CAtBF,cAoCE,oBAAC,MAAD,EAAQ,IAAI,CAAEC,SAAd,CAAyB,OAAO,CAAE,kBAAI,CAACC,YAAY,CAAC,KAAD,CAAZ,CAAoB,CAA3D,CAA6D,kBAAgB,mBAA7E,eACI,oBAAC,WAAD,EAAa,EAAE,CAAC,mBAAhB,kCADJ,cAEI,oBAAC,aAAD,mBACE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,8DADF,cAGe,8BAHf,cAIE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,wCAJF,cAMe,8BANf,cAOE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,eACE,yBAAG,IAAI,CAAC,iCAAR,WADF,cACsD,oCADtD,cACoE,oCADpE,cAEE,yBAAG,IAAI,CAAC,2CAAR,aAFF,cAEkE,oCAFlE,cAEgF,oCAFhF,cAGE,yBAAG,IAAI,CAAC,wDAAR,aAHF,cAG+E,oCAH/E,cAG6F,oCAH7F,CAPF,cAYE,+CACE,2BAAK,KAAK,CAAC,KAAX,CAAiB,KAAK,CAAE,CAACoI,YAAY,CAAC,MAAd,CAAxB,CAA+C,GAAG,CAAED,OAAO,CAAC,kBAAD,CAA3D,EADF,CAZF,cAeE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,8RAC0Q,8BAD1Q,cAEE,2CACE,uGADF,cAEE,uFAFF,cAGE,sDAHF,cAIE,kEAJF,cAKE,8DALF,CAFF,CAfF,CAFJ,cA4BI,oBAAC,aAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAI,CAACnI,YAAY,CAAC,KAAD,CAAZ,CAAoB,CAA1C,CAA4C,KAAK,CAAC,SAAlD,OADF,CA5BJ,CApCF,cAsEI,oBAAC,MAAD,EAAQ,IAAI,CAAEC,QAAd,CAAwB,OAAO,CAAE,kBAAI,CAACC,WAAW,CAAC,KAAD,CAAX,CAAmB,CAAzD,CAA2D,kBAAgB,mBAA3E,eACI,oBAAC,WAAD,EAAa,EAAE,CAAC,mBAAhB,EAAqCpI,QAAQ,CAACmH,SAAD,CAAR,CAAoB1B,IAAzD,CADJ,cAEI,oBAAC,aAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAI,CAAC6C,aAAa,CAAC,IAAD,CAAb,CAAoB,CAA1C,CAA4C,KAAK,CAAC,SAAlD,CAA4D,OAAO,CAAC,UAApE,CAA+E,SAAS,KAAxF,uBADF,CAIGlE,MAAM,CAACC,IAAP,CAAYoE,YAAZ,EAA0B8H,OAA1B,GAAoCtL,GAApC,CAAwC,SAAAuL,UAAU,CAAE,CACnD,GAAI5D,CAAAA,OAAO,CAACnE,YAAY,CAAC+H,UAAD,CAAxB,CACA,mBACE,2BAAK,KAAK,CAAE,CAACvM,eAAe,CAAC,SAAjB,CAA2B4L,SAAS,CAAC,KAArC,CAA2C7N,OAAO,CAAC,KAAnD,CAAZ,eACE,2BAAK,KAAK,CAAE,CAACF,OAAO,CAAC,MAAT,CAAZ,eACE,oBAAC,MAAD,EAAQ,SAAS,CAAE0E,OAAO,CAACzC,MAA3B,EACG6I,OAAO,CAACnH,IAAR,CAAagL,MAAb,CAAoB,CAApB,CAAsB,CAAtB,CADH,CADF,cAIE,2BAAK,KAAK,CAAE,CAACzO,OAAO,CAAC,KAAT,CAAZ,eACE,6CAAM,6BAAI4K,OAAO,CAACnH,IAAZ,CAAN,CADF,cACoC,8BADpC,cAEE,oBAAC,UAAD,EAAY,OAAO,CAAC,OAApB,EACG,GAAI0E,CAAAA,IAAJ,CAASyC,OAAO,CAACE,SAAjB,EAA4B4D,cAA5B,EADH,CAFF,CAJF,CADF,cAYE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,EACG9D,OAAO,CAACA,OADX,CAZF,CADF,CAkBD,CApBA,CAJH,CAFJ,cA4BI,oBAAC,aAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAI,CAACxE,WAAW,CAAC,KAAD,CAAX,CAAmB,CAAzC,CAA2C,KAAK,CAAC,SAAjD,OADF,CA5BJ,CAtEJ,cAwGM,oBAAC,MAAD,EAAQ,IAAI,CAAEC,UAAd,CAA0B,OAAO,CAAE,kBAAI,CAACC,aAAa,CAAC,KAAD,CAAb,CAAqB,CAA7D,CAA+D,kBAAgB,mBAA/E,eACI,oBAAC,WAAD,EAAa,EAAE,CAAC,mBAAhB,gBADJ,cAEI,oBAAC,aAAD,mBACE,oBAAC,SAAD,EACE,QAAQ,CAAEe,OADZ,CAEE,KAAK,CAAC,WAFR,CAGE,OAAO,CAAC,UAHV,CAIE,SAAS,KAJX,EADF,cAOE,oBAAC,SAAD,EACE,KAAK,CAAE,CAACwG,SAAS,CAAC,KAAX,CADT,CAEE,QAAQ,CAAEzG,UAFZ,CAGE,KAAK,CAAC,cAHR,CAIE,SAAS,KAJX,CAKE,OAAO,CAAC,UALV,CAME,SAAS,KANX,CAOE,IAAI,CAAE,CAPR,EAPF,cAeI,8BAfJ,CAFJ,cAmBI,oBAAC,aAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAI,CAACd,aAAa,CAAC,KAAD,CAAb,CAAqB,CAA3C,CAA6C,KAAK,CAAC,SAAnD,WADF,cAIE,oBAAC,MAAD,EAAQ,OAAO,CAAEqE,WAAjB,CAA8B,KAAK,CAAC,SAApC,iBAJF,CAnBJ,CAxGN,cAoIA,oBAAC,MAAD,EAAQ,IAAI,CAAEpF,UAAd,CAA0B,OAAO,CAAE,kBAAI,CAACC,aAAa,CAAC,KAAD,CAAb,CAAsB,CAA9D,CAAgE,kBAAgB,mBAAhF,eACI,oBAAC,WAAD,EAAa,EAAE,CAAC,mBAAhB,iBADJ,cAEI,oBAAC,aAAD,EAAe,SAAS,CAAEhB,OAAO,CAAC3E,IAAlC,eAEA,oBAAC,SAAD,EACE,QAAQ,CAAEsH,OADZ,CAEE,EAAE,CAAC,gBAFL,CAGE,KAAK,CAAC,yBAHR,CAIE,IAAI,CAAC,gBAJP,CAKE,YAAY,CAAC,kBALf,CAME,eAAe,CAAE,CACfwH,MAAM,CAAE,IADO,CANnB,EAFA,CAFJ,cAgBI,oBAAC,aAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAI,CAACnJ,aAAa,CAAC,KAAD,CAAb,CAAqB,CAA3C,CAA6C,KAAK,CAAC,WAAnD,WADF,cAIE,oBAAC,MAAD,EAAQ,OAAO,CAAEyC,YAAjB,CAA+B,KAAK,CAAC,SAArC,OAJF,CAhBJ,CApIA,cA6JE,oBAAC,MAAD,EAAQ,IAAI,CAAEpB,MAAd,CAAsB,OAAO,CAAE,kBAAI,CAACC,SAAS,CAAC,KAAD,CAAT,CAAkB,CAAtD,CAAwD,kBAAgB,mBAAxE,eACI,oBAAC,WAAD,EAAa,EAAE,CAAC,mBAAhB,UAA0C9I,QAAQ,CAACmH,SAAD,CAAR,CAAoBzB,QAA9D,4EADJ,cAEI,oBAAC,aAAD,EAAe,SAAS,CAAEc,OAAO,CAAC3E,IAAlC,eACE,4CACE,oDAAwBkH,OAAO,EAAE,IAAT,CAAcA,OAAO,CAAC4F,OAAR,CAAgBiC,OAAhB,CAAwB,CAAxB,CAAd,CAAyC,EAAjE,YADF,cACmF,8BADnF,cAEE,+CAAQ,8BAAQ,GAAG,CAAEtH,IAAb,CAAmB,KAAK,CAAE1D,SAA1B,CAAqC,MAAM,CAAEA,SAA7C,EAAR,CAFF,cAEoF,8BAFpF,cAGE,kDAAsBmD,OAAO,EAAE,IAAT,CAAcA,OAAO,CAACiG,SAAR,CAAkB4B,OAAlB,CAA0B,CAA1B,CAAd,CAA2C,EAAjE,YAHF,cAGmF,8BAHnF,cAIE,+CAAQ,8BAAQ,GAAG,CAAErH,IAAb,CAAmB,KAAK,CAAE3D,SAA1B,CAAqC,MAAM,CAAEA,SAA7C,EAAR,CAJF,CADF,CAFJ,cAUI,oBAAC,aAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAI,CAACkD,SAAS,CAAC,KAAD,CAAT,CAAiB,CAAvC,CAAyC,KAAK,CAAC,SAA/C,OADF,CAVJ,CA7JF,cA6KE,oBAAC,MAAD,EAAQ,IAAI,CAAErB,SAAd,CAAyB,OAAO,CAAE,kBAAI,CAACC,YAAY,CAAC,KAAD,CAAZ,CAAqB,CAA5D,CAA8D,kBAAgB,mBAA9E,eACI,oBAAC,WAAD,EAAa,EAAE,CAAC,mBAAhB,EAAqC1H,QAAQ,CAACmH,SAAD,CAAR,CAAoBzB,QAAzD,CADJ,cAEI,oBAAC,aAAD,mBACE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,EACG1F,QAAQ,CAACmH,SAAD,CAAR,CAAoB1B,IADvB,CAEGzF,QAAQ,CAACmH,SAAD,CAAR,CAAoBxB,eAApB,CAAoC,iBAApC,CAAsD,EAFzD,CADF,cAKE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,eAA2B,8BAA3B,cACa3F,QAAQ,CAACmH,SAAD,CAAR,CAAoB5B,YADjC,CALF,cAQE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,eAA2B,8BAA3B,WACUvF,QAAQ,CAACmH,SAAD,CAAR,CAAoB/B,IAD9B,CARF,cAWE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,eAA2B,8BAA3B,kBACiBpF,QAAQ,CAACmH,SAAD,CAAR,CAAoB3B,WADrC,CAXF,cAcE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,eAA2B,8BAA3B,uBACsBxF,QAAQ,CAACmH,SAAD,CAAR,CAAoB0J,gBAD1C,CAdF,cAiBE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,eAA2B,8BAA3B,kBACiB7Q,QAAQ,CAACmH,SAAD,CAAR,CAAoB2J,WADrC,CAjBF,cAoBE,8BApBF,CAsBI9Q,QAAQ,CAACmH,SAAD,CAAR,CAAoB4I,WAApB,CAAgC9K,GAAhC,CAAoC,SAAA8L,GAAG,CAAE,CACvC,mBACE,2BAAK,KAAK,CAAE,CAAC5N,UAAU,CAAC,KAAZ,CAAZ,CAAgC,GAAG,CAAE4N,GAArC,CAA0C,KAAK,CAAC,KAAhD,EADF,CAGD,CAJD,CAtBJ,cA4BE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,eAA2B,8BAA3B,CACG/Q,QAAQ,CAACmH,SAAD,CAAR,CAAoB6J,WADvB,CA5BF,cA+BE,8BA/BF,cA+BO,8BA/BP,cAgCI,0CAAG,2CAAH,CAhCJ,cAiCE,oBAAC,UAAD,EAAY,OAAO,CAAC,MAApB,eAA2B,8BAA3B,cACE,8BAEIhR,QAAQ,CAACmH,SAAD,CAAR,CAAoB8J,SAApB,CAA8BhM,GAA9B,CAAkC,SAACiM,KAAD,CAAOpB,GAAP,CAAa,CAC7C,mBACE,8BAAKoB,KAAL,CADF,CAGD,CAJD,CAFJ,CADF,CAjCF,CAFJ,cAgDI,oBAAC,aAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAI,CAACxJ,YAAY,CAAC,KAAD,CAAZ,CAAoB,CAA1C,CAA4C,KAAK,CAAC,WAAlD,OADF,CAhDJ,CA7KF,cAmOE,oBAAC,WAAD,MAnOF,cAoOE,oBAAC,MAAD,EAAQ,KAAK,CAAE,CAACzD,eAAe,CAAC,SAAjB,CAAf,CAA4C,QAAQ,CAAC,OAArD,CAA6D,SAAS,CAAEuC,OAAO,CAACtD,MAAhF,eACE,oBAAC,OAAD,mBACE,oBAAC,UAAD,EACE,KAAK,CAAC,SADR,CAEE,aAAW,aAFb,CAGE,IAAI,CAAC,OAHP,CAIE,OAAO,CAAEuG,kBAJX,CAKE,SAAS,CAAEjD,OAAO,CAACpD,UALrB,eAOE,oBAAC,QAAD,MAPF,CADF,cAUI,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,MAAM,KAA/B,6CAVJ,CADF,CApOF,cAoPE,2BAAK,SAAS,CAAEoD,OAAO,CAAC3D,MAAxB,CAAgC,aAAW,iBAA3C,eAEE,oBAAC,MAAD,EAAQ,IAAI,KAAZ,CAAa,cAAc,CAAC,KAA5B,eACE,oBAAC,MAAD,EACE,SAAS,CAAE6M,SADb,CAEE,OAAO,CAAC,WAFV,CAGE,MAAM,CAAE9N,KAAK,CAACuP,SAAN,GAAoB,KAApB,CAA4B,OAA5B,CAAsC,MAHhD,CAIE,IAAI,CAAE1K,UAJR,CAKE,OAAO,CAAEgD,kBALX,CAME,OAAO,CAAE,CACP1H,KAAK,CAAEyE,OAAO,CAAChD,WADR,CANX,CASE,UAAU,CAAE,CACV4N,WAAW,CAAE,IAAM;AADT,CATd,EAaGvO,MAbH,CADF,CAFF,cAmBE,oBAAC,MAAD,EAAQ,MAAM,KAAd,CAAe,cAAc,CAAC,KAA9B,eACE,oBAAC,MAAD,EACE,OAAO,CAAE,CACPd,KAAK,CAAEyE,OAAO,CAAChD,WADR,CADX,CAIE,OAAO,CAAC,WAJV,CAKE,IAAI,KALN,EAOGX,MAPH,CADF,CAnBF,CApPF,cAmRE,4BAAM,SAAS,CAAE2D,OAAO,CAAC/C,OAAzB,eACE,2BAAK,KAAK,CAAE,CAAC4N,YAAY,CAAC,MAAd,CAAqBrP,OAAO,CAAC,KAA7B,CAAZ,CAAiD,SAAS,CAAEwE,OAAO,CAAClD,OAApE,EADF,cAEI,2BAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAE4F,YAAhC,CAA8C,KAAK,CAAE,CAAC1G,MAAM,CAAC,MAAR,CAArD,EAEIuE,IAAI,EAAE,KAAN,cACI,oBAAC,OAAD,EAAS,QAAQ,CAAEwB,QAAnB,CAA6B,GAAG,CAAEwB,GAAlC,CAAuC,GAAG,CAAE,CAAC5C,SAAD,CAAWQ,QAAX,CAA5C,CAAkE,GAAG,CAAEsB,OAAvE,CAAgF,OAAO,CAAE9B,SAAzF,CAAoG,IAAI,CAAEnH,QAAQ,CAACmH,SAAD,CAAlH,CAA+H,QAAQ,CAAEQ,QAAzI,EADJ,CAGEZ,IAAI,EAAE,OAAN,cACI,oBAAC,YAAD,EAAc,QAAQ,CAAEwB,QAAxB,CAAkC,GAAG,CAAEwB,GAAvC,CAA4C,GAAG,CAAE,CAAC5C,SAAD,CAAWQ,QAAX,CAAjD,CAAuE,GAAG,CAAEsB,OAA5E,CAAqF,OAAO,CAAE9B,SAA9F,CAAyG,IAAI,CAAEnH,QAAQ,CAACmH,SAAD,CAAvH,CAAoI,QAAQ,CAAEQ,QAA9I,EADJ,CAGEZ,IAAI,EAAE,IAAN,cACI,oBAAC,SAAD,EAAW,QAAQ,CAAEwB,QAArB,CAA+B,IAAI,CAAEyB,aAArC,CAAoD,MAAM,CAAEd,YAA5D,CAA0E,GAAG,CAAED,OAA/E,CAAwF,OAAO,CAAE9B,SAAjG,CAA4G,IAAI,CAAEnH,QAAQ,CAACmH,SAAD,CAA1H,CAAuI,QAAQ,CAAEQ,QAAjJ,EADJ,CAGEZ,IAAI,EAAE,KAAN,cACI,oBAAC,OAAD,EAAS,QAAQ,CAAEwB,QAAnB,CAA6B,GAAG,CAAEU,OAAlC,CAA2C,OAAO,CAAE9B,SAApD,CAA+D,IAAI,CAAEnH,QAAQ,CAACmH,SAAD,CAA7E,CAA0F,QAAQ,CAAEQ,QAApG,EADJ,cAGE,8BAdZ,CAFJ,CAnRF,CADJ,CAgTD,CArtBD,CAutBA,cAAetB,CAAAA,IAAf","sourcesContent":["import React,{useState,useEffect,useRef} from 'react'\r\nimport{makeStyles,useTheme,Snackbar,Button,Dialog,DialogActions,DialogContent,DialogTitle,TextField,Avatar,Tooltip,Drawer,IconButton,Hidden,CssBaseline,AppBar,Toolbar,List,Typography,Divider,ListItem} from '@material-ui/core'\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport { deepOrange, deepPurple } from '@material-ui/core/colors';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ExploreIcon from '@material-ui/icons/Explore';\r\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\r\nimport SportsBaseballIcon from '@material-ui/icons/SportsBaseball';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport AccessAlarmsIcon from '@material-ui/icons/AccessAlarms';\r\nimport MessageIcon from '@material-ui/icons/Message';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport TrackChangesIcon from '@material-ui/icons/TrackChanges';\r\nimport Cookies from 'universal-cookie';\r\nimport * as firebase from 'firebase';\r\nimport {sat_data} from '../assets/master'\r\nimport MapView from './MapView'\r\nimport NightSkyView from './NightSkyView'\r\nimport ModelView from './ModelView'\r\nimport FPVView from './FPVView'\r\nimport { getSatelliteInfo } from \"tle.js\";\r\n\r\nfunction calcCrow(lat1, lon1, lat2, lon2)\r\n    {\r\n      var R = 6371; // km\r\n      var dLat = toRad(lat2-lat1);\r\n      var dLon = toRad(lon2-lon1);\r\n      var lat1 = toRad(lat1);\r\n      var lat2 = toRad(lat2);\r\n\r\n      var a = Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n        Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2);\r\n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n      var d = R * c;\r\n      return d;\r\n    }\r\n\r\n\r\nfunction toRad(Value)\r\n{\r\n    return Value * Math.PI / 180;\r\n}\r\n\r\nconst COOKIE_AGE=31536000\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\"\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  stepperRoot: {\r\n    width: '100%',\r\n  },\r\n  canvasPaper: {\r\n    padding: theme.spacing(1),\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  drawer: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n  },\r\n  full:{\r\n    width: drawerWidth-50\r\n  },\r\n  appBar: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: `calc(100% - ${drawerWidth}px)`,\r\n      height:'10vh',\r\n      marginLeft: drawerWidth,\r\n    },\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(0,0),\r\n    height:'90vh'\r\n  },\r\n  root1:{\r\n    height:'100%'\r\n  },\r\n  eliminationGrid : {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\"\r\n  },\r\n  orange: {\r\n    color: theme.palette.getContrastText(deepOrange[500]),\r\n    backgroundColor: deepOrange[500],\r\n  },\r\n  purple: {\r\n    color: theme.palette.getContrastText(deepPurple[500]),\r\n    backgroundColor: deepPurple[500],\r\n  }\r\n}));\r\n\r\nvar sat_codes=Object.keys(sat_data)\r\nvar tokenObject={}\r\nfunction splitMulti(string, tokens){\r\n  var str=string.toLowerCase()\r\n        var tempChar = tokens[0];\r\n        for(var i = 1; i < tokens.length; i++){\r\n            str = str.split(tokens[i]).join(tempChar);\r\n        }\r\n        str = str.split(tempChar);\r\n        return str;\r\n}\r\nsat_codes.map(code=>{\r\n  var sat=sat_data[code]\r\n  var tokens=''\r\n  tokens+=code\r\n  splitMulti(sat.type,[' ',',','.']).map(token=>{\r\n    tokens+=token.trim()\r\n  })\r\n  splitMulti(sat.country_name,[' ',',','.']).map(token=>{\r\n    tokens+=token.trim()\r\n  })\r\n  splitMulti(sat.launch_date,[' ',',','.']).map(token=>{\r\n    tokens+=token.trim()\r\n  })\r\n\r\n  splitMulti(sat.name,[' ',',','.']).map(token=>{\r\n    tokens+=token.trim()\r\n  })\r\n  splitMulti(sat.sat_name,[' ',',','.']).map(token=>{\r\n    tokens+=token.trim()\r\n  })\r\n  if('isGeoStationary' in sat && sat.isGeoStationary)\r\n    tokens+='geostationary'\r\n\r\n  tokenObject[code]=tokens\r\n})\r\n\r\n\r\nvar canvasDim=250,cookies = new Cookies(),isCookied=true,interval,defaultSatCode='25544',commentsRef=null,startup=true\r\nif(cookies.get('intro')==undefined || cookies.get('intro')==null)isCookied=false\r\n\r\n\r\nconst Main=props=>{\r\n  const { window } = props;\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [mobileOpen, setMobileOpen] = useState(false);\r\n  const [notification,setNotification]=useState(false)\r\n  const [message,setMessage]=useState('')\r\n  const [mode, setMode] = useState('map');\r\n  const [time,setTime]=useState('live')\r\n  const [satellite,setSatellite]=useState(defaultSatCode)\r\n  const [searchFilter,setSearchFilter]=useState(sat_data)\r\n  const [timeDialog,setTimeDialog]=useState(false)\r\n  const [desDialog,setDesDialog]=useState(false)\r\n  const [timeDiff,setTimeDiff]=useState(0)\r\n  const [video,setVideo]=useState(!isCookied)\r\n  const [social,setSocial]=useState(false)\r\n  const [developer,setDeveloper]=useState(false)\r\n  const [comments,setComments]=useState(false)\r\n  const [addComment,setAddComment]=useState(false)\r\n  const [location,setLocation]=useState(null)\r\n  const [commentsData,setCommentsData]=useState({})\r\n  const [stats,setStats]=useState({})\r\n  const [finder,setFinder]=useState(false)\r\n  const [satData,setSatData]=useState(null)\r\n\r\n  const viewRef=useRef()\r\n  const containerRef=useRef()\r\n  const timeRef=useRef()\r\n  const commentRef=useRef()\r\n  const nameRef=useRef()\r\n  const hRef=useRef()\r\n  const vRef=useRef()\r\n\r\n  const notify=message=>{\r\n    setMessage(message)\r\n    setNotification(true)\r\n  }\r\n\r\n  const handleDrawerToggle = () => {\r\n    setMobileOpen(!mobileOpen);\r\n  };\r\n\r\n  const handleMode = (event, newMode) => {\r\n    if(newMode!=null)\r\n      setMode(newMode);\r\n  };\r\n\r\n  const handleTime = (event, newTime) => {\r\n    if(newTime!=null)\r\n      setTime(newTime);\r\n  };\r\n\r\n  const fpv=()=>{\r\n    setMode('fpv')\r\n  }\r\n\r\n  const modelSatClick=code=>{\r\n    setSatellite(code)\r\n    setDesDialog(true)\r\n  }\r\n\r\n  const gotoTimeLine=()=>{\r\n    var timeDiffTmp=new Date(timeRef.current.value).getTime()-Date.now()\r\n    viewRef.current.setTimeDiff(timeDiffTmp)\r\n    setTimeDiff(timeDiffTmp)\r\n    setTimeDialog(false)\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(!video && !startup){\r\n      setSocial(true)\r\n    }\r\n  },[video])\r\n\r\n  useEffect(()=>{\r\n    startup=false\r\n    firebase.firestore().collection('satellight').doc('stats').onSnapshot(docSnapshot => {\r\n      setStats(docSnapshot.data())\r\n    }, err => {\r\n      console.log(err);\r\n    })\r\n    navigator.geolocation.getCurrentPosition(function(position) {\r\n      setLocation({\r\n        lat:position.coords.latitude,\r\n        lng:position.coords.longitude\r\n      })\r\n    });\r\n  },[])\r\n\r\n  const countView=code=>{\r\n    firebase.firestore().collection('satellight').doc('stats').update({\r\n      [code+'_v']:firebase.firestore.FieldValue.increment(1)\r\n    })\r\n  }\r\n\r\n  const countComment=code=>{\r\n    firebase.firestore().collection('satellight').doc('stats').update({\r\n      [code+'_c']:firebase.firestore.FieldValue.increment(1)\r\n    })\r\n  }\r\n  useEffect(()=>{\r\n    if(time=='other')\r\n      setTimeDialog(true)\r\n    else if(time=='live'){\r\n      setTimeDiff(0)\r\n      viewRef.current.setTimeDiff(0)\r\n    }\r\n  },[time])\r\n\r\n  const setCookie=()=>{\r\n    cookies.set('intro',true,{ path: '/', maxAge: COOKIE_AGE })\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(!comments && commentsRef!=null)\r\n      commentsRef.off()\r\n  },[comments])\r\n\r\n  const loadComments=code=>{\r\n    commentsRef=firebase.database().ref().child('comments').child(code)\r\n    commentsRef.on('value', function(snapshot) {\r\n      if(snapshot.val()!=null)setCommentsData(snapshot.val())\r\n      else setCommentsData({})\r\n    });\r\n    setComments(true)\r\n  }\r\n\r\n  const postComment=()=>{\r\n    var name=nameRef.current.value.trim()\r\n    var comment=commentRef.current.value.trim()\r\n    if(name.length==0 || comment.length==0)\r\n      notify('Fields can\\'t be empty.')\r\n    else{\r\n      setAddComment(false)\r\n      commentsRef.push().set({\r\n        name:name,\r\n        comment:comment,\r\n        timestamp:Date.now()\r\n      }).then(()=>{\r\n        notify('Comment added')\r\n        countComment(satellite)\r\n      }).catch(err=>{\r\n        notify(err.message)\r\n      })\r\n    }\r\n  }\r\n\r\n  const filter=e=>{\r\n    var keywords=splitMulti(e.target.value,[' ',',','.'])\r\n    var filteredList={}\r\n    var keys=Object.keys(tokenObject)\r\n    keys.map(key=>{\r\n      var isMatched=false\r\n      var token=''\r\n      keywords.map(keyword=>{\r\n        token+=keyword\r\n      })\r\n      if(tokenObject[key].includes(token))\r\n        filteredList[key]=sat_data[key]\r\n    })\r\n    setSearchFilter(filteredList)\r\n\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if((location!=null)){\r\n      viewRef.current.location(location)\r\n    }\r\n  },[location])\r\n\r\n  useEffect(()=>{\r\n    if(finder) {\r\n      interval= setInterval(() => {\r\n        if(satellite!=null && location!=null){\r\n          var sat=sat_data[satellite]\r\n          var tle=[sat.tle_line1,sat.tle_line2]\r\n          var info=getSatelliteInfo(tle,Date.now()+timeDiff,location.lat,location.lng,0)\r\n          setSatData(info)\r\n          //console.log(info.elevation)\r\n\r\n          var ctx1 = hRef.current.getContext(\"2d\");\r\n          ctx1.clearRect(0, 0, canvasDim,canvasDim);\r\n\r\n          ctx1.beginPath()\r\n          ctx1.strokeStyle = \"#000000\";\r\n          ctx1.moveTo(canvasDim/2, canvasDim/2);\r\n          ctx1.lineTo(canvasDim/2,canvasDim);\r\n          ctx1.moveTo(canvasDim/2, canvasDim/2);\r\n          ctx1.lineTo(canvasDim/2, 0);\r\n          ctx1.moveTo(canvasDim/2, canvasDim/2);\r\n          ctx1.lineTo(canvasDim, canvasDim/2);\r\n          ctx1.moveTo(canvasDim/2, canvasDim/2);\r\n          ctx1.lineTo(0, canvasDim/2);\r\n          //ctx1.lineTo()\r\n\r\n          ctx1.font = \"20px Arial\";\r\n          ctx1.fillText(\"N\", canvasDim/2+5, 20);\r\n          ctx1.fillText(\"S\", canvasDim/2+5, canvasDim);\r\n          ctx1.fillText(\"W\", 0, canvasDim/2-5);\r\n          ctx1.fillText(\"E\", canvasDim-20, canvasDim/2-5);\r\n\r\n          ctx1.fill()\r\n\r\n          ctx1.stroke();\r\n          ctx1.beginPath()\r\n          ctx1.moveTo(canvasDim/2, canvasDim/2);\r\n          ctx1.strokeStyle = \"#00aa00\";\r\n          var hAngle=info.azimuth-90\r\n          var hX=Math.cos(hAngle*Math.PI/180)*canvasDim/2\r\n          var hY=Math.sin(hAngle*Math.PI/180)*canvasDim/2\r\n          ctx1.lineTo(hX+canvasDim/2,hY+canvasDim/2);\r\n          ctx1.stroke()\r\n\r\n\r\n\r\n          var ctx2 = vRef.current.getContext(\"2d\");\r\n          ctx2.clearRect(0, 0, canvasDim,canvasDim);\r\n\r\n          ctx2.beginPath()\r\n          ctx2.strokeStyle = \"#000000\";\r\n          ctx2.moveTo(canvasDim/2, canvasDim/2);\r\n          ctx2.lineTo(canvasDim/2,canvasDim);\r\n          ctx2.moveTo(canvasDim/2, canvasDim/2);\r\n          ctx2.lineTo(canvasDim/2, 0);\r\n          ctx2.moveTo(canvasDim/2, canvasDim/2);\r\n          ctx2.lineTo(canvasDim, canvasDim/2);\r\n          ctx2.moveTo(canvasDim/2, canvasDim/2);\r\n          ctx2.lineTo(0, canvasDim/2);\r\n          //ctx1.lineTo()\r\n\r\n          ctx2.font = \"20px Arial\";\r\n          ctx2.fillText(\"Above Head\", canvasDim/2+5, 20);\r\n          ctx2.fillText(\"Below Feet\", canvasDim/2+5, canvasDim);\r\n          ctx2.fillText(\"Horizontal\", 0, canvasDim/2-5);\r\n\r\n          ctx2.fill()\r\n\r\n          ctx2.stroke();\r\n          ctx2.beginPath()\r\n          ctx2.moveTo(canvasDim/2, canvasDim/2);\r\n          ctx2.strokeStyle = \"#00aa00\";\r\n          var vAngle=-info.elevation\r\n          var vX=Math.cos(vAngle*Math.PI/180)*canvasDim/2\r\n          var vY=Math.sin(vAngle*Math.PI/180)*canvasDim/2\r\n          ctx2.lineTo(vX+canvasDim/2,vY+canvasDim/2);\r\n          ctx2.stroke()\r\n\r\n\r\n        }\r\n      }, 200);\r\n    } else {\r\n      clearInterval(interval);\r\n    }\r\n  },[finder])\r\n\r\n\r\n  const closestSat=()=>{\r\n    navigator.geolocation.getCurrentPosition(function(position) {\r\n      setLocation({\r\n        lat:position.coords.latitude,\r\n        lng:position.coords.longitude\r\n      })\r\n    });\r\n    if(location!=null){\r\n      var min=10000000,minCode\r\n      Object.keys(sat_data).map(code=>{\r\n        var sat=sat_data[code]\r\n        var tle=[sat.tle_line1,sat.tle_line2]\r\n        var info=getSatelliteInfo(tle,Date.now()+timeDiff,location.lat,location.lng,0)\r\n        var geoDistance=calcCrow(location.lat,location.lng,info.lat,info.lng)\r\n        if(geoDistance<min){\r\n          min=geoDistance\r\n          minCode=code\r\n        }\r\n      })\r\n      setSatellite(minCode)\r\n    }\r\n  }\r\n\r\n  const showDirection=()=>{\r\n    navigator.geolocation.getCurrentPosition(function(position) {\r\n      setLocation({\r\n        lat:position.coords.latitude,\r\n        lng:position.coords.longitude\r\n      })\r\n    });\r\n    if(location!=null)setFinder(true)\r\n  }\r\n\r\n  useEffect(()=>{\r\n    viewRef.current.setSatellite({\r\n      satCode:satellite,\r\n      data:sat_data[satellite]\r\n    })\r\n    countView(satellite)\r\n  },[satellite])\r\n\r\n  const container = window !== undefined ? () => window().document.body : undefined;\r\n  const drawer=(\r\n    <div className='explorer'>\r\n    <center>\r\n\r\n    <Button style={{marginTop:'10px'}} onClick={()=>{setVideo(true)}} variant='outlined' color=\"secondary\">\r\n      Usage\r\n    </Button>\r\n    <Button  style={{marginTop:'10px',marginLeft:'5px'}} onClick={()=>{setDeveloper(true)}} variant='outlined' color=\"primary\">\r\n      Developer\r\n    </Button>\r\n\r\n      <ToggleButtonGroup\r\n        value={mode}\r\n        exclusive\r\n        onChange={handleMode}\r\n        aria-label=\"text alignment\"\r\n        style={{marginTop:'10px'}}\r\n      >\r\n          <ToggleButton value=\"map\" aria-label=\"left aligned\">\r\n            <Tooltip title=\"Map View\">\r\n              <ExploreIcon />\r\n            </Tooltip>\r\n          </ToggleButton>\r\n          <ToggleButton value=\"night\" aria-label=\"centered\">\r\n            <Tooltip title=\"Night Sky View\">\r\n              <Brightness4Icon />\r\n            </Tooltip>\r\n          </ToggleButton>\r\n          <ToggleButton value=\"3d\" aria-label=\"right aligned\">\r\n            <Tooltip title=\"3D Model View\">\r\n              <SportsBaseballIcon />\r\n            </Tooltip>\r\n          </ToggleButton>\r\n          <ToggleButton value=\"fpv\" aria-label=\"justified\">\r\n            <Tooltip title=\"First Person View\">\r\n              <VisibilityIcon />\r\n            </Tooltip>\r\n          </ToggleButton>\r\n        </ToggleButtonGroup>\r\n\r\n\r\n        <ToggleButtonGroup\r\n          value={time}\r\n          exclusive\r\n          onChange={handleTime}\r\n          aria-label=\"text alignment\"\r\n          style={{marginTop:'5px'}}\r\n        >\r\n        <ToggleButton value=\"live\" aria-label=\"left aligned\">\r\n          <Tooltip title=\"Live\">\r\n            <CheckCircleIcon/>\r\n          </Tooltip>\r\n        </ToggleButton>\r\n        <ToggleButton onClick={()=>{setTimeDialog(true)}} value=\"other\" aria-label=\"left aligned\">\r\n          <Tooltip title=\"Past/Future\">\r\n            <AccessAlarmsIcon/>\r\n          </Tooltip>\r\n        </ToggleButton>\r\n      </ToggleButtonGroup>\r\n      <ToggleButton style={{marginTop:'-16px'}} onClick={showDirection} value=\"other\" aria-label=\"left aligned\">\r\n        <Tooltip title=\"Where to look at to see the selected satellite from your location\">\r\n          <TrackChangesIcon/>\r\n        </Tooltip>\r\n      </ToggleButton>\r\n      <ToggleButton style={{marginTop:'-16px'}} onClick={closestSat} value=\"other\" aria-label=\"left aligned\">\r\n        <Tooltip title=\"Closest satellite from your location considering latitude and longitude\">\r\n          <RoomIcon/>\r\n        </Tooltip>\r\n      </ToggleButton>\r\n      <br/>\r\n\r\n        <TextField style={{marginTop:'5px'}} onChange={filter} id=\"outlined-basic\" label=\"Search\" variant=\"outlined\" />\r\n      </center>\r\n      <List>\r\n        {\r\n          Object.keys(searchFilter).map((key,ind)=>{\r\n            var sat=searchFilter[key]\r\n            return(\r\n              <div>\r\n                <Divider />\r\n                <Divider />\r\n                <ListItem selected={key==satellite} onClick={()=>(setSatellite(key))}  button>\r\n                  <div>\r\n                    <Typography className={classes.full} variant=\"subtitle1\" gutterBottom>\r\n                      {sat.name}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" gutterBottom>\r\n                      {sat.country_name}\r\n                    </Typography>\r\n                    <div style={{display:'flex'}}>\r\n                      <Avatar alt={sat.country_name} src={sat.real_images[0]} />\r\n                      <Avatar alt={sat.country_name} src={sat.country_flag} />\r\n                    </div>\r\n                    <center >\r\n                      <Button style={{marginTop:'10px'}} onClick={()=>{setDesDialog(true)}} variant=\"outlined\" color=\"primary\" >\r\n                        Details\r\n                      </Button>\r\n                    </center>\r\n                    <Typography style={{marginTop:'10px'}} variant=\"body2\" gutterBottom>\r\n                      <VisibilityIcon color='primary'/>\r\n                      <font className='statLabel' color=\"#00977bb\">\r\n                        {key+'_v' in stats?stats[key+'_v']:0}\r\n                        </font>\r\n                        <div style={{float:'right',cursor:'pointer'}} onClick={()=>{loadComments(key)}}>\r\n                          <MessageIcon color='primary'/>\r\n                          <font className='statLabel' color=\"#00977bb\">\r\n                            {key+'_c' in stats?stats[key+'_c']:0}\r\n                          </font>\r\n                        </div>\r\n                    </Typography>\r\n                  </div>\r\n                </ListItem>\r\n              <Divider />\r\n              <Divider />\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n      </List>\r\n      <Divider />\r\n    </div>\r\n  )\r\n\r\n  return(\r\n      <div className={classes.root}>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'right',\r\n        }}\r\n        open={notification}\r\n        onClose={()=>{setNotification(false)}}\r\n        autoHideDuration={3000}\r\n        message={message}\r\n      />\r\n      <Dialog open={video} onClose={()=>{setVideo(false)}} aria-labelledby=\"form-dialog-title\">\r\n          <DialogTitle id=\"form-dialog-title\">How to use</DialogTitle>\r\n          <DialogContent className={classes.root}>\r\n            <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/jHfov2AC6ZA\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={()=>{setVideo(false)}} color=\"primary\">\r\n              Close\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        <Dialog open={social} onClose={()=>{setSocial(false)}} aria-labelledby=\"form-dialog-title\">\r\n            <DialogTitle id=\"form-dialog-title\">Social Features</DialogTitle>\r\n            <DialogContent className={classes.root}>\r\n              <img src={require('../assets/social.jpg')} width='100%'/>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={()=>{setSocial(false);setCookie();}} color=\"secondary\">\r\n                Don't show again\r\n              </Button>\r\n              <Button onClick={()=>{setSocial(false)}} color=\"primary\">\r\n                Close\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        <Dialog open={developer} onClose={()=>{setDeveloper(false)}} aria-labelledby=\"form-dialog-title\">\r\n            <DialogTitle id=\"form-dialog-title\">Md. Mehrab Haque , Bangladesh</DialogTitle>\r\n            <DialogContent>\r\n              <Typography variant=\"body\">\r\n                Currently studying CSE in BUET (L-1/T-2 currently (2020))\r\n              </Typography><br/>\r\n              <Typography variant=\"body\">\r\n                Email : mehrab.haque.0001@gmail.com\r\n              </Typography><br/>\r\n              <Typography variant=\"body\">\r\n                <a href='https://github.com/mehrab-haque'>Github</a><span> </span><span> </span>\r\n                <a href='https://www.facebook.com/mdmehrab.haque.9'>Facebook</a><span> </span><span> </span>\r\n                <a href='https://www.linkedin.com/in/md-mehrab-haque-1607401a0/'>LinkedIn</a><span> </span><span> </span>\r\n              </Typography>\r\n              <center>\r\n                <img width='50%' style={{borderRadius:'100%'}} src={require('../assets/me.png')}/>\r\n              </center>\r\n              <Typography variant=\"body\">\r\n                This web app is a part of the project \"Satellight\" which is submitted to NASA space app challenge, me and my other team-mates are participating as \"BUET Zenith\", they are also contributing to other parts of the project such as android, arduino and data collection.<br/>\r\n                <ul>\r\n                  <li>Rabib Jahin : Raw data collection (which is implemented in this site).</li>\r\n                  <li>Tamim Ehsan : Arduino pointer device and presentation.</li>\r\n                  <li>Hasan Masum : Android</li>\r\n                  <li>Md. Jehadul Karim Sabit : Android</li>\r\n                  <li>Fabiha Tasneem : Presentation</li>\r\n                </ul>\r\n              </Typography>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={()=>{setDeveloper(false)}} color=\"primary\">\r\n                Ok\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n          <Dialog open={comments} onClose={()=>{setComments(false)}} aria-labelledby=\"form-dialog-title\">\r\n              <DialogTitle id=\"form-dialog-title\">{sat_data[satellite].name}</DialogTitle>\r\n              <DialogContent>\r\n                <Button onClick={()=>{setAddComment(true)}} color=\"primary\" variant='outlined' fullWidth>\r\n                  + Add Your Comment\r\n                </Button>\r\n                {Object.keys(commentsData).reverse().map(commentKey=>{\r\n                  var comment=commentsData[commentKey]\r\n                  return(\r\n                    <div style={{backgroundColor:'#eaeaea',marginTop:'5px',padding:'4px'}}>\r\n                      <div style={{display:'flex'}}>\r\n                        <Avatar className={classes.orange}>\r\n                          {comment.name.substr(0,1)}\r\n                        </Avatar>\r\n                        <div style={{padding:'4px'}}>\r\n                          <font><b>{comment.name}</b></font><br/>\r\n                          <Typography variant=\"body2\">\r\n                            {new Date(comment.timestamp).toLocaleString()}\r\n                          </Typography>\r\n                        </div>\r\n                      </div>\r\n                      <Typography variant=\"body\">\r\n                        {comment.comment}\r\n                      </Typography>\r\n                    </div>\r\n                  )\r\n                })}\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button onClick={()=>{setComments(false)}} color=\"primary\">\r\n                  Ok\r\n                </Button>\r\n              </DialogActions>\r\n            </Dialog>\r\n            <Dialog open={addComment} onClose={()=>{setAddComment(false)}} aria-labelledby=\"form-dialog-title\">\r\n                <DialogTitle id=\"form-dialog-title\">Add Comment</DialogTitle>\r\n                <DialogContent>\r\n                  <TextField\r\n                    inputRef={nameRef}\r\n                    label=\"Your Name\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                  />\r\n                  <TextField\r\n                    style={{marginTop:'5px'}}\r\n                    inputRef={commentRef}\r\n                    label=\"Your Comment\"\r\n                    multiline\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    rows={4}\r\n                  /><br/>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                  <Button onClick={()=>{setAddComment(false)}} color=\"primary\">\r\n                    Cancel\r\n                  </Button>\r\n                  <Button onClick={postComment} color=\"primary\">\r\n                    Post Comment\r\n                  </Button>\r\n                </DialogActions>\r\n              </Dialog>\r\n      <Dialog open={timeDialog} onClose={()=>{setTimeDialog(false);}} aria-labelledby=\"form-dialog-title\">\r\n          <DialogTitle id=\"form-dialog-title\">Set timeline</DialogTitle>\r\n          <DialogContent className={classes.root}>\r\n\r\n          <TextField\r\n            inputRef={timeRef}\r\n            id=\"datetime-local\"\r\n            label=\"timeline starting point\"\r\n            type=\"datetime-local\"\r\n            defaultValue=\"2020-10-01T22:30\"\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={()=>{setTimeDialog(false)}} color=\"secondary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={gotoTimeLine} color=\"primary\">\r\n              Go\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        <Dialog open={finder} onClose={()=>{setFinder(false);}} aria-labelledby=\"form-dialog-title\">\r\n            <DialogTitle id=\"form-dialog-title\">Find {sat_data[satellite].sat_name} from your location based on the selected timeline (present/past/future)</DialogTitle>\r\n            <DialogContent className={classes.root}>\r\n              <div>\r\n                <h3>Horizontal Angle : {satData!=null?satData.azimuth.toFixed(3):''} Degrees</h3><br/>\r\n                <center><canvas ref={hRef} width={canvasDim} height={canvasDim}></canvas></center><br/>\r\n                <h3>Vertical Angle : {satData!=null?satData.elevation.toFixed(3):''} Degrees</h3><br/>\r\n                <center><canvas ref={vRef} width={canvasDim} height={canvasDim}></canvas></center>\r\n              </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={()=>{setFinder(false)}} color=\"primary\">\r\n                Ok\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        <Dialog open={desDialog} onClose={()=>{setDesDialog(false);}} aria-labelledby=\"form-dialog-title\">\r\n            <DialogTitle id=\"form-dialog-title\">{sat_data[satellite].sat_name}</DialogTitle>\r\n            <DialogContent>\r\n              <Typography variant=\"body\">\r\n                {sat_data[satellite].name}\r\n                {sat_data[satellite].isGeoStationary?'(Geostationary)':''}\r\n              </Typography>\r\n              <Typography variant=\"body\"><br/>\r\n                Country : {sat_data[satellite].country_name}\r\n              </Typography>\r\n              <Typography variant=\"body\"><br/>\r\n                Type : {sat_data[satellite].type}\r\n              </Typography>\r\n              <Typography variant=\"body\"><br/>\r\n                Launch Date : {sat_data[satellite].launch_date}\r\n              </Typography>\r\n              <Typography variant=\"body\"><br/>\r\n                Mission Duration : {sat_data[satellite].mission_duration}\r\n              </Typography>\r\n              <Typography variant=\"body\"><br/>\r\n                Launch Mass : {sat_data[satellite].launch_mass}\r\n              </Typography>\r\n              <br/>\r\n              {\r\n                sat_data[satellite].real_images.map(url=>{\r\n                  return(\r\n                    <img style={{marginLeft:'2px'}} src={url} width='30%'/>\r\n                  )\r\n                })\r\n              }\r\n              <Typography variant=\"body\"><br/>\r\n                {sat_data[satellite].description}\r\n              </Typography>\r\n              <br/><br/>\r\n                <b><u>Use Cases :</u></b>\r\n              <Typography variant=\"body\"><br/>\r\n                <ul>\r\n                  {\r\n                    sat_data[satellite].use_cases.map((usage,ind)=>{\r\n                      return(\r\n                        <li>{usage}</li>\r\n                      )\r\n                    })\r\n                  }\r\n                </ul>\r\n              </Typography>\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={()=>{setDesDialog(false)}} color=\"secondary\">\r\n                Ok\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        <CssBaseline />\r\n        <AppBar style={{backgroundColor:'#0090ff'}} position=\"fixed\" className={classes.appBar}>\r\n          <Toolbar>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              edge=\"start\"\r\n              onClick={handleDrawerToggle}\r\n              className={classes.menuButton}\r\n            >\r\n              <MenuIcon />\r\n            </IconButton>\r\n              <Typography variant=\"h6\" noWrap>\r\n                Satellight : putting light on satellites\r\n              </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <nav className={classes.drawer} aria-label=\"mailbox folders\">\r\n          {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\r\n          <Hidden smUp implementation=\"css\">\r\n            <Drawer\r\n              container={container}\r\n              variant=\"temporary\"\r\n              anchor={theme.direction === 'rtl' ? 'right' : 'left'}\r\n              open={mobileOpen}\r\n              onClose={handleDrawerToggle}\r\n              classes={{\r\n                paper: classes.drawerPaper,\r\n              }}\r\n              ModalProps={{\r\n                keepMounted: true, // Better open performance on mobile.\r\n              }}\r\n            >\r\n              {drawer}\r\n            </Drawer>\r\n          </Hidden>\r\n          <Hidden xsDown implementation=\"css\">\r\n            <Drawer\r\n              classes={{\r\n                paper: classes.drawerPaper,\r\n              }}\r\n              variant=\"permanent\"\r\n              open\r\n            >\r\n              {drawer}\r\n            </Drawer>\r\n          </Hidden>\r\n        </nav>\r\n        <main className={classes.content}>\r\n          <div style={{marginBottom:'-6px',padding:'0px'}} className={classes.toolbar} />\r\n            <div className='container' ref={containerRef} style={{height:'100%'}}>\r\n              {\r\n                mode=='map'?(\r\n                    <MapView location={location} fpv={fpv} key={[satellite,timeDiff]} ref={viewRef} satCode={satellite} data={sat_data[satellite]} timeDiff={timeDiff}/>\r\n                ):(\r\n                  mode=='night'?(\r\n                      <NightSkyView location={location} fpv={fpv} key={[satellite,timeDiff]} ref={viewRef} satCode={satellite} data={sat_data[satellite]} timeDiff={timeDiff}/>\r\n                  ):(\r\n                    mode=='3d'?(\r\n                        <ModelView location={location} show={modelSatClick} parent={containerRef} ref={viewRef} satCode={satellite} data={sat_data[satellite]} timeDiff={timeDiff}/>\r\n                    ):(\r\n                      mode=='fpv'?(\r\n                          <FPVView location={location} ref={viewRef} satCode={satellite} data={sat_data[satellite]} timeDiff={timeDiff}/>\r\n                      ):(\r\n                        <br/>\r\n                      )\r\n                    )\r\n                  )\r\n                )\r\n              }\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n\r\n  )\r\n}\r\n\r\nexport default Main\r\n"]},"metadata":{},"sourceType":"module"}