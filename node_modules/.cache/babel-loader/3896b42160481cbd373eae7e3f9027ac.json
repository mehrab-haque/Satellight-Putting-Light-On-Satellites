{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Md. Mehrab Haque\\\\Desktop\\\\satellight\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,createRef,useRef,useEffect,forwardRef,useImperativeHandle}from'react';import{getSatelliteInfo}from\"tle.js\";import WorldWind from'@nasaworldwind/worldwind';var wwd,animator,interval,map,marker,infoWindow,polyLine,poly=[],tle,data;var FPVView=forwardRef(function(props,ref){var containerRef=useRef();var _useState=useState(props.satCode),_useState2=_slicedToArray(_useState,2),satCode=_useState2[0],setSatCode=_useState2[1];var _useState3=useState(props.timeDiff),_useState4=_slicedToArray(_useState3,2),timeDiff=_useState4[0],setTimeDiff=_useState4[1];tle=[props.data.tle_line1,props.data.tle_line2];useImperativeHandle(ref,function(){return{setSatellite:function setSatellite(sat){setSatCode(sat.satCode);}};});useEffect(function(){WorldWind.Logger.setLoggingLevel(WorldWind.Logger.LEVEL_WARNING);wwd=new WorldWind.WorldWindow(containerRef.current);animator=new WorldWind.GoToAnimator(wwd);var bMNGOneImageLayer=new WorldWind.BMNGOneImageLayer();var bMNGLayer=new WorldWind.BMNGLayer();var bMNGLandSatLayer=new WorldWind.BMNGLandsatLayer();var atmosphereLayer=new WorldWind.AtmosphereLayer(require('../assets/starfield.png'));var starFieldLayer=new WorldWind.StarFieldLayer();var layers=[{layer:bMNGOneImageLayer,enabled:true},{layer:bMNGLayer,enabled:true},{layer:bMNGLandSatLayer,enabled:true},{layer:starFieldLayer,enabled:true},{layer:atmosphereLayer,enabled:true},{layer:new WorldWind.ViewControlsLayer(wwd),enabled:true}];for(var l=0;l<layers.length;l++){layers[l].layer.enabled=layers[l].enabled;wwd.addLayer(layers[l].layer);}var now=new Date();atmosphereLayer.time=now;var simulatedMillisPerDay=8000;var startTimeMillis=Date.now();function runSimulation(){var elapsedTimeMillis=Date.now()-startTimeMillis;var simulatedDays=elapsedTimeMillis/simulatedMillisPerDay;var millisPerDay=24*3600*1000;// 24 hours/day * 3600 seconds/hour * 1000 milliseconds/second\nvar simulatedMillis=simulatedDays*millisPerDay;var simulatedDate=new Date(startTimeMillis+simulatedMillis);atmosphereLayer.time=new Date(Date.now());wwd.redraw();requestAnimationFrame(runSimulation);}requestAnimationFrame(runSimulation);},[]);useEffect(function(){if(satCode){interval=setInterval(function(){var currData=getSatelliteInfo(tle,Date.now(),23.762397,90.418917);wwd.goTo(new WorldWind.Position(currData.lat,currData.lng,currData.height*1000));},100);}else{clearInterval(interval);}},[satCode]);return/*#__PURE__*/React.createElement(\"canvas\",{ref:containerRef,className:\"globeBg\",style:{backgroundColor:'#000000',width:\"100%\",height:\"100%\"}});});export default FPVView;","map":{"version":3,"sources":["C:/Users/Md. Mehrab Haque/Desktop/satellight/src/components/FPVView.js"],"names":["React","useState","createRef","useRef","useEffect","forwardRef","useImperativeHandle","getSatelliteInfo","WorldWind","wwd","animator","interval","map","marker","infoWindow","polyLine","poly","tle","data","FPVView","props","ref","containerRef","satCode","setSatCode","timeDiff","setTimeDiff","tle_line1","tle_line2","setSatellite","sat","Logger","setLoggingLevel","LEVEL_WARNING","WorldWindow","current","GoToAnimator","bMNGOneImageLayer","BMNGOneImageLayer","bMNGLayer","BMNGLayer","bMNGLandSatLayer","BMNGLandsatLayer","atmosphereLayer","AtmosphereLayer","require","starFieldLayer","StarFieldLayer","layers","layer","enabled","ViewControlsLayer","l","length","addLayer","now","Date","time","simulatedMillisPerDay","startTimeMillis","runSimulation","elapsedTimeMillis","simulatedDays","millisPerDay","simulatedMillis","simulatedDate","redraw","requestAnimationFrame","setInterval","currData","goTo","Position","lat","lng","height","clearInterval","backgroundColor","width"],"mappings":"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","sourcesContent":["import React,{useState,createRef,useRef,useEffect,forwardRef, useImperativeHandle} from 'react'\r\nimport { getSatelliteInfo } from \"tle.js\";\r\nimport WorldWind from '@nasaworldwind/worldwind'\r\n\r\nvar wwd,animator,interval,map,marker,infoWindow,polyLine,poly=[],tle,data\r\n\r\nconst FPVView=forwardRef((props,ref)=>{\r\n  const containerRef=useRef()\r\n  const [satCode,setSatCode]=useState(props.satCode)\r\n  const [timeDiff,setTimeDiff]=useState(props.timeDiff)\r\n  tle=[props.data.tle_line1,props.data.tle_line2]\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    setSatellite(sat){\r\n      setSatCode(sat.satCode)\r\n    }\r\n }));\r\n\r\n\r\n\r\n  useEffect(()=>{\r\n    WorldWind.Logger.setLoggingLevel(WorldWind.Logger.LEVEL_WARNING);\r\n    wwd = new WorldWind.WorldWindow(containerRef.current);\r\n    animator=new WorldWind.GoToAnimator(wwd)\r\n    var bMNGOneImageLayer = new WorldWind.BMNGOneImageLayer();\r\n    var bMNGLayer=new WorldWind.BMNGLayer()\r\n    var bMNGLandSatLayer=new WorldWind.BMNGLandsatLayer();\r\n    var atmosphereLayer = new WorldWind.AtmosphereLayer(require('../assets/starfield.png'));\r\n    var starFieldLayer=new WorldWind.StarFieldLayer()\r\n\r\n    var layers = [\r\n        {layer:bMNGOneImageLayer,enabled:true},\r\n        {layer:bMNGLayer,enabled:true},\r\n        {layer:bMNGLandSatLayer,enabled:true},\r\n        {layer:starFieldLayer,enabled:true},\r\n        {layer:atmosphereLayer,enabled:true},\r\n        {layer: new WorldWind.ViewControlsLayer(wwd), enabled: true}\r\n    ];\r\n\r\n    for (var l = 0; l < layers.length; l++) {\r\n        layers[l].layer.enabled = layers[l].enabled;\r\n        wwd.addLayer(layers[l].layer);\r\n    }\r\n      var now = new Date();\r\n        atmosphereLayer.time = now;\r\n        var simulatedMillisPerDay = 8000;\r\n        var startTimeMillis = Date.now();\r\n        function runSimulation() {\r\n            var elapsedTimeMillis = Date.now() - startTimeMillis;\r\n            var simulatedDays = elapsedTimeMillis / simulatedMillisPerDay;\r\n            var millisPerDay = 24 * 3600 * 1000; // 24 hours/day * 3600 seconds/hour * 1000 milliseconds/second\r\n            var simulatedMillis = simulatedDays * millisPerDay;\r\n            var simulatedDate = new Date(startTimeMillis + simulatedMillis);\r\n            atmosphereLayer.time = new Date(Date.now())\r\n            wwd.redraw();\r\n            requestAnimationFrame(runSimulation);\r\n        }\r\n        requestAnimationFrame(runSimulation);\r\n  },[])\r\n\r\n  useEffect(()=>{\r\n    if(satCode) {\r\n      interval = setInterval(() => {\r\n        var currData=getSatelliteInfo(tle,Date.now(),23.762397,90.418917)\r\n        wwd.goTo(new WorldWind.Position(currData.lat,currData.lng,currData.height*1000));\r\n\r\n      }, 100);\r\n    } else {\r\n      clearInterval(interval);\r\n    }\r\n  },[satCode])\r\n\r\n  return(\r\n    <canvas ref={containerRef} className='globeBg' style={{ backgroundColor:'#000000',width: \"100%\", height: \"100%\" }}/>\r\n  )\r\n})\r\n\r\nexport default FPVView\r\n"]},"metadata":{},"sourceType":"module"}