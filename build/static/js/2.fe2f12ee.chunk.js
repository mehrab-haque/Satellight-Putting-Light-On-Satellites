/*! For license information please see 2.fe2f12ee.chunk.js.LICENSE.txt */
(this.webpackJsonpsatellight=this.webpackJsonpsatellight||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(123)},function(e,t,n){e.exports=n(151)()},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t,n){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return hu})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return G})),n.d(t,"e",(function(){return Ot})),n.d(t,"f",(function(){return Ha})),n.d(t,"g",(function(){return Fu})),n.d(t,"h",(function(){return ot})),n.d(t,"i",(function(){return zs})),n.d(t,"j",(function(){return Is})),n.d(t,"k",(function(){return Ua})),n.d(t,"l",(function(){return Ga})),n.d(t,"m",(function(){return cu})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return E})),n.d(t,"p",(function(){return at})),n.d(t,"q",(function(){return El})),n.d(t,"r",(function(){return bt})),n.d(t,"s",(function(){return Lu})),n.d(t,"t",(function(){return nn})),n.d(t,"u",(function(){return wi})),n.d(t,"v",(function(){return Au})),n.d(t,"w",(function(){return el})),n.d(t,"x",(function(){return ki})),n.d(t,"y",(function(){return go})),n.d(t,"z",(function(){return lo})),n.d(t,"A",(function(){return yo})),n.d(t,"B",(function(){return _})),n.d(t,"C",(function(){return g})),n.d(t,"D",(function(){return fe})),n.d(t,"E",(function(){return Qt})),n.d(t,"F",(function(){return lt})),n.d(t,"G",(function(){return ts})),n.d(t,"H",(function(){return Za})),n.d(t,"I",(function(){return wl})),n.d(t,"J",(function(){return Fe})),n.d(t,"K",(function(){return uu})),n.d(t,"L",(function(){return hn})),n.d(t,"M",(function(){return _n})),n.d(t,"N",(function(){return Qs})),n.d(t,"O",(function(){return F})),n.d(t,"P",(function(){return w})),n.d(t,"Q",(function(){return nl})),n.d(t,"R",(function(){return Ri})),n.d(t,"S",(function(){return xn})),n.d(t,"T",(function(){return ln})),n.d(t,"U",(function(){return re})),n.d(t,"V",(function(){return Ia})),n.d(t,"W",(function(){return Oa})),n.d(t,"X",(function(){return ol})),n.d(t,"Y",(function(){return A})),n.d(t,"Z",(function(){return Ra})),n.d(t,"ab",(function(){return Os})),n.d(t,"bb",(function(){return Ho})),n.d(t,"cb",(function(){return En})),n.d(t,"db",(function(){return un})),n.d(t,"eb",(function(){return C})),n.d(t,"fb",(function(){return j})),n.d(t,"gb",(function(){return xl})),n.d(t,"hb",(function(){return N})),n.d(t,"ib",(function(){return Ti})),n.d(t,"jb",(function(){return Io}));var u=n(13);function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return function(){var t,n=a(e);if(h()){var r=a(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)}}var d,p=n(7),m=n(9);void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t});var g={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},A={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},v=1,y=2,b=2,_=1006,w=1023;function E(){}Object.assign(E.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});for(var x=[],S=0;S<256;S++)x[S]=(S<16?"0":"")+S.toString(16);var T,M=1234567,L={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(x[255&e]+x[e>>8&255]+x[e>>16&255]+x[e>>24&255]+"-"+x[255&t]+x[t>>8&255]+"-"+x[t>>16&15|64]+x[t>>24&255]+"-"+x[63&n|128]+x[n>>8&255]+"-"+x[n>>16&255]+x[n>>24&255]+x[255&r]+x[r>>8&255]+x[r>>16&255]+x[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(M=e%2147483647),((M=16807*M%2147483647)-1)/2147483646},degToRad:function(e){return e*L.DEG2RAD},radToDeg:function(e){return e*L.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2),u=a(n/2),l=o((t+r)/2),c=a((t+r)/2),h=o((t-r)/2),f=a((t-r)/2),d=o((r-t)/2),p=a((r-t)/2);switch(i){case"XYX":e.set(s*c,u*h,u*f,s*l);break;case"YZY":e.set(u*f,s*c,u*h,s*l);break;case"ZXZ":e.set(u*h,u*f,s*c,s*l);break;case"XZX":e.set(s*c,u*p,u*d,s*l);break;case"YXY":e.set(u*d,s*c,u*p,s*l);break;case"ZYZ":e.set(u*p,u*d,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}},C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(p.a)(this,e),Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=n}return Object(m.a)(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}}]),e}(),R=function(){function e(){Object(p.a)(this,e),Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return Object(m.a)(e,[{key:"set",value:function(e,t,n,r,i,o,a,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],g=r[6],A=r[1],v=r[4],y=r[7],b=r[2],_=r[5],w=r[8];return i[0]=o*p+a*A+s*b,i[3]=o*m+a*v+s*_,i[6]=o*g+a*y+s*w,i[1]=u*p+l*A+c*b,i[4]=u*m+l*v+c*_,i[7]=u*g+l*y+c*w,i[2]=h*p+f*A+d*b,i[5]=h*m+f*v+d*_,i[8]=h*g+f*y+d*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-n*i*l+n*a*s+r*i*u-r*o*s}},{key:"getInverse",value:function(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],d=f*u-l*h,p=l*c-f*s,m=h*s-u*c,g=i*d+o*p+a*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);var A=1/g;return r[0]=d*A,r[1]=(a*h-f*o)*A,r[2]=(l*o-a*u)*A,r[3]=p*A,r[4]=(f*i-a*c)*A,r[5]=(a*s-l*i)*A,r[6]=m*A,r[7]=(o*c-h*i)*A,r[8]=(u*i-o*s)*A,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1)}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*l,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*l,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}]),e}(),O={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===T&&(T=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),T.width=e.width,T.height=e.height;var n=T.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=T}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},I=0;function P(e,t,n,r,i,o,a,s,u,l){Object.defineProperty(this,"id",{value:I++}),this.uuid=L.generateUUID(),this.name="",this.image=void 0!==e?e:P.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:P.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==r?r:1001,this.magFilter=void 0!==i?i:_,this.minFilter=void 0!==o?o:1008,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:w,this.internalFormat=null,this.type=void 0!==s?s:1009,this.offset=new C(0,0),this.repeat=new C(1,1),this.center=new C(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new R,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:3e3,this.version=0,this.onUpdate=null}P.DEFAULT_IMAGE=void 0,P.DEFAULT_MAPPING=300,P.prototype=Object.assign(Object.create(E.prototype),{constructor:P,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=L.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(O.getDataURL(r[o]))}else i=O.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(P.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});var k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(p.a)(this,e),Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=n,this.z=r,this.w=i}return Object(m.a)(e,[{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,g=(c+1)/2,A=(p+1)/2,v=(s+l)/4,y=(u+f)/4,b=(h+d)/4;return m>g&&m>A?m<.01?(n=0,r=.707106781,i=.707106781):(r=v/(n=Math.sqrt(m)),i=y/n):g>A?g<.01?(n=.707106781,r=0,i=.707106781):(n=v/(r=Math.sqrt(g)),i=b/r):A<.01?(n=.707106781,r=.707106781,i=0):(n=y/(i=Math.sqrt(A)),r=b/i),this.set(n,r,i,t),this}var _=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(l-s)*(l-s));return Math.abs(_)<.001&&(_=1),this.x=(d-h)/_,this.y=(u-f)/_,this.z=(l-s)/_,this.w=Math.acos((a+c+p-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}}]),e}();function N(e,t,n){this.width=e,this.height=t,this.scissor=new k(0,0,e,t),this.scissorTest=!1,this.viewport=new k(0,0,e,t),n=n||{},this.texture=new P(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:_,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function D(e,t,n){N.call(this,e,t,n),this.samples=4}N.prototype=Object.assign(Object.create(E.prototype),{constructor:N,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),D.prototype=Object.assign(Object.create(N.prototype),{constructor:D,isWebGLMultisampleRenderTarget:!0,copy:function(e){return N.prototype.copy.call(this,e),this.samples=e.samples,this}});var F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(p.a)(this,e),Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=n,this._z=r,this._w=i}return Object(m.a)(e,[{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(o){case"XYZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"YXZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"ZXY":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"ZYX":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"YZX":this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d;break;case"XZY":this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+a+c;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(l-s)*f,this._y=(i-u)*f,this._z=(o-r)*f}else if(n>a&&n>c){var d=2*Math.sqrt(1+n-a-c);this._w=(l-s)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(i+u)/d}else if(a>c){var p=2*Math.sqrt(1+a-n-c);this._w=(i-u)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(s+l)/p}else{var m=2*Math.sqrt(1+c-n-a);this._w=(o-r)/m,this._x=(i+u)/m,this._y=(s+l)/m,this._z=.25*m}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(L.clamp(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"inverse",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}],[{key:"slerp",value:function(e,t,n,r){return n.copy(e).slerp(t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(c!==p||s!==h||u!==f||l!==d){var m=1-a,g=s*h+u*f+l*d+c*p,A=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){var y=Math.sqrt(v),b=Math.atan2(y,g*A);m=Math.sin(m*b)/y,a=Math.sin(a*b)/y}var _=a*A;if(s=s*m+h*_,u=u*m+f*_,l=l*m+d*_,c=c*m+p*_,m===1-a){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,o){var a=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[o],h=i[o+1],f=i[o+2],d=i[o+3];return e[t]=a*d+l*c+s*f-u*h,e[t+1]=s*d+l*h+u*c-a*f,e[t+2]=u*d+l*f+a*h-s*c,e[t+3]=l*d-a*c-s*h-u*f,e}}]),e}(),j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(p.a)(this,e),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=n,this.z=r}return Object(m.a)(e,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(V.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(V.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,l=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return B.copy(this).projectOnVector(e),this.sub(B)}},{key:"reflect",value:function(e){return this.sub(B.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(L.clamp(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),e}(),B=new j,V=new F,G=function(){function e(t,n){Object(p.a)(this,e),Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new j(1/0,1/0,1/0),this.max=void 0!==n?n:new j(-1/0,-1/0,-1/0)}return Object(m.a)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],h=e[s+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),h=e.getZ(s);l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=W.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new j),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new j),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),z.copy(t.boundingBox),z.applyMatrix4(e.matrixWorld),this.union(z));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new j),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,W),W.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Z),$.subVectors(this.max,Z),H.subVectors(e.a,Z),K.subVectors(e.b,Z),Y.subVectors(e.c,Z),Q.subVectors(K,H),X.subVectors(Y,K),J.subVectors(H,Y);var t=[0,-Q.z,Q.y,0,-X.z,X.y,0,-J.z,J.y,Q.z,0,-Q.x,X.z,0,-X.x,J.z,0,-J.x,-Q.y,Q.x,0,-X.y,X.x,0,-J.y,J.x,0];return!!U(t,H,K,Y,$)&&(!!U(t=[1,0,0,0,1,0,0,0,1],H,K,Y,$)&&(ee.crossVectors(Q,X),U(t=[ee.x,ee.y,ee.z],H,K,Y,$)))}},{key:"clampPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new j),t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return W.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(W).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(q[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),q[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),q[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),q[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),q[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),q[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),q[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),q[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(q)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();function U(e,t,n,r,i){for(var o=0,a=e.length-3;o<=a;o+=3){te.fromArray(e,o);var s=i.x*Math.abs(te.x)+i.y*Math.abs(te.y)+i.z*Math.abs(te.z),u=t.dot(te),l=n.dot(te),c=r.dot(te);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var q=[new j,new j,new j,new j,new j,new j,new j,new j],W=new j,z=new G,H=new j,K=new j,Y=new j,Q=new j,X=new j,J=new j,Z=new j,$=new j,ee=new j,te=new j,ne=new G,re=function(){function e(t,n){Object(p.a)(this,e),this.center=void 0!==t?t:new j,this.radius=void 0!==n?n:-1}return Object(m.a)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):ne.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new j),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new G),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}]),e}(),ie=new j,oe=new j,ae=new j,se=new j,ue=new j,le=new j,ce=new j,he=function(){function e(t,n){Object(p.a)(this,e),this.origin=void 0!==t?t:new j,this.direction=void 0!==n?n:new j(0,0,-1)}return Object(m.a)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new j),t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,ie)),this}},{key:"closestPointToPoint",value:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new j),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=ie.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ie.copy(this.direction).multiplyScalar(t).add(this.origin),ie.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){oe.copy(e).add(t).multiplyScalar(.5),ae.copy(t).sub(e).normalize(),se.copy(this.origin).sub(oe);var i,o,a,s,u=.5*e.distanceTo(t),l=-this.direction.dot(ae),c=se.dot(this.direction),h=-se.dot(ae),f=se.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(o=l*c-h,s=u*d,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var p=1/d;a=(i*=p)*(i+l*(o*=p)+2*c)+o*(l*i+o+2*h)+f}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+f):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(ae).multiplyScalar(o).add(oe),a}},{key:"intersectSphere",value:function(e,t){ie.subVectors(e.center,this.origin);var n=ie.dot(this.direction),r=ie.dot(ie)-n*n,i=e.radius*e.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,ie)}},{key:"intersectTriangle",value:function(e,t,n,r,i){ue.subVectors(t,e),le.subVectors(n,e),ce.crossVectors(ue,le);var o,a=this.direction.dot(ce);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}se.subVectors(this.origin,e);var s=o*this.direction.dot(le.crossVectors(se,le));if(s<0)return null;var u=o*this.direction.dot(ue.cross(se));if(u<0)return null;if(s+u>a)return null;var l=-o*se.dot(ce);return l<0?null:this.at(l/a,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}]),e}(),fe=function(){function e(){Object(p.a)(this,e),Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return Object(m.a)(e,[{key:"set",value:function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/de.setFromMatrixColumn(e,0).length(),i=1/de.setFromMatrixColumn(e,1).length(),o=1/de.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=o*l,f=o*c,d=a*l,p=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-a*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*l,g=s*c,A=u*l,v=u*c;t[0]=m+v*a,t[4]=A*a-g,t[8]=o*u,t[1]=o*c,t[5]=o*l,t[9]=-a,t[2]=g*a-A,t[6]=v+m*a,t[10]=o*s}else if("ZXY"===e.order){var y=s*l,b=s*c,_=u*l,w=u*c;t[0]=y-w*a,t[4]=-o*c,t[8]=_+b*a,t[1]=b+_*a,t[5]=o*l,t[9]=w-y*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var E=o*l,x=o*c,S=a*l,T=a*c;t[0]=s*l,t[4]=S*u-x,t[8]=E*u+T,t[1]=s*c,t[5]=T*u+E,t[9]=x*u-S,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var M=o*s,L=o*u,C=a*s,R=a*u;t[0]=s*l,t[4]=R-M*c,t[8]=C*c+L,t[1]=c,t[5]=o*l,t[9]=-a*l,t[2]=-u*l,t[6]=L*c+C,t[10]=M-R*c}else if("XZY"===e.order){var O=o*s,I=o*u,P=a*s,k=a*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=O*c+k,t[5]=o*l,t[9]=I*c-P,t[2]=P*c-I,t[6]=a*l,t[10]=k*c+O}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(me,e,ge)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return ye.subVectors(e,t),0===ye.lengthSq()&&(ye.z=1),ye.normalize(),Ae.crossVectors(n,ye),0===Ae.lengthSq()&&(1===Math.abs(n.z)?ye.x+=1e-4:ye.z+=1e-4,ye.normalize(),Ae.crossVectors(n,ye)),Ae.normalize(),ve.crossVectors(ye,Ae),r[0]=Ae.x,r[4]=ve.x,r[8]=ye.x,r[1]=Ae.y,r[5]=ve.y,r[9]=ye.y,r[2]=Ae.z,r[6]=ve.z,r[10]=ye.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],g=n[14],A=n[3],v=n[7],y=n[11],b=n[15],_=r[0],w=r[4],E=r[8],x=r[12],S=r[1],T=r[5],M=r[9],L=r[13],C=r[2],R=r[6],O=r[10],I=r[14],P=r[3],k=r[7],N=r[11],D=r[15];return i[0]=o*_+a*S+s*C+u*P,i[4]=o*w+a*T+s*R+u*k,i[8]=o*E+a*M+s*O+u*N,i[12]=o*x+a*L+s*I+u*D,i[1]=l*_+c*S+h*C+f*P,i[5]=l*w+c*T+h*R+f*k,i[9]=l*E+c*M+h*O+f*N,i[13]=l*x+c*L+h*I+f*D,i[2]=d*_+p*S+m*C+g*P,i[6]=d*w+p*T+m*R+g*k,i[10]=d*E+p*M+m*O+g*N,i[14]=d*x+p*L+m*I+g*D,i[3]=A*_+v*S+y*C+b*P,i[7]=A*w+v*T+y*R+b*k,i[11]=A*E+v*M+y*O+b*N,i[15]=A*x+v*L+y*I+b*D,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+e[11]*(+t*u*c-t*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+e[15]*(-r*a*l-t*s*c+t*a*h+r*o*c-n*o*h+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"getInverse",value:function(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],g=r[12],A=r[13],v=r[14],y=r[15],b=d*v*h-A*p*h+A*c*m-l*v*m-d*c*y+l*p*y,_=g*p*h-f*v*h-g*c*m+u*v*m+f*c*y-u*p*y,w=f*A*h-g*d*h+g*l*m-u*A*m-f*l*y+u*d*y,E=g*d*c-f*A*c-g*l*p+u*A*p+f*l*v-u*d*v,x=i*b+o*_+a*w+s*E;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var S=1/x;return n[0]=b*S,n[1]=(A*p*s-d*v*s-A*a*m+o*v*m+d*a*y-o*p*y)*S,n[2]=(l*v*s-A*c*s+A*a*h-o*v*h-l*a*y+o*c*y)*S,n[3]=(d*c*s-l*p*s-d*a*h+o*p*h+l*a*m-o*c*m)*S,n[4]=_*S,n[5]=(f*v*s-g*p*s+g*a*m-i*v*m-f*a*y+i*p*y)*S,n[6]=(g*c*s-u*v*s-g*a*h+i*v*h+u*a*y-i*c*y)*S,n[7]=(u*p*s-f*c*s+f*a*h-i*p*h-u*a*m+i*c*m)*S,n[8]=w*S,n[9]=(g*d*s-f*A*s-g*o*m+i*A*m+f*o*y-i*d*y)*S,n[10]=(u*A*s-g*l*s+g*o*h-i*A*h-u*o*y+i*l*y)*S,n[11]=(f*l*s-u*d*s-f*o*h+i*d*h+u*o*m-i*l*m)*S,n[12]=E*S,n[13]=(f*A*a-g*d*a+g*o*p-i*A*p-f*o*v+i*d*v)*S,n[14]=(g*l*a-u*A*a-g*o*c+i*A*c+u*o*v-i*l*v)*S,n[15]=(u*d*a-f*l*a+f*o*c-i*d*c-u*o*p+i*l*p)*S,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,l=o+o,c=a+a,h=i*u,f=i*l,d=i*c,p=o*l,m=o*c,g=a*c,A=s*u,v=s*l,y=s*c,b=n.x,_=n.y,w=n.z;return r[0]=(1-(p+g))*b,r[1]=(f+y)*b,r[2]=(d-v)*b,r[3]=0,r[4]=(f-y)*_,r[5]=(1-(h+g))*_,r[6]=(m+A)*_,r[7]=0,r[8]=(d+v)*w,r[9]=(m-A)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=de.set(r[0],r[1],r[2]).length(),o=de.set(r[4],r[5],r[6]).length(),a=de.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],pe.copy(this);var s=1/i,u=1/o,l=1/a;return pe.elements[0]*=s,pe.elements[1]*=s,pe.elements[2]*=s,pe.elements[4]*=u,pe.elements[5]*=u,pe.elements[6]*=u,pe.elements[8]*=l,pe.elements[9]*=l,pe.elements[10]*=l,t.setFromRotationMatrix(pe),n.x=i,n.y=o,n.z=a,this}},{key:"makePerspective",value:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),l=1/(o-i),c=(t+e)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),de=new j,pe=new fe,me=new j(0,0,0),ge=new j(1,1,1),Ae=new j,ve=new j,ye=new j,be=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;Object(p.a)(this,e),Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=n,this._z=r,this._order=i}return Object(m.a)(e,[{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e,t,n){var r=L.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],f=i[6],d=i[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o));break;case"ZYX":this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return _e.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_e,t,n)}},{key:"setFromVector3",value:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)}},{key:"reorder",value:function(e){return we.setFromEuler(this),this.setFromQuaternion(we,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new j(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}]),e}();be.DefaultOrder="XYZ",be.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var _e=new fe,we=new F,Ee=function(){function e(){Object(p.a)(this,e),this.mask=1}return Object(m.a)(e,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}}]),e}(),xe=0,Se=new j,Te=new F,Me=new fe,Le=new j,Ce=new j,Re=new j,Oe=new F,Ie=new j(1,0,0),Pe=new j(0,1,0),ke=new j(0,0,1),Ne={type:"added"},De={type:"removed"};function Fe(){Object.defineProperty(this,"id",{value:xe++}),this.uuid=L.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Fe.DefaultUp.clone();var e=new j,t=new be,n=new F,r=new j(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new fe},normalMatrix:{value:new R}}),this.matrix=new fe,this.matrixWorld=new fe,this.matrixAutoUpdate=Fe.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ee,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Fe.DefaultUp=new j(0,1,0),Fe.DefaultMatrixAutoUpdate=!0,Fe.prototype=Object.assign(Object.create(E.prototype),{constructor:Fe,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Te.setFromAxisAngle(e,t),this.quaternion.multiply(Te),this},rotateOnWorldAxis:function(e,t){return Te.setFromAxisAngle(e,t),this.quaternion.premultiply(Te),this},rotateX:function(e){return this.rotateOnAxis(Ie,e)},rotateY:function(e){return this.rotateOnAxis(Pe,e)},rotateZ:function(e){return this.rotateOnAxis(ke,e)},translateOnAxis:function(e,t){return Se.copy(e).applyQuaternion(this.quaternion),this.position.add(Se.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Ie,e)},translateY:function(e){return this.translateOnAxis(Pe,e)},translateZ:function(e){return this.translateOnAxis(ke,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Me.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?Le.copy(e):Le.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Ce.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Me.lookAt(Ce,Le,this.up):Me.lookAt(Le,Ce,this.up),this.quaternion.setFromRotationMatrix(Me),r&&(Me.extractRotation(r.matrixWorld),Te.setFromRotationMatrix(Me),this.quaternion.premultiply(Te.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ne)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(De)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Me.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Me.multiply(e.parent.matrixWorld)),e.applyMatrix4(Me),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new j),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new F),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ce,e,Re),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new j),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ce,Oe,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new j),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var l=a[s];i(e.shapes,l)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,f=this.material.length;h<f;h++)c.push(i(e.materials,this.material[h]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(e).object)}if(t){var p=y(e.geometries),m=y(e.materials),g=y(e.textures),A=y(e.images),v=y(e.shapes);p.length>0&&(n.geometries=p),m.length>0&&(n.materials=m),g.length>0&&(n.textures=g),A.length>0&&(n.images=A),v.length>0&&(n.shapes=v)}return n.object=r,n;function y(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});var je=new j,Be=new j,Ve=new R,Ge=function(){function e(t,n){Object(p.a)(this,e),Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new j(1,0,0),this.constant=void 0!==n?n:0}return Object(m.a)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=je.subVectors(n,t).cross(Be.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new j),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new j);var n=e.delta(je),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new j),e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Ve.getNormalMatrix(e),r=this.coplanarPoint(je).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}]),e}(),Ue=new j,qe=new j,We=new j,ze=new j,He=new j,Ke=new j,Ye=new j,Qe=new j,Xe=new j,Je=new j,Ze=function(){function e(t,n,r){Object(p.a)(this,e),this.a=void 0!==t?t:new j,this.b=void 0!==n?n:new j,this.c=void 0!==r?r:new j}return Object(m.a)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Ue.subVectors(this.c,this.b),qe.subVectors(this.a,this.b),.5*Ue.cross(qe).length()}},{key:"getMidpoint",value:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new j),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Ge),e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,o){return e.getUV(t,this.a,this.b,this.c,n,r,i,o)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new j);var n,r,i=this.a,o=this.b,a=this.c;He.subVectors(o,i),Ke.subVectors(a,i),Qe.subVectors(e,i);var s=He.dot(Qe),u=Ke.dot(Qe);if(s<=0&&u<=0)return t.copy(i);Xe.subVectors(e,o);var l=He.dot(Xe),c=Ke.dot(Xe);if(l>=0&&c<=l)return t.copy(o);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(He,n);Je.subVectors(e,a);var f=He.dot(Je),d=Ke.dot(Je);if(d>=0&&f<=d)return t.copy(a);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(Ke,r);var m=l*d-f*c;if(m<=0&&c-l>=0&&f-d>=0)return Ye.subVectors(a,o),r=(c-l)/(c-l+(f-d)),t.copy(o).addScaledVector(Ye,r);var g=1/(m+p+h);return n=p*g,r=h*g,t.copy(i).addScaledVector(He,n).addScaledVector(Ke,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new j),r.subVectors(n,t),Ue.subVectors(e,t),r.cross(Ue);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Ue.subVectors(r,t),qe.subVectors(n,t),We.subVectors(e,t);var o=Ue.dot(Ue),a=Ue.dot(qe),s=Ue.dot(We),u=qe.dot(qe),l=qe.dot(We),c=o*u-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new j),0===c)return i.set(-2,-1,-1);var h=1/c,f=(u*s-a*l)*h,d=(o*l-a*s)*h;return i.set(1-f-d,d,f)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,ze),ze.x>=0&&ze.y>=0&&ze.x+ze.y<=1}},{key:"getUV",value:function(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,ze),s.set(0,0),s.addScaledVector(i,ze.x),s.addScaledVector(o,ze.y),s.addScaledVector(a,ze.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Ue.subVectors(n,t),qe.subVectors(e,t),Ue.cross(qe).dot(r)<0}}]),e}(),$e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},et={h:0,s:0,l:0},tt={h:0,s:0,l:0};function nt(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function rt(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function it(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var ot=function(){function e(t,n,r){return Object(p.a)(this,e),Object.defineProperty(this,"isColor",{value:!0}),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return Object(m.a)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=L.euclideanModulo(e,1),t=L.clamp(t,0,1),n=L.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=nt(i,r,e+1/3),this.g=nt(i,r,e),this.b=nt(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=$e[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=rt(e.r),this.g=rt(e.g),this.b=rt(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=it(e.r),this.g=it(e.g),this.b=it(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)t=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:t=(i-o)/l+(i<o?6:0);break;case i:t=(o-r)/l+2;break;case o:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(et),et.h+=e,et.s+=t,et.l+=n,this.setHSL(et.h,et.s,et.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(et),e.getHSL(tt);var n=L.lerp(et.h,tt.h,t),r=L.lerp(et.s,tt.s,t),i=L.lerp(et.l,tt.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();ot.NAMES=$e,ot.prototype.r=1,ot.prototype.g=1,ot.prototype.b=1;var at=function(){function e(t,n,r,i,o,a){Object(p.a)(this,e),this.a=t,this.b=n,this.c=r,this.normal=i&&i.isVector3?i:new j,this.vertexNormals=Array.isArray(i)?i:[],this.color=o&&o.isColor?o:new ot,this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=void 0!==a?a:0}return Object(m.a)(e,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var r=0,i=e.vertexColors.length;r<i;r++)this.vertexColors[r]=e.vertexColors[r].clone();return this}}]),e}(),st=0;function ut(){Object.defineProperty(this,"id",{value:st++}),this.uuid=L.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function lt(e){ut.call(this),this.type="MeshBasicMaterial",this.color=new ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}ut.prototype=Object.assign(Object.create(E.prototype),{constructor:ut,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ut.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),lt.prototype=Object.create(ut.prototype),lt.prototype.constructor=lt,lt.prototype.isMeshBasicMaterial=!0,lt.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var ct=new j,ht=new C;function ft(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function dt(e,t,n){ft.call(this,new Int8Array(e),t,n)}function pt(e,t,n){ft.call(this,new Uint8Array(e),t,n)}function mt(e,t,n){ft.call(this,new Uint8ClampedArray(e),t,n)}function gt(e,t,n){ft.call(this,new Int16Array(e),t,n)}function At(e,t,n){ft.call(this,new Uint16Array(e),t,n)}function vt(e,t,n){ft.call(this,new Int32Array(e),t,n)}function yt(e,t,n){ft.call(this,new Uint32Array(e),t,n)}function bt(e,t,n){ft.call(this,new Float32Array(e),t,n)}function _t(e,t,n){ft.call(this,new Float64Array(e),t,n)}Object.defineProperty(ft.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ft.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ot),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new C),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new j),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new k),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)ht.fromBufferAttribute(this,t),ht.applyMatrix3(e),this.setXY(t,ht.x,ht.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)ct.fromBufferAttribute(this,r),ct.applyMatrix3(e),this.setXYZ(r,ct.x,ct.y,ct.z);return this},applyMatrix4:function(e){for(var t=0,n=this.count;t<n;t++)ct.x=this.getX(t),ct.y=this.getY(t),ct.z=this.getZ(t),ct.applyMatrix4(e),this.setXYZ(t,ct.x,ct.y,ct.z);return this},applyNormalMatrix:function(e){for(var t=0,n=this.count;t<n;t++)ct.x=this.getX(t),ct.y=this.getY(t),ct.z=this.getZ(t),ct.applyNormalMatrix(e),this.setXYZ(t,ct.x,ct.y,ct.z);return this},transformDirection:function(e){for(var t=0,n=this.count;t<n;t++)ct.x=this.getX(t),ct.y=this.getY(t),ct.z=this.getZ(t),ct.transformDirection(e),this.setXYZ(t,ct.x,ct.y,ct.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),dt.prototype=Object.create(ft.prototype),dt.prototype.constructor=dt,pt.prototype=Object.create(ft.prototype),pt.prototype.constructor=pt,mt.prototype=Object.create(ft.prototype),mt.prototype.constructor=mt,gt.prototype=Object.create(ft.prototype),gt.prototype.constructor=gt,At.prototype=Object.create(ft.prototype),At.prototype.constructor=At,vt.prototype=Object.create(ft.prototype),vt.prototype.constructor=vt,yt.prototype=Object.create(ft.prototype),yt.prototype.constructor=yt,bt.prototype=Object.create(ft.prototype),bt.prototype.constructor=bt,_t.prototype=Object.create(ft.prototype),_t.prototype.constructor=_t;var wt=function(){function e(){Object(p.a)(this,e),this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}return Object(m.a)(e,[{key:"computeGroups",value:function(e){var t,n,r=[],i=void 0,o=e.faces;for(n=0;n<o.length;n++){var a=o[n];a.materialIndex!==i&&(i=a.materialIndex,void 0!==t&&(t.count=3*n-t.start,r.push(t)),t={start:3*n,materialIndex:i})}void 0!==t&&(t.count=3*n-t.start,r.push(t)),this.groups=r}},{key:"fromGeometry",value:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,u=s.length;if(u>0){t=[];for(var l=0;l<u;l++)t[l]={name:s[l].name,data:[]};this.morphTargets.position=t}var c,h=e.morphNormals,f=h.length;if(f>0){c=[];for(var d=0;d<f;d++)c[d]={name:h[d].name,data:[]};this.morphTargets.normal=c}var p=e.skinIndices,m=e.skinWeights,g=p.length===r.length,A=m.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var v=0;v<n.length;v++){var y=n[v];this.vertices.push(r[y.a],r[y.b],r[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var _=y.normal;this.normals.push(_,_,_)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var E=y.color;this.colors.push(E,E,E)}if(!0===o){var x=i[0][v];void 0!==x?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",v),this.uvs.push(new C,new C,new C))}if(!0===a){var S=i[1][v];void 0!==S?this.uvs2.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",v),this.uvs2.push(new C,new C,new C))}for(var T=0;T<u;T++){var M=s[T].vertices;t[T].data.push(M[y.a],M[y.b],M[y.c])}for(var L=0;L<f;L++){var R=h[L].vertexNormals[v];c[L].data.push(R.a,R.b,R.c)}g&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),A&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}]),e}();function Et(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}var xt=1,St=new fe,Tt=new Fe,Mt=new j,Lt=new G,Ct=new G,Rt=new j;function Ot(){Object.defineProperty(this,"id",{value:xt+=2}),this.uuid=L.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ot.prototype=Object.assign(Object.create(E.prototype),{constructor:Ot,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Et(e)>65535?yt:At)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new R).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return St.makeRotationX(e),this.applyMatrix4(St),this},rotateY:function(e){return St.makeRotationY(e),this.applyMatrix4(St),this},rotateZ:function(e){return St.makeRotationZ(e),this.applyMatrix4(St),this},translate:function(e,t,n){return St.makeTranslation(e,t,n),this.applyMatrix4(St),this},scale:function(e,t,n){return St.makeScale(e,t,n),this.applyMatrix4(St),this},lookAt:function(e){return Tt.lookAt(e),Tt.updateMatrix(),this.applyMatrix4(Tt.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mt).negate(),this.translate(Mt.x,Mt.y,Mt.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new bt(3*t.vertices.length,3),r=new bt(3*t.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new bt(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new bt(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}if(!0===t.verticesNeedUpdate){var r=this.attributes.position;void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){var i=this.attributes.normal;void 0!==i&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){var o=this.attributes.color;void 0!==o&&(o.copyColorsArray(t.colors),o.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){var a=this.attributes.uv;void 0!==a&&(a.copyVector2sArray(t.uvs),a.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){var s=this.attributes.lineDistance;void 0!==s&&(s.copyArray(t.lineDistances),s.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new wt).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new ft(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.setAttribute("normal",new ft(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.setAttribute("color",new ft(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new ft(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new ft(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],u=e.morphTargets[a],l=0,c=u.length;l<c;l++){var h=u[l],f=new bt(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var d=new bt(4*e.skinIndices.length,4);this.setAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new bt(4*e.skinWeights.length,4);this.setAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new G);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];Lt.setFromBufferAttribute(i),this.morphTargetsRelative?(Rt.addVectors(this.boundingBox.min,Lt.min),this.boundingBox.expandByPoint(Rt),Rt.addVectors(this.boundingBox.max,Lt.max),this.boundingBox.expandByPoint(Rt)):(this.boundingBox.expandByPoint(Lt.min),this.boundingBox.expandByPoint(Lt.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new re);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new j,1/0);if(e){var n=this.boundingSphere.center;if(Lt.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var o=t[r];Ct.setFromBufferAttribute(o),this.morphTargetsRelative?(Rt.addVectors(Lt.min,Ct.min),Lt.expandByPoint(Rt),Rt.addVectors(Lt.max,Ct.max),Lt.expandByPoint(Rt)):(Lt.expandByPoint(Ct.min),Lt.expandByPoint(Ct.max))}Lt.getCenter(n);for(var a=0,s=0,u=e.count;s<u;s++)Rt.fromBufferAttribute(e,s),a=Math.max(a,n.distanceToSquared(Rt));if(t)for(var l=0,c=t.length;l<c;l++)for(var h=t[l],f=this.morphTargetsRelative,d=0,p=h.count;d<p;d++)Rt.fromBufferAttribute(h,d),f&&(Mt.fromBufferAttribute(e,d),Rt.add(Mt)),a=Math.max(a,n.distanceToSquared(Rt));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new ft(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var o=new j,a=new j,s=new j,u=new j,l=new j,c=new j,h=new j,f=new j;if(e)for(var d=0,p=e.count;d<p;d+=3){var m=e.getX(d+0),g=e.getX(d+1),A=e.getX(d+2);o.fromBufferAttribute(t,m),a.fromBufferAttribute(t,g),s.fromBufferAttribute(t,A),h.subVectors(s,a),f.subVectors(o,a),h.cross(f),u.fromBufferAttribute(n,m),l.fromBufferAttribute(n,g),c.fromBufferAttribute(n,A),u.add(h),l.add(h),c.add(h),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(A,c.x,c.y,c.z)}else for(var v=0,y=t.count;v<y;v+=3)o.fromBufferAttribute(t,v+0),a.fromBufferAttribute(t,v+1),s.fromBufferAttribute(t,v+2),h.subVectors(s,a),f.subVectors(o,a),h.cross(f),n.setXYZ(v+0,h.x,h.y,h.z),n.setXYZ(v+1,h.x,h.y,h.z),n.setXYZ(v+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,u=Math.min(a.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=a[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Rt.fromBufferAttribute(e,t),Rt.normalize(),e.setXYZ(t,Rt.x,Rt.y,Rt.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r),a=0,s=0,u=0,l=t.length;u<l;u++){a=t[u]*r;for(var c=0;c<r;c++)o[s++]=n[a++]}return new ft(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Ot,n=this.index.array,r=this.attributes;for(var i in r){var o=e(r[i],n);t.setAttribute(i,o)}var a=this.morphAttributes;for(var s in a){for(var u=[],l=a[s],c=0,h=l.length;c<h;c++){var f=e(l[c],n);u.push(f)}t.morphAttributes[s]=u}t.morphTargetsRelative=this.morphTargetsRelative;for(var d=this.groups,p=0,m=d.length;p<m;p++){var g=d[p];t.addGroup(g.start,g.count,g.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var o in i){var a=i[o],s=a.toJSON(e.data);""!==a.name&&(s.name=a.name),e.data.attributes[o]=s}var u={},l=!1;for(var c in this.morphAttributes){for(var h=this.morphAttributes[c],f=[],d=0,p=h.length;d<p;d++){var m=h[d],g=m.toJSON(e.data);""!==m.name&&(g.name=m.name),f.push(g)}f.length>0&&(u[c]=f,l=!0)}l&&(e.data.morphAttributes=u,e.data.morphTargetsRelative=this.morphTargetsRelative);var A=this.groups;A.length>0&&(e.data.groups=JSON.parse(JSON.stringify(A)));var v=this.boundingSphere;return null!==v&&(e.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),e},clone:function(){return(new Ot).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var o=r[i];this.setAttribute(i,o.clone(t))}var a=e.morphAttributes;for(var s in a){for(var u=[],l=a[s],c=0,h=l.length;c<h;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var f=e.groups,d=0,p=f.length;d<p;d++){var m=f[d];this.addGroup(m.start,m.count,m.materialIndex)}var g=e.boundingBox;null!==g&&(this.boundingBox=g.clone());var A=e.boundingSphere;return null!==A&&(this.boundingSphere=A.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var It=new fe,Pt=new he,kt=new re,Nt=new j,Dt=new j,Ft=new j,jt=new j,Bt=new j,Vt=new j,Gt=new j,Ut=new j,qt=new j,Wt=new C,zt=new C,Ht=new C,Kt=new j,Yt=new j;function Qt(e,t){Fe.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ot,this.material=void 0!==t?t:new lt,this.updateMorphTargets()}function Xt(e,t,n,r,i,o,a,s){if(null===(t.side===v?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==y,s)))return null;Yt.copy(s),Yt.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Yt);return u<n.near||u>n.far?null:{distance:u,point:Yt.clone(),object:e}}function Jt(e,t,n,r,i,o,a,s,u,l,c,h){Nt.fromBufferAttribute(i,l),Dt.fromBufferAttribute(i,c),Ft.fromBufferAttribute(i,h);var f=e.morphTargetInfluences;if(t.morphTargets&&o&&f){Gt.set(0,0,0),Ut.set(0,0,0),qt.set(0,0,0);for(var d=0,p=o.length;d<p;d++){var m=f[d],g=o[d];0!==m&&(jt.fromBufferAttribute(g,l),Bt.fromBufferAttribute(g,c),Vt.fromBufferAttribute(g,h),a?(Gt.addScaledVector(jt,m),Ut.addScaledVector(Bt,m),qt.addScaledVector(Vt,m)):(Gt.addScaledVector(jt.sub(Nt),m),Ut.addScaledVector(Bt.sub(Dt),m),qt.addScaledVector(Vt.sub(Ft),m)))}Nt.add(Gt),Dt.add(Ut),Ft.add(qt)}e.isSkinnedMesh&&(e.boneTransform(l,Nt),e.boneTransform(c,Dt),e.boneTransform(h,Ft));var A=Xt(e,t,n,r,Nt,Dt,Ft,Kt);if(A){s&&(Wt.fromBufferAttribute(s,l),zt.fromBufferAttribute(s,c),Ht.fromBufferAttribute(s,h),A.uv=Ze.getUV(Kt,Nt,Dt,Ft,Wt,zt,Ht,new C)),u&&(Wt.fromBufferAttribute(u,l),zt.fromBufferAttribute(u,c),Ht.fromBufferAttribute(u,h),A.uv2=Ze.getUV(Kt,Nt,Dt,Ft,Wt,zt,Ht,new C));var v=new at(l,c,h);Ze.getNormal(Nt,Dt,Ft,v.normal),A.face=v}return A}Qt.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Qt,isMesh:!0,copy:function(e){return Fe.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),kt.copy(r.boundingSphere),kt.applyMatrix4(o),!1!==e.ray.intersectsSphere(kt)&&(It.getInverse(o),Pt.copy(e.ray).applyMatrix4(It),null===r.boundingBox||!1!==Pt.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a=r.index,s=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,h=r.attributes.uv2,f=r.groups,d=r.drawRange;if(null!==a)if(Array.isArray(i))for(var p=0,m=f.length;p<m;p++)for(var g=f[p],A=i[g.materialIndex],v=Math.max(g.start,d.start),y=Math.min(g.start+g.count,d.start+d.count);v<y;v+=3){var b=a.getX(v),_=a.getX(v+1),w=a.getX(v+2);(n=Jt(this,A,e,Pt,s,u,l,c,h,b,_,w))&&(n.faceIndex=Math.floor(v/3),n.face.materialIndex=g.materialIndex,t.push(n))}else for(var E=Math.max(0,d.start),x=Math.min(a.count,d.start+d.count);E<x;E+=3){var S=a.getX(E),T=a.getX(E+1),M=a.getX(E+2);(n=Jt(this,i,e,Pt,s,u,l,c,h,S,T,M))&&(n.faceIndex=Math.floor(E/3),t.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var L=0,R=f.length;L<R;L++)for(var O=f[L],I=i[O.materialIndex],P=Math.max(O.start,d.start),k=Math.min(O.start+O.count,d.start+d.count);P<k;P+=3){(n=Jt(this,I,e,Pt,s,u,l,c,h,P,P+1,P+2))&&(n.faceIndex=Math.floor(P/3),n.face.materialIndex=O.materialIndex,t.push(n))}else for(var N=Math.max(0,d.start),D=Math.min(s.count,d.start+d.count);N<D;N+=3){(n=Jt(this,i,e,Pt,s,u,l,c,h,N,N+1,N+2))&&(n.faceIndex=Math.floor(N/3),t.push(n))}}else if(r.isGeometry){var F,j=Array.isArray(i),B=r.vertices,V=r.faces,G=r.faceVertexUvs[0];G.length>0&&(F=G);for(var U=0,q=V.length;U<q;U++){var W=V[U],z=j?i[W.materialIndex]:i;if(void 0!==z){var H=B[W.a],K=B[W.b],Y=B[W.c];if(n=Xt(this,z,e,Pt,H,K,Y,Kt)){if(F&&F[U]){var Q=F[U];Wt.copy(Q[0]),zt.copy(Q[1]),Ht.copy(Q[2]),n.uv=Ze.getUV(Kt,H,K,Y,Wt,zt,Ht,new C)}n.face=W,n.faceIndex=U,t.push(n)}}}}}});var Zt=0,$t=new fe,en=new Fe,tn=new j;function nn(){Object.defineProperty(this,"id",{value:Zt+=2}),this.uuid=L.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}nn.prototype=Object.assign(Object.create(E.prototype),{constructor:nn,isGeometry:!0,applyMatrix4:function(e){for(var t=(new R).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(var i=0,o=this.faces.length;i<o;i++){var a=this.faces[i];a.normal.applyMatrix3(t).normalize();for(var s=0,u=a.vertexNormals.length;s<u;s++)a.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return $t.makeRotationX(e),this.applyMatrix4($t),this},rotateY:function(e){return $t.makeRotationY(e),this.applyMatrix4($t),this},rotateZ:function(e){return $t.makeRotationZ(e),this.applyMatrix4($t),this},translate:function(e,t,n){return $t.makeTranslation(e,t,n),this.applyMatrix4($t),this},scale:function(e,t,n){return $t.makeScale(e,t,n),this.applyMatrix4($t),this},lookAt:function(e){return en.lookAt(e),en.updateMatrix(),this.applyMatrix4(en.matrix),this},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index:void 0,r=e.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position,o=r.normal,a=r.color,s=r.uv,u=r.uv2;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=0;l<i.count;l++)t.vertices.push((new j).fromBufferAttribute(i,l)),void 0!==a&&t.colors.push((new ot).fromBufferAttribute(a,l));function c(e,n,r,i){var l=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],c=void 0===o?[]:[(new j).fromBufferAttribute(o,e),(new j).fromBufferAttribute(o,n),(new j).fromBufferAttribute(o,r)],h=new at(e,n,r,c,l,i);t.faces.push(h),void 0!==s&&t.faceVertexUvs[0].push([(new C).fromBufferAttribute(s,e),(new C).fromBufferAttribute(s,n),(new C).fromBufferAttribute(s,r)]),void 0!==u&&t.faceVertexUvs[1].push([(new C).fromBufferAttribute(u,e),(new C).fromBufferAttribute(u,n),(new C).fromBufferAttribute(u,r)])}var h=e.groups;if(h.length>0)for(var f=0;f<h.length;f++)for(var d=h[f],p=d.start,m=p,g=p+d.count;m<g;m+=3)void 0!==n?c(n.getX(m),n.getX(m+1),n.getX(m+2),d.materialIndex):c(m,m+1,m+2,d.materialIndex);else if(void 0!==n)for(var A=0;A<n.count;A+=3)c(n.getX(A),n.getX(A+1),n.getX(A+2));else for(var v=0;v<i.count;v+=3)c(v,v+1,v+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(tn).negate(),this.translate(tn.x,tn.y,tn.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new fe;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){for(var e=new j,t=new j,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);for(var t=new Array(this.vertices.length),n=0,r=this.vertices.length;n<r;n++)t[n]=new j;if(e)for(var i=new j,o=new j,a=0,s=this.faces.length;a<s;a++){var u=this.faces[a],l=this.vertices[u.a],c=this.vertices[u.b],h=this.vertices[u.c];i.subVectors(h,c),o.subVectors(l,c),i.cross(o),t[u.a].add(i),t[u.b].add(i),t[u.c].add(i)}else{this.computeFaceNormals();for(var f=0,d=this.faces.length;f<d;f++){var p=this.faces[f];t[p.a].add(p.normal),t[p.b].add(p.normal),t[p.c].add(p.normal)}}for(var m=0,g=this.vertices.length;m<g;m++)t[m].normalize();for(var A=0,v=this.faces.length;A<v;A++){var y=this.faces[A],b=y.vertexNormals;3===b.length?(b[0].copy(t[y.a]),b[1].copy(t[y.b]),b[2].copy(t[y.c])):(b[0]=t[y.a].clone(),b[1]=t[y.b].clone(),b[2]=t[y.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e],r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var r=0,i=n.vertexNormals.length;r<i;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var o=new nn;o.faces=this.faces;for(var a=0,s=this.morphTargets.length;a<s;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];for(var u=this.morphNormals[a].faceNormals,l=this.morphNormals[a].vertexNormals,c=0,h=this.faces.length;c<h;c++){var f=new j,d={a:new j,b:new j,c:new j};u.push(f),l.push(d)}}var p=this.morphNormals[a];o.vertices=this.morphTargets[a].vertices,o.computeFaceNormals(),o.computeVertexNormals();for(var m=0,g=this.faces.length;m<g;m++){var A=this.faces[m],v=p.faceNormals[m],y=p.vertexNormals[m];v.copy(A.normal),y.a.copy(A.vertexNormals[0]),y.b.copy(A.vertexNormals[1]),y.c.copy(A.vertexNormals[2])}}for(var b=0,_=this.faces.length;b<_;b++){var w=this.faces[b];w.normal=w.__originalFaceNormal,w.vertexNormals=w.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new G),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new re),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,l=this.colors,c=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new R).getNormalMatrix(t));for(var h=0,f=a.length;h<f;h++){var d=a[h].clone();void 0!==t&&d.applyMatrix4(t),o.push(d)}for(var p=0,m=c.length;p<m;p++)l.push(c[p].clone());for(var g=0,A=u.length;g<A;g++){var v=u[g],y=void 0,b=void 0,_=v.vertexNormals,w=v.vertexColors,E=new at(v.a+i,v.b+i,v.c+i);E.normal.copy(v.normal),void 0!==r&&E.normal.applyMatrix3(r).normalize();for(var x=0,S=_.length;x<S;x++)y=_[x].clone(),void 0!==r&&y.applyMatrix3(r).normalize(),E.vertexNormals.push(y);E.color.copy(v.color);for(var T=0,M=w.length;T<M;T++)b=w[T],E.vertexColors.push(b.clone());E.materialIndex=v.materialIndex+n,s.push(E)}for(var L=0,C=e.faceVertexUvs.length;L<C;L++){var O=e.faceVertexUvs[L];void 0===this.faceVertexUvs[L]&&(this.faceVertexUvs[L]=[]);for(var I=0,P=O.length;I<P;I++){for(var k=O[I],N=[],D=0,F=k.length;D<F;D++)N.push(k[D].clone());this.faceVertexUvs[L].push(N)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){for(var e={},t=[],n=[],r=Math.pow(10,4),i=0,o=this.vertices.length;i<o;i++){var a=this.vertices[i],s=Math.round(a.x*r)+"_"+Math.round(a.y*r)+"_"+Math.round(a.z*r);void 0===e[s]?(e[s]=i,t.push(this.vertices[i]),n[i]=t.length-1):n[i]=n[e[s]]}for(var u=[],l=0,c=this.faces.length;l<c;l++){var h=this.faces[l];h.a=n[h.a],h.b=n[h.b],h.c=n[h.c];for(var f=[h.a,h.b,h.c],d=0;d<3;d++)if(f[d]===f[(d+1)%3]){u.push(l);break}}for(var p=u.length-1;p>=0;p--){var m=u[p];this.faces.splice(m,1);for(var g=0,A=this.faceVertexUvs.length;g<A;g++)this.faceVertexUvs[g].splice(m,1)}var v=this.vertices.length-t.length;return this.vertices=t,v},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new j(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]);for(var s=0;s<t;s++){var u=e[s]._id;r&&r.push(o[u]),i&&i.push(a[u])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}for(var a=[],s=[],u={},l=[],c={},h=[],f={},d=0;d<this.faces.length;d++){var p=this.faces[d],m=void 0!==this.faceVertexUvs[0][d],g=p.normal.length()>0,A=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,b=0;if(b=x(b,0,0),b=x(b,1,!0),b=x(b,2,!1),b=x(b,3,m),b=x(b,4,g),b=x(b,5,A),b=x(b,6,v),b=x(b,7,y),a.push(b),a.push(p.a,p.b,p.c),a.push(p.materialIndex),m){var _=this.faceVertexUvs[0][d];a.push(M(_[0]),M(_[1]),M(_[2]))}if(g&&a.push(S(p.normal)),A){var w=p.vertexNormals;a.push(S(w[0]),S(w[1]),S(w[2]))}if(v&&a.push(T(p.color)),y){var E=p.vertexColors;a.push(T(E[0]),T(E[1]),T(E[2]))}}function x(e,t,n){return n?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]||(u[t]=s.length/3,s.push(e.x,e.y,e.z)),u[t]}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=l.length,l.push(e.getHex())),c[t]}function M(e){var t=e.x.toString()+e.y.toString();return void 0!==f[t]||(f[t]=h.length/2,h.push(e.x,e.y)),f[t]}return e.data={},e.data.vertices=r,e.data.normals=s,l.length>0&&(e.data.colors=l),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new nn).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;for(var t=e.vertices,n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());for(var i=e.colors,o=0,a=i.length;o<a;o++)this.colors.push(i[o].clone());for(var s=e.faces,u=0,l=s.length;u<l;u++)this.faces.push(s[u].clone());for(var c=0,h=e.faceVertexUvs.length;c<h;c++){var f=e.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var d=0,p=f.length;d<p;d++){for(var m=f[d],g=[],A=0,v=m.length;A<v;A++){var y=m[A];g.push(y.clone())}this.faceVertexUvs[c].push(g)}}for(var b=e.morphTargets,_=0,w=b.length;_<w;_++){var E={};if(E.name=b[_].name,void 0!==b[_].vertices){E.vertices=[];for(var x=0,S=b[_].vertices.length;x<S;x++)E.vertices.push(b[_].vertices[x].clone())}if(void 0!==b[_].normals){E.normals=[];for(var T=0,M=b[_].normals.length;T<M;T++)E.normals.push(b[_].normals[T].clone())}this.morphTargets.push(E)}for(var L=e.morphNormals,C=0,R=L.length;C<R;C++){var O={};if(void 0!==L[C].vertexNormals){O.vertexNormals=[];for(var I=0,P=L[C].vertexNormals.length;I<P;I++){var k=L[C].vertexNormals[I],N={};N.a=k.a.clone(),N.b=k.b.clone(),N.c=k.c.clone(),O.vertexNormals.push(N)}}if(void 0!==L[C].faceNormals){O.faceNormals=[];for(var D=0,F=L[C].faceNormals.length;D<F;D++)O.faceNormals.push(L[C].faceNormals[D].clone())}this.morphNormals.push(O)}for(var j=e.skinWeights,B=0,V=j.length;B<V;B++)this.skinWeights.push(j[B].clone());for(var G=e.skinIndices,U=0,q=G.length;U<q;U++)this.skinIndices.push(G[U].clone());for(var W=e.lineDistances,z=0,H=W.length;z<H;z++)this.lineDistances.push(W[z]);var K=e.boundingBox;null!==K&&(this.boundingBox=K.clone());var Y=e.boundingSphere;return null!==Y&&(this.boundingSphere=Y.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var rn=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s){var u;return Object(p.a)(this,n),(u=t.call(this)).type="BoxGeometry",u.parameters={width:e,height:r,depth:i,widthSegments:o,heightSegments:a,depthSegments:s},u.fromBufferGeometry(new on(e,r,i,o,a,s)),u.mergeVertices(),u}return n}(nn),on=function(e){c(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;Object(p.a)(this,n),(e=t.call(this)).type="BoxBufferGeometry",e.parameters={width:r,height:o,depth:a,widthSegments:s,heightSegments:u,depthSegments:l};var c=i(e);s=Math.floor(s),u=Math.floor(u),l=Math.floor(l);var h=[],f=[],d=[],m=[],g=0,A=0;function v(e,t,n,r,i,o,a,s,u,l,p){for(var v=o/u,y=a/l,b=o/2,_=a/2,w=s/2,E=u+1,x=l+1,S=0,T=0,M=new j,L=0;L<x;L++)for(var C=L*y-_,R=0;R<E;R++){var O=R*v-b;M[e]=O*r,M[t]=C*i,M[n]=w,f.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=s>0?1:-1,d.push(M.x,M.y,M.z),m.push(R/u),m.push(1-L/l),S+=1}for(var I=0;I<l;I++)for(var P=0;P<u;P++){var k=g+P+E*I,N=g+P+E*(I+1),D=g+(P+1)+E*(I+1),F=g+(P+1)+E*I;h.push(k,N,F),h.push(N,D,F),T+=6}c.addGroup(A,T,p),A+=T,g+=S}return v("z","y","x",-1,-1,a,o,r,l,u,0),v("z","y","x",1,-1,a,o,-r,l,u,1),v("x","z","y",1,1,r,a,o,s,l,2),v("x","z","y",1,-1,r,a,-o,s,l,3),v("x","y","z",1,-1,r,o,a,s,u,4),v("x","y","z",-1,-1,r,o,-a,s,u,5),e.setIndex(h),e.setAttribute("position",new bt(f,3)),e.setAttribute("normal",new bt(d,3)),e.setAttribute("uv",new bt(m,2)),e}return n}(Ot);function an(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function sn(e){for(var t={},n=0;n<e.length;n++){var r=an(e[n]);for(var i in r)t[i]=r[i]}return t}var un={clone:an,merge:sn};function ln(e){ut.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function cn(){Fe.call(this),this.type="Camera",this.matrixWorldInverse=new fe,this.projectionMatrix=new fe,this.projectionMatrixInverse=new fe}function hn(e,t,n,r){cn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}ln.prototype=Object.create(ut.prototype),ln.prototype.constructor=ln,ln.prototype.isShaderMaterial=!0,ln.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=an(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},ln.prototype.toJSON=function(e){var t=ut.prototype.toJSON.call(this,e);for(var n in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},cn.prototype=Object.assign(Object.create(Fe.prototype),{constructor:cn,isCamera:!0,copy:function(e,t){return Fe.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new j),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Fe.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){Fe.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),hn.prototype=Object.assign(Object.create(cn.prototype),{constructor:hn,isPerspectiveCamera:!0,copy:function(e,t){return cn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*L.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*L.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*L.RAD2DEG*Math.atan(Math.tan(.5*L.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*L.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Fe.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function fn(e,t,n){if(Fe.call(this),this.type="CubeCamera",!0===n.isWebGLCubeRenderTarget){this.renderTarget=n;var r=new hn(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new j(1,0,0)),this.add(r);var i=new hn(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new j(-1,0,0)),this.add(i);var o=new hn(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new j(0,1,0)),this.add(o);var a=new hn(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new j(0,-1,0)),this.add(a);var s=new hn(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new j(0,0,1)),this.add(s);var u=new hn(90,1,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new j(0,0,-1)),this.add(u),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var l=e.xr.enabled,c=e.getRenderTarget();e.xr.enabled=!1;var h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(c),e.xr.enabled=l},this.clear=function(e,t,r,i){for(var o=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(n,a),e.clear(t,r,i);e.setRenderTarget(o)}}else console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.")}function dn(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),N.call(this,e,e,t),this.texture.isWebGLCubeRenderTargetTexture=!0}function pn(e,t,n,r,i,o,a,s,u,l,c,h){P.call(this,null,o,a,s,u,l,r,i,c,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==u?u:1003,this.minFilter=void 0!==l?l:1003,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}fn.prototype=Object.create(Fe.prototype),fn.prototype.constructor=fn,dn.prototype=Object.create(N.prototype),dn.prototype.constructor=dn,dn.prototype.isWebGLCubeRenderTarget=!0,dn.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=w,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",i="\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",o=new on(5,5,5),a=new ln({name:"CubemapFromEquirect",uniforms:an(n),vertexShader:r,fragmentShader:i,side:v,blending:0});a.uniforms.tEquirect.value=t;var s=new Qt(o,a),u=t.minFilter;return 1008===t.minFilter&&(t.minFilter=_),new fn(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this},pn.prototype=Object.create(P.prototype),pn.prototype.constructor=pn,pn.prototype.isDataTexture=!0;var mn=new re,gn=new j,An=function(){function e(t,n,r,i,o,a){Object(p.a)(this,e),this.planes=[void 0!==t?t:new Ge,void 0!==n?n:new Ge,void 0!==r?r:new Ge,void 0!==i?i:new Ge,void 0!==o?o:new Ge,void 0!==a?a:new Ge]}return Object(m.a)(e,[{key:"set",value:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],g=n[13],A=n[14],v=n[15];return t[0].setComponents(a-r,c-s,p-h,v-m).normalize(),t[1].setComponents(a+r,c+s,p+h,v+m).normalize(),t[2].setComponents(a+i,c+u,p+f,v+g).normalize(),t[3].setComponents(a-i,c-u,p-f,v-g).normalize(),t[4].setComponents(a-o,c-l,p-d,v-A).normalize(),t[5].setComponents(a+o,c+l,p+d,v+A).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),mn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(mn)}},{key:"intersectsSprite",value:function(e){return mn.center.set(0,0,0),mn.radius=.7071067811865476,mn.applyMatrix4(e.matrixWorld),this.intersectsSphere(mn)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(gn.x=r.normal.x>0?e.max.x:e.min.x,gn.y=r.normal.y>0?e.max.y:e.min.y,gn.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(gn)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}]),e}();function vn(){var e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function yn(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var o=r.get(t);(!o||o.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var a=r.get(t);void 0===a?r.set(t,function(t,n){var r=t.array,i=t.usage,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(!function(t,r,i){var o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(a.buffer,t,i),a.version=t.version)}}}}var bn=function(e){c(n,e);var t=f(n);function n(e,r,i,o){var a;return Object(p.a)(this,n),(a=t.call(this)).type="PlaneGeometry",a.parameters={width:e,height:r,widthSegments:i,heightSegments:o},a.fromBufferGeometry(new _n(e,r,i,o)),a.mergeVertices(),a}return n}(nn),_n=function(e){c(n,e);var t=f(n);function n(e,r,i,o){var a;Object(p.a)(this,n),(a=t.call(this)).type="PlaneBufferGeometry",a.parameters={width:e,height:r,widthSegments:i,heightSegments:o};for(var s=(e=e||1)/2,u=(r=r||1)/2,l=Math.floor(i)||1,c=Math.floor(o)||1,h=l+1,f=c+1,d=e/l,m=r/c,g=[],A=[],v=[],y=[],b=0;b<f;b++)for(var _=b*m-u,w=0;w<h;w++){var E=w*d-s;A.push(E,-_,0),v.push(0,0,1),y.push(w/l),y.push(1-b/c)}for(var x=0;x<c;x++)for(var S=0;S<l;S++){var T=S+h*x,M=S+h*(x+1),L=S+1+h*(x+1),C=S+1+h*x;g.push(T,M,C),g.push(M,L,C)}return a.setIndex(g),a.setAttribute("position",new bt(A,3)),a.setAttribute("normal",new bt(v,3)),a.setAttribute("uv",new bt(y,2)),a}return n}(Ot),wn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},En={common:{diffuse:{value:new ot(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new R},uv2Transform:{value:new R},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new C(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ot(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ot(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new R}},sprite:{diffuse:{value:new ot(15658734)},opacity:{value:1},center:{value:new C(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new R}}},xn={basic:{uniforms:sn([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.fog]),vertexShader:wn.meshbasic_vert,fragmentShader:wn.meshbasic_frag},lambert:{uniforms:sn([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.fog,En.lights,{emissive:{value:new ot(0)}}]),vertexShader:wn.meshlambert_vert,fragmentShader:wn.meshlambert_frag},phong:{uniforms:sn([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.fog,En.lights,{emissive:{value:new ot(0)},specular:{value:new ot(1118481)},shininess:{value:30}}]),vertexShader:wn.meshphong_vert,fragmentShader:wn.meshphong_frag},standard:{uniforms:sn([En.common,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.roughnessmap,En.metalnessmap,En.fog,En.lights,{emissive:{value:new ot(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},toon:{uniforms:sn([En.common,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.gradientmap,En.fog,En.lights,{emissive:{value:new ot(0)}}]),vertexShader:wn.meshtoon_vert,fragmentShader:wn.meshtoon_frag},matcap:{uniforms:sn([En.common,En.bumpmap,En.normalmap,En.displacementmap,En.fog,{matcap:{value:null}}]),vertexShader:wn.meshmatcap_vert,fragmentShader:wn.meshmatcap_frag},points:{uniforms:sn([En.points,En.fog]),vertexShader:wn.points_vert,fragmentShader:wn.points_frag},dashed:{uniforms:sn([En.common,En.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wn.linedashed_vert,fragmentShader:wn.linedashed_frag},depth:{uniforms:sn([En.common,En.displacementmap]),vertexShader:wn.depth_vert,fragmentShader:wn.depth_frag},normal:{uniforms:sn([En.common,En.bumpmap,En.normalmap,En.displacementmap,{opacity:{value:1}}]),vertexShader:wn.normal_vert,fragmentShader:wn.normal_frag},sprite:{uniforms:sn([En.sprite,En.fog]),vertexShader:wn.sprite_vert,fragmentShader:wn.sprite_frag},background:{uniforms:{uvTransform:{value:new R},t2D:{value:null}},vertexShader:wn.background_vert,fragmentShader:wn.background_frag},cube:{uniforms:sn([En.envmap,{opacity:{value:1}}]),vertexShader:wn.cube_vert,fragmentShader:wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wn.equirect_vert,fragmentShader:wn.equirect_frag},distanceRGBA:{uniforms:sn([En.common,En.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wn.distanceRGBA_vert,fragmentShader:wn.distanceRGBA_frag},shadow:{uniforms:sn([En.lights,En.fog,{color:{value:new ot(0)},opacity:{value:1}}]),vertexShader:wn.shadow_vert,fragmentShader:wn.shadow_frag}};function Sn(e,t,n,r,i){var o,a,s=new ot(0),u=0,l=null,c=0,h=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),f(s,u=void 0!==t?t:1)},getClearAlpha:function(){return u},setClearAlpha:function(e){f(s,u=e)},render:function(n,i,d,p){var m=!0===i.isScene?i.background:null;m&&m.isTexture&&(m=t.get(m));var g=e.xr,A=g.getSession&&g.getSession();A&&"additive"===A.environmentBlendMode&&(m=null),null===m?f(s,u):m&&m.isColor&&(f(m,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||m.isWebGLCubeRenderTargetTexture||306===m.mapping)?(void 0===a&&((a=new Qt(new on(1,1,1),new ln({name:"BackgroundCubeMaterial",uniforms:an(xn.cube.uniforms),vertexShader:xn.cube.vertexShader,fragmentShader:xn.cube.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(a)),m.isWebGLCubeRenderTarget&&(m=m.texture),a.material.uniforms.envMap.value=m,a.material.uniforms.flipEnvMap.value=m.isCubeTexture?-1:1,l===m&&c===m.version&&h===e.toneMapping||(a.material.needsUpdate=!0,l=m,c=m.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):m&&m.isTexture&&(void 0===o&&((o=new Qt(new _n(2,2),new ln({name:"BackgroundMaterial",uniforms:an(xn.background.uniforms),vertexShader:xn.background.vertexShader,fragmentShader:xn.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),o.material.uniforms.uvTransform.value.copy(m.matrix),l===m&&c===m.version&&h===e.toneMapping||(o.material.needsUpdate=!0,l=m,c=m.version,h=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function Tn(e,t,n,r){var i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=f(null),l=u;function c(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function f(e){for(var t=[],n=[],r=[],o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,i){var o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function A(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function v(){y(),l!==u&&c((l=u).object)}function y(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,v,y){var b=!1;if(a){var _=function(t,n,i){var a=!0===i.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[a];void 0===c&&(c=f(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),l[a]=c);return c}(v,h,u);l!==_&&c((l=_).object),(b=function(e,t){var n=l.attributes,r=e.attributes;if(Object.keys(n).length!==Object.keys(r).length)return!0;for(var i in r){var o=n[i],a=r[i];if(void 0===o)return!0;if(o.attribute!==a)return!0;if(o.data!==a.data)return!0}return l.index!==t}(v,y))&&function(e,t){var n={},r=e.attributes;for(var i in r){var o=r[i],a={};a.attribute=o,o.data&&(a.data=o.data),n[i]=a}l.attributes=n,l.index=t}(v,y)}else{var w=!0===u.wireframe;l.geometry===v.id&&l.program===h.id&&l.wireframe===w||(l.geometry=v.id,l.program=h.id,l.wireframe=w,b=!0)}!0===i.isInstancedMesh&&(b=!0),null!==y&&n.update(y,34963),b&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();var u=s.attributes,l=a.getAttributes(),c=o.defaultAttributeValues;for(var h in l){var f=l[h];if(f>=0){var v=u[h];if(void 0!==v){var y=v.normalized,b=v.itemSize,_=n.get(v);if(void 0===_)continue;var w=_.buffer,E=_.type,x=_.bytesPerElement;if(v.isInterleavedBufferAttribute){var S=v.data,T=S.stride,M=v.offset;S&&S.isInstancedInterleavedBuffer?(m(f,S.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=S.meshPerAttribute*S.count)):p(f),e.bindBuffer(34962,w),A(f,b,E,y,T*x,M*x)}else v.isInstancedBufferAttribute?(m(f,v.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=v.meshPerAttribute*v.count)):p(f),e.bindBuffer(34962,w),A(f,b,E,y,0,0)}else if("instanceMatrix"===h){var L=n.get(i.instanceMatrix);if(void 0===L)continue;var C=L.buffer,R=L.type;m(f+0,1),m(f+1,1),m(f+2,1),m(f+3,1),e.bindBuffer(34962,C),e.vertexAttribPointer(f+0,4,R,!1,64,0),e.vertexAttribPointer(f+1,4,R,!1,64,16),e.vertexAttribPointer(f+2,4,R,!1,64,32),e.vertexAttribPointer(f+3,4,R,!1,64,48)}else if("instanceColor"===h){var O=n.get(i.instanceColor);if(void 0===O)continue;var I=O.buffer,P=O.type;m(f,1),e.bindBuffer(34962,I),e.vertexAttribPointer(f,3,P,!1,12,0)}else if(void 0!==c){var k=c[h];if(void 0!==k)switch(k.length){case 2:e.vertexAttrib2fv(f,k);break;case 3:e.vertexAttrib3fv(f,k);break;case 4:e.vertexAttrib4fv(f,k);break;default:e.vertexAttrib1fv(f,k)}}}}g()}(i,u,h,v),null!==y&&e.bindBuffer(34963,n.get(y).buffer))},reset:v,resetDefaultState:y,dispose:function(){for(var e in v(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)h(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:g}}function Mn(e,t,n,r){var i,o=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,a,s){if(0!==s){var u,l;if(o)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,a,s),n.update(a,i,s)}}}function Ln(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),c=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),d=e.getParameter(34921),p=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),A=c>0,v=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:A,floatFragmentTextures:v,floatVertexTextures:A&&v,maxSamples:o?e.getParameter(36183):0}}function Cn(e){var t=this,n=null,r=0,i=!1,o=!1,a=new Ge,s=new R,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){var o=null!==e?e.length:0,l=null;if(0!==o){if(l=u.value,!0!==i||null===l){var c=r+4*o,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==o;++f,d+=4)a.copy(e[f]).applyMatrix4(h,s),a.normal.toArray(l,d),l[d+3]=a.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){var a=0!==e.length||t||0!==r||i;return i=t,n=c(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,l()},this.setState=function(t,a,s){var h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||o&&!d)o?c(null):l();else{var m=o?0:r,g=4*m,A=p.clippingState||null;u.value=A,A=c(h,a,g,s);for(var v=0;v!==g;++v)A[v]=n[v];p.clippingState=A,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=m}}}function Rn(e){var t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}return{get:function(r){if(r&&r.isTexture){var i=r.mapping;if(303===i||304===i){if(t.has(r))return n(t.get(r).texture,r.mapping);var o=r.image;if(o&&o.height>0){var a=e.getRenderList(),s=e.getRenderTarget(),u=e.getRenderState(),l=new dn(o.height/2);return l.fromEquirectangularTexture(e,r),t.set(r,l),e.setRenderTarget(s),e.setRenderList(a),e.setRenderState(u),n(l.texture,r.mapping)}return null}}return r},dispose:function(){t=new WeakMap}}}function On(e){var t={};return{has:function(n){if(void 0!==t[n])return null!==t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,null!==r},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function In(e,t,n,r){var i=new WeakMap,o=new WeakMap;function a(e){var s=e.target,u=i.get(s);for(var l in null!==u.index&&t.remove(u.index),u.attributes)t.remove(u.attributes[l]);s.removeEventListener("dispose",a),i.delete(s);var c=o.get(u);c&&(t.remove(c),o.delete(u)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],f=s[u+2];n.push(c,h,h,f,f,c)}}else{var d=i.array;a=i.version;for(var p=0,m=d.length/3-1;p<m;p+=3){var g=p+0,A=p+1,v=p+2;n.push(g,A,A,v,v,g)}}var y=new(Et(n)>65535?yt:At)(n,1);y.version=a;var b=o.get(e);b&&t.remove(b),o.set(e,y)}return{get:function(e,t){var r=i.get(t);return r||(t.addEventListener("dispose",a),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ot).setFromObject(e)),r=t._bufferGeometry),i.set(t,r),n.memory.geometries++,r)},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var o in i)for(var a=i[o],s=0,u=a.length;s<u;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var t=o.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function Pn(e,t,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,h;if(s)c=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,u,o,r*a,l),n.update(u,i,l)}}}function kn(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Nn(e,t){return e[0]-t[0]}function Dn(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Fn(e){for(var t={},n=new Float32Array(8),r=[],i=0;i<8;i++)r[i]=[i,0];return{update:function(i,o,a,s){var u=i.morphTargetInfluences,l=void 0===u?0:u.length,c=t[o.id];if(void 0===c){c=[];for(var h=0;h<l;h++)c[h]=[h,0];t[o.id]=c}for(var f=0;f<l;f++){var d=c[f];d[0]=f,d[1]=u[f]}c.sort(Dn);for(var p=0;p<8;p++)p<l&&c[p][1]?(r[p][0]=c[p][0],r[p][1]=c[p][1]):(r[p][0]=Number.MAX_SAFE_INTEGER,r[p][1]=0);r.sort(Nn);for(var m=a.morphTargets&&o.morphAttributes.position,g=a.morphNormals&&o.morphAttributes.normal,A=0,v=0;v<8;v++){var y=r[v],b=y[0],_=y[1];b!==Number.MAX_SAFE_INTEGER&&_?(m&&o.getAttribute("morphTarget"+v)!==m[b]&&o.setAttribute("morphTarget"+v,m[b]),g&&o.getAttribute("morphNormal"+v)!==g[b]&&o.setAttribute("morphNormal"+v,g[b]),n[v]=_,A+=_):(m&&void 0!==o.getAttribute("morphTarget"+v)&&o.deleteAttribute("morphTarget"+v),g&&void 0!==o.getAttribute("morphNormal"+v)&&o.deleteAttribute("morphNormal"+v),n[v]=0)}var w=o.morphTargetsRelative?1:1-A;s.getUniforms().setValue(e,"morphTargetBaseInfluence",w),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function jn(e,t,n,r){var i=new WeakMap;return{update:function(e){var o=r.render.frame,a=e.geometry,s=t.get(e,a);return i.get(s)!==o&&(a.isGeometry&&s.updateFromObject(e),t.update(s),i.set(s,o)),e.isInstancedMesh&&(n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),s},dispose:function(){i=new WeakMap}}}function Bn(e,t,n,r,i,o,a,s,u,l){e=void 0!==e?e:[],t=void 0!==t?t:301,a=void 0!==a?a:1022,P.call(this,e,t,n,r,i,o,a,s,u,l),this.flipY=!1}function Vn(e,t,n,r){P.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Gn(e,t,n,r){P.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}xn.physical={uniforms:sn([xn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new C(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new ot(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},Bn.prototype=Object.create(P.prototype),Bn.prototype.constructor=Bn,Bn.prototype.isCubeTexture=!0,Object.defineProperty(Bn.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Vn.prototype=Object.create(P.prototype),Vn.prototype.constructor=Vn,Vn.prototype.isDataTexture2DArray=!0,Gn.prototype=Object.create(P.prototype),Gn.prototype.constructor=Gn,Gn.prototype.isDataTexture3D=!0;var Un=new P,qn=new Vn,Wn=new Gn,zn=new Bn,Hn=[],Kn=[],Yn=new Float32Array(16),Qn=new Float32Array(9),Xn=new Float32Array(4);function Jn(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Hn[i];if(void 0===o&&(o=new Float32Array(i),Hn[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Zn(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function $n(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function er(e,t){var n=Kn[t];void 0===n&&(n=new Int32Array(t),Kn[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function tr(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function nr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Zn(n,t))return;e.uniform2fv(this.addr,t),$n(n,t)}}function rr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Zn(n,t))return;e.uniform3fv(this.addr,t),$n(n,t)}}function ir(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Zn(n,t))return;e.uniform4fv(this.addr,t),$n(n,t)}}function or(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Zn(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),$n(n,t)}else{if(Zn(n,r))return;Xn.set(r),e.uniformMatrix2fv(this.addr,!1,Xn),$n(n,r)}}function ar(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Zn(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),$n(n,t)}else{if(Zn(n,r))return;Qn.set(r),e.uniformMatrix3fv(this.addr,!1,Qn),$n(n,r)}}function sr(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Zn(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),$n(n,t)}else{if(Zn(n,r))return;Yn.set(r),e.uniformMatrix4fv(this.addr,!1,Yn),$n(n,r)}}function ur(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Un,i)}function lr(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||qn,i)}function cr(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Wn,i)}function hr(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||zn,i)}function fr(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function dr(e,t){var n=this.cache;Zn(n,t)||(e.uniform2iv(this.addr,t),$n(n,t))}function pr(e,t){var n=this.cache;Zn(n,t)||(e.uniform3iv(this.addr,t),$n(n,t))}function mr(e,t){var n=this.cache;Zn(n,t)||(e.uniform4iv(this.addr,t),$n(n,t))}function gr(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ar(e,t){e.uniform1fv(this.addr,t)}function vr(e,t){e.uniform1iv(this.addr,t)}function yr(e,t){e.uniform2iv(this.addr,t)}function br(e,t){e.uniform3iv(this.addr,t)}function _r(e,t){e.uniform4iv(this.addr,t)}function wr(e,t){var n=Jn(t,this.size,2);e.uniform2fv(this.addr,n)}function Er(e,t){var n=Jn(t,this.size,3);e.uniform3fv(this.addr,n)}function xr(e,t){var n=Jn(t,this.size,4);e.uniform4fv(this.addr,n)}function Sr(e,t){var n=Jn(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Tr(e,t){var n=Jn(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Mr(e,t){var n=Jn(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Lr(e,t,n){var r=t.length,i=er(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(t[o]||Un,i[o])}function Cr(e,t,n){var r=t.length,i=er(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(t[o]||zn,i[o])}function Rr(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return tr;case 35664:return nr;case 35665:return rr;case 35666:return ir;case 35674:return or;case 35675:return ar;case 35676:return sr;case 5124:case 35670:return fr;case 35667:case 35671:return dr;case 35668:case 35672:return pr;case 35669:case 35673:return mr;case 5125:return gr;case 35678:case 36198:case 36298:case 36306:case 35682:return ur;case 35679:case 36299:case 36307:return cr;case 35680:case 36300:case 36308:case 36293:return hr;case 36289:case 36303:case 36311:case 36292:return lr}}(t.type)}function Or(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ar;case 35664:return wr;case 35665:return Er;case 35666:return xr;case 35674:return Sr;case 35675:return Tr;case 35676:return Mr;case 5124:case 35670:return vr;case 35667:case 35671:return yr;case 35668:case 35672:return br;case 35669:case 35673:return _r;case 35678:case 36198:case 36298:case 36306:case 35682:return Lr;case 35680:case 36300:case 36308:case 36293:return Cr}}(t.type)}function Ir(e){this.id=e,this.seq=[],this.map={}}Or.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),$n(t,e)},Ir.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var Pr=/([\w\d_]+)(\])?(\[|\.)?/g;function kr(e,t){e.seq.push(t),e.map[t.id]=t}function Nr(e,t,n){var r=e.name,i=r.length;for(Pr.lastIndex=0;;){var o=Pr.exec(r),a=Pr.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===i){kr(n,void 0===l?new Rr(s,e,t):new Or(s,e,t));break}var c=n.map[s];void 0===c&&kr(n,c=new Ir(s)),n=c}}function Dr(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);Nr(i,e.getUniformLocation(t,i.name),this)}}function Fr(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Dr.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Dr.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Dr.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},Dr.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var jr=0;function Br(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Vr(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Gr(e,t){var n=Br(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ur(e,t){var n=Br(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function qr(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Wr(e){return""!==e}function zr(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Hr(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Kr=/^[ \t]*#include +<([\w\d./]+)>/gm;function Yr(e){return e.replace(Kr,Qr)}function Qr(e,t){var n=wn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Yr(n)}var Xr=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Jr=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Zr(e){return e.replace(Jr,ei).replace(Xr,$r)}function $r(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ei(e,t,n,r)}function ei(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function ti(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ni(e,t,n,r){var i,o,a=e.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),f=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),d=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),p=e.gammaFactor>0?e.gammaFactor:1,m=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Wr).join("\n")}(n),g=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),A=a.createProgram(),v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[g].filter(Wr).join("\n")).length>0&&(i+="\n"),(o=[m,g].filter(Wr).join("\n")).length>0&&(o+="\n")):(i=[ti(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Wr).join("\n"),o=[m,ti(n),"#define SHADER_NAME "+n.shaderName,g,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?wn.tonemapping_pars_fragment:"",0!==n.toneMapping?qr("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",wn.encodings_pars_fragment,n.map?Gr("mapTexelToLinear",n.mapEncoding):"",n.matcap?Gr("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Gr("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Gr("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Gr("lightMapTexelToLinear",n.lightMapEncoding):"",Ur("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Wr).join("\n")),u=Hr(u=zr(u=Yr(u),n),n),l=Hr(l=zr(l=Yr(l),n),n),u=Zr(u),l=Zr(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",i=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,o=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);var y,b,_=v+o+l,w=Fr(a,35633,v+i+u),E=Fr(a,35632,_);if(a.attachShader(A,w),a.attachShader(A,E),void 0!==n.index0AttributeName?a.bindAttribLocation(A,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(A,0,"position"),a.linkProgram(A),e.debug.checkShaderErrors){var x=a.getProgramInfoLog(A).trim(),S=a.getShaderInfoLog(w).trim(),T=a.getShaderInfoLog(E).trim(),M=!0,L=!0;if(!1===a.getProgramParameter(A,35714)){M=!1;var C=Vr(a,w,"vertex"),R=Vr(a,E,"fragment");console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(A,35715),"gl.getProgramInfoLog",x,C,R)}else""!==x?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",x):""!==S&&""!==T||(L=!1);L&&(this.diagnostics={runnable:M,programLog:x,vertexShader:{log:S,prefix:i},fragmentShader:{log:T,prefix:o}})}return a.deleteShader(w),a.deleteShader(E),this.getUniforms=function(){return void 0===y&&(y=new Dr(a,A)),y},this.getAttributes=function(){return void 0===b&&(b=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(a,A)),b},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(A),this.program=void 0},this.name=n.shaderName,this.id=jr++,this.cacheKey=t,this.usedTimes=1,this.program=A,this.vertexShader=w,this.fragmentShader=E,this}function ri(e,t,n,r,i,o){var a=[],s=r.isWebGL2,u=r.logarithmicDepthBuffer,l=r.floatVertexTextures,c=r.maxVertexUniforms,h=r.vertexTextures,f=r.precision,d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=3e3,t}return{getParameters:function(i,a,p,g,A){var b,_,w=g.fog,E=i.isMeshStandardMaterial?g.environment:null,x=t.get(i.envMap||E),S=d[i.type],T=A.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(l)return 1024;var n=c,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(A):0;if(null!==i.precision&&(f=r.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",f,"instead."),S){var M=xn[S];b=M.vertexShader,_=M.fragmentShader}else b=i.vertexShader,_=i.fragmentShader;var L=e.getRenderTarget();return{isWebGL2:s,shaderID:S,shaderName:i.type,vertexShader:b,fragmentShader:_,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:f,instancing:!0===A.isInstancedMesh,instancingColor:!0===A.isInstancedMesh&&null!==A.instanceColor,supportsVertexTextures:h,outputEncoding:null!==L?m(L.texture):e.outputEncoding,map:!!i.map,mapEncoding:m(i.map),matcap:!!i.matcap,matcapEncoding:m(i.matcap),envMap:!!x,envMapMode:x&&x.mapping,envMapEncoding:m(x),envMapCubeUV:!!x&&(306===x.mapping||307===x.mapping),lightMap:!!i.lightMap,lightMapEncoding:m(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:m(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!i.map||!!i.bumpMap||!!i.normalMap||!!i.specularMap||!!i.alphaMap||!!i.emissiveMap||!!i.roughnessMap||!!i.metalnessMap||!!i.clearcoatMap||!!i.clearcoatRoughnessMap||!!i.clearcoatNormalMap||!!i.displacementMap||!!i.transmissionMap,uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap)&&!!i.displacementMap,fog:!!w,useFog:i.fog,fogExp2:w&&w.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:i.skinning&&T>0,maxBones:T,useVertexTexture:l,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===y,flipSided:i.side===v,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var i=0;i<p.length;i++)n.push(t[p[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=d[e.type];if(n){var r=xn[n];t=un.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,o=0,s=a.length;o<s;o++){var u=a[o];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new ni(e,n,t,i),a.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=a.indexOf(e);a[t]=a[a.length-1],a.pop(),e.destroy()}},programs:a}}function ii(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function oi(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ai(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function si(e){var t=[],n=0,r=[],i=[],o={id:-1};function a(r,i,a,s,u,l){var c=t[n],h=e.get(a);return void 0===c?(c={id:r.id,object:r,geometry:i,material:a,program:h.program||o,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l},t[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=a,c.program=h.program||o,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(e,t,n,o,s,u){var l=a(e,t,n,o,s,u);(!0===n.transparent?i:r).push(l)},unshift:function(e,t,n,o,s,u){var l=a(e,t,n,o,s,u);(!0===n.transparent?i:r).unshift(l)},finish:function(){for(var e=n,r=t.length;e<r;e++){var i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){r.length>1&&r.sort(e||oi),i.length>1&&i.sort(t||ai)}}}function ui(e){var t=new WeakMap;return{get:function(n,r){var i,o=t.get(n);return void 0===o?(i=new si(e),t.set(n,new WeakMap),t.get(n).set(r,i)):void 0===(i=o.get(r))&&(i=new si(e),o.set(r,i)),i},dispose:function(){t=new WeakMap}}}function li(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new j,color:new ot};break;case"SpotLight":n={position:new j,direction:new j,color:new ot,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new j,color:new ot,distance:0,decay:0};break;case"HemisphereLight":n={direction:new j,skyColor:new ot,groundColor:new ot};break;case"RectAreaLight":n={color:new ot,position:new j,halfWidth:new j,halfHeight:new j}}return e[t.id]=n,n}}}var ci=0;function hi(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function fi(){for(var e=new li,t=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new C};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new C,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=0;r<9;r++)n.probe.push(new j);var i=new j,o=new fe,a=new fe;return{setup:function(r,s,u){for(var l=0,c=0,h=0,f=0;f<9;f++)n.probe[f].set(0,0,0);var d=0,p=0,m=0,g=0,A=0,v=0,y=0,b=0,_=u.matrixWorldInverse;r.sort(hi);for(var w=0,E=r.length;w<E;w++){var x=r[w],S=x.color,T=x.intensity,M=x.distance,L=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)l+=S.r*T,c+=S.g*T,h+=S.b*T;else if(x.isLightProbe)for(var C=0;C<9;C++)n.probe[C].addScaledVector(x.sh.coefficients[C],T);else if(x.isDirectionalLight){var R=e.get(x);if(R.color.copy(x.color).multiplyScalar(x.intensity),R.direction.setFromMatrixPosition(x.matrixWorld),i.setFromMatrixPosition(x.target.matrixWorld),R.direction.sub(i),R.direction.transformDirection(_),x.castShadow){var O=x.shadow,I=t.get(x);I.shadowBias=O.bias,I.shadowNormalBias=O.normalBias,I.shadowRadius=O.radius,I.shadowMapSize=O.mapSize,n.directionalShadow[d]=I,n.directionalShadowMap[d]=L,n.directionalShadowMatrix[d]=x.shadow.matrix,v++}n.directional[d]=R,d++}else if(x.isSpotLight){var P=e.get(x);if(P.position.setFromMatrixPosition(x.matrixWorld),P.position.applyMatrix4(_),P.color.copy(S).multiplyScalar(T),P.distance=M,P.direction.setFromMatrixPosition(x.matrixWorld),i.setFromMatrixPosition(x.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(_),P.coneCos=Math.cos(x.angle),P.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),P.decay=x.decay,x.castShadow){var k=x.shadow,N=t.get(x);N.shadowBias=k.bias,N.shadowNormalBias=k.normalBias,N.shadowRadius=k.radius,N.shadowMapSize=k.mapSize,n.spotShadow[m]=N,n.spotShadowMap[m]=L,n.spotShadowMatrix[m]=x.shadow.matrix,b++}n.spot[m]=P,m++}else if(x.isRectAreaLight){var D=e.get(x);D.color.copy(S).multiplyScalar(T),D.position.setFromMatrixPosition(x.matrixWorld),D.position.applyMatrix4(_),a.identity(),o.copy(x.matrixWorld),o.premultiply(_),a.extractRotation(o),D.halfWidth.set(.5*x.width,0,0),D.halfHeight.set(0,.5*x.height,0),D.halfWidth.applyMatrix4(a),D.halfHeight.applyMatrix4(a),n.rectArea[g]=D,g++}else if(x.isPointLight){var F=e.get(x);if(F.position.setFromMatrixPosition(x.matrixWorld),F.position.applyMatrix4(_),F.color.copy(x.color).multiplyScalar(x.intensity),F.distance=x.distance,F.decay=x.decay,x.castShadow){var j=x.shadow,B=t.get(x);B.shadowBias=j.bias,B.shadowNormalBias=j.normalBias,B.shadowRadius=j.radius,B.shadowMapSize=j.mapSize,B.shadowCameraNear=j.camera.near,B.shadowCameraFar=j.camera.far,n.pointShadow[p]=B,n.pointShadowMap[p]=L,n.pointShadowMatrix[p]=x.shadow.matrix,y++}n.point[p]=F,p++}else if(x.isHemisphereLight){var V=e.get(x);V.direction.setFromMatrixPosition(x.matrixWorld),V.direction.transformDirection(_),V.direction.normalize(),V.skyColor.copy(x.color).multiplyScalar(T),V.groundColor.copy(x.groundColor).multiplyScalar(T),n.hemi[A]=V,A++}}g>0&&(n.rectAreaLTC1=En.LTC_1,n.rectAreaLTC2=En.LTC_2),n.ambient[0]=l,n.ambient[1]=c,n.ambient[2]=h;var G=n.hash;G.directionalLength===d&&G.pointLength===p&&G.spotLength===m&&G.rectAreaLength===g&&G.hemiLength===A&&G.numDirectionalShadows===v&&G.numPointShadows===y&&G.numSpotShadows===b||(n.directional.length=d,n.spot.length=m,n.rectArea.length=g,n.point.length=p,n.hemi.length=A,n.directionalShadow.length=v,n.directionalShadowMap.length=v,n.pointShadow.length=y,n.pointShadowMap.length=y,n.spotShadow.length=b,n.spotShadowMap.length=b,n.directionalShadowMatrix.length=v,n.pointShadowMatrix.length=y,n.spotShadowMatrix.length=b,G.directionalLength=d,G.pointLength=p,G.spotLength=m,G.rectAreaLength=g,G.hemiLength=A,G.numDirectionalShadows=v,G.numPointShadows=y,G.numSpotShadows=b,n.version=ci++)},state:n}}function di(){var e=new fi,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function pi(){var e=new WeakMap;return{get:function(t,n){var r;return!1===e.has(t)?(r=new di,e.set(t,new WeakMap),e.get(t).set(n,r)):!1===e.get(t).has(n)?(r=new di,e.get(t).set(n,r)):r=e.get(t).get(n),r},dispose:function(){e=new WeakMap}}}function mi(e){ut.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function gi(e){ut.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new j,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}mi.prototype=Object.create(ut.prototype),mi.prototype.constructor=mi,mi.prototype.isMeshDepthMaterial=!0,mi.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},gi.prototype=Object.create(ut.prototype),gi.prototype.constructor=gi,gi.prototype.isMeshDistanceMaterial=!0,gi.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function Ai(e,t,n){var r=new An,i=new C,o=new C,a=new k,s=[],u=[],l={},c={0:v,1:0,2:y},h=new ln({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new C},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONAL_PASS=1;var d=new Ot;d.setAttribute("position",new ft(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var p=new Qt(d,h),m=this;function g(n,r){var i=t.update(p);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,p,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,f,p,null)}function A(e,t,n){var r=e<<0|t<<1|n<<2,i=s[r];return void 0===i&&(i=new mi({depthPacking:3201,morphTargets:e,skinning:t}),s[r]=i),i}function b(e,t,n){var r=e<<0|t<<1|n<<2,i=u[r];return void 0===i&&(i=new gi({morphTargets:e,skinning:t}),u[r]=i),i}function E(t,n,r,i,o,a,s){var u=null,h=A,f=t.customDepthMaterial;if(!0===i.isPointLight&&(h=b,f=t.customDistanceMaterial),void 0===f){var d=!1;!0===r.morphTargets&&(d=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var p=!1;!0===t.isSkinnedMesh&&(!0===r.skinning?p=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),u=h(d,p,!0===t.isInstancedMesh)}else u=f;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var m=u.uuid,g=r.uuid,v=l[m];void 0===v&&(v={},l[m]=v);var y=v[g];void 0===y&&(y=u.clone(),v[g]=y),u=y}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=3===s?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:c[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=a),u}function x(n,i,o,a,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=l[d.materialIndex];if(p&&p.visible){var m=E(n,u,p,a,o.near,o.far,s);e.renderBufferDirect(o,null,u,m,n,d)}}else if(l.visible){var g=E(n,u,l,a,o.near,o.far,s);e.renderBufferDirect(o,null,u,g,n,null)}}for(var A=n.children,v=0,y=A.length;v<y;v++)x(A[v],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,s,u){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var A=t[d],v=A.shadow;if(!1!==v.autoUpdate||!1!==v.needsUpdate)if(void 0!==v){i.copy(v.mapSize);var y=v.getFrameExtents();if(i.multiply(y),o.copy(v.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(o.x=Math.floor(n/y.x),i.x=o.x*y.x,v.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/y.y),i.y=o.y*y.y,v.mapSize.y=o.y)),null===v.map&&!v.isPointLightShadow&&3===this.type){var b={minFilter:_,magFilter:_,format:w};v.map=new N(i.x,i.y,b),v.map.texture.name=A.name+".shadowMap",v.mapPass=new N(i.x,i.y,b),v.camera.updateProjectionMatrix()}if(null===v.map){var E={minFilter:1003,magFilter:1003,format:w};v.map=new N(i.x,i.y,E),v.map.texture.name=A.name+".shadowMap",v.camera.updateProjectionMatrix()}e.setRenderTarget(v.map),e.clear();for(var S=v.getViewportCount(),T=0;T<S;T++){var M=v.getViewport(T);a.set(o.x*M.x,o.y*M.y,o.x*M.z,o.y*M.w),f.viewport(a),v.updateMatrices(A,T),r=v.getFrustum(),x(s,u,v.camera,A,this.type)}v.isPointLightShadow||3!==this.type||g(v,u),v.needsUpdate=!1}else console.warn("THREE.WebGLShadowMap:",A,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(l,c,h)}}}function vi(e,t,n){var r,i,o=n.isWebGL2;var a=new function(){var t=!1,n=new k,r=null,i=new k(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?V(2929):G(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},l=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?V(2960):G(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},c={},h=null,f=null,d=null,p=null,m=null,g=null,A=null,_=null,w=null,E=!1,x=null,S=null,T=null,M=null,L=null,C=e.getParameter(35661),R=!1,O=0,I=e.getParameter(7938);-1!==I.indexOf("WebGL")?(O=parseFloat(/^WebGL\ ([0-9])/.exec(I)[1]),R=O>=1):-1!==I.indexOf("OpenGL ES")&&(O=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(I)[1]),R=O>=2);var P=null,N={},D=new k,F=new k;function j(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var B={};function V(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function G(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}B[3553]=j(3553,3553,1),B[34067]=j(34067,34069,6),a.setClear(0,0,0,1),s.setClear(1),l.setClear(0),V(2929),s.setFunc(3),H(!1),K(1),V(2884),z(0);var U=(r={},Object(u.a)(r,100,32774),Object(u.a)(r,101,32778),Object(u.a)(r,102,32779),r);if(o)U[103]=32775,U[104]=32776;else{var q=t.get("EXT_blend_minmax");null!==q&&(U[103]=q.MIN_EXT,U[104]=q.MAX_EXT)}var W=(i={},Object(u.a)(i,200,0),Object(u.a)(i,201,1),Object(u.a)(i,202,768),Object(u.a)(i,204,770),Object(u.a)(i,210,776),Object(u.a)(i,208,774),Object(u.a)(i,206,772),Object(u.a)(i,203,769),Object(u.a)(i,205,771),Object(u.a)(i,209,775),Object(u.a)(i,207,773),i);function z(t,n,r,i,o,a,s,u){if(0!==t){if(f||(V(3042),f=!0),5===t)o=o||n,a=a||r,s=s||i,n===p&&o===A||(e.blendEquationSeparate(U[n],U[o]),p=n,A=o),r===m&&i===g&&a===_&&s===w||(e.blendFuncSeparate(W[r],W[i],W[a],W[s]),m=r,g=i,_=a,w=s),d=t,E=null;else if(t!==d||u!==E){if(100===p&&100===A||(e.blendEquation(32774),p=100,A=100),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case b:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case b:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,_=null,w=null,d=t,E=u}}else f&&(G(3042),f=!1)}function H(t){x!==t&&(t?e.frontFace(2304):e.frontFace(2305),x=t)}function K(t){0!==t?(V(2884),t!==S&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):G(2884),S=t}function Y(t,n,r){t?(V(32823),M===n&&L===r||(e.polygonOffset(n,r),M=n,L=r)):G(32823)}function Q(t){void 0===t&&(t=33984+C-1),P!==t&&(e.activeTexture(t),P=t)}return{buffers:{color:a,depth:s,stencil:l},enable:V,disable:G,useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:z,setMaterial:function(e,t){e.side===y?G(2884):V(2884);var n=e.side===v;t&&(n=!n),H(n),1===e.blending&&!1===e.transparent?z(0):z(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),a.setMask(e.colorWrite);var r=e.stencilWrite;l.setTest(r),r&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Y(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:H,setCullFace:K,setLineWidth:function(t){t!==T&&(R&&e.lineWidth(t),T=t)},setPolygonOffset:Y,setScissorTest:function(e){e?V(3089):G(3089)},activeTexture:Q,bindTexture:function(t,n){null===P&&Q();var r=N[P];void 0===r&&(r={type:void 0,texture:void 0},N[P]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||B[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=N[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===D.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){c={},P=null,N={},h=null,d=null,x=null,S=null,a.reset(),s.reset(),l.reset()}}}function yi(e,t,n,r,i,o,a){var s,l,c,h=i.isWebGL2,f=i.maxTextures,d=i.maxCubemapSize,p=i.maxTextureSize,m=i.maxSamples,g=new WeakMap,A=!1;try{A="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(z){}function v(e,t){return A?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?L.floorPowerOfTwo:Math.floor,a=o(i*e.width),s=o(i*e.height);void 0===c&&(c=v(a,s));var u=n?v(a,s):c;return u.width=a,u.height=s,u.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return L.isPowerOfTwo(e.width)&&L.isPowerOfTwo(e.height)}function E(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&e.minFilter!==_}function x(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function S(n,r,i){if(!1===h)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function T(e){return 1003===e||1004===e||1005===e?9728:9729}function M(t){var n=t.target;n.removeEventListener("dispose",M),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&g.delete(n),a.memory.textures--}function C(t){var n=t.target;n.removeEventListener("dispose",C),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(t.texture),r.remove(t)}(n),a.memory.textures--}var R=0;function O(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=a.render.frame;g.get(e)!==t&&(g.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void j(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function I(t,i){if(6===t.image.length){var a=r.get(t);if(t.version>0&&a.__version!==t.version){F(a,t),n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture),e.pixelStorei(37440,t.flipY);for(var s=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),u=t.image[0]&&t.image[0].isDataTexture,l=[],c=0;c<6;c++)l[c]=s||u?u?t.image[c].image:t.image[c]:y(t.image[c],!1,!0,d);var f,p=l[0],m=b(p)||h,g=o.convert(t.format),A=o.convert(t.type),v=S(t.internalFormat,g,A);if(D(34067,t,m),s){for(var _=0;_<6;_++){f=l[_].mipmaps;for(var T=0;T<f.length;T++){var M=f[T];t.format!==w&&1022!==t.format?null!==g?n.compressedTexImage2D(34069+_,T,v,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+_,T,v,M.width,M.height,0,g,A,M.data)}}a.__maxMipLevel=f.length-1}else{f=t.mipmaps;for(var L=0;L<6;L++)if(u){n.texImage2D(34069+L,0,v,l[L].width,l[L].height,0,g,A,l[L].data);for(var C=0;C<f.length;C++){var R=f[C].image[L].image;n.texImage2D(34069+L,C+1,v,R.width,R.height,0,g,A,R.data)}}else{n.texImage2D(34069+L,0,v,g,A,l[L]);for(var O=0;O<f.length;O++){var I=f[O];n.texImage2D(34069+L,O+1,v,g,A,I.image[L])}}a.__maxMipLevel=f.length}E(t,m)&&x(34067,t,p.width,p.height),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture)}}function P(e,t){n.activeTexture(33984+t),n.bindTexture(34067,r.get(e).__webglTexture)}var k=(s={},Object(u.a)(s,1e3,10497),Object(u.a)(s,1001,33071),Object(u.a)(s,1002,33648),s),N=(l={},Object(u.a)(l,1003,9728),Object(u.a)(l,1004,9984),Object(u.a)(l,1005,9986),Object(u.a)(l,_,9729),Object(u.a)(l,1007,9985),Object(u.a)(l,1008,9987),l);function D(n,o,a){a?(e.texParameteri(n,10242,k[o.wrapS]),e.texParameteri(n,10243,k[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,k[o.wrapR]),e.texParameteri(n,10240,N[o.magFilter]),e.texParameteri(n,10241,N[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,T(o.magFilter)),e.texParameteri(n,10241,T(o.minFilter)),1003!==o.minFilter&&o.minFilter!==_&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(1015===o.type&&null===t.get("OES_texture_float_linear"))return;if(1016===o.type&&null===(h||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function F(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",M),t.__webglTexture=e.createTexture(),a.memory.textures++)}function j(t,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),F(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var s,u=function(e){return!h&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&e.minFilter!==_)}(r)&&!1===b(r.image),l=y(r.image,u,!1,p),c=b(l)||h,f=o.convert(r.format),d=o.convert(r.type),m=S(r.internalFormat,f,d);D(a,r,c);var g=r.mipmaps;if(r.isDepthTexture)m=6402,h?m=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===m&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,d=o.convert(r.type)),1027===r.format&&6402===m&&(m=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,d=o.convert(r.type))),n.texImage2D(3553,0,m,l.width,l.height,0,f,d,null);else if(r.isDataTexture)if(g.length>0&&c){for(var A=0,v=g.length;A<v;A++)s=g[A],n.texImage2D(3553,A,m,s.width,s.height,0,f,d,s.data);r.generateMipmaps=!1,t.__maxMipLevel=g.length-1}else n.texImage2D(3553,0,m,l.width,l.height,0,f,d,l.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var T=0,M=g.length;T<M;T++)s=g[T],r.format!==w&&1022!==r.format?null!==f?n.compressedTexImage2D(3553,T,m,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,T,m,s.width,s.height,0,f,d,s.data);t.__maxMipLevel=g.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,l.width,l.height,l.depth,0,f,d,l.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,l.width,l.height,l.depth,0,f,d,l.data),t.__maxMipLevel=0;else if(g.length>0&&c){for(var L=0,C=g.length;L<C;L++)s=g[L],n.texImage2D(3553,L,m,f,d,s);r.generateMipmaps=!1,t.__maxMipLevel=g.length-1}else n.texImage2D(3553,0,m,f,d,l),t.__maxMipLevel=0;E(r,c)&&x(a,r,l.width,l.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function B(t,i,a,s){var u=o.convert(i.texture.format),l=o.convert(i.texture.type),c=S(i.texture.internalFormat,u,l);n.texImage2D(s,0,c,i.width,i.height,0,u,l,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function V(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var a=n.depthTexture;a&&a.isDepthTexture&&(1015===a.type?i=36012:1014===a.type&&(i=33190));var s=U(n);e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var u=U(n);e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var l=o.convert(n.texture.format),c=o.convert(n.texture.type),h=S(n.texture.internalFormat,l,c);if(r){var f=U(n);e.renderbufferStorageMultisample(36161,f,h,n.width,n.height)}else e.renderbufferStorage(36161,h,n.width,n.height)}e.bindRenderbuffer(36161,null)}function G(t){var n=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),O(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(1026===n.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(1027!==n.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),V(n.__webglDepthbuffer[o],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),V(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function U(e){return h&&e.isWebGLMultisampleRenderTarget?Math.min(m,e.samples):0}var q=!1,W=!1;this.allocateTextureUnit=function(){var e=R;return e>=f&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+f),R+=1,e},this.resetTextureUnits=function(){R=0},this.setTexture2D=O,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?j(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?j(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=I,this.setTextureCubeDynamic=P,this.setupRenderTarget=function(t){var i=r.get(t),s=r.get(t.texture);t.addEventListener("dispose",C),s.__webglTexture=e.createTexture(),a.memory.textures++;var u=!0===t.isWebGLCubeRenderTarget,l=!0===t.isWebGLMultisampleRenderTarget,c=b(t)||h;if(!h||1022!==t.texture.format||1015!==t.texture.type&&1016!==t.texture.type||(t.texture.format=w,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),u){i.__webglFramebuffer=[];for(var f=0;f<6;f++)i.__webglFramebuffer[f]=e.createFramebuffer()}else if(i.__webglFramebuffer=e.createFramebuffer(),l)if(h){i.__webglMultisampledFramebuffer=e.createFramebuffer(),i.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,i.__webglColorRenderbuffer);var d=o.convert(t.texture.format),p=o.convert(t.texture.type),m=S(t.texture.internalFormat,d,p),g=U(t);e.renderbufferStorageMultisample(36161,g,m,t.width,t.height),e.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(i.__webglDepthRenderbuffer=e.createRenderbuffer(),V(i.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,s.__webglTexture),D(34067,t.texture,c);for(var A=0;A<6;A++)B(i.__webglFramebuffer[A],t,36064,34069+A);E(t.texture,c)&&x(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),D(3553,t.texture,c),B(i.__webglFramebuffer,t,36064,3553),E(t.texture,c)&&x(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&G(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(E(t,b(e)||h)){var i=e.isWebGLCubeRenderTarget?34067:3553,o=r.get(t).__webglTexture;n.bindTexture(i,o),x(i,t,e.width,e.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(h){var n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var i=t.width,o=t.height,a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===q&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),q=!0),e=e.texture),O(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===W&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),W=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?I(e,t):P(e,t)}}function bi(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===e)return 6406;if(1022===e)return 6407;if(e===w)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:36492===e?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:1020===e?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function _i(e){hn.call(this),this.cameras=e||[]}function wi(){Fe.call(this),this.type="Group"}function Ei(){this._targetRay=null,this._grip=null,this._hand=null}function xi(e,t){var n=this,r=null,i=1,o=null,a="local-floor",s=null,u=[],l=new Map,c=new hn;c.layers.enable(1),c.viewport=new k;var h=new hn;h.layers.enable(2),h.viewport=new k;var f=[c,h],d=new _i;d.layers.enable(1),d.layers.enable(2);var p=null,m=null;function g(e){var t=l.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function A(){l.forEach((function(e,t){e.disconnect(t)})),l.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),x.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function v(e){o=e,x.setContext(r),x.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function y(e){for(var t=r.inputSources,n=0;n<u.length;n++)l.set(t[n],u[n]);for(var i=0;i<e.removed.length;i++){var o=e.removed[i],a=l.get(o);a&&(a.dispatchEvent({type:"disconnected",data:o}),l.delete(o))}for(var s=0;s<e.added.length;s++){var c=e.added[s],h=l.get(c);h&&h.dispatchEvent({type:"connected",data:c})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=u[e];return void 0===t&&(t=new Ei,u[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){var t=u[e];return void 0===t&&(t=new Ei,u[e]=t),t.getGripSpace()},this.getHand=function(e){var t=u[e];return void 0===t&&(t=new Ei,u[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return r},this.setSession=function(e){if(null!==(r=e)){r.addEventListener("select",g),r.addEventListener("selectstart",g),r.addEventListener("selectend",g),r.addEventListener("squeeze",g),r.addEventListener("squeezestart",g),r.addEventListener("squeezeend",g),r.addEventListener("end",A);var n=t.getContextAttributes();!0!==n.xrCompatible&&t.makeXRCompatible();var o={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:i},s=new XRWebGLLayer(r,t,o);r.updateRenderState({baseLayer:s}),r.requestReferenceSpace(a).then(v),r.addEventListener("inputsourceschange",y)}};var b=new j,_=new j;function w(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){d.near=h.near=c.near=e.near,d.far=h.far=c.far=e.far,p===d.near&&m===d.far||(r.updateRenderState({depthNear:d.near,depthFar:d.far}),p=d.near,m=d.far);var t=e.parent,n=d.cameras;w(d,t);for(var i=0;i<n.length;i++)w(n[i],t);e.matrixWorld.copy(d.matrixWorld);for(var o=e.children,a=0,s=o.length;a<s;a++)o[a].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){b.setFromMatrixPosition(t.matrixWorld),_.setFromMatrixPosition(n.matrixWorld);var r=b.distanceTo(_),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*c,d=a*h,p=r/(-c+h),m=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var g=a+p,A=s+p,v=f-m,y=d+(r-m),w=u*s/A*g,E=l*s/A*g;e.projectionMatrix.makePerspective(v,y,w,E,g,A)}(d,c,h):d.projectionMatrix.copy(c.projectionMatrix),d};var E=null;var x=new vn;x.setAnimationLoop((function(t,n){if(null!==(s=n.getViewerPose(o))){var i=s.views,a=r.renderState.baseLayer;e.setFramebuffer(a.framebuffer);var l=!1;i.length!==d.cameras.length&&(d.cameras.length=0,l=!0);for(var c=0;c<i.length;c++){var h=i[c],p=a.getViewport(h),m=f[c];m.matrix.fromArray(h.transform.matrix),m.projectionMatrix.fromArray(h.projectionMatrix),m.viewport.set(p.x,p.y,p.width,p.height),0===c&&d.matrix.copy(m.matrix),!0===l&&d.cameras.push(m)}}for(var g=r.inputSources,A=0;A<u.length;A++){var v=u[A],y=g[A];v.update(y,n,o)}E&&E(t,n)})),this.setAnimationLoop=function(e){E=e},this.dispose=function(){}}function Si(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);var r,i,o=e.get(n).envMap;if(o){t.envMap.value=o,t.flipEnvMap.value=o.isCubeTexture?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;var a=e.get(o).__maxMipLevel;void 0!==a&&(t.maxMipLevel.value=a)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===v&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===v&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===v&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,r):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ti(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,f=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d=this,p=!1,m=null,g=0,A=0,v=null,y=null,b=-1,_=null,E=null,x=new k,S=new k,T=null,M=t.width,R=t.height,O=1,I=null,P=null,N=new k(0,0,M,R),D=new k(0,0,M,R),F=!1,B=new An,V=!1,G=!1,U=new fe,q=new j,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function z(){return null===v?O:1}var H,K,Y,Q,X,J,Z,$,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,he,de,pe=n;function me(e,n){for(var r=0;r<e.length;r++){var i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{var ge={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",_e,!1),t.addEventListener("webglcontextrestored",we,!1),null===pe){var Ae=["webgl2","webgl","experimental-webgl"];if(!0===d.isWebGL1Renderer&&Ae.shift(),null===(pe=me(Ae,ge)))throw me(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===pe.getShaderPrecisionFormat&&(pe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ie){throw console.error("THREE.WebGLRenderer: "+Ie.message),Ie}function ve(){H=new On(pe),!1===(K=new Ln(pe,H,e)).isWebGL2&&(H.get("WEBGL_depth_texture"),H.get("OES_texture_float"),H.get("OES_texture_half_float"),H.get("OES_texture_half_float_linear"),H.get("OES_standard_derivatives"),H.get("OES_element_index_uint"),H.get("OES_vertex_array_object"),H.get("ANGLE_instanced_arrays")),H.get("OES_texture_float_linear"),he=new bi(pe,H,K),(Y=new vi(pe,H,K)).scissor(S.copy(D).multiplyScalar(O).floor()),Y.viewport(x.copy(N).multiplyScalar(O).floor()),Q=new kn(pe),X=new ii,J=new yi(pe,H,Y,X,K,he,Q),Z=new Rn(d),$=new yn(pe,K),de=new Tn(pe,H,$,K),ee=new In(pe,$,Q,de),te=new jn(pe,ee,$,Q),ue=new Fn(pe),ae=new Cn(X),ne=new ri(d,Z,H,K,de,ae),re=new Si(X),ie=new ui(X),oe=new pi,se=new Sn(d,Z,Y,te,s),le=new Mn(pe,H,Q,K),ce=new Pn(pe,H,Q,K),Q.programs=ne.programs,d.capabilities=K,d.extensions=H,d.properties=X,d.renderLists=ie,d.state=Y,d.info=Q}ve();var ye=new xi(d,pe);this.xr=ye;var be=new Ai(d,te,K.maxTextureSize);function _e(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1,ve()}function Ee(e){var t=e.target;t.removeEventListener("dispose",Ee),function(e){xe(e),X.remove(e)}(t)}function xe(e){var t=X.get(e).program;void 0!==t&&ne.releaseProgram(t)}this.shadowMap=be,this.getContext=function(){return pe},this.getContextAttributes=function(){return pe.getContextAttributes()},this.forceContextLoss=function(){var e=H.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=H.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(e){void 0!==e&&(O=e,this.setSize(M,R,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new C),e.set(M,R)},this.setSize=function(e,n,r){ye.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=e,R=n,t.width=Math.floor(e*O),t.height=Math.floor(n*O),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new C),e.set(M*O,R*O).floor()},this.setDrawingBufferSize=function(e,n,r){M=e,R=n,O=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new k),e.copy(x)},this.getViewport=function(e){return e.copy(N)},this.setViewport=function(e,t,n,r){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,r),Y.viewport(x.copy(N).multiplyScalar(O).floor())},this.getScissor=function(e){return e.copy(D)},this.setScissor=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),Y.scissor(S.copy(D).multiplyScalar(O).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function(e){Y.setScissorTest(F=e)},this.setOpaqueSort=function(e){I=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(){return se.getClearColor()},this.setClearColor=function(){se.setClearColor.apply(se,arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha.apply(se,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),pe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",_e,!1),t.removeEventListener("webglcontextrestored",we,!1),ie.dispose(),oe.dispose(),X.dispose(),Z.dispose(),te.dispose(),de.dispose(),ye.dispose(),Te.stop()},this.renderBufferImmediate=function(e,t){de.initAttributes();var n=X.get(e);e.hasPositions&&!n.position&&(n.position=pe.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=pe.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=pe.createBuffer()),e.hasColors&&!n.color&&(n.color=pe.createBuffer());var r=t.getAttributes();e.hasPositions&&(pe.bindBuffer(34962,n.position),pe.bufferData(34962,e.positionArray,35048),de.enableAttribute(r.position),pe.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(pe.bindBuffer(34962,n.normal),pe.bufferData(34962,e.normalArray,35048),de.enableAttribute(r.normal),pe.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(pe.bindBuffer(34962,n.uv),pe.bufferData(34962,e.uvArray,35048),de.enableAttribute(r.uv),pe.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(pe.bindBuffer(34962,n.color),pe.bufferData(34962,e.colorArray,35048),de.enableAttribute(r.color),pe.vertexAttribPointer(r.color,3,5126,!1,0,0)),de.disableUnusedAttributes(),pe.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=W);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=Oe(e,t,r,i);Y.setMaterial(r,a);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,h=1;!0===r.wireframe&&(u=ee.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&ue.update(i,n,r,s),de.setup(i,r,s,n,u);var f=le;null!==u&&(c=$.get(u),(f=ce).setIndex(c));var d=null!==u?u.count:l.count,p=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,A=null!==o?o.count*h:1/0,v=Math.max(p,g),y=Math.min(d,p+m,g+A)-1,b=Math.max(0,y-v+1);if(0!==b){if(i.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*z()),f.setMode(1)):f.setMode(4);else if(i.isLine){var _=r.linewidth;void 0===_&&(_=1),Y.setLineWidth(_*z()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(v,b,i.count);else if(n.isInstancedBufferGeometry){var w=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(v,b,w)}else f.render(v,b)}},this.compile=function(e,t){(f=oe.get(e,t)).init(),e.traverse((function(e){e.isLight&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(t);var n=new WeakMap;e.traverse((function(t){var r=t.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++){var o=r[i];!1===n.has(o)&&(Re(o,e,t),n.set(o))}else!1===n.has(r)&&(Re(r,e,t),n.set(r))}))};var Se=null;var Te=new vn;function Me(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||B.intersectsSprite(e)){r&&q.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);var i=te.update(e),o=e.material;o.visible&&h.push(e,i,o,n,q.z,null)}}else if(e.isImmediateRenderObject)r&&q.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U),h.push(e,null,e.material,n,q.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Q.render.frame&&(e.skeleton.update(),e.skeleton.frame=Q.render.frame),!e.frustumCulled||B.intersectsObject(e))){r&&q.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);var a=te.update(e),s=e.material;if(Array.isArray(s))for(var u=a.groups,l=0,c=u.length;l<c;l++){var d=u[l],p=s[d.materialIndex];p&&p.visible&&h.push(e,a,p,n,q.z,d)}else s.visible&&h.push(e,a,s,n,q.z,null)}for(var m=e.children,g=0,A=m.length;g<A;g++)Me(m[g],t,n,r)}}function Le(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,l=null===r?a.material:r,c=a.group;if(n.isArrayCamera){E=n;for(var h=n.cameras,d=0,p=h.length;d<p;d++){var m=h[d];s.layers.test(m.layers)&&(Y.viewport(x.copy(m.viewport)),f.setupLights(m),Ce(s,t,m,u,l,c))}}else E=null,Ce(s,t,n,u,l,c)}}function Ce(e,t,n,r,i,o){if(e.onBeforeRender(d,t,n,r,i,o),f=oe.get(t,E||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=Oe(n,t,i,e);Y.setMaterial(i),de.reset(),function(e,t){e.render((function(e){d.renderBufferImmediate(e,t)}))}(e,a)}else d.renderBufferDirect(n,t,r,i,e,o);e.onAfterRender(d,t,n,r,i,o),f=oe.get(t,E||n)}function Re(e,t,n){!0!==t.isScene&&(t=W);var r=X.get(e),i=f.state.lights,o=f.state.shadowsArray,a=i.state.version,s=ne.getParameters(e,i.state,o,t,n),u=ne.getProgramCacheKey(s),l=r.program,c=!0;if(void 0===l)e.addEventListener("dispose",Ee);else if(l.cacheKey!==u)xe(e);else if(r.lightsStateVersion!==a)c=!1;else{if(void 0!==s.shaderID){var h=e.isMeshStandardMaterial?t.environment:null;return void(r.envMap=Z.get(e.envMap||h))}c=!1}c&&(s.uniforms=ne.getUniforms(e),e.onBeforeCompile(s,d),l=ne.acquireProgram(s,u),r.program=l,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding);var p=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ae.numPlanes,r.numIntersection=ae.numIntersection,p.clippingPlanes=ae.uniform),r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=Z.get(e.envMap||r.environment),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(p.ambientLightColor.value=i.state.ambient,p.lightProbe.value=i.state.probe,p.directionalLights.value=i.state.directional,p.directionalLightShadows.value=i.state.directionalShadow,p.spotLights.value=i.state.spot,p.spotLightShadows.value=i.state.spotShadow,p.rectAreaLights.value=i.state.rectArea,p.ltc_1.value=i.state.rectAreaLTC1,p.ltc_2.value=i.state.rectAreaLTC2,p.pointLights.value=i.state.point,p.pointLightShadows.value=i.state.pointShadow,p.hemisphereLights.value=i.state.hemi,p.directionalShadowMap.value=i.state.directionalShadowMap,p.directionalShadowMatrix.value=i.state.directionalShadowMatrix,p.spotShadowMap.value=i.state.spotShadowMap,p.spotShadowMatrix.value=i.state.spotShadowMatrix,p.pointShadowMap.value=i.state.pointShadowMap,p.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=r.program.getUniforms(),g=Dr.seqWithValue(m.seq,p);r.uniformsList=g}function Oe(e,t,n,r){!0!==t.isScene&&(t=W),J.resetTextureUnits();var i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===v?d.outputEncoding:v.texture.encoding,s=Z.get(n.envMap||o),u=X.get(n),l=f.state.lights;if(!0===V&&(!0===G||e!==_)){var c=e===_&&n.id===b;ae.setState(n,e,c)}n.version===u.__version?n.fog&&u.fog!==i||u.environment!==o||u.needsLights&&u.lightsStateVersion!==l.state.version?Re(n,t,r):void 0===u.numClippingPlanes||u.numClippingPlanes===ae.numPlanes&&u.numIntersection===ae.numIntersection?(u.outputEncoding!==a||u.envMap!==s)&&Re(n,t,r):Re(n,t,r):(Re(n,t,r),u.__version=n.version);var h,p,m=!1,g=!1,A=!1,y=u.program,E=y.getUniforms(),x=u.uniforms;if(Y.useProgram(y.program)&&(m=!0,g=!0,A=!0),n.id!==b&&(b=n.id,g=!0),m||_!==e){if(E.setValue(pe,"projectionMatrix",e.projectionMatrix),K.logarithmicDepthBuffer&&E.setValue(pe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,g=!0,A=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var S=E.map.cameraPosition;void 0!==S&&S.setValue(pe,q.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&E.setValue(pe,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&E.setValue(pe,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){E.setOptional(pe,r,"bindMatrix"),E.setOptional(pe,r,"bindMatrixInverse");var T=r.skeleton;if(T){var M=T.bones;if(K.floatVertexTextures){if(void 0===T.boneTexture){var C=Math.sqrt(4*M.length);C=L.ceilPowerOfTwo(C),C=Math.max(C,4);var I=new Float32Array(C*C*4);I.set(T.boneMatrices);var P=new pn(I,C,C,w,1015);T.boneMatrices=I,T.boneTexture=P,T.boneTextureSize=C}E.setValue(pe,"boneTexture",T.boneTexture,J),E.setValue(pe,"boneTextureSize",T.boneTextureSize)}else E.setOptional(pe,T,"boneMatrices")}}return(g||u.receiveShadow!==r.receiveShadow)&&(u.receiveShadow=r.receiveShadow,E.setValue(pe,"receiveShadow",r.receiveShadow)),g&&(E.setValue(pe,"toneMappingExposure",d.toneMappingExposure),u.needsLights&&(p=A,(h=x).ambientLightColor.needsUpdate=p,h.lightProbe.needsUpdate=p,h.directionalLights.needsUpdate=p,h.directionalLightShadows.needsUpdate=p,h.pointLights.needsUpdate=p,h.pointLightShadows.needsUpdate=p,h.spotLights.needsUpdate=p,h.spotLightShadows.needsUpdate=p,h.rectAreaLights.needsUpdate=p,h.hemisphereLights.needsUpdate=p),i&&n.fog&&re.refreshFogUniforms(x,i),re.refreshMaterialUniforms(x,n,O,R),Dr.upload(pe,u.uniformsList,x,J)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Dr.upload(pe,u.uniformsList,x,J),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&E.setValue(pe,"center",r.center),E.setValue(pe,"modelViewMatrix",r.modelViewMatrix),E.setValue(pe,"normalMatrix",r.normalMatrix),E.setValue(pe,"modelMatrix",r.matrixWorld),y}Te.setAnimationLoop((function(e){ye.isPresenting||Se&&Se(e)})),"undefined"!==typeof window&&Te.setContext(window),this.setAnimationLoop=function(e){Se=e,ye.setAnimationLoop(e),null===e?Te.stop():Te.start()},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0===t||!0===t.isCamera){if(!0!==p){de.resetDefaultState(),b=-1,_=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ye.enabled&&!0===ye.isPresenting&&(t=ye.getCamera(t)),!0===e.isScene&&e.onBeforeRender(d,e,t,n||v),(f=oe.get(e,t)).init(),U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),B.setFromProjectionMatrix(U),G=this.localClippingEnabled,V=ae.init(this.clippingPlanes,G,t),(h=ie.get(e,t)).init(),Me(e,t,0,d.sortObjects),h.finish(),!0===d.sortObjects&&h.sort(I,P),!0===V&&ae.beginShadows();var i=f.state.shadowsArray;be.render(i,e,t),f.setupLights(t),!0===V&&ae.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),se.render(h,e,t,r);var o=h.opaque,a=h.transparent;o.length>0&&Le(o,e,t),a.length>0&&Le(a,e,t),!0===e.isScene&&e.onAfterRender(d,e,t),null!==v&&(J.updateRenderTargetMipmap(v),J.updateMultisampleRenderTarget(v)),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1),h=null,f=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){m!==e&&null===v&&pe.bindFramebuffer(36160,e),m=e},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return A},this.getRenderList=function(){return h},this.setRenderList=function(e){h=e},this.getRenderState=function(){return f},this.setRenderState=function(e){f=e},this.getRenderTarget=function(){return v},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v=e,g=t,A=n,e&&void 0===X.get(e).__webglFramebuffer&&J.setupRenderTarget(e);var r=m,i=!1;if(e){var o=X.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=o[t],i=!0):r=e.isWebGLMultisampleRenderTarget?X.get(e).__webglMultisampledFramebuffer:o,x.copy(e.viewport),S.copy(e.scissor),T=e.scissorTest}else x.copy(N).multiplyScalar(O).floor(),S.copy(D).multiplyScalar(O).floor(),T=F;if(y!==r&&(pe.bindFramebuffer(36160,r),y=r),Y.viewport(x),Y.scissor(S),Y.setScissorTest(T),i){var a=X.get(e.texture);pe.framebufferTexture2D(36160,36064,34069+t,a.__webglTexture,n)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(e&&e.isWebGLRenderTarget){var s=X.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){var u=!1;s!==y&&(pe.bindFramebuffer(36160,s),u=!0);try{var l=e.texture,c=l.format,h=l.type;if(c!==w&&he.convert(c)!==pe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(1009!==h&&he.convert(h)!==pe.getParameter(35738)&&(1015!==h||!(K.isWebGL2||H.get("OES_texture_float")||H.get("WEBGL_color_buffer_float")))&&(1016!==h||!(K.isWebGL2?H.get("EXT_color_buffer_float"):H.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===pe.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&pe.readPixels(t,n,r,i,he.convert(c),he.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&pe.bindFramebuffer(36160,y)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r),a=he.convert(t.format);J.setTexture2D(t,0),pe.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),Y.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r){void 0===r&&(r=0);var i=t.image.width,o=t.image.height,a=he.convert(n.format),s=he.convert(n.type);J.setTexture2D(n,0),pe.pixelStorei(37440,n.flipY),pe.pixelStorei(37441,n.premultiplyAlpha),pe.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?pe.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?pe.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):pe.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&pe.generateMipmap(3553),Y.unbindTexture()},this.initTexture=function(e){J.setTexture2D(e,0),Y.unbindTexture()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Mi(e){Ti.call(this,e)}_i.prototype=Object.assign(Object.create(hn.prototype),{constructor:_i,isArrayCamera:!0}),wi.prototype=Object.assign(Object.create(Fe.prototype),{constructor:wi,isGroup:!0}),Object.assign(Ei.prototype,{constructor:Ei,getHandSpace:function(){if(null===this._hand&&(this._hand=new wi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){var t=new wi;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new wi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new wi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){var r=null,i=null,o=null,a=this._targetRay,s=this._grip,u=this._hand;if(e)if(u&&e.hand){o=!0;for(var l=0;l<=window.XRHand.LITTLE_PHALANX_TIP;l++)if(e.hand[l]){var c=t.getJointPose(e.hand[l],n),h=u.joints[l];null!==c&&(h.matrix.fromArray(c.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=c.radius),h.visible=null!==c;var f=u.joints[window.XRHand.INDEX_PHALANX_TIP],d=u.joints[window.XRHand.THUMB_PHALANX_TIP],p=f.position.distanceTo(d.position);u.inputState.pinching&&p>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==a&&null!==(r=t.getPose(e.targetRaySpace,n))&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)),null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}}),Object.assign(xi.prototype,E.prototype),Mi.prototype=Object.assign(Object.create(Ti.prototype),{constructor:Mi,isWebGL1Renderer:!0});var Li=function(){function e(t,n){Object(p.a)(this,e),Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new ot(t),this.density=void 0!==n?n:25e-5}return Object(m.a)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}(),Ci=function(){function e(t,n,r){Object(p.a)(this,e),Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new ot(t),this.near=void 0!==n?n:1,this.far=void 0!==r?r:1e3}return Object(m.a)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),Ri=function(e){c(n,e);var t=f(n);function n(){var e;return Object(p.a)(this,n),e=t.call(this),Object.defineProperty(i(e),"isScene",{value:!0}),e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:i(e)})),e}return Object(m.a)(n,[{key:"copy",value:function(e,t){return s(a(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=s(a(n.prototype),"toJSON",this).call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(Fe);function Oi(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=L.generateUUID()}Object.defineProperty(Oi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Oi.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=L.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new Oi(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=L.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var Ii,Pi=new j;function ki(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Ni(e){ut.call(this),this.type="SpriteMaterial",this.color=new ot(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(ki.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(ki.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,n=this.data.count;t<n;t++)Pi.x=this.getX(t),Pi.y=this.getY(t),Pi.z=this.getZ(t),Pi.applyMatrix4(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return new ft(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ki(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Ni.prototype=Object.create(ut.prototype),Ni.prototype.constructor=Ni,Ni.prototype.isSpriteMaterial=!0,Ni.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var Di=new j,Fi=new j,ji=new j,Bi=new C,Vi=new C,Gi=new fe,Ui=new j,qi=new j,Wi=new j,zi=new C,Hi=new C,Ki=new C;function Yi(e){if(Fe.call(this),this.type="Sprite",void 0===Ii){Ii=new Ot;var t=new Oi(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ii.setIndex([0,1,2,0,2,3]),Ii.setAttribute("position",new ki(t,3,0,!1)),Ii.setAttribute("uv",new ki(t,2,3,!1))}this.geometry=Ii,this.material=void 0!==e?e:new Ni,this.center=new C(.5,.5)}function Qi(e,t,n,r,i,o){Bi.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Vi.x=o*Bi.x-i*Bi.y,Vi.y=i*Bi.x+o*Bi.y):Vi.copy(Bi),e.copy(t),e.x+=Vi.x,e.y+=Vi.y,e.applyMatrix4(Gi)}Yi.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Yi,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fi.setFromMatrixScale(this.matrixWorld),Gi.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ji.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Fi.multiplyScalar(-ji.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;Qi(Ui.set(-.5,-.5,0),ji,o,Fi,n,r),Qi(qi.set(.5,-.5,0),ji,o,Fi,n,r),Qi(Wi.set(.5,.5,0),ji,o,Fi,n,r),zi.set(0,0),Hi.set(1,0),Ki.set(1,1);var a=e.ray.intersectTriangle(Ui,qi,Wi,!1,Di);if(null!==a||(Qi(qi.set(-.5,.5,0),ji,o,Fi,n,r),Hi.set(0,1),null!==(a=e.ray.intersectTriangle(Ui,Wi,qi,!1,Di)))){var s=e.ray.origin.distanceTo(Di);s<e.near||s>e.far||t.push({distance:s,point:Di.clone(),uv:Ze.getUV(Di,Ui,qi,Wi,zi,Hi,Ki,new C),face:null,object:this})}},copy:function(e){return Fe.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});var Xi=new j,Ji=new j;function Zi(){Fe.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function $i(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Qt.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new fe,this.bindMatrixInverse=new fe}Zi.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Zi,isLOD:!0,copy:function(e){Fe.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);var n,r=this.levels;for(n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){Xi.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Xi);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){Xi.setFromMatrixPosition(e.matrixWorld),Ji.setFromMatrixPosition(this.matrixWorld);var n,r,i=Xi.distanceTo(Ji)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r&&i>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}},toJSON:function(e){var t=Fe.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),$i.prototype=Object.assign(Object.create(Qt.prototype),{constructor:$i,isSkinnedMesh:!0,copy:function(e){return Qt.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new k,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Qt.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){var e=new j,t=new k,n=new k,r=new j,i=new fe;return function(o,a){var s=this.skeleton,u=this.geometry;t.fromBufferAttribute(u.attributes.skinIndex,o),n.fromBufferAttribute(u.attributes.skinWeight,o),e.fromBufferAttribute(u.attributes.position,o).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(var l=0;l<4;l++){var c=n.getComponent(l);if(0!==c){var h=t.getComponent(l);i.multiplyMatrices(s.bones[h].matrixWorld,s.boneInverses[h]),a.addScaledVector(r.copy(e).applyMatrix4(i),c)}}return a.applyMatrix4(this.bindMatrixInverse)}}()});var eo=new fe,to=new fe;function no(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new fe)}}function ro(){Fe.call(this),this.type="Bone"}Object.assign(no.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new fe;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.getInverse(this.boneInverses[e])}for(var r=0,i=this.bones.length;r<i;r++){var o=this.bones[r];o&&(o.parent&&o.parent.isBone?(o.matrix.getInverse(o.parent.matrixWorld),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++){var a=e[i]?e[i].matrixWorld:to;eo.multiplyMatrices(a,t[i]),eo.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new no(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),ro.prototype=Object.assign(Object.create(Fe.prototype),{constructor:ro,isBone:!0});var io=new fe,oo=new fe,ao=[],so=new Qt;function uo(e,t,n){Qt.call(this,e,t),this.instanceMatrix=new ft(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function lo(e){ut.call(this),this.type="LineBasicMaterial",this.color=new ot(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}uo.prototype=Object.assign(Object.create(Qt.prototype),{constructor:uo,isInstancedMesh:!0,copy:function(e){return Qt.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new ft(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var n=this.matrixWorld,r=this.count;if(so.geometry=this.geometry,so.material=this.material,void 0!==so.material)for(var i=0;i<r;i++){this.getMatrixAt(i,io),oo.multiplyMatrices(n,io),so.matrixWorld=oo,so.raycast(e,ao);for(var o=0,a=ao.length;o<a;o++){var s=ao[o];s.instanceId=i,s.object=this,t.push(s)}ao.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),lo.prototype=Object.create(ut.prototype),lo.prototype.constructor=lo,lo.prototype.isLineBasicMaterial=!0,lo.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};var co=new j,ho=new j,fo=new fe,po=new he,mo=new re;function go(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Fe.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ot,this.material=void 0!==t?t:new lo,this.updateMorphTargets()}go.prototype=Object.assign(Object.create(Fe.prototype),{constructor:go,isLine:!0,copy:function(e){return Fe.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)co.fromBufferAttribute(t,r-1),ho.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=co.distanceTo(ho);e.setAttribute("lineDistance",new bt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices,a=e.lineDistances;a[0]=0;for(var s=1,u=o.length;s<u;s++)a[s]=a[s-1],a[s]+=o[s-1].distanceTo(o[s])}return this},raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),mo.copy(n.boundingSphere),mo.applyMatrix4(r),mo.radius+=i,!1!==e.ray.intersectsSphere(mo)){fo.getInverse(r),po.copy(e.ray).applyMatrix4(fo);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new j,u=new j,l=new j,c=new j,h=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var f=n.index,d=n.attributes.position.array;if(null!==f)for(var p=f.array,m=0,g=p.length-1;m<g;m+=h){var A=p[m],v=p[m+1];if(s.fromArray(d,3*A),u.fromArray(d,3*v),!(po.distanceSqToSegment(s,u,c,l)>a)){c.applyMatrix4(this.matrixWorld);var y=e.ray.origin.distanceTo(c);y<e.near||y>e.far||t.push({distance:y,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(var b=0,_=d.length/3-1;b<_;b+=h){if(s.fromArray(d,3*b),u.fromArray(d,3*b+3),!(po.distanceSqToSegment(s,u,c,l)>a)){c.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(c);w<e.near||w>e.far||t.push({distance:w,point:l.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(n.isGeometry)for(var E=n.vertices,x=E.length,S=0;S<x-1;S+=h){if(!(po.distanceSqToSegment(E[S],E[S+1],c,l)>a)){c.applyMatrix4(this.matrixWorld);var T=e.ray.origin.distanceTo(c);T<e.near||T>e.far||t.push({distance:T,point:l.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var Ao=new j,vo=new j;function yo(e,t){go.call(this,e,t),this.type="LineSegments"}function bo(e,t){go.call(this,e,t),this.type="LineLoop"}function _o(e){ut.call(this),this.type="PointsMaterial",this.color=new ot(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}yo.prototype=Object.assign(Object.create(go.prototype),{constructor:yo,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Ao.fromBufferAttribute(t,r),vo.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Ao.distanceTo(vo);e.setAttribute("lineDistance",new bt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(var o=e.vertices,a=e.lineDistances,s=0,u=o.length;s<u;s+=2)Ao.copy(o[s]),vo.copy(o[s+1]),a[s]=0===s?0:a[s-1],a[s+1]=a[s]+Ao.distanceTo(vo);return this}}),bo.prototype=Object.assign(Object.create(go.prototype),{constructor:bo,isLineLoop:!0}),_o.prototype=Object.create(ut.prototype),_o.prototype.constructor=_o,_o.prototype.isPointsMaterial=!0,_o.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var wo=new fe,Eo=new he,xo=new re,So=new j;function To(e,t){Fe.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ot,this.material=void 0!==t?t:new _o,this.updateMorphTargets()}function Mo(e,t,n,r,i,o,a){var s=Eo.distanceSqToPoint(e);if(s<n){var u=new j;Eo.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:a})}}function Lo(e,t,n,r,i,o,a,s,u){P.call(this,e,t,n,r,i,o,a,s,u),this.format=void 0!==a?a:1022,this.minFilter=void 0!==o?o:_,this.magFilter=void 0!==i?i:_,this.generateMipmaps=!1;var l=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){l.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}function Co(e,t,n,r,i,o,a,s,u,l,c,h){P.call(this,null,o,a,s,u,l,r,i,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ro(e,t,n,r,i,o,a,s,u){P.call(this,e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}function Oo(e,t,n,r,i,o,a,s,u,l){if(1026!==(l=void 0!==l?l:1026)&&1027!==l)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===l&&(n=1012),void 0===n&&1027===l&&(n=1020),P.call(this,null,r,i,o,a,s,l,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==s?s:1003,this.flipY=!1,this.generateMipmaps=!1}To.prototype=Object.assign(Object.create(Fe.prototype),{constructor:To,isPoints:!0,copy:function(e){return Fe.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),xo.copy(n.boundingSphere),xo.applyMatrix4(r),xo.radius+=i,!1!==e.ray.intersectsSphere(xo)){wo.getInverse(r),Eo.copy(e.ray).applyMatrix4(wo);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){var s=n.index,u=n.attributes.position.array;if(null!==s)for(var l=s.array,c=0,h=l.length;c<h;c++){var f=l[c];So.fromArray(u,3*f),Mo(So,f,a,r,e,t,this)}else for(var d=0,p=u.length/3;d<p;d++)So.fromArray(u,3*d),Mo(So,d,a,r,e,t,this)}else for(var m=n.vertices,g=0,A=m.length;g<A;g++)Mo(m[g],g,a,r,e,t,this)}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Lo.prototype=Object.assign(Object.create(P.prototype),{constructor:Lo,isVideoTexture:!0,update:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Co.prototype=Object.create(P.prototype),Co.prototype.constructor=Co,Co.prototype.isCompressedTexture=!0,Ro.prototype=Object.create(P.prototype),Ro.prototype.constructor=Ro,Ro.prototype.isCanvasTexture=!0,Oo.prototype=Object.create(P.prototype),Oo.prototype.constructor=Oo,Oo.prototype.isDepthTexture=!0;var Io=function(e){c(n,e);var t=f(n);function n(e){var r;Object(p.a)(this,n),(r=t.call(this)).type="WireframeGeometry";var i=[],o=[0,0],a={},s=["a","b","c"];if(e&&e.isGeometry){for(var u=e.faces,l=0,c=u.length;l<c;l++)for(var h=u[l],f=0;f<3;f++){var d=h[s[f]],m=h[s[(f+1)%3]];o[0]=Math.min(d,m),o[1]=Math.max(d,m);var g=o[0]+","+o[1];void 0===a[g]&&(a[g]={index1:o[0],index2:o[1]})}for(var A in a){var v=a[A],y=e.vertices[v.index1];i.push(y.x,y.y,y.z),y=e.vertices[v.index2],i.push(y.x,y.y,y.z)}}else if(e&&e.isBufferGeometry){var b=new j;if(null!==e.index){var _=e.attributes.position,w=e.index,E=e.groups;0===E.length&&(E=[{start:0,count:w.count,materialIndex:0}]);for(var x=0,S=E.length;x<S;++x)for(var T=E[x],M=T.start,L=M,C=M+T.count;L<C;L+=3)for(var R=0;R<3;R++){var O=w.getX(L+R),I=w.getX(L+(R+1)%3);o[0]=Math.min(O,I),o[1]=Math.max(O,I);var P=o[0]+","+o[1];void 0===a[P]&&(a[P]={index1:o[0],index2:o[1]})}for(var k in a){var N=a[k];b.fromBufferAttribute(_,N.index1),i.push(b.x,b.y,b.z),b.fromBufferAttribute(_,N.index2),i.push(b.x,b.y,b.z)}}else for(var D=e.attributes.position,F=0,B=D.count/3;F<B;F++)for(var V=0;V<3;V++){var G=3*F+V;b.fromBufferAttribute(D,G),i.push(b.x,b.y,b.z);var U=3*F+(V+1)%3;b.fromBufferAttribute(D,U),i.push(b.x,b.y,b.z)}}return r.setAttribute("position",new bt(i,3)),r}return n}(Ot);function Po(e,t,n){nn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new ko(e,t,n)),this.mergeVertices()}function ko(e,t,n){Ot.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r=[],i=[],o=[],a=[],s=1e-5,u=new j,l=new j,c=new j,h=new j,f=new j;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var d=t+1,p=0;p<=n;p++)for(var m=p/n,g=0;g<=t;g++){var A=g/t;e(A,m,l),i.push(l.x,l.y,l.z),A-s>=0?(e(A-s,m,c),h.subVectors(l,c)):(e(A+s,m,c),h.subVectors(c,l)),m-s>=0?(e(A,m-s,c),f.subVectors(l,c)):(e(A,m+s,c),f.subVectors(c,l)),u.crossVectors(h,f).normalize(),o.push(u.x,u.y,u.z),a.push(A,m)}for(var v=0;v<n;v++)for(var y=0;y<t;y++){var b=v*d+y,_=v*d+y+1,w=(v+1)*d+y+1,E=(v+1)*d+y;r.push(b,_,E),r.push(_,w,E)}this.setIndex(r),this.setAttribute("position",new bt(i,3)),this.setAttribute("normal",new bt(o,3)),this.setAttribute("uv",new bt(a,2))}Po.prototype=Object.create(nn.prototype),Po.prototype.constructor=Po,ko.prototype=Object.create(Ot.prototype),ko.prototype.constructor=ko;var No=function(e){c(n,e);var t=f(n);function n(e,r,i,o){var a;return Object(p.a)(this,n),(a=t.call(this)).type="PolyhedronGeometry",a.parameters={vertices:e,indices:r,radius:i,detail:o},a.fromBufferGeometry(new Do(e,r,i,o)),a.mergeVertices(),a}return n}(nn),Do=function(e){c(n,e);var t=f(n);function n(e,r,i,o){var a;Object(p.a)(this,n),(a=t.call(this)).type="PolyhedronBufferGeometry",a.parameters={vertices:e,indices:r,radius:i,detail:o},i=i||1;var s=[],u=[];function l(e,t,n,r){for(var i=Math.pow(2,r),o=[],a=0;a<=i;a++){o[a]=[];for(var s=e.clone().lerp(n,a/i),u=t.clone().lerp(n,a/i),l=i-a,h=0;h<=l;h++)o[a][h]=0===h&&a===i?s:s.clone().lerp(u,h/l)}for(var f=0;f<i;f++)for(var d=0;d<2*(i-f)-1;d++){var p=Math.floor(d/2);d%2===0?(c(o[f][p+1]),c(o[f+1][p]),c(o[f][p])):(c(o[f][p+1]),c(o[f+1][p+1]),c(o[f+1][p]))}}function c(e){s.push(e.x,e.y,e.z)}function h(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function f(e,t,n,r){r<0&&1===e.x&&(u[t]=e.x-1),0===n.x&&0===n.z&&(u[t]=r/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}return function(e){for(var t=new j,n=new j,i=new j,o=0;o<r.length;o+=3)h(r[o+0],t),h(r[o+1],n),h(r[o+2],i),l(t,n,i,e)}(o=o||0),function(e){for(var t=new j,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}(i),function(){for(var e=new j,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=d(e)/2/Math.PI+.5,r=(i=e,Math.atan2(-i.y,Math.sqrt(i.x*i.x+i.z*i.z))/Math.PI+.5);u.push(n,1-r)}var i;(function(){for(var e=new j,t=new j,n=new j,r=new j,i=new C,o=new C,a=new C,l=0,c=0;l<s.length;l+=9,c+=6){e.set(s[l+0],s[l+1],s[l+2]),t.set(s[l+3],s[l+4],s[l+5]),n.set(s[l+6],s[l+7],s[l+8]),i.set(u[c+0],u[c+1]),o.set(u[c+2],u[c+3]),a.set(u[c+4],u[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var h=d(r);f(i,c+0,e,h),f(o,c+2,t,h),f(a,c+4,n,h)}})(),function(){for(var e=0;e<u.length;e+=6){var t=u[e+0],n=u[e+2],r=u[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(u[e+0]+=1),n<.2&&(u[e+2]+=1),r<.2&&(u[e+4]+=1))}}()}(),a.setAttribute("position",new bt(s,3)),a.setAttribute("normal",new bt(s.slice(),3)),a.setAttribute("uv",new bt(u,2)),0===o?a.computeVertexNormals():a.normalizeNormals(),a}return n}(Ot),Fo=function(e){c(n,e);var t=f(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).type="TetrahedronGeometry",i.parameters={radius:e,detail:r},i.fromBufferGeometry(new jo(e,r)),i.mergeVertices(),i}return n}(nn),jo=function(e){c(n,e);var t=f(n);function n(e,r){var i;Object(p.a)(this,n);return(i=t.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,r)).type="TetrahedronBufferGeometry",i.parameters={radius:e,detail:r},i}return n}(Do),Bo=function(e){c(n,e);var t=f(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).type="OctahedronGeometry",i.parameters={radius:e,detail:r},i.fromBufferGeometry(new Vo(e,r)),i.mergeVertices(),i}return n}(nn),Vo=function(e){c(n,e);var t=f(n);function n(e,r){var i;Object(p.a)(this,n);return(i=t.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,r)).type="OctahedronBufferGeometry",i.parameters={radius:e,detail:r},i}return n}(Do),Go=function(e){c(n,e);var t=f(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).type="IcosahedronGeometry",i.parameters={radius:e,detail:r},i.fromBufferGeometry(new Uo(e,r)),i.mergeVertices(),i}return n}(nn),Uo=function(e){c(n,e);var t=f(n);function n(e,r){var i;Object(p.a)(this,n);var o=(1+Math.sqrt(5))/2,a=[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1];return(i=t.call(this,a,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,r)).type="IcosahedronBufferGeometry",i.parameters={radius:e,detail:r},i}return n}(Do),qo=function(e){c(n,e);var t=f(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).type="DodecahedronGeometry",i.parameters={radius:e,detail:r},i.fromBufferGeometry(new Wo(e,r)),i.mergeVertices(),i}return n}(nn),Wo=function(e){c(n,e);var t=f(n);function n(e,r){var i;Object(p.a)(this,n);var o=(1+Math.sqrt(5))/2,a=1/o,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-o,0,-a,o,0,a,-o,0,a,o,-a,-o,0,-a,o,0,a,-o,0,a,o,0,-o,0,-a,o,0,-a,-o,0,a,o,0,a];return(i=t.call(this,s,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,r)).type="DodecahedronBufferGeometry",i.parameters={radius:e,detail:r},i}return n}(Do),zo=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s){var u;Object(p.a)(this,n),(u=t.call(this)).type="TubeGeometry",u.parameters={path:e,tubularSegments:r,radius:i,radialSegments:o,closed:a},void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed.");var l=new Ho(e,r,i,o,a);return u.tangents=l.tangents,u.normals=l.normals,u.binormals=l.binormals,u.fromBufferGeometry(l),u.mergeVertices(),u}return n}(nn),Ho=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a){var s;Object(p.a)(this,n),(s=t.call(this)).type="TubeBufferGeometry",s.parameters={path:e,tubularSegments:r,radius:i,radialSegments:o,closed:a},r=r||64,i=i||1,o=o||8,a=a||!1;var u=e.computeFrenetFrames(r,a);s.tangents=u.tangents,s.normals=u.normals,s.binormals=u.binormals;var l=new j,c=new j,h=new C,f=new j,d=[],m=[],g=[],A=[];function v(t){f=e.getPointAt(t/r,f);for(var n=u.normals[t],a=u.binormals[t],s=0;s<=o;s++){var h=s/o*Math.PI*2,p=Math.sin(h),g=-Math.cos(h);c.x=g*n.x+p*a.x,c.y=g*n.y+p*a.y,c.z=g*n.z+p*a.z,c.normalize(),m.push(c.x,c.y,c.z),l.x=f.x+i*c.x,l.y=f.y+i*c.y,l.z=f.z+i*c.z,d.push(l.x,l.y,l.z)}}return function(){for(var e=0;e<r;e++)v(e);v(!1===a?r:0),function(){for(var e=0;e<=r;e++)for(var t=0;t<=o;t++)h.x=e/r,h.y=t/o,g.push(h.x,h.y)}(),function(){for(var e=1;e<=r;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),i=(o+1)*e+(t-1),a=(o+1)*e+t,s=(o+1)*(e-1)+t;A.push(n,i,s),A.push(i,a,s)}}()}(),s.setIndex(A),s.setAttribute("position",new bt(d,3)),s.setAttribute("normal",new bt(m,3)),s.setAttribute("uv",new bt(g,2)),s}return Object(m.a)(n,[{key:"toJSON",value:function(){var e=Ot.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}]),n}(Ot),Ko=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s,u){var l;return Object(p.a)(this,n),(l=t.call(this)).type="TorusKnotGeometry",l.parameters={radius:e,tube:r,tubularSegments:i,radialSegments:o,p:a,q:s},void 0!==u&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),l.fromBufferGeometry(new Yo(e,r,i,o,a,s)),l.mergeVertices(),l}return n}(nn),Yo=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s){var u;Object(p.a)(this,n),(u=t.call(this)).type="TorusKnotBufferGeometry",u.parameters={radius:e,tube:r,tubularSegments:i,radialSegments:o,p:a,q:s},e=e||1,r=r||.4,i=Math.floor(i)||64,o=Math.floor(o)||8,a=a||2,s=s||3;for(var l=[],c=[],h=[],f=[],d=new j,m=new j,g=new j,A=new j,v=new j,y=new j,b=new j,_=0;_<=i;++_){var w=_/i*a*Math.PI*2;P(w,a,s,e,g),P(w+.01,a,s,e,A),y.subVectors(A,g),b.addVectors(A,g),v.crossVectors(y,b),b.crossVectors(v,y),v.normalize(),b.normalize();for(var E=0;E<=o;++E){var x=E/o*Math.PI*2,S=-r*Math.cos(x),T=r*Math.sin(x);d.x=g.x+(S*b.x+T*v.x),d.y=g.y+(S*b.y+T*v.y),d.z=g.z+(S*b.z+T*v.z),c.push(d.x,d.y,d.z),m.subVectors(d,g).normalize(),h.push(m.x,m.y,m.z),f.push(_/i),f.push(E/o)}}for(var M=1;M<=i;M++)for(var L=1;L<=o;L++){var C=(o+1)*(M-1)+(L-1),R=(o+1)*M+(L-1),O=(o+1)*M+L,I=(o+1)*(M-1)+L;l.push(C,R,I),l.push(R,O,I)}function P(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}return u.setIndex(l),u.setAttribute("position",new bt(c,3)),u.setAttribute("normal",new bt(h,3)),u.setAttribute("uv",new bt(f,2)),u}return n}(Ot),Qo=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a){var s;return Object(p.a)(this,n),(s=t.call(this)).type="TorusGeometry",s.parameters={radius:e,tube:r,radialSegments:i,tubularSegments:o,arc:a},s.fromBufferGeometry(new Xo(e,r,i,o,a)),s.mergeVertices(),s}return n}(nn),Xo=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a){var s;Object(p.a)(this,n),(s=t.call(this)).type="TorusBufferGeometry",s.parameters={radius:e,tube:r,radialSegments:i,tubularSegments:o,arc:a},e=e||1,r=r||.4,i=Math.floor(i)||8,o=Math.floor(o)||6,a=a||2*Math.PI;for(var u=[],l=[],c=[],h=[],f=new j,d=new j,m=new j,g=0;g<=i;g++)for(var A=0;A<=o;A++){var v=A/o*a,y=g/i*Math.PI*2;d.x=(e+r*Math.cos(y))*Math.cos(v),d.y=(e+r*Math.cos(y))*Math.sin(v),d.z=r*Math.sin(y),l.push(d.x,d.y,d.z),f.x=e*Math.cos(v),f.y=e*Math.sin(v),m.subVectors(d,f).normalize(),c.push(m.x,m.y,m.z),h.push(A/o),h.push(g/i)}for(var b=1;b<=i;b++)for(var _=1;_<=o;_++){var w=(o+1)*b+_-1,E=(o+1)*(b-1)+_-1,x=(o+1)*(b-1)+_,S=(o+1)*b+_;u.push(w,E,S),u.push(E,x,S)}return s.setIndex(u),s.setAttribute("position",new bt(l,3)),s.setAttribute("normal",new bt(c,3)),s.setAttribute("uv",new bt(h,2)),s}return n}(Ot),Jo=function(e,t,n){n=n||2;var r,i,o,a,s,u,l,c=t&&t.length,h=c?t[0]*n:e.length,f=Zo(e,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(e,t,n,r){var i,o,a,s,u,l=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,(u=Zo(e,a,s,r,!1))===u.next&&(u.steiner=!0),l.push(la(u));for(l.sort(oa),i=0;i<l.length;i++)aa(l[i],n),n=$o(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<h;p+=n)(s=e[p])<r&&(r=s),(u=e[p+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return ea(f,d,n,r,i,l),d};function Zo(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=ya(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=ya(o,e[o],e[o+1],a);return a&&da(a,a.next)&&(ba(a),a=a.next),a}function $o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!da(r,r.next)&&0!==fa(r.prev,r,r.next))r=r.next;else{if(ba(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function ea(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=ua(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?na(e,r,i,o):ta(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),ba(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?ea(e=ra($o(e),t,n),t,n,r,i,o,2):2===a&&ia(e,t,n,r,i,o):ea($o(e),t,n,r,i,o,1);break}}}function ta(e){var t=e.prev,n=e,r=e.next;if(fa(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(ca(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&fa(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function na(e,t,n,r){var i=e.prev,o=e,a=e.next;if(fa(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=ua(s,u,t,n,r),f=ua(l,c,t,n,r),d=e.prevZ,p=e.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==e.prev&&d!==e.next&&ca(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&fa(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&ca(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&fa(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&ca(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&fa(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&ca(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&fa(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function ra(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!da(i,o)&&pa(i,r,r.next,o)&&Aa(i,o)&&Aa(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),ba(r),ba(r.next),r=e=o),r=r.next}while(r!==e);return $o(r)}function ia(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&ha(a,s)){var u=va(a,s);return a=$o(a,a.next),u=$o(u,u.next),ea(a,t,n,r,i,o),void ea(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function oa(e,t){return e.x-t.x}function aa(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&ca(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),Aa(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&sa(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(e,t)){var n=va(t,e);$o(t,t.next),$o(n,n.next)}}function sa(e,t){return fa(e.prev,e,t.prev)<0&&fa(t.next,e,e.next)<0}function ua(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function la(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function ca(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function ha(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&pa(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Aa(e,t)&&Aa(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(fa(e.prev,e,t.prev)||fa(e,t.prev,t))||da(e,t)&&fa(e.prev,e,e.next)>0&&fa(t.prev,t,t.next)>0)}function fa(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function da(e,t){return e.x===t.x&&e.y===t.y}function pa(e,t,n,r){var i=ga(fa(e,t,n)),o=ga(fa(e,t,r)),a=ga(fa(n,r,e)),s=ga(fa(n,r,t));return i!==o&&a!==s||(!(0!==i||!ma(e,n,t))||(!(0!==o||!ma(e,r,t))||(!(0!==a||!ma(n,e,r))||!(0!==s||!ma(n,t,r)))))}function ma(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function ga(e){return e>0?1:e<0?-1:0}function Aa(e,t){return fa(e.prev,e,e.next)<0?fa(e,t,e.next)>=0&&fa(e,e.prev,t)>=0:fa(e,t,e.prev)<0||fa(e,e.next,t)<0}function va(e,t){var n=new _a(e.i,e.x,e.y),r=new _a(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ya(e,t,n,r){var i=new _a(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ba(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _a(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var wa={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return wa.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];Ea(e),xa(n,e);var o=e.length;t.forEach(Ea);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,xa(n,t[a]);for(var s=Jo(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}};function Ea(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function xa(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var Sa=function(e){c(n,e);var t=f(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).type="ExtrudeGeometry",i.parameters={shapes:e,options:r},i.fromBufferGeometry(new Ta(e,r)),i.mergeVertices(),i}return Object(m.a)(n,[{key:"toJSON",value:function(){var e=s(a(n.prototype),"toJSON",this).call(this);return La(this.parameters.shapes,this.parameters.options,e)}}]),n}(nn),Ta=function(e){c(n,e);var t=f(n);function n(e,r){var o;Object(p.a)(this,n),(o=t.call(this)).type="ExtrudeBufferGeometry",o.parameters={shapes:e,options:r},e=Array.isArray(e)?e:[e];for(var a=i(o),s=[],u=[],l=0,c=e.length;l<c;l++){h(e[l])}function h(e){var t=[],n=void 0!==r.curveSegments?r.curveSegments:12,i=void 0!==r.steps?r.steps:1,o=void 0!==r.depth?r.depth:100,l=void 0===r.bevelEnabled||r.bevelEnabled,c=void 0!==r.bevelThickness?r.bevelThickness:6,h=void 0!==r.bevelSize?r.bevelSize:c-2,f=void 0!==r.bevelOffset?r.bevelOffset:0,d=void 0!==r.bevelSegments?r.bevelSegments:3,p=r.extrudePath,m=void 0!==r.UVGenerator?r.UVGenerator:Ma;void 0!==r.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),o=r.amount);var g,A,v,y,b,_=!1;p&&(g=p.getSpacedPoints(i),_=!0,l=!1,A=p.computeFrenetFrames(i,!1),v=new j,y=new j,b=new j),l||(d=0,c=0,h=0,f=0);var w=e.extractPoints(n),E=w.shape,x=w.holes;if(!wa.isClockWise(E)){E=E.reverse();for(var S=0,T=x.length;S<T;S++){var M=x[S];wa.isClockWise(M)&&(x[S]=M.reverse())}}for(var L=wa.triangulateShape(E,x),R=E,O=0,I=x.length;O<I;O++){var P=x[O];E=E.concat(P)}function k(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var N=E.length,D=L.length;function F(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=a*a+s*s,h=a*l-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=t.x-s/f,m=t.y+a/f,g=((n.x-l/d-p)*l-(n.y+u/d-m)*u)/(a*l-s*u),A=(r=p+a*g-e.x)*r+(i=m+s*g-e.y)*i;if(A<=2)return new C(r,i);o=Math.sqrt(A/2)}else{var v=!1;a>Number.EPSILON?u>Number.EPSILON&&(v=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(v=!0):Math.sign(s)===Math.sign(l)&&(v=!0),v?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new C(r/o,i/o)}for(var B=[],V=0,G=R.length,U=G-1,q=V+1;V<G;V++,U++,q++)U===G&&(U=0),q===G&&(q=0),B[V]=F(R[V],R[U],R[q]);for(var W,z=[],H=B.concat(),K=0,Y=x.length;K<Y;K++){var Q=x[K];W=[];for(var X=0,J=Q.length,Z=J-1,$=X+1;X<J;X++,Z++,$++)Z===J&&(Z=0),$===J&&($=0),W[X]=F(Q[X],Q[Z],Q[$]);z.push(W),H=H.concat(W)}for(var ee=0;ee<d;ee++){for(var te=ee/d,ne=c*Math.cos(te*Math.PI/2),re=h*Math.sin(te*Math.PI/2)+f,ie=0,oe=R.length;ie<oe;ie++){var ae=k(R[ie],B[ie],re);Pe(ae.x,ae.y,-ne)}for(var se=0,ue=x.length;se<ue;se++){var le=x[se];W=z[se];for(var ce=0,he=le.length;ce<he;ce++){var fe=k(le[ce],W[ce],re);Pe(fe.x,fe.y,-ne)}}}for(var de=h+f,pe=0;pe<N;pe++){var me=l?k(E[pe],H[pe],de):E[pe];_?(y.copy(A.normals[0]).multiplyScalar(me.x),v.copy(A.binormals[0]).multiplyScalar(me.y),b.copy(g[0]).add(y).add(v),Pe(b.x,b.y,b.z)):Pe(me.x,me.y,0)}for(var ge=1;ge<=i;ge++)for(var Ae=0;Ae<N;Ae++){var ve=l?k(E[Ae],H[Ae],de):E[Ae];_?(y.copy(A.normals[ge]).multiplyScalar(ve.x),v.copy(A.binormals[ge]).multiplyScalar(ve.y),b.copy(g[ge]).add(y).add(v),Pe(b.x,b.y,b.z)):Pe(ve.x,ve.y,o/i*ge)}for(var ye=d-1;ye>=0;ye--){for(var be=ye/d,_e=c*Math.cos(be*Math.PI/2),we=h*Math.sin(be*Math.PI/2)+f,Ee=0,xe=R.length;Ee<xe;Ee++){var Se=k(R[Ee],B[Ee],we);Pe(Se.x,Se.y,o+_e)}for(var Te=0,Me=x.length;Te<Me;Te++){var Le=x[Te];W=z[Te];for(var Ce=0,Re=Le.length;Ce<Re;Ce++){var Oe=k(Le[Ce],W[Ce],we);_?Pe(Oe.x,Oe.y+g[i-1].y,g[i-1].x+_e):Pe(Oe.x,Oe.y,o+_e)}}}function Ie(e,t){for(var n=e.length;--n>=0;){var r=n,o=n-1;o<0&&(o=e.length-1);for(var a=0,s=i+2*d;a<s;a++){var u=N*a,l=N*(a+1);Ne(t+r+u,t+o+u,t+o+l,t+r+l)}}}function Pe(e,n,r){t.push(e),t.push(n),t.push(r)}function ke(e,t,n){De(e),De(t),De(n);var r=s.length/3,i=m.generateTopUV(a,s,r-3,r-2,r-1);Fe(i[0]),Fe(i[1]),Fe(i[2])}function Ne(e,t,n,r){De(e),De(t),De(r),De(t),De(n),De(r);var i=s.length/3,o=m.generateSideWallUV(a,s,i-6,i-3,i-2,i-1);Fe(o[0]),Fe(o[1]),Fe(o[3]),Fe(o[1]),Fe(o[2]),Fe(o[3])}function De(e){s.push(t[3*e+0]),s.push(t[3*e+1]),s.push(t[3*e+2])}function Fe(e){u.push(e.x),u.push(e.y)}!function(){var e=s.length/3;if(l){for(var t=0,n=N*t,r=0;r<D;r++){var o=L[r];ke(o[2]+n,o[1]+n,o[0]+n)}n=N*(t=i+2*d);for(var u=0;u<D;u++){var c=L[u];ke(c[0]+n,c[1]+n,c[2]+n)}}else{for(var h=0;h<D;h++){var f=L[h];ke(f[2],f[1],f[0])}for(var p=0;p<D;p++){var m=L[p];ke(m[0]+N*i,m[1]+N*i,m[2]+N*i)}}a.addGroup(e,s.length/3-e,0)}(),function(){var e=s.length/3,t=0;Ie(R,t),t+=R.length;for(var n=0,r=x.length;n<r;n++){var i=x[n];Ie(i,t),t+=i.length}a.addGroup(e,s.length/3-e,1)}()}return o.setAttribute("position",new bt(s,3)),o.setAttribute("uv",new bt(u,2)),o.computeVertexNormals(),o}return Object(m.a)(n,[{key:"toJSON",value:function(){var e=Ot.prototype.toJSON.call(this);return La(this.parameters.shapes,this.parameters.options,e)}}]),n}(Ot),Ma={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new C(o,a),new C(s,u),new C(l,c)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],m=t[3*o],g=t[3*o+1],A=t[3*o+2];return Math.abs(s-c)<.01?[new C(a,1-u),new C(l,1-h),new C(f,1-p),new C(m,1-A)]:[new C(s,1-u),new C(c,1-h),new C(d,1-p),new C(g,1-A)]}};function La(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}var Ca=function(e){c(n,e);var t=f(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).type="TextGeometry",i.parameters={text:e,parameters:r},i.fromBufferGeometry(new Ra(e,r)),i.mergeVertices(),i}return n}(nn),Ra=function(e){c(n,e);var t=f(n);function n(e,r){var i;Object(p.a)(this,n);var a=(r=r||{}).font;if(!a||!a.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),o(i,new nn);var s=a.generateShapes(e,r.size);return r.depth=void 0!==r.height?r.height:50,void 0===r.bevelThickness&&(r.bevelThickness=10),void 0===r.bevelSize&&(r.bevelSize=8),void 0===r.bevelEnabled&&(r.bevelEnabled=!1),(i=t.call(this,s,r)).type="TextBufferGeometry",i}return n}(Ta),Oa=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s,u){var l;return Object(p.a)(this,n),(l=t.call(this)).type="SphereGeometry",l.parameters={radius:e,widthSegments:r,heightSegments:i,phiStart:o,phiLength:a,thetaStart:s,thetaLength:u},l.fromBufferGeometry(new Ia(e,r,i,o,a,s,u)),l.mergeVertices(),l}return n}(nn),Ia=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s,u){var l;Object(p.a)(this,n),(l=t.call(this)).type="SphereBufferGeometry",l.parameters={radius:e,widthSegments:r,heightSegments:i,phiStart:o,phiLength:a,thetaStart:s,thetaLength:u},e=e||1,r=Math.max(3,Math.floor(r)||8),i=Math.max(2,Math.floor(i)||6),o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,s=void 0!==s?s:0,u=void 0!==u?u:Math.PI;for(var c=Math.min(s+u,Math.PI),h=0,f=[],d=new j,m=new j,g=[],A=[],v=[],y=[],b=0;b<=i;b++){var _=[],w=b/i,E=0;0==b&&0==s?E=.5/r:b==i&&c==Math.PI&&(E=-.5/r);for(var x=0;x<=r;x++){var S=x/r;d.x=-e*Math.cos(o+S*a)*Math.sin(s+w*u),d.y=e*Math.cos(s+w*u),d.z=e*Math.sin(o+S*a)*Math.sin(s+w*u),A.push(d.x,d.y,d.z),m.copy(d).normalize(),v.push(m.x,m.y,m.z),y.push(S+E,1-w),_.push(h++)}f.push(_)}for(var T=0;T<i;T++)for(var M=0;M<r;M++){var L=f[T][M+1],C=f[T][M],R=f[T+1][M],O=f[T+1][M+1];(0!==T||s>0)&&g.push(L,C,O),(T!==i-1||c<Math.PI)&&g.push(C,R,O)}return l.setIndex(g),l.setAttribute("position",new bt(A,3)),l.setAttribute("normal",new bt(v,3)),l.setAttribute("uv",new bt(y,2)),l}return n}(Ot),Pa=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s){var u;return Object(p.a)(this,n),(u=t.call(this)).type="RingGeometry",u.parameters={innerRadius:e,outerRadius:r,thetaSegments:i,phiSegments:o,thetaStart:a,thetaLength:s},u.fromBufferGeometry(new ka(e,r,i,o,a,s)),u.mergeVertices(),u}return n}(nn),ka=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s){var u;Object(p.a)(this,n),(u=t.call(this)).type="RingBufferGeometry",u.parameters={innerRadius:e,outerRadius:r,thetaSegments:i,phiSegments:o,thetaStart:a,thetaLength:s},e=e||.5,r=r||1,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI,i=void 0!==i?Math.max(3,i):8;for(var l=[],c=[],h=[],f=[],d=e,m=(r-e)/(o=void 0!==o?Math.max(1,o):1),g=new j,A=new C,v=0;v<=o;v++){for(var y=0;y<=i;y++){var b=a+y/i*s;g.x=d*Math.cos(b),g.y=d*Math.sin(b),c.push(g.x,g.y,g.z),h.push(0,0,1),A.x=(g.x/r+1)/2,A.y=(g.y/r+1)/2,f.push(A.x,A.y)}d+=m}for(var _=0;_<o;_++)for(var w=_*(i+1),E=0;E<i;E++){var x=E+w,S=x,T=x+i+1,M=x+i+2,L=x+1;l.push(S,T,L),l.push(T,M,L)}return u.setIndex(l),u.setAttribute("position",new bt(c,3)),u.setAttribute("normal",new bt(h,3)),u.setAttribute("uv",new bt(f,2)),u}return n}(Ot),Na=function(e){c(n,e);var t=f(n);function n(e,r,i,o){var a;return Object(p.a)(this,n),(a=t.call(this)).type="LatheGeometry",a.parameters={points:e,segments:r,phiStart:i,phiLength:o},a.fromBufferGeometry(new Da(e,r,i,o)),a.mergeVertices(),a}return n}(nn),Da=function(e){c(n,e);var t=f(n);function n(e,r,i,o){var a;Object(p.a)(this,n),(a=t.call(this)).type="LatheBufferGeometry",a.parameters={points:e,segments:r,phiStart:i,phiLength:o},r=Math.floor(r)||12,i=i||0,o=o||2*Math.PI,o=L.clamp(o,0,2*Math.PI);for(var s=[],u=[],l=[],c=1/r,h=new j,f=new C,d=0;d<=r;d++)for(var m=i+d*c*o,g=Math.sin(m),A=Math.cos(m),v=0;v<=e.length-1;v++)h.x=e[v].x*g,h.y=e[v].y,h.z=e[v].x*A,u.push(h.x,h.y,h.z),f.x=d/r,f.y=v/(e.length-1),l.push(f.x,f.y);for(var y=0;y<r;y++)for(var b=0;b<e.length-1;b++){var _=b+y*e.length,w=_,E=_+e.length,x=_+e.length+1,S=_+1;s.push(w,E,S),s.push(E,x,S)}if(a.setIndex(s),a.setAttribute("position",new bt(u,3)),a.setAttribute("uv",new bt(l,2)),a.computeVertexNormals(),o===2*Math.PI)for(var T=a.attributes.normal.array,M=new j,R=new j,O=new j,I=r*e.length*3,P=0,k=0;P<e.length;P++,k+=3)M.x=T[k+0],M.y=T[k+1],M.z=T[k+2],R.x=T[I+k+0],R.y=T[I+k+1],R.z=T[I+k+2],O.addVectors(M,R).normalize(),T[k+0]=T[I+k+0]=O.x,T[k+1]=T[I+k+1]=O.y,T[k+2]=T[I+k+2]=O.z;return a}return n}(Ot),Fa=function(e){c(n,e);var t=f(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).type="ShapeGeometry","object"===typeof r&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),r=r.curveSegments),i.parameters={shapes:e,curveSegments:r},i.fromBufferGeometry(new ja(e,r)),i.mergeVertices(),i}return Object(m.a)(n,[{key:"toJSON",value:function(){var e=nn.prototype.toJSON.call(this);return Ba(this.parameters.shapes,e)}}]),n}(nn),ja=function(e){c(n,e);var t=f(n);function n(e,r){var i;Object(p.a)(this,n),(i=t.call(this)).type="ShapeBufferGeometry",i.parameters={shapes:e,curveSegments:r},r=r||12;var o=[],a=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(e))f(e);else for(var h=0;h<e.length;h++)f(e[h]),i.addGroup(l,c,h),l+=c,c=0;function f(e){var t=a.length/3,n=e.extractPoints(r),i=n.shape,l=n.holes;!1===wa.isClockWise(i)&&(i=i.reverse());for(var h=0,f=l.length;h<f;h++){var d=l[h];!0===wa.isClockWise(d)&&(l[h]=d.reverse())}for(var p=wa.triangulateShape(i,l),m=0,g=l.length;m<g;m++){var A=l[m];i=i.concat(A)}for(var v=0,y=i.length;v<y;v++){var b=i[v];a.push(b.x,b.y,0),s.push(0,0,1),u.push(b.x,b.y)}for(var _=0,w=p.length;_<w;_++){var E=p[_],x=E[0]+t,S=E[1]+t,T=E[2]+t;o.push(x,S,T),c+=3}}return i.setIndex(o),i.setAttribute("position",new bt(a,3)),i.setAttribute("normal",new bt(s,3)),i.setAttribute("uv",new bt(u,2)),i}return Object(m.a)(n,[{key:"toJSON",value:function(){var e=Ot.prototype.toJSON.call(this);return Ba(this.parameters.shapes,e)}}]),n}(Ot);function Ba(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}var Va=function(e){c(n,e);var t=f(n);function n(e,r){var i;Object(p.a)(this,n),(i=t.call(this)).type="EdgesGeometry",i.parameters={thresholdAngle:r},r=void 0!==r?r:1;var o,a,s,u,l=[],c=Math.cos(L.DEG2RAD*r),h=[0,0],f={},d=["a","b","c"];e.isBufferGeometry?(u=new nn).fromBufferGeometry(e):u=e.clone(),u.mergeVertices(),u.computeFaceNormals();for(var m=u.vertices,g=u.faces,A=0,v=g.length;A<v;A++)for(var y=g[A],b=0;b<3;b++)o=y[d[b]],a=y[d[(b+1)%3]],h[0]=Math.min(o,a),h[1]=Math.max(o,a),void 0===f[s=h[0]+","+h[1]]?f[s]={index1:h[0],index2:h[1],face1:A,face2:void 0}:f[s].face2=A;for(s in f){var _=f[s];if(void 0===_.face2||g[_.face1].normal.dot(g[_.face2].normal)<=c){var w=m[_.index1];l.push(w.x,w.y,w.z),w=m[_.index2],l.push(w.x,w.y,w.z)}}return i.setAttribute("position",new bt(l,3)),i}return n}(Ot),Ga=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s,u,l){var c;return Object(p.a)(this,n),(c=t.call(this)).type="CylinderGeometry",c.parameters={radiusTop:e,radiusBottom:r,height:i,radialSegments:o,heightSegments:a,openEnded:s,thetaStart:u,thetaLength:l},c.fromBufferGeometry(new Ua(e,r,i,o,a,s,u,l)),c.mergeVertices(),c}return n}(nn),Ua=function(e){c(n,e);var t=f(n);function n(e,r,o,a,s,u,l,c){var h;Object(p.a)(this,n),(h=t.call(this)).type="CylinderBufferGeometry",h.parameters={radiusTop:e,radiusBottom:r,height:o,radialSegments:a,heightSegments:s,openEnded:u,thetaStart:l,thetaLength:c};var f=i(h);e=void 0!==e?e:1,r=void 0!==r?r:1,o=o||1,a=Math.floor(a)||8,s=Math.floor(s)||1,u=void 0!==u&&u,l=void 0!==l?l:0,c=void 0!==c?c:2*Math.PI;var d=[],m=[],g=[],A=[],v=0,y=[],b=o/2,_=0;function w(t){for(var n=v,i=new C,o=new j,s=0,u=!0===t?e:r,h=!0===t?1:-1,p=1;p<=a;p++)m.push(0,b*h,0),g.push(0,h,0),A.push(.5,.5),v++;for(var y=v,w=0;w<=a;w++){var E=w/a*c+l,x=Math.cos(E),S=Math.sin(E);o.x=u*S,o.y=b*h,o.z=u*x,m.push(o.x,o.y,o.z),g.push(0,h,0),i.x=.5*x+.5,i.y=.5*S*h+.5,A.push(i.x,i.y),v++}for(var T=0;T<a;T++){var M=n+T,L=y+T;!0===t?d.push(L,L+1,M):d.push(L+1,L,M),s+=3}f.addGroup(_,s,!0===t?1:2),_+=s}return function(){for(var t=new j,n=new j,i=0,u=(r-e)/o,h=0;h<=s;h++){for(var p=[],w=h/s,E=w*(r-e)+e,x=0;x<=a;x++){var S=x/a,T=S*c+l,M=Math.sin(T),L=Math.cos(T);n.x=E*M,n.y=-w*o+b,n.z=E*L,m.push(n.x,n.y,n.z),t.set(M,u,L).normalize(),g.push(t.x,t.y,t.z),A.push(S,1-w),p.push(v++)}y.push(p)}for(var C=0;C<a;C++)for(var R=0;R<s;R++){var O=y[R][C],I=y[R+1][C],P=y[R+1][C+1],k=y[R][C+1];d.push(O,I,k),d.push(I,P,k),i+=6}f.addGroup(_,i,0),_+=i}(),!1===u&&(e>0&&w(!0),r>0&&w(!1)),h.setIndex(d),h.setAttribute("position",new bt(m,3)),h.setAttribute("normal",new bt(g,3)),h.setAttribute("uv",new bt(A,2)),h}return n}(Ot),qa=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s,u){var l;return Object(p.a)(this,n),(l=t.call(this,0,e,r,i,o,a,s,u)).type="ConeGeometry",l.parameters={radius:e,height:r,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:u},l}return n}(Ga),Wa=function(e){c(n,e);var t=f(n);function n(e,r,i,o,a,s,u){var l;return Object(p.a)(this,n),(l=t.call(this,0,e,r,i,o,a,s,u)).type="ConeBufferGeometry",l.parameters={radius:e,height:r,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:u},l}return n}(Ua),za=function(e){c(n,e);var t=f(n);function n(e,r,i,o){var a;return Object(p.a)(this,n),(a=t.call(this)).type="CircleGeometry",a.parameters={radius:e,segments:r,thetaStart:i,thetaLength:o},a.fromBufferGeometry(new Ha(e,r,i,o)),a.mergeVertices(),a}return n}(nn),Ha=function(e){c(n,e);var t=f(n);function n(e,r,i,o){var a;Object(p.a)(this,n),(a=t.call(this)).type="CircleBufferGeometry",a.parameters={radius:e,segments:r,thetaStart:i,thetaLength:o},e=e||1,r=void 0!==r?Math.max(3,r):8,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI;var s=[],u=[],l=[],c=[],h=new j,f=new C;u.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(var d=0,m=3;d<=r;d++,m+=3){var g=i+d/r*o;h.x=e*Math.cos(g),h.y=e*Math.sin(g),u.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(u[m]/e+1)/2,f.y=(u[m+1]/e+1)/2,c.push(f.x,f.y)}for(var A=1;A<=r;A++)s.push(A,A+1,0);return a.setIndex(s),a.setAttribute("position",new bt(u,3)),a.setAttribute("normal",new bt(l,3)),a.setAttribute("uv",new bt(c,2)),a}return n}(Ot),Ka=Object.freeze({__proto__:null,WireframeGeometry:Io,ParametricGeometry:Po,ParametricBufferGeometry:ko,TetrahedronGeometry:Fo,TetrahedronBufferGeometry:jo,OctahedronGeometry:Bo,OctahedronBufferGeometry:Vo,IcosahedronGeometry:Go,IcosahedronBufferGeometry:Uo,DodecahedronGeometry:qo,DodecahedronBufferGeometry:Wo,PolyhedronGeometry:No,PolyhedronBufferGeometry:Do,TubeGeometry:zo,TubeBufferGeometry:Ho,TorusKnotGeometry:Ko,TorusKnotBufferGeometry:Yo,TorusGeometry:Qo,TorusBufferGeometry:Xo,TextGeometry:Ca,TextBufferGeometry:Ra,SphereGeometry:Oa,SphereBufferGeometry:Ia,RingGeometry:Pa,RingBufferGeometry:ka,PlaneGeometry:bn,PlaneBufferGeometry:_n,LatheGeometry:Na,LatheBufferGeometry:Da,ShapeGeometry:Fa,ShapeBufferGeometry:ja,ExtrudeGeometry:Sa,ExtrudeBufferGeometry:Ta,EdgesGeometry:Va,ConeGeometry:qa,ConeBufferGeometry:Wa,CylinderGeometry:Ga,CylinderBufferGeometry:Ua,CircleGeometry:za,CircleBufferGeometry:Ha,BoxGeometry:rn,BoxBufferGeometry:on});function Ya(e){ut.call(this),this.type="ShadowMaterial",this.color=new ot(0),this.transparent=!0,this.setValues(e)}function Qa(e){ln.call(this,e),this.type="RawShaderMaterial"}function Xa(e){ut.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ot(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new C(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function Ja(e){Xa.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new C(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function Za(e){ut.call(this),this.type="MeshPhongMaterial",this.color=new ot(16777215),this.specular=new ot(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new C(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function $a(e){ut.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ot(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new C(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function es(e){ut.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new C(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ts(e){ut.call(this),this.type="MeshLambertMaterial",this.color=new ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ns(e){ut.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ot(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new C(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function rs(e){lo.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Ya.prototype=Object.create(ut.prototype),Ya.prototype.constructor=Ya,Ya.prototype.isShadowMaterial=!0,Ya.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.color.copy(e.color),this},Qa.prototype=Object.create(ln.prototype),Qa.prototype.constructor=Qa,Qa.prototype.isRawShaderMaterial=!0,Xa.prototype=Object.create(ut.prototype),Xa.prototype.constructor=Xa,Xa.prototype.isMeshStandardMaterial=!0,Xa.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},Ja.prototype=Object.create(Xa.prototype),Ja.prototype.constructor=Ja,Ja.prototype.isMeshPhysicalMaterial=!0,Ja.prototype.copy=function(e){return Xa.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new ot).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},Za.prototype=Object.create(ut.prototype),Za.prototype.constructor=Za,Za.prototype.isMeshPhongMaterial=!0,Za.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},$a.prototype=Object.create(ut.prototype),$a.prototype.constructor=$a,$a.prototype.isMeshToonMaterial=!0,$a.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},es.prototype=Object.create(ut.prototype),es.prototype.constructor=es,es.prototype.isMeshNormalMaterial=!0,es.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ts.prototype=Object.create(ut.prototype),ts.prototype.constructor=ts,ts.prototype.isMeshLambertMaterial=!0,ts.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ns.prototype=Object.create(ut.prototype),ns.prototype.constructor=ns,ns.prototype.isMeshMatcapMaterial=!0,ns.prototype.copy=function(e){return ut.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},rs.prototype=Object.create(lo.prototype),rs.prototype.constructor=rs,rs.prototype.isLineDashedMaterial=!0,rs.prototype.copy=function(e){return lo.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var is=Object.freeze({__proto__:null,ShadowMaterial:Ya,SpriteMaterial:Ni,RawShaderMaterial:Qa,ShaderMaterial:ln,PointsMaterial:_o,MeshPhysicalMaterial:Ja,MeshStandardMaterial:Xa,MeshPhongMaterial:Za,MeshToonMaterial:$a,MeshNormalMaterial:es,MeshLambertMaterial:ts,MeshDepthMaterial:mi,MeshDistanceMaterial:gi,MeshBasicMaterial:lt,MeshMatcapMaterial:ns,LineDashedMaterial:rs,LineBasicMaterial:lo,Material:ut}),os={arraySlice:function(e,t,n){return os.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}},subclip:function(e,t,n,r,i){i=i||30;var o=e.clone();o.name=t;for(var a=[],s=0;s<o.tracks.length;++s){for(var u=o.tracks[s],l=u.getValueSize(),c=[],h=[],f=0;f<u.times.length;++f){var d=u.times[f]*i;if(!(d<n||d>=r)){c.push(u.times[f]);for(var p=0;p<l;++p)h.push(u.values[f*l+p])}}0!==c.length&&(u.times=os.convertArray(c,u.times.constructor),u.values=os.convertArray(h,u.values.constructor),a.push(u))}o.tracks=a;for(var m=1/0,g=0;g<o.tracks.length;++g)m>o.tracks[g].times[0]&&(m=o.tracks[g].times[0]);for(var A=0;A<o.tracks.length;++A)o.tracks[A].shift(-1*m);return o.resetDuration(),o},makeClipAdditive:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=e),(void 0===r||r<=0)&&(r=30);for(var i=e.tracks.length,o=t/r,a=function(t){var r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var a=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===a)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var l=0,c=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var h=r.times.length-1,f=void 0;if(o<=r.times[0]){var d=s,p=u-s;f=os.arraySlice(r.values,d,p)}else if(o>=r.times[h]){var m=h*u+s,g=m+u-s;f=os.arraySlice(r.values,m,g)}else{var A=r.createInterpolant(),v=s,y=u-s;A.evaluate(o),f=os.arraySlice(A.resultBuffer,v,y)}"quaternion"===i&&(new F).fromArray(f).normalize().conjugate().toArray(f);for(var b=a.times.length,_=0;_<b;++_){var w=_*c+l;if("quaternion"===i)F.multiplyQuaternionsFlat(a.values,w,f,0,a.values,w);else for(var E=c-2*l,x=0;x<E;++x)a.values[w+x]-=f[x]}},s=0;s<i;++s)a(s);return e.blendMode=2501,e}};function as(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function ss(e,t,n,r){as.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function us(e,t,n,r){as.call(this,e,t,n,r)}function ls(e,t,n,r){as.call(this,e,t,n,r)}function cs(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=os.convertArray(t,this.TimeBufferType),this.values=os.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function hs(e,t,n){cs.call(this,e,t,n)}function fs(e,t,n,r){cs.call(this,e,t,n,r)}function ds(e,t,n,r){cs.call(this,e,t,n,r)}function ps(e,t,n,r){as.call(this,e,t,n,r)}function ms(e,t,n,r){cs.call(this,e,t,n,r)}function gs(e,t,n,r){cs.call(this,e,t,n,r)}function As(e,t,n,r){cs.call(this,e,t,n,r)}function vs(e,t,n,r){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==r?r:2500,this.uuid=L.generateUUID(),this.duration<0&&this.resetDuration()}function ys(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ds;case"vector":case"vector2":case"vector3":case"vector4":return As;case"color":return fs;case"quaternion":return ms;case"bool":case"boolean":return hs;case"string":return gs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];os.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(as.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(as.prototype,{beforeStart_:as.prototype.copySampleValue_,afterEnd_:as.prototype.copySampleValue_}),ss.prototype=Object.assign(Object.create(as.prototype),{constructor:ss,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,g=-h*m+2*h*p-h*d,A=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,v=(-1-f)*m+(1.5+f)*p+.5*d,y=f*m-f*p,b=0;b!==a;++b)i[b]=g*o[l+b]+A*o[u+b]+v*o[s+b]+y*o[c+b];return i}}),us.prototype=Object.assign(Object.create(as.prototype),{constructor:us,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(r-t),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}),ls.prototype=Object.assign(Object.create(as.prototype),{constructor:ls,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(cs,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:os.convertArray(e.times,Array),values:os.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(cs.prototype,{constructor:cs,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new ls(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new us(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new ss(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=os.arraySlice(n,i,o),this.values=os.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&os.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e},optimize:function(){for(var e=os.arraySlice(this.times),t=os.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1,o=1,a=1;a<i;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=t[l+f];if(d!==t[c+f]||d!==t[h+f]){s=!0;break}}if(s){if(a!==o){e[o]=e[a];for(var p=a*n,m=o*n,g=0;g!==n;++g)t[m+g]=t[p+g]}++o}}if(i>0){e[o]=e[i];for(var A=i*n,v=o*n,y=0;y!==n;++y)t[v+y]=t[A+y];++o}return o!==e.length?(this.times=os.arraySlice(e,0,o),this.values=os.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this},clone:function(){var e=os.arraySlice(this.times,0),t=os.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),hs.prototype=Object.assign(Object.create(cs.prototype),{constructor:hs,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),fs.prototype=Object.assign(Object.create(cs.prototype),{constructor:fs,ValueTypeName:"color"}),ds.prototype=Object.assign(Object.create(cs.prototype),{constructor:ds,ValueTypeName:"number"}),ps.prototype=Object.assign(Object.create(as.prototype),{constructor:ps,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t),u=e*a,l=u+a;u!==l;u+=4)F.slerpFlat(i,0,o,u-a,o,u,s);return i}}),ms.prototype=Object.assign(Object.create(cs.prototype),{constructor:ms,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new ps(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),gs.prototype=Object.assign(Object.create(cs.prototype),{constructor:gs,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),As.prototype=Object.assign(Object.create(cs.prototype),{constructor:As,ValueTypeName:"vector"}),Object.assign(vs,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(ys(n[i]).scale(r));return new vs(e.name,e.duration,t,e.blendMode)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,o=n.length;i!==o;++i)t.push(cs.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=os.getKeyframeOrder(s);s=os.sortedArray(s,1,l),u=os.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new ds(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new vs(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var h=[];for(var f in r)h.push(vs.CreateFromMorphTargetSequence(f,r[f],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];os.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode,s=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},f=void 0;for(f=0;f<c.length;f++)if(c[f].morphTargets)for(var d=0;d<c[f].morphTargets.length;d++)h[c[f].morphTargets[d]]=-1;for(var p in h){for(var m=[],g=[],A=0;A!==c[f].morphTargets.length;++A){var v=c[f];m.push(v.time),g.push(v.morphTarget===p?1:0)}r.push(new ds(".morphTargetInfluence["+p+"]",m,g))}s=h.length*(o||1)}else{var y=".bones["+t[l].name+"]";n(As,y+".position",c,"pos",r),n(ms,y+".quaternion",c,"rot",r),n(As,y+".scale",c,"scl",r)}}return 0===r.length?null:new vs(i,s,r,a)}}),Object.assign(vs.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new vs(this.name,this.duration,e,this.blendMode)}});var bs={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function _s(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var r=u[t],i=u[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}}var ws=new _s;function Es(e){this.manager=void 0!==e?e:ws,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Es.prototype,{load:function(){},loadAsync:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});var xs={};function Ss(e){Es.call(this,e)}function Ts(e){Es.call(this,e)}function Ms(e){Es.call(this,e)}function Ls(e){Es.call(this,e)}function Cs(e){Es.call(this,e)}function Rs(e){Es.call(this,e)}function Os(e){Es.call(this,e)}function Is(){this.type="Curve",this.arcLengthDivisions=200}function Ps(e,t,n,r,i,o,a,s){Is.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function ks(e,t,n,r,i,o){Ps.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Ns(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,u*=a,l*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Ss.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ss,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=bs.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===xs[e]){var a,s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],l=!!s[2],c=s[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);h="blob"===f?new Blob([d.buffer],{type:u}):d.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(c,u);break;case"json":h=JSON.parse(c);break;default:h=c}setTimeout((function(){t&&t(h),i.manager.itemEnd(e)}),0)}catch(A){setTimeout((function(){r&&r(A),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{for(var g in xs[e]=[],xs[e].push({onLoad:t,onProgress:n,onError:r}),(a=new XMLHttpRequest).open("GET",e,!0),a.addEventListener("load",(function(t){var n=this.response,r=xs[e];if(delete xs[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),bs.add(e,n);for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(var u=0,l=r.length;u<l;u++){var c=r[u];c.onError&&c.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),a.addEventListener("progress",(function(t){for(var n=xs[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}}),!1),a.addEventListener("error",(function(t){var n=xs[e];delete xs[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),a.addEventListener("abort",(function(t){var n=xs[e];delete xs[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)a.setRequestHeader(g,this.requestHeader[g]);a.send(null)}return i.manager.itemStart(e),a}xs[e].push({onLoad:t,onProgress:n,onError:r})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Ts.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ts,load:function(e,t,n,r){var i=this,o=new Ss(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=vs.parse(e[n]);t.push(r)}return t}}),Ms.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ms,load:function(e,t,n,r){var i=this,o=[],a=new Co;a.image=o;var s=new Ss(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader);var u=0;function l(l){s.load(e[l],(function(e){var n=i.parse(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=_),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(var c=0,h=e.length;c<h;++c)l(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=_),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}),Ls.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ls,load:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=bs.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),bs.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}),Cs.prototype=Object.assign(Object.create(Es.prototype),{constructor:Cs,load:function(e,t,n,r){var i=new Bn,o=new Ls(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}),Rs.prototype=Object.assign(Object.create(Es.prototype),{constructor:Rs,load:function(e,t,n,r){var i=this,o=new pn,a=new Ss(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:1001,o.wrapT=void 0!==n.wrapT?n.wrapT:1001,o.magFilter=void 0!==n.magFilter?n.magFilter:_,o.minFilter=void 0!==n.minFilter?n.minFilter:_,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=1008),1===n.mipmapCount&&(o.minFilter=_),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}),Os.prototype=Object.assign(Object.create(Es.prototype),{constructor:Os,load:function(e,t,n,r){var i=new P,o=new Ls(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?1022:w,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}),Object.assign(Is.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var o=1;o<=e;o++)i+=(t=this.getPoint(o/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)},getTangent:function(e,t){var n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=t||(i.isVector2?new C:new j);return a.copy(o).sub(i).normalize(),a},getTangentAt:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){for(var n=new j,r=[],i=[],o=[],a=new j,s=new fe,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new j),r[u].normalize()}i[0]=new j,o[0]=new j;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),d<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();var m=Math.acos(L.clamp(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(a,m))}o[p].crossVectors(r[p],i[p])}if(!0===t){var g=Math.acos(L.clamp(i[0].dot(i[e]),-1,1));g/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(g=-g);for(var A=1;A<=e;A++)i[A].applyMatrix4(s.makeRotationAxis(r[A],g*A)),o[A].crossVectors(r[A],i[A])}return{tangents:r,normals:i,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Ps.prototype=Object.create(Is.prototype),Ps.prototype.constructor=Ps,Ps.prototype.isEllipseCurve=!0,Ps.prototype.getPoint=function(e,t){for(var n=t||new C,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)},Ps.prototype.copy=function(e){return Is.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ps.prototype.toJSON=function(){var e=Is.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Ps.prototype.fromJSON=function(e){return Is.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ks.prototype=Object.create(Ps.prototype),ks.prototype.constructor=ks,ks.prototype.isArcCurve=!0;var Ds=new j,Fs=new Ns,js=new Ns,Bs=new Ns;function Vs(e,t,n,r){Is.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=void 0!==r?r:.5}function Gs(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Us(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function qs(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Ws(e,t,n,r){Is.call(this),this.type="CubicBezierCurve",this.v0=e||new C,this.v1=t||new C,this.v2=n||new C,this.v3=r||new C}function zs(e,t,n,r){Is.call(this),this.type="CubicBezierCurve3",this.v0=e||new j,this.v1=t||new j,this.v2=n||new j,this.v3=r||new j}function Hs(e,t){Is.call(this),this.type="LineCurve",this.v1=e||new C,this.v2=t||new C}function Ks(e,t){Is.call(this),this.type="LineCurve3",this.v1=e||new j,this.v2=t||new j}function Ys(e,t,n){Is.call(this),this.type="QuadraticBezierCurve",this.v0=e||new C,this.v1=t||new C,this.v2=n||new C}function Qs(e,t,n){Is.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new j,this.v1=t||new j,this.v2=n||new j}function Xs(e){Is.call(this),this.type="SplineCurve",this.points=e||[]}Vs.prototype=Object.create(Is.prototype),Vs.prototype.constructor=Vs,Vs.prototype.isCatmullRomCurve3=!0,Vs.prototype.getPoint=function(e,t){var n,r,i=t||new j,o=this.points,a=o.length,s=(a-(this.closed?0:1))*e,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/a)+1)*a:0===l&&u===a-1&&(u=a-2,l=1),this.closed||u>0?n=o[(u-1)%a]:(Ds.subVectors(o[0],o[1]).add(o[0]),n=Ds);var c=o[u%a],h=o[(u+1)%a];if(this.closed||u+2<a?r=o[(u+2)%a]:(Ds.subVectors(o[a-1],o[a-2]).add(o[a-1]),r=Ds),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(c),f),p=Math.pow(c.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(r),f);p<1e-4&&(p=1),d<1e-4&&(d=p),m<1e-4&&(m=p),Fs.initNonuniformCatmullRom(n.x,c.x,h.x,r.x,d,p,m),js.initNonuniformCatmullRom(n.y,c.y,h.y,r.y,d,p,m),Bs.initNonuniformCatmullRom(n.z,c.z,h.z,r.z,d,p,m)}else"catmullrom"===this.curveType&&(Fs.initCatmullRom(n.x,c.x,h.x,r.x,this.tension),js.initCatmullRom(n.y,c.y,h.y,r.y,this.tension),Bs.initCatmullRom(n.z,c.z,h.z,r.z,this.tension));return i.set(Fs.calc(l),js.calc(l),Bs.calc(l)),i},Vs.prototype.copy=function(e){Is.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Vs.prototype.toJSON=function(){var e=Is.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Vs.prototype.fromJSON=function(e){Is.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new j).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ws.prototype=Object.create(Is.prototype),Ws.prototype.constructor=Ws,Ws.prototype.isCubicBezierCurve=!0,Ws.prototype.getPoint=function(e,t){var n=t||new C,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(qs(e,r.x,i.x,o.x,a.x),qs(e,r.y,i.y,o.y,a.y)),n},Ws.prototype.copy=function(e){return Is.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ws.prototype.toJSON=function(){var e=Is.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ws.prototype.fromJSON=function(e){return Is.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},zs.prototype=Object.create(Is.prototype),zs.prototype.constructor=zs,zs.prototype.isCubicBezierCurve3=!0,zs.prototype.getPoint=function(e,t){var n=t||new j,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(qs(e,r.x,i.x,o.x,a.x),qs(e,r.y,i.y,o.y,a.y),qs(e,r.z,i.z,o.z,a.z)),n},zs.prototype.copy=function(e){return Is.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},zs.prototype.toJSON=function(){var e=Is.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},zs.prototype.fromJSON=function(e){return Is.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Hs.prototype=Object.create(Is.prototype),Hs.prototype.constructor=Hs,Hs.prototype.isLineCurve=!0,Hs.prototype.getPoint=function(e,t){var n=t||new C;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Hs.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Hs.prototype.getTangent=function(e,t){var n=t||new C;return n.copy(this.v2).sub(this.v1).normalize(),n},Hs.prototype.copy=function(e){return Is.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Hs.prototype.toJSON=function(){var e=Is.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Hs.prototype.fromJSON=function(e){return Is.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ks.prototype=Object.create(Is.prototype),Ks.prototype.constructor=Ks,Ks.prototype.isLineCurve3=!0,Ks.prototype.getPoint=function(e,t){var n=t||new j;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ks.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ks.prototype.copy=function(e){return Is.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ks.prototype.toJSON=function(){var e=Is.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ks.prototype.fromJSON=function(e){return Is.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ys.prototype=Object.create(Is.prototype),Ys.prototype.constructor=Ys,Ys.prototype.isQuadraticBezierCurve=!0,Ys.prototype.getPoint=function(e,t){var n=t||new C,r=this.v0,i=this.v1,o=this.v2;return n.set(Us(e,r.x,i.x,o.x),Us(e,r.y,i.y,o.y)),n},Ys.prototype.copy=function(e){return Is.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ys.prototype.toJSON=function(){var e=Is.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ys.prototype.fromJSON=function(e){return Is.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Qs.prototype=Object.create(Is.prototype),Qs.prototype.constructor=Qs,Qs.prototype.isQuadraticBezierCurve3=!0,Qs.prototype.getPoint=function(e,t){var n=t||new j,r=this.v0,i=this.v1,o=this.v2;return n.set(Us(e,r.x,i.x,o.x),Us(e,r.y,i.y,o.y),Us(e,r.z,i.z,o.z)),n},Qs.prototype.copy=function(e){return Is.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Qs.prototype.toJSON=function(){var e=Is.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Qs.prototype.fromJSON=function(e){return Is.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Xs.prototype=Object.create(Is.prototype),Xs.prototype.constructor=Xs,Xs.prototype.isSplineCurve=!0,Xs.prototype.getPoint=function(e,t){var n=t||new C,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Gs(a,s.x,u.x,l.x,c.x),Gs(a,s.y,u.y,l.y,c.y)),n},Xs.prototype.copy=function(e){Is.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Xs.prototype.toJSON=function(){var e=Is.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Xs.prototype.fromJSON=function(e){Is.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new C).fromArray(r))}return this};var Js=Object.freeze({__proto__:null,ArcCurve:ks,CatmullRomCurve3:Vs,CubicBezierCurve:Ws,CubicBezierCurve3:zs,EllipseCurve:Ps,LineCurve:Hs,LineCurve3:Ks,QuadraticBezierCurve:Ys,QuadraticBezierCurve3:Qs,SplineCurve:Xs});function Zs(){Is.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function $s(e){Zs.call(this),this.type="Path",this.currentPoint=new C,e&&this.setFromPoints(e)}function eu(e){$s.call(this,e),this.uuid=L.generateUUID(),this.type="Shape",this.holes=[]}function tu(e,t){Fe.call(this),this.type="Light",this.color=new ot(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function nu(e,t,n){tu.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Fe.DefaultUp),this.updateMatrix(),this.groundColor=new ot(t)}function ru(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new C(512,512),this.map=null,this.mapPass=null,this.matrix=new fe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new An,this._frameExtents=new C(1,1),this._viewportCount=1,this._viewports=[new k(0,0,1,1)]}function iu(){ru.call(this,new hn(50,1,.5,500))}function ou(e,t,n,r,i,o){tu.call(this,e,t),this.type="SpotLight",this.position.copy(Fe.DefaultUp),this.updateMatrix(),this.target=new Fe,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new iu}function au(){ru.call(this,new hn(90,1,.5,500)),this._frameExtents=new C(4,2),this._viewportCount=6,this._viewports=[new k(2,1,1,1),new k(0,1,1,1),new k(3,1,1,1),new k(1,1,1,1),new k(3,0,1,1),new k(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}function su(e,t,n,r){tu.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new au}function uu(e,t,n,r,i,o){cn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function lu(){ru.call(this,new uu(-5,5,5,-5,.5,500))}function cu(e,t){tu.call(this,e,t),this.type="DirectionalLight",this.position.copy(Fe.DefaultUp),this.updateMatrix(),this.target=new Fe,this.shadow=new lu}function hu(e,t){tu.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function fu(e,t,n,r){tu.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}Zs.prototype=Object.assign(Object.create(Is.prototype),{constructor:Zs,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Hs(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),u=0;u<s.length;u++){var l=s[u];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Is.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Is.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Is.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Js[r.type]).fromJSON(r))}return this}}),$s.prototype=Object.assign(Object.create(Zs.prototype),{constructor:$s,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new Hs(this.currentPoint.clone(),new C(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){var i=new Ys(this.currentPoint.clone(),new C(e,t),new C(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,o){var a=new Ws(this.currentPoint.clone(),new C(e,t),new C(n,r),new C(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(e){var t=new Xs([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this},absarc:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this},ellipse:function(e,t,n,r,i,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,o,a,s),this},absellipse:function(e,t,n,r,i,o,a,s){var u=new Ps(e,t,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return Zs.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Zs.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Zs.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),eu.prototype=Object.assign(Object.create($s.prototype),{constructor:eu,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){$s.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=$s.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){$s.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new $s).fromJSON(r))}return this}}),tu.prototype=Object.assign(Object.create(Fe.prototype),{constructor:tu,isLight:!0,copy:function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Fe.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),nu.prototype=Object.assign(Object.create(tu.prototype),{constructor:nu,isHemisphereLight:!0,copy:function(e){return tu.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(ru.prototype,{_projScreenMatrix:new fe,_lightPositionWorld:new j,_lookTarget:new j,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),iu.prototype=Object.assign(Object.create(ru.prototype),{constructor:iu,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*L.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),ru.prototype.updateMatrices.call(this,e)}}),ou.prototype=Object.assign(Object.create(tu.prototype),{constructor:ou,isSpotLight:!0,copy:function(e){return tu.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),au.prototype=Object.assign(Object.create(ru.prototype),{constructor:au,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),su.prototype=Object.assign(Object.create(tu.prototype),{constructor:su,isPointLight:!0,copy:function(e){return tu.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),uu.prototype=Object.assign(Object.create(cn.prototype),{constructor:uu,isOrthographicCamera:!0,copy:function(e,t){return cn.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(i+=u*this.view.offsetX)+u*this.view.width,s=(a-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Fe.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),lu.prototype=Object.assign(Object.create(ru.prototype),{constructor:lu,isDirectionalLightShadow:!0,updateMatrices:function(e){ru.prototype.updateMatrices.call(this,e)}}),cu.prototype=Object.assign(Object.create(tu.prototype),{constructor:cu,isDirectionalLight:!0,copy:function(e){return tu.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),hu.prototype=Object.assign(Object.create(tu.prototype),{constructor:hu,isAmbientLight:!0}),fu.prototype=Object.assign(Object.create(tu.prototype),{constructor:fu,isRectAreaLight:!0,copy:function(e){return tu.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=tu.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var du=function(){function e(){Object(p.a)(this,e),Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new j)}return Object(m.a)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();function pu(e,t){tu.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new du}function mu(e){Es.call(this,e),this.textures={}}pu.prototype=Object.assign(Object.create(tu.prototype),{constructor:pu,isLightProbe:!0,copy:function(e){return tu.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){var t=tu.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),mu.prototype=Object.assign(Object.create(Es.prototype),{constructor:mu,load:function(e,t,n,r){var i=this,o=new Ss(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new is[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new ot).setHex(e.sheen)),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new ot).setHex(o.value);break;case"v2":r.uniforms[i].value=(new C).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new j).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new k).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new R).fromArray(o.value);break;case"m4":r.uniforms[i].value=(new fe).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)r.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new C).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new C).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),r},setTextures:function(e){return this.textures=e,this}});var gu=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function Au(){Ot.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function vu(e,t,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),ft.call(this,e,t,n),this.meshPerAttribute=r||1}function yu(e){Es.call(this,e)}Au.prototype=Object.assign(Object.create(Ot.prototype),{constructor:Au,isInstancedBufferGeometry:!0,copy:function(e){return Ot.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=Ot.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),vu.prototype=Object.assign(Object.create(ft.prototype),{constructor:vu,isInstancedBufferAttribute:!0,copy:function(e){return ft.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=ft.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),yu.prototype=Object.assign(Object.create(Es.prototype),{constructor:yu,load:function(e,t,n,r){var i=this,o=new Ss(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)},parse:function(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=new Oi(new bu[i.type](o),i.stride);return a.uuid=i.uuid,t[r]=a,a}var i=e.isInstancedBufferGeometry?new Au:new Ot,o=e.data.index;if(void 0!==o){var a=new bu[o.type](o.array);i.setIndex(new ft(a,1))}var s=e.data.attributes;for(var u in s){var l=s[u],c=void 0;if(l.isInterleavedBufferAttribute){c=new ki(r(e.data,l.data),l.itemSize,l.offset,l.normalized)}else{var h=new bu[l.type](l.array);c=new(l.isInstancedBufferAttribute?vu:ft)(h,l.itemSize,l.normalized)}void 0!==l.name&&(c.name=l.name),i.setAttribute(u,c)}var f=e.data.morphAttributes;if(f)for(var d in f){for(var p=f[d],m=[],g=0,A=p.length;g<A;g++){var v=p[g],y=void 0;if(v.isInterleavedBufferAttribute)y=new ki(r(e.data,v.data),v.itemSize,v.offset,v.normalized);else y=new ft(new bu[v.type](v.array),v.itemSize,v.normalized);void 0!==v.name&&(y.name=v.name),m.push(y)}i.morphAttributes[d]=m}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var b=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==b)for(var _=0,w=b.length;_!==w;++_){var E=b[_];i.addGroup(E.start,E.count,E.materialIndex)}var x=e.data.boundingSphere;if(void 0!==x){var S=new j;void 0!==x.center&&S.fromArray(x.center),i.boundingSphere=new re(S,x.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}});var bu={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function _u(e){Es.call(this,e)}_u.prototype=Object.assign(Object.create(Es.prototype),{constructor:_u,load:function(e,t,n,r){var i=this,o=""===this.path?gu(e):this.path;this.resourcePath=this.resourcePath||o;var a=new Ss(i.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new eu).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n,r={};if(void 0!==e)for(var i=new yu,o=0,a=e.length;o<a;o++){var s=void 0,u=e[o];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Ka[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Ka[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ka[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ka[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ka[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ka[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Ka[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ka[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ka[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ka[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Ka[u.type]((new Js[u.path.type]).fromJSON(u.path),u.tubularSegments,u.radius,u.radialSegments,u.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ka[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Ka[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(var l=0,c=u.shapes.length;l<c;l++){var h=t[u.shapes[l]];n.push(h)}s=new Ka[u.type](n,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(var f=0,d=u.shapes.length;f<d;f++){var p=t[u.shapes[f]];n.push(p)}var m=u.options.extrudePath;void 0!==m&&(u.options.extrudePath=(new Js[m.type]).fromJSON(m)),s=new Ka[u.type](n,u.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(u);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),r[u.uuid]=s}return r},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new mu;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var u=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),u.push(n[c.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=vs.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n,r=this,i={};function o(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var a=new _s(t);(n=new Ls(a)).setCrossOrigin(this.crossOrigin);for(var s=0,u=e.length;s<u;s++){var l=e[s],c=l.url;if(Array.isArray(c)){i[l.uuid]=[];for(var h=0,f=c.length;h<f;h++){var d=c[h],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:r.resourcePath+d;i[l.uuid].push(o(p))}}else{var m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:r.resourcePath+l.url;i[l.uuid]=o(m)}}}return i},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=void 0;(s=Array.isArray(t[a.image])?new Bn(t[a.image]):new P(t[a.image])).needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,Eu)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],xu),s.wrapT=n(a.wrap[1],xu)),void 0!==a.format&&(s.format=a.format),void 0!==a.type&&(s.type=a.type),void 0!==a.encoding&&(s.encoding=a.encoding),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,Su)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,Su)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(s.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(s.unpackAlignment=a.unpackAlignment),r[a.uuid]=s}return r},parseObject:function(e,t,n){var r,i,o;function a(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new Ri,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new ot(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new Ci(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Li(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new hn(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new uu(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new hu(e.color,e.intensity);break;case"DirectionalLight":r=new cu(e.color,e.intensity);break;case"PointLight":r=new su(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new fu(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new ou(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new nu(e.color,e.groundColor,e.intensity);break;case"LightProbe":r=(new pu).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":r=new Qt(i=a(e.geometry),o=s(e.material));break;case"InstancedMesh":i=a(e.geometry),o=s(e.material);var u=e.count,l=e.instanceMatrix;(r=new uo(i,o,u)).instanceMatrix=new ft(new Float32Array(l.array),16);break;case"LOD":r=new Zi;break;case"Line":r=new go(a(e.geometry),s(e.material),e.mode);break;case"LineLoop":r=new bo(a(e.geometry),s(e.material));break;case"LineSegments":r=new yo(a(e.geometry),s(e.material));break;case"PointCloud":case"Points":r=new To(a(e.geometry),s(e.material));break;case"Sprite":r=new Yi(s(e.material));break;case"Group":r=new wi;break;default:r=new Fe}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(r.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,h=0;h<c.length;h++)r.add(this.parseObject(c[h],t,n));if("LOD"===e.type){void 0!==e.autoUpdate&&(r.autoUpdate=e.autoUpdate);for(var f=e.levels,d=0;d<f.length;d++){var p=f[d],m=r.getObjectByProperty("uuid",p.object);void 0!==m&&r.addLevel(m,p.distance)}}return r}});var wu,Eu={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},xu={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Su={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:_,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};function Tu(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Es.call(this,e),this.options={premultiplyAlpha:"none"}}function Mu(){this.type="ShapePath",this.color=new ot,this.subPaths=[],this.currentPath=null}function Lu(e){this.type="Font",this.data=e}function Cu(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,u,l,c,h,f,d,p=new Mu;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),g=0,A=m.length;g<A;){switch(m[g++]){case"m":a=m[g++]*t+n,s=m[g++]*t+r,p.moveTo(a,s);break;case"l":a=m[g++]*t+n,s=m[g++]*t+r,p.lineTo(a,s);break;case"q":u=m[g++]*t+n,l=m[g++]*t+r,c=m[g++]*t+n,h=m[g++]*t+r,p.quadraticCurveTo(c,h,u,l);break;case"b":u=m[g++]*t+n,l=m[g++]*t+r,c=m[g++]*t+n,h=m[g++]*t+r,f=m[g++]*t+n,d=m[g++]*t+r,p.bezierCurveTo(c,h,f,d,u,l)}}return{offsetX:o.ha*t,path:p}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}function Ru(e){Es.call(this,e)}Tu.prototype=Object.assign(Object.create(Es.prototype),{constructor:Tu,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=bs.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,i.options)})).then((function(n){bs.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(Mu.prototype,{moveTo:function(e,t){return this.currentPath=new $s,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new eu;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],u=-u,s=t[i],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=l*(e.x-a.x)-u*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i,o,a,s=wa.isClockWise,u=this.subPaths;if(0===u.length)return[];if(!0===t)return n(u);var l=[];if(1===u.length)return o=u[0],(a=new eu).curves=o.curves,l.push(a),l;var c=!s(u[0].getPoints());c=e?!c:c;var h,f,d=[],p=[],m=[],g=0;p[g]=void 0,m[g]=[];for(var A=0,v=u.length;A<v;A++)i=s(h=(o=u[A]).getPoints()),(i=e?!i:i)?(!c&&p[g]&&g++,p[g]={s:new eu,p:h},p[g].s.curves=o.curves,c&&g++,m[g]=[]):m[g].push({h:o,p:h[0]});if(!p[0])return n(u);if(p.length>1){for(var y=!1,b=[],_=0,w=p.length;_<w;_++)d[_]=[];for(var E=0,x=p.length;E<x;E++)for(var S=m[E],T=0;T<S.length;T++){for(var M=S[T],L=!0,C=0;C<p.length;C++)r(M.p,p[C].p)&&(E!==C&&b.push({froms:E,tos:C,hole:T}),L?(L=!1,d[C].push(M)):y=!0);L&&d[E].push(M)}b.length>0&&(y||(m=d))}for(var R=0,O=p.length;R<O;R++){a=p[R].s,l.push(a);for(var I=0,P=(f=m[R]).length;I<P;I++)a.holes.push(f[I].h)}return l}}),Object.assign(Lu.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=o;else{var h=Cu(c,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Ru.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ru,load:function(e,t,n,r){var i=this,o=new Ss(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new Lu(e)}});var Ou=function(){return void 0===wu&&(wu=new(window.AudioContext||window.webkitAudioContext)),wu};function Iu(e){Es.call(this,e)}function Pu(e,t,n){pu.call(this,void 0,n);var r=(new ot).set(e),i=(new ot).set(t),o=new j(r.r,r.g,r.b),a=new j(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}function ku(e,t){pu.call(this,void 0,t);var n=(new ot).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Iu.prototype=Object.assign(Object.create(Es.prototype),{constructor:Iu,load:function(e,t,n,r){var i=this,o=new Ss(i.manager);o.setResponseType("arraybuffer"),o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.load(e,(function(n){try{var o=n.slice(0);Ou().decodeAudioData(o,(function(e){t(e)}))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}}),Pu.prototype=Object.assign(Object.create(pu.prototype),{constructor:Pu,isHemisphereLightProbe:!0,copy:function(e){return pu.prototype.copy.call(this,e),this},toJSON:function(e){return pu.prototype.toJSON.call(this,e)}}),ku.prototype=Object.assign(Object.create(pu.prototype),{constructor:ku,isAmbientLightProbe:!0,copy:function(e){return pu.prototype.copy.call(this,e),this},toJSON:function(e){return pu.prototype.toJSON.call(this,e)}});var Nu=new fe,Du=new fe;Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new hn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new hn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,r,i=e.projectionMatrix.clone(),o=t.eyeSep/2,a=o*t.near/t.focus,s=t.near*Math.tan(L.DEG2RAD*t.fov*.5)/t.zoom;Du.elements[12]=-o,Nu.elements[12]=o,n=-s*t.aspect+a,r=s*t.aspect+a,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(i),n=-s*t.aspect-a,r=s*t.aspect-a,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Du),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Nu)}});var Fu=function(){function e(t){Object(p.a)(this,e),this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return Object(m.a)(e,[{key:"start",value:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}(),ju=(new j,new F,new j,new j,function(e){c(n,e);var t=f(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return Object(m.a)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Fe)),Bu=(new j,new F,new j,new j,function(){function e(t,n){Object(p.a)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==n?n:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return Object(m.a)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}());function Vu(e,t,n){var r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(Vu.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},accumulateAdditive:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){a.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){F.slerpFlat(e,t,e,t,e,n,r)},_slerpAdditive:function(e,t,n,r,i){var o=this._workIndex*i;F.multiplyQuaternionsFlat(e,o,e,t,e,n),F.slerpFlat(e,t,e,t,e,o,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}},_lerpAdditive:function(e,t,n,r,i){for(var o=0;o!==i;++o){var a=t+o;e[a]=e[a]+e[n+o]*r}}});var Gu=new RegExp("[\\[\\]\\.:\\/]","g"),Uu="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",qu=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Wu=/(WCOD+)?/.source.replace("WCOD",Uu),zu=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Hu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Ku=new RegExp("^"+qu+Wu+zu+Hu+"$"),Yu=["material","materials","bones"];function Qu(e,t,n){var r=n||Xu.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Xu(e,t,n){this.path=t,this.parsedPath=n||Xu.parseTrackName(t),this.node=Xu.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(Qu.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Xu,{Composite:Qu,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Xu.Composite(e,t,n):new Xu(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Gu,"")},parseTrackName:function(e){var t=Ku.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Yu.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null}(e.children);if(r)return r}return null}}),Object.assign(Xu.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Xu.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Xu.prototype,{_getValue_unbound:Xu.prototype.getValue,_setValue_unbound:Xu.prototype.setValue}),Object.assign(function(){this.uuid=L.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length,a=void 0,s=e.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=t[f];if(void 0===d){d=s++,t[f]=d,e.push(h);for(var p=0,m=o;p!==m;++p)i[p].push(new Xu(h,n[p],r[p]))}else if(d<u){a=e[d];var g=--u,A=e[g];t[A.uuid]=d,e[d]=A,t[f]=g,e[g]=h;for(var v=0,y=o;v!==y;++v){var b=i[v],_=b[g],w=b[d];b[d]=_,void 0===w&&(w=new Xu(h,n[v],r[v])),b[g]=w}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u},remove:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=t[u];if(void 0!==l&&l>=i){var c=i++,h=e[c];t[h.uuid]=l,e[l]=h,t[u]=c,e[c]=s;for(var f=0,d=r;f!==d;++f){var p=n[f],m=p[c],g=p[l];p[l]=m,p[c]=g}}}this.nCachedObjects_=i},uncache:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=e.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],l=u.uuid,c=t[l];if(void 0!==c)if(delete t[l],c<i){var h=--i,f=e[h],d=--o,p=e[d];t[f.uuid]=c,e[c]=f,t[p.uuid]=h,e[h]=p,e.pop();for(var m=0,g=r;m!==g;++m){var A=n[m],v=A[h],y=A[d];A[c]=v,A[h]=y,A.pop()}}else{var b=--o,_=e[b];t[_.uuid]=c,e[c]=_,e.pop();for(var w=0,E=r;w!==E;++w){var x=n[w];x[c]=x[b],x.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(c);for(var h=l,f=s.length;h!==f;++h){var d=s[h];c[h]=new Xu(d,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}});var Ju=function(){function e(t,n,r,i){Object(p.a)(this,e),this._mixer=t,this._clip=n,this._localRoot=r||null,this.blendMode=i||n.blendMode;for(var o=n.tracks,a=o.length,s=new Array(a),u={endingStart:2400,endingEnd:2400},l=0;l!==a;++l){var c=o[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return Object(m.a)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,o=this.timeScale,a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/o,u[1]=t/o,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case 2501:for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulateAdditive(s);break;case 2500:default:for(var f=0,d=u.length;f!==d;++f)u[f].evaluate(a),l[f].accumulate(r,s)}}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,o=2202===n;if(0===e)return-1===i?r:o&&1===(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){var a=Math.floor(r/t);r-=t*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}]),e}();function Zu(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Zu.prototype=Object.assign(Object.create(E.prototype),{constructor:Zu,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)o[c]=d;else{if(void 0!==(d=o[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(d=new Vu(Xu.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),o[c]=d}a[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new us(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){var r=t||this._root,i=r.uuid,o="string"===typeof e?vs.findByName(r,e):e,a=null!==o?o.uuid:e,s=this._actionsByClip[a],u=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;var c=new Ju(this,o,t,n);return this._bindAction(c,u),this._addInactiveAction(c,a,i),c},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?vs.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(o);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});var $u=function(){function e(t){Object(p.a)(this,e),"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return Object(m.a)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}();function el(e,t,n){Oi.call(this,e,t),this.meshPerAttribute=n||1}function tl(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}function nl(e,t,n,r){this.ray=new he(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new Ee,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function rl(e,t){return e.distance-t.distance}function il(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,o=0,a=i.length;o<a;o++)il(i[o],t,n,!0)}el.prototype=Object.assign(Object.create(Oi.prototype),{constructor:el,isInstancedInterleavedBuffer:!0,copy:function(e){return Oi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){var t=Oi.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){var t=Oi.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(tl.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(tl.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(nl.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return il(e,this,r,t),r.sort(rl),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)il(e[i],this,r,t);return r.sort(rl),r}});var ol=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(p.a)(this,e),this.radius=t,this.phi=n,this.theta=r,this}return Object(m.a)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(L.clamp(t/this.radius,-1,1))),this}}]),e}(),al=new C,sl=function(){function e(t,n){Object(p.a)(this,e),Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new C(1/0,1/0),this.max=void 0!==n?n:new C(-1/0,-1/0)}return Object(m.a)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=al.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new C),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new C),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new C),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new C),t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return al.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),ul=new j,ll=new j,cl=function(){function e(t,n){Object(p.a)(this,e),this.start=void 0!==t?t:new j,this.end=void 0!==n?n:new j}return Object(m.a)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new j),e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new j),e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new j),this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){ul.subVectors(e,this.start),ll.subVectors(this.end,this.start);var n=ll.dot(ll),r=ll.dot(ul)/n;return t&&(r=L.clamp(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new j),this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}]),e}();function hl(e){Fe.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}hl.prototype=Object.create(Fe.prototype),hl.prototype.constructor=hl,hl.prototype.isImmediateRenderObject=!0;new j;var fl=new j,dl=new fe,pl=new fe,ml=function(e){c(n,e);var t=f(n);function n(e){var r;Object(p.a)(this,n);for(var i=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),o=new Ot,a=[],s=[],u=new ot(0,0,1),l=new ot(0,1,0),c=0;c<i.length;c++){var h=i[c];h.parent&&h.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}o.setAttribute("position",new bt(a,3)),o.setAttribute("color",new bt(s,3));var f=new lo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,o,f)).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return Object(m.a)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");pl.getInverse(this.root.matrixWorld);for(var o=0,u=0;o<t.length;o++){var l=t[o];l.parent&&l.parent.isBone&&(dl.multiplyMatrices(pl,l.matrixWorld),fl.setFromMatrixPosition(dl),i.setXYZ(u,fl.x,fl.y,fl.z),dl.multiplyMatrices(pl,l.parent.matrixWorld),fl.setFromMatrixPosition(dl),i.setXYZ(u+1,fl.x,fl.y,fl.z),u+=2)}r.getAttribute("position").needsUpdate=!0,s(a(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(yo);new j,new ot,new ot;var gl=function(e){c(n,e);var t=f(n);function n(e,r,i,o){var a;Object(p.a)(this,n),e=e||10,r=r||10,i=new ot(void 0!==i?i:4473924),o=new ot(void 0!==o?o:8947848);for(var s=r/2,u=e/r,l=e/2,c=[],h=[],f=0,d=0,m=-l;f<=r;f++,m+=u){c.push(-l,0,m,l,0,m),c.push(m,0,-l,m,0,l);var g=f===s?i:o;g.toArray(h,d),d+=3,g.toArray(h,d),d+=3,g.toArray(h,d),d+=3,g.toArray(h,d),d+=3}var A=new Ot;A.setAttribute("position",new bt(c,3)),A.setAttribute("color",new bt(h,3));var v=new lo({vertexColors:!0,toneMapped:!1});return(a=t.call(this,A,v)).type="GridHelper",a}return n}(yo);new j,new j,new j,new j,new cn;new G,new j,Math.pow(2,8);var Al=[.125,.215,.35,.446,.526,.582],vl=5+Al.length,yl=(d={},Object(u.a)(d,3e3,0),Object(u.a)(d,3001,1),Object(u.a)(d,3002,2),Object(u.a)(d,3004,3),Object(u.a)(d,3005,4),Object(u.a)(d,3006,5),Object(u.a)(d,3007,6),new uu,function(){for(var e=[],t=[],n=[],r=8,i=0;i<vl;i++){var o=Math.pow(2,r);t.push(o);var a=1/o;i>4?a=Al[i-8+4-1]:0==i&&(a=0),n.push(a);for(var s=1/(o-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],h=new Float32Array(108),f=new Float32Array(72),d=new Float32Array(36),p=0;p<6;p++){var m=p%3*2/3-1,g=p>2?0:-1,A=[m,g,0,m+2/3,g,0,m+2/3,g+1,0,m,g,0,m+2/3,g+1,0,m,g+1,0];h.set(A,18*p),f.set(c,12*p);var v=[p,p,p,p,p,p];d.set(v,6*p)}var y=new Ot;y.setAttribute("position",new ft(h,3)),y.setAttribute("uv",new ft(f,2)),y.setAttribute("faceIndex",new ft(d,1)),e.push(y),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}()),bl=(yl._lodPlanes,yl._sizeLods,yl._sigmas,(1+Math.sqrt(5))/2),_l=1/bl;new j(1,1,1),new j(-1,1,1),new j(1,1,-1),new j(-1,1,-1),new j(0,bl,_l),new j(0,bl,-_l),new j(_l,0,bl),new j(-_l,0,bl),new j(bl,_l,0),new j(-bl,_l,0);var wl=0,El=1,xl=2;function Sl(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Vs.call(this,e),this.type="catmullrom"}Is.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Is.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Zs.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new nn,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new j(i.x,i.y,i.z||0))}return t}}),Object.assign($s.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Object.create(Vs.prototype),Object.create(Vs.prototype),Sl.prototype=Object.create(Vs.prototype),Object.assign(Sl.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),gl.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ml.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Es.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),gu(e)}}),Es.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(_u.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(sl.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(G.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(re.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),An.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},cl.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(L,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),L.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),L.ceilPowerOfTwo(e)}}),Object.assign(R.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(fe.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new j).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),Ge.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},F.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(he.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Ze.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Ze,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ze.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ze.getNormal(e,t,n,r)}}),Object.assign(eu.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Sa(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Fa(this,e)}}),Object.assign(C.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(j.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(k.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(nn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(Fe.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Fe.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Qt.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Qt.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Zi.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(no.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),$i.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Is.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),hn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(tu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(ft.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Object.assign(ft.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Ot.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new ft(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Ot.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Au.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(nl.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(Oi.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),35048===this.usage},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Oi.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Ta.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(Ri.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties($u.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ut.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ot}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Za.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ja.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(ln.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Ti.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ti.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Ai.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(N.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(ju.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Iu).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Bu.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},fn.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};O.crossOrigin=void 0,O.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Os;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},O.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Cs;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},O.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},O.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"120"}}))},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return c})),n.d(t,"__generator",(function(){return h})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return m})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return A})),n.d(t,"__await",(function(){return v})),n.d(t,"__asyncGenerator",(function(){return y})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return x})),n.d(t,"__classPrivateFieldGet",(function(){return S})),n.d(t,"__classPrivateFieldSet",(function(){return T}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function d(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function A(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof v?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:v(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function T(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(36);function i(e,t){if(null==e)return{};var n,i,o=Object(r.a)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"===typeof e||"number"===typeof e)i+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.a=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=n.n(o),s=(n(1),n(64)),u=n.n(s),l=n(164),c=n(207),h=n(166),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var o=t.defaultTheme,s=t.withTheme,f=void 0!==s&&s,d=t.name,p=Object(i.a)(t,["defaultTheme","withTheme","name"]);var m=d,g=Object(l.a)(e,Object(r.a)({defaultTheme:o,Component:n,name:d||n.displayName,classNamePrefix:m},p)),A=a.a.forwardRef((function(e,t){e.classes;var s,u=e.innerRef,l=Object(i.a)(e,["classes","innerRef"]),p=g(Object(r.a)(Object(r.a)({},n.defaultProps),e)),m=l;return("string"===typeof d||f)&&(s=Object(h.a)()||o,d&&(m=Object(c.a)({theme:s,name:d,props:l})),f&&!m.theme&&(m.theme=s)),a.a.createElement(n,Object(r.a)({ref:u||t,classes:p},m))}));return u()(A,n),A}},d=n(46);t.a=function(e,t){return f(e,Object(r.a)({defaultTheme:d.a},t))}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(107);function i(e){if("string"!==typeof e)throw new Error(Object(r.a)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(28);function o(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){Object(i.a)(e,n),Object(i.a)(t,n)}}),[e,t])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(58);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=n(124)},function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return f}));var r=n(107);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(Object(r.a)(3,e));var i=e.substring(t+1,e.length-1).split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)}))}}function a(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function s(e,t){var n=u(e),r=u(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(e){var t="hsl"===(e=o(e)).type?o(function(e){var t=(e=o(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)},l="rgb",c=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(l+="a",c.push(t[3])),a({type:l,values:c})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return u(e)>.5?h(e,t):f(e,t)}function c(e,t){return e=o(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,a(e)}function h(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return a(e)}function f(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return a(e)}},function(e,t,n){"use strict";(function(e){var n="undefined"===typeof self&&"undefined"!==typeof e&&e.hrtime?function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},r=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){var r=Object.keys(this._tweens);if(0===r.length)return!1;for(e=void 0!==e?e:n();r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]];o&&!1===o.update(e)&&!t&&delete this._tweens[r[i]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),i={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-i.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*i.Bounce.In(2*e):.5*i.Bounce.Out(2*e-1)+.5}}},o={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=o.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[n],e[n-1],n-r):a(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,a=o.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-t,r-s)*i(t,s)*e[s]*a(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=o.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),a(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):a(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=o.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i;return(2*t-2*n+o+a)*(i*s)+(-3*t+3*n-2*o-a)*s+o*i+t}}},a=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),s=function(){function e(e,t){void 0===t&&(t=l),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=l.Easing.Linear.None,this._interpolationFunction=l.Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=l.nextId(),this._isChainStopped=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){for(var n in e)this._valuesEnd[n]=e[n];return void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"===typeof e?l.now()+parseFloat(e):e:l.now(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,r){for(var i in n){var o=e[i],a=Array.isArray(o),s=a?"array":typeof o,u=!a&&Array.isArray(n[i]);if("undefined"!==s&&"function"!==s){if(u){var l=n[i];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,o)),n[i]=[o].concat(l)}if("object"!==s&&!a||!o||u)"undefined"===typeof t[i]&&(t[i]=o),a||(t[i]*=1),r[i]=u?n[i].slice().reverse():t[i]||0;else{for(var c in t[i]=a?[]:{},o)t[i][c]=o[c];r[i]=a?[]:{},this._setupProperties(o,t[i],n[i],r[i])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this.update(1/0),this},e.prototype.pause=function(e){return this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=void 0===e?l.now():e,this._group.remove(this)),this},e.prototype.resume=function(e){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=(void 0===e?l.now():e)-this._pauseStart,this._pauseStart=0,this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e){var t,n;if(e>this._startTime+this._duration&&!this._isPlaying)return!1;if(this.isPlaying||this.start(e),e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||n>1?1:n;var r=this._easingFunction(n);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,r),this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[t]||(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo&&this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var i=0,o=this._chainedTweens.length;i<o;i++)this._chainedTweens[i].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,r){for(var i in n)if(void 0!==t[i]){var o=t[i]||0,a=n[i],s=Array.isArray(e[i]),u=Array.isArray(a);!s&&u?e[i]=this._interpolationFunction(a,r):"object"===typeof a&&a?this._updateProperties(e[i],o,a,r):"number"===typeof(a=this._handleRelativeValue(o,a))&&(e[i]=o+(a-o)*r)}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e];"string"===typeof this._valuesEnd[e]?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e]):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},e}(),u=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.version="18.6.0",t.now=n,t.Group=r,t.Easing=i,t.Interpolation=o,t.nextId=a.nextId,t.Tween=s,t}return u(t,e),t}(r));t.a=l}).call(this,n(56))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|l>>6,d=63&l;u||(d=64,a||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var l=o<<2|a>>4;if(r.push(l),64!==s){var c=a<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},l=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=c(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function f(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function d(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}var p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?g(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new p(i,s),l=0,c=Object.keys(r);l<c.length;l++){var h=c[l];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function g(e,t){return e.replace(A,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var A=/\{\$([^}]+)}/g;function v(e){return JSON.parse(e)}var y=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(l(o[0])||""),n=v(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}};var b=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=c^u&(l^c),a=1518500249):(o=u^l^c,a=1859775393):r<60?(o=u&l|c&(u|l),a=2400959708):(o=u^l^c,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var _=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function w(){}function E(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.MAX_VALUE_MILLIS=144e5,t.RANDOM_FACTOR=.5,t.Sha1=b,t.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=u,t.base64Decode=l,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.calculateBackoffMillis=function(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new _(e,t);return n.subscribe.bind(n)},t.decode=y,t.deepCopy=function(e){return c(void 0,e)},t.deepExtend=c,t.errorPrefix=E,t.getUA=f,t.isAdmin=function(e){var t=y(e).claims;return"object"===typeof t&&!0===t.admin},t.isBrowser=function(){return"object"===typeof self&&self.self===self},t.isBrowserExtension=function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id},t.isElectron=function(){return f().indexOf("Electron/")>=0},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){var e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},t.isNode=d,t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return f().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){var t=y(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=y(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=y(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(E(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(E(e,t,r)+"must be a valid context object.")},t.validateIndexedDBOpenable=function(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}}))},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(E(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(55))},function(e,t,n){var r=n(139),i=n(59),o=n(85);!function(e,t){"use strict";var n=i.mark(ye),a={_INT:Symbol(),_FLOAT:Symbol(),_CHAR:Symbol(),_DECIMAL_ASSUMED:Symbol(),_DECIMAL_ASSUMED_E:Symbol()},s="array",u="string",l="object",c="date",h="NaN";function f(e){var t=typeof e;return Array.isArray(e)?s:e instanceof Date?c:Number.isNaN(e)?h:t}var d=function(e){return e>=0},p=function(e){var t=function(e){return Math.abs(e).toString().length}(e),n="0".repeat(t-1);return parseFloat(e*"0.".concat(n,"1"))},m=function(e){return e*(180/Math.PI)},g=function(e){return e*(Math.PI/180)},A=function(e,t){return!(!e||!t)&&d(e)!==d(t)&&Math.abs(e)>100};function v(e,t,n){e.name;var r,i=e.tle,o=1===t?i[0]:i[1],s=n.start,u=n.length,l=n.type,c=o.substr(s,u);switch(l){case a._INT:r=parseInt(c,10);break;case a._FLOAT:r=parseFloat(c);break;case a._DECIMAL_ASSUMED:r=parseFloat("0.".concat(c));break;case a._DECIMAL_ASSUMED_E:r=function(e){var t=e.substr(0,e.length-2),n=p(t),r=parseInt(e.substr(e.length-2,2),10),i=n*Math.pow(10,r);return parseFloat(i.toPrecision(5))}(c);break;case a._CHAR:default:r=c.trim()}return r}var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"".concat(e," must be of type [").concat(t.join(", "),"], but got ").concat(n,".")},b="Input object is malformed (should have name and tle properties).",_={},w=[s,u,l];function E(e){var t,n=f(e),r={},i=[],o=typeof(t=e)===l&&t.name&&t.tle&&f(t.tle)===s&&2===t.tle.length;if(o)return e;if(!o&&n===l)throw new Error(b);var a=n===s?e[0]:e;if(_[a])return _[a];if(!w.includes(n))throw new Error(y("Source TLE",w,n));if(n===u?i=e.split("\n"):n===s&&(i=Array.from(e)),3===i.length){var c=i[0].trim();i=i.slice(1),r.name=c}return r.tle=i.map((function(e){return e.trim()})),_[a]=r,r}function x(e){var t=e.split("");if(t.splice(t.length-1,1),0===t.length)throw new Error("Character array empty!",e);return t.reduce((function(e,t){var n=parseInt(t,10),r=parseInt(e,10);return Number.isInteger(n)?r+n:"-"===t?r+1:r}))%10}function S(e,t){var n=e.tle;return t===parseInt(n[t-1][0],10)}function T(e,t){var n=e.tle,r=n[t-1],i=parseInt(r[r.length-1],10);return x(n[t-1])===i}var M={start:0,length:1,type:a._INT},L={start:2,length:5,type:a._INT},C={start:7,length:1,type:a._CHAR},R={start:9,length:2,type:a._INT},O={start:11,length:3,type:a._INT},I={start:14,length:3,type:a._CHAR},P={start:18,length:2,type:a._INT},k={start:20,length:12,type:a._FLOAT},N={start:33,length:11,type:a._FLOAT},D={start:44,length:8,type:a._DECIMAL_ASSUMED_E},F={start:53,length:8,type:a._DECIMAL_ASSUMED_E},j={start:62,length:1,type:a._INT},B={start:64,length:4,type:a._INT},V={start:68,length:1,type:a._INT};function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?e:E(e);return v(r,1,t)}function U(e,t){return G(e,L,t)}function q(e,t){return G(e,R,t)}function W(e,t){return G(e,O,t)}function z(e,t){return G(e,I,t)}function H(e,t){return G(e,P,t)}function K(e,t){return G(e,k,t)}var Y={start:0,length:1,type:a._INT},Q={start:2,length:5,type:a._INT},X={start:8,length:8,type:a._FLOAT},J={start:17,length:8,type:a._FLOAT},Z={start:26,length:7,type:a._DECIMAL_ASSUMED},$={start:34,length:8,type:a._FLOAT},ee={start:43,length:8,type:a._FLOAT},te={start:52,length:11,type:a._FLOAT},ne={start:63,length:5,type:a._INT},re={start:68,length:1,type:a._INT};function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?e:E(e);return v(r,2,t)}function oe(e,t){return ie(e,te,t)}function ae(e,t){var n=function(e){var t=parseInt(e,10);return t<100&&t>56?t+1900:t+2e3}(q(e,t)),r=W(e,t).toString().padStart(3,0),i=z(e,t);return"".concat(n,"-").concat(r).concat(i)}function se(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getFullYear(),n=new Date("1/1/".concat(t," 0:0:0 Z")),r=n.getTime();return Math.floor(r+864e5*(e-1))}(K(e),H(e))}function ue(e){return parseInt(864e5/oe(e),10)}function le(e){return ue(e)/6e4}var ce={_DEFAULT:"Problematic TLE with unknown error.",1:"Mean elements, ecc >= 1.0 or ecc < -0.001 or a < 0.95 er",2:"Mean motion less than 0.0",3:"Pert elements, ecc < 0.0  or  ecc > 1.0",4:"Semi-latus rectum < 0.0",5:"Epoch elements are sub-orbital",6:"Satellite has decayed"},he={},fe={},de={},pe={slowMoving:{}},me=[he,fe,de,pe,{}];function ge(e,n,r,i,o){var a=n||Date.now(),s=E(e).tle,u=r||36.9613422,l=i||-122.0308,c=o||.37,h="".concat(s[0],"-").concat(a,"-").concat(r,"-").concat(i,"\n-").concat(o);if(he[h])return he[h];var f=t.twoline2satrec(s[0],s[1]);if(f.error)throw new Error(ce[f.error]||ce._DEFAULT);var d=new Date(a),p=t.propagate(f,d),A=p.position,v=p.velocity,y={latitude:g(u),longitude:g(l),height:c},b=t.gstime(d),_=t.eciToEcf(A,b),w=t.eciToGeodetic(A,b),x=t.ecfToLookAngles(y,_),S=Math.sqrt(Math.pow(v.x,2)+Math.pow(v.y,2)+Math.pow(v.z,2)),T=x.azimuth,M=x.elevation,L=x.rangeSat,C=w.longitude,R=w.latitude,O=w.height,I={lng:t.degreesLong(C),lat:t.degreesLat(R),elevation:m(M),azimuth:m(T),range:L,height:O,velocity:S};return he[h]=I,I}function Ae(e,t){var n=E(e),r=n.tle,i=function(e,t){var n=e.tle,r=60*le(n)*1e3,i=n[0].substr(0,30),o=fe[i];return!!o&&(-1===o?o:o.filter((function(e){if("object"===typeof e&&e.tle===n)return-1;var i=t-e;return i>0&&i<r}))[0]||!1)}(n,t);if(i)return i;for(var a=6e5,s=[],u=[],l=t||Date.now(),c=0,h=!1;!h;){s=ve(r,l);var f=o(s,2),d=f[0];f[1],A(u[0],d)?(l+=a,a=a>2e4?2e4:a/2):(l-=a,u=s),h=a<500||c>=1e3,c++}var p=c-1===1e3,m=p?-1:parseInt(l,10),g=r[0];return fe[g]||(fe[g]=[]),p?fe[g]=-1:fe[g].push(m),m}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=ge(e,t),r=n.lat,i=n.lng;return[i,r]}function ye(e,t,r){var o;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t-r;case 1:return o+=r,n.next=5,{curTimeMS:o,lngLat:ve(e,o)};case 5:n.next=1;break;case 7:case"end":return n.stop()}}),n)}function be(e){return new Promise((function(t){return setTimeout(t,e)}))}function _e(e){var t=e.tle,n=e.startTimeMS,a=void 0===n?Date.now():n,s=e.stepMS,u=void 0===s?1e3:s,l=e.sleepMS,c=void 0===l?0:l,h=e.jobChunkSize,f=void 0===h?1e3:h,d=e.maxTimeMS,p=void 0===d?6e6:d,m=e.isLngLatFormat,g=void 0===m||m;return new Promise(function(){var e=r(i.mark((function e(n,r){var s,l,h,d,m,v,y,b,_,w,x,S,T,M,L,C,R;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=E(t),l=s.tle,h=(a/1e3).toFixed(),d="".concat(l[0],"-").concat(h,"-").concat(u,"-").concat(g),!de[d]){e.next=6;break}return n(de[d]),e.abrupt("return");case 6:m=ye(l,a,u),v=0,y=!1,b=[];case 10:if(y){e.next=24;break}if(w=m.next().value,x=w.curTimeMS,S=w.lngLat,T=o(S,2),M=T[0],L=T[1],C=A(_,M),R=p&&x-a>p,y=C||R,g?b.push(S):b.push([L,M]),!c||v%f!==0){e.next=20;break}return e.next=20,be(c);case 20:_=M,v++,e.next=10;break;case 24:de[d]=b,n(b);case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function we(e){var t=e.tle,n=e.startTimeMS,r=void 0===n?Date.now():n,i=e.stepMS,a=void 0===i?1e3:i,s=e.maxTimeMS,u=void 0===s?6e6:s,l=e.isLngLatFormat,c=void 0===l||l,h=E(t).tle,f=(r/1e3).toFixed(),d="".concat(h[0],"-").concat(f,"-").concat(a,"-").concat(c);if(de[d])return de[d];for(var p,m=!1,g=[],v=r;!m;){var y=ve(h,v),b=o(y,2),_=b[0],w=b[1];m=A(p,_)||u&&v-r>u,c?g.push(y):g.push([w,_]),p=_,v+=a}return de[d]=g,g}e.clearCache=function(){pe.slowMoving=[]},e.computeChecksum=x,e.getAverageOrbitTimeMS=ue,e.getAverageOrbitTimeMins=le,e.getAverageOrbitTimeS=function(e){return ue(e)/1e3},e.getBstarDrag=function(e,t){return G(e,F,t)},e.getCOSPAR=ae,e.getCacheSizes=function(){return me.map((function(e){return getObjLength}))},e.getCatalogNumber=U,e.getCatalogNumber1=U,e.getCatalogNumber2=function(e,t){return ie(e,Q,t)},e.getChecksum1=function(e,t){return G(e,V,t)},e.getChecksum2=function(e,t){return ie(e,re,t)},e.getClassification=function(e,t){return G(e,C,t)},e.getEccentricity=function(e,t){return ie(e,Z,t)},e.getEpochDay=K,e.getEpochTimestamp=se,e.getEpochYear=H,e.getFirstTimeDerivative=function(e,t){return G(e,N,t)},e.getGroundTracks=function(e){var t=e.tle,n=e.startTimeMS,o=void 0===n?Date.now():n,a=e.stepMS,s=void 0===a?1e3:a,u=e.isLngLatFormat,l=void 0===u||u;return new Promise(function(){var e=r(i.mark((function e(n,r){var a,u,c,h,f,d,p,m;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=E(t),u=ue(a),-1!==(c=Ae(a,o))){e.next=10;break}return e.next=7,_e({tle:a,startTimeMS:o,stepMS:6e4,maxTimeMS:216e5,isLngLatFormat:l});case 7:return h=e.sent,n([h]),e.abrupt("return");case 10:return f=Ae(a,c-1e4),d=Ae(a,c+u+18e5),p=[_e({tle:a,startTimeMS:f,stepMS:s,isLngLatFormat:l}),_e({tle:a,startTimeMS:c,stepMS:s,isLngLatFormat:l}),_e({tle:a,startTimeMS:d,stepMS:s,isLngLatFormat:l})],e.next=15,Promise.all(p);case 15:m=e.sent,n(m);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},e.getGroundTracksSync=function(e){var t=e.tle,n=e.stepMS,r=void 0===n?1e3:n,i=e.optionalTimeMS,o=void 0===i?Date.now():i,a=e.isLngLatFormat,s=void 0===a||a,u=E(t),l=ue(u.tle),c=Ae(u,o);return-1!==c?[Ae(u,c-1e4),c,Ae(u,c+l+18e5)].map((function(e){return we({tle:u,startTimeMS:e,stepMS:r,isLngLatFormat:s})})):we({tle:u,startTimeMS:timeMS,stepMS:6e4,maxTimeMS:216e5})},e.getInclination=function(e,t){return ie(e,X,t)},e.getIntDesignatorLaunchNumber=W,e.getIntDesignatorPieceOfLaunch=z,e.getIntDesignatorYear=q,e.getLastAntemeridianCrossingTimeMS=Ae,e.getLatLngObj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=ge(e,t),r=n.lat,i=n.lng;return{lat:r,lng:i}},e.getLineNumber1=function(e,t){return G(e,M,t)},e.getLineNumber2=function(e,t){return ie(e,Y,t)},e.getLngLatAtEpoch=function(e){return ve(e,se(e))},e.getMeanAnomaly=function(e,t){return ie(e,ee,t)},e.getMeanMotion=oe,e.getOrbitModel=function(e,t){return G(e,j,t)},e.getOrbitTrack=_e,e.getOrbitTrackSync=we,e.getPerigee=function(e,t){return ie(e,$,t)},e.getRevNumberAtEpoch=function(e,t){return ie(e,ne,t)},e.getRightAscension=function(e,t){return ie(e,J,t)},e.getSatBearing=function(e,t){var n=this.parseTLE(e),r=t||Date.now(),i=this.getLatLonArr(n.arr,r),o=this.getLatLonArr(n.arr,r+1e4);if(A(i[1],o[1]))return{};var a=g(i[0]),s=g(o[0]),u=g(i[1]),l=g(o[1]),c=a>=s?"S":"N",h=u>=l?"W":"E",f=Math.sin(l-u)*Math.cos(s),d=Math.cos(a)*Math.sin(s)-Math.sin(a)*Math.cos(s)*Math.cos(l-u);return{degrees:m(Math.atan2(f,d)),compass:"".concat(c).concat(h)}},e.getSatelliteInfo=ge,e.getSatelliteName=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=E(e),r=n.name;return t?r||ae(n,!0):r||"Unknown"},e.getSecondTimeDerivative=function(e,t){return G(e,D,t)},e.getTleSetNumber=function(e,t){return G(e,B,t)},e.getVisibleSatellites=function(e){var t=e.observerLat,n=e.observerLng,r=e.observerHeight,i=void 0===r?0:r,o=e.tles,a=void 0===o?[]:o,s=e.elevationThreshold,u=void 0===s?0:s,l=e.timestampMS,c=void 0===l?Date.now():l;return a.reduce((function(e,r,o){var a,s=r[1],l=pe.slowMoving[s];if(l)return l.info.elevation>=u?e.concat(l):e;try{a=ge(r,c,t,n,i)}catch(d){return e}var h=a,f=h.elevation;return h.velocity/h.range<.001&&(pe.slowMoving[s]={tleArr:r,info:a}),f>=u?e.concat({tleArr:r,info:a}):e}),[])},e.isValidTLE=function(e){var t;try{t=E(e)}catch(a){return!1}var n=S(t,1),r=S(t,2);if(!n||!r)return!1;var i=T(t,1),o=T(t,2);return!(!i||!o)},e.parseTLE=E,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(144))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(166),i=(n(0),n(46));function o(){return Object(r.a)()||i.a}},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(4),a=n(19),s=n(26),u=n(40),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),c=new a.ErrorFactory("app","Firebase",l),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.Logger("@firebase/app"),d=function(){function e(e,t,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var l=o.__values(this.firebase_.INTERNAL.components.values()),c=l.next();!c.done;c=l.next()){var h=c.value;this._addComponent(h)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){f.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},e}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!==typeof s||!s)throw c.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw c.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=h[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}l(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!==typeof e)throw c.create("invalid-log-argument",{appName:name});u.setUserLogHandler(e,t)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:l,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(e=e||"[DEFAULT]",!a.contains(t,e))throw c.create("no-app",{appName:e});return t[e]}function l(s){var u,l,h=s.name;if(n.has(h))return f.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var d=function(e){if(void 0===e&&(e=i()),"function"!==typeof e[h])throw c.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==s.serviceProps&&a.deepExtend(d,s.serviceProps),r[h]=d,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?e:[])}}try{for(var p=o.__values(Object.keys(t)),m=p.next();!m.done;m=p.next()){var g=m.value;t[g]._addComponent(s)}}catch(A){u={error:A}}finally{try{m&&!m.done&&(l=p.return)&&l.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(d);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),m=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(a.isBrowser()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var A=p.initializeApp;p.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),A.apply(void 0,e)};var v=p;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new m(e)}),"PRIVATE")),e.registerVersion("@firebase/app","0.6.11",t),e.registerVersion("fire-js","")}(v),t.default=v,t.firebase=v},function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(5),i={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},o={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function a(e){return"".concat(Math.round(e),"ms")}t.a={easing:i,duration:o,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,s=void 0===n?o.standard:n,u=t.easing,l=void 0===u?i.easeInOut:u,c=t.delay,h=void 0===c?0:c;Object(r.a)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof s?s:a(s)," ").concat(l," ").concat("string"===typeof h?h:a(h))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}}},function(e,t,n){(function(t){e.exports=function(){var n,r,i;!function(e){function t(e,t){return y.call(e,t)}function o(e,t){var n,r,i,o,a,s,u,l,c,h,f,d=t&&t.split("/"),p=A.map,m=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),a=(e=e.split("/")).length-1,A.nodeIdCompat&&_.test(e[a])&&(e[a]=e[a].replace(_,"")),e=d.concat(e),c=0;c<e.length;c+=1)if("."===(f=e[c]))e.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||m)&&p){for(c=(n=e.split("/")).length;c>0;c-=1){if(r=n.slice(0,c).join("/"),d)for(h=d.length;h>0;h-=1)if((i=p[d.slice(0,h).join("/")])&&(i=i[r])){o=i,s=c;break}if(o)break;!u&&m&&m[r]&&(u=m[r],l=c)}!o&&u&&(o=u,s=l),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function a(t,n){return function(){var r=b.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(e,r.concat([t,n]))}}function s(e){return function(t){m[e]=t}}function u(n){if(t(g,n)){var r=g[n];delete g[n],v[n]=!0,h.apply(e,r)}if(!t(m,n)&&!t(v,n))throw new Error("No "+n);return m[n]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return A&&A.config&&A.config[e]||{}}}var h,f,d,p,m={},g={},A={},v={},y=Object.prototype.hasOwnProperty,b=[].slice,_=/\.js$/;d=function(e,t){var n,r=l(e),i=r[0];return e=r[1],i&&(n=u(i=o(i,t))),i?e=n&&n.normalize?n.normalize(e,function(e){return function(t){return o(t,e)}}(t)):o(e,t):(i=(r=l(e=o(e,t)))[0],e=r[1],i&&(n=u(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},p={require:function(e){return a(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:c(e)}}},h=function(n,r,i,o){var l,c,h,f,A,y,b=[],_=typeof i;if(o=o||n,"undefined"===_||"function"===_){for(r=!r.length&&i.length?["require","exports","module"]:r,A=0;A<r.length;A+=1)if(f=d(r[A],o),"require"===(c=f.f))b[A]=p.require(n);else if("exports"===c)b[A]=p.exports(n),y=!0;else if("module"===c)l=b[A]=p.module(n);else if(t(m,c)||t(g,c)||t(v,c))b[A]=u(c);else{if(!f.p)throw new Error(n+" missing "+c);f.p.load(f.n,a(o,!0),s(c),{}),b[A]=m[c]}h=i?i.apply(m[n],b):void 0,n&&(l&&l.exports!==e&&l.exports!==m[n]?m[n]=l.exports:h===e&&y||(m[n]=h))}else n&&(m[n]=i)},n=r=f=function(t,n,r,i,o){if("string"==typeof t)return p[t]?p[t](n):u(d(t,n).f);if(!t.splice){if((A=t).deps&&f(A.deps,A.callback),!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?h(e,t,n,r):setTimeout((function(){h(e,t,n,r)}),4),f},f.config=function(e){return f(e)},n._defined=m,(i=function(e,n,r){n.splice||(r=n,n=[]),t(m,e)||t(g,e)||(g[e]=[e,n,r])}).amd={jQuery:!0}}(),i("../tools/almond",(function(){})),i("formats/aaigrid/AAIGridConstants",[],(function(){"use strict";return{N_COLS:"ncols",N_ROWS:"nrows",X_LL_CORNER:"xllcorner",Y_LL_CORNER:"yllcorner",CELL_SIZE:"cellsize",NO_DATA_VALUE:"NODATA_value"}})),i("formats/aaigrid/AAIGridMetadata",[],(function(){"use strict";var e=function(){this._ncols=null,this._nrows=null,this._xllcorner=null,this._yllcorner=null,this._cellsize=null,this._NODATA_value=void 0};return Object.defineProperties(e.prototype,{ncols:{get:function(){return this._ncols},set:function(e){this._ncols=e}},nrows:{get:function(){return this._nrows},set:function(e){this._nrows=e}},xllcorner:{get:function(){return this._xllcorner},set:function(e){this._xllcorner=e}},yllcorner:{get:function(){return this._yllcorner},set:function(e){this._yllcorner=e}},cellsize:{get:function(){return this._cellsize},set:function(e){this._cellsize=e}},NODATA_value:{get:function(){return this._NODATA_value},set:function(e){this._NODATA_value=e}}}),e})),i("error/AbstractError",[],(function(){"use strict";var e=function(e,t){this.name=e,this.message=t};return e.prototype.toString=function(){var e=this.name+": "+this.message;return this.stack&&(e+="\n"+this.stack.toString()),e},e})),i("error/ArgumentError",["../error/AbstractError"],(function(e){"use strict";var t=function(t){var n;e.call(this,"ArgumentError",t);try{throw new Error}catch(e){n=e.stack}this.stack=n};return t.prototype=Object.create(e.prototype),t})),i("util/Logger",[],(function(){"use strict";var e={LEVEL_NONE:0,LEVEL_SEVERE:1,LEVEL_WARNING:2,LEVEL_INFO:3,setLoggingLevel:function(e){t=e},getLoggingLevel:function(){return t},log:function(n,r){r&&n>0&&n<=t&&(n===e.LEVEL_SEVERE?console.error(r):n===e.LEVEL_WARNING?console.warn(r):n===e.LEVEL_INFO?console.info(r):console.log(r))},makeMessage:function(e,t,n){return e+"."+t+": "+(this.messageTable[n]?this.messageTable[n]:n)},logMessage:function(e,t,n,r){var i=this.makeMessage(t,n,r);return this.log(e,i),i},messageTable:{abstractInvocation:"The function called is abstract and must be overridden in a subclass.",indexOutOfRange:"The specified index is out of range.",invalidColumn:"The specified column is out of range.",invalidHeight:"The specified height is zero or negative.",invalidWidth:"The specified width is zero or negative.",invalidRow:"The specified row is out of range.",invalidSize:"The specified size is zero or negative.",missingAltitudeMode:"The specified altitude mode is null or undefined.",missingArrayBuffer:"The specified array buffer is null or undefined",missingAttributeName:"The specified DBase attribute file name is null or undefined.",missingArray:"The specified array is null, undefined or of insufficient length.",missingBoundaries:"The specified boundaries array is null or undefined.",missingBuffer:"The specified buffer descriptor is null or undefined.",missingColor:"The specified color is null or undefined.",missingConfig:"The specified config is null or undefined.",missingDc:"The specified draw context is null or undefined.",missingDomElement:"The specified DOM element is null or undefined.",missingEntry:"The specified entry is null or undefined.",missingFont:"The specified font is null or undefined.",missingFrustum:"The specified frustum is null or undefined.",missingFunction:"The specified function is null or undefined.",missingGlContext:"The specified WebGL rendering context is null or undefined.",missingGlobe:"The specified globe is null or undefined.",missingId:"The specified id is null or undefined.",missingImage:"The specified image is null or undefined.",missingImageFormat:"The specified image format is null or undefined.",missingIndices:"The specified indices array is null or undefined.",missingKey:"The specified key is null or undefined.",missingLevel:"The specified level is null or undefined.",missingLine:"The specified line is null or undefined.",missingList:"The specified list is null or undefined.",missingListener:"The specified listener is null or undefined",missingLocation:"The specified location is null or undefined.",missingMatrix:"The specified matrix is null or undefined.",missingOffset:"The specified offset is null or undefined.",missingPath:"The specified path is null or undefined.",missingPlacename:"The specified place name is null or undefined.",missingPlane:"The specified plane is null or undefined.",missingPoint:"The specified point is null or undefined.",missingPoints:"The specified points array is null or undefined.",missingPosition:"The specified position is null or undefined.",missingPositions:"The specified positions array is null or undefined.",missingProgram:"The specified program is null or undefined.",missingProjection:"The specified projection is null or undefined.",missingRectangle:"The specified rectangle is null or undefined.",missingRenderable:"The specified renderable is null or undefined.",missingResolution:"The specified resolution is null, undefined, or zero.",missingResource:"The specified resource is null or undefined.",missingResult:"The specified result variable is null or undefined.",missingResults:"The specified results array is null or undefined.",missingSector:"The specified sector is null or undefined.",missingShapeType:"The specified shape type is null or undefined.",missingSize:"The specified size is null or undefined.",missingText:"The specified text is null or undefined.",missingTexture:"The specified texture is null or undefined.",missingTile:"The specified tile is null or undefined.",missingType:"The specified type is null or undefined.",missingUrl:"The specified URL is null or undefined",missingVector:"The specified vector is null or undefined.",missingVertex:"The specified vertex is null or undefined.",missingViewport:"The specified viewport is null or undefined.",missingWebCoverageService:"The specified WebCoverageService is null or undefined.",missingWorldWindow:"The specified WorldWindow is null or undefined.",notYetImplemented:"This function is not yet implemented",unsupportedVersion:"The specified version is not supported.",webglNotSupported:"The browser does not support WebGL, or WebGL is disabled."}},t=1;return e})),i("formats/aaigrid/AAIGridReader",["./AAIGridConstants","./AAIGridMetadata","../../error/ArgumentError","../../util/Logger"],(function(e,t,n,r){"use strict";var i=function(e){if(!e)throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","constructor","missingDataSource"));if("string"!=typeof e&&!(e instanceof ArrayBuffer))throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","constructor","invalidDataSource"));this._values=null,this._metadata=new t;var i=this.decodeData(e);this.parse(i)};return Object.defineProperties(i.prototype,{metadata:{get:function(){return this._metadata}}}),i.prototype.getImageData=function(){return this._values},i.prototype.decodeData=function(e){if("string"!=typeof e&&!(e instanceof ArrayBuffer))throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","decodeData","invalidDataSource"));if("string"==typeof e)return e;if("function"==typeof window.TextDecoder)return new TextDecoder("utf-8").decode(e);for(var t="",i=new Uint8Array(e),o=65535,a=0,s=i.length;a<s;a+=o)a+o>s&&(o=s-a),t+=String.fromCharCode.apply(null,i.subarray(a,a+o));return t},i.prototype.parse=function(t){if("string"!=typeof t)throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","parse","invalidDataString"));for(var i=t.replace(/\r?\n|\r/g,"\n").split("\n"),o=[],a=!0,s=0,u=i.length;s<u;s++){var l=i[s];if(l){var c=l.trim().split(" ").map((function(e){return e.trim()})).filter((function(e){return""!==e}));if(c[0]===e.N_COLS)this.metadata.ncols=+c[1];else if(c[0]===e.N_ROWS)this.metadata.nrows=+c[1];else if(c[0]===e.X_LL_CORNER)this.metadata.xllcorner=+c[1];else if(c[0]===e.Y_LL_CORNER)this.metadata.yllcorner=+c[1];else if(c[0]===e.CELL_SIZE)this.metadata.cellsize=+c[1];else if(c[0]===e.NO_DATA_VALUE)this.metadata.NODATA_value=+c[1];else if(isFinite(+c[0])){var h=c.map((function(e){var t=+e;return Math.floor(t)!==t&&(a=!1),t}));o=o.concat(h)}}}this._values=a?new Int16Array(o):new Float32Array(o)},i.retrieveFromUrl=function(e,t){if(!e)throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","retrieveFromUrl","missingUrl"));if(!t)throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","retrieveFromUrl","The specified callback is null or undefined."));var o=new XMLHttpRequest;o.onload=function(){this.status>=200&&this.status<300?t(new i(this.response),o):(r.log(r.LEVEL_WARNING,"AAIGrid retrieval failed ("+o.statusText+"): "+e),t(null,o))},o.onerror=function(){r.log(r.LEVEL_WARNING,"AAIGrid retrieval failed: "+e),t(null,o)},o.ontimeout=function(){r.log(r.LEVEL_WARNING,"AAIGrid retrieval timed out: "+e),t(null,o)},o.open("GET",e,!0),o.responseType="arraybuffer",o.send(null)},i})),i("geom/Angle",[],(function(){"use strict";return{DEGREES_TO_RADIANS:Math.PI/180,RADIANS_TO_DEGREES:180/Math.PI,TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,normalizedDegrees:function(e){var t=e%360;return t>180?t-360:t<-180?360+t:t},normalizedDegreesLatitude:function(e){var t=e%180;return t>90?180-t:t<-90?-180-t:t},normalizedDegreesLongitude:function(e){var t=e%360;return t>180?t-360:t<-180?360+t:t},normalizedRadians:function(e){var t=e%this.TWO_PI;return t>Math.PI?t-this.TWO_PI:t<-Math.PI?this.TWO_PI+t:t},normalizedRadiansLatitude:function(e){var t=e%Math.PI;return t>this.HALF_PI?Math.PI-t:t<-this.HALF_PI?-Math.PI-t:t},normalizedRadiansLongitude:function(e){var t=e%this.TWO_PI;return t>Math.PI?t-this.TWO_PI:t<-Math.PI?this.TWO_PI+t:t},isValidLatitude:function(e){return e>=-90&&e<=90},isValidLongitude:function(e){return e>=-180&&e<=180},toString:function(e){return e.toString()+"\xb0"},toDecimalDegreesString:function(e){return e.toString()+"\xb0"},toDMSString:function(e){var t,n,r,i,o;return n=60*((n=60*((n=(t=e<0?-1:1)*e)-(r=Math.floor(n))))-(i=Math.floor(n))),60==(o=Math.round(n))&&(i++,o=0),60==i&&(r++,i=0),(-1==t?"-":"")+r+"\xb0 "+i+"\u2019 "+o+"\u201d"},toDMString:function(e){var t,n,r,i,o;return n=60*((n=60*((n=(t=e<0?-1:1)*e)-(r=Math.floor(n))))-(i=Math.floor(n))),60==(o=Math.round(n))&&(i++,o=0),60==i&&(r++,i=0),(-1==t?"-":"")+r+"\xb0 "+(0==o?i:i+o/60)+"\u2019"}}})),i("util/Color",["../util/Logger"],(function(e){"use strict";var t=function(e,t,n,r){this.red=e,this.green=t,this.blue=n,this.alpha=r};return t.WHITE=new t(1,1,1,1),t.BLACK=new t(0,0,0,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.CYAN=new t(0,1,1,1),t.YELLOW=new t(1,1,0,1),t.MAGENTA=new t(1,0,1,1),t.LIGHT_GRAY=new t(.75,.75,.75,1),t.MEDIUM_GRAY=new t(.5,.5,.5,1),t.DARK_GRAY=new t(.25,.25,.25,1),t.TRANSPARENT=new t(0,0,0,0),t.prototype.set=function(e,t,n,r){return this.red=e,this.green=t,this.blue=n,this.alpha=r,this},t.prototype.copy=function(t){if(!t)throw new ArgumentError(e.logMessage(e.LEVEL_SEVERE,"Color","copy","missingColor"));return this.red=t.red,this.green=t.green,this.blue=t.blue,this.alpha=t.alpha,this},t.prototype.clone=function(){return new t(this.red,this.green,this.blue,this.alpha)},t.prototype.premultipliedComponents=function(e){var t=this.alpha;return e[0]=this.red*t,e[1]=this.green*t,e[2]=this.blue*t,e[3]=t,e},t.colorFromByteArray=function(e){return new t(e[0]/255,e[1]/255,e[2]/255,e[3]/255)},t.colorFromBytes=function(e,n,r,i){return new t(e/255,n/255,r/255,i/255)},t.colorFromHex=function(e){var n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),o=parseInt(e.substring(6,8),16);return t.colorFromBytes(n,r,i,o)},t.colorFromKmlHex=function(e){var n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),o=parseInt(e.substring(6,8),16);return t.colorFromBytes(o,i,r,n)},t.prototype.nextColor=function(){var e=Math.round(255*this.red),t=Math.round(255*this.green),n=Math.round(255*this.blue);return e<255?this.red=(e+1)/255:t<255?(this.red=0,this.green=(t+1)/255):n<255?(this.red=0,this.green=0,this.blue=(n+1)/255):(this.red=1/255,this.green=0,this.blue=0),this},t.prototype.equals=function(e){var t=Math.round(255*this.red),n=Math.round(255*this.green),r=Math.round(255*this.blue),i=Math.round(255*this.alpha),o=Math.round(255*e.red),a=Math.round(255*e.green),s=Math.round(255*e.blue),u=Math.round(255*e.alpha);return t===o&&n===a&&r===s&&i===u},t.prototype.equalsBytes=function(e){var t=Math.round(255*this.red),n=Math.round(255*this.green),r=Math.round(255*this.blue),i=Math.round(255*this.alpha);return t===e[0]&&n===e[1]&&r===e[2]&&i===e[3]},t.prototype.toByteString=function(){return"("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+","+Math.round(255*this.alpha)+")"},t.prototype.toHexString=function(e){var t=Math.ceil(255*this.red).toString(16),n=Math.ceil(255*this.green).toString(16),r=Math.ceil(255*this.blue).toString(16),i=Math.ceil(255*this.alpha).toString(16),o="#";return o+=t.length<2?"0"+t:t,o+=n.length<2?"0"+n:n,o+=r.length<2?"0"+r:r,e&&(o+=i.length<2?"0"+i:i),o},t.prototype.toCssColorString=function(){return"rgba("+Math.round(255*this.red)+", "+Math.round(255*this.green)+", "+Math.round(255*this.blue)+", "+this.alpha+")"},t})),i("util/Font",["../error/ArgumentError","../util/Color","../util/Logger"],(function(e,t,n){"use strict";var r=function(t,r,i,o,a,s){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Font","constructor","missingSize"));if(t<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"Font","constructor","invalidSize"));this._size=t,this.style=r||"normal",this.variant=i||"normal",this.weight=o||"normal",this.family=a||"sans-serif",this.horizontalAlignment=s||"center"};return Object.defineProperties(r.prototype,{size:{get:function(){return this._size},set:function(e){this._fontString=null,this._size=e}},style:{get:function(){return this._style},set:function(e){this._fontString=null,this._style=e}},variant:{get:function(){return this._variant},set:function(e){this._fontString=null,this._variant=e}},weight:{get:function(){return this._weight},set:function(e){this._fontString=null,this._weight=e}},family:{get:function(){return this._family},set:function(e){this._fontString=null,this._family=e}},horizontalAlignment:{get:function(){return this._horizontalAlignment},set:function(e){this._toString=null,this._horizontalAlignment=e}},fontString:{get:function(){return this._fontString||(this._fontString=this._style+" "+this.variant+" "+this._weight+" "+this._size.toString()+"px "+this._family),this._fontString}}}),r.prototype.toString=function(){return this._toString&&this._fontString||(this._toString=this.fontString+" "+this.horizontalAlignment),this._toString},r})),i("util/Insets",["../error/ArgumentError","../util/Logger"],(function(e,t){"use strict";var n=function(n,r,i,o){if(4!==arguments.length)throw new e(t.logMessage(t.LEVEL_SEVERE,"Insets","constructor","invalidArgumentCount"));this._top=n,this._left=r,this._bottom=i,this._right=o};return n.prototype.set=function(e,t,n,r){this._top=e,this._left=t,this._bottom=n,this._right=r},n.prototype.clone=function(){return new n(this._top,this._left,this._bottom,this._right)},n.prototype.toString=function(){return this._top+" "+this._left+" "+this._bottom+" "+this._right},Object.defineProperties(n.prototype,{top:{get:function(){return this._top},set:function(e){this._top=e}},left:{get:function(){return this._left},set:function(e){this._left=e}},bottom:{get:function(){return this._bottom},set:function(e){this._bottom=e}},right:{get:function(){return this._right},set:function(e){this._right=e}}}),n})),i("geom/Vec3",["../util/Logger","../error/ArgumentError"],(function(e,t){"use strict";var n=function(e,t,n){this[0]=e,this[1]=t,this[2]=n};return n.prototype=new Float64Array(3),n.ZERO=new n(0,0,0),n.average=function(n,r){if(!n||n.length<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","average","missingArray"));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","average","missingResult"));var i,o=n.length;r[0]=0,r[1]=0,r[2]=0;for(var a=0,s=n.length;a<s;a++)i=n[a],r[0]+=i[0]/o,r[1]+=i[1]/o,r[2]+=i[2]/o;return r},n.averageOfBuffer=function(n,r){if(!n||n.length<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","averageBuffer","missingArray"));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","averageBuffer","missingResult"));var i=n.length/3;r[0]=0,r[1]=0,r[2]=0;for(var o=0;o<i;o++)r[0]+=n[3*o]/i,r[1]+=n[3*o+1]/i,r[2]+=n[3*o+2]/i;return r},n.areColinear=function(r,i,o){if(!r||!i||!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","areColinear","missingVector"));var a=new n(r[0]-i[0],r[1]-i[1],r[2]-i[2]).normalize(),s=new n(o[0]-i[0],o[1]-i[1],o[2]-i[2]).normalize();return Math.abs(a.dot(s))>.999},n.computeTriangleNormal=function(r,i,o){if(!r||!i||!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","areColinear","missingVector"));var a=(i[1]-r[1])*(o[2]-r[2])-(i[2]-r[2])*(o[1]-r[1]),s=(i[2]-r[2])*(o[0]-r[0])-(i[0]-r[0])*(o[2]-r[2]),u=(i[0]-r[0])*(o[1]-r[1])-(i[1]-r[1])*(o[0]-r[0]),l=a*a+s*s+u*u;return 0===l?new n(a,s,u):(l=Math.sqrt(l),new n(a/l,s/l,u/l))},n.findThreeIndependentVertices=function(e,t){var r=t&&t>0?t:3;if(!e||e.length<3*r)return null;for(var i=new n(e[0],e[1],e[2]),o=null,a=null,s=r;s<e.length&&(o=new n(e[s],e[s+1],e[s+2]))[0]===i[0]&&o[1]===i[1]&&o[2]===i[2];s+=r)o=null;if(!o)return null;for(s+=r;s<e.length&&((a=new n(e[s],e[s+1],e[s+2]))[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]||a[0]===o[0]&&a[1]===o[1]&&a[2]===o[2]||n.areColinear(i,o,a));s+=r)a=null;return a?[i,o,a]:null},n.computeBufferNormal=function(e,t){var r=n.findThreeIndependentVertices(e,t);return r?n.computeTriangleNormal(r[0],r[1],r[2]):null},n.prototype.set=function(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this},n.prototype.copy=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","copy","missingVector"));return this[0]=n[0],this[1]=n[1],this[2]=n[2],this},n.prototype.equals=function(e){return this[0]===e[0]&&this[1]===e[1]&&this[2]===e[2]},n.prototype.add=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","add","missingVector"));return this[0]+=n[0],this[1]+=n[1],this[2]+=n[2],this},n.prototype.subtract=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","subtract","missingVector"));return this[0]-=n[0],this[1]-=n[1],this[2]-=n[2],this},n.prototype.multiply=function(e){return this[0]*=e,this[1]*=e,this[2]*=e,this},n.prototype.divide=function(e){return this[0]/=e,this[1]/=e,this[2]/=e,this},n.prototype.multiplyByMatrix=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","multiplyByMatrix","missingMatrix"));var r=n[0]*this[0]+n[1]*this[1]+n[2]*this[2]+n[3],i=n[4]*this[0]+n[5]*this[1]+n[6]*this[2]+n[7],o=n[8]*this[0]+n[9]*this[1]+n[10]*this[2]+n[11],a=n[12]*this[0]+n[13]*this[1]+n[14]*this[2]+n[15];return this[0]=r/a,this[1]=i/a,this[2]=o/a,this},n.prototype.mix=function(n,r){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","mix","missingVector"));var i=1-r,o=r;return this[0]=this[0]*i+n[0]*o,this[1]=this[1]*i+n[1]*o,this[2]=this[2]*i+n[2]*o,this},n.prototype.negate=function(){return this[0]=-this[0],this[1]=-this[1],this[2]=-this[2],this},n.prototype.dot=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","dot","missingVector"));return this[0]*n[0]+this[1]*n[1]+this[2]*n[2]},n.prototype.cross=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","cross","missingVector"));var r=this[1]*n[2]-this[2]*n[1],i=this[2]*n[0]-this[0]*n[2],o=this[0]*n[1]-this[1]*n[0];return this[0]=r,this[1]=i,this[2]=o,this},n.prototype.magnitudeSquared=function(){return this.dot(this)},n.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSquared())},n.prototype.normalize=function(){var e=1/this.magnitude();return this[0]*=e,this[1]*=e,this[2]*=e,this},n.prototype.distanceToSquared=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","distanceToSquared","missingVector"));var r=this[0]-n[0],i=this[1]-n[1],o=this[2]-n[2];return r*r+i*i+o*o},n.prototype.distanceTo=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec3","distanceTo","missingVector"));return Math.sqrt(this.distanceToSquared(n))},n.prototype.swap=function(e){var t=this[0];return this[0]=e[0],e[0]=t,t=this[1],this[1]=e[1],e[1]=t,t=this[2],this[2]=e[2],e[2]=t,this},n.prototype.toString=function(){return"("+this[0]+", "+this[1]+", "+this[2]+")"},n})),i("geom/Vec2",["../util/Logger","../error/ArgumentError","../geom/Vec3"],(function(e,t,n){"use strict";var r=function(e,t){this[0]=e,this[1]=t};return(r.prototype=new Float64Array(2)).set=function(e,t){return this[0]=e,this[1]=t,this},r.prototype.copy=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec2","copy","missingVector"));return this[0]=n[0],this[1]=n[1],this},r.prototype.equals=function(e){return this[0]===e[0]&&this[1]===e[1]},r.average=function(n,r){if(!n||n.length<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec2","average","missingArray"));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec2","average","missingResult"));var i,o=n.length;r[0]=0,r[1]=0;for(var a=0,s=n.length;a<s;a++)i=n[a],r[0]+=i[0]/o,r[1]+=i[1]/o;return r},r.prototype.add=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec2","add","missingVector"));return this[0]+=n[0],this[1]+=n[1],this},r.prototype.subtract=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec2","subtract","missingVector"));return this[0]-=n[0],this[1]-=n[1],this},r.prototype.multiply=function(e){return this[0]*=e,this[1]*=e,this},r.prototype.divide=function(e){return this[0]/=e,this[1]/=e,this},r.prototype.mix=function(n,r){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec2","mix","missingVector"));var i=1-r,o=r;return this[0]=this[0]*i+n[0]*o,this[1]=this[1]*i+n[1]*o,this},r.prototype.negate=function(){return this[0]=-this[0],this[1]=-this[1],this},r.prototype.dot=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec2","dot","missingVector"));return this[0]*n[0]+this[1]*n[1]},r.prototype.magnitudeSquared=function(){return this.dot(this)},r.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSquared())},r.prototype.normalize=function(){var e=1/this.magnitude();return this[0]*=e,this[1]*=e,this},r.prototype.distanceToSquared=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec2","distanceToSquared","missingVector"));var r=this[0]-n[0],i=this[1]-n[1];return r*r+i*i},r.prototype.distanceTo=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Vec2","distanceTo","missingVector"));return Math.sqrt(this.distanceToSquared(n))},r.prototype.toVec3=function(){return new n(this[0],this[1],0)},r.prototype.swap=function(e){var t=this[0];return this[0]=e[0],e[0]=t,t=this[1],this[1]=e[1],e[1]=t,this},r.prototype.toString=function(){return"("+this[0]+", "+this[1]+")"},r})),i("util/Offset",["../geom/Vec2"],(function(e){"use strict";var t=function(e,t,n,r){this.x=t,this.y=r,this.xUnits=e,this.yUnits=n};return t.prototype.clone=function(){return new t(this.xUnits,this.x,this.yUnits,this.y)},t.prototype.offsetForSize=function(t,n){var r,i;return r=this.xUnits===WorldWind.OFFSET_FRACTION?t*this.x:this.xUnits===WorldWind.OFFSET_INSET_PIXELS?t-this.x:this.x,i=this.yUnits===WorldWind.OFFSET_FRACTION?n*this.y:this.yUnits===WorldWind.OFFSET_INSET_PIXELS?n-this.y:this.y,new e(r,i)},t.prototype.toString=function(){return this.xUnits+" "+this.x+" "+this.yUnits+" "+this.y},t})),i("shapes/TextAttributes",["../util/Color","../util/Font","../util/Offset"],(function(e,t,n){"use strict";var r=function(r){this._color=r?r._color.clone():e.WHITE.clone(),this._font=r?r._font:new t(14),this._offset=r?r._offset:new n(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,0),this._scale=r?r._scale:1,this._depthTest=!!r&&r._depthTest,this._enableOutline=!r||r._enableOutline,this._outlineWidth=r?r._outlineWidth:4,this._outlineColor=r?r._outlineColor:new e(0,0,0,.5),this.stateKeyInvalid=!0};return r.prototype.computeStateKey=function(){return"c "+this._color.toHexString(!0)+" f "+this._font.toString()+" o "+this._offset.toString()+" s "+this._scale+" dt "+this._depthTest+" eo "+this._enableOutline+" ow "+this._outlineWidth+" oc "+this._outlineColor.toHexString(!0)},Object.defineProperties(r.prototype,{stateKey:{get:function(){return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey(),this.stateKeyInvalid=!1),this._stateKey}},color:{get:function(){return this._color},set:function(e){this._color=e,this.stateKeyInvalid=!0}},font:{get:function(){return this._font},set:function(e){this._font=e,this.stateKeyInvalid=!0}},offset:{get:function(){return this._offset},set:function(e){this._offset=e,this.stateKeyInvalid=!0}},scale:{get:function(){return this._scale},set:function(e){this._scale=e,this.stateKeyInvalid=!0}},depthTest:{get:function(){return this._depthTest},set:function(e){this._depthTest=e,this.stateKeyInvalid=!0}},enableOutline:{get:function(){return this._enableOutline},set:function(e){this._enableOutline=e,this.stateKeyInvalid=!0}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth=e,this.stateKeyInvalid=!0}},outlineColor:{get:function(){return this._outlineColor},set:function(e){this._outlineColor=e,this.stateKeyInvalid=!0}}}),r})),i("shapes/AnnotationAttributes",["../util/Color","../util/Font","../util/Insets","../shapes/TextAttributes"],(function(e,t,n,r){"use strict";var i=function(t){this._cornerRadius=t?t._cornerRadius:0,this._insets=t?t._insets:new n(0,0,0,0),this._backgroundColor=t?t._backgroundColor.clone():e.WHITE.clone(),this._leaderGapWidth=t?t._leaderGapWidth:40,this._leaderGapHeight=t?t._leaderGapHeight:30,this._opacity=t?t._opacity:1,this._scale=t?t._scale:1,this._drawLeader=!t||t._drawLeader,this._width=t?t._width:200,this._height=t?t._height:100,this._textAttributes=t?t._textAttributes:this.createDefaultTextAttributes(),this.stateKeyInvalid=!0};return i.prototype.computeStateKey=function(){return"wi "+this._width+" he "+this._height+" cr "+this._cornerRadius+" in "+this._insets.toString()+" bg "+this.backgroundColor.toHexString(!0)+" dl "+this.drawLeader+" lgw "+this.leaderGapWidth+" lgh "+this.leaderGapHeight+" op "+this.opacity+" ta "+this._textAttributes.stateKey+" sc "+this.scale},i.prototype.createDefaultTextAttributes=function(){var e=new r(null);return e.enableOutline=!1,e},Object.defineProperties(i.prototype,{width:{get:function(){return this._width},set:function(e){this._width=e,this.stateKeyInvalid=!0}},height:{get:function(){return this._height},set:function(e){this._height=e,this.stateKeyInvalid=!0}},cornerRadius:{get:function(){return this._cornerRadius},set:function(e){this._cornerRadius=e,this.stateKeyInvalid=!0}},insets:{get:function(){return this._insets},set:function(e){this._insets=e,this.stateKeyInvalid=!0}},backgroundColor:{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this.stateKeyInvalid=!0}},textAttributes:{get:function(){return this._textAttributes},set:function(e){this._textAttributes=e,this.stateKeyInvalid=!0}},drawLeader:{get:function(){return this._drawLeader},set:function(e){this._drawLeader=e,this.stateKeyInvalid=!0}},leaderGapWidth:{get:function(){return this._leaderGapWidth},set:function(e){this._leaderGapWidth=e,this.stateKeyInvalid=!0}},leaderGapHeight:{get:function(){return this._leaderGapHeight},set:function(e){this._leaderGapHeight=e,this.stateKeyInvalid=!0}},opacity:{get:function(){return this._opacity},set:function(e){this._opacity=e,this.stateKeyInvalid=!0}},scale:{get:function(){return this._scale},set:function(e){this._scale=e,this.stateKeyInvalid=!0}},stateKey:{get:function(){return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey(),this.stateKeyInvalid=!1),this._stateKey}}}),i})),i("shaders/GpuShader",["../error/ArgumentError","../util/Logger"],(function(e,t){"use strict";var n=function(n,r,i){if(r!==n.VERTEX_SHADER&&r!==n.FRAGMENT_SHADER)throw new e(t.logMessage(t.LEVEL_SEVERE,"GpuShader","constructor","The specified shader type is unrecognized."));if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"GpuShader","constructor","The specified shader source is null or undefined."));var o=n.createShader(r);if(!o)throw new e(t.logMessage(t.LEVEL_SEVERE,"GpuShader","constructor","Unable to create shader of type "+(r==n.VERTEX_SHADER?"VERTEX_SHADER.":"FRAGMENT_SHADER.")));if(!this.compile(n,o,r,i)){var a=n.getShaderInfoLog(o);throw n.deleteShader(o),new e(t.logMessage(t.LEVEL_SEVERE,"GpuShader","constructor","Unable to compile shader: "+a))}this.shaderId=o};return n.prototype.compile=function(e,t,n,r){return e.shaderSource(t,r),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)},n.prototype.dispose=function(e){this.shaderId&&(e.deleteShader(this.shaderId),delete this.shaderId)},n})),i("shaders/GpuProgram",["../error/ArgumentError","../util/Color","../shaders/GpuShader","../util/Logger"],(function(e,t,n,r){"use strict";var i=function(t,i,o,a){if(!i||!o)throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","constructor","The specified shader source is null or undefined."));var s,u,l;try{u=new n(t,t.VERTEX_SHADER,i),l=new n(t,t.FRAGMENT_SHADER,o)}catch(e){throw u&&u.dispose(t),l&&l.dispose(t),e}if(!(s=t.createProgram()))throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","constructor","Unable to create shader program."));if(t.attachShader(s,u.shaderId),t.attachShader(s,l.shaderId),a)for(var c=0,h=a.length;c<h;c++)t.bindAttribLocation(s,c,a[c]);if(!this.link(t,s)){var f=t.getProgramInfoLog(s);throw t.detachShader(s,u.shaderId),t.detachShader(s,l.shaderId),t.deleteProgram(s),u.dispose(t),l.dispose(t),new e(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","constructor","Unable to link shader program: "+f))}this.programId=s,this.attributeLocations={},this.uniformLocations={},this.vertexShader=u,this.fragmentShader=l,this.size=i.length+o.length,this.scratchArray=new Float32Array(16)};return i.prototype.dispose=function(e){this.programId&&(this.vertexShader&&e.detachShader(this.programId,this.vertexShader.shaderId),this.fragmentShader&&e.detachShader(this.programId,this.fragmentShader.shaderId),e.deleteProgram(this.programId),delete this.programId),this.vertexShader&&(this.vertexShader.dispose(e),delete this.vertexShader),this.fragmentShader&&(this.fragmentShader.dispose(e),delete this.fragmentShader),this.attributeLocations={},this.uniformLocations={}},i.prototype.attributeLocation=function(t,n){if(!n||0==n.length)throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","attributeLocation","The specified attribute name is null, undefined or empty."));var i=this.attributeLocations[n];return i||(i=t.getAttribLocation(this.programId,n),this.attributeLocations[n]=i),i},i.prototype.uniformLocation=function(t,n){if(!n||0==n.length)throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","uniformLocation","The specified uniform name is null, undefined or empty."));var i=this.uniformLocations[n];return i||(i=t.getUniformLocation(this.programId,n),this.uniformLocations[n]=i),i},i.prototype.link=function(e,t){return e.linkProgram(t),e.getProgramParameter(t,e.LINK_STATUS)},i.prototype.loadUniformMatrix=function(t,n,i){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","loadUniformMatrix","missingMatrix"));var o=n.columnMajorComponents(this.scratchArray);t.uniformMatrix4fv(i,!1,o)},i.prototype.loadUniformColor=function(t,n,i){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","loadUniformColor","missingColor"));var o=n.premultipliedComponents(this.scratchArray);t.uniform4f(i,o[0],o[1],o[2],o[3])},i.prototype.loadUniformColorComponents=function(e,t,n,r,i,o){e.uniform4f(o,t*i,n*i,r*i,i)},i})),i("shaders/BasicTextureProgram",["../error/ArgumentError","../util/Color","../shaders/GpuProgram","../util/Logger"],(function(e,t,n,r){"use strict";var i=function(e){n.call(this,e,"attribute vec4 vertexPoint;\nattribute vec4 vertexTexCoord;\nattribute vec4 normalVector;\nuniform mat4 mvpMatrix;\nuniform mat4 mvInverseMatrix;\nuniform mat4 texCoordMatrix;\nuniform bool applyLighting;\nvarying vec2 texCoord;\nvarying vec4 normal;\nvoid main() {gl_Position = mvpMatrix * vertexPoint;\ntexCoord = (texCoordMatrix * vertexTexCoord).st;\nif (applyLighting) {normal = mvInverseMatrix * normalVector;}\n}","precision mediump float;\nuniform float opacity;\nuniform vec4 color;\nuniform bool enableTexture;\nuniform bool modulateColor;\nuniform sampler2D textureSampler;\nuniform bool applyLighting;\nvarying vec2 texCoord;\nvarying vec4 normal;\nvoid main() {\nvec4 textureColor = texture2D(textureSampler, texCoord);\nfloat ambient = 0.15; vec4 lightDirection = vec4(0, 0, 1, 0);\nif (enableTexture && !modulateColor)\n    gl_FragColor = textureColor * color * opacity;\nelse if (enableTexture && modulateColor)\n    gl_FragColor = color * floor(textureColor.a + 0.5);\nelse\n    gl_FragColor = color * opacity;\nif (gl_FragColor.a == 0.0) {discard;}\nif (applyLighting) {\n    vec4 n = normal * (gl_FrontFacing ? 1.0 : -1.0);\n    gl_FragColor.rgb *= clamp(ambient + dot(lightDirection, n), 0.0, 1.0);\n}\n}",["vertexPoint","normalVector","vertexTexCoord"]),this.vertexPointLocation=this.attributeLocation(e,"vertexPoint"),this.normalVectorLocation=this.attributeLocation(e,"normalVector"),this.vertexTexCoordLocation=this.attributeLocation(e,"vertexTexCoord"),this.mvpMatrixLocation=this.uniformLocation(e,"mvpMatrix"),this.mvInverseMatrixLocation=this.uniformLocation(e,"mvInverseMatrix"),this.colorLocation=this.uniformLocation(e,"color"),this.textureEnabledLocation=this.uniformLocation(e,"enableTexture"),this.modulateColorLocation=this.uniformLocation(e,"modulateColor"),this.textureUnitLocation=this.uniformLocation(e,"textureSampler"),this.textureMatrixLocation=this.uniformLocation(e,"texCoordMatrix"),this.opacityLocation=this.uniformLocation(e,"opacity"),this.applyLightingLocation=this.uniformLocation(e,"applyLighting")};return i.key="WorldWindGpuBasicTextureProgram",(i.prototype=Object.create(n.prototype)).loadModelviewInverse=function(t,n){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"BasicTextureProgram","loadModelviewInverse","missingMatrix"));this.loadUniformMatrix(t,n,this.mvInverseMatrixLocation)},i.prototype.loadModelviewProjection=function(t,n){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"BasicTextureProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(t,n,this.mvpMatrixLocation)},i.prototype.loadColor=function(t,n){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"BasicTextureProgram","loadColor","missingColor"));this.loadUniformColor(t,n,this.colorLocation)},i.prototype.loadTextureEnabled=function(e,t){e.uniform1i(this.textureEnabledLocation,t?1:0)},i.prototype.loadModulateColor=function(e,t){e.uniform1i(this.modulateColorLocation,t?1:0)},i.prototype.loadTextureUnit=function(e,t){e.uniform1i(this.textureUnitLocation,t-e.TEXTURE0)},i.prototype.loadTextureMatrix=function(e,t){this.loadUniformMatrix(e,t,this.textureMatrixLocation)},i.prototype.loadOpacity=function(e,t){e.uniform1f(this.opacityLocation,t)},i.prototype.loadApplyLighting=function(e,t){e.uniform1i(this.applyLightingLocation,t)},i})),i("geom/Line",["../error/ArgumentError","../util/Logger","../geom/Vec3"],(function(e,t,n){"use strict";var r=function(n,r){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Line","constructor","Origin is null or undefined."));if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"Line","constructor","Direction is null or undefined."));this.origin=n,this.direction=r};return r.fromSegment=function(i,o){if(!i||!o)throw new e(t.logMessage(t.LEVEL_SEVERE,"Line","fromSegment","missingPoint"));var a=new n(i[0],i[1],i[2]),s=new n(o[0]-i[0],o[1]-i[1],o[2]-i[2]);return new r(a,s)},r.prototype.pointAt=function(n,r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"Line","pointAt","missingResult."));return r[0]=this.origin[0]+this.direction[0]*n,r[1]=this.origin[1]+this.direction[1]*n,r[2]=this.origin[2]+this.direction[2]*n,r},r.prototype.equals=function(e){return!!e&&this.origin.equals(e.origin)&&this.direction.equals(e.direction)},r.prototype.clone=function(){var e=new r(new n(0,0,0),new n(0,0,0));return e.copy(this),e},r.prototype.copy=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Line","copy","missingLine"));return this.origin.copy(n.origin),this.direction.copy(n.direction),this},r})),i("geom/Plane",["../error/ArgumentError","../geom/Line","../util/Logger","../geom/Vec3"],(function(e,t,n,r){"use strict";var i=function(e,t,n,i){this.normal=new r(e,t,n),this.distance=i};return i.fromPoints=function(t,o,a){if(!t||!o||!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"Plane","fromPoints","missingVector"));var s=new r(o[0],o[1],o[2]);s.subtract(t);var u=new r(a[0],a[1],a[2]);u.subtract(t),s.cross(u),s.normalize();var l=-s.dot(t);return new i(s[0],s[1],s[2],l)},i.prototype.dot=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Plane","dot","missingVector"));return this.normal.dot(t)+this.distance},i.prototype.distanceToPoint=function(e){return this.dot(e)},i.prototype.transformByMatrix=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Plane","transformByMatrix","missingMatrix"));var r=t[0]*this.normal[0]+t[1]*this.normal[1]+t[2]*this.normal[2]+t[3]*this.distance,i=t[4]*this.normal[0]+t[5]*this.normal[1]+t[6]*this.normal[2]+t[7]*this.distance,o=t[8]*this.normal[0]+t[9]*this.normal[1]+t[10]*this.normal[2]+t[11]*this.distance,a=t[12]*this.normal[0]+t[13]*this.normal[1]+t[14]*this.normal[2]+t[15]*this.distance;return this.normal[0]=r,this.normal[1]=i,this.normal[2]=o,this.distance=a,this},i.prototype.normalize=function(){var e=this.normal.magnitude();return 0===e||(this.normal.divide(e),this.distance/=e),this},i.prototype.intersectsSegment=function(e,t){return this.dot(e)*this.dot(t)<=0},i.prototype.intersectsSegmentAt=function(e,t,n){var r=this.dot(e),i=this.dot(t);if(0===r&&0===i)return n[0]=e[0],n[1]=e[1],n[2]=e[2],!0;if(r===i)return!1;var o=-r/(i-r),a=1-o;return n[0]=o*e[0]+a*t[0],n[1]=o*e[1]+a*t[1],n[2]=o*e[2]+a*t[2],r*i<=0},i.prototype.onSameSide=function(t,r){if(!t||!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Plane","onSameSide","missingPoint"));var i=this.distanceToPoint(t),o=this.distanceToPoint(r);return i<0&&o<0?-1:i>0&&o>0?1:0},i.prototype.clip=function(i,o){if(!i||!o)throw new e(n.logMessage(n.LEVEL_SEVERE,"Plane","clip","missingPoint"));if(i.equals(o))return null;var a,s,u=t.fromSegment(i,o),l=this.normal.dot(u.direction);return 0===l?0===this.dot(u.origin)?[i,o]:null:(a=-this.dot(u.origin)/l)<0||a>1?null:(s=u.pointAt(a,new r(0,0,0)),l>0?[s,o]:[i,s])},i})),i("geom/Rectangle",["../util/Logger"],(function(e){"use strict";var t=function(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r};return t.prototype.set=function(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r},t.prototype.getMinX=function(){return this.x},t.prototype.getMinY=function(){return this.y},t.prototype.getMaxX=function(){return this.x+this.width},t.prototype.getMaxY=function(){return this.y+this.height},t.prototype.containsPoint=function(e){return e[0]>=this.x&&e[0]<=this.x+this.width&&e[1]>=this.y&&e[1]<=this.y+this.height},t.prototype.intersects=function(e){return!(e.x+e.width<this.x)&&!(e.x>this.x+this.width)&&!(e.y+e.height<this.y)&&!(e.y>this.y+this.height)},t.prototype.intersectsRectangles=function(e){if(e)for(var t=0;t<e.length;t++)if(this.intersects(e[t]))return!0;return!1},t.prototype.toString=function(){return this.x+", "+this.y+", "+this.width+", "+this.height},t})),i("util/WWMath",["../geom/Angle","../error/ArgumentError","../geom/Line","../util/Logger","../geom/Rectangle","../geom/Vec3"],(function(e,t,n,r,i,o){"use strict";var a={clamp:function(e,t,n){return e<t?t:e>n?n:e},interpolate:function(e,t,n){return(1-e)*t+e*n},cbrt:function(e){return"function"==typeof Math.cbrt?Math.cbrt(e):Math.pow(e,1/3)},computeEllipsoidalGlobeIntersection:function(e,n,i,o){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeEllipsoidalGlobeIntersection","missingLine"));if(!o)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeEllipsoidalGlobeIntersection","missingResult"));var a,s=e.direction[0],u=e.direction[1],l=e.direction[2],c=e.origin[0],h=e.origin[1],f=e.origin[2],d=n/i,p=d*d,m=s*s+p*u*u+l*l,g=2*(c*s+p*h*u+f*l),A=g*g-4*m*(c*c+p*h*h+f*f-n*n);return!(A<0)&&(a=(-g-Math.sqrt(A))/(2*m),o[0]=c+s*a,o[1]=h+u*a,o[2]=f+l*a,!0)},computeTriangleNormal:function(e,n,i){if(!e||!n||!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriangleNormal","missingVertex"));var a=(n[1]-e[1])*(i[2]-e[2])-(n[2]-e[2])*(i[1]-e[1]),s=(n[2]-e[2])*(i[0]-e[0])-(n[0]-e[0])*(i[2]-e[2]),u=(n[0]-e[0])*(i[1]-e[1])-(n[1]-e[1])*(i[0]-e[0]),l=a*a+s*s+u*u;return 0==l?new o(a,s,u):(l=Math.sqrt(l),new o(a/l,s/l,u/l))},computeTriangleIntersection:function(e,n,i,o,a){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriangleIntersection","missingLine"));if(!n||!i||!o)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriangleIntersection","missingVertex"));if(!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriangleIntersection","missingResult"));var s=e.direction[0],u=e.direction[1],l=e.direction[2],c=e.origin[0],h=e.origin[1],f=e.origin[2],d=1e-5,p=i[0]-n[0],m=i[1]-n[1],g=i[2]-n[2],A=o[0]-n[0],v=o[1]-n[1],y=o[2]-n[2],b=u*y-l*v,_=l*A-s*y,w=s*v-u*A,E=p*b+m*_+g*w;if(E>-d&&E<d)return!1;var x=1/E,S=c-n[0],T=h-n[1],M=f-n[2],L=x*(S*b+T*_+M*w);if(L<-d||L>1+d)return!1;var C=T*g-M*m,R=M*p-S*g,O=S*m-T*p,I=x*(s*C+u*R+l*O);if(I<-d||L+I>1+d)return!1;var P=x*(A*C+v*R+y*O);return!(P<0)&&(a[0]=c+s*P,a[1]=h+u*P,a[2]=f+l*P,!0)},computeIndexedTrianglesIntersection:function(e,n,i,s){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingLine"));if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingPoints"));if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingIndices"));if(!s)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingResults"));for(var u=new o(0,0,0),l=new o(0,0,0),c=new o(0,0,0),h=new o(0,0,0),f=0,d=i.length;f<d;f+=3){var p=3*i[f],m=3*i[f+1],g=3*i[f+2];u[0]=n[p],u[1]=n[p+1],u[2]=n[p+2],l[0]=n[m],l[1]=n[m+1],l[2]=n[m+2],c[0]=n[g],c[1]=n[g+1],c[2]=n[g+2],a.computeTriangleIntersection(e,u,l,c,h)&&(s.push(h),h=new o(0,0,0))}return s.length>0},computeTriStripIntersections:function(e,n,i,a){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingLine"));if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingPoints"));if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingIndices"));if(!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingResults"));var s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w,E,x,S,T,M,L,C,R,O,I,P,k,N,D,F=e.direction[0],j=e.direction[1],B=e.direction[2],V=e.origin[0],G=e.origin[1],U=e.origin[2],q=1e-5;D=3*i[0],c=n[D++],h=n[D++],f=n[D],D=3*i[1],d=n[D++],p=n[D++],m=n[D];for(var W=2,z=i.length;W<z;W++)s=c,u=h,l=f,c=d,h=p,f=m,D=3*i[W],d=n[D++],p=n[D++],(k=(g=c-s)*(w=j*(_=(m=n[D])-l)-B*(b=p-u))+(A=h-u)*(E=B*(y=d-s)-F*_)+(v=f-l)*(x=F*b-j*y))>-q&&k<q||(O=(N=1/k)*((S=V-s)*w+(T=G-u)*E+(M=U-l)*x))<-q||O>1+q||(I=N*(F*(L=T*v-M*A)+j*(C=M*g-S*v)+B*(R=S*A-T*g)))<-q||O+I>1+q||(P=N*(y*L+b*C+_*R))>=0&&a.push(new o(V+F*P,G+j*P,U+B*P))},fabs:function(e){return e>=0?e:-e},fmod:function(e,t){return 0===t?0:e-Math.floor(e/t)*t},fract:function(e){return e-Math.floor(e)},mod:function(e,t){return(e%t+t)%t},max:function(e,t){return e>t?e:t},localCoordinateAxesAtPoint:function(e,n,i,o,a){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","localCoordinateAxesAtPoint","missingVector"));if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","localCoordinateAxesAtPoint","missingGlobe"));if(!i||!o||!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","localCoordinateAxesAtPoint","missingResult"));var s=e[0],u=e[1],l=e[2];n.surfaceNormalAtPoint(s,u,l,a),n.northTangentAtPoint(s,u,l,o),i.set(o[0],o[1],o[2]),i.cross(a),i.normalize(),o.set(a[0],a[1],a[2]),o.cross(i),o.normalize()},horizonDistanceForGlobeRadius:function(e,n){if(e<0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","horizontalDistanceForGlobeRadius","The specified globe radius is negative."));return e>0&&n>0?Math.sqrt(n*(2*e+n)):0},perspectiveNearDistanceForFarDistance:function(e,n,i){if(e<0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistanceForFarDistance","The specified distance is negative."));if(n<0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistanceForFarDistance","The specified resolution is negative."));if(i<1)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistanceForFarDistance","The specified depth bits is negative."));var o=(1<<i)-1;return e/(o/(1-n/e)-o+1)},perspectiveNearDistance:function(e,n,i){if(e<=0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistance","invalidWidth"));if(n<=0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistance","invalidHeight"));if(i<0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistance","The specified distance is negative."));var o=n/e;return 2*i/Math.sqrt(o*o+5)},perspectiveFrustumRectangle:function(e,n,o){if(e<=0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveFrustumRectangle","invalidWidth"));if(n<=0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveFrustumRectangle","invalidHeight"));if(o<0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveFrustumRectangle","The specified distance is negative."));var a=o*n/e;return new i(-o/2,-a/2,o,a)},perspectivePixelSize:function(e,n,i){if(e<=0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectivePixelSize","invalidWidth"));if(n<=0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectivePixelSize","invalidHeight"));if(i<0)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectivePixelSize","The specified distance is negative."));return a.perspectiveFrustumRectangle(e,n,i).height/n},boundingRectForUnitQuad:function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"WWMath","boundingRectForUnitQuad","missingMatrix"));var n=e,o=n[3],a=n[7],s=n[0]+n[3],u=n[4]+n[7],l=n[1]+n[3],c=n[5]+n[7],h=n[0]+n[1]+n[3],f=n[4]+n[5]+n[7],d=Math.min(Math.min(o,s),Math.min(l,h)),p=Math.max(Math.max(o,s),Math.max(l,h)),m=Math.min(Math.min(a,u),Math.min(c,f)),g=Math.max(Math.max(a,u),Math.max(c,f));return new i(d,m,p-d,g-m)},isPowerOfTwo:function(e){return 0!=e&&0===(e&e-1)},signum:function(e){return e>0?1:e<0?-1:0},gudermannianInverse:function(t){return Math.log(Math.tan(Math.PI/4+t*e.DEGREES_TO_RADIANS/2))/Math.PI},epsg3857ToEpsg4326:function(t,n){var r=6378100,i=Math.PI/2-2*Math.atan(Math.exp(-n/r)),o=t/r;return[a.clamp(i*e.RADIANS_TO_DEGREES,-90,90),a.clamp(o*e.RADIANS_TO_DEGREES,-180,180)]},powerOfTwoFloor:function(e){var t=Math.floor(Math.log(e)/Math.log(2));return Math.pow(2,t)},normalizeAngle360:function(e){var t=e%360;return t>=0?t:t<0?360+t:360-t}};return a})),i("geom/Location",["../geom/Angle","../error/ArgumentError","../util/Logger","../geom/Plane","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o){"use strict";var a=function(e,t){this.latitude=e,this.longitude=t};return a.ZERO=new a(0,0),a.fromRadians=function(t,n){return new a(t*e.RADIANS_TO_DEGREES,n*e.RADIANS_TO_DEGREES)},a.prototype.copy=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","copy","missingLocation"));return this.latitude=e.latitude,this.longitude=e.longitude,this},a.prototype.set=function(e,t){return this.latitude=e,this.longitude=t,this},a.prototype.equals=function(e){return e&&e.latitude===this.latitude&&e.longitude===this.longitude},a.interpolateAlongPath=function(e,r,i,o,a){if(!i||!o)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateAlongPath","missingLocation"));if(!a)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateAlongPath","missingResult"));return e===WorldWind.GREAT_CIRCLE?this.interpolateGreatCircle(r,i,o,a):e&&e===WorldWind.RHUMB_LINE?this.interpolateRhumb(r,i,o,a):this.interpolateLinear(r,i,o,a)},a.interpolateGreatCircle=function(e,r,i,a){if(!r||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateGreatCircle","missingLocation"));if(!a)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateGreatCircle","missingResult"));if(r.equals(i))return a.latitude=r.latitude,a.longitude=r.longitude,a;var s=o.clamp(e,0,1),u=this.greatCircleAzimuth(r,i),l=this.greatCircleDistance(r,i);return this.greatCircleLocation(r,u,s*l,a)},a.greatCircleAzimuth=function(r,i){if(!r||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleAzimuth","missingLocation"));var o,a,s,u=r.latitude*e.DEGREES_TO_RADIANS,l=i.latitude*e.DEGREES_TO_RADIANS,c=r.longitude*e.DEGREES_TO_RADIANS,h=i.longitude*e.DEGREES_TO_RADIANS;return u==l&&c==h?0:c==h?u>l?180:0:(a=Math.cos(l)*Math.sin(h-c),o=Math.cos(u)*Math.sin(l)-Math.sin(u)*Math.cos(l)*Math.cos(h-c),s=Math.atan2(a,o),isNaN(s)?0:s*e.RADIANS_TO_DEGREES)},a.greatCircleDistance=function(r,i){if(!r||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleDistance","missingLocation"));var o,a,s,u,l=r.latitude*e.DEGREES_TO_RADIANS,c=i.latitude*e.DEGREES_TO_RADIANS,h=r.longitude*e.DEGREES_TO_RADIANS,f=i.longitude*e.DEGREES_TO_RADIANS;return l==c&&h==f?0:(o=Math.sin((c-l)/2),a=Math.sin((f-h)/2),s=o*o+Math.cos(l)*Math.cos(c)*a*a,u=2*Math.asin(Math.sqrt(s)),isNaN(u)?0:u)},a.greatCircleLocation=function(r,i,o,a){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleLocation","missingLocation"));if(!a)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleLocation","missingResult"));if(0==o)return a.latitude=r.latitude,a.longitude=r.longitude,a;var s,u,l=r.latitude*e.DEGREES_TO_RADIANS,c=r.longitude*e.DEGREES_TO_RADIANS,h=i*e.DEGREES_TO_RADIANS;return s=Math.asin(Math.sin(l)*Math.cos(o)+Math.cos(l)*Math.sin(o)*Math.cos(h)),u=c+Math.atan2(Math.sin(o)*Math.sin(h),Math.cos(l)*Math.cos(o)-Math.sin(l)*Math.sin(o)*Math.cos(h)),isNaN(s)||isNaN(u)?(a.latitude=r.latitude,a.longitude=r.longitude):(a.latitude=e.normalizedDegreesLatitude(s*e.RADIANS_TO_DEGREES),a.longitude=e.normalizedDegreesLongitude(u*e.RADIANS_TO_DEGREES)),a},a.interpolateRhumb=function(e,r,i,a){if(!r||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateRhumb","missingLocation"));if(!a)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateRhumb","missingResult"));if(r.equals(i))return a.latitude=r.latitude,a.longitude=r.longitude,a;var s=o.clamp(e,0,1),u=this.rhumbAzimuth(r,i),l=this.rhumbDistance(r,i);return this.rhumbLocation(r,u,s*l,a)},a.rhumbAzimuth=function(r,i){if(!r||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","rhumbAzimuth","missingLocation"));var a,s,u,l=r.latitude*e.DEGREES_TO_RADIANS,c=i.latitude*e.DEGREES_TO_RADIANS,h=r.longitude*e.DEGREES_TO_RADIANS,f=i.longitude*e.DEGREES_TO_RADIANS;return l==c&&h==f?0:(a=f-h,s=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(l/2+Math.PI/4)),o.fabs(a)>Math.PI&&(a=a>0?-(2*Math.PI-a):2*Math.PI+a),u=Math.atan2(a,s),isNaN(u)?0:u*e.RADIANS_TO_DEGREES)},a.rhumbDistance=function(r,i){if(!r||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","rhumbDistance","missingLocation"));var a,s,u,l,c,h=r.latitude*e.DEGREES_TO_RADIANS,f=i.latitude*e.DEGREES_TO_RADIANS,d=r.longitude*e.DEGREES_TO_RADIANS,p=i.longitude*e.DEGREES_TO_RADIANS;return h==f&&d==p?0:(s=p-d,l=(a=f-h)/(u=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(h/2+Math.PI/4))),(isNaN(u)||isNaN(l))&&(l=Math.cos(h)),o.fabs(s)>Math.PI&&(s=s>0?-(2*Math.PI-s):2*Math.PI+s),c=Math.sqrt(a*a+l*l*s*s),isNaN(c)?0:c)},a.rhumbLocation=function(r,i,a,s){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","rhumbLocation","missingLocation"));if(!s)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","rhumbLocation","missingResult"));if(0==a)return s.latitude=r.latitude,s.longitude=r.longitude,s;var u,l,c=r.latitude*e.DEGREES_TO_RADIANS,h=r.longitude*e.DEGREES_TO_RADIANS,f=i*e.DEGREES_TO_RADIANS,d=c+a*Math.cos(f),p=Math.log(Math.tan(d/2+Math.PI/4)/Math.tan(c/2+Math.PI/4)),m=(d-c)/p;return(isNaN(p)||isNaN(m)||!isFinite(m))&&(m=Math.cos(c)),u=a*Math.sin(f)/m,o.fabs(d)>Math.PI/2&&(d=d>0?Math.PI-d:-Math.PI-d),l=o.fmod(h+u+Math.PI,2*Math.PI)-Math.PI,isNaN(d)||isNaN(l)?(s.latitude=r.latitude,s.longitude=r.longitude):(s.latitude=e.normalizedDegreesLatitude(d*e.RADIANS_TO_DEGREES),s.longitude=e.normalizedDegreesLongitude(l*e.RADIANS_TO_DEGREES)),s},a.interpolateLinear=function(e,r,i,a){if(!r||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateLinear","missingLocation"));if(!a)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateLinear","missingResult"));if(r.equals(i))return a.latitude=r.latitude,a.longitude=r.longitude,a;var s=o.clamp(e,0,1),u=this.linearAzimuth(r,i),l=this.linearDistance(r,i);return this.linearLocation(r,u,s*l,a)},a.linearAzimuth=function(r,i){if(!r||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","linearAzimuth","missingLocation"));var a,s,u,l=r.latitude*e.DEGREES_TO_RADIANS,c=i.latitude*e.DEGREES_TO_RADIANS,h=r.longitude*e.DEGREES_TO_RADIANS,f=i.longitude*e.DEGREES_TO_RADIANS;return l==c&&h==f?0:(a=f-h,s=c-l,o.fabs(a)>Math.PI&&(a=a>0?-(2*Math.PI-a):2*Math.PI+a),u=Math.atan2(a,s),isNaN(u)?0:u*e.RADIANS_TO_DEGREES)},a.linearDistance=function(r,i){if(!r||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","linearDistance","missingLocation"));var a,s,u,l=r.latitude*e.DEGREES_TO_RADIANS,c=i.latitude*e.DEGREES_TO_RADIANS,h=r.longitude*e.DEGREES_TO_RADIANS,f=i.longitude*e.DEGREES_TO_RADIANS;return l==c&&h==f?0:(a=c-l,s=f-h,o.fabs(s)>Math.PI&&(s=s>0?-(2*Math.PI-s):2*Math.PI+s),u=Math.sqrt(a*a+s*s),isNaN(u)?0:u)},a.linearLocation=function(r,i,a,s){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","linearLocation","missingLocation"));if(!s)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","linearLocation","missingResult"));if(0==a)return s.latitude=r.latitude,s.longitude=r.longitude,s;var u,l=r.latitude*e.DEGREES_TO_RADIANS,c=r.longitude*e.DEGREES_TO_RADIANS,h=i*e.DEGREES_TO_RADIANS,f=l+a*Math.cos(h);return o.fabs(f)>Math.PI/2&&(f=f>0?Math.PI-f:-Math.PI-f),u=o.fmod(c+a*Math.sin(h)+Math.PI,2*Math.PI)-Math.PI,isNaN(f)||isNaN(u)?(s.latitude=r.latitude,s.longitude=r.longitude):(s.latitude=e.normalizedDegreesLatitude(f*e.RADIANS_TO_DEGREES),s.longitude=e.normalizedDegreesLongitude(u*e.RADIANS_TO_DEGREES)),s},a.locationsCrossDateLine=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","locationsCrossDateline","missingLocation"));for(var r=null,i=0,a=e.length;i<a;i+=1){var s=e[i];if(null!=r&&o.signum(r.longitude)!=o.signum(s.longitude)){var u=Math.abs(r.longitude-s.longitude);if(u>180&&u<360)return!0}r=s}return!1},a.greatCircleArcExtremeLocations=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleArcExtremeLocations","missingLocation"));for(var r=null,i=null,o=null,s=0,u=e.length;s<u;s+=1){var l=e[s];if(null!=o){var c=a.greatCircleArcExtremeForTwoLocations(o,l);if(null==c)continue;(null==r||r.latitude>c[0].latitude)&&(r=c[0]),(null==i||i.latitude<c[1].latitude)&&(i=c[1])}o=l}return[r,i]},a.greatCircleArcExtremeForTwoLocations=function(e,r){if(!e||!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleArcExtremeForTwoLocations","missingLocation"));var i,s,u,l=null,c=null,h=90,f=-90,d=[e,r];for(i=0,s=d.length;i<s;i+=1)h>=(u=d[i]).latitude&&(h=u.latitude,l=u),f<=u.latitude&&(f=u.latitude,c=u);var p=a.greatCircleAzimuth(e,r),m=a.greatCircleDistance(e,r),g=a.greatCircleExtremeLocationsUsingAzimuth(e,p);for(i=0,s=g.length;i<s;i+=1){u=g[i];var A=a.greatCircleAzimuth(e,u),v=a.greatCircleDistance(e,u);o.signum(A)==o.signum(p)&&v>=0&&v<=m&&(h>=u.latitude&&(h=u.latitude,l=u),f<=u.latitude&&(f=u.latitude,c=u))}return[l,c]},a.greatCircleExtremeLocationsUsingAzimuth=function(r,i){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleArcExtremeLocationsUsingAzimuth","missingLocation"));var o=r.latitude,s=i*e.DEGREES_TO_RADIANS,u=-Math.tan(o)/Math.cos(s),l=Math.atan(u),c=l+Math.PI/2,h=l-Math.PI/2;return[a.greatCircleLocation(r,i,c,new a(0,0)),a.greatCircleLocation(r,i,h,new a(0,0))]},a.intersectionWithMeridian=function(e,t,n,o){var a=o.computePointFromLocation(e.latitude,e.longitude,new i(0,0,0)),s=o.computePointFromLocation(t.latitude,t.longitude,new i(0,0,0)),u=o.computePointFromLocation(90,n,new i(0,0,0)),l=o.computePointFromLocation(0,n,new i(0,0,0)),c=r.fromPoints(u,l,i.ZERO),h=new i(0,0,0);if(!c.intersectsSegmentAt(a,s,h))return null;var f=new WorldWind.Position(0,0,0);return o.computePositionFromPoint(h[0],h[1],h[2],f),f.latitude},a.meridianIntersection=function(e,t,n){var r=e.longitude<0?e.longitude+360:e.longitude,i=t.longitude<0?t.longitude+360:t.longitude;if(r===i)return null;var o=n<0?n+360:n,a=(t.latitude-e.latitude)/(i-r);return e.latitude+a*(o-r)},a.poles={NONE:0,NORTH:1,SOUTH:2},a})),i("geom/Position",["../geom/Angle","../error/ArgumentError","../geom/Location","../util/Logger","../util/WWMath"],(function(e,t,n,r,i){"use strict";var o=function(e,t,n){this.latitude=e,this.longitude=t,this.altitude=n};return o.ZERO=new o(0,0,0),o.fromRadians=function(t,n,r){return new o(t*e.RADIANS_TO_DEGREES,n*e.RADIANS_TO_DEGREES,r)},o.prototype.copy=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"Position","copy","missingPosition"));return this.latitude=e.latitude,this.longitude=e.longitude,this.altitude=e.altitude,this},o.prototype.equals=function(e){return e&&e.latitude===this.latitude&&e.longitude===this.longitude&&e.altitude===this.altitude},o.interpolateGreatCircle=function(e,o,a,s){if(!o||!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateGreatCircle","missingPosition"));if(!s)throw new t(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateGreatCircle","missingResult"));var u=i.clamp(e,0,1);return s.altitude=i.interpolate(u,o.altitude,a.altitude),n.interpolateGreatCircle(u,o,a,s),s},o.interpolateRhumb=function(e,o,a,s){if(!o||!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateRhumb","missingPosition"));if(!s)throw new t(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateRhumb","missingResult"));var u=i.clamp(e,0,1);return s.altitude=i.interpolate(u,o.altitude,a.altitude),n.interpolateRhumb(u,o,a,s),s},o.interpolateLinear=function(e,o,a,s){if(!o||!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateLinear","missingPosition"));if(!s)throw new t(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateLinear","missingResult"));var u=i.clamp(e,0,1);return s.altitude=i.interpolate(u,o.altitude,a.altitude),n.interpolateLinear(u,o,a,s),s},o.prototype.toString=function(){return"("+this.latitude.toString()+"\xb0, "+this.longitude.toString()+"\xb0, "+this.altitude.toString()+")"},o})),i("render/Texture",["../error/ArgumentError","../util/Logger","../util/WWMath"],(function(e,t,n){"use strict";var r=function(r,i,o){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"Texture","constructor","missingGlContext"));if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Texture","constructor","missingImage"));o||(o=r.CLAMP_TO_EDGE);var a=r.createTexture(),s=n.isPowerOfTwo(i.width)&&n.isPowerOfTwo(i.height);this.originalImageWidth=i.width,this.originalImageHeight=i.height,o!==r.REPEAT||s||(i=this.resizeImage(i),s=!0),this.imageWidth=i.width,this.imageHeight=i.height,this.size=i.width*i.height*4,r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,s?r.LINEAR_MIPMAP_LINEAR:r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,o),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),s&&r.generateMipmap(r.TEXTURE_2D),this.textureId=a,this.creationTime=new Date,this.texParameters={},this.anisotropicFilterExt=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic")};return r.prototype.setTexParameter=function(e,t){this.texParameters[e]=t},r.prototype.getTexParameter=function(e){return this.texParameters[e]},r.prototype.clearTexParameters=function(){this.texParameters={}},r.prototype.dispose=function(e){e.deleteTexture(this.textureId),delete this.textureId},r.prototype.bind=function(e){var t=e.currentGlContext;return t.bindTexture(t.TEXTURE_2D,this.textureId),this.applyTexParameters(e),e.frameStatistics.incrementTextureLoadCount(1),!0},r.prototype.applyTexParameters=function(e){var t=e.currentGlContext,n=this.texParameters[t.TEXTURE_MAG_FILTER]||t.LINEAR;t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n),n===t.LINEAR&&this.anisotropicFilterExt&&t.texParameteri(t.TEXTURE_2D,this.anisotropicFilterExt.TEXTURE_MAX_ANISOTROPY_EXT,4)},r.prototype.resizeImage=function(e){var t=document.createElement("canvas");return t.width=n.powerOfTwoFloor(e.width),t.height=n.powerOfTwoFloor(e.height),t.getContext("2d").drawImage(e,0,0,t.width,t.height),t},r})),i("geom/Matrix",["../geom/Angle","../error/ArgumentError","../util/Logger","../geom/Plane","../geom/Position","../geom/Rectangle","../render/Texture","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a,s,u){"use strict";var l=function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=h,this[12]=f,this[13]=d,this[14]=p,this[15]=m};return l.prototype=new Float64Array(16),l.fromIdentity=function(){return new l(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},l.principalAxesFromPoints=function(e,r,i,o){if(!e||e.length<1)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","principalAxesFromPoints","missingPoints"));if(!r||!i||!o)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","principalAxesFromPoints","An axis argument is null or undefined."));var a=l.fromIdentity();a.setToCovarianceOfPoints(e),a.eigensystemFromSymmetricMatrix(r,i,o),r.normalize(),i.normalize(),o.normalize()},l.prototype.set=function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=h,this[12]=f,this[13]=d,this[14]=p,this[15]=m,this},l.prototype.setToIdentity=function(){this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1},l.prototype.copy=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","copy","missingMatrix"));this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15]},l.prototype.clone=function(){var e=l.fromIdentity();return e.copy(this),e},l.prototype.equals=function(e){return e&&this[0]==e[0]&&this[1]==e[1]&&this[2]==e[2]&&this[3]==e[3]&&this[4]==e[4]&&this[5]==e[5]&&this[6]==e[6]&&this[7]==e[7]&&this[8]==e[8]&&this[9]==e[9]&&this[10]==e[10]&&this[11]==e[11]&&this[12]==e[12]&&this[13]==e[13]&&this[14]==e[14]&&this[15]==e[15]},l.prototype.columnMajorComponents=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","columnMajorComponents","missingResult"));return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e},l.prototype.setToTranslation=function(e,t,n){return this[0]=1,this[1]=0,this[2]=0,this[3]=e,this[4]=0,this[5]=1,this[6]=0,this[7]=t,this[8]=0,this[9]=0,this[10]=1,this[11]=n,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.setTranslation=function(e,t,n){return this[3]=e,this[7]=t,this[11]=n,this},l.prototype.setToScale=function(e,t,n){return this[0]=e,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=t,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=n,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.setScale=function(e,t,n){return this[0]=e,this[5]=t,this[10]=n,this},l.prototype.setToTransposeOfMatrix=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToTransposeOfMatrix","missingMatrix"));return this[0]=e[0],this[1]=e[4],this[2]=e[8],this[3]=e[12],this[4]=e[1],this[5]=e[5],this[6]=e[9],this[7]=e[13],this[8]=e[2],this[9]=e[6],this[10]=e[10],this[11]=e[14],this[12]=e[3],this[13]=e[7],this[14]=e[11],this[15]=e[15],this},l.prototype.setToMultiply=function(e,r){if(!e||!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToMultiply","missingMatrix"));var i=e,o=r;return this[0]=i[0]*o[0]+i[1]*o[4]+i[2]*o[8]+i[3]*o[12],this[1]=i[0]*o[1]+i[1]*o[5]+i[2]*o[9]+i[3]*o[13],this[2]=i[0]*o[2]+i[1]*o[6]+i[2]*o[10]+i[3]*o[14],this[3]=i[0]*o[3]+i[1]*o[7]+i[2]*o[11]+i[3]*o[15],this[4]=i[4]*o[0]+i[5]*o[4]+i[6]*o[8]+i[7]*o[12],this[5]=i[4]*o[1]+i[5]*o[5]+i[6]*o[9]+i[7]*o[13],this[6]=i[4]*o[2]+i[5]*o[6]+i[6]*o[10]+i[7]*o[14],this[7]=i[4]*o[3]+i[5]*o[7]+i[6]*o[11]+i[7]*o[15],this[8]=i[8]*o[0]+i[9]*o[4]+i[10]*o[8]+i[11]*o[12],this[9]=i[8]*o[1]+i[9]*o[5]+i[10]*o[9]+i[11]*o[13],this[10]=i[8]*o[2]+i[9]*o[6]+i[10]*o[10]+i[11]*o[14],this[11]=i[8]*o[3]+i[9]*o[7]+i[10]*o[11]+i[11]*o[15],this[12]=i[12]*o[0]+i[13]*o[4]+i[14]*o[8]+i[15]*o[12],this[13]=i[12]*o[1]+i[13]*o[5]+i[14]*o[9]+i[15]*o[13],this[14]=i[12]*o[2]+i[13]*o[6]+i[14]*o[10]+i[15]*o[14],this[15]=i[12]*o[3]+i[13]*o[7]+i[14]*o[11]+i[15]*o[15],this},l.prototype.setToCovarianceOfPoints=function(e){if(!e||e.length<1)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToCovarianceOfPoints","missingArray"));var r,i,o,a,u=0,l=0,c=0,h=0,f=0,d=0,p=0,m=new s(0,0,0);r=s.averageOfBuffer(e,new s(0,0,0));for(var g=0,A=e.length/3;g<A;g++)m[0]=e[3*g],m[1]=e[3*g+1],m[2]=e[3*g+2],++u,l+=(i=m[0]-r[0])*i,c+=(o=m[1]-r[1])*o,h+=(a=m[2]-r[2])*a,f+=i*o,d+=i*a,p+=o*a;return this[0]=l/u,this[1]=f/u,this[2]=d/u,this[3]=0,this[4]=f/u,this[5]=c/u,this[6]=p/u,this[7]=0,this[8]=d/u,this[9]=p/u,this[10]=h/u,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=0,this},l.prototype.multiplyByTranslation=function(e,t,n){return this.multiply(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},l.prototype.multiplyByRotation=function(t,n,r,i){var o=Math.cos(i*e.DEGREES_TO_RADIANS),a=Math.sin(i*e.DEGREES_TO_RADIANS);return this.multiply(o+(1-o)*t*t,(1-o)*t*n-a*r,(1-o)*t*r+a*n,0,(1-o)*t*n+a*r,o+(1-o)*n*n,(1-o)*n*r-a*t,0,(1-o)*t*r-a*n,(1-o)*n*r+a*t,o+(1-o)*r*r,0,0,0,0,1),this},l.prototype.multiplyByScale=function(e,t,n){return this.multiply(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},l.prototype.setToUnitYFlip=function(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=-1,this[6]=0,this[7]=1,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.multiplyByLocalCoordinateTransform=function(e,r){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByLocalCoordinateTransform","Origin vector is null or undefined"));if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByLocalCoordinateTransform","missingGlobe"));var i=new s(0,0,0),o=new s(0,0,0),a=new s(0,0,0);return u.localCoordinateAxesAtPoint(e,r,i,o,a),this.multiply(i[0],o[0],a[0],e[0],i[1],o[1],a[1],e[1],i[2],o[2],a[2],e[2],0,0,0,1),this},l.prototype.multiplyByTextureTransform=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByTextureTransform","missingTexture"));var r=e.originalImageWidth/e.imageWidth,i=e.originalImageHeight/e.imageHeight;return this.multiply(r,0,0,0,0,-i,0,i,0,0,1,0,0,0,0,1),this},l.prototype.extractTranslation=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractTranslation","missingResult"));return e[0]=this[3],e[1]=this[7],e[2]=this[11],e},l.prototype.extractRotationAngles=function(r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractRotationAngles","missingResult"));var i=Math.atan2(this[6],this[10]),o=Math.atan2(-this[2],Math.sqrt(this[0]*this[0]+this[1]*this[1])),a=Math.cos(i),s=Math.sin(i),u=Math.atan2(s*this[8]-a*this[4],a*this[5]-s*this[9]);return r[0]=i*e.RADIANS_TO_DEGREES,r[1]=o*e.RADIANS_TO_DEGREES,r[2]=u*e.RADIANS_TO_DEGREES,r},l.prototype.multiplyByFirstPersonModelview=function(r,i,o,a,l){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByFirstPersonModelview","missingPosition"));if(!l)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByFirstPersonModelview","missingGlobe"));var c,h,f,d,p,m,g,A,v,y,b,_,w,E,x=new s(0,0,0),S=new s(0,0,0),T=new s(0,0,0),M=new s(0,0,0);return c=Math.cos(a*e.DEGREES_TO_RADIANS),h=Math.sin(a*e.DEGREES_TO_RADIANS),this.multiply(c,h,0,0,-h,c,0,0,0,0,1,0,0,0,0,1),c=Math.cos(o*e.DEGREES_TO_RADIANS),h=Math.sin(o*e.DEGREES_TO_RADIANS),this.multiply(1,0,0,0,0,c,h,0,0,-h,c,0,0,0,0,1),c=Math.cos(i*e.DEGREES_TO_RADIANS),h=Math.sin(i*e.DEGREES_TO_RADIANS),this.multiply(c,-h,0,0,h,c,0,0,0,0,1,0,0,0,0,1),l.computePointFromPosition(r.latitude,r.longitude,r.altitude,x),f=x[0],d=x[1],p=x[2],u.localCoordinateAxesAtPoint(x,l,S,T,M),m=S[0],g=S[1],A=S[2],v=T[0],y=T[1],b=T[2],_=M[0],w=M[1],E=M[2],this.multiply(m,g,A,-m*f-g*d-A*p,v,y,b,-v*f-y*d-b*p,_,w,E,-_*f-w*d-E*p,0,0,0,1),this},l.prototype.multiplyByLookAtModelview=function(e,r,i,o,a,s){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByLookAtModelview","missingPosition"));if(r<0)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByLookAtModelview","Range is less than zero"));if(!s)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByLookAtModelview","missingGlobe"));return this.multiplyByTranslation(0,0,-r),this.multiplyByFirstPersonModelview(e,i,o,a,s),this},l.prototype.setToPerspectiveProjection=function(e,r,i,o){if(e<=0)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","invalidWidth"));if(r<=0)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","invalidHeight"));if(i===o)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","Near and far distance are the same."));if(i<=0||o<=0)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","Near or far distance is less than or equal to zero."));var a=u.perspectiveFrustumRectangle(e,r,i),s=a.getMinX(),l=a.getMaxX(),c=a.getMinY(),h=a.getMaxY();return this[0]=2*i/(l-s),this[1]=0,this[2]=(l+s)/(l-s),this[3]=0,this[4]=0,this[5]=2*i/(h-c),this[6]=(h+c)/(h-c),this[7]=0,this[8]=0,this[9]=0,this[10]=-(o+i)/(o-i),this[11]=-2*i*o/(o-i),this[12]=0,this[13]=0,this[14]=-1,this[15]=0,this},l.prototype.setToScreenProjection=function(e,r){if(e<=0)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToScreenProjection","invalidWidth"));if(r<=0)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToScreenProjection","invalidHeight"));return this[0]=2/e,this[1]=0,this[2]=0,this[3]=-1,this[4]=0,this[5]=2/r,this[6]=0,this[7]=-1,this[8]=0,this[9]=0,this[10]=2,this[11]=-1,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.extractEyePoint=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractEyePoint","missingResult"));return e[0]=-this[0]*this[3]-this[4]*this[7]-this[8]*this[11],e[1]=-this[1]*this[3]-this[5]*this[7]-this[9]*this[11],e[2]=-this[2]*this[3]-this[6]*this[7]-this[10]*this[11],e},l.prototype.extractForwardVector=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractForwardVector","missingResult"));return e[0]=-this[8],e[1]=-this[9],e[2]=-this[10],e},l.prototype.extractViewingParameters=function(r,o,a,s){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractViewingParameters","The specified origin is null or undefined."));if(!a)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractViewingParameters","missingGlobe"));if(!s)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractViewingParameters","missingResult"));var u,c,h,f,d,p,m,g,A,v=new i(0,0,0),y=l.fromIdentity();return a.computePositionFromPoint(r[0],r[1],r[2],v),y.copy(this),y.multiplyByLocalCoordinateTransform(r,a),u=-y[11],c=y[10],h=Math.sqrt(y[2]*y[2]+y[6]*y[6]),f=Math.atan2(h,c)*e.RADIANS_TO_DEGREES,d=Math.cos(o*e.DEGREES_TO_RADIANS),p=Math.sin(o*e.DEGREES_TO_RADIANS),m=d*y[0]-p*y[4],g=p*y[5]-d*y[1],A=Math.atan2(g,m)*e.RADIANS_TO_DEGREES,s.origin=v,s.range=u,s.heading=A,s.tilt=f,s.roll=o,s},l.prototype.offsetProjectionDepth=function(e){return this[10]*=1+e,this},l.prototype.multiplyMatrix=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyMatrix","missingMatrix"));var r,i,o,a,s=this,u=e;return r=s[0],i=s[1],o=s[2],a=s[3],s[0]=r*u[0]+i*u[4]+o*u[8]+a*u[12],s[1]=r*u[1]+i*u[5]+o*u[9]+a*u[13],s[2]=r*u[2]+i*u[6]+o*u[10]+a*u[14],s[3]=r*u[3]+i*u[7]+o*u[11]+a*u[15],r=s[4],i=s[5],o=s[6],a=s[7],s[4]=r*u[0]+i*u[4]+o*u[8]+a*u[12],s[5]=r*u[1]+i*u[5]+o*u[9]+a*u[13],s[6]=r*u[2]+i*u[6]+o*u[10]+a*u[14],s[7]=r*u[3]+i*u[7]+o*u[11]+a*u[15],r=s[8],i=s[9],o=s[10],a=s[11],s[8]=r*u[0]+i*u[4]+o*u[8]+a*u[12],s[9]=r*u[1]+i*u[5]+o*u[9]+a*u[13],s[10]=r*u[2]+i*u[6]+o*u[10]+a*u[14],s[11]=r*u[3]+i*u[7]+o*u[11]+a*u[15],r=s[12],i=s[13],o=s[14],a=s[15],s[12]=r*u[0]+i*u[4]+o*u[8]+a*u[12],s[13]=r*u[1]+i*u[5]+o*u[9]+a*u[13],s[14]=r*u[2]+i*u[6]+o*u[10]+a*u[14],s[15]=r*u[3]+i*u[7]+o*u[11]+a*u[15],this},l.prototype.multiply=function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){var g,A,v,y,b=this;return g=b[0],A=b[1],v=b[2],y=b[3],b[0]=g*e+A*i+v*u+y*f,b[1]=g*t+A*o+v*l+y*d,b[2]=g*n+A*a+v*c+y*p,b[3]=g*r+A*s+v*h+y*m,g=b[4],A=b[5],v=b[6],y=b[7],b[4]=g*e+A*i+v*u+y*f,b[5]=g*t+A*o+v*l+y*d,b[6]=g*n+A*a+v*c+y*p,b[7]=g*r+A*s+v*h+y*m,g=b[8],A=b[9],v=b[10],y=b[11],b[8]=g*e+A*i+v*u+y*f,b[9]=g*t+A*o+v*l+y*d,b[10]=g*n+A*a+v*c+y*p,b[11]=g*r+A*s+v*h+y*m,g=b[12],A=b[13],v=b[14],y=b[15],b[12]=g*e+A*i+v*u+y*f,b[13]=g*t+A*o+v*l+y*d,b[14]=g*n+A*a+v*c+y*p,b[15]=g*r+A*s+v*h+y*m,this},l.prototype.invertMatrix=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","invertMatrix","missingMatrix"));var r=[[],[],[],[]];r[0][0]=e[0],r[0][1]=e[1],r[0][2]=e[2],r[0][3]=e[3],r[1][0]=e[4],r[1][1]=e[5],r[1][2]=e[6],r[1][3]=e[7],r[2][0]=e[8],r[2][1]=e[9],r[2][2]=e[10],r[2][3]=e[11],r[3][0]=e[12],r[3][1]=e[13],r[3][2]=e[14],r[3][3]=e[15];var i,o,a=[],s=l.ludcmp(r,a);for(i=0;i<4;i+=1)s*=r[i][i];if(Math.abs(s)<1e-8)return null;var u=[[],[],[],[]],c=[];for(o=0;o<4;o+=1){for(i=0;i<4;i+=1)c[i]=0;for(c[o]=1,l.lubksb(r,a,c),i=0;i<4;i+=1)u[i][o]=c[i]}return this[0]=u[0][0],this[1]=u[0][1],this[2]=u[0][2],this[3]=u[0][3],this[4]=u[1][0],this[5]=u[1][1],this[6]=u[1][2],this[7]=u[1][3],this[8]=u[2][0],this[9]=u[2][1],this[10]=u[2][2],this[11]=u[2][3],this[12]=u[3][0],this[13]=u[3][1],this[14]=u[3][2],this[15]=u[3][3],this},l.lubksb=function(e,t,n){var r,i,o,a=-1;for(r=0;r<4;r+=1){var s=t[r];if(o=n[s],n[s]=n[r],-1!=a)for(i=a;i<=r-1;i+=1)o-=e[r][i]*n[i];else 0!=o&&(a=r);n[r]=o}for(r=3;r>=0;r-=1){for(o=n[r],i=r+1;i<4;i+=1)o-=e[r][i]*n[i];n[r]=o/e[r][r]}},l.ludcmp=function(e,t){var n,r,i,o,a,s,u,l,c=[],h=1;for(r=0;r<4;r+=1){for(a=0,i=0;i<4;i+=1)(n=Math.abs(e[r][i]))>a&&(a=n);if(0==a)return 0;c[r]=1/a}for(i=0;i<4;i+=1){for(r=0;r<i;r+=1){for(s=e[r][i],o=0;o<r;o+=1)s-=e[r][o]*e[o][i];e[r][i]=s}for(a=0,u=-1,r=i;r<4;r+=1){for(s=e[r][i],o=0;o<i;o++)s-=e[r][o]*e[o][i];e[r][i]=s,(l=c[r]*Math.abs(s))>=a&&(a=l,u=r)}if(i!=u){for(o=0;o<4;o+=1)l=e[u][o],e[u][o]=e[i][o],e[i][o]=l;h=-h,c[u]=c[i]}if(t[i]=u,0==e[i][i]&&(e[i][i]=1e-20),3!=i)for(l=1/e[i][i],r=i+1;r<4;r+=1)e[r][i]*=l}return h},l.prototype.invertOrthonormalMatrix=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","invertOrthonormalMatrix","missingMatrix"));var r=e;return this[0]=r[0],this[1]=r[4],this[2]=r[8],this[3]=0-r[0]*r[3]-r[4]*r[7]-r[8]*r[11],this[4]=r[1],this[5]=r[5],this[6]=r[9],this[7]=0-r[1]*r[3]-r[5]*r[7]-r[9]*r[11],this[8]=r[2],this[9]=r[6],this[10]=r[10],this[11]=0-r[2]*r[3]-r[6]*r[7]-r[10]*r[11],this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.eigensystemFromSymmetricMatrix=function(e,r,i){if(!e||!r||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","eigensystemFromSymmetricMatrix","missingResult"));if(this[1]!=this[4]||this[2]!=this[8]||this[6]!=this[9])throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","eigensystemFromSymmetricMatrix","Matrix is not symmetric"));for(var o,a,s,l,c,h,f,d,p,m,g,A=1e-10,v=this[0],y=this[1],b=this[2],_=this[5],w=this[6],E=this[10],x=[[1,0,0],[0,1,0],[0,0,1]],S=0;S<32&&!(u.fabs(y)<A&&u.fabs(b)<A&&u.fabs(w)<A);S++){if(0!=y)for(v-=(l=(s=1+(a=(o=.5*(_-v)/y)*o))!=a?(o<0?-1:1)*(Math.sqrt(s)-u.fabs(o)):.5/o)*y,_+=l*y,y=0,f=(c=1/Math.sqrt(l*l+1))*b-(h=c*l)*w,w=h*b+c*w,b=f,d=0;d<3;d++)f=c*x[d][0]-h*x[d][1],x[d][1]=h*x[d][0]+c*x[d][1],x[d][0]=f;if(0!=b)for(v-=(l=(s=1+(a=(o=.5*(E-v)/b)*o))!=a?(o<0?-1:1)*(Math.sqrt(s)-u.fabs(o)):.5/o)*b,E+=l*b,b=0,f=(c=1/Math.sqrt(l*l+1))*y-(h=c*l)*w,w=h*y+c*w,y=f,d=0;d<3;d++)f=c*x[d][0]-h*x[d][2],x[d][2]=h*x[d][0]+c*x[d][2],x[d][0]=f;if(0!=w)for(_-=(l=(s=1+(a=(o=.5*(E-_)/w)*o))!=a?(o<0?-1:1)*(Math.sqrt(s)-u.fabs(o)):.5/o)*w,E+=l*w,w=0,f=(c=1/Math.sqrt(l*l+1))*y-(h=c*l)*b,b=h*y+c*b,y=f,d=0;d<3;d++)f=c*x[d][1]-h*x[d][2],x[d][2]=h*x[d][1]+c*x[d][2],x[d][1]=f}p=0,m=1,g=2,v<_&&(f=v,v=_,_=f,f=p,p=m,m=f),_<E&&(f=_,_=E,E=f,f=m,m=g,g=f),v<_&&(f=v,v=_,_=f,f=p,p=m,m=f),e[0]=x[0][p],e[1]=x[1][p],e[2]=x[2][p],r[0]=x[0][m],r[1]=x[1][m],r[2]=x[2][m],i[0]=x[0][g],i[1]=x[1][g],i[2]=x[2][g],e.normalize(),r.normalize(),i.normalize(),e.multiply(v),r.multiply(_),i.multiply(E)},l.prototype.upper3By3=function(){var e=l.fromIdentity();return e[0]=this[0],e[1]=this[1],e[2]=this[2],e[4]=this[4],e[5]=this[5],e[6]=this[6],e[8]=this[8],e[9]=this[9],e[10]=this[10],e},l.prototype.unProject=function(e,r,i){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","unProject","missingPoint"));if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","unProject","missingViewport"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Matrix","unProject","missingResult"));var o=e[0],a=e[1],s=e[2];if(o=2*(o=(o-r.x)/r.width)-1,a=2*(a=(a-r.y)/r.height)-1,(s=2*s-1)<-1||s>1)return!1;var u=this[0]*o+this[1]*a+this[2]*s+this[3],l=this[4]*o+this[5]*a+this[6]*s+this[7],c=this[8]*o+this[9]*a+this[10]*s+this[11],h=this[12]*o+this[13]*a+this[14]*s+this[15];return 0!==h&&(i[0]=u/h,i[1]=l/h,i[2]=c/h,!0)},l})),i("pick/PickedObject",[],(function(){"use strict";return function(e,t,n,r,i){this.color=e,this.userObject=t,this.position=n,this.parentLayer=r,this.isTerrain=i,this.isOnTop=!1}})),i("error/UnsupportedOperationError",["../error/AbstractError"],(function(e){"use strict";var t=function(t){var n;e.call(this,"UnsupportedOperationError",t);try{throw new Error}catch(e){n=e.stack}this.stack=n};return t.prototype=Object.create(e.prototype),t})),i("render/Renderable",["../util/Logger","../error/UnsupportedOperationError"],(function(e,t){"use strict";var n=function(){this.displayName="Renderable",this.enabled=!0,this.pickDelegate=null,this.userProperties={}};return n.prototype.render=function(n){throw new t(e.logMessage(e.LEVEL_SEVERE,"Renderable","render","abstractInvocation"))},n})),i("shapes/Annotation",["../shapes/AnnotationAttributes","../error/ArgumentError","../shaders/BasicTextureProgram","../util/Color","../util/Font","../util/Insets","../util/Logger","../geom/Matrix","../util/Offset","../pick/PickedObject","../render/Renderable","../shapes/TextAttributes","../geom/Vec2","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p){"use strict";var m=function(n,r){if(!n)throw new t(a.logMessage(a.LEVEL_SEVERE,"Annotation","constructor","missingPosition"));c.call(this),this.position=n,this.attributes=r||new e(null),this.altitudeMode=WorldWind.ABSOLUTE,this.layer=null,this.lastStateKey=null,this.calloutTransform=s.fromIdentity(),this.calloutOffset=new WorldWind.Offset(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,0),this.label="",this.labelTexture=null,this.labelTransform=s.fromIdentity(),this.placePoint=new d(0,0,0),this.depthOffset=-2.05,this.calloutPoints=null};return m.matrix=s.fromIdentity(),m.screenPoint=new d(0,0,0),m.scratchPoint=new d(0,0,0),m.prototype=Object.create(c.prototype),Object.defineProperties(m.prototype,{text:{get:function(){return this.label},set:function(e){this.label=e,this.lastStateKey=null}}}),m.prototype.renderOrdered=function(e){if(this.drawOrderedAnnotation(e),e.pickingMode){var t=new l(this.pickColor.clone(),this,this.position,this.layer,!1);e.pickPoint&&this.labelBounds.containsPoint(e.convertPointToViewport(e.pickPoint,m.scratchPoint))&&(t.labelPicked=!0),e.resolvePick(t)}},m.prototype.clone=function(){var e=new m(this.position);return e.copy(this),e.pickDelegate=this.pickDelegate?this.pickDelegate:this,e},m.prototype.copy=function(e){return this.position=e.position,this.enabled=e.enabled,this.attributes=e.attributes,this.label=e.label,this.altitudeMode=e.altitudeMode,this.pickDelegate=e.pickDelegate,this.depthOffset=e.depthOffset,this},m.prototype.render=function(e){var t;this.enabled&&e.accumulateOrderedRenderables&&(!e.globe.projectionLimits||e.globe.projectionLimits.containsLocation(this.position.latitude,this.position.longitude))&&((t=this.lastFrameTime!==e.timestamp?this.makeOrderedRenderable(e):this.clone().makeOrderedRenderable(e))&&(t.layer=e.currentLayer,this.lastFrameTime=e.timestamp,e.addOrderedRenderable(t)))},m.prototype.drawOrderedAnnotation=function(e){this.beginDrawing(e);try{this.doDrawOrderedAnnotation(e)}finally{this.endDrawing(e)}},m.prototype.makeOrderedRenderable=function(e){var t,n,r,i,o,a,s,u,l;if(this.label=e.textRenderer.wrap(this.label,this.attributes.width,this.attributes.height),e.surfacePointForMode(this.position.latitude,this.position.longitude,this.position.altitude,this.altitudeMode,this.placePoint),this.eyeDistance=e.eyePoint.distanceTo(this.placePoint),!e.projectWithDepth(this.placePoint,this.depthOffset,m.screenPoint))return null;this.labelTexture=e.createTextTexture(this.label,this.attributes.textAttributes),t=this.labelTexture.imageWidth,n=this.labelTexture.imageHeight,r=this.attributes.scale,i=this.attributes.insets.left,o=this.attributes.insets.right,a=this.attributes.insets.top,s=this.attributes.insets.bottom,l=this.attributes.leaderGapHeight,u=this.calloutOffset.offsetForSize((t+i+o)*r,(n+a+s)*r),this.calloutTransform.setTranslation(m.screenPoint[0]-u[0],m.screenPoint[1]+l,m.screenPoint[2]),this.labelTransform.setTranslation(m.screenPoint[0]-u[0]+i*r,m.screenPoint[1]+l+s*r,m.screenPoint[2]),this.labelTransform.setScale(t*r,n*r,1),this.labelBounds=p.boundingRectForUnitQuad(this.labelTransform);var c=(t+i+o)*r,h=(n+a+s)*r,f=c/2,d=-l;return this.attributes.drawLeader||(d=0),this.attributes.stateKey!==this.lastStateKey&&(this.calloutPoints=this.createCallout(c,h,f,d,this.attributes.leaderGapWidth,this.attributes.cornerRadius)),this},m.prototype.beginDrawing=function(e){var t,r=e.currentGlContext;e.findAndBindProgram(n),t=e.currentProgram,r.enableVertexAttribArray(t.vertexPointLocation),r.enableVertexAttribArray(t.vertexTexCoordLocation),t.loadModulateColor(r,e.pickingMode)},m.prototype.endDrawing=function(e){var t=e.currentGlContext,n=e.currentProgram;t.disableVertexAttribArray(n.vertexPointLocation),t.disableVertexAttribArray(n.vertexTexCoordLocation),e.bindProgram(null)},m.prototype.drawCorner=function(e,t,n,r,i,o,a,s){if(n<1)return s;for(var u=(i-r)/(o-1),l=1;l<o-1;l++){var c=r+u*l,h=e+Math.cos(c)*n,f=t+Math.sin(c)*n;a[s++]=h,a[s++]=f}return s},m.prototype.createCallout=function(e,t,n,r,i,o){var a=new Float32Array(2*(12+(o<1?0:56))),s=0;return a[s++]=e/2+i/2,a[s++]=0,a[s++]=e-o,a[s++]=0,s=this.drawCorner(e-o,o,o,-Math.PI/2,0,16,a,s),a[s++]=e,a[s++]=o,a[s++]=e,a[s++]=t-o,s=this.drawCorner(e-o,t-o,o,0,Math.PI/2,16,a,s),a[s++]=e-o,a[s++]=t,a[s++]=o,a[s++]=t,s=this.drawCorner(o,t-o,o,Math.PI/2,Math.PI,16,a,s),a[s++]=0,a[s++]=t-o,a[s++]=0,a[s++]=o,s=this.drawCorner(o,o,o,Math.PI,1.5*Math.PI,16,a,s),a[s++]=o,a[s++]=0,a[s++]=e/2-i/2,a[s++]=0,a[s++]=n,a[s++]=r,a[s++]=e/2+i/2,a[s]=0,a},m.prototype.doDrawOrderedAnnotation=function(e){var t,n=e.currentGlContext,i=e.currentProgram,o=!1;e.pickingMode&&(this.pickColor=e.uniquePickColor()),i.loadOpacity(n,e.pickingMode?1:this.attributes.opacity*this.layer.opacity);var a=this.attributes.stateKey!==this.lastStateKey;this.calloutCacheKey&&!a||(this.calloutCacheKey=e.gpuResourceCache.generateCacheKey());var s=e.gpuResourceCache.resourceForKey(this.calloutCacheKey);s||(s=n.createBuffer(),e.gpuResourceCache.putResource(this.calloutCacheKey,s,4*this.calloutPoints.length),o=!0),a&&this.calloutCacheKey&&e.gpuResourceCache.removeResource(this.calloutCacheKey),this.lastStateKey=this.attributes.stateKey,m.matrix.copy(e.screenProjection),m.matrix.multiplyMatrix(this.calloutTransform),i.loadModelviewProjection(n,m.matrix),n.bindBuffer(n.ARRAY_BUFFER,s),o&&(n.bufferData(n.ARRAY_BUFFER,this.calloutPoints,n.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1)),i.loadColor(n,e.pickingMode?this.pickColor:this.attributes.backgroundColor),i.loadTextureEnabled(n,!1),n.vertexAttribPointer(i.vertexPointLocation,2,n.FLOAT,!1,0,0),n.vertexAttribPointer(i.vertexTexCoordLocation,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLE_FAN,0,this.calloutPoints.length/2),m.matrix.copy(e.screenProjection),m.matrix.multiplyMatrix(this.labelTransform),i.loadModelviewProjection(n,m.matrix),m.matrix.setToIdentity(),m.matrix.multiplyByTextureTransform(this.labelTexture),i.loadTextureMatrix(n,m.matrix),i.loadColor(n,e.pickingMode?this.pickColor:r.WHITE),t=this.labelTexture.bind(e),i.loadTextureEnabled(n,t),n.bindBuffer(n.ARRAY_BUFFER,e.unitQuadBuffer3()),n.vertexAttribPointer(i.vertexPointLocation,3,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,e.unitQuadBuffer()),n.vertexAttribPointer(i.vertexTexCoordLocation,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLE_STRIP,0,4)},m})),i("util/measure/MeasurerUtils",["../../geom/Location","../../geom/Position"],(function(e,t){"use strict";return{subdividePositions:function(n,r,i,o,a){var s,u=[],l=new e(0,0),c=new e(0,0),h=r[0];this.addPosition(n,u,h,i);for(var f=1;f<r.length;f++){var d=r[f],p=e.greatCircleDistance(h,d);l=e.interpolateAlongPath(o,.5,h,d,l);var m=p*n.radiusAt(l.latitude,l.longitude);if(m>a)for(var g=null,A=null,v=Math.ceil(m/a),y=1;y<v;y++){var b=y/v;o===WorldWind.LINEAR?c=e.interpolateLinear(b,h,d,c):o===WorldWind.RHUMB_LINE?(null==g&&(g=e.rhumbAzimuth(h,d),A=e.rhumbDistance(h,d)),c=e.rhumbLocation(h,g,b*A,c)):(null==g&&(g=e.greatCircleAzimuth(h,d),A=e.greatCircleDistance(h,d)),c=e.greatCircleLocation(h,g,b*A,c)),s=i?n.elevationAtLocation(c.latitude,c.longitude):h.altitude*(1-b)+d.altitude*b,u.push(new t(c.latitude,c.longitude,s))}this.addPosition(n,u,d,i),h=d}return u},addPosition:function(e,n,r,i){var o=r.altitude;return i&&(o=e.elevationAtLocation(r.latitude,r.longitude)),n.push(new t(r.latitude,r.longitude,o)),n},isLocationInside:function(e,t){for(var n=!1,r=t[0],i=1,o=t.length;i<o;i++){var a=t[i];(a.latitude<=e.latitude&&e.latitude<r.latitude||r.latitude<=e.latitude&&e.latitude<a.latitude)&&e.longitude<(r.longitude-a.longitude)*(e.latitude-a.latitude)/(r.latitude-a.latitude)+a.longitude&&(n=!n),r=a}return n},angleBetweenVectors:function(e,t){var n=e.dot(t),r=e.magnitude()*t.magnitude();return 0!==r&&1!==r&&(n/=r),n<-1?n=-1:n>1&&(n=1),Math.acos(n)}}})),i("geom/Sector",["../geom/Angle","../error/ArgumentError","../geom/Location","../util/Logger","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o){"use strict";var a=function(e,t,n,r){this.minLatitude=e,this.maxLatitude=t,this.minLongitude=n,this.maxLongitude=r};return a.ZERO=new a(0,0,0,0),a.FULL_SPHERE=new a(-90,90,-180,180),a.prototype.copy=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"Sector","copy","missingSector"));return this.minLatitude=e.minLatitude,this.maxLatitude=e.maxLatitude,this.minLongitude=e.minLongitude,this.maxLongitude=e.maxLongitude,this},a.prototype.isEmpty=function(){return this.minLatitude===this.maxLatitude&&this.minLongitude===this.maxLongitude},a.prototype.deltaLatitude=function(){return this.maxLatitude-this.minLatitude},a.prototype.deltaLongitude=function(){return this.maxLongitude-this.minLongitude},a.prototype.centroidLatitude=function(){return.5*(this.minLatitude+this.maxLatitude)},a.prototype.centroidLongitude=function(){return.5*(this.minLongitude+this.maxLongitude)},a.prototype.centroid=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"Sector","centroid","missingResult"));return e.latitude=this.centroidLatitude(),e.longitude=this.centroidLongitude(),e},a.prototype.minLatitudeRadians=function(){return this.minLatitude*e.DEGREES_TO_RADIANS},a.prototype.maxLatitudeRadians=function(){return this.maxLatitude*e.DEGREES_TO_RADIANS},a.prototype.minLongitudeRadians=function(){return this.minLongitude*e.DEGREES_TO_RADIANS},a.prototype.maxLongitudeRadians=function(){return this.maxLongitude*e.DEGREES_TO_RADIANS},a.prototype.setToBoundingSector=function(e){if(!e||e.length<2)throw new t(r.logMessage(r.LEVEL_SEVERE,"Sector","setToBoundingSector","missingArray"));for(var n=90,i=-90,o=180,a=-180,s=0,u=e.length;s<u;s+=1){var l=e[s];l&&(n=Math.min(n,l.latitude),i=Math.max(i,l.latitude),o=Math.min(o,l.longitude),a=Math.max(a,l.longitude))}return this.minLatitude=n,this.maxLatitude=i,this.minLongitude=o,this.maxLongitude=a,this},a.splitBoundingSectors=function(e){if(!e||e.length<2)throw new t(r.logMessage(r.LEVEL_SEVERE,"Sector","splitBoundingSectors","missingArray"));for(var n=90,i=180,s=-90,u=-180,l=null,c=0,h=e.length;c<h;c+=1){var f=e[c],d=f.latitude;d<n&&(n=d),d>s&&(s=d);var p=f.longitude;if(p>=0&&p<i&&(i=p),p<=0&&p>u&&(u=p),null!=l){var m=l.longitude;o.signum(p)!=o.signum(m)&&Math.abs(p-m)<180&&(u=0,i=0)}l=f}return n===s&&i===u?null:[new a(n,s,i,180),new a(n,s,-180,u)]},a.prototype.intersects=function(e){return e&&this.minLongitude<=e.maxLongitude&&this.maxLongitude>=e.minLongitude&&this.minLatitude<=e.maxLatitude&&this.maxLatitude>=e.minLatitude},a.prototype.overlaps=function(e){return e&&this.minLongitude<e.maxLongitude&&this.maxLongitude>e.minLongitude&&this.minLatitude<e.maxLatitude&&this.maxLatitude>e.minLatitude},a.prototype.contains=function(e){return e&&this.minLatitude<=e.minLatitude&&this.maxLatitude>=e.maxLatitude&&this.minLongitude<=e.minLongitude&&this.maxLongitude>=e.maxLongitude},a.prototype.containsLocation=function(e,t){return this.minLatitude<=e&&this.maxLatitude>=e&&this.minLongitude<=t&&this.maxLongitude>=t},a.prototype.intersection=function(e){if(!e instanceof a)throw new t(r.logMessage(r.LEVEL_SEVERE,"Sector","intersection","missingSector"));return this.minLatitude<e.minLatitude&&(this.minLatitude=e.minLatitude),this.maxLatitude>e.maxLatitude&&(this.maxLatitude=e.maxLatitude),this.minLongitude<e.minLongitude&&(this.minLongitude=e.minLongitude),this.maxLongitude>e.maxLongitude&&(this.maxLongitude=e.maxLongitude),this.maxLatitude<this.minLatitude&&(this.maxLatitude=this.minLatitude),this.maxLongitude<this.minLongitude&&(this.maxLongitude=this.minLongitude),this},a.prototype.getCorners=function(){var e=[];return e.push(new n(this.minLatitude,this.minLongitude)),e.push(new n(this.minLatitude,this.maxLongitude)),e.push(new n(this.maxLatitude,this.maxLongitude)),e.push(new n(this.maxLatitude,this.minLongitude)),e},a.prototype.computeBoundingPoints=function(e,o){if(null===e)throw new t(r.logMessage(r.LEVEL_SEVERE,"Sector","computeBoundingBox","missingGlobe"));var a=e.minAndMaxElevationsForSector(this),s=a[0]*o,u=a[1]*o;s===u&&(u=s+10);for(var l=[],c=this.getCorners(),h=0;h<c.length;h++)l.push(e.computePointFromPosition(c[h].latitude,c[h].longitude,s,new i(0,0,0))),l.push(e.computePointFromPosition(c[h].latitude,c[h].longitude,u,new i(0,0,0)));var f=this.centroid(new n(0,0));if(l.push(e.computePointFromPosition(f.latitude,f.longitude,u,new i(0,0,0))),this.minLatitude<0&&this.maxLatitude>0?(l.push(e.computePointFromPosition(this.minLatitude,f.longitude,u,new i(0,0,0))),l.push(e.computePointFromPosition(this.maxLatitude,f.longitude,u,new i(0,0,0))),l.push(e.computePointFromPosition(0,this.minLongitude,u,new i(0,0,0))),l.push(e.computePointFromPosition(0,this.maxLongitude,u,new i(0,0,0)))):this.minLatitude<0?l.push(e.computePointFromPosition(this.maxLatitude,f.longitude,u,new i(0,0,0))):l.push(e.computePointFromPosition(this.minLatitude,f.longitude,u,new i(0,0,0))),this.deltaLongitude()>=360){var d=this.minLatitude;l.push(e.computePointFromPosition(d,0,u,new i(0,0,0))),l.push(e.computePointFromPosition(d,90,u,new i(0,0,0))),l.push(e.computePointFromPosition(d,-90,u,new i(0,0,0))),l.push(e.computePointFromPosition(d,180,u,new i(0,0,0)));var p=this.maxLatitude;l.push(e.computePointFromPosition(p,0,u,new i(0,0,0))),l.push(e.computePointFromPosition(p,90,u,new i(0,0,0))),l.push(e.computePointFromPosition(p,-90,u,new i(0,0,0))),l.push(e.computePointFromPosition(p,180,u,new i(0,0,0)))}else if(this.deltaLongitude()>180){var m=f.longitude,g=f.latitude,A=(this.minLongitude+m)/2;l.push(e.computePointFromPosition(g,A,u,new i(0,0,0))),A=(m+this.maxLongitude)/2,l.push(e.computePointFromPosition(g,A,u,new i(0,0,0))),l.push(e.computePointFromPosition(g,this.minLongitude,u,new i(0,0,0))),l.push(e.computePointFromPosition(g,this.maxLongitude,u,new i(0,0,0)))}return l},a.prototype.union=function(e){if(!e instanceof a)throw new t(r.logMessage(r.LEVEL_SEVERE,"Sector","union","missingSector"));return this.minLatitude>e.minLatitude&&(this.minLatitude=e.minLatitude),this.maxLatitude<e.maxLatitude&&(this.maxLatitude=e.maxLatitude),this.minLongitude>e.minLongitude&&(this.minLongitude=e.minLongitude),this.maxLongitude<e.maxLongitude&&(this.maxLongitude=e.maxLongitude),this},a}));var o={DEBUG:!1,assert:function(e,t){if(o.DEBUG&&!e)throw new Error("Assertion failed"+(t?": "+t:""))},GLU_TESS_MAX_COORD:1e150,TRUE_PROJECT:!1,TESS_MAX_CACHE:100,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901}};return o.PQHandle,o.PQKey,o.geom={},o.geom.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},o.geom.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},o.geom.edgeEval=function(e,t,n){var r=t.s-e.s,i=n.s-t.s;return r+i>0?r<i?t.t-e.t+(e.t-n.t)*(r/(r+i)):t.t-n.t+(n.t-e.t)*(i/(r+i)):0},o.geom.edgeSign=function(e,t,n){var r=t.s-e.s,i=n.s-t.s;return r+i>0?(t.t-n.t)*r+(t.t-e.t)*i:0},o.geom.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},o.geom.transEval=function(e,t,n){var r=t.t-e.t,i=n.t-t.t;return r+i>0?r<i?t.s-e.s+(e.s-n.s)*(r/(r+i)):t.s-n.s+(n.s-e.s)*(i/(r+i)):0},o.geom.transSign=function(e,t,n){var r=t.t-e.t,i=n.t-t.t;return r+i>0?(t.s-n.s)*r+(t.s-e.s)*i:0},o.geom.edgeGoesLeft=function(e){return o.geom.vertLeq(e.dst(),e.org)},o.geom.edgeGoesRight=function(e){return o.geom.vertLeq(e.org,e.dst())},o.geom.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},o.geom.vertCCW=function(e,t,n){return e.s*(t.t-n.t)+t.s*(n.t-e.t)+n.s*(e.t-t.t)>=0},o.geom.interpolate_=function(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)},o.geom.edgeIntersect=function(e,t,n,r,i){var a,s,u;o.geom.vertLeq(e,t)||(u=e,e=t,t=u),o.geom.vertLeq(n,r)||(u=n,n=r,r=u),o.geom.vertLeq(e,n)||(u=e,e=n,n=u,u=t,t=r,r=u),o.geom.vertLeq(n,t)?o.geom.vertLeq(t,r)?((a=o.geom.edgeEval(e,n,t))+(s=o.geom.edgeEval(n,t,r))<0&&(a=-a,s=-s),i.s=o.geom.interpolate_(a,n.s,s,t.s)):((a=o.geom.edgeSign(e,n,t))+(s=-o.geom.edgeSign(e,r,t))<0&&(a=-a,s=-s),i.s=o.geom.interpolate_(a,n.s,s,r.s)):i.s=(n.s+t.s)/2,o.geom.transLeq(e,t)||(u=e,e=t,t=u),o.geom.transLeq(n,r)||(u=n,n=r,r=u),o.geom.transLeq(e,n)||(u=e,e=n,n=u,u=t,t=r,r=u),o.geom.transLeq(n,t)?o.geom.transLeq(t,r)?((a=o.geom.transEval(e,n,t))+(s=o.geom.transEval(n,t,r))<0&&(a=-a,s=-s),i.t=o.geom.interpolate_(a,n.t,s,t.t)):((a=o.geom.transSign(e,n,t))+(s=-o.geom.transSign(e,r,t))<0&&(a=-a,s=-s),i.t=o.geom.interpolate_(a,n.t,s,r.t)):i.t=(n.t+t.t)/2},o.mesh={},o.mesh.makeEdge=function(e){var t=o.mesh.makeEdgePair_(e.eHead);return o.mesh.makeVertex_(t,e.vHead),o.mesh.makeVertex_(t.sym,e.vHead),o.mesh.makeFace_(t,e.fHead),t},o.mesh.meshSplice=function(e,t){var n=!1,r=!1;e!==t&&(t.org!==e.org&&(r=!0,o.mesh.killVertex_(t.org,e.org)),t.lFace!==e.lFace&&(n=!0,o.mesh.killFace_(t.lFace,e.lFace)),o.mesh.splice_(t,e),r||(o.mesh.makeVertex_(t,e.org),e.org.anEdge=e),n||(o.mesh.makeFace_(t,e.lFace),e.lFace.anEdge=e))},o.mesh.deleteEdge=function(e){var t=e.sym,n=!1;e.lFace!==e.rFace()&&(n=!0,o.mesh.killFace_(e.lFace,e.rFace())),e.oNext===e?o.mesh.killVertex_(e.org,null):(e.rFace().anEdge=e.oPrev(),e.org.anEdge=e.oNext,o.mesh.splice_(e,e.oPrev()),n||o.mesh.makeFace_(e,e.lFace)),t.oNext===t?(o.mesh.killVertex_(t.org,null),o.mesh.killFace_(t.lFace,null)):(e.lFace.anEdge=t.oPrev(),t.org.anEdge=t.oNext,o.mesh.splice_(t,t.oPrev())),o.mesh.killEdge_(e)},o.mesh.addEdgeVertex=function(e){var t=o.mesh.makeEdgePair_(e),n=t.sym;return o.mesh.splice_(t,e.lNext),t.org=e.dst(),o.mesh.makeVertex_(n,t.org),t.lFace=n.lFace=e.lFace,t},o.mesh.splitEdge=function(e){var t=o.mesh.addEdgeVertex(e).sym;return o.mesh.splice_(e.sym,e.sym.oPrev()),o.mesh.splice_(e.sym,t),e.sym.org=t.org,t.dst().anEdge=t.sym,t.sym.lFace=e.rFace(),t.winding=e.winding,t.sym.winding=e.sym.winding,t},o.mesh.connect=function(e,t){var n=!1,r=o.mesh.makeEdgePair_(e),i=r.sym;return t.lFace!==e.lFace&&(n=!0,o.mesh.killFace_(t.lFace,e.lFace)),o.mesh.splice_(r,e.lNext),o.mesh.splice_(i,t),r.org=e.dst(),i.org=t.org,r.lFace=i.lFace=e.lFace,e.lFace.anEdge=i,n||o.mesh.makeFace_(r,e.lFace),r},o.mesh.zapFace=function(e){var t,n=e.anEdge,r=n.lNext;do{if(r=(t=r).lNext,t.lFace=null,null===t.rFace()){t.oNext===t?o.mesh.killVertex_(t.org,null):(t.org.anEdge=t.oNext,o.mesh.splice_(t,t.oPrev()));var i=t.sym;i.oNext===i?o.mesh.killVertex_(i.org,null):(i.org.anEdge=i.oNext,o.mesh.splice_(i,i.oPrev())),o.mesh.killEdge_(t)}}while(t!==n);var a=e.prev,s=e.next;s.prev=a,a.next=s},o.mesh.meshUnion=function(e,t){var n=e.fHead,r=e.vHead,i=e.eHead,o=t.fHead,a=t.vHead,s=t.eHead;return o.next!==o&&(n.prev.next=o.next,o.next.prev=n.prev,o.prev.next=n,n.prev=o.prev),a.next!==a&&(r.prev.next=a.next,a.next.prev=r.prev,a.prev.next=r,r.prev=a.prev),s.next!==s&&(i.sym.next.sym.next=s.next,s.next.sym.next=i.sym.next,s.sym.next.sym.next=i,i.sym.next=s.sym.next),e},o.mesh.deleteMesh=function(e){},o.mesh.makeEdgePair_=function(e){var t=new o.GluHalfEdge,n=new o.GluHalfEdge,r=e.sym.next;return n.next=r,r.sym.next=t,t.next=e,e.sym.next=n,t.sym=n,t.oNext=t,t.lNext=n,n.sym=t,n.oNext=n,n.lNext=t,t},o.mesh.splice_=function(e,t){var n=e.oNext,r=t.oNext;n.sym.lNext=t,r.sym.lNext=e,e.oNext=r,t.oNext=n},o.mesh.makeVertex_=function(e,t){var n=t.prev,r=new o.GluVertex(t,n);n.next=r,t.prev=r,r.anEdge=e;var i=e;do{i.org=r,i=i.oNext}while(i!==e)},o.mesh.makeFace_=function(e,t){var n=t.prev,r=new o.GluFace(t,n);n.next=r,t.prev=r,r.anEdge=e,r.inside=t.inside;var i=e;do{i.lFace=r,i=i.lNext}while(i!==e)},o.mesh.killEdge_=function(e){var t=e.next,n=e.sym.next;t.sym.next=n,n.sym.next=t},o.mesh.killVertex_=function(e,t){var n=e.anEdge,r=n;do{r.org=t,r=r.oNext}while(r!==n);var i=e.prev,o=e.next;o.prev=i,i.next=o},o.mesh.killFace_=function(e,t){var n=e.anEdge,r=n;do{r.lFace=t,r=r.lNext}while(r!==n);var i=e.prev,o=e.next;o.prev=i,i.next=o},o.normal={},o.normal.S_UNIT_X_=1,o.normal.S_UNIT_Y_=0,o.normal.projectPolygon=function(e){var t=!1,n=[e.normal[0],e.normal[1],e.normal[2]];0===n[0]&&0===n[1]&&0===n[2]&&(o.normal.computeNormal_(e,n),t=!0);var r=e.sUnit,i=e.tUnit,a=o.normal.longAxis_(n);if(o.TRUE_PROJECT){o.normal.normalize_(n),r[a]=0,r[(a+1)%3]=o.normal.S_UNIT_X_,r[(a+2)%3]=o.normal.S_UNIT_Y_;var s=o.normal.dot_(r,n);r[0]-=s*n[0],r[1]-=s*n[1],r[2]-=s*n[2],o.normal.normalize_(r),i[0]=n[1]*r[2]-n[2]*r[1],i[1]=n[2]*r[0]-n[0]*r[2],i[2]=n[0]*r[1]-n[1]*r[0],o.normal.normalize_(i)}else r[a]=0,r[(a+1)%3]=o.normal.S_UNIT_X_,r[(a+2)%3]=o.normal.S_UNIT_Y_,i[a]=0,i[(a+1)%3]=n[a]>0?-o.normal.S_UNIT_Y_:o.normal.S_UNIT_Y_,i[(a+2)%3]=n[a]>0?o.normal.S_UNIT_X_:-o.normal.S_UNIT_X_;for(var u=e.mesh.vHead,l=u.next;l!==u;l=l.next)l.s=o.normal.dot_(l.coords,r),l.t=o.normal.dot_(l.coords,i);t&&o.normal.checkOrientation_(e)},o.normal.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.normal.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},o.normal.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},o.normal.computeNormal_=function(e,t){var n,r=[-2*o.GLU_TESS_MAX_COORD,-2*o.GLU_TESS_MAX_COORD,-2*o.GLU_TESS_MAX_COORD],i=[2*o.GLU_TESS_MAX_COORD,2*o.GLU_TESS_MAX_COORD,2*o.GLU_TESS_MAX_COORD],a=[],s=[],u=e.mesh.vHead;for(n=u.next;n!==u;n=n.next)for(var l=0;l<3;++l){var c=n.coords[l];c<i[l]&&(i[l]=c,s[l]=n),c>r[l]&&(r[l]=c,a[l]=n)}var h=0;if(r[1]-i[1]>r[0]-i[0]&&(h=1),r[2]-i[2]>r[h]-i[h]&&(h=2),i[h]>=r[h])return t[0]=0,t[1]=0,void(t[2]=1);var f=0,d=s[h],p=a[h],m=[0,0,0],g=[d.coords[0]-p.coords[0],d.coords[1]-p.coords[1],d.coords[2]-p.coords[2]],A=[0,0,0];for(n=u.next;n!==u;n=n.next){A[0]=n.coords[0]-p.coords[0],A[1]=n.coords[1]-p.coords[1],A[2]=n.coords[2]-p.coords[2],m[0]=g[1]*A[2]-g[2]*A[1],m[1]=g[2]*A[0]-g[0]*A[2],m[2]=g[0]*A[1]-g[1]*A[0];var v=m[0]*m[0]+m[1]*m[1]+m[2]*m[2];v>f&&(f=v,t[0]=m[0],t[1]=m[1],t[2]=m[2])}f<=0&&(t[0]=t[1]=t[2]=0,t[o.normal.longAxis_(g)]=1)},o.normal.checkOrientation_=function(e){for(var t=0,n=e.mesh.fHead,r=n.next;r!==n;r=r.next){var i=r.anEdge;if(!(i.winding<=0))do{t+=(i.org.s-i.dst().s)*(i.org.t+i.dst().t),i=i.lNext}while(i!==r.anEdge)}if(t<0){for(var o=e.mesh.vHead,a=o.next;a!==o;a=a.next)a.t=-a.t;e.tUnit[0]=-e.tUnit[0],e.tUnit[1]=-e.tUnit[1],e.tUnit[2]=-e.tUnit[2]}},o.render={},o.render.renderMesh=function(e,t,n){for(var r=!1,i=-1,a=t.fHead.prev;a!==t.fHead;a=a.prev)if(a.inside){r||(e.callBeginOrBeginData(o.primitiveType.GL_TRIANGLES),r=!0);var s=a.anEdge;do{if(n){var u=s.rFace().inside?0:1;i!==u&&(i=u,e.callEdgeFlagOrEdgeFlagData(!!i))}e.callVertexOrVertexData(s.org.data),s=s.lNext}while(s!==a.anEdge)}r&&e.callEndOrEndData()},o.render.renderBoundary=function(e,t){for(var n=t.fHead.next;n!==t.fHead;n=n.next)if(n.inside){e.callBeginOrBeginData(o.primitiveType.GL_LINE_LOOP);var r=n.anEdge;do{e.callVertexOrVertexData(r.org.data),r=r.lNext}while(r!==n.anEdge);e.callEndOrEndData()}},o.sweep={},o.sweep.SENTINEL_COORD_=4*o.GLU_TESS_MAX_COORD,o.sweep.TOLERANCE_NONZERO_=!1,o.sweep.computeInterior=function(e){e.fatalError=!1,o.sweep.removeDegenerateEdges_(e),o.sweep.initPriorityQ_(e),o.sweep.initEdgeDict_(e);for(var t;null!==(t=e.pq.extractMin());){for(;;){var n=e.pq.minimum();if(null===n||!o.geom.vertEq(n,t))break;n=e.pq.extractMin(),o.sweep.spliceMergeVertices_(e,t.anEdge,n.anEdge)}o.sweep.sweepEvent_(e,t)}var r=e.dict.getMin().getKey();e.event=r.eUp.org,o.sweep.doneEdgeDict_(e),o.sweep.donePriorityQ_(e),o.sweep.removeDegenerateFaces_(e.mesh),e.mesh.checkMesh()},o.sweep.addWinding_=function(e,t){e.winding+=t.winding,e.sym.winding+=t.sym.winding},o.sweep.edgeLeq_=function(e,t,n){var r=e.event,i=t.eUp,a=n.eUp;return i.dst()===r?a.dst()===r?o.geom.vertLeq(i.org,a.org)?o.geom.edgeSign(a.dst(),i.org,a.org)<=0:o.geom.edgeSign(i.dst(),a.org,i.org)>=0:o.geom.edgeSign(a.dst(),r,a.org)<=0:a.dst()===r?o.geom.edgeSign(i.dst(),r,i.org)>=0:o.geom.edgeEval(i.dst(),r,i.org)>=o.geom.edgeEval(a.dst(),r,a.org)},o.sweep.deleteRegion_=function(e,t){t.fixUpperEdge,t.eUp.activeRegion=null,e.dict.deleteNode(t.nodeUp),t.nodeUp=null},o.sweep.fixUpperEdge_=function(e,t){o.mesh.deleteEdge(e.eUp),e.fixUpperEdge=!1,e.eUp=t,t.activeRegion=e},o.sweep.topLeftRegion_=function(e){var t=e.eUp.org;do{e=e.regionAbove()}while(e.eUp.org===t);if(e.fixUpperEdge){var n=o.mesh.connect(e.regionBelow().eUp.sym,e.eUp.lNext);o.sweep.fixUpperEdge_(e,n),e=e.regionAbove()}return e},o.sweep.topRightRegion_=function(e){var t=e.eUp.dst();do{e=e.regionAbove()}while(e.eUp.dst()===t);return e},o.sweep.addRegionBelow_=function(e,t,n){var r=new o.ActiveRegion;return r.eUp=n,r.nodeUp=e.dict.insertBefore(t.nodeUp,r),n.activeRegion=r,r},o.sweep.isWindingInside_=function(e,t){switch(e.windingRule){case o.windingRule.GLU_TESS_WINDING_ODD:return 0!==(1&t);case o.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==t;case o.windingRule.GLU_TESS_WINDING_POSITIVE:return t>0;case o.windingRule.GLU_TESS_WINDING_NEGATIVE:return t<0;case o.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return t>=2||t<=-2}return!1},o.sweep.computeWinding_=function(e,t){t.windingNumber=t.regionAbove().windingNumber+t.eUp.winding,t.inside=o.sweep.isWindingInside_(e,t.windingNumber)},o.sweep.finishRegion_=function(e,t){var n=t.eUp,r=n.lFace;r.inside=t.inside,r.anEdge=n,o.sweep.deleteRegion_(e,t)},o.sweep.finishLeftRegions_=function(e,t,n){for(var r=t,i=t.eUp;r!==n;){r.fixUpperEdge=!1;var a=r.regionBelow(),s=a.eUp;if(s.org!==i.org){if(!a.fixUpperEdge){o.sweep.finishRegion_(e,r);break}s=o.mesh.connect(i.lPrev(),s.sym),o.sweep.fixUpperEdge_(a,s)}i.oNext!==s&&(o.mesh.meshSplice(s.oPrev(),s),o.mesh.meshSplice(i,s)),o.sweep.finishRegion_(e,r),i=a.eUp,r=a}return i},o.sweep.addRightEdges_=function(e,t,n,r,i,a){var s=!0,u=n;do{o.sweep.addRegionBelow_(e,t,u.sym),u=u.oNext}while(u!==r);null===i&&(i=t.regionBelow().eUp.rPrev());for(var l,c=t,h=i;(u=(l=c.regionBelow()).eUp.sym).org===h.org;)u.oNext!==h&&(o.mesh.meshSplice(u.oPrev(),u),o.mesh.meshSplice(h.oPrev(),u)),l.windingNumber=c.windingNumber-u.winding,l.inside=o.sweep.isWindingInside_(e,l.windingNumber),c.dirty=!0,!s&&o.sweep.checkForRightSplice_(e,c)&&(o.sweep.addWinding_(u,h),o.sweep.deleteRegion_(e,c),o.mesh.deleteEdge(h)),s=!1,c=l,h=u;c.dirty=!0,a&&o.sweep.walkDirtyRegions_(e,c)},o.sweep.callCombine_=function(e,t,n,r,i){var a=[t.coords[0],t.coords[1],t.coords[2]];t.data=null,t.data=e.callCombineOrCombineData(a,n,r),null===t.data&&(i?e.fatalError||(e.callErrorOrErrorData(o.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),e.fatalError=!0):t.data=n[0])},o.sweep.spliceMergeVertices_=function(e,t,n){var r=[null,null,null,null];r[0]=t.org.data,r[1]=n.org.data,o.sweep.callCombine_(e,t.org,r,[.5,.5,0,0],!1),o.mesh.meshSplice(t,n)},o.sweep.vertexWeights_=function(e,t,n,r,i){var a=o.geom.vertL1dist(t,e),s=o.geom.vertL1dist(n,e),u=i,l=i+1;r[u]=.5*s/(a+s),r[l]=.5*a/(a+s),e.coords[0]+=r[u]*t.coords[0]+r[l]*n.coords[0],e.coords[1]+=r[u]*t.coords[1]+r[l]*n.coords[1],e.coords[2]+=r[u]*t.coords[2]+r[l]*n.coords[2]},o.sweep.getIntersectData_=function(e,t,n,r,i,a){var s=[0,0,0,0],u=[n.data,r.data,i.data,a.data];t.coords[0]=t.coords[1]=t.coords[2]=0,o.sweep.vertexWeights_(t,n,r,s,0),o.sweep.vertexWeights_(t,i,a,s,2),o.sweep.callCombine_(e,t,u,s,!0)},o.sweep.checkForRightSplice_=function(e,t){var n=t.regionBelow(),r=t.eUp,i=n.eUp;if(o.geom.vertLeq(r.org,i.org)){if(o.geom.edgeSign(i.dst(),r.org,i.org)>0)return!1;o.geom.vertEq(r.org,i.org)?r.org!==i.org&&(e.pq.remove(r.org.pqHandle),o.sweep.spliceMergeVertices_(e,i.oPrev(),r)):(o.mesh.splitEdge(i.sym),o.mesh.meshSplice(r,i.oPrev()),t.dirty=n.dirty=!0)}else{if(o.geom.edgeSign(r.dst(),i.org,r.org)<0)return!1;t.regionAbove().dirty=t.dirty=!0,o.mesh.splitEdge(r.sym),o.mesh.meshSplice(i.oPrev(),r)}return!0},o.sweep.checkForLeftSplice_=function(e,t){var n,r=t.regionBelow(),i=t.eUp,a=r.eUp;if(o.geom.vertLeq(i.dst(),a.dst())){if(o.geom.edgeSign(i.dst(),a.dst(),i.org)<0)return!1;t.regionAbove().dirty=t.dirty=!0,n=o.mesh.splitEdge(i),o.mesh.meshSplice(a.sym,n),n.lFace.inside=t.inside}else{if(o.geom.edgeSign(a.dst(),i.dst(),a.org)>0)return!1;t.dirty=r.dirty=!0,n=o.mesh.splitEdge(a),o.mesh.meshSplice(i.lNext,a.sym),n.rFace().inside=t.inside}return!0},o.sweep.checkForIntersect_=function(e,t){var n=t.regionBelow(),r=t.eUp,i=n.eUp,a=r.org,s=i.org,u=r.dst(),l=i.dst(),c=new o.GluVertex;if(a===s)return!1;if(Math.min(a.t,u.t)>Math.max(s.t,l.t))return!1;if(o.geom.vertLeq(a,s)){if(o.geom.edgeSign(l,a,s)>0)return!1}else if(o.geom.edgeSign(u,s,a)<0)return!1;o.geom.edgeIntersect(u,a,l,s,c),o.geom.vertLeq(c,e.event)&&(c.s=e.event.s,c.t=e.event.t);var h=o.geom.vertLeq(a,s)?a:s;if(o.geom.vertLeq(h,c)&&(c.s=h.s,c.t=h.t),o.geom.vertEq(c,a)||o.geom.vertEq(c,s))return o.sweep.checkForRightSplice_(e,t),!1;if(!o.geom.vertEq(u,e.event)&&o.geom.edgeSign(u,e.event,c)>=0||!o.geom.vertEq(l,e.event)&&o.geom.edgeSign(l,e.event,c)<=0){if(l===e.event)return o.mesh.splitEdge(r.sym),o.mesh.meshSplice(i.sym,r),r=(t=o.sweep.topLeftRegion_(t)).regionBelow().eUp,o.sweep.finishLeftRegions_(e,t.regionBelow(),n),o.sweep.addRightEdges_(e,t,r.oPrev(),r,r,!0),!0;if(u===e.event){o.mesh.splitEdge(i.sym),o.mesh.meshSplice(r.lNext,i.oPrev()),n=t;var f=(t=o.sweep.topRightRegion_(t)).regionBelow().eUp.rPrev();return n.eUp=i.oPrev(),i=o.sweep.finishLeftRegions_(e,n,null),o.sweep.addRightEdges_(e,t,i.oNext,r.rPrev(),f,!0),!0}return o.geom.edgeSign(u,e.event,c)>=0&&(t.regionAbove().dirty=t.dirty=!0,o.mesh.splitEdge(r.sym),r.org.s=e.event.s,r.org.t=e.event.t),o.geom.edgeSign(l,e.event,c)<=0&&(t.dirty=n.dirty=!0,o.mesh.splitEdge(i.sym),i.org.s=e.event.s,i.org.t=e.event.t),!1}return o.mesh.splitEdge(r.sym),o.mesh.splitEdge(i.sym),o.mesh.meshSplice(i.oPrev(),r),r.org.s=c.s,r.org.t=c.t,r.org.pqHandle=e.pq.insert(r.org),o.sweep.getIntersectData_(e,r.org,a,u,s,l),t.regionAbove().dirty=t.dirty=n.dirty=!0,!1},o.sweep.walkDirtyRegions_=function(e,t){for(var n=t.regionBelow();;){for(;n.dirty;)t=n,n=n.regionBelow();if(!t.dirty&&(n=t,null===(t=t.regionAbove())||!t.dirty))return;t.dirty=!1;var r=t.eUp,i=n.eUp;if(r.dst()!==i.dst()&&o.sweep.checkForLeftSplice_(e,t)&&(n.fixUpperEdge?(o.sweep.deleteRegion_(e,n),o.mesh.deleteEdge(i),i=(n=t.regionBelow()).eUp):t.fixUpperEdge&&(o.sweep.deleteRegion_(e,t),o.mesh.deleteEdge(r),r=(t=n.regionAbove()).eUp)),r.org!==i.org)if(r.dst()===i.dst()||t.fixUpperEdge||n.fixUpperEdge||r.dst()!==e.event&&i.dst()!==e.event)o.sweep.checkForRightSplice_(e,t);else if(o.sweep.checkForIntersect_(e,t))return;r.org===i.org&&r.dst()===i.dst()&&(o.sweep.addWinding_(i,r),o.sweep.deleteRegion_(e,t),o.mesh.deleteEdge(r),t=n.regionAbove())}},o.sweep.connectRightVertex_=function(e,t,n){var r,i=n.oNext,a=t.regionBelow(),s=t.eUp,u=a.eUp,l=!1;s.dst()!==u.dst()&&o.sweep.checkForIntersect_(e,t),o.geom.vertEq(s.org,e.event)&&(o.mesh.meshSplice(i.oPrev(),s),i=(t=o.sweep.topLeftRegion_(t)).regionBelow().eUp,o.sweep.finishLeftRegions_(e,t.regionBelow(),a),l=!0),o.geom.vertEq(u.org,e.event)&&(o.mesh.meshSplice(n,u.oPrev()),n=o.sweep.finishLeftRegions_(e,a,null),l=!0),l?o.sweep.addRightEdges_(e,t,n.oNext,i,i,!0):(r=o.geom.vertLeq(u.org,s.org)?u.oPrev():s,r=o.mesh.connect(n.lPrev(),r),o.sweep.addRightEdges_(e,t,r,r.oNext,r.oNext,!1),r.sym.activeRegion.fixUpperEdge=!0,o.sweep.walkDirtyRegions_(e,t))},o.sweep.connectLeftDegenerate_=function(e,t,n){var r=t.eUp;if(o.geom.vertEq(r.org,n))o.sweep.TOLERANCE_NONZERO_&&o.sweep.spliceMergeVertices_(e,r,n.anEdge);else{if(!o.geom.vertEq(r.dst(),n))return o.mesh.splitEdge(r.sym),t.fixUpperEdge&&(o.mesh.deleteEdge(r.oNext),t.fixUpperEdge=!1),o.mesh.meshSplice(n.anEdge,r),void o.sweep.sweepEvent_(e,n);if(o.sweep.TOLERANCE_NONZERO_){var i=(t=o.sweep.topRightRegion_(t)).regionBelow(),a=i.eUp.sym,s=a.oNext,u=s;i.fixUpperEdge&&(o.sweep.deleteRegion_(e,i),o.mesh.deleteEdge(a),a=s.oPrev()),o.mesh.meshSplice(n.anEdge,a),o.geom.edgeGoesLeft(s)||(s=null),o.sweep.addRightEdges_(e,t,a.oNext,u,s,!0)}}},o.sweep.connectLeftVertex_=function(e,t){var n=new o.ActiveRegion;n.eUp=t.anEdge.sym;var r=e.dict.search(n).getKey(),i=r.regionBelow(),a=r.eUp,s=i.eUp;if(0!==o.geom.edgeSign(a.dst(),t,a.org)){var u,l=o.geom.vertLeq(s.dst(),a.dst())?r:i;r.inside||l.fixUpperEdge?(u=l===r?o.mesh.connect(t.anEdge.sym,a.lNext):o.mesh.connect(s.dNext(),t.anEdge).sym,l.fixUpperEdge?o.sweep.fixUpperEdge_(l,u):o.sweep.computeWinding_(e,o.sweep.addRegionBelow_(e,r,u)),o.sweep.sweepEvent_(e,t)):o.sweep.addRightEdges_(e,r,t.anEdge,t.anEdge,null,!0)}else o.sweep.connectLeftDegenerate_(e,r,t)},o.sweep.sweepEvent_=function(e,t){e.event=t;for(var n=t.anEdge;null===n.activeRegion;)if((n=n.oNext)===t.anEdge)return void o.sweep.connectLeftVertex_(e,t);var r=o.sweep.topLeftRegion_(n.activeRegion),i=r.regionBelow(),a=i.eUp,s=o.sweep.finishLeftRegions_(e,i,null);s.oNext===a?o.sweep.connectRightVertex_(e,r,s):o.sweep.addRightEdges_(e,r,s.oNext,a,a,!0)},o.sweep.addSentinel_=function(e,t){var n=new o.ActiveRegion,r=o.mesh.makeEdge(e.mesh);r.org.s=o.sweep.SENTINEL_COORD_,r.org.t=t,r.dst().s=-o.sweep.SENTINEL_COORD_,r.dst().t=t,e.event=r.dst(),n.eUp=r,n.windingNumber=0,n.inside=!1,n.fixUpperEdge=!1,n.sentinel=!0,n.dirty=!1,n.nodeUp=e.dict.insert(n)},o.sweep.initEdgeDict_=function(e){e.dict=new o.Dict(e,o.sweep.edgeLeq_),o.sweep.addSentinel_(e,-o.sweep.SENTINEL_COORD_),o.sweep.addSentinel_(e,o.sweep.SENTINEL_COORD_)},o.sweep.doneEdgeDict_=function(e){for(var t;null!==(t=e.dict.getMin().getKey());)t.sentinel,o.sweep.deleteRegion_(e,t);e.dict=null},o.sweep.removeDegenerateEdges_=function(e){for(var t,n=e.mesh.eHead,r=n.next;r!==n;r=t){t=r.next;var i=r.lNext;o.geom.vertEq(r.org,r.dst())&&r.lNext.lNext!==r&&(o.sweep.spliceMergeVertices_(e,i,r),o.mesh.deleteEdge(r),i=(r=i).lNext),i.lNext===r&&(i!==r&&(i!==t&&i!==t.sym||(t=t.next),o.mesh.deleteEdge(i)),r!==t&&r!==t.sym||(t=t.next),o.mesh.deleteEdge(r))}},o.sweep.initPriorityQ_=function(e){var t=new o.PriorityQ(o.geom.vertLeq);e.pq=t;var n,r=e.mesh.vHead;for(n=r.next;n!==r;n=n.next)n.pqHandle=t.insert(n);t.init()},o.sweep.donePriorityQ_=function(e){e.pq.deleteQ(),e.pq=null},o.sweep.removeDegenerateFaces_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t){t=n.next;var r=n.anEdge;r.lNext.lNext===r&&(o.sweep.addWinding_(r.oNext,r),o.mesh.deleteEdge(r))}},o.tessmono={},o.tessmono.tessellateMonoRegion_=function(e){for(var t=e.anEdge;o.geom.vertLeq(t.dst(),t.org);t=t.lPrev());for(;o.geom.vertLeq(t.org,t.dst());t=t.lNext);for(var n,r=t.lPrev();t.lNext!==r;)if(o.geom.vertLeq(t.dst(),r.org)){for(;r.lNext!==t&&(o.geom.edgeGoesLeft(r.lNext)||o.geom.edgeSign(r.org,r.dst(),r.lNext.dst())<=0);)r=(n=o.mesh.connect(r.lNext,r)).sym;r=r.lPrev()}else{for(;r.lNext!==t&&(o.geom.edgeGoesRight(t.lPrev())||o.geom.edgeSign(t.dst(),t.org,t.lPrev().org)>=0);)n=o.mesh.connect(t,t.lPrev()),t=n.sym;t=t.lNext}for(;r.lNext.lNext!==t;)r=(n=o.mesh.connect(r.lNext,r)).sym},o.tessmono.tessellateInterior=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside&&o.tessmono.tessellateMonoRegion_(n)},o.tessmono.discardExterior=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside||o.mesh.zapFace(n)},o.tessmono.setWindingNumber=function(e,t,n){for(var r,i=e.eHead.next;i!==e.eHead;i=r)r=i.next,i.rFace().inside!==i.lFace.inside?i.winding=i.lFace.inside?t:-t:n?o.mesh.deleteEdge(i):i.winding=0},o.Dict=function(e,t){this.head_=new o.DictNode,this.frame_=e,this.leq_=t},o.Dict.prototype.deleteDict_=function(){},o.Dict.prototype.insertBefore=function(e,t){do{e=e.prev}while(null!==e.key&&!this.leq_(this.frame_,e.key,t));var n=new o.DictNode(t,e.next,e);return e.next.prev=n,e.next=n,n},o.Dict.prototype.insert=function(e){return this.insertBefore(this.head_,e)},o.Dict.prototype.deleteNode=function(e){e.next.prev=e.prev,e.prev.next=e.next},o.Dict.prototype.search=function(e){var t=this.head_;do{t=t.next}while(null!==t.key&&!this.leq_(this.frame_,e,t.key));return t},o.Dict.prototype.getMin=function(){return this.head_.next},o.Dict.prototype.getMax=function(){return this.head_.prev},o.DictNode=function(e,t,n){this.key=e||null,this.next=t||this,this.prev=n||this},o.DictNode.prototype.getKey=function(){return this.key},o.DictNode.prototype.getSuccessor=function(){return this.next},o.DictNode.prototype.getPredecessor=function(){return this.prev},o.CachedVertex=function(){this.coords=[0,0,0],this.data=null},o.GluTesselator=function(){this.state=o.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null,this.callError_=null,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.relTolerance=o.GLU_TESS_DEFAULT_TOLERANCE,this.windingRule=o.windingRule.GLU_TESS_WINDING_ODD,this.fatalError=!1,this.dict=null,this.pq=null,this.event=null,this.callCombine_=null,this.boundaryOnly=!1,this.callBegin_=null,this.callEdgeFlag_=null,this.callVertex_=null,this.callEnd_=null,this.callMesh_=null,this.callBeginData_=null,this.callEdgeFlagData_=null,this.callVertexData_=null,this.callEndData_=null,this.callErrorData_=null,this.callCombineData_=null,this.polygonData_=null,this.emptyCache=!1,this.cacheCount=0,this.cache=new Array(o.TESS_MAX_CACHE);for(var e=0;e<o.TESS_MAX_CACHE;e++)this.cache[e]=new o.CachedVertex},o.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2},o.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(o.GluTesselator.tessState_.T_DORMANT)},o.GluTesselator.prototype.gluTessProperty=function(e,t){switch(e){case o.gluEnum.GLU_TESS_TOLERANCE:if(t<0||t>1)break;return void(this.relTolerance=t);case o.gluEnum.GLU_TESS_WINDING_RULE:var n=t;switch(n){case o.windingRule.GLU_TESS_WINDING_ODD:case o.windingRule.GLU_TESS_WINDING_NONZERO:case o.windingRule.GLU_TESS_WINDING_POSITIVE:case o.windingRule.GLU_TESS_WINDING_NEGATIVE:case o.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return void(this.windingRule=n)}break;case o.gluEnum.GLU_TESS_BOUNDARY_ONLY:return void(this.boundaryOnly=!!t);default:return void this.callErrorOrErrorData(o.gluEnum.GLU_INVALID_ENUM)}this.callErrorOrErrorData(o.gluEnum.GLU_INVALID_VALUE)},o.GluTesselator.prototype.gluGetTessProperty=function(e){switch(e){case o.gluEnum.GLU_TESS_TOLERANCE:return this.relTolerance;case o.gluEnum.GLU_TESS_WINDING_RULE:return this.windingRule;case o.gluEnum.GLU_TESS_BOUNDARY_ONLY:return this.boundaryOnly;default:this.callErrorOrErrorData(o.gluEnum.GLU_INVALID_ENUM)}return!1},o.GluTesselator.prototype.gluTessNormal=function(e,t,n){this.normal[0]=e,this.normal[1]=t,this.normal[2]=n},o.GluTesselator.prototype.gluTessCallback=function(e,t){var n=t||null;switch(e){case o.gluEnum.GLU_TESS_BEGIN:return void(this.callBegin_=n);case o.gluEnum.GLU_TESS_BEGIN_DATA:return void(this.callBeginData_=n);case o.gluEnum.GLU_TESS_EDGE_FLAG:return void(this.callEdgeFlag_=n);case o.gluEnum.GLU_TESS_EDGE_FLAG_DATA:return void(this.callEdgeFlagData_=n);case o.gluEnum.GLU_TESS_VERTEX:return void(this.callVertex_=n);case o.gluEnum.GLU_TESS_VERTEX_DATA:return void(this.callVertexData_=n);case o.gluEnum.GLU_TESS_END:return void(this.callEnd_=n);case o.gluEnum.GLU_TESS_END_DATA:return void(this.callEndData_=n);case o.gluEnum.GLU_TESS_ERROR:return void(this.callError_=n);case o.gluEnum.GLU_TESS_ERROR_DATA:return void(this.callErrorData_=n);case o.gluEnum.GLU_TESS_COMBINE:return void(this.callCombine_=n);case o.gluEnum.GLU_TESS_COMBINE_DATA:return void(this.callCombineData_=n);case o.gluEnum.GLU_TESS_MESH:return void(this.callMesh_=n);default:return void this.callErrorOrErrorData(o.gluEnum.GLU_INVALID_ENUM)}},o.GluTesselator.prototype.gluTessVertex=function(e,t){var n=!1,r=[0,0,0];this.requireState_(o.GluTesselator.tessState_.T_IN_CONTOUR),this.emptyCache&&(this.emptyCache_(),this.lastEdge_=null);for(var i=0;i<3;++i){var a=e[i];a<-o.GLU_TESS_MAX_COORD&&(a=-o.GLU_TESS_MAX_COORD,n=!0),a>o.GLU_TESS_MAX_COORD&&(a=o.GLU_TESS_MAX_COORD,n=!0),r[i]=a}if(n&&this.callErrorOrErrorData(o.errorType.GLU_TESS_COORD_TOO_LARGE),null===this.mesh){if(this.cacheCount<o.TESS_MAX_CACHE)return void this.cacheVertex_(r,t);this.emptyCache_()}this.addVertex_(r,t)},o.GluTesselator.prototype.gluTessBeginPolygon=function(e){this.requireState_(o.GluTesselator.tessState_.T_DORMANT),this.state=o.GluTesselator.tessState_.T_IN_POLYGON,this.cacheCount=0,this.emptyCache=!1,this.mesh=null,this.polygonData_=e},o.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(o.GluTesselator.tessState_.T_IN_POLYGON),this.state=o.GluTesselator.tessState_.T_IN_CONTOUR,this.lastEdge_=null,this.cacheCount>0&&(this.emptyCache=!0)},o.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(o.GluTesselator.tessState_.T_IN_CONTOUR),this.state=o.GluTesselator.tessState_.T_IN_POLYGON},o.GluTesselator.prototype.gluTessEndPolygon=function(){if(this.requireState_(o.GluTesselator.tessState_.T_IN_POLYGON),this.state=o.GluTesselator.tessState_.T_DORMANT,null===this.mesh&&this.emptyCache_(),o.normal.projectPolygon(this),o.sweep.computeInterior(this),!this.fatalError){var e=this.mesh;if(this.boundaryOnly?o.tessmono.setWindingNumber(e,1,!0):o.tessmono.tessellateInterior(e),this.mesh.checkMesh(),this.callBegin_||this.callEnd_||this.callVertex_||this.callEdgeFlag_||this.callBeginData_||this.callEndData_||this.callVertexData_||this.callEdgeFlagData_)if(this.boundaryOnly)o.render.renderBoundary(this,this.mesh);else{var t=!(!this.callEdgeFlag_&&!this.callEdgeFlagData_);o.render.renderMesh(this,this.mesh,t)}if(this.callMesh_)return o.tessmono.discardExterior(this.mesh),this.callMesh_(this.mesh),this.mesh=null,void(this.polygonData_=null)}o.mesh.deleteMesh(this.mesh),this.polygonData_=null,this.mesh=null},o.GluTesselator.prototype.makeDormant_=function(){this.mesh&&o.mesh.deleteMesh(this.mesh),this.state=o.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null},o.GluTesselator.prototype.requireState_=function(e){this.state!==e&&this.gotoState_(e)},o.GluTesselator.prototype.gotoState_=function(e){for(;this.state!==e;)if(this.state<e)switch(this.state){case o.GluTesselator.tessState_.T_DORMANT:this.callErrorOrErrorData(o.errorType.GLU_TESS_MISSING_BEGIN_POLYGON),this.gluTessBeginPolygon(null);break;case o.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorOrErrorData(o.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state){case o.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorOrErrorData(o.errorType.GLU_TESS_MISSING_END_CONTOUR),this.gluTessEndContour();break;case o.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorOrErrorData(o.errorType.GLU_TESS_MISSING_END_POLYGON),this.makeDormant_()}},o.GluTesselator.prototype.addVertex_=function(e,t){var n=this.lastEdge_;null===n?(n=o.mesh.makeEdge(this.mesh),o.mesh.meshSplice(n,n.sym)):(o.mesh.splitEdge(n),n=n.lNext),n.org.data=t,n.org.coords[0]=e[0],n.org.coords[1]=e[1],n.org.coords[2]=e[2],n.winding=1,n.sym.winding=-1,this.lastEdge_=n},o.GluTesselator.prototype.cacheVertex_=function(e,t){var n=this.cache[this.cacheCount];n.data=t,n.coords[0]=e[0],n.coords[1]=e[1],n.coords[2]=e[2],++this.cacheCount},o.GluTesselator.prototype.emptyCache_=function(){this.mesh=new o.GluMesh;for(var e=0;e<this.cacheCount;e++){var t=this.cache[e];this.addVertex_(t.coords,t.data)}this.cacheCount=0,this.emptyCache=!1},o.GluTesselator.prototype.callBeginOrBeginData=function(e){this.callBeginData_?this.callBeginData_(e,this.polygonData_):this.callBegin_&&this.callBegin_(e)},o.GluTesselator.prototype.callVertexOrVertexData=function(e){this.callVertexData_?this.callVertexData_(e,this.polygonData_):this.callVertex_&&this.callVertex_(e)},o.GluTesselator.prototype.callEdgeFlagOrEdgeFlagData=function(e){this.callEdgeFlagData_?this.callEdgeFlagData_(e,this.polygonData_):this.callEdgeFlag_&&this.callEdgeFlag_(e)},o.GluTesselator.prototype.callEndOrEndData=function(){this.callEndData_?this.callEndData_(this.polygonData_):this.callEnd_&&this.callEnd_()},o.GluTesselator.prototype.callCombineOrCombineData=function(e,t,n){var r;return this.callCombineData_?r=this.callCombineData_(e,t,n,this.polygonData_):this.callCombine_&&(r=this.callCombine_(e,t,n)),void 0===r&&(r=null),r},o.GluTesselator.prototype.callErrorOrErrorData=function(e){this.callErrorData_?this.callErrorData_(e,this.polygonData_):this.callError_&&this.callError_(e)},o.GluFace=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.data=null,this.inside=!1},o.GluHalfEdge=function(e){this.next=e||this,this.sym=null,this.oNext=null,this.lNext=null,this.org=null,this.lFace=null,this.activeRegion=null,this.winding=0},o.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace},o.GluHalfEdge.prototype.dst=function(){return this.sym.org},o.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext},o.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym},o.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym},o.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext},o.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym},o.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym},o.GluMesh=function(){this.vHead=new o.GluVertex,this.fHead=new o.GluFace,this.eHead=new o.GluHalfEdge,this.eHeadSym=new o.GluHalfEdge,this.eHead.sym=this.eHeadSym,this.eHeadSym.sym=this.eHead},o.GluMesh.prototype.checkMesh=function(){if(o.DEBUG){var e,t,n=this.fHead,r=this.vHead,i=this.eHead,a=n;for(a=n;(t=a.next)!==n;a=t){e=t.anEdge;do{e=e.lNext}while(e!==t.anEdge)}var s,u=r;for(u=r;(s=u.next)!==r;u=s){e=s.anEdge;do{e=e.oNext}while(e!==s.anEdge)}var l=i;for(l=i;(e=l.next)!==i;l=e);}},o.GluVertex=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.data=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=null},o.PQHandleElem=function(){this.key=null,this.node=0},o.PQHandleElem.realloc=function(e,t){var n=new Array(t),r=0;if(null!==e)for(;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=new o.PQHandleElem;return n},o.PQNode=function(){this.handle=0},o.PQNode.realloc=function(e,t){var n=new Array(t),r=0;if(null!==e)for(;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=new o.PQNode;return n},o.PriorityQ=function(e){this.keys_=o.PriorityQ.prototype.PQKeyRealloc_(null,o.PriorityQ.INIT_SIZE_),this.order_=null,this.size_=0,this.max_=o.PriorityQ.INIT_SIZE_,this.initialized_=!1,this.leq_=e,this.heap_=new o.PriorityQHeap(this.leq_)},o.PriorityQ.INIT_SIZE_=32,o.PriorityQ.prototype.deleteQ=function(){this.heap_.deleteHeap(),this.heap_=null,this.order_=null,this.keys_=null},o.PriorityQ.prototype.init=function(){this.order_=[];for(var e=0;e<this.size_;e++)this.order_[e]=e;var t=function(e,t){return function(n,r){return t(e[n],e[r])?1:-1}}(this.keys_,this.leq_);if(this.order_.sort(t),this.max_=this.size_,this.initialized_=!0,this.heap_.init(),o.DEBUG){var n=0+this.size_-1;for(e=0;e<n;++e);}},o.PriorityQ.prototype.insert=function(e){if(this.initialized_)return this.heap_.insert(e);var t=this.size_;return++this.size_>=this.max_&&(this.max_*=2,this.keys_=o.PriorityQ.prototype.PQKeyRealloc_(this.keys_,this.max_)),this.keys_[t]=e,-(t+1)},o.PriorityQ.prototype.PQKeyRealloc_=function(e,t){var n=new Array(t),r=0;if(null!==e)for(;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=null;return n},o.PriorityQ.prototype.keyLessThan_=function(e,t){var n=this.keys_[e],r=this.keys_[t];return!this.leq_(r,n)},o.PriorityQ.prototype.keyGreaterThan_=function(e,t){var n=this.keys_[e],r=this.keys_[t];return!this.leq_(n,r)},o.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var e=this.keys_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var t=this.heap_.minimum();if(this.leq_(t,e))return this.heap_.extractMin()}do{--this.size_}while(this.size_>0&&null===this.keys_[this.order_[this.size_-1]]);return e},o.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var e=this.keys_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var t=this.heap_.minimum();if(this.leq_(t,e))return t}return e},o.PriorityQ.prototype.isEmpty_=function(){return 0===this.size_&&this.heap_.isEmpty()},o.PriorityQ.prototype.remove=function(e){if(e>=0)this.heap_.remove(e);else for(e=-(e+1),this.keys_[e]=null;this.size_>0&&null===this.keys_[this.order_[this.size_-1]];)--this.size_},o.PriorityQHeap=function(e){this.nodes_=o.PQNode.realloc(null,o.PriorityQHeap.INIT_SIZE_+1),this.handles_=o.PQHandleElem.realloc(null,o.PriorityQHeap.INIT_SIZE_+1),this.size_=0,this.max_=o.PriorityQHeap.INIT_SIZE_,this.freeList_=0,this.initialized_=!1,this.leq_=e,this.nodes_[1].handle=1},o.PriorityQHeap.INIT_SIZE_=32,o.PriorityQHeap.prototype.deleteHeap=function(){this.handles_=null,this.nodes_=null},o.PriorityQHeap.prototype.init=function(){for(var e=this.size_;e>=1;--e)this.floatDown_(e);this.initialized_=!0},o.PriorityQHeap.prototype.insert=function(e){var t,n=++this.size_;return 2*n>this.max_&&(this.max_*=2,this.nodes_=o.PQNode.realloc(this.nodes_,this.max_+1),this.handles_=o.PQHandleElem.realloc(this.handles_,this.max_+1)),0===this.freeList_?t=n:(t=this.freeList_,this.freeList_=this.handles_[t].node),this.nodes_[n].handle=t,this.handles_[t].node=n,this.handles_[t].key=e,this.initialized_&&this.floatUp_(n),t},o.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_},o.PriorityQHeap.prototype.minimum=function(){return this.handles_[this.nodes_[1].handle].key},o.PriorityQHeap.prototype.extractMin=function(){var e=this.nodes_,t=this.handles_,n=e[1].handle,r=t[n].key;return this.size_>0&&(e[1].handle=e[this.size_].handle,t[e[1].handle].node=1,t[n].key=null,t[n].node=this.freeList_,this.freeList_=n,--this.size_>0&&this.floatDown_(1)),r},o.PriorityQHeap.prototype.remove=function(e){var t=this.nodes_,n=this.handles_,r=n[e].node;t[r].handle=t[this.size_].handle,n[t[r].handle].node=r,r<=--this.size_&&(r<=1||this.leq_(n[t[r>>1].handle].key,n[t[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),n[e].key=null,n[e].node=this.freeList_,this.freeList_=e},o.PriorityQHeap.prototype.floatDown_=function(e){for(var t=this.nodes_,n=this.handles_,r=t[e].handle;;){var i=e<<1;i<this.size_&&this.leq_(n[t[i+1].handle].key,n[t[i].handle].key)&&++i;var o=t[i].handle;if(i>this.size_||this.leq_(n[r].key,n[o].key)){t[e].handle=r,n[r].node=e;break}t[e].handle=o,n[o].node=e,e=i}},o.PriorityQHeap.prototype.floatUp_=function(e){for(var t=this.nodes_,n=this.handles_,r=t[e].handle;;){var i=e>>1,o=t[i].handle;if(0===i||this.leq_(n[o].key,n[r].key)){t[e].handle=r,n[r].node=e;break}t[e].handle=o,n[o].node=e,e=i}},o.ActiveRegion=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},o.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()},o.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()},e.exports=o,i("util/libtess",(function(){})),i("util/measure/AreaMeasurer",["../../geom/Angle","../../error/ArgumentError","../../geom/Location","../Logger","./MeasurerUtils","../../geom/Sector","../../geom/Vec3","../libtess"],(function(e,t,n,r,i,a,s,u){"use strict";var l=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"AreaMeasurer","constructor","missingWorldWindow"));this.wwd=e,this.DEFAULT_AREA_SAMPLING_STEPS=32,this._areaTerrainSamplingSteps=this.DEFAULT_AREA_SAMPLING_STEPS,this._maxSegmentLength=1e5,this.subdividedPositions=null,this.vecZ=new s(0,0,1),this.scratchLocation=new n(0,0)};return Object.defineProperties(l.prototype,{areaTerrainSamplingSteps:{get:function(){return this._areaTerrainSamplingSteps},set:function(e){this._areaTerrainSamplingSteps=e}},maxSegmentLength:{get:function(){return this._maxSegmentLength},set:function(e){this._maxSegmentLength=e}}}),l.prototype.getArea=function(e,t,n){var r=this.wwd.globe;return t?this.computeSurfaceAreaSampling(r,e,n):this.computeProjectedAreaGeometry(r,e,n)},l.prototype.computeSurfaceAreaSampling=function(t,n,r){var o=new a(0,0,0,0);o.setToBoundingSector(n),this.subdividedPositions=i.subdividePositions(t,n,!0,r,this._maxSegmentLength);for(var u=Math.max(this.DEFAULT_AREA_SAMPLING_STEPS,this._areaTerrainSamplingSteps),l=o.deltaLatitude()*e.DEGREES_TO_RADIANS,c=o.deltaLongitude()*e.DEGREES_TO_RADIANS,h=Math.max(l/u,c/u),f=Math.round(l/h),d=Math.round(c/h*Math.cos(o.centroidLatitude()*e.DEGREES_TO_RADIANS)),p=l/f,m=c/d,g=0,A=0;A<f;A++)for(var v=o.minLatitude*e.DEGREES_TO_RADIANS+p*A,y=t.radiusAt((v+p/2)*e.RADIANS_TO_DEGREES,o.centroidLongitude()),b=m*y*Math.cos(v+p/2),_=p*y,w=b*_,E=0;E<d;E++){var x=o.minLongitude*e.DEGREES_TO_RADIANS+m*E,S=v*e.RADIANS_TO_DEGREES,T=(v+p)*e.RADIANS_TO_DEGREES,M=x*e.RADIANS_TO_DEGREES,L=(x+m)*e.RADIANS_TO_DEGREES,C=new a(S,T,M,L);if(i.isLocationInside(C.centroid(this.scratchLocation),this.subdividedPositions)){var R=t.elevationAtLocation(S,M),O=t.elevationAtLocation(S,L),I=t.elevationAtLocation(T,M),P=new s(b,0,O-R),k=new s(0,_,I-R);P.normalize(),k.normalize();var N=P.cross(k).normalize(),D=Math.tan(i.angleBetweenVectors(this.vecZ,N));g+=w*Math.sqrt(1+D*D)}}return g},l.prototype.computeProjectedAreaGeometry=function(t,n,r){this.subdividedPositions=i.subdividePositions(t,n,!1,r,this._maxSegmentLength);var o=this.subdividedPositions.length,a=this.subdividedPositions[0],s=this.subdividedPositions[o-1];a.equals(s)&&o--;for(var u=[],l=0,c=0;c<o;c++){var h=this.subdividedPositions[c];u[l++]=h.longitude*e.DEGREES_TO_RADIANS,u[l++]=h.latitude*e.DEGREES_TO_RADIANS,u[l++]=0}var f=this.tessellatePolygon(o,u),d=0,p=f.length/9;for(c=0;c<p;c++){var m=[f[0+(l=9*c)],f[l+1],f[l+2],f[l+3],f[l+4],f[l+5],f[l+6],f[l+7],f[l+8]];d+=this.computeTriangleProjectedArea(t,m)}return d},l.prototype.computeTriangleProjectedArea=function(t,n){var r=n[0],i=n[1],o=n[3],a=n[4],s=n[6],u=n[7],l=Math.abs(r*(a-u)+o*(u-i)+s*(i-a));l/=2;var c=(r+o+s)/3,h=(i+a+u)/3,f=t.radiusAt(h*e.RADIANS_TO_DEGREES,c*e.RADIANS_TO_DEGREES);return l*(Math.cos(h)*f*f)},l.prototype.tessellatePolygon=function(e,t){var n,i=new o.GluTesselator,a=[];i.gluTessCallback(o.gluEnum.GLU_TESS_BEGIN,(function(e){e!==o.primitiveType.GL_TRIANGLES&&r.logMessage(r.LEVEL_WARNING,"AreaMeasurer","tessellatePolygon","Tessellation error, primitive is not TRIANGLES.")})),i.gluTessCallback(o.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t.push(e[0]),t.push(e[1]),t.push(e[2])})),i.gluTessCallback(o.gluEnum.GLU_TESS_EDGE_FLAG,(function(){})),i.gluTessCallback(o.gluEnum.GLU_TESS_ERROR,(function(e){r.logMessage(r.LEVEL_WARNING,"AreaMeasurer","tessellatePolygon","Tessellation error "+e+".")})),i.gluTessBeginPolygon(a),i.gluTessBeginContour();for(var s=0;s<e;s++)n=t.slice(3*s,3*s+3),i.gluTessVertex(n,n);return i.gluTessEndContour(),i.gluTessEndPolygon(),a},l})),i("util/AbsentResourceList",[],(function(){"use strict";var e=function(e,t){this.maxTrys=e,this.minCheckInterval=t,this.tryAgainInterval=6e4,this.possiblyAbsent={}};return e.prototype.isResourceAbsent=function(e){var t=this.possiblyAbsent[e];if(!t)return!1;if(t.permanent)return!0;var n=Date.now()-t.timeOfLastMark;return n>this.tryAgainInterval?(delete this.possiblyAbsent[e],!1):n<this.minCheckInterval||t.numTrys>this.maxTrys},e.prototype.markResourceAbsent=function(e){var t=this.possiblyAbsent[e];t||(t={timeOfLastMark:Date.now(),numTrys:0},this.possiblyAbsent[e]=t),t.numTrys=t.numTrys+1,t.timeOfLastMark=Date.now()},e.prototype.markResourceAbsentPermanently=function(e){var t=this.possiblyAbsent[e];t||(t={timeOfLastMark:Date.now(),numTrys:0},this.possiblyAbsent[e]=t),t.numTrys=t.numTrys+1,t.timeOfLastMark=Date.now(),t.permanent=!0},e.prototype.unmarkResourceAbsent=function(e){this.possiblyAbsent[e]&&delete this.possiblyAbsent[e]},e})),i("globe/ElevationCoverage",["../error/ArgumentError","../util/Logger","../geom/Sector"],(function(e,t,n){"use strict";var r=function(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"ElevationCoverage","constructor","missingResolution"));this.timestamp=Date.now(),this.displayName="Coverage",this._enabled=!0,this.resolution=r,this.coverageSector=n.FULL_SPHERE};return Object.defineProperties(r.prototype,{enabled:{get:function(){return this._enabled},set:function(e){this._enabled=e,this.timestamp=Date.now()}}}),r.prototype.minAndMaxElevationsForSector=function(n,r){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"ElevationCoverage","minAndMaxElevationsForSector","missingSector"));if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"ElevationCoverage","minAndMaxElevationsForSector","missingResult"));return r[0]>0&&(r[0]=0),r[1]<0&&(r[1]=0),!0},r.prototype.elevationAtLocation=function(e,t){return 0},r.prototype.elevationsForGrid=function(n,r,i,o){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"ElevationCoverage","elevationsForGrid","missingSector"));if(r<=0||i<=0)throw new e(t.logMessage(t.LEVEL_SEVERE,"ElevationCoverage","elevationsForGrid","numLat or numLon is less than 1"));if(!o||o.length<r*i)throw new e(t.logMessage(t.LEVEL_SEVERE,"ElevationCoverage","elevationsForGrid","missingArray"));for(var a=0,s=o.length;a<s;a++)o[a]=0;return!0},r})),i("globe/ElevationImage",["../error/ArgumentError","../util/Logger","../util/WWMath"],(function(e,t,n){"use strict";var r=function(n,r,i){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"ElevationImage","constructor","missingSector"));this.sector=n,this.imageWidth=r,this.imageHeight=i,this.size=this.imageWidth*this.imageHeight,this.hasData=!0,this.hasMissingData=!1};return r.NO_DATA=0,r.isNoData=function(e,t,n,i){var o=r.NO_DATA;return e===o&&t===o&&n===o&&i===o},r.prototype.pixel=function(e,t){return e<0||e>=this.imageWidth||t<0||t>=this.imageHeight?0:(t=this.imageHeight-t-1,this.imageData[e+t*this.imageWidth])},r.prototype.elevationAtLocation=function(e,t){var i=this.sector.maxLatitude,o=this.sector.minLongitude,a=this.sector.deltaLatitude(),s=this.sector.deltaLongitude(),u=(this.imageWidth-1)*(t-o)/s,l=(this.imageHeight-1)*(i-e)/a,c=Math.floor(n.clamp(u,0,this.imageWidth-1)),h=Math.floor(n.clamp(c+1,0,this.imageWidth-1)),f=Math.floor(n.clamp(l,0,this.imageHeight-1)),d=Math.floor(n.clamp(f+1,0,this.imageHeight-1)),p=this.imageData,m=p[c+f*this.imageWidth],g=p[h+f*this.imageWidth],A=p[c+d*this.imageWidth],v=p[h+d*this.imageWidth],y=u-c,b=l-f;return r.isNoData(m,g,A,v)?NaN:(1-y)*(1-b)*m+y*(1-b)*g+(1-y)*b*A+y*b*v},r.prototype.elevationsForGrid=function(i,o,a,s){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"ElevationImage","elevationsForGrid","missingSector"));if(o<1||a<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"ElevationImage","elevationsForGrid","The specified number of sample points is less than 1."));if(!s)throw new e(t.logMessage(t.LEVEL_SEVERE,"ElevationImage","elevationsForGrid","missingResult"));var u,l,c,h,f=this.sector.minLatitude,d=this.sector.maxLatitude,p=this.sector.minLongitude,m=this.sector.maxLongitude,g=d-f,A=m-p,v=i.minLatitude,y=i.maxLatitude,b=i.minLongitude,_=i.maxLongitude,w=(y-v)/(o>1?o-1:1),E=(_-b)/(a>1?a-1:1),x=0,S=this.imageData;for(h=0,u=v;h<o;h+=1,u+=w)if(h===o-1&&(u=y),u>=f&&u<=d){var T=(this.imageHeight-1)*(d-u)/g,M=Math.floor(n.clamp(T,0,this.imageHeight-1)),L=Math.floor(n.clamp(M+1,0,this.imageHeight-1)),C=T-M;for(c=0,l=b;c<a;c+=1,l+=E){if(c===a-1&&(l=_),l>=p&&l<=m&&isNaN(s[x])){var R=(this.imageWidth-1)*(l-p)/A,O=Math.floor(n.clamp(R,0,this.imageWidth-1)),I=Math.floor(n.clamp(O+1,0,this.imageWidth-1)),P=R-O,k=S[O+M*this.imageWidth],N=S[I+M*this.imageWidth],D=S[O+L*this.imageWidth],F=S[I+L*this.imageWidth];r.isNoData(k,N,D,F)?s[x]=NaN:s[x]=(1-P)*(1-C)*k+P*(1-C)*N+(1-P)*C*D+P*C*F}x++}}else x+=a},r.prototype.minAndMaxElevationsForSector=function(e){if(!this.hasData)return null;var t=[];if(e)if(e.contains(this.sector))t[0]>this.minElevation&&(t[0]=this.minElevation),t[1]<this.maxElevation&&(t[1]=this.maxElevation);else{var r=this.sector.maxLatitude,i=this.sector.minLongitude,o=this.sector.deltaLatitude(),a=this.sector.deltaLongitude(),s=e.minLatitude,u=e.maxLatitude,l=e.minLongitude,c=e.maxLongitude,h=Math.floor((this.imageHeight-1)*(r-u)/o),f=Math.ceil((this.imageHeight-1)*(r-s)/o),d=Math.floor((this.imageWidth-1)*(l-i)/a),p=Math.ceil((this.imageWidth-1)*(c-i)/a);h=n.clamp(h,0,this.imageHeight-1),f=n.clamp(f,0,this.imageHeight-1),d=n.clamp(d,0,this.imageWidth-1),p=n.clamp(p,0,this.imageWidth-1);for(var m=this.imageData,g=Number.MAX_VALUE,A=-g,v=h;v<=f;v++)for(var y=d;y<=p;y++){var b=m[Math.floor(y+v*this.imageWidth)];g>b&&(g=b),A<b&&(A=b)}t[0]>g&&(t[0]=g),t[1]<A&&(t[1]=A)}else t[0]=this.minElevation,t[1]=this.maxElevation;return t},r.prototype.findMinAndMaxElevation=function(){if(this.hasData=!1,this.hasMissingData=!1,this.imageData&&this.imageData.length>0){this.minElevation=Number.MAX_VALUE,this.maxElevation=-Number.MAX_VALUE;for(var e=this.imageData,t=this.imageWidth*this.imageHeight,n=0;n<t;n++){var i=e[n];i!==r.NO_DATA?(this.hasData=!0,this.minElevation>i&&(this.minElevation=i),this.maxElevation<i&&(this.maxElevation=i)):this.hasMissingData=!0}}this.hasData||(this.minElevation=0,this.maxElevation=0)},r})),i("formats/geotiff/GeoTiffConstants",[],(function(){"use strict";return{Tag:{MODEL_PIXEL_SCALE:33550,MODEL_TRANSFORMATION:34264,MODEL_TIEPOINT:33922,GEO_KEY_DIRECTORY:34735,GEO_DOUBLE_PARAMS:34736,GEO_ASCII_PARAMS:34737,GDAL_NODATA:42113,GDAL_METADATA:42112},Key:{GTModelTypeGeoKey:1024,GTRasterTypeGeoKey:1025,GTCitationGeoKey:1026,GeographicTypeGeoKey:2048,GeogCitationGeoKey:2049,GeogGeodeticDatumGeoKey:2050,GeogPrimeMeridianGeoKey:2051,GeogLinearUnitsGeoKey:2052,GeogLinearUnitSizeGeoKey:2053,GeogAngularUnitsGeoKey:2054,GeogAngularUnitSizeGeoKey:2055,GeogEllipsoidGeoKey:2056,GeogSemiMajorAxisGeoKey:2057,GeogSemiMinorAxisGeoKey:2058,GeogInvFlatteningGeoKey:2059,GeogAzimuthUnitsGeoKey:2060,GeogPrimeMeridianLongGeoKey:2061,GeogTOWGS84GeoKey:2062,ProjectedCSTypeGeoKey:3072,PCSCitationGeoKey:3073,ProjectionGeoKey:3074,ProjCoordTransGeoKey:3075,ProjLinearUnitsGeoKey:3076,ProjLinearUnitSizeGeoKey:3077,ProjStdParallel1GeoKey:3078,ProjStdParallel2GeoKey:3079,ProjNatOriginLongGeoKey:3080,ProjNatOriginLatGeoKey:3081,ProjFalseEastingGeoKey:3082,ProjFalseNorthingGeoKey:3083,ProjFalseOriginLongGeoKey:3084,ProjFalseOriginLatGeoKey:3085,ProjFalseOriginEastingGeoKey:3086,ProjFalseOriginNorthingGeoKey:3087,ProjCenterLongGeoKey:3088,ProjCenterLatGeoKey:3089,ProjCenterEastingGeoKey:3090,ProjCenterNorthingGeoKey:3091,ProjScaleAtNatOriginGeoKey:3092,ProjScaleAtCenterGeoKey:3093,ProjAzimuthAngleGeoKey:3094,ProjStraightVertPoleLongGeoKey:3095,VerticalCSTypeGeoKey:4096,VerticalCitationGeoKey:4097,VerticalDatumGeoKey:4098,VerticalUnitsGeoKey:4099}}})),i("formats/geotiff/GeoTiffKeyEntry",["../../error/AbstractError","../../error/ArgumentError","./GeoTiffConstants","../../util/Logger"],(function(e,t,n,r){"use strict";var i=function(e,n,i,o){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"GeoTiffKeyEntry","constructor","missingKeyId"));if(null===n||void 0===n)throw new t(r.logMessage(r.LEVEL_SEVERE,"GeoTiffKeyEntry","constructor","missingTiffTagLocation"));if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"GeoTiffKeyEntry","constructor","missingCount"));if(null===o||void 0===o)throw new t(r.logMessage(r.LEVEL_SEVERE,"GeoTiffKeyEntry","constructor","missingValueOffset"));this._keyId=e,this._tiffTagLocation=n,this._count=i,this._valueOffset=o};return Object.defineProperties(i.prototype,{keyId:{get:function(){return this._keyId}},tiffTagLocation:{get:function(){return this._tiffTagLocation}},count:{get:function(){return this._count}},valueOffset:{get:function(){return this._valueOffset}}}),i.prototype.getGeoKeyValue=function(e,t){var r;if(0===this.tiffTagLocation)r=this.valueOffset;else if(this.tiffTagLocation===n.Tag.GEO_ASCII_PARAMS){var i="";if(t){for(var o=this.valueOffset;o<this.count-1;o++)i+=t[o];"|"!=t[this.count-1]&&(i+=t[this.count-1]),r=i}}else this.tiffTagLocation===n.Tag.GEO_DOUBLE_PARAMS&&e&&(r=e[this.valueOffset]);return r},i})),i("formats/geotiff/GeoTiffMetadata",[],(function(){"use strict";var e=function(){this._bitsPerSample=null,this._colorMap=null,this._compression=null,this._extraSamples=null,this._imageDescription=null,this._imageLength=null,this._imageWidth=null,this._maxSampleValue=null,this._minSampleValue=null,this._orientation=0,this._photometricInterpretation=null,this._planarConfiguration=null,this._resolutionUnit=null,this._rowsPerStrip=null,this._samplesPerPixel=null,this._sampleFormat=null,this._software=null,this._stripByteCounts=null,this._stripOffsets=null,this._tileByteCounts=null,this._tileOffsets=null,this._tileLength=null,this._tileWidth=null,this._xResolution=null,this._yResolution=null,this._geoAsciiParams=null,this._geoDoubleParams=null,this._geoKeyDirectory=null,this._modelPixelScale=null,this._modelTiepoint=null,this._modelTransformation=null,this._noData=null,this._metaData=null,this._bbox=null,this._gtModelTypeGeoKey=null,this._gtRasterTypeGeoKey=null,this._gtCitationGeoKey=null,this._geographicTypeGeoKey=null,this._geogCitationGeoKey=null,this._geogAngularUnitsGeoKey=null,this._geogAngularUnitSizeGeoKey=null,this._geogSemiMajorAxisGeoKey=null,this._geogInvFlatteningGeoKey=null,this._projectedCSType=null,this._projLinearUnits=null};return Object.defineProperties(e.prototype,{bitsPerSample:{get:function(){return this._bitsPerSample},set:function(e){this._bitsPerSample=e}},colorMap:{get:function(){return this._colorMap},set:function(e){this._colorMap=e}},compression:{get:function(){return this._compression},set:function(e){this._compression=e}},extraSamples:{get:function(){return this._extraSamples},set:function(e){this._extraSamples=e}},imageDescription:{get:function(){return this._imageDescription},set:function(e){this._imageDescription=e}},imageLength:{get:function(){return this._imageLength},set:function(e){this._imageLength=e}},imageWidth:{get:function(){return this._imageWidth},set:function(e){this._imageWidth=e}},maxSampleValue:{get:function(){return this._maxSampleValue},set:function(e){this._maxSampleValue=e}},minSampleValue:{get:function(){return this._minSampleValue},set:function(e){this._minSampleValue=e}},orientation:{get:function(){return this._orientation},set:function(e){this._orientation=e}},photometricInterpretation:{get:function(){return this._photometricInterpretation},set:function(e){this._photometricInterpretation=e}},planarConfiguration:{get:function(){return this._planarConfiguration},set:function(e){this._planarConfiguration=e}},resolutionUnit:{get:function(){return this._resolutionUnit},set:function(e){this._resolutionUnit=e}},rowsPerStrip:{get:function(){return this._rowsPerStrip},set:function(e){this._rowsPerStrip=e}},samplesPerPixel:{get:function(){return this._samplesPerPixel},set:function(e){this._samplesPerPixel=e}},sampleFormat:{get:function(){return this._sampleFormat},set:function(e){this._sampleFormat=e}},software:{get:function(){return this._software},set:function(e){this._software=e}},stripByteCounts:{get:function(){return this._stripByteCounts},set:function(e){this._stripByteCounts=e}},stripOffsets:{get:function(){return this._stripOffsets},set:function(e){this._stripOffsets=e}},tileByteCounts:{get:function(){return this._tileByteCounts},set:function(e){this._tileByteCounts=e}},tileOffsets:{get:function(){return this._tileOffsets},set:function(e){this._tileOffsets=e}},tileLength:{get:function(){return this._tileLength},set:function(e){this._tileLength=e}},tileWidth:{get:function(){return this._tileWidth},set:function(e){this._tileWidth=e}},geoAsciiParams:{get:function(){return this._geoAsciiParams},set:function(e){this._geoAsciiParams=e}},geoDoubleParams:{get:function(){return this._geoDoubleParams},set:function(e){this._geoDoubleParams=e}},geoKeyDirectory:{get:function(){return this._geoKeyDirectory},set:function(e){this._geoKeyDirectory=e}},modelPixelScale:{get:function(){return this._modelPixelScale},set:function(e){this._modelPixelScale=e}},modelTiepoint:{get:function(){return this._modelTiepoint},set:function(e){this._modelTiepoint=e}},modelTransformation:{get:function(){return this._modelTransformation},set:function(e){this._modelTransformation=e}},noData:{get:function(){return this._noData},set:function(e){this._noData=e}},metaData:{get:function(){return this._metaData},set:function(e){this._metaData=e}},bbox:{get:function(){return this._bbox},set:function(e){this._bbox=e}},gtModelTypeGeoKey:{get:function(){return this._gtModelTypeGeoKey},set:function(e){this._gtModelTypeGeoKey=e}},gtRasterTypeGeoKey:{get:function(){return this._gtRasterTypeGeoKey},set:function(e){this._gtRasterTypeGeoKey=e}},gtCitationGeoKey:{get:function(){return this._gtCitationGeoKey},set:function(e){this._gtCitationGeoKey=e}},geographicTypeGeoKey:{get:function(){return this._geographicTypeGeoKey},set:function(e){this._geographicTypeGeoKey=e}},geogCitationGeoKey:{get:function(){return this._geogCitationGeoKey},set:function(e){this._geogCitationGeoKey=e}},geogAngularUnitsGeoKey:{get:function(){return this._geogAngularUnitsGeoKey},set:function(e){this._geogAngularUnitsGeoKey=e}},geogAngularUnitSizeGeoKey:{get:function(){return this._geogAngularUnitSizeGeoKey},set:function(e){this._geogAngularUnitSizeGeoKey=e}},geogSemiMajorAxisGeoKey:{get:function(){return this._geogSemiMajorAxisGeoKey},set:function(e){this._geogSemiMajorAxisGeoKey=e}},geogInvFlatteningGeoKey:{get:function(){return this._geogInvFlatteningGeoKey},set:function(e){this._geogInvFlatteningGeoKey=e}},projectedCSType:{get:function(){return this._projectedCSType},set:function(e){this._projectedCSType=e}},projLinearUnits:{get:function(){return this._projLinearUnits},set:function(e){this._projLinearUnits=e}},xResolution:{get:function(){return this._xResolution},set:function(e){this._xResolution=e}},yResolution:{get:function(){return this._yResolution},set:function(e){this._yResolution=e}}}),e})),i("formats/geotiff/TiffConstants",[],(function(){"use strict";return{Tag:{NEW_SUBFILE_TYPE:254,SUBFILE_TYPE:255,IMAGE_WIDTH:256,IMAGE_LENGTH:257,BITS_PER_SAMPLE:258,COMPRESSION:259,PHOTOMETRIC_INTERPRETATION:262,THRESHHOLDING:263,CELL_WIDTH:264,CELL_LENGTH:265,FILL_ORDER:266,DOCUMENT_NAME:269,IMAGE_DESCRIPTION:270,MAKE:271,MODEL:272,STRIP_OFFSETS:273,ORIENTATION:274,SAMPLES_PER_PIXEL:277,ROWS_PER_STRIP:278,STRIP_BYTE_COUNTS:279,MIN_SAMPLE_VALUE:280,MAX_SAMPLE_VALUE:281,X_RESOLUTION:282,Y_RESOLUTION:283,PLANAR_CONFIGURATION:284,PAGE_NAME:285,X_POSITION:286,Y_POSITION:287,FREE_OFFSETS:288,FREE_BYTE_COUNTS:289,GRAY_RESPONSE_UNIT:290,GRAY_RESPONSE_CURVE:291,T4_OPTIONS:292,T6_PTIONS:293,RESOLUTION_UNIT:296,PAGE_NUMBER:297,TRANSFER_FUNCTION:301,SOFTWARE:305,DATE_TIME:306,ARTIST:315,HOST_COMPUTER:316,PREDICTOR:317,WHITE_POINT:318,PRIMARY_CHROMATICITIES:319,COLOR_MAP:320,HALFTONE_HINTS:321,TILE_WIDTH:322,TILE_LENGTH:323,TILE_OFFSETS:324,TILE_BYTE_COUNTS:325,INK_SET:332,INK_NAMES:333,NUMBER_OF_INKS:334,DOT_RANGE:336,TARGET_PRINTER:337,EXTRA_SAMPLES:338,SAMPLE_FORMAT:339,S_MIN_SAMPLE_VALUE:340,S_MAX_SAMPLE_VALUE:341,TRANSFER_RANGE:342,JPEG_PROC:512,JPEG_INTERCHANGE_FORMAT:513,JPEG_INTERCHANGE_FORMAT_LENGTH:514,JPEG_RESTART_INTERVAL:515,JPEG_LOSSLESS_PREDICTORS:517,JPEG_POINT_TRANSFORMS:518,JPEG_Q_TABLES:519,JPEG_DC_TABLES:520,JPEG_AC_TABLES:521,Y_Cb_Cr_COEFFICIENTS:529,Y_Cb_Cr_SUB_SAMPLING:530,Y_Cb_Cr_POSITIONING:531,REFERENCE_BLACK_WHITE:532,COPYRIGHT:33432},Compression:{UNCOMPRESSED:1,CCITT_1D:2,GROUP_3_FAX:3,GROUP_4_FAX:4,LZW:5,JPEG:6,PACK_BITS:32773},Orientation:{Row0_IS_TOP__Col0_IS_LHS:1,Row0_IS_TOP__Col0_IS_RHS:2,Row0_IS_BOTTOM__Col0_IS_RHS:3,Row0_IS_BOTTOM__Col0_IS_LHS:4,Row0_IS_LHS__Col0_IS_TOP:5,Row0_IS_RHS__Col0_IS_TOP:6,Row0_IS_RHS__Col0_IS_BOTTOM:7,Row0_IS_LHS__Col0_IS_BOTTOM:8},PhotometricInterpretation:{WHITE_IS_ZERO:0,BLACK_IS_ZERO:1,RGB:2,RGB_PALETTE:3,TRANSPARENCY_MASK:4,CMYK:5,Y_Cb_Cr:6,CIE_LAB:7},PlanarConfiguration:{CHUNKY:1,PLANAR:2},ResolutionUnit:{NONE:1,INCH:2,CENTIMETER:3},SampleFormat:{UNSIGNED:1,SIGNED:2,IEEE_FLOAT:3,UNDEFINED:4,DEFAULT:1},Type:{BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,SBYTE:6,UNDEFINED:7,SSHORT:8,SLONG:9,SRATIONAL:10,FLOAT:11,DOUBLE:12}}})),i("formats/geotiff/GeoTiffUtil",["../../error/ArgumentError","../../util/Logger","./TiffConstants"],(function(e,t,n){"use strict";return{getBytes:function(n,r,i,o,a){if(i<=0)throw new e(t.logMessage(t.LEVEL_SEVERE,"GeoTiffReader","getBytes","noBytesRequested"));if(i<=1)return a?n.getInt8(r,o):n.getUint8(r,o);if(i<=2)return a?n.getInt16(r,o):n.getUint16(r,o);if(i<=3)return a?n.getInt32(r,o)>>>8:n.getUint32(r,o)>>>8;if(i<=4)return a?n.getInt32(r,o):n.getUint32(r,o);if(i<=8)return n.getFloat64(r,o);throw new e(t.logMessage(t.LEVEL_SEVERE,"GeoTiffReader","getBytes","tooManyBytesRequested"))},getSampleBytes:function(e,r,i,o,a){var s;switch(o){case n.SampleFormat.UNSIGNED:s=this.getBytes(e,r,i,a,!1);break;case n.SampleFormat.SIGNED:s=this.getBytes(e,r,i,a,!0);break;case n.SampleFormat.IEEE_FLOAT:3==i?s=e.getFloat32(r,a)>>>8:4==i?s=e.getFloat32(r,a):8==i?s=e.getFloat64(r,a):t.log(t.LEVEL_WARNING,"Do not attempt to parse the data  not handled: "+i);break;case n.SampleFormat.UNDEFINED:default:s=this.getBytes(e,r,i,a,!1)}return s},getRGBAFillValue:function(e,t,n,r){return"undefined"==typeof r&&(r=1),"rgba("+e+", "+t+", "+n+", "+r+")"},clampColorSample:function(e,t){var n=Math.pow(2,8-t);return Math.floor(e*n+(n-1))}}})),i("util/proj4-src",[],(function(){"use strict";function e(e,t){if(e[t])return e[t];for(var n,r=Object.keys(e),i=t.toLowerCase().replace(q,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(q,"")===i)return e[n]}function t(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=z}function n(e){return new t(e).output()}function r(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var r=t?{}:e,o=n.reduce((function(e,t){return i(t,e),e}),r);t&&(e[t]=o)}function i(e,t){if(Array.isArray(e)){var n,o=e.shift();if("PARAMETER"===o&&(o=e.shift()),1===e.length)return Array.isArray(e[0])?(t[o]={},void i(e[0],t[o])):void(t[o]=e[0]);if(e.length)if("TOWGS84"!==o)switch(Array.isArray(o)||(t[o]={}),o){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[o]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&i(e[2],t[o]));case"SPHEROID":case"ELLIPSOID":return t[o]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&i(e[3],t[o]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void r(t,o,e);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return i(e,t[o]);return r(t,o,e)}else t[o]=e;else t[o]=!0}else t[e]=!0}function o(e){return e*J}function a(e){function t(t){return t*(e.to_meter||1)}"GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var n=e.GEOGCS;"GEOGCS"===e.type&&(n=e),n&&(n.DATUM?e.datumCode=n.DATUM.name.toLowerCase():e.datumCode=n.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"===e.datumCode&&("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),n.DATUM&&n.DATUM.SPHEROID&&(e.ellps=n.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=n.DATUM.SPHEROID.a,e.rf=parseFloat(n.DATUM.SPHEROID.rf,10)),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",o],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",o],["x0","false_easting",t],["y0","false_northing",t],["long0","central_meridian",o],["lat0","latitude_of_origin",o],["lat0","standard_parallel_1",o],["lat1","standard_parallel_1",o],["lat2","standard_parallel_2",o],["alpha","azimuth",o],["srsCode","name"]].forEach((function(t){return function(e,t){var n=t[0],r=t[1];!(n in e)&&r in e&&(e[n]=e[r],3===t.length&&(e[n]=t[2](e[n])))}(e,t)})),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=o(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function s(e){var t=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?s[e]=W(arguments[1]):s[e]=Z(arguments[1]):s[e]=n}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){Array.isArray(e)?s.apply(t,e):s(e)}));if("string"==typeof e){if(e in s)return s[e]}else"EPSG"in e?s["EPSG:"+e.EPSG]=e:"ESRI"in e?s["ESRI:"+e.ESRI]=e:"IAU2000"in e?s["IAU2000:"+e.IAU2000]=e:console.log(e);return}}function u(e){return function(e){return"string"==typeof e}(e)?function(e){return e in s}(e)?s[e]:function(e){return $.some((function(t){return e.indexOf(t)>-1}))}(e)?Z(e):function(e){return"+"===e[0]}(e)?W(e):void 0:e}function l(e){return e}function c(e,t){var n=ue.length;return e.names?(ue[n]=e,e.names.forEach((function(e){se[e.toLowerCase()]=n})),this):(console.log(t),!0)}function h(t,n){if(!(this instanceof h))return new h(t);n=n||function(e){if(e)throw e};var r=u(t);if("object"==typeof r){var i=h.projections.get(r.projName);if(i){if(r.datumCode&&"none"!==r.datumCode){var o=e(fe,r.datumCode);o&&(r.datum_params=o.towgs84?o.towgs84.split(","):null,r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var a=function(t,n,r,i,o){if(!t){var a=e(ce,i);a||(a=he),t=a.a,n=a.b,r=a.rf}return r&&!n&&(n=(1-1/r)*t),(0===r||Math.abs(t-n)<D)&&(o=!0,n=t),{a:t,b:n,rf:r,sphere:o}}(r.a,r.b,r.rf,r.ellps,r.sphere),s=function(e,t,n,r){var i=e*e,o=t*t,a=(i-o)/i,s=0;return r?(i=(e*=1-a*(P+a*(k+a*N)))*e,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}(a.a,a.b,a.rf,r.R_A),l=r.datum||function(e,t,n,r,i,o){var a={};return a.datum_type=void 0===e||"none"===e?R:C,t&&(a.datum_params=t.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=M),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=L,a.datum_params[3]*=O,a.datum_params[4]*=O,a.datum_params[5]*=O,a.datum_params[6]=a.datum_params[6]/1e6+1))),a.a=n,a.b=r,a.es=i,a.ep2=o,a}(r.datumCode,r.datum_params,a.a,a.b,s.es,s.ep2);ee(this,r),ee(this,i),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=l,this.init(),n(null,this)}else n(t)}else n(t)}function f(e){return e===M||e===L}function d(e,t,n){var r;return Array.isArray(n)&&(n=me(n)),e.datum&&t.datum&&function(e,t){return(e.datum.datum_type===M||e.datum.datum_type===L)&&"WGS84"!==t.datumCode||(t.datum.datum_type===M||t.datum.datum_type===L)&&"WGS84"!==e.datumCode}(e,t)&&(n=d(e,r=new h("WGS84"),n),e=r),"enu"!==e.axis&&(n=pe(e,!1,n)),"longlat"===e.projName?n={x:n.x*F,y:n.y*F}:(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter}),n=e.inverse(n)),e.from_greenwich&&(n.x+=e.from_greenwich),n=de(e.datum,t.datum,n),t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y}),"longlat"===t.projName?n={x:n.x*j,y:n.y*j}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter})),"enu"!==t.axis?pe(t,!0,n):n}function p(e,t,n){var r;return Array.isArray(n)?(r=d(e,t,n),3===n.length?[r.x,r.y,r.z]:[r.x,r.y]):d(e,t,n)}function m(e){return e instanceof h?e:e.oProj?e.oProj:h(e)}function g(e,t,n){e=m(e);var r,i=!1;return"undefined"==typeof t?(t=e,e=ge,i=!0):("undefined"!=typeof t.x||Array.isArray(t))&&(n=t,t=e,e=ge,i=!0),t=m(t),n?p(e,t,n):(r={forward:function(n){return p(e,t,n)},inverse:function(n){return p(t,e,n)}},i&&(r.oProj=t),r)}function A(e,t){return t=t||5,function(e,t){var n="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+function(e,t,n){var r=E(n),i=Math.floor(e/1e5),o=Math.floor(t/1e5)%20;return function(e,t,n){var r=n-1,i=ve.charCodeAt(r),o=ye.charCodeAt(r),a=i+e-1,s=o+t,u=!1;return a>xe&&(a=a-xe+be-1,u=!0),(a===_e||i<_e&&a>_e||(a>_e||i<_e)&&u)&&a++,(a===we||i<we&&a>we||(a>we||i<we)&&u)&&++a===_e&&a++,a>xe&&(a=a-xe+be-1),s>Ee?(s=s-Ee+be-1,u=!0):u=!1,(s===_e||o<_e&&s>_e||(s>_e||o<_e)&&u)&&s++,(s===we||o<we&&s>we||(s>we||o<we)&&u)&&++s===_e&&s++,s>Ee&&(s=s-Ee+be-1),String.fromCharCode(a)+String.fromCharCode(s)}(i,o,r)}(e.easting,e.northing,e.zoneNumber)+n.substr(n.length-5,t)+r.substr(r.length-5,t)}(function(e){var t,n,r,i,o,a,s,u,l=e.lat,c=e.lon,h=6378137,f=.00669438,d=.9996,p=y(l),m=y(c);u=Math.floor((c+180)/6)+1,180===c&&(u=60),l>=56&&l<64&&c>=3&&c<12&&(u=32),l>=72&&l<84&&(c>=0&&c<9?u=31:c>=9&&c<21?u=33:c>=21&&c<33?u=35:c>=33&&c<42&&(u=37)),s=y(6*(u-1)-180+3),t=f/(1-f),n=h/Math.sqrt(1-f*Math.sin(p)*Math.sin(p)),r=Math.tan(p)*Math.tan(p),i=t*Math.cos(p)*Math.cos(p),o=Math.cos(p)*(m-s),a=h*(.9983242984503243*p-.002514607064228144*Math.sin(2*p)+2639046602129982e-21*Math.sin(4*p)-35*f*f*f/3072*Math.sin(6*p));var g=d*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*t)*o*o*o*o*o/120)+5e5,A=d*(a+n*Math.tan(p)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*t)*o*o*o*o*o*o/720));return l<0&&(A+=1e7),{northing:Math.round(A),easting:Math.round(g),zoneNumber:u,zoneLetter:w(l)}}({lat:e[1],lon:e[0]}),t)}function v(e){var t=_(x(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function y(e){return e*(Math.PI/180)}function b(e){return e/Math.PI*180}function _(e){var t=e.northing,n=e.easting,r=e.zoneLetter,i=e.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,h,f,d,p=.9996,m=6378137,g=.00669438,A=(1-Math.sqrt(1-g))/(1+Math.sqrt(1-g)),v=n-5e5,y=t;r<"N"&&(y-=1e7),h=6*(i-1)-180+3,o=g/(1-g),d=(f=y/p/6367449.145945056)+(3*A/2-27*A*A*A/32)*Math.sin(2*f)+(21*A*A/16-55*A*A*A*A/32)*Math.sin(4*f)+151*A*A*A/96*Math.sin(6*f),a=m/Math.sqrt(1-g*Math.sin(d)*Math.sin(d)),s=Math.tan(d)*Math.tan(d),u=o*Math.cos(d)*Math.cos(d),l=m*(1-g)/Math.pow(1-g*Math.sin(d)*Math.sin(d),1.5),c=v/(a*p);var w=d-a*Math.tan(d)/l*(c*c/2-(5+3*s+10*u-4*u*u-9*o)*c*c*c*c/24+(61+90*s+298*u+45*s*s-252*o-3*u*u)*c*c*c*c*c*c/720);w=b(w);var E,x=(c-(1+2*s+u)*c*c*c/6+(5-2*u+28*s-3*u*u+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(d);if(x=h+b(x),e.accuracy){var S=_({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});E={top:S.lat,right:S.lon,bottom:w,left:x}}else E={lat:w,lon:x};return E}function w(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function E(e){var t=e%Ae;return 0===t&&(t=Ae),t}function x(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,n=e.length,r=null,i="",o=0;!/[A-Z]/.test(t=e.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+e;i+=t,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;r=e.substring(o,o+=2);for(var u=E(a),l=function(e,t){for(var n=ve.charCodeAt(t-1),r=1e5,i=!1;n!==e.charCodeAt(0);){if(++n===_e&&n++,n===we&&n++,n>xe){if(i)throw"Bad character: "+e;n=be,i=!0}r+=1e5}return r}(r.charAt(0),u),c=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var n=ye.charCodeAt(t-1),r=0,i=!1;n!==e.charCodeAt(0);){if(++n===_e&&n++,n===we&&n++,n>Ee){if(i)throw"Bad character: "+e;n=be,i=!0}r+=1e5}return r}(r.charAt(1),u);c<S(s);)c+=2e6;var h=n-o;if(h%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var f,d,p,m=h/2,g=0,A=0;return m>0&&(f=1e5/Math.pow(10,m),d=e.substring(o,o+m),g=parseFloat(d)*f,p=e.substring(o+m),A=parseFloat(p)*f),{easting:g+l,northing:A+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function S(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function T(e,t,n){if(!(this instanceof T))return new T(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&"undefined"==typeof t){var r=e.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var M=1,L=2,C=4,R=5,O=484813681109536e-20,I=Math.PI/2,P=.16666666666666666,k=.04722222222222222,N=.022156084656084655,D="undefined"==typeof Number.EPSILON?1e-10:Number.EPSILON,F=.017453292519943295,j=57.29577951308232,B=Math.PI/4,V=2*Math.PI,G={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},U={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},q=/[\s_\-\/\(\)]/g,W=function(t){var n,r,i,o={},a=t.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n=t.split("=");return n.push(!0),e[n[0].toLowerCase()]=n[1],e}),{}),s={proj:"projName",datum:"datumCode",rf:function(e){o.rf=parseFloat(e)},lat_0:function(e){o.lat0=e*F},lat_1:function(e){o.lat1=e*F},lat_2:function(e){o.lat2=e*F},lat_ts:function(e){o.lat_ts=e*F},lon_0:function(e){o.long0=e*F},lon_1:function(e){o.long1=e*F},lon_2:function(e){o.long2=e*F},alpha:function(e){o.alpha=parseFloat(e)*F},lonc:function(e){o.longc=e*F},x_0:function(e){o.x0=parseFloat(e)},y_0:function(e){o.y0=parseFloat(e)},k_0:function(e){o.k0=parseFloat(e)},k:function(e){o.k0=parseFloat(e)},a:function(e){o.a=parseFloat(e)},b:function(e){o.b=parseFloat(e)},r_a:function(){o.R_A=!0},zone:function(e){o.zone=parseInt(e,10)},south:function(){o.utmSouth=!0},towgs84:function(e){o.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){o.to_meter=parseFloat(e)},units:function(t){o.units=t;var n=e(U,t);n&&(o.to_meter=n.to_meter)},from_greenwich:function(e){o.from_greenwich=e*F},pm:function(t){var n=e(G,t);o.from_greenwich=(n||parseFloat(t))*F},nadgrids:function(e){"@null"===e?o.datumCode="none":o.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&-1!==t.indexOf(e.substr(0,1))&&-1!==t.indexOf(e.substr(1,1))&&-1!==t.indexOf(e.substr(2,1))&&(o.axis=e)}};for(n in a)r=a[n],n in s?"function"==typeof(i=s[n])?i(r):o[i]=r:o[n]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o},z=1,H=/\s/,K=/[A-Za-z]/,Y=/[A-Za-z84]/,Q=/[,\]]/,X=/[\d\.E\-\+]/;t.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;H.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case z:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},t.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(Q.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},t.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=z)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=z,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},t.prototype.number=function(e){if(!X.test(e)){if(Q.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},t.prototype.quoted=function(e){return'"'===e?void(this.state=5):void(this.word+=e)},t.prototype.keyword=function(e){if(Y.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=z)}if(!Q.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},t.prototype.neutral=function(e){if(K.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(X.test(e))return this.word=e,void(this.state=3);if(!Q.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},t.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var J=.017453292519943295,Z=function(e){var t=n(e),r=t.shift(),o=t.shift();t.unshift(["name",o]),t.unshift(["type",r]);var s={};return i(t,s),a(s),s};!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(s);var $=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],ee=function(e,t){var n,r;if(e=e||{},!t)return e;for(r in t)void 0!==(n=t[r])&&(e[r]=n);return e},te=function(e,t,n){var r=e*t;return n/Math.sqrt(1-r*r)},ne=function(e){return e<0?-1:1},re=function(e){return Math.abs(e)<=3.14159265359?e:e-ne(e)*V},ie=function(e,t,n){var r=e*n,i=.5*e;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(I-t))/r},oe=function(e,t){for(var n,r,i=.5*e,o=I-2*Math.atan(t),a=0;a<=15;a++)if(n=e*Math.sin(o),o+=r=I-2*Math.atan(t*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999},ae=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=te(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,n,r=e.x,i=e.y;if(i*j>90&&i*j<-90&&r*j>180&&r*j<-180)return null;if(Math.abs(Math.abs(i)-I)<=D)return null;if(this.sphere)t=this.x0+this.a*this.k0*re(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(B+.5*i));else{var o=Math.sin(i),a=ie(this.e,i,o);t=this.x0+this.a*this.k0*re(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,r=e.x-this.x0,i=e.y-this.y0;if(this.sphere)n=I-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=oe(this.e,o)))return null}return t=re(this.long0+r/(this.a*this.k0)),e.x=t,e.y=n,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:l,inverse:l,names:["longlat","identity"]}],se={},ue=[],le={start:function(){ae.forEach(c)},add:c,get:function(e){if(!e)return!1;var t=e.toLowerCase();return"undefined"!=typeof se[t]&&ue[se[t]]?ue[se[t]]:void 0}},ce={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},he=ce.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ce.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var fe={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};h.projections=le,h.projections.start();var de=function(e,t,n){return function(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===M?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==L||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}(e,t)||e.datum_type===R||t.datum_type===R?n:e.es!==t.es||e.a!==t.a||f(e.datum_type)||f(t.datum_type)?(n=function(e,t,n){var r,i,o,a,s=e.x,u=e.y,l=e.z?e.z:0;if(u<-I&&u>-1.001*I)u=-I;else if(u>I&&u<1.001*I)u=I;else if(u<-I||u>I)return null;return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),a=Math.cos(u),o=i*i,{x:((r=n/Math.sqrt(1-t*o))+l)*a*Math.cos(s),y:(r+l)*a*Math.sin(s),z:(r*(1-t)+l)*i}}(n,e.es,e.a),f(e.datum_type)&&(n=function(e,t,n){if(t===M)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===L){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6];return{x:l*(e.x-u*e.y+s*e.z)+r,y:l*(u*e.x+e.y-a*e.z)+i,z:l*(-s*e.x+a*e.y+e.z)+o}}}(n,e.datum_type,e.datum_params)),f(t.datum_type)&&(n=function(e,t,n){if(t===M)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===L){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=(e.x-r)/l,h=(e.y-i)/l,f=(e.z-o)/l;return{x:c+u*h-s*f,y:-u*c+h+a*f,z:s*c-a*h+f}}}(n,t.datum_type,t.datum_params)),function(e,t,n,r){var i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y=1e-12,b=e.x,_=e.y,w=e.z?e.z:0;if(i=Math.sqrt(b*b+_*_),o=Math.sqrt(b*b+_*_+w*w),i/n<y){if(A=0,o/n<y)return v=-r,{x:e.x,y:e.y,z:e.z}}else A=Math.atan2(_,b);a=w/o,h=(s=i/o)*(1-t)*(u=1/Math.sqrt(1-t*(2-t)*s*s)),f=a*u,g=0;do{g++,l=t*(c=n/Math.sqrt(1-t*f*f))/(c+(v=i*h+w*f-c*(1-t*f*f))),m=(p=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*h-(d=s*(1-l)*u)*f,h=d,f=p}while(m*m>1e-24&&g<30);return{x:A,y:Math.atan(p/Math.abs(d)),z:v}}(n,t.es,t.a,t.b)):n},pe=function(e,t,n){var r,i,o,a=n.x,s=n.y,u=n.z||0,l={};for(o=0;o<3;o++)if(!t||2!==o||void 0!==n.z)switch(0===o?(r=a,i="x"):1===o?(r=s,i="y"):(r=u,i="z"),e.axis[o]){case"e":l[i]=r;break;case"w":l[i]=-r;break;case"n":l[i]=r;break;case"s":l[i]=-r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l},me=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t},ge=h("WGS84"),Ae=6,ve="AJSAJS",ye="AFAFAF",be=65,_e=73,we=79,Ee=86,xe=90,Se={forward:A,inverse:function(e){var t=_(x(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},toPoint:v};T.fromMGRS=function(e){return new T(v(e))},T.prototype.toMGRS=function(e){return A([this.x,this.y],e)};var Te=.01953125,Me=.01068115234375,Le=function(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(Te+e*Me))),t[1]=e*(.75-e*(.046875+e*(Te+e*Me)));var n=e*e;return t[2]=n*(.46875-e*(.013020833333333334+.007120768229166667*e)),n*=e,t[3]=n*(.3645833333333333-.005696614583333333*e),t[4]=n*e*.3076171875,t},Ce=function(e,t,n,r){return n*=t,t*=t,r[0]*e-n*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))},Re=function(e,t,n){for(var r=1/(1-t),i=e,o=20;o;--o){var a=Math.sin(i),s=1-t*a*a;if(i-=s=(Ce(i,a,Math.cos(i),n)-e)*(s*Math.sqrt(s))*r,Math.abs(s)<D)return i}return i},Oe={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Le(this.es),this.ml0=Ce(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,n,r,i=e.x,o=e.y,a=re(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),d=Math.abs(u)>D?Math.tan(o):0,p=Math.pow(d,2),m=Math.pow(p,2);t=1-this.es*Math.pow(s,2),l/=Math.sqrt(t);var g=Ce(o,s,u,this.en);n=this.a*(this.k0*l*(1+c/6*(1-p+h+c/20*(5-18*p+m+14*h-58*p*h+c/42*(61+179*m-m*p-479*p)))))+this.x0,r=this.a*(this.k0*(g-this.ml0+s*a*l/2*(1+c/12*(5-p+9*h+4*f+c/30*(61+m-58*p+270*h-330*p*h+c/56*(1385+543*m-m*p-3111*p))))))+this.y0}else{var A=u*Math.sin(a);if(Math.abs(Math.abs(A)-1)<D)return 93;if(n=.5*this.a*this.k0*Math.log((1+A)/(1-A))+this.x0,r=u*Math.cos(a)/Math.sqrt(1-Math.pow(A,2)),(A=Math.abs(r))>=1){if(A-1>D)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return e.x=n,e.y=r,e},inverse:function(e){var t,n,r,i,o=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+a/this.k0,n=Re(t,this.es,this.en),Math.abs(n)<I){var s=Math.sin(n),u=Math.cos(n),l=Math.abs(u)>D?Math.tan(n):0,c=this.ep2*Math.pow(u,2),h=Math.pow(c,2),f=Math.pow(l,2),d=Math.pow(f,2);t=1-this.es*Math.pow(s,2);var p=o*Math.sqrt(t)/this.k0,m=Math.pow(p,2);r=n-(t*=l)*m/(1-this.es)*.5*(1-m/12*(5+3*f-9*c*f+c-4*h-m/30*(61+90*f-252*c*f+45*d+46*c-m/56*(1385+3633*f+4095*d+1574*d*f)))),i=re(this.long0+p*(1-m/6*(1+2*f+c-m/20*(5+28*f+24*d+8*c*f+6*c-m/42*(61+662*f+1320*d+720*d*f))))/u)}else r=I*ne(a),i=0;else{var g=Math.exp(o/this.k0),A=.5*(g-1/g),v=this.lat0+a/this.k0,y=Math.cos(v);t=Math.sqrt((1-Math.pow(y,2))/(1+Math.pow(A,2))),r=Math.asin(t),a<0&&(r=-r),i=0===A&&0===y?0:re(Math.atan2(A,y)+this.long0)}return e.x=i,e.y=r,e},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},Ie=function(e){var t=Math.exp(e);return(t-1/t)/2},Pe=function(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),r=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},ke=function(e){var t=Math.abs(e);return t=function(e){var t=1+e,n=t-1;return 0===n?e:e*Math.log(t)/n}(t*(1+t/(Pe(1,t)+1))),e<0?-t:t},Ne=function(e,t){for(var n,r=2*Math.cos(2*t),i=e.length-1,o=e[i],a=0;--i>=0;)n=r*o-a+e[i],a=o,o=n;return t+n*Math.sin(2*t)},De=function(e,t){for(var n,r=2*Math.cos(t),i=e.length-1,o=e[i],a=0;--i>=0;)n=r*o-a+e[i],a=o,o=n;return Math.sin(t)*n},Fe=function(e,t,n){for(var r,i,o=Math.sin(t),a=Math.cos(t),s=Ie(n),u=function(e){var t=Math.exp(e);return(t+1/t)/2}(n),l=2*a*u,c=-2*o*s,h=e.length-1,f=e[h],d=0,p=0,m=0;--h>=0;)r=p,i=d,f=l*(p=f)-r-c*(d=m)+e[h],m=c*p-i+l*d;return[(l=o*u)*f-(c=a*s)*m,l*m+c*f]},je={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),n*=t,this.cgb[1]=n*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n*=t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),n*=t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(t*(-24832/14175)-2.4)),n*=t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n*=t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),n*=t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n*=t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n*=t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n*=t,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=Ne(this.cbg,this.lat0);this.Zb=-this.Qn*(r+De(this.gtu,2*r))},forward:function(e){var t=re(e.x-this.long0),n=e.y;n=Ne(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(t),a=Math.cos(t);n=Math.atan2(r,a*i),t=Math.atan2(o*i,Pe(r,i*a)),t=ke(Math.tan(t));var s,u,l=Fe(this.gtu,2*n,2*t);return n+=l[0],t+=l[1],Math.abs(t)<=2.623395162778?(s=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,u=1/0),e.x=s,e.y=u,e},inverse:function(e){var t,n,r=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=Fe(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(Ie(r));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r);i=Math.atan2(a*l,Pe(u,l*s)),r=Math.atan2(u,l*s),t=re(r+this.long0),n=Ne(this.cgb,i)}else t=1/0,n=1/0;return e.x=t,e.y=n,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},Be=function(e,t){if(void 0===e){if((e=Math.floor(30*(re(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e},Ve={init:function(){var e=Be(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*F,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,je.init.apply(this),this.forward=je.forward,this.inverse=je.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Ge=function(e,t){return Math.pow((1-e)/(1+e),t)},Ue=20,qe={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+B)/(Math.pow(Math.tan(.5*this.lat0+B),this.C)*Ge(this.e*e,this.ratexp))},forward:function(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+B),this.C)*Ge(this.e*Math.sin(n),this.ratexp))-I,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,n=e.y,r=Math.pow(Math.tan(.5*n+B)/this.K,1/this.C),i=Ue;i>0&&(n=2*Math.atan(r*Ge(this.e*Math.sin(e.y),-.5*this.e))-I,!(Math.abs(n-e.y)<1e-14));--i)e.y=n;return i?(e.x=t,e.y=n,e):null},names:["gauss"]},We={init:function(){qe.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,n,r,i;return e.x=re(e.x-this.long0),qe.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),r=Math.cos(e.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*r),e.x=i*n*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*n*r),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,n,r,i,o;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=Math.sqrt(e.x*e.x+e.y*e.y)){var a=2*Math.atan2(o,this.R2);t=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+e.y*t*this.cosc0/o),r=Math.atan2(e.x*t,o*this.cosc0*n-e.y*this.sinc0*t)}else i=this.phic0,r=0;return e.x=r,e.y=i,qe.inverse.apply(this,[e]),e.x=re(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},ze={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=D&&(this.k0=.5*(1+ne(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=D&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=D&&(this.k0=.5*this.cons*te(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ie(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=te(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-I,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,n,r,i,o,a,s=e.x,u=e.y,l=Math.sin(u),c=Math.cos(u),h=re(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=D&&Math.abs(u+this.lat0)<=D?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(h)),e.x=this.a*t*c*Math.sin(h)+this.x0,e.y=this.a*t*(this.coslat0*l-this.sinlat0*c*Math.cos(h))+this.y0,e):(n=2*Math.atan(this.ssfn_(u,l,this.e))-I,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=D?(o=ie(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*o/this.cons,e.x=this.x0+a*Math.sin(s-this.long0),e.y=this.y0-this.con*a*Math.cos(s-this.long0),e):(Math.abs(this.sinlat0)<D?(t=2*this.a*this.k0/(1+i*Math.cos(h)),e.y=t*r):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),e.y=t*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),e.x=t*i*Math.sin(h)+this.x0,e))},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r,i,o,a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(a/(.5*this.a*this.k0));return t=this.long0,n=this.lat0,a<=D?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/a),t=re(Math.abs(this.coslat0)<D?this.lat0>0?this.long0+Math.atan2(e.x,-1*e.y):this.long0+Math.atan2(e.x,e.y):this.long0+Math.atan2(e.x*Math.sin(s),a*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s))),e.x=t,e.y=n,e)}if(Math.abs(this.coslat0)<=D){if(a<=D)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*oe(this.e,r),t=this.con*re(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=D?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/a),t=re(this.long0+Math.atan2(e.x*Math.sin(i),a*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),n=-1*oe(this.e,Math.tan(.5*(I+o)));return e.x=t,e.y=n,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,n){return t*=n,Math.tan(.5*(I+e))*Math.pow((1-t)/(1+t),.5*n)}},He={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(t,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),r=-this.alpha*(t+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*a+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,n=e.y-this.y0,r=t/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return e.x=s,e.y=l,e},names:["somerc"]},Ke={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),n=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=ie(this.e,this.lat0,e),a=this.bl/t*Math.sqrt((1-this.es)/(1-n*n));if(a*a<1&&(a=1),isNaN(this.longc)){var s=ie(this.e,this.lat1,Math.sin(this.lat1)),u=ie(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var l=Math.pow(s,this.bl),c=Math.pow(u,this.bl);i=.5*((r=this.el/l)-1/r);var h=(this.el*this.el-c*l)/(this.el*this.el+c*l),f=(c-l)/(c+l),d=re(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*d)/f)/this.bl,this.long0=re(this.long0);var p=re(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(e){var t,n,r,i=e.x,o=e.y,a=re(i-this.long0);if(Math.abs(Math.abs(o)-I)<=D)r=o>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(B+r*this.gamma0*.5)),t=-1*r*I*this.al/this.bl;else{var s=ie(this.e,o,Math.sin(o)),u=this.el/Math.pow(s,this.bl),l=.5*(u-1/u),c=.5*(u+1/u),h=Math.sin(this.bl*a),f=(l*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/c;n=Math.abs(Math.abs(f)-1)<=D?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,t=Math.abs(Math.cos(this.bl*a))<=D?this.al*this.bl*a:this.al*Math.atan2(l*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(e.x=this.x0+t,e.y=this.y0+n):(t-=this.uc,e.x=this.x0+n*Math.cos(this.alpha)+t*Math.sin(this.alpha),e.y=this.y0+t*Math.cos(this.alpha)-n*Math.sin(this.alpha)),e},inverse:function(e){var t,n;this.no_rot?(n=e.y-this.y0,t=e.x-this.x0):(n=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),a=Math.sin(this.bl*t/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,u=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<D?(e.x=this.long0,e.y=I):Math.abs(s+1)<D?(e.x=this.long0,e.y=-1*I):(e.y=oe(this.e,u),e.x=re(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},Ye={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<D)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),r=te(this.e,t,n),i=ie(this.e,this.lat1,t),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=te(this.e,o,a),u=ie(this.e,this.lat2,o),l=ie(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>D?this.ns=Math.log(r/s)/Math.log(i/u):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=D&&(n=ne(n)*(I-2*D));var r,i,o=Math.abs(Math.abs(n)-I);if(o>D)r=ie(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*re(t-this.long0);return e.x=this.k0*(i*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,e},inverse:function(e){var t,n,r,i,o,a=(e.x-this.x0)/this.k0,s=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+s*s),n=1):(t=-Math.sqrt(a*a+s*s),n=-1);var u=0;if(0!==t&&(u=Math.atan2(n*a,n*s)),0!==t||this.ns>0){if(n=1/this.ns,r=Math.pow(t/(this.a*this.f0),n),-9999===(i=oe(this.e,r)))return null}else i=-I;return o=re(u/this.ns+this.long0),e.x=o,e.y=i,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},Qe={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,n,r,i,o,a,s,u=e.x,l=e.y,c=re(u-this.long0);return t=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/t)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=s*Math.cos(a)/1,e.x=s*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,n,r,i,o,a,s,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.atan2(e.y,e.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(t)),e.x=this.long0-n/this.alfa,a=t,s=0;var l=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(s=1),a=e.y,l+=1}while(0===s&&l<15);return l>=15?null:e},names:["Krovak","krovak"]},Xe=function(e,t,n,r,i){return e*i-t*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},Je=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},Ze=function(e){return.375*e*(1+.25*e*(1+.46875*e))},$e=function(e){return.05859375*e*e*(1+.75*e)},et=function(e){return e*e*e*(35/3072)},tt=function(e,t,n){var r=t*n;return e/Math.sqrt(1-r*r)},nt=function(e){return Math.abs(e)<I?e:e-ne(e)*Math.PI},rt=function(e,t,n,r,i){var o,a;o=e/t;for(var s=0;s<15;s++)if(o+=a=(e-(t*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(t-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN},it={init:function(){this.sphere||(this.e0=Je(this.es),this.e1=Ze(this.es),this.e2=$e(this.es),this.e3=et(this.es),this.ml0=this.a*Xe(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,n,r=e.x,i=e.y;if(r=re(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=tt(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=r*Math.cos(i),c=l*l,h=this.es*a*a/(1-this.es);t=s*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),n=this.a*Xe(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*h)*c/24)}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r=e.x/this.a,i=e.y/this.a;if(this.sphere){var o=i+this.lat0;t=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=rt(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-I)<=D)return e.x=this.long0,e.y=I,i<0&&(e.y*=-1),e;var u=tt(this.a,this.e,Math.sin(s)),l=u*u*u/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=r*this.a/u,f=h*h;t=s-u*Math.tan(s)/l*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(s)}return e.x=re(n+this.long0),e.y=nt(t),e},names:["Cassini","Cassini_Soldner","cass"]},ot=function(e,t){var n;return e>1e-7?(1-e*e)*(t/(1-(n=e*t)*n)-.5/e*Math.log((1-n)/(1+n))):2*t},at=.3333333333333333,st=.17222222222222222,ut=.10257936507936508,lt=.06388888888888888,ct=.0664021164021164,ht=.016415012942191543,ft={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-I)<D?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<D?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=ot(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,n=[];return n[0]=e*at,t=e*e,n[0]+=t*st,n[1]=t*lt,t*=e,n[0]+=t*ut,n[1]+=t*ct,n[2]=t*ht,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=ot(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,n,r,i,o,a,s,u,l,c,h=e.x,f=e.y;if(h=re(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=D)return null;t=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.phi0)<D)return null;n=B-.5*f,t=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(s=0,u=0,l=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(f),a=ot(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*r;break;case this.EQUIT:l=1+u*r;break;case this.N_POLE:l=I+f,a=this.qp-a;break;case this.S_POLE:l=f-I,a=this.qp+a}if(Math.abs(l)<D)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),n=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*r):(l=Math.sqrt(2/(1+u*r)))*s*this.ymf,t=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(t=(l=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?l:-l)):t=n=0}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r,i,o,a,s,u=e.x/this.a,l=e.y/this.a;if(this.sphere){var c,h=0,f=0;if((n=.5*(c=Math.sqrt(u*u+l*l)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(c)<=D?0:Math.asin(l*f/c),u*=f,l=h*c;break;case this.OBLIQ:n=Math.abs(c)<=D?this.phi0:Math.asin(h*this.sinph0+l*f*this.cosph0/c),u*=f*this.cosph0,l=(h-Math.sin(n)*this.sinph0)*c;break;case this.N_POLE:l=-l,n=I-n;break;case this.S_POLE:n-=I}t=0!==l||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,l):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,l*=this.dd,(a=Math.sqrt(u*u+l*l))<D)return e.x=0,e.y=this.phi0,e;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),u*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+l*i*this.cosb1/a,o=this.qp*s,l=a*this.cosb1*r-l*this.sinb1*i):(s=l*i/a,o=this.qp*s,l=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),!(o=u*u+l*l))return e.x=0,e.y=this.phi0,e;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}t=Math.atan2(u,l),n=function(e,t){var n=e+e;return e+t[0]*Math.sin(n)+t[1]*Math.sin(n+n)+t[2]*Math.sin(n+n+n)}(Math.asin(s),this.apa)}return e.x=re(this.long0+t),e.y=n,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},dt=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)},pt={init:function(){Math.abs(this.lat1+this.lat2)<D||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=te(this.e3,this.sin_po,this.cos_po),this.qs1=ot(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=te(this.e3,this.sin_po,this.cos_po),this.qs2=ot(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ot(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>D?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=ot(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*re(t-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),r=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),r=-1),i=0,0!==t&&(i=Math.atan2(r*e.x,r*e.y)),r=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=re(i/this.ns0+this.long0),e.x=o,e.y=a,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var n,r,i,o,a=dt(.5*t);if(e<D)return a;for(var s=e*e,u=1;u<=25;u++)if(a+=o=.5*(i=1-(r=e*(n=Math.sin(a)))*r)*i/Math.cos(a)*(t/(1-s)-n/i+.5/e*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}},mt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,n,r,i,o,a,s,u=e.x,l=e.y;return r=re(u-this.long0),t=Math.sin(l),n=Math.cos(l),i=Math.cos(r),(o=this.sin_p14*t+this.cos_p14*n*i)>0||Math.abs(o)<=D?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*i)),e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(t,this.rc),n=Math.sin(i),r=Math.cos(i),a=dt(r*this.sin_p14+e.y*n*this.cos_p14/t),o=Math.atan2(e.x*n,t*this.cos_p14*r-e.y*this.sin_p14*n),o=re(this.long0+o)):(a=this.phic0,o=0),e.x=o,e.y=a,e},names:["gnom"]},gt=function(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*I:I;for(var r,i,o,a,s=Math.asin(.5*t),u=0;u<30;u++)if(i=Math.sin(s),o=Math.cos(s),a=e*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-i/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN},At={init:function(){this.sphere||(this.k0=te(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,n,r=e.x,i=e.y,o=re(r-this.long0);if(this.sphere)t=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=ot(this.e,Math.sin(i));t=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return e.x=t,e.y=n,e},inverse:function(e){var t,n;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=re(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=gt(this.e,2*e.y*this.k0/this.a),t=re(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e},names:["cea"]},vt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,n=e.y,r=re(t-this.long0),i=nt(n-this.lat0);return e.x=this.x0+this.a*r*this.rc,e.y=this.y0+this.a*i,e},inverse:function(e){var t=e.x,n=e.y;return e.x=re(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=nt(this.lat0+(n-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},yt=20,bt={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Je(this.es),this.e1=Ze(this.es),this.e2=$e(this.es),this.e3=et(this.es),this.ml0=this.a*Xe(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,n,r,i=e.x,o=e.y,a=re(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=D?(t=this.a*a,n=-1*this.a*this.lat0):(t=this.a*Math.sin(r)/Math.tan(o),n=this.a*(nt(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=D)t=this.a*a,n=-1*this.ml0;else{var s=tt(this.a,this.e,Math.sin(o))/Math.tan(o);t=s*Math.sin(r),n=this.a*Xe(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){var t,n,r,i,o,a,s,u,l;if(r=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=D)t=re(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,u=a,o=yt;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=D){n=u;break}t=re(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=D)n=0,t=re(this.long0+r/this.a);else{var h,f,d,p,m;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,u=a,o=yt;o;--o)if(m=this.e*Math.sin(u),h=Math.sqrt(1-m*m)*Math.tan(u),f=this.a*Xe(this.e0,this.e1,this.e2,this.e3,u),d=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(h*(p=f/this.a)+1)-p-.5*h*(p*p+s))/(this.es*Math.sin(2*u)*(p*p+s-2*a*p)/(4*h)+(a-p)*(h*d-2/Math.sin(2*u))-d),Math.abs(l)<=D){n=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=re(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return e.x=t,e.y=n,e},names:["Polyconic","poly"]},_t={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,n=e.x,r=e.y-this.lat0,i=n-this.long0,o=r/O*1e-5,a=i,s=1,u=0;for(t=1;t<=10;t++)s*=o,u+=this.A[t]*s;var l,c=u,h=a,f=1,d=0,p=0,m=0;for(t=1;t<=6;t++)l=d*c+f*h,f=f*c-d*h,d=l,p=p+this.B_re[t]*f-this.B_im[t]*d,m=m+this.B_im[t]*f+this.B_re[t]*d;return e.x=m*this.a+this.x0,e.y=p*this.a+this.y0,e},inverse:function(e){var t,n,r=e.x,i=e.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,u=1,l=0,c=0,h=0;for(t=1;t<=6;t++)n=l*a+u*s,u=u*a-l*s,l=n,c=c+this.C_re[t]*u-this.C_im[t]*l,h=h+this.C_im[t]*u+this.C_re[t]*l;for(var f=0;f<this.iterations;f++){var d,p=c,m=h,g=a,A=s;for(t=2;t<=6;t++)d=m*c+p*h,p=p*c-m*h,m=d,g+=(t-1)*(this.B_re[t]*p-this.B_im[t]*m),A+=(t-1)*(this.B_im[t]*p+this.B_re[t]*m);p=1,m=0;var v=this.B_re[1],y=this.B_im[1];for(t=2;t<=6;t++)d=m*c+p*h,p=p*c-m*h,m=d,v+=t*(this.B_re[t]*p-this.B_im[t]*m),y+=t*(this.B_im[t]*p+this.B_re[t]*m);var b=v*v+y*y;c=(g*v+A*y)/b,h=(A*v-g*y)/b}var _=c,w=h,E=1,x=0;for(t=1;t<=9;t++)E*=_,x+=this.D[t]*E;var S=this.lat0+x*O*1e5,T=this.long0+w;return e.x=T,e.y=S,e},names:["New_Zealand_Map_Grid","nzmg"]},wt={init:function(){},forward:function(e){var t=e.x,n=e.y,r=re(t-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=i,e.y=o,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=re(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e},names:["Miller_Cylindrical","mill"]},Et=20,xt={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Le(this.es)},forward:function(e){var t,n,r=e.x,i=e.y;if(r=re(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=Et;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<D)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;t=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);n=this.a*Ce(i,u,l,this.en),t=this.a*r*l/Math.sqrt(1-this.es*u*u)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,r,i;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r/=this.C_x*(this.m+Math.cos(t)),this.m?t=dt((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=dt(Math.sin(t)/this.n)),r=re(r+this.long0),t=nt(t)):(t=Re(e.y/this.a,this.es,this.en),(i=Math.abs(t))<I?(i=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),r=re(n)):i-D<I&&(r=this.long0)),e.x=r,e.y=t,e},names:["Sinusoidal","sinu"]},St={init:function(){},forward:function(e){for(var t=e.x,n=e.y,r=re(t-this.long0),i=n,o=Math.PI*Math.sin(n),a=0;;a++){var s=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=s,Math.abs(s)<D)break}i/=2,Math.PI/2-Math.abs(n)<D&&(r=0);var u=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return e.x=u,e.y=l,e},inverse:function(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var r=re(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return e.x=r,e.y=i,e},names:["Mollweide","moll"]},Tt={init:function(){Math.abs(this.lat1+this.lat2)<D||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Je(this.es),this.e1=Ze(this.es),this.e2=$e(this.es),this.e3=et(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=te(this.e,this.sinphi,this.cosphi),this.ml1=Xe(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<D?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=te(this.e,this.sinphi,this.cosphi),this.ml2=Xe(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Xe(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,n=e.x,r=e.y;if(this.sphere)t=this.a*(this.g-r);else{var i=Xe(this.e0,this.e1,this.e2,this.e3,r);t=this.a*(this.g-i)}var o=this.ns*re(n-this.long0),a=this.x0+t*Math.sin(o),s=this.y0+this.rh-t*Math.cos(o);return e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var o=0;if(0!==n&&(o=Math.atan2(t*e.x,t*e.y)),this.sphere)return i=re(this.long0+o/this.ns),r=nt(this.g-n/this.a),e.x=i,e.y=r,e;var a=this.g-n/this.a;return r=rt(a,this.e0,this.e1,this.e2,this.e3),i=re(this.long0+o/this.ns),e.x=i,e.y=r,e},names:["Equidistant_Conic","eqdc"]},Mt={init:function(){this.R=this.a},forward:function(e){var t,n,r=e.x,i=e.y,o=re(r-this.long0);Math.abs(i)<=D&&(t=this.x0+this.R*o,n=this.y0);var a=dt(2*Math.abs(i/Math.PI));(Math.abs(o)<=D||Math.abs(Math.abs(i)-I)<=D)&&(t=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),h=c/(l+c-1),f=h*h,d=h*(2/l-1),p=d*d,m=Math.PI*this.R*(s*(h-p)+Math.sqrt(u*(h-p)*(h-p)-(p+u)*(f-p)))/(p+u);o<0&&(m=-m),t=this.x0+m;var g=u+h;return m=Math.PI*this.R*(d*g-s*Math.sqrt((p+u)*(u+1)-g*g))/(p+u),n=i>=0?this.y0+m:this.y0-m,e.x=t,e.y=n,e},inverse:function(e){var t,n,r,i,o,a,s,u,l,c,h,f;return e.x-=this.x0,e.y-=this.y0,h=Math.PI*this.R,o=(r=e.x/h)*r+(i=e.y/h)*i,h=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,n=e.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,t=Math.abs(r)<D?this.long0:re(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),e.x=t,e.y=n,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Lt={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w,E=e.x,x=e.y,S=Math.sin(e.y),T=Math.cos(e.y),M=re(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=D?(e.x=this.x0+this.a*(I-x)*Math.sin(M),e.y=this.y0-this.a*(I-x)*Math.cos(M),e):Math.abs(this.sin_p12+1)<=D?(e.x=this.x0+this.a*(I+x)*Math.sin(M),e.y=this.y0+this.a*(I+x)*Math.cos(M),e):(v=this.sin_p12*S+this.cos_p12*T*Math.cos(M),A=(g=Math.acos(v))/Math.sin(g),e.x=this.x0+this.a*A*T*Math.sin(M),e.y=this.y0+this.a*A*(this.cos_p12*S-this.sin_p12*T*Math.cos(M)),e):(t=Je(this.es),n=Ze(this.es),r=$e(this.es),i=et(this.es),Math.abs(this.sin_p12-1)<=D?(o=this.a*Xe(t,n,r,i,I),a=this.a*Xe(t,n,r,i,x),e.x=this.x0+(o-a)*Math.sin(M),e.y=this.y0-(o-a)*Math.cos(M),e):Math.abs(this.sin_p12+1)<=D?(o=this.a*Xe(t,n,r,i,I),a=this.a*Xe(t,n,r,i,x),e.x=this.x0+(o+a)*Math.sin(M),e.y=this.y0+(o+a)*Math.cos(M),e):(s=S/T,u=tt(this.a,this.e,this.sin_p12),l=tt(this.a,this.e,S),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*T)),y=0===(h=Math.atan2(Math.sin(M),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(M)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=D?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(M)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),g=u*y*(1-(b=y*y)*(m=(d=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*d)*(1-m)/6+(_=b*y)/8*(p=f*d)*(1-2*m)+(w=_*y)/120*(m*(4-7*m)-3*f*f*(1-7*m))-w*y/48*p),e.x=this.x0+g*Math.sin(h),e.y=this.y0+g*Math.cos(h),e))},inverse:function(e){var t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*I*this.a)return;return n=t/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(t)<=D?a=this.lat0:(a=dt(i*this.sin_p12+e.y*r*this.cos_p12/t),s=Math.abs(this.lat0)-I,o=re(Math.abs(s)<=D?this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y):this.long0+Math.atan2(e.x*r,t*this.cos_p12*i-e.y*this.sin_p12*r))),e.x=o,e.y=a,e}return u=Je(this.es),l=Ze(this.es),c=$e(this.es),h=et(this.es),Math.abs(this.sin_p12-1)<=D?(f=this.a*Xe(u,l,c,h,I),t=Math.sqrt(e.x*e.x+e.y*e.y),a=rt((f-t)/this.a,u,l,c,h),o=re(this.long0+Math.atan2(e.x,-1*e.y)),e.x=o,e.y=a,e):Math.abs(this.sin_p12+1)<=D?(f=this.a*Xe(u,l,c,h,I),t=Math.sqrt(e.x*e.x+e.y*e.y),a=rt((t-f)/this.a,u,l,c,h),o=re(this.long0+Math.atan2(e.x,e.y)),e.x=o,e.y=a,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),m=Math.atan2(e.x,e.y),d=tt(this.a,this.e,this.sin_p12),g=Math.cos(m),v=-(A=this.e*this.cos_p12*g)*A/(1-this.es),y=3*this.es*(1-v)*this.sin_p12*this.cos_p12*g/(1-this.es),w=1-v*(_=(b=t/d)-v*(1+v)*Math.pow(b,3)/6-y*(1+3*v)*Math.pow(b,4)/24)*_/2-b*_*_*_/6,p=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*g),o=re(this.long0+Math.asin(Math.sin(m)*Math.sin(_)/Math.cos(p))),a=Math.atan((1-this.es*w*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),e.x=o,e.y=a,e)},names:["Azimuthal_Equidistant","aeqd"]},Ct={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,n,r,i,o,a,s,u=e.x,l=e.y;return r=re(u-this.long0),t=Math.sin(l),n=Math.cos(l),i=Math.cos(r),((o=this.sin_p14*t+this.cos_p14*n*i)>0||Math.abs(o)<=D)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*i)),e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a,s;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=dt(t/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(t)<=D?(s=this.lat0,e.x=a,e.y=s,e):(s=dt(i*this.sin_p14+e.y*r*this.cos_p14/t),o=Math.abs(this.lat0)-I,Math.abs(o)<=D?(a=re(this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y)),e.x=a,e.y=s,e):(a=re(this.long0+Math.atan2(e.x*r,t*this.cos_p14*i-e.y*this.sin_p14*r)),e.x=a,e.y=s,e))},names:["ortho"]};return g.defaultDatum="WGS84",g.Proj=h,g.WGS84=new g.Proj("WGS84"),g.Point=T,g.toPoint=me,g.defs=s,g.transform=d,g.mgrs=Se,g.version="2.4.3",function(e){e.Proj.projections.add(Oe),e.Proj.projections.add(je),e.Proj.projections.add(Ve),e.Proj.projections.add(We),e.Proj.projections.add(ze),e.Proj.projections.add(He),e.Proj.projections.add(Ke),e.Proj.projections.add(Ye),e.Proj.projections.add(Qe),e.Proj.projections.add(it),e.Proj.projections.add(ft),e.Proj.projections.add(pt),e.Proj.projections.add(mt),e.Proj.projections.add(At),e.Proj.projections.add(vt),e.Proj.projections.add(bt),e.Proj.projections.add(_t),e.Proj.projections.add(wt),e.Proj.projections.add(xt),e.Proj.projections.add(St),e.Proj.projections.add(Tt),e.Proj.projections.add(Mt),e.Proj.projections.add(Lt),e.Proj.projections.add(Ct)}(g),g})),i("formats/geotiff/TiffIFDEntry",["../../error/AbstractError","../../error/ArgumentError","./GeoTiffUtil","../../util/Logger","./TiffConstants"],(function(e,t,n,r,i){"use strict";var o=function(e,n,i,o,a,s){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingTag"));if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingType"));if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingCount"));if(null===o||void 0===o)throw new t(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingValueOffset"));if(!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingGeoTiffData"));if(null===s||void 0===s)throw new t(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingIsLittleEndian"));this._tag=e,this._type=n,this._count=i,this._valueOffset=o,this._geoTiffData=a,this._isLittleEndian=s};return Object.defineProperties(o.prototype,{tag:{get:function(){return this._tag}},type:{get:function(){return this._type}},count:{get:function(){return this._count}},valueOffset:{get:function(){return this._valueOffset}},geoTiffData:{get:function(){return this._geoTiffData}},isLittleEndian:{get:function(){return this._isLittleEndian}}}),o.prototype.getIFDTypeLength=function(){switch(this.type){case i.Type.BYTE:case i.Type.ASCII:case i.Type.SBYTE:case i.Type.UNDEFINED:return 1;case i.Type.SHORT:case i.Type.SSHORT:return 2;case i.Type.LONG:case i.Type.SLONG:case i.Type.FLOAT:return 4;case i.Type.RATIONAL:case i.Type.SRATIONAL:case i.Type.DOUBLE:return 8;default:return-1}},o.prototype.getIFDEntryValue=function(){var t=[],o=null,a=this.getIFDTypeLength();if(a*this.count<=4)o=!1===this.isLittleEndian?this.valueOffset>>>8*(4-a):this.valueOffset,t.push(o);else for(var s=0;s<this.count;s++){var u=a*s;if(a>=8)if(this.type===i.Type.RATIONAL||this.type===i.Type.SRATIONAL)t.push(n.getBytes(this.geoTiffData,this.valueOffset+u,4,this.isLittleEndian)),t.push(n.getBytes(this.geoTiffData,this.valueOffset+u+4,4,this.isLittleEndian));else{if(this.type!==i.Type.DOUBLE)throw new e(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","parse","invalidTypeOfIFD"));t.push(n.getBytes(this.geoTiffData,this.valueOffset+u,8,this.isLittleEndian))}else t.push(n.getBytes(this.geoTiffData,this.valueOffset+u,a,this.isLittleEndian))}return this.type===i.Type.ASCII?(t.forEach((function(e,t,n){0===e?n.splice(t,1):n[t]=String.fromCharCode(e)})),t.join("")):t},o})),i("util/WWUtil",["../error/ArgumentError","../geom/Line","../util/Logger","../geom/Rectangle","../geom/Vec3"],(function(e,t,n,r,i){"use strict";var o={latLonRegex:/^(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)$/,suffixForMimeType:function(e){return"image/png"===e?"png":"image/jpeg"===e?"jpg":"application/bil16"===e||"application/bil32"===e?"bil":null},currentUrlSansFilePart:function(){for(var e=window.location.protocol,t=window.location.host,n=window.location.pathname.split("/"),r="",i=0,o=n.length;i<o-1;i++)n[i].length>0&&(r=r+"/"+n[i]);return e+"//"+t+r},worldwindlibLocation:function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=e[t].src.indexOf("/worldwind.");if(n>=0)return e[t].src.substring(0,n)+"/"}return null},urlPath:function(e){if(!e)return"";for(var t=e.split("/"),n="",r=0,i=t.length;r<i;r++){var o=t[r];o&&0!==o.length&&-1==o.indexOf(":")&&"."!==o&&".."!==o&&"null"!==o&&"undefined"!==o&&(0!==n.length&&(n+="/"),n+=o)}return n},fillArray:function(e,t){if(e)for(var n=0,r=e.length;n<r;n++)e[n]=t},multiplyArray:function(e,t){if(e)for(var n=0,r=e.length;n<r;n++)e[n]*=t},jsonpCounter:0,jsonp:function(e,t,n){var r="gov_nasa_worldwind_jsonp_"+o.jsonpCounter++;window[r]=function(e){delete window[r],n(e)};var i=e+(-1===e.indexOf("?")?"?":"&");i+=t+"="+r;var a=document.createElement("script");a.async=!0,a.src=i;var s=document.getElementsByTagName("head")[0],u=function(){a.onload=void 0,a.onerror=void 0,s.removeChild(a)};a.onload=u,a.onerror=u,s.appendChild(a)},arrayEquals:function(e,t){return e.length==t.length&&e.every((function(e,n){return e===t[n]||e.equals&&e.equals(t[n])}))},transformToBoolean:function(e){return 0!=e&&"0"!=e&&"false"!=e&&Boolean(e)},clone:function(e){var t,n={},r=Object.keys(e);for(t=0;t<r.length;t++)n[r[t]]=e[r[t]];return n},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},date:function(e){return new Date(e)},startsWith:function(e,t,n){return n=n||0,e.substr(n,t.length)===t},endsWith:function(e,t,n){("number"!=typeof n||!isFinite(n)||Math.floor(n)!==n||n>e.length)&&(n=e.length),n-=t.length;var r=e.lastIndexOf(t,n);return-1!==r&&r===n}};return o})),i("formats/geotiff/GeoTiffReader",["../../error/AbstractError","../../error/ArgumentError","./GeoTiffConstants","./GeoTiffKeyEntry","./GeoTiffMetadata","./GeoTiffUtil","../../geom/Location","../../geom/Sector","../../util/Logger","../../util/proj4-src","./TiffConstants","./TiffIFDEntry","../../util/WWUtil"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f){"use strict";var d=function(e){if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","constructor","missingArrayBuffer"));this._isLittleEndian=!1,this._imageFileDirectories=[],this._geoTiffData=new DataView(e),this._metadata=new i,this.parse()};return Object.defineProperties(d.prototype,{isLittleEndian:{get:function(){return this._isLittleEndian}},imageFileDirectories:{get:function(){return this._imageFileDirectories}},geoTiffData:{get:function(){return this._geoTiffData}},metadata:{get:function(){return this._metadata}}}),d.retrieveFromUrl=function(e,n){if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","retrieveFromUrl","missingUrl"));if(!n)throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","retrieveFromUrl","The specified callback is null or undefined."));var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var t=r.response;t&&n(new d(t),r)}else u.log(u.LEVEL_WARNING,"GeoTiff retrieval failed ("+r.statusText+"): "+e),n(null,r)}.bind(this),r.onerror=function(){u.log(u.LEVEL_WARNING,"GeoTiff retrieval failed: "+e),n(null,r)},r.ontimeout=function(){u.log(u.LEVEL_WARNING,"GeoTiff retrieval timed out: "+e),n(null,r)},r.send(null)},d.prototype.parse=function(){if(!this._imageFileDirectories.length){if(this.getEndianness(),!this.isTiffFileType())throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","parse","invalidTiffFileType"));var t=o.getBytes(this.geoTiffData,4,4,this.isLittleEndian);this.parseImageFileDirectory(t),this.getMetadataFromImageFileDirectory(),this.parseGeoKeys(),this.setBBox()}},d.prototype.getEndianness=function(){var t=o.getBytes(this.geoTiffData,0,2,this.isLittleEndian);if(18761===t)this._isLittleEndian=!0;else{if(19789!==t)throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","getEndianness","invalidByteOrderValue"));this._isLittleEndian=!1}},d.prototype.getImage=function(){return this.createImage()},d.prototype.getImageData=function(){return this.createTypedElevationArray()},d.prototype.isTiffFileType=function(){return 42===o.getBytes(this.geoTiffData,2,2,this.isLittleEndian)},d.prototype.isGeoTiff=function(){return!!this.getIFDByTag(n.Tag.GEO_KEY_DIRECTORY)},d.prototype.createImage=function(){var e=this.metadata.bitsPerSample,t=this.metadata.samplesPerPixel,n=this.metadata.photometricInterpretation,r=this.metadata.imageLength,i=this.metadata.imageWidth;if(this.metadata.colorMap)var o=this.metadata.colorMap,a=Math.pow(2,e[0]);var s=document.createElement("canvas");s.width=i,s.height=r;var u=s.getContext("2d");if(this.metadata.stripOffsets){var l=this.parseStrips(!1);if(this.metadata.rowsPerStrip)var c=this.metadata.rowsPerStrip;else c=r;for(var h=l.length,f=0,d=0;d<h;d++){for(var p=l[d].length,m=f*d,g=0,A=0;A<p;g++)for(var v=0;v<i;v++,A++){var y=l[d][A];u.fillStyle=this.getFillStyle(y,n,e,t,o,a),u.fillRect(v,m+g,1,1)}f=c}}else if(this.metadata.tileOffsets){var b=this.parseTiles(!1),_=this.metadata.tileWidth,w=this.metadata.tileLength,E=Math.ceil(i/_);for(g=0;g<r;g++)for(v=0;v<i;v++){var x=Math.floor(v/_),S=g%w*_+v%_;y=b[Math.floor(g/w)*E+x][S],u.fillStyle=this.getFillStyle(y,n,e,t,o,a),u.fillRect(v,g,1,1)}}return this._geoTiffData=null,s},d.prototype.getFillStyle=function(e,t,n,r,i,a){var s=0,l=0,h=0,f=1;switch(this.metadata.noData&&e[0]==this.metadata.noData&&(f=0),t){case c.PhotometricInterpretation.WHITE_IS_ZERO:var d=Math.pow(2,n)-1;e[0]=d-e[0];case c.PhotometricInterpretation.BLACK_IS_ZERO:s=l=h=o.clampColorSample(e[0],n[0]);break;case c.PhotometricInterpretation.RGB:if(s=o.clampColorSample(e[0],n[0]),l=o.clampColorSample(e[1],n[1]),h=o.clampColorSample(e[2],n[2]),4===r&&2===this.metadata.extraSamples[0]){var p=Math.pow(2,n[3]);f=e[3]/p}break;case c.PhotometricInterpretation.RGB_PALETTE:if(i){var m=e[0];s=o.clampColorSample(i[m],16),l=o.clampColorSample(i[a+m],16),h=o.clampColorSample(i[2*a+m],16)}break;case c.PhotometricInterpretation.TRANSPARENCY_MASK:u.log(u.LEVEL_WARNING,"Photometric interpretation not yet implemented: TRANSPARENCY_MASK");break;case c.PhotometricInterpretation.CMYK:u.log(u.LEVEL_WARNING,"Photometric interpretation not yet implemented: CMYK");break;case c.PhotometricInterpretation.Y_Cb_Cr:u.log(u.LEVEL_WARNING,"Photometric interpretation not yet implemented: Y_Cb_Cr");break;case c.PhotometricInterpretation.CIE_LAB:u.log(u.LEVEL_WARNING,"Photometric interpretation not yet implemented: CIE_LAB");break;default:u.log("Unknown photometric interpretation: "+t)}return o.getRGBAFillValue(s,l,h,f)},d.prototype.createTypedElevationArray=function(){var e,t=[],n=this.metadata.bitsPerSample[0];if(this.metadata.stripOffsets)for(var r=this.parseStrips(!0),i=0;i<r.length;i++)t=t.concat(r[i]);else if(this.metadata.tileOffsets)for(var o=this.parseTiles(!0),a=this.metadata.imageWidth,s=this.metadata.imageLength,u=this.metadata.tileWidth,l=this.metadata.tileLength,h=Math.ceil(a/u),f=0;f<s;f++)for(var d=0;d<a;d++){var p=Math.floor(d/u),m=f%l*u+d%u,g=o[Math.floor(f/l)*h+p][m];t.push(g)}if(this.metadata.sampleFormat)var A=this.metadata.sampleFormat[0];else A=c.SampleFormat.UNSIGNED;switch(n){case 8:e=A===c.SampleFormat.SIGNED?new Int8Array(t):new Uint8Array(t);break;case 16:e=A===c.SampleFormat.SIGNED?new Int16Array(t):new Uint16Array(t);break;case 32:e=A===c.SampleFormat.SIGNED?new Int32Array(t):A===c.SampleFormat.IEEE_FLOAT?new Float32Array(t):new Uint32Array(t);break;case 64:e=new Float64Array(t)}return e},d.prototype.parseStrips=function(e){var t=this.metadata.samplesPerPixel,n=this.metadata.bitsPerSample,r=this.metadata.stripOffsets,i=this.metadata.stripByteCounts,o=this.metadata.compression;if(this.metadata.sampleFormat)var a=this.metadata.sampleFormat;else a=c.SampleFormat.UNSIGNED;for(var s=t*n[0]/8,u=[],l=0;l<r.length;l++){var h=r[l],f=i[l];u[l]=this.parseBlock(e,o,s,f,h,n,a)}return u},d.prototype.parseBlock=function(e,t,n,r,i,a,s){var l=[];switch(t){case c.Compression.UNCOMPRESSED:for(var h=0,f=n;h<r;h+=f){for(var d=0,p=[];d<a.length;d++){var m=d*(C=a[d]/8);p.push(o.getSampleBytes(this.geoTiffData,i+h+m,C,s[d],this.isLittleEndian))}e?l.push(p[0]):l.push(p)}break;case c.Compression.CCITT_1D:u.log(u.LEVEL_WARNING,"Compression type not yet implemented: CCITT_1D");break;case c.Compression.GROUP_3_FAX:u.log(u.LEVEL_WARNING,"Compression type not yet implemented: GROUP_3_FAX");break;case c.Compression.GROUP_4_FAX:u.log(u.LEVEL_WARNING,"Compression type not yet implemented: GROUP_4_FAX");break;case c.Compression.LZW:u.log(u.LEVEL_WARNING,"Compression type not yet implemented: LZW");break;case c.Compression.JPEG:u.log(u.LEVEL_WARNING,"Compression type not yet implemented: JPEG");break;case c.Compression.PACK_BITS:if(this.metadata.tileOffsets)var g=this.metadata.tileWidth,A=this.metadata.tileWidth,v=new ArrayBuffer(g*A*n);else{var y=this.metadata.rowsPerStrip,b=this.metadata.imageWidth;v=new ArrayBuffer(y*b*n)}var _=new DataView(v),w=!0,E=(p=[],0),x=0,S=0;for(h=0;h<r;h+=1)if(w){E=1,x=1,w=!1;var T=this.geoTiffData.getInt8(i+h,this.isLittleEndian);T>=0&&T<=127?E=T+1:T>=-127&&T<=-1?x=1-T:w=!0}else{for(var M=o.getBytes(this.geoTiffData,i+h,1,this.isLittleEndian),L=0;L<x;L++)_.setInt8(S,M),S++;0===--E&&(w=!0)}for(h=0,f=n;h<v.byteLength;h+=f){for(d=0,p=[];d<a.length;d++){var C;m=d*(C=a[d]/8),p.push(o.getSampleBytes(_,h+m,C,s[d],this.isLittleEndian))}e?l.push(p[0]):l.push(p)}}return l},d.prototype.parseTiles=function(e){var t=this.metadata.samplesPerPixel,n=this.metadata.bitsPerSample,r=this.metadata.compression;if(this.metadata.sampleFormat)var i=this.metadata.sampleFormat;else i=new Array(t),f.fillArray(i,c.SampleFormat.UNSIGNED);for(var o=t*n[0]/8,a=this.metadata.tileWidth,s=this.metadata.tileLength,u=this.metadata.tileOffsets,l=this.metadata.tileByteCounts,h=this.metadata.imageLength,d=this.metadata.imageWidth,p=Math.ceil(d/a),m=Math.ceil(h/s),g=[],A=0;A<m;A++)for(var v=0;v<p;v++){var y=p*A+v,b=u[y],_=l[y];g[y]=this.parseBlock(e,r,o,_,b,n,i)}return g},d.prototype.geoTiffImageToPCS=function(e,n){if(null===e||void 0===e)throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","geoTiffImageToPCS","missingXValue"));if(null===n||void 0===n)throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","geoTiffImageToPCS","missingYValue"));var r=[e,n],i=this.metadata.modelTiepoint,o=this.metadata.modelPixelScale,s=this.metadata.modelTransformation,c=i?i.length:0,h=o?o.length:0,f=s?s.length:0;if(c>6&&0===h);else if(16===f){var d=e,p=n;r=[e=d*s[0]+p*s[1]+s[3],n=d*s[4]+p*s[5]+s[7]]}else h<3||c<6||(e=(e-i[0])*o[0]+i[3],n=(n-i[1])*(-1*o[1])+i[4]),r=[e,n];return l.defs([["EPSG:26771","+proj=tmerc +lat_0=36.66666666666666 +lon_0=-88.33333333333333 +k=0.9999749999999999 +x_0=152400.3048006096 +y_0=0 +ellps=clrk66 +datum=NAD27 +to_meter=0.3048006096012192 +no_defs "],["EPSG:32633","+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs"]]),this.metadata.projectedCSType&&(r=l("EPSG:"+this.metadata.projectedCSType,"EPSG:4326",r)),new a(r[1],r[0])},d.prototype.setBBox=function(){var e=this.geoTiffImageToPCS(0,0),t=this.geoTiffImageToPCS(this.metadata.imageWidth,0),n=this.geoTiffImageToPCS(0,this.metadata.imageLength);this.geoTiffImageToPCS(this.metadata.imageWidth,this.metadata.imageLength),this.metadata.bbox=new s(n.latitude,e.latitude,e.longitude,t.longitude)},d.prototype.getMetadataFromImageFileDirectory=function(){for(var e=0;e<this.imageFileDirectories[0].length;e++)switch(this.imageFileDirectories[0][e].tag){case c.Tag.BITS_PER_SAMPLE:this.metadata.bitsPerSample=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.COLOR_MAP:this.metadata.colorMap=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.COMPRESSION:this.metadata.compression=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.EXTRA_SAMPLES:this.metadata.extraSamples=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.IMAGE_DESCRIPTION:this.metadata.imageDescription=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.IMAGE_LENGTH:this.metadata.imageLength=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.IMAGE_WIDTH:this.metadata.imageWidth=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.MAX_SAMPLE_VALUE:this.metadata.maxSampleValue=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.MIN_SAMPLE_VALUE:this.metadata.minSampleValue=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.ORIENTATION:this.metadata.orientation=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.PHOTOMETRIC_INTERPRETATION:this.metadata.photometricInterpretation=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.PLANAR_CONFIGURATION:this.metadata.planarConfiguration=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.ROWS_PER_STRIP:this.metadata.rowsPerStrip=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.RESOLUTION_UNIT:this.metadata.resolutionUnit=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.SAMPLES_PER_PIXEL:this.metadata.samplesPerPixel=this.imageFileDirectories[0][e].getIFDEntryValue()[0];break;case c.Tag.SAMPLE_FORMAT:this.metadata.sampleFormat=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.SOFTWARE:this.metadata.software=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.STRIP_BYTE_COUNTS:this.metadata.stripByteCounts=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.STRIP_OFFSETS:this.metadata.stripOffsets=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.TILE_BYTE_COUNTS:this.metadata.tileByteCounts=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.TILE_OFFSETS:this.metadata.tileOffsets=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.TILE_LENGTH:this.metadata.tileLength=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.TILE_WIDTH:this.metadata.tileWidth=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.X_RESOLUTION:this.metadata.xResolution=this.imageFileDirectories[0][e].getIFDEntryValue();break;case c.Tag.Y_RESOLUTION:this.metadata.tileWidth=this.imageFileDirectories[0][e].getIFDEntryValue();break;case n.Tag.GEO_ASCII_PARAMS:this.metadata.geoAsciiParams=this.imageFileDirectories[0][e].getIFDEntryValue();break;case n.Tag.GEO_DOUBLE_PARAMS:this.metadata.geoDubleParams=this.imageFileDirectories[0][e].getIFDEntryValue();break;case n.Tag.GEO_KEY_DIRECTORY:this.metadata.geoKeyDirectory=this.imageFileDirectories[0][e].getIFDEntryValue();break;case n.Tag.MODEL_PIXEL_SCALE:this.metadata.modelPixelScale=this.imageFileDirectories[0][e].getIFDEntryValue();break;case n.Tag.MODEL_TIEPOINT:this.metadata.modelTiepoint=this.imageFileDirectories[0][e].getIFDEntryValue();break;case n.Tag.GDAL_METADATA:this.metadata.metaData=this.imageFileDirectories[0][e].getIFDEntryValue();break;case n.Tag.GDAL_NODATA:this.metadata.noData=this.imageFileDirectories[0][e].getIFDEntryValue();break;default:u.log(u.LEVEL_WARNING,"Ignored GeoTiff tag: "+this.imageFileDirectories[0][e].tag)}},d.prototype.parseGeoKeys=function(){if(!this.isGeoTiff())throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","parse","invalidGeoTiffFile"));var t=this.metadata.geoKeyDirectory;if(!t)throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","parseGeoKeys","missingGeoKeyDirectoryTag"));for(var i=(t[0],t[1],t[2],t[3]),o=0;o<i;o++){var a=t[4+4*o],s=t[5+4*o],l=t[6+4*o],c=t[7+4*o];switch(a){case n.Key.GTModelTypeGeoKey:this.metadata.gtModelTypeGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GTRasterTypeGeoKey:this.metadata.gtRasterTypeGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GTCitationGeoKey:this.metadata.gtCitationGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeographicTypeGeoKey:this.metadata.geographicTypeGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeogCitationGeoKey:this.metadata.geogCitationGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeogAngularUnitsGeoKey:this.metadata.geogAngularUnitsGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeogAngularUnitSizeGeoKey:this.metadata.geogAngularUnitSizeGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeogSemiMajorAxisGeoKey:this.metadata.geogSemiMajorAxisGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeogInvFlatteningGeoKey:this.metadata.geogInvFlatteningGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.ProjectedCSTypeGeoKey:this.metadata.projectedCSType=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.ProjLinearUnitsGeoKey:this.metadata.projLinearUnits=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;default:u.log(u.LEVEL_WARNING,"Ignored GeoTiff key: "+a)}}},d.prototype.parseImageFileDirectory=function(e){if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","parseImageFileDirectory","missingOffset"));for(var n=o.getBytes(this.geoTiffData,e,2,this.isLittleEndian),r=[],i=e+2,a=0;a<n;i+=12,a++){var s=o.getBytes(this.geoTiffData,i,2,this.isLittleEndian),l=o.getBytes(this.geoTiffData,i+2,2,this.isLittleEndian),c=o.getBytes(this.geoTiffData,i+4,4,this.isLittleEndian),f=o.getBytes(this.geoTiffData,i+8,4,this.isLittleEndian);r.push(new h(s,l,c,f,this.geoTiffData,this.isLittleEndian))}this._imageFileDirectories.push(r);var d=o.getBytes(this.geoTiffData,i,4,this.isLittleEndian);0!==d&&this.parseImageFileDirectory(d)},d.prototype.getIFDByTag=function(e){if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","getIFDByTag","missingTag"));for(var n=0;n<this.imageFileDirectories[0].length;n++)if(this.imageFileDirectories[0][n].tag===e)return this.imageFileDirectories[0][n];return null},d})),i("util/Level",["../geom/Angle","../error/ArgumentError","../geom/Location","../util/Logger"],(function(e,t,n,r){"use strict";var i=function(n,i,o){if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"Level","constructor","The specified tile delta is null or undefined"));if(!o)throw new t(r.logMessage(r.LEVEL_SEVERE,"Level","constructor","The specified parent level set is null or undefined"));this.levelNumber=n,this.tileDelta=i,this.parent=o,this.texelSize=i.latitude*e.DEGREES_TO_RADIANS/o.tileHeight,this.tileWidth=o.tileWidth,this.tileHeight=o.tileHeight,this.sector=o.sector};return i.prototype.isFirstLevel=function(){return this.parent.firstLevel()==this},i.prototype.isLastLevel=function(){return this.parent.lastLevel()==this},i.prototype.previousLevel=function(){return this.parent.level(this.levelNumber-1)},i.prototype.nextLevel=function(){return this.parent.level(this.levelNumber+1)},i.prototype.compare=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"Level","compare","The specified level is null or undefined"));return this.levelNumber<e.levelNumber?-1:this.levelNumber>e.levelNumber?1:0},i})),i("util/LevelSet",["../error/ArgumentError","../util/Level","../geom/Location","../util/Logger"],(function(e,t,n,r){"use strict";var i=function(i,o,a,s,u){if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"LevelSet","constructor","missingSector"));if(!o)throw new e(r.logMessage(r.LEVEL_SEVERE,"LevelSet","constructor","The specified level zero delta is null or undefined"));if(o.latitude<=0||o.longitude<=0)throw new e(r.logMessage(r.LEVEL_SEVERE,"LevelSet","constructor","The specified level zero delta is less than or equal to zero."));if(a<1)throw new e(r.logMessage(r.LEVEL_SEVERE,"LevelSet","constructor","The specified number of levels is less than one."));if(s<1||u<1)throw new e(r.logMessage(r.LEVEL_SEVERE,"LevelSet","constructor","The specified tile width or tile height is less than one."));this.sector=i,this.levelZeroDelta=o,this.numLevels=a,this.tileWidth=s,this.tileHeight=u,this.levels=[];for(var l=0;l<a;l+=1){var c=Math.pow(2,l),h=o.latitude/c,f=o.longitude/c,d=new n(h,f),p=new t(l,d,this);this.levels[l]=p}};return i.numLevelsForResolution=function(t,n){if(!t||!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"LevelSet","numLevelsForResolution","missingResolution"));var i=Math.log(t/n)/Math.log(2);return i<0&&(i=0),i+1},i.prototype.level=function(e){return e<0||e>=this.levels.length?null:this.levels[e]},i.prototype.levelForTexelSize=function(e){var t=this.lastLevel();if(t.texelSize>=e)return t;for(var n=0,r=this.levels.length;n<r;n+=1){var i=this.levels[n];if(i.texelSize<=e)return i}return t},i.prototype.firstLevel=function(){return this.levels[0]},i.prototype.lastLevel=function(){return this.levels[this.levels.length-1]},i})),i("cache/MemoryCache",["../error/ArgumentError","../util/Logger"],(function(e,t){"use strict";var n=function(n,r){if(!n||n<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCache","constructor","The specified capacity is undefined, zero or negative"));if(!r||r>=n||r<0)throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCache","constructor","The specified low-water value is undefined, greater than or equal to the capacity, or less than 1"));this._capacity=n,this._lowWater=r,this.usedCapacity=0,this.freeCapacity=n,this.entries={},this.listeners=[]};return Object.defineProperties(n.prototype,{capacity:{get:function(){return this._capacity},set:function(n){if(!n||n<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCache","capacity","Specified cache capacity is undefined, 0 or negative."));var r=this._capacity;this._capacity=n,this._capacity<=this.lowWater&&(this._lowWater=.85*this._capacity),this._capacity<r&&this.makeSpace(0)}},lowWater:{get:function(){return this._lowWater},set:function(n){if(!n||n>=this._capacity||n<0)throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCache","lowWater","Specified cache low-water value is undefined, negative or not less than the current capacity."));this._lowWater=n}}}),n.prototype.entryForKey=function(e){if(!e)return null;var t=this.entries[e];return t?(t.lastUsed=Date.now(),t.entry):null},n.prototype.putEntry=function(n,r,i){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCache","putEntry","missingKey."));if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCache","putEntry","missingEntry."));if(i<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCache","putEntry","The specified entry size is less than 1."));var o;this.entries[n]&&this.removeEntry(n),this.usedCapacity+i>this._capacity&&this.makeSpace(i),this.usedCapacity+=i,this.freeCapacity=this._capacity-this.usedCapacity,o={key:n,entry:r,size:i,lastUsed:Date.now(),agingFactor:1},this.entries[n]=o},n.prototype.clear=function(e){if(e)for(var t in this.entries)this.entries.hasOwnProperty(t)&&this.removeCacheEntry(t);this.entries={},this.freeCapacity=this._capacity,this.usedCapacity=0},n.prototype.removeEntry=function(e){if(e){var t=this.entries[e];t&&this.removeCacheEntry(t)}},n.prototype.setEntryAgingFactor=function(e,t){if(e){var n=this.entries[e];n&&(n.agingFactor=t)}},n.prototype.removeCacheEntry=function(e){delete this.entries[e.key],this.usedCapacity-=e.size,this.freeCapacity=this._capacity-this.usedCapacity;for(var t=0,n=this.listeners.length;t<n;t++)try{this.listeners[t].entryRemoved(e.key,e.entry)}catch(n){this.listeners[t].removalError(n,e.key,e.entry)}},n.prototype.containsKey=function(e){return e&&this.entries[e]},n.prototype.addCacheListener=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCache","addCacheListener","missingListener"));if("function"!=typeof n.entryRemoved||"function"!=typeof n.removalError)throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCache","addCacheListener","The specified listener does not implement the required functions."));this.listeners.push(n)},n.prototype.removeCacheListener=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCache","removeCacheListener","missingListener"));var r=this.listeners.indexOf(n);r>-1&&this.listeners.splice(r,1)},n.prototype.makeSpace=function(e){var t=[],n=Date.now();for(var r in this.entries)this.entries.hasOwnProperty(r)&&t.push(this.entries[r]);t.sort((function(e,t){var r=(n-e.lastUsed)*e.agingFactor;return(n-t.lastUsed)*t.agingFactor-r}));for(var i=0,o=t.length;i<o&&(this.usedCapacity>this._lowWater||this.freeCapacity<e);i++)this.removeCacheEntry(t[i])},n})),i("shaders/BasicProgram",["../error/ArgumentError","../util/Color","../shaders/GpuProgram","../util/Logger"],(function(e,t,n,r){"use strict";var i=function(e){n.call(this,e,"attribute vec4 vertexPoint;\nuniform mat4 mvpMatrix;\nvoid main() {gl_Position = mvpMatrix * vertexPoint;}","precision mediump float;\nuniform vec4 color;\nvoid main() {gl_FragColor = color;}"),this.vertexPointLocation=this.attributeLocation(e,"vertexPoint"),this.mvpMatrixLocation=this.uniformLocation(e,"mvpMatrix"),this.colorLocation=this.uniformLocation(e,"color")};return i.key="WorldWindGpuBasicProgram",(i.prototype=Object.create(n.prototype)).loadModelviewProjection=function(t,n){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"BasicProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(t,n,this.mvpMatrixLocation)},i.prototype.loadColor=function(t,n){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"BasicProgram","loadColor","missingColor"));this.loadUniformColor(t,n,this.colorLocation)},i.prototype.loadColorComponents=function(e,t,n,r,i){this.loadUniformColorComponents(e,t,n,r,i,this.colorLocation)},i})),i("geom/Frustum",["../error/ArgumentError","../geom/Matrix","../geom/Plane","../util/Logger"],(function(e,t,n,r){"use strict";var i=function(t,n,i,o,a,s){if(!(t&&n&&i&&o&&a&&s))throw new e(r.logMessage(r.LEVEL_SEVERE,"Frustum","constructor","missingPlane"));this._left=t,this._right=n,this._bottom=i,this._top=o,this._near=a,this._far=s,this._planes=[this._left,this._right,this._top,this._bottom,this._near,this._far]};return Object.defineProperties(i.prototype,{left:{get:function(){return this._left}},right:{get:function(){return this._right}},bottom:{get:function(){return this._bottom}},top:{get:function(){return this._top}},near:{get:function(){return this._near}},far:{get:function(){return this._far}}}),i.prototype.transformByMatrix=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Frustum","transformByMatrix","missingMatrix"));return this._left.transformByMatrix(t),this._right.transformByMatrix(t),this._bottom.transformByMatrix(t),this._top.transformByMatrix(t),this._near.transformByMatrix(t),this._far.transformByMatrix(t),this},i.prototype.normalize=function(){return this._left.normalize(),this._right.normalize(),this._bottom.normalize(),this._top.normalize(),this._near.normalize(),this._far.normalize(),this},i.unitFrustum=function(){return new i(new n(1,0,0,1),new n(-1,0,0,1),new n(0,1,1,1),new n(0,-1,0,1),new n(0,0,-1,1),new n(0,0,1,1))},i.fromProjectionMatrix=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Frustum","fromProjectionMatrix","missingMatrix"));var o,a,s,u,l,c,h,f,d,p,m;return o=t[12]+t[0],a=t[13]+t[1],s=t[14]+t[2],u=t[15]+t[3],l=Math.sqrt(o*o+a*a+s*s),c=new n(o/l,a/l,s/l,u/l),o=t[12]-t[0],a=t[13]-t[1],s=t[14]-t[2],u=t[15]-t[3],l=Math.sqrt(o*o+a*a+s*s),h=new n(o/l,a/l,s/l,u/l),o=t[12]+t[4],a=t[13]+t[5],s=t[14]+t[6],u=t[15]+t[7],l=Math.sqrt(o*o+a*a+s*s),d=new n(o/l,a/l,s/l,u/l),o=t[12]-t[4],a=t[13]-t[5],s=t[14]-t[6],u=t[15]-t[7],l=Math.sqrt(o*o+a*a+s*s),f=new n(o/l,a/l,s/l,u/l),o=t[12]+t[8],a=t[13]+t[9],s=t[14]+t[10],u=t[15]+t[11],l=Math.sqrt(o*o+a*a+s*s),p=new n(o/l,a/l,s/l,u/l),o=t[12]-t[8],a=t[13]-t[9],s=t[14]-t[10],u=t[15]-t[11],l=Math.sqrt(o*o+a*a+s*s),m=new n(o/l,a/l,s/l,u/l),new i(c,h,d,f,p,m)},i.prototype.containsPoint=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Frustum","containsPoint","missingPoint"));return!(this._far.dot(t)<=0)&&!(this._left.dot(t)<=0)&&!(this._right.dot(t)<=0)&&!(this._top.dot(t)<=0)&&!(this._bottom.dot(t)<=0)&&!(this._near.dot(t)<=0)},i.prototype.intersectsSegment=function(t,n){if(!t||!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"Frustum","containsPoint","missingPoint"));if(this.containsPoint(t)||this.containsPoint(n))return!0;if(t.equals(n))return!1;for(var i=0,o=this._planes.length;i<o;i++){if(this._planes[i].onSameSide(t,n)<0)return!1;if(null!=this._planes[i].clip(t,n))return!0}return!1},i})),i("error/NotYetImplementedError",["../error/AbstractError"],(function(e){"use strict";var t=function(t){var n;e.call(this,"NotYetImplementedError",t);try{throw new Error}catch(e){n=e.stack}this.stack=n};return t.prototype=Object.create(e.prototype),t})),i("geom/BoundingBox",["../error/ArgumentError","../shaders/BasicProgram","../geom/Frustum","../util/Logger","../geom/Matrix","../error/NotYetImplementedError","../geom/Plane","../geom/Sector","../geom/Vec3","../util/WWMath","../util/WWUtil"],(function(e,t,n,r,i,o,a,s,u,l,c){"use strict";var h=function(){this.center=new u(0,0,0),this.bottomCenter=new u(-.5,0,0),this.topCenter=new u(.5,0,0),this.r=new u(1,0,0),this.s=new u(0,1,0),this.t=new u(0,0,1),this.radius=Math.sqrt(3),this.tmp1=new u(0,0,0),this.tmp2=new u(0,0,0),this.tmp3=new u(0,0,0),this.scratchElevations=new Float64Array(9),this.scratchPoints=new Float64Array(3*this.scratchElevations.length)};return h.scratchMatrix=i.fromIdentity(),h.prototype.getCorners=function(){var e=new u(this.s[0],this.s[1],this.s[2]),t=new u(this.t[0],this.t[1],this.t[2]),n=new u(this.s[0],this.s[1],this.s[2]),r=new u(this.s[0],this.s[1],this.s[2]);e.add(this.t).multiply(-.5),t.subtract(this.s).multiply(.5),n.add(this.t).multiply(.5),r.subtract(this.t).multiply(.5);for(var i=[],o=0;o<4;o++)i.push(new u(this.bottomCenter[0],this.bottomCenter[1],this.bottomCenter[2]));for(o=0;o<4;o++)i.push(new u(this.topCenter[0],this.topCenter[1],this.topCenter[2]));return i[0].add(e),i[1].add(t),i[2].add(n),i[3].add(r),i[4].add(e),i[5].add(t),i[6].add(n),i[7].add(r),i},h.prototype.setToPoints=function(t){if(!t||t.length<3)throw new e(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","setToPoints","missingArray"));var n,o,a,s,l,c,h,f,d,p,m,g,A,v,y,b=+Number.MAX_VALUE,_=-Number.MAX_VALUE,w=+Number.MAX_VALUE,E=-Number.MAX_VALUE,x=+Number.MAX_VALUE,S=-Number.MAX_VALUE,T=this.r,M=this.s,L=this.t,C=new u(0,0,0);i.principalAxesFromPoints(t,T,M,L);for(var R=0,O=t.length/3;R<O;R++)C[0]=t[3*R],C[1]=t[3*R+1],C[2]=t[3*R+2],b>(n=C.dot(T))&&(b=n),_<n&&(_=n),w>(o=C.dot(M))&&(w=o),E<o&&(E=o),x>(a=C.dot(L))&&(x=a),S<a&&(S=a);return _===b&&(_=b+1),E===w&&(E=w+1),S===x&&(S=x+1),s=_-b,l=E-w,c=S-x,h=_+b,f=E+w,d=S+x,p=.5*T[0]*s,m=.5*T[1]*s,g=.5*T[2]*s,A=.5*(T[0]*h+M[0]*f+L[0]*d),v=.5*(T[1]*h+M[1]*f+L[1]*d),y=.5*(T[2]*h+M[2]*f+L[2]*d),this.center[0]=A,this.center[1]=v,this.center[2]=y,this.topCenter[0]=A+p,this.topCenter[1]=v+m,this.topCenter[2]=y+g,this.bottomCenter[0]=A-p,this.bottomCenter[1]=v-m,this.bottomCenter[2]=y-g,T.multiply(s),M.multiply(l),L.multiply(c),this.radius=.5*Math.sqrt(s*s+l*l+c*c),this},h.prototype.setToVec3Points=function(t){if(!t||0===t.length)throw new e(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","setToVec3Points","missingArray"));for(var n=new Float32Array(3*t.length),i=0;i<t.length;i++)for(var o=t[i],a=0;a<3;a++)n[3*i+a]=o[a];return this.setToPoints(n)},h.prototype.setToSector=function(t,n,i,o){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","setToSector","missingSector"));if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","setToSector","missingGlobe"));var a=this.scratchElevations,s=this.scratchPoints;c.fillArray(a,o),a[0]=a[2]=a[6]=a[8]=i,n.computePointsForGrid(t,3,3,a,u.ZERO,s),this.tmp1.set(s[12],s[13],s[14]),l.localCoordinateAxesAtPoint(this.tmp1,n,this.r,this.s,this.t);for(var h=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],f=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],d=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],p=0,m=s.length;p<m;p+=3)this.tmp1.set(s[p],s[p+1],s[p+2]),this.adjustExtremes(this.r,h,this.s,f,this.t,d,this.tmp1);t.deltaLongitude()>180&&(n.computePointFromPosition(t.centroidLatitude(),t.centroidLongitude()+90,o,this.tmp1),n.computePointFromPosition(t.centroidLatitude(),t.centroidLongitude()-90,o,this.tmp2),this.adjustExtremes(this.r,h,this.s,f,this.t,d,this.tmp1),this.adjustExtremes(this.r,h,this.s,f,this.t,d,this.tmp2)),h[1]-h[0]<f[1]-f[0]&&this.swapAxes(this.r,h,this.s,f),f[1]-f[0]<d[1]-d[0]&&this.swapAxes(this.s,f,this.t,d),h[1]-h[0]<f[1]-f[0]&&this.swapAxes(this.r,h,this.s,f);var g=h[1]-h[0],A=f[1]-f[0],v=d[1]-d[0],y=h[1]+h[0],b=f[1]+f[0],_=d[1]+d[0],w=.5*(this.r[0]*y+this.s[0]*b+this.t[0]*_),E=.5*(this.r[1]*y+this.s[1]*b+this.t[1]*_),x=.5*(this.r[2]*y+this.s[2]*b+this.t[2]*_),S=.5*this.r[0]*g,T=.5*this.r[1]*g,M=.5*this.r[2]*g;return this.center.set(w,E,x),this.topCenter.set(w+S,E+T,x+M),this.bottomCenter.set(w-S,E-T,x-M),this.r.multiply(g),this.s.multiply(A),this.t.multiply(v),this.radius=.5*Math.sqrt(g*g+A*A+v*v),this},h.prototype.translate=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","translate","missingVector"));return this.bottomCenter.add(t),this.topCenter.add(t),this.center.add(t),this},h.prototype.distanceTo=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","distanceTo","missingPoint"));var n=this.center.distanceTo(t)-this.radius;return n>=0?n:-n},h.prototype.effectiveRadius=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","effectiveRadius","missingPlane"));var n=t.normal;return.5*(l.fabs(this.r.dot(n))+l.fabs(this.s.dot(n))+l.fabs(this.t.dot(n)))},h.prototype.intersectsFrustum=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","intersectsFrustum","missingFrustum"));return this.tmp1.copy(this.bottomCenter),this.tmp2.copy(this.topCenter),!(this.intersectionPoint(t.near)<0)&&!(this.intersectionPoint(t.far)<0)&&!(this.intersectionPoint(t.left)<0)&&!(this.intersectionPoint(t.right)<0)&&!(this.intersectionPoint(t.top)<0)&&!(this.intersectionPoint(t.bottom)<0)},h.prototype.intersectionPoint=function(e){var t=e.normal,n=.5*(Math.abs(this.s.dot(t))+Math.abs(this.t.dot(t)));return this.intersectsAt(e,n,this.tmp1,this.tmp2)},h.prototype.intersectsAt=function(e,t,n,r){var i=e.dot(n),o=i<=-t,a=e.dot(r)<=-t;if(o&&a)return-1;if(o==a)return 0;this.tmp3.copy(n),this.tmp3.subtract(r);var s=(t+i)/e.normal.dot(this.tmp3);return this.tmp3.copy(r),this.tmp3.subtract(n),this.tmp3.multiply(s),this.tmp3.add(n),o?n.copy(this.tmp3):r.copy(this.tmp3),s},h.prototype.adjustExtremes=function(e,t,n,r,i,o,a){var s=a.dot(e);t[0]>s&&(t[0]=s),t[1]<s&&(t[1]=s);var u=a.dot(n);r[0]>u&&(r[0]=u),r[1]<u&&(r[1]=u);var l=a.dot(i);o[0]>l&&(o[0]=l),o[1]<l&&(o[1]=l)},h.prototype.swapAxes=function(e,t,n,r){e.swap(n);var i=t[0];t[0]=r[0],r[0]=i,i=t[1],t[1]=r[1],r[1]=i},h.prototype.render=function(e){var n=e.currentGlContext,r=h.scratchMatrix,i=e.findAndBindProgram(t);try{r.copy(e.modelviewProjection),r.multiply(this.r[0],this.s[0],this.t[0],this.center[0],this.r[1],this.s[1],this.t[1],this.center[1],this.r[2],this.s[2],this.t[2],this.center[2],0,0,0,1),r.multiplyByTranslation(-.5,-.5,-.5),i.loadModelviewProjection(n,r),n.disable(n.CULL_FACE),n.bindBuffer(n.ARRAY_BUFFER,e.unitCubeBuffer()),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.unitCubeElements()),n.enableVertexAttribArray(i.vertexPointLocation),n.vertexAttribPointer(i.vertexPointLocation,3,n.FLOAT,!1,0,0),i.loadColorComponents(n,0,1,0,.6),n.drawElements(n.LINES,24,n.UNSIGNED_SHORT,72),i.loadColorComponents(n,1,1,1,.3),n.drawElements(n.TRIANGLES,36,n.UNSIGNED_SHORT,0)}finally{n.enable(n.CULL_FACE),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}},h})),i("util/Tile",["../error/ArgumentError","../geom/BoundingBox","../util/Logger","../geom/Sector","../geom/Vec3","../util/WWUtil"],(function(e,t,n,r,i,o){"use strict";var a=function t(r,i,o,a){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","constructor","missingSector"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","constructor","The specified level is null or undefined."));if(o<0||a<0)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","constructor","The specified row or column is less than zero."));this.sector=r,this.level=i,this.row=o,this.column=a,this.tileWidth=i.tileWidth,this.tileHeight=i.tileHeight,this.texelSize=i.texelSize,this.tileKey=t.computeTileKey(i.levelNumber,o,a),this.extent=null,this.referencePoint=null,this.opacity=1,this.samplePoints=null,this.sampleElevations=null,this.updateTimestamp=null,this.updateVerticalExaggeration=null,this.updateGlobeStateKey=null};return a.prototype.isEqual=function(e){return!!e&&!!e.tileKey&&this.tileKey==e.tileKey},a.prototype.size=function(){return 828},a.prototype.distanceTo=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","distanceTo","missingVector"));for(var r,i,o,a=t[0],s=t[1],u=t[2],l=this.samplePoints,c=Number.POSITIVE_INFINITY,h=0,f=l.length;h<f;h+=3)r=a-l[h],i=s-l[h+1],o=u-l[h+2],c=Math.min(c,r*r+i*i+o*o);return Math.sqrt(c)},a.prototype.subdivide=function(t,i){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","subdivide","The specified level is null or undefined."));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","subdivide","The specified tile factory is null or undefined."));var o,a,s,u=this.sector.minLatitude,l=this.sector.maxLatitude,c=this.sector.centroidLatitude(),h=this.sector.minLongitude,f=this.sector.maxLongitude,d=this.sector.centroidLongitude(),p=[];return o=2*this.row,a=2*this.column,s=new r(u,c,h,d),p.push(i.createTile(s,t,o,a)),o=2*this.row,a=2*this.column+1,s=new r(u,c,d,f),p.push(i.createTile(s,t,o,a)),o=2*this.row+1,a=2*this.column,s=new r(c,l,h,d),p.push(i.createTile(s,t,o,a)),o=2*this.row+1,a=2*this.column+1,s=new r(c,l,d,f),p.push(i.createTile(s,t,o,a)),p},a.prototype.subdivideToCache=function(t,r,i){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","subdivideToCache","The specified level is null or undefined."));if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","subdivideToCache","The specified tile factory is null or undefined."));var o=i?i.entryForKey(this.tileKey):null;return o||(o=this.subdivide(t,r))&&i&&i.putEntry(this.tileKey,o,4*o[0].size()),o},a.prototype.mustSubdivide=function(e,t){var n=e.globe.equatorialRadius*this.texelSize,r=this.distanceTo(e.eyePoint),i=e.pixelSizeAtDistance(r);return n>Math.max(t*i,.5)},a.prototype.update=function(e){var t=e.globe.elevationTimestamp(),n=e.verticalExaggeration,r=e.globeStateKey;this.updateTimestamp==t&&this.updateVerticalExaggeration==n&&this.updateGlobeStateKey==r||(this.doUpdate(e),e.frameStatistics.incrementTileUpdateCount(1),this.updateTimestamp=t,this.updateVerticalExaggeration=n,this.updateGlobeStateKey=r)},a.prototype.doUpdate=function(e){var n=e.globe,r=e.verticalExaggeration,a=n.minAndMaxElevationsForSector(this.sector),s=a[0]*r,u=a[1]*r;s===u&&(s=u+10),this.extent||(this.extent=new t),this.extent.setToSector(this.sector,n,s,u),this.samplePoints||(this.sampleElevations=new Float64Array(9),this.samplePoints=new Float64Array(3*this.sampleElevations.length)),o.fillArray(this.sampleElevations,.5*(s+u)),n.computePointsForGrid(this.sector,3,3,this.sampleElevations,i.ZERO,this.samplePoints),this.referencePoint||(this.referencePoint=new i(0,0,0)),n.computePointFromPosition(this.sector.centroidLatitude(),this.sector.centroidLongitude(),0,this.referencePoint)},a.computeTileKey=function(e,t,n){return e+"."+t+"."+n},a.computeRow=function(e,t){var n=Math.floor((t+90)/e);return 90==t&&(n-=1),n},a.computeColumn=function(e,t){var n=Math.floor((t+180)/e);return 180==t&&(n-=1),n},a.computeLastRow=function(e,t){var n=Math.ceil((t+90)/e-1);return t+90<e&&(n=0),n},a.computeLastColumn=function(e,t){var n=Math.ceil((t+180)/e-1);return t+180<e&&(n=0),n},a.computeSector=function(t,i,o){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","computeSector","missingLevel"));if(i<0||o<0)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","computeSector","The specified row or column is less than zero."));var a=t.tileDelta.latitude,s=t.tileDelta.longitude,u=i*a-90,l=o*s-180;return new r(u,u+a,l,l+s)},a.createTilesForLevel=function(t,i,o){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","createTilesForLevel","missingLevel"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","createTilesForLevel","The specified tile factory is null or undefined"));if(!o)throw new e(n.logMessage(n.LEVEL_SEVERE,"Tile","createTilesForLevel","missingResult"));for(var s,u,l,c=t.tileDelta.latitude,h=t.tileDelta.longitude,f=t.sector,d=a.computeRow(c,f.minLatitude),p=a.computeRow(c,f.maxLatitude),m=a.computeColumn(h,f.minLongitude),g=a.computeColumn(h,f.maxLongitude),A=m*h-180,v=d*c-90,y=d;y<=p;y+=1){u=v+c,s=A;for(var b=m;b<=g;b+=1){var _=new r(v,u,s,l=s+h),w=i.createTile(_,t,y,b);o.push(w),s=l}v=u}},a})),i("globe/TiledElevationCoverage",["../util/AbsentResourceList","../geom/Angle","../error/ArgumentError","../globe/ElevationCoverage","../globe/ElevationImage","../formats/geotiff/GeoTiffReader","../util/LevelSet","../geom/Location","../util/Logger","../cache/MemoryCache","../geom/Sector","../util/Tile","../util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f){"use strict";var d=function(t){if(!t)throw new n(u.logMessage(u.LEVEL_SEVERE,"TiledElevationCoverage","constructor","missingConfig"));if(!t.coverageSector)throw new n(u.logMessage(u.LEVEL_SEVERE,"TiledElevationCoverage","constructor","missingSector"));if(!t.resolution)throw new n(u.logMessage(u.LEVEL_SEVERE,"TiledElevationCoverage","constructor","missingResolution"));if(!t.retrievalImageFormat)throw new n(u.logMessage(u.LEVEL_SEVERE,"TiledElevationCoverage","constructor","missingImageFormat"));r.call(this,t.resolution);var i=a.numLevelsForResolution(45/256,t.resolution),o=Math.ceil(i);this.coverageSector=t.coverageSector,this.retrievalImageFormat=t.retrievalImageFormat,this.minElevation=t.minElevation||0,this.maxElevation=t.maxElevation||0,this.pixelIsPoint=!1,this.levels=new a(this.coverageSector,new s(45,45),o,256,256),this.currentTiles=[],this.currentSector=new c(0,0,0,0),this.tileCache=new l(1e6,8e5),this.imageCache=new l(1e7,8e6),this.retrievalQueueSize=WorldWind.configuration.coverageRetrievalQueueSize,this.currentRetrievals=[],this.absentResourceList=new e(3,5e3),this.urlBuilder=t.urlBuilder||null};return(d.prototype=Object.create(r.prototype)).minAndMaxElevationsForSector=function(e,r){if(!e)throw new n(u.logMessage(u.LEVEL_SEVERE,"TiledElevationCoverage","minAndMaxElevationsForSector","missingSector"));if(!r)throw new n(u.logMessage(u.LEVEL_SEVERE,"TiledElevationCoverage","minAndMaxElevationsForSector","missingResult"));var i=this.levels.levelForTexelSize(e.deltaLatitude()*t.DEGREES_TO_RADIANS/64);if(this.assembleTiles(i,e,!1),0===this.currentTiles.length)return!1;for(var o=!0,a=0,s=this.currentTiles.length;a<s;a++){var l=this.imageCache.entryForKey(this.currentTiles[a].tileKey);if(l&&l.hasData){var c=l.minElevation;r[0]>c&&(r[0]=c);var h=l.maxElevation;r[1]<h&&(r[1]=h)}l&&l.hasData&&!l.hasMissingData||(o=!1)}return o},d.prototype.elevationAtLocation=function(e,t){return this.coverageSector.containsLocation(e,t)?this.pointElevationForLocation(e,t):null},d.prototype.elevationsForGrid=function(e,r,i,o){if(!e)throw new n(u.logMessage(u.LEVEL_SEVERE,"TiledElevationCoverage","elevationsForGrid","missingSector"));if(!r||!i||r<1||i<1)throw new n(u.logMessage(u.LEVEL_SEVERE,"TiledElevationCoverage","elevationsForGrid","The specified number of latitudinal or longitudinal positions is less than one."));var a=e.deltaLatitude()/(r-1)*t.DEGREES_TO_RADIANS,s=this.levels.levelForTexelSize(a);return this.pixelIsPoint?this.pointElevationsForGrid(e,r,i,s,o):this.areaElevationsForGrid(e,r,i,s,o)},d.prototype.pointElevationForLocation=function(e,t){for(var n,r=this.levels.lastLevel(),i=r.tileDelta.latitude,o=r.tileDelta.longitude,a=h.computeRow(i,e),s=h.computeColumn(o,t),u=null,l=r.levelNumber;l>=0;l--){if(n=h.computeTileKey(l,a,s),u=this.imageCache.entryForKey(n)){var c=u.elevationAtLocation(e,t);return isNaN(c)?null:c}a=Math.floor(a/2),s=Math.floor(s/2)}return null},d.prototype.pointElevationsForGrid=function(e,t,n,r,i){if(this.assembleTiles(r,e,!0),0===this.currentTiles.length)return!1;this.currentTiles.sort((function(e,t){return e.level.levelNumber-t.level.levelNumber}));for(var o=0,a=this.currentTiles.length;o<a;o++){var s=this.imageCache.entryForKey(this.currentTiles[o].tileKey);s&&s.elevationsForGrid(e,t,n,i)}return!i.includes(NaN)},d.prototype.areaElevationsForGrid=function(e,t,n,r,i){var o,a,s,u,l,c,h=e.minLatitude,f=e.maxLatitude,d=e.minLongitude,p=e.maxLongitude,m=e.deltaLatitude()/(t>1?t-1:1),g=e.deltaLongitude()/(n>1?n-1:1),A=0;for(l=0,o=h;l<t;l+=1,o+=m)for(l===t-1&&(o=f),c=0,a=d;c<n;c+=1,a+=g)c===n-1&&(a=p),isNaN(i[A])&&this.coverageSector.containsLocation(o,a)&&(s=(a+180)/360,u=(o+90)/180,this.areaElevationForCoord(s,u,r.levelNumber,i,A)),A++;return!i.includes(NaN)},d.prototype.areaElevationForCoord=function(e,t,n,r,o){for(var a,s,u,l,c,h,d,p,m,g,A,v,y,b,_,w=new Float64Array(4),E=n;E>=0;E--)if(a=this.levels.level(E),s=Math.round(360*a.tileWidth/a.tileDelta.longitude),c=1-(l=1/(2*(u=Math.round(180*a.tileHeight/a.tileDelta.latitude)))),h=u-1,d=s*f.fract(e),p=u*f.clamp(t,l,c),m=f.mod(Math.floor(d-.5),s),g=f.mod(m+1,s),A=f.clamp(Math.floor(p-.5),0,h),v=f.clamp(A+1,0,h),y=f.fract(d-.5),b=f.fract(p-.5),_=E==n||0==E,this.lookupPixels(m,g,A,v,a,_,w))return!i.isNoData(w[0],w[1],w[2],w[3])&&(r[o]=(1-y)*(1-b)*w[0]+y*(1-b)*w[1]+(1-y)*b*w[2]+y*b*w[3],!0);return!1},d.prototype.lookupPixels=function(e,t,n,r,i,o,a){var s,u,l,c,h=i.levelNumber,f=i.tileWidth,d=i.tileHeight,p=Math.floor(n/d),m=Math.floor(r/d),g=Math.floor(e/f),A=Math.floor(t/f);return p==m&&p==this.cachedRow&&g==A&&g==this.cachedCol?s=u=l=c=this.cachedImage:p==m&&g==A?(u=l=c=s=this.lookupImage(h,p,g,o),this.cachedRow=p,this.cachedCol=g,this.cachedImage=s):(s=this.lookupImage(h,p,g,o),u=this.lookupImage(h,p,A,o),l=this.lookupImage(h,m,g,o),c=this.lookupImage(h,m,A,o)),!!(s&&u&&l&&c)&&(a[0]=s.pixel(e%f,n%d),a[1]=u.pixel(t%f,n%d),a[2]=l.pixel(e%f,r%d),a[3]=c.pixel(t%f,r%d),!0)},d.prototype.lookupImage=function(e,t,n,r){var i=h.computeTileKey(e,t,n),o=this.imageCache.entryForKey(i);if(null==o&&r){var a=this.tileForLevel(e,t,n);this.retrieveTileImage(a)}return o},d.prototype.assembleTiles=function(e,t,n){if(this.currentTiles=[],this.currentSector.copy(t),this.currentSector.intersection(this.coverageSector),!this.currentSector.isEmpty())for(var r=e.tileDelta.latitude,i=e.tileDelta.longitude,o=h.computeRow(r,this.currentSector.minLatitude),a=h.computeLastRow(r,this.currentSector.maxLatitude),s=h.computeColumn(i,this.currentSector.minLongitude),u=h.computeLastColumn(i,this.currentSector.maxLongitude),l=o;l<=a;l++)for(var c=s;c<=u;c++)this.addTileOrAncestor(e,l,c,n)},d.prototype.addTileOrAncestor=function(e,t,n,r){var i=this.tileForLevel(e.levelNumber,t,n);this.isTileImageInMemory(i)?this.addToCurrentTiles(i):(r&&this.retrieveTileImage(i),e.isFirstLevel()?this.currentTiles.push(i):this.addAncestor(e,t,n,r))},d.prototype.addAncestor=function(e,t,n,r){for(var i=null,o=Math.floor(t/2),a=Math.floor(n/2),s=e.levelNumber-1;s>=0;s--){if(i=this.tileForLevel(s,o,a),this.isTileImageInMemory(i))return void this.addToCurrentTiles(i);o=Math.floor(o/2),a=Math.floor(a/2)}this.addToCurrentTiles(i),r&&this.retrieveTileImage(i)},d.prototype.addToCurrentTiles=function(e){this.currentTiles.push(e)},d.prototype.tileForLevel=function(e,t,n){var r=h.computeTileKey(e,t,n),i=this.tileCache.entryForKey(r);if(i)return i;var o=this.levels.level(e),a=h.computeSector(o,t,n);return i=new h(a,o,t,n),this.tileCache.putEntry(r,i,i.size()),i},d.prototype.isTileImageInMemory=function(e){return this.imageCache.containsKey(e.tileKey)},d.prototype.resourceUrlForTile=function(e){return this.urlBuilder.urlForTile(e,this.retrievalImageFormat)},d.prototype.retrieveTileImage=function(e){if(this.currentRetrievals.indexOf(e.tileKey)<0){if(this.currentRetrievals.length>this.retrievalQueueSize)return;var t=this.resourceUrlForTile(e,this.retrievalImageFormat),n=new XMLHttpRequest,r=this;if(!t)return;n.open("GET",t,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){if(4===n.readyState){r.removeFromCurrentRetrievals(e.tileKey);var i=n.getResponseHeader("content-type");if(200===n.status)if(i===r.retrievalImageFormat||"text/plain"===i||"application/octet-stream"===i){u.log(u.LEVEL_INFO,"Elevations retrieval succeeded: "+t),r.loadElevationImage(e,n),r.absentResourceList.unmarkResourceAbsent(e.tileKey);var o=document.createEvent("Event");o.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(o)}else"text/xml"===i?(r.absentResourceList.markResourceAbsent(e.tileKey),u.log(u.LEVEL_WARNING,"Elevations retrieval failed ("+n.statusText+"): "+t+".\n "+String.fromCharCode.apply(null,new Uint8Array(n.response)))):(r.absentResourceList.markResourceAbsent(e.tileKey),u.log(u.LEVEL_WARNING,"Elevations retrieval failed: "+t+". Unexpected content type "+i));else r.absentResourceList.markResourceAbsent(e.tileKey),u.log(u.LEVEL_WARNING,"Elevations retrieval failed ("+n.statusText+"): "+t)}},n.onerror=function(){r.removeFromCurrentRetrievals(e.tileKey),r.absentResourceList.markResourceAbsent(e.tileKey),u.log(u.LEVEL_WARNING,"Elevations retrieval failed: "+t)},n.ontimeout=function(){r.removeFromCurrentRetrievals(e.tileKey),r.absentResourceList.markResourceAbsent(e.tileKey),u.log(u.LEVEL_WARNING,"Elevations retrieval timed out: "+t)},n.send(null),this.currentRetrievals.push(e.tileKey)}},d.prototype.removeFromCurrentRetrievals=function(e){var t=this.currentRetrievals.indexOf(e);t>-1&&this.currentRetrievals.splice(t,1)},d.prototype.loadElevationImage=function(e,t){var n,r=new i(e.sector,e.tileWidth,e.tileHeight);"application/bil16"===this.retrievalImageFormat?(r.imageData=new Int16Array(t.response),r.size=2*r.imageData.length):"application/bil32"===this.retrievalImageFormat?(r.imageData=new Float32Array(t.response),r.size=4*r.imageData.length):"image/tiff"===this.retrievalImageFormat&&(n=new o(t.response),r.imageData=n.getImageData(),r.size=r.imageData.length*n.metadata.bitsPerSample[0]/8),r.imageData&&(r.findMinAndMaxElevation(),this.imageCache.putEntry(e.tileKey,r,r.size),this.timestamp=Date.now())},d})),i("util/WmsUrlBuilder",["../error/ArgumentError","../util/Logger"],(function(e,t){"use strict";var n=function(n,r,i,o,a){if(!n||0===n.length)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsUrlBuilder","constructor","The WMS service address is missing."));if(!r||0===r.length)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsUrlBuilder","constructor","The WMS layer names are not specified."));this.serviceAddress=n,this.layerNames=r,this.styleNames=i||"",this.transparent=!0,this.wmsVersion=o&&o.length>0?o:"1.3.0",this.isWms130OrGreater=this.wmsVersion>="1.3.0",this.crs="EPSG:4326",this.timeString=a};return n.prototype.urlForTile=function(r,i){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsUrlBuilder","urlForTile","missingTile"));if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsUrlBuilder","urlForTile","The image format is null or undefined."));var o=r.sector,a=n.fixGetMapString(this.serviceAddress);return a.search(/service=wms/i)<0&&(a+="service=WMS"),a=(a=(a=(a=(a=(a=(a=(a+="&request=GetMap")+"&version="+this.wmsVersion)+"&transparent="+(this.transparent?"TRUE":"FALSE"))+"&layers="+this.layerNames)+"&styles="+this.styleNames)+"&format="+i)+"&width="+r.tileWidth)+"&height="+r.tileHeight,this.timeString&&(a=a+"&time="+this.timeString),this.isWms130OrGreater?(a=a+"&crs="+this.crs,a+="&bbox=",a="CRS:84"===this.crs?(a=a+o.minLongitude+","+o.minLatitude+",")+o.maxLongitude+","+o.maxLatitude:(a=a+o.minLatitude+","+o.minLongitude+",")+o.maxLatitude+","+o.maxLongitude):(a=a+"&srs="+this.crs,a=(a=(a+="&bbox=")+o.minLongitude+","+o.minLatitude+",")+o.maxLongitude+","+o.maxLatitude),a.replace(" ","%20")},n.fixGetMapString=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsUrlBuilder","fixGetMapString","The specified service address is null or undefined."));var r=n.indexOf("?");return r<0?n+="?":r!==n.length-1&&(r=n.search(/&$/))<0&&(n+="&"),n},n})),i("globe/AsterV2ElevationCoverage",["../geom/Location","../geom/Sector","../globe/TiledElevationCoverage","../util/WmsUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(){n.call(this,{coverageSector:new t(-83.0001,83.0001,-180,180),resolution:.000277777777778,retrievalImageFormat:"application/bil16",minElevation:-11e3,maxElevation:8850,urlBuilder:new r("https://worldwind26.arc.nasa.gov/elev","aster_v2","","1.3.0")}),this.displayName="ASTER V2 Earth Elevation Coverage"};return i.prototype=Object.create(n.prototype),i})),i("shaders/AtmosphereProgram",["../error/ArgumentError","../shaders/GpuProgram","../util/Logger"],(function(e,t,n){"use strict";var r=function(e,n,r,i){t.call(this,e,n,r,i),this.FRAGMODE_SKY=1,this.FRAGMODE_GROUND_PRIMARY=2,this.FRAGMODE_GROUND_SECONDARY=3,this.FRAGMODE_GROUND_PRIMARY_TEX_BLEND=4,this.altitude=16e4,this.rayleighScaleDepth=.25,this.fragModeLocation=this.uniformLocation(e,"fragMode"),this.mvpMatrixLocation=this.uniformLocation(e,"mvpMatrix"),this.texCoordMatrixLocation=this.uniformLocation(e,"texCoordMatrix"),this.vertexOriginLocation=this.uniformLocation(e,"vertexOrigin"),this.eyePointLocation=this.uniformLocation(e,"eyePoint"),this.eyeMagnitudeLocation=this.uniformLocation(e,"eyeMagnitude"),this.eyeMagnitude2Location=this.uniformLocation(e,"eyeMagnitude2"),this.lightDirectionLocation=this.uniformLocation(e,"lightDirection"),this.atmosphereRadiusLocation=this.uniformLocation(e,"atmosphereRadius"),this.atmosphereRadius2Location=this.uniformLocation(e,"atmosphereRadius2"),this.globeRadiusLocation=this.uniformLocation(e,"globeRadius"),this.scaleLocation=this.uniformLocation(e,"scale"),this.scaleDepthLocation=this.uniformLocation(e,"scaleDepth"),this.scaleOverScaleDepthLocation=this.uniformLocation(e,"scaleOverScaleDepth"),this.scratchArray9=new Float32Array(9)};return r.key="WorldWindGpuAtmosphereProgram",(r.prototype=Object.create(t.prototype)).getAltitude=function(){return this.altitude},r.prototype.loadFragMode=function(t,r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadFragMode","missingFragMode"));t.uniform1i(this.fragModeLocation,r)},r.prototype.loadModelviewProjection=function(t,r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(t,r,this.mvpMatrixLocation)},r.prototype.loadVertexOrigin=function(t,r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadVertexOrigin","missingVector"));t.uniform3f(this.vertexOriginLocation,r[0],r[1],r[2])},r.prototype.loadLightDirection=function(t,r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadLightDirection","missingVector"));t.uniform3f(this.lightDirectionLocation,r[0],r[1],r[2])},r.prototype.loadEyePoint=function(t,r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadEyePoint","missingVector"));t.uniform3f(this.eyePointLocation,r[0],r[1],r[2]),t.uniform1f(this.eyeMagnitudeLocation,r.magnitude()),t.uniform1f(this.eyeMagnitude2Location,r.magnitudeSquared())},r.prototype.loadGlobeRadius=function(t,r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadGlobeRadius","missingGlobeRadius"));var i=r,o=i+this.altitude;t.uniform1f(this.globeRadiusLocation,i),t.uniform1f(this.atmosphereRadiusLocation,o),t.uniform1f(this.atmosphereRadius2Location,o*o)},r.prototype.setScale=function(e){e.uniform1f(this.scaleLocation,1/this.getAltitude()),e.uniform1f(this.scaleDepthLocation,this.rayleighScaleDepth),e.uniform1f(this.scaleOverScaleDepthLocation,1/this.getAltitude()/this.rayleighScaleDepth)},r.prototype.loadTexMatrix=function(t,r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadTexMatrix","missingMatrix"));r.columnMajorComponents(this.scratchArray9),t.uniformMatrix3fv(this.texCoordMatrixLocation,!1,this.scratchArray9)},r})),i("shaders/GroundProgram",["../shaders/AtmosphereProgram"],(function(e){"use strict";var t=function(t){e.call(this,t,"precision mediump int;\nconst int FRAGMODE_GROUND_PRIMARY_TEX_BLEND = 4;\nconst int SAMPLE_COUNT = 2;\nconst float SAMPLES = 2.0;\nconst float PI = 3.141592653589;\nconst float Kr = 0.0025;\nconst float Kr4PI = Kr * 4.0 * PI;\nconst float Km = 0.0015;\nconst float Km4PI = Km * 4.0 * PI;\nconst float ESun = 15.0;\nconst float KmESun = Km * ESun;\nconst float KrESun = Kr * ESun;\nconst vec3 invWavelength = vec3(5.60204474633241, 9.473284437923038, 19.643802610477206);\nconst float rayleighScaleDepth = 0.25;\nuniform int fragMode;\nuniform mat4 mvpMatrix;\nuniform mat3 texCoordMatrix;\nuniform vec3 vertexOrigin;\nuniform vec3 eyePoint;\nuniform float eyeMagnitude;\nuniform float eyeMagnitude2;\nuniform vec3 lightDirection;\nuniform float atmosphereRadius;\nuniform float atmosphereRadius2;\nuniform float globeRadius;\nuniform float scale;\nuniform float scaleDepth;\nuniform float scaleOverScaleDepth;\nattribute vec4 vertexPoint;\nattribute vec2 vertexTexCoord;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec2 texCoord;\nfloat scaleFunc(float cos) {\n    float x = 1.0 - cos;\n    return scaleDepth * exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n}\nvoid sampleGround() {\n    vec3 point = vertexPoint.xyz + vertexOrigin;\n    vec3 ray = point - eyePoint;\n    float far = length(ray);\n    ray /= far;\n    vec3 start;\n    if (eyeMagnitude < atmosphereRadius) {\n        start = eyePoint;\n    } else {\n        float B = 2.0 * dot(eyePoint, ray);\n        float C = eyeMagnitude2 - atmosphereRadius2;\n        float det = max(0.0, B*B - 4.0 * C);\n        float near = 0.5 * (-B - sqrt(det));\n        start = eyePoint + ray * near;\n        far -= near;\n}\n    float depth = exp((globeRadius - atmosphereRadius) / scaleDepth);\n    float eyeAngle = dot(-ray, point) / length(point);\n    float lightAngle = dot(lightDirection, point) / length(point);\n    float eyeScale = scaleFunc(eyeAngle);\n    float lightScale = scaleFunc(lightAngle);\n    float eyeOffset = depth*eyeScale;\n    float temp = (lightScale + eyeScale);\n    float sampleLength = far / SAMPLES;\n    float scaledLength = sampleLength * scale;\n    vec3 sampleRay = ray * sampleLength;\n    vec3 samplePoint = start + sampleRay * 0.5;\n    vec3 frontColor = vec3(0.0, 0.0, 0.0);\n    vec3 attenuate = vec3(0.0, 0.0, 0.0);\n    for(int i=0; i<SAMPLE_COUNT; i++)\n    {\n        float height = length(samplePoint);\n        float depth = exp(scaleOverScaleDepth * (globeRadius - height));\n        float scatter = depth*temp - eyeOffset;\n        attenuate = exp(-scatter * (invWavelength * Kr4PI + Km4PI));\n        frontColor += attenuate * (depth * scaledLength);\n        samplePoint += sampleRay;\n    }\n    primaryColor = frontColor * (invWavelength * KrESun + KmESun);\n    secondaryColor = attenuate;\n}\nvoid main()\n {\n    sampleGround();\n    gl_Position = mvpMatrix * vertexPoint;\n    if (fragMode == FRAGMODE_GROUND_PRIMARY_TEX_BLEND) {\n        texCoord = (texCoordMatrix * vec3(vertexTexCoord, 1.0)).st;\n    }\n}","precision mediump float;\nprecision mediump int;\nconst int FRAGMODE_GROUND_PRIMARY = 2;\nconst int FRAGMODE_GROUND_SECONDARY = 3;\nconst int FRAGMODE_GROUND_PRIMARY_TEX_BLEND = 4;\nuniform int fragMode;\nuniform sampler2D texSampler;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec2 texCoord;\nvoid main (void)\n{\n    if (fragMode == FRAGMODE_GROUND_PRIMARY) {\n        gl_FragColor = vec4(primaryColor, 1.0);\n    } else if (fragMode == FRAGMODE_GROUND_SECONDARY) {\n        gl_FragColor = vec4(secondaryColor, 1.0);\n    } else if (fragMode == FRAGMODE_GROUND_PRIMARY_TEX_BLEND) {\n        vec4 texColor = texture2D(texSampler, texCoord);\n        gl_FragColor = vec4(primaryColor + texColor.rgb * (1.0 - secondaryColor), 1.0);\n    }\n}",["vertexPoint","vertexTexCoord"])};return t.key="WorldWindGroundProgram",t.prototype=Object.create(e.prototype),t})),i("layer/Layer",["../util/Logger"],(function(e){"use strict";var t=function(e){this.displayName=e||"Layer",this.enabled=!0,this.pickEnabled=!0,this.opacity=1,this.minActiveAltitude=-Number.MAX_VALUE,this.maxActiveAltitude=Number.MAX_VALUE,this.inCurrentFrame=!1,this.time=null};return t.prototype.refresh=function(){},t.prototype.render=function(e){this.inCurrentFrame=!1,this.enabled&&(e.pickingMode&&!this.pickEnabled||this.withinActiveAltitudes(e)&&this.isLayerInView(e)&&this.doRender(e))},t.prototype.doRender=function(e){},t.prototype.withinActiveAltitudes=function(e){var t=e.eyePosition;return!!t&&t.altitude>=this.minActiveAltitude&&t.altitude<=this.maxActiveAltitude},t.prototype.isLayerInView=function(e){return!0},t})),i("geom/Matrix3",["../error/ArgumentError","../util/Logger"],(function(e,t){"use strict";var n=function(e,t,n,r,i,o,a,s,u){this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u};return n.prototype=new Float64Array(9),n.fromIdentity=function(){return new n(1,0,0,0,1,0,0,0,1)},n.prototype.setToUnitYFlip=function(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=-1,this[5]=1,this[6]=0,this[7]=0,this[8]=1,this},n.prototype.multiplyMatrix=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Matrix3","multiplyMatrix","missingMatrix"));var r,i,o,a=this,s=n;return r=a[0],i=a[1],o=a[2],a[0]=r*s[0]+i*s[3]+o*s[6],a[1]=r*s[1]+i*s[4]+o*s[7],a[2]=r*s[2]+i*s[5]+o*s[8],r=a[3],i=a[4],o=a[5],a[3]=r*s[0]+i*s[3]+o*s[6],a[4]=r*s[1]+i*s[4]+o*s[7],a[5]=r*s[2]+i*s[5]+o*s[8],r=a[6],i=a[7],o=a[8],a[6]=r*s[0]+i*s[3]+o*s[6],a[7]=r*s[1]+i*s[4]+o*s[7],a[8]=r*s[2]+i*s[5]+o*s[8],this},n.prototype.multiplyByTileTransform=function(e,t){var n=e.deltaLatitude(),r=e.deltaLongitude(),i=t.deltaLatitude(),o=t.deltaLongitude(),a=r/o,s=n/i,u=(e.minLongitude-t.minLongitude)/o,l=(e.minLatitude-t.minLatitude)/i,c=this;return c[2]+=c[0]*u+c[1]*l,c[5]+=c[3]*u+c[4]*l,c[8]+=c[6]*u+c[6]*l,c[0]*=a,c[1]*=s,c[3]*=a,c[4]*=s,c[6]*=a,c[7]*=s,this},n.prototype.columnMajorComponents=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Matrix3","columnMajorComponents","missingResult"));return n[0]=this[0],n[1]=this[3],n[2]=this[6],n[3]=this[1],n[4]=this[4],n[5]=this[7],n[6]=this[2],n[7]=this[5],n[8]=this[8],n},n})),i("shaders/SkyProgram",["../shaders/AtmosphereProgram"],(function(e){"use strict";var t=function(t){e.call(this,t,"precision mediump int;\nconst int SAMPLE_COUNT = 2;\nconst float SAMPLES = 2.0;\nconst float PI = 3.141592653589;\nconst float Kr = 0.0025;\nconst float Kr4PI = Kr * 4.0 * PI;\nconst float Km = 0.0015;\nconst float Km4PI = Km * 4.0 * PI;\nconst float ESun = 15.0;\nconst float KmESun = Km * ESun;\nconst float KrESun = Kr * ESun;\nconst vec3 invWavelength = vec3(5.60204474633241, 9.473284437923038, 19.643802610477206);\nconst float rayleighScaleDepth = 0.25;\nuniform mat4 mvpMatrix;\nuniform vec3 vertexOrigin;\nuniform vec3 eyePoint;\nuniform float eyeMagnitude;\nuniform float eyeMagnitude2;\nuniform mediump vec3 lightDirection;\nuniform float atmosphereRadius;\nuniform float atmosphereRadius2;\nuniform float globeRadius;\nuniform float scale;\nuniform float scaleDepth;\nuniform float scaleOverScaleDepth;\nattribute vec4 vertexPoint;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec3 direction;\nfloat scaleFunc(float cos)\n{\n    float x = 1.0 - cos;\n    return scaleDepth * exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n}\nvoid sampleSky() {\n    vec3 point = vertexPoint.xyz + vertexOrigin;\n    vec3 ray = point - eyePoint;\n    float far = length(ray);\n    ray /= far;\n    vec3 start;\n    float startOffset;\n    if (eyeMagnitude < atmosphereRadius) {\n        start = eyePoint;\n        float height = length(start);\n        float depth = exp(scaleOverScaleDepth * (globeRadius - eyeMagnitude));\n        float startAngle = dot(ray, start) / height;\n        startOffset = depth*scaleFunc(startAngle);\n    } else {\n        float B = 2.0 * dot(eyePoint, ray);\n        float C = eyeMagnitude2 - atmosphereRadius2;\n        float det = max(0.0, B*B - 4.0 * C);\n        float near = 0.5 * (-B - sqrt(det));\n        start = eyePoint + ray * near;\n        far -= near;\n        float startAngle = dot(ray, start) / atmosphereRadius;\n        float startDepth = exp(-1.0 / scaleDepth);\n        startOffset = startDepth*scaleFunc(startAngle);\n    }\n    float sampleLength = far / SAMPLES;\n    float scaledLength = sampleLength * scale;\n    vec3 sampleRay = ray * sampleLength;\n    vec3 samplePoint = start + sampleRay * 0.5;\n    vec3 frontColor = vec3(0.0, 0.0, 0.0);\n    for(int i=0; i<SAMPLE_COUNT; i++)\n    {\n       float height = length(samplePoint);\n       float depth = exp(scaleOverScaleDepth * (globeRadius - height));\n       float lightAngle = dot(lightDirection, samplePoint) / height;\n       float cameraAngle = dot(ray, samplePoint) / height;\n       float scatter = (startOffset + depth*(scaleFunc(lightAngle) - scaleFunc(cameraAngle)));\n       vec3 attenuate = exp(-scatter * (invWavelength * Kr4PI + Km4PI));\n       frontColor += attenuate * (depth * scaledLength);\n       samplePoint += sampleRay;\n    }\n    primaryColor = frontColor * (invWavelength * KrESun);\n    secondaryColor = frontColor * KmESun;\n    direction = eyePoint - point;\n}\nvoid main()\n{\n    sampleSky();\n    gl_Position = mvpMatrix * vertexPoint;\n}","#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nconst float g = -0.95;\nconst float g2 = g * g;\nuniform mediump vec3 lightDirection;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec3 direction;\nvoid main (void)\n{\n    float cos = dot(lightDirection, direction) / length(direction);\n    float rayleighPhase = 0.75 * (1.0 + cos * cos);\n    float miePhase = 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + cos*cos) /         pow(1.0 + g2 - 2.0*g*cos, 1.5);\n    const float exposure = 2.0;\n    vec3 color = primaryColor * rayleighPhase + secondaryColor * miePhase;\n    color = vec3(1.0) - exp(-exposure * color);\n    gl_FragColor = vec4(color, color.b);\n}",["vertexPoint"])};return t.key="WorldWindSkyProgram",t.prototype=Object.create(e.prototype),t})),i("util/SunPosition",["../geom/Angle","../error/ArgumentError","./Logger","./WWMath"],(function(e,t,n,r){"use strict";return{getAsGeographicLocation:function(e){if(e instanceof Date==0)throw new t(n.logMessage(n.LEVEL_SEVERE,"SunPosition","getAsGeographicLocation","missingDate"));var r=this.getAsCelestialLocation(e);return this.celestialToGeographic(r,e)},getAsCelestialLocation:function(i){if(i instanceof Date==0)throw new t(n.logMessage(n.LEVEL_SEVERE,"SunPosition","getAsCelestialLocation","missingDate"));var o=this.computeJulianDate(i)-2451545,a=r.normalizeAngle360(280.46+.9856474*o),s=r.normalizeAngle360(357.528+.9856003*o)*e.DEGREES_TO_RADIANS,u=a+1.915*Math.sin(s)+.02*Math.sin(2*s),l=u*e.DEGREES_TO_RADIANS,c=(23.439-4e-7*o)*e.DEGREES_TO_RADIANS,h=Math.asin(Math.sin(c)*Math.sin(l))*e.RADIANS_TO_DEGREES,f=Math.atan(Math.cos(c)*Math.tan(l))*e.RADIANS_TO_DEGREES;return u>=90&&u<270&&(f+=180),{declination:h,rightAscension:f=r.normalizeAngle360(f)}},celestialToGeographic:function(i,o){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"SunPosition","celestialToGeographic","missingCelestialLocation"));if(o instanceof Date==0)throw new t(n.logMessage(n.LEVEL_SEVERE,"SunPosition","celestialToGeographic","missingDate"));var a=this.computeJulianDate(o)-2451545,s=r.normalizeAngle360(280.46061837+360.98564736629*a),u=r.normalizeAngle360(s-i.rightAscension),l=e.normalizedDegreesLongitude(-u);return{latitude:i.declination,longitude:l}},computeJulianDate:function(e){if(e instanceof Date==0)throw new t(n.logMessage(n.LEVEL_SEVERE,"SunPosition","computeJulianDate","missingDate"));var r=e.getUTCFullYear(),i=e.getUTCMonth()+1,o=e.getUTCDate(),a=(e.getUTCHours()+e.getUTCMinutes()/60+e.getUTCSeconds()/3600)/24;i<=2&&(r-=1,i+=12);var s=Math.floor(r/100),u=2-s+Math.floor(s/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(i+1))+o+u-1524.5+a}}})),i("layer/AtmosphereLayer",["../error/ArgumentError","../shaders/GroundProgram","../layer/Layer","../util/Logger","../geom/Matrix","../geom/Matrix3","../geom/Sector","../shaders/SkyProgram","../util/SunPosition","../geom/Vec3","../util/WWUtil"],(function(e,t,n,r,i,o,a,s,u,l,c){"use strict";var h=function(e){n.call(this,"Atmosphere"),this.pickEnabled=!1,this._nightImageSource=e||WorldWind.configuration.baseUrl+"images/dnb_land_ocean_ice_2012.png",this._activeLightDirection=new l(0,0,0),this._fullSphereSector=a.FULL_SPHERE,this._skyData={},this._skyWidth=128,this._skyHeight=128,this._numIndices=0,this._texMatrix=o.fromIdentity(),this._activeTexture=null};return h.prototype=Object.create(n.prototype),Object.defineProperties(h.prototype,{nightImageSource:{get:function(){return this._nightImageSource},set:function(e){this._nightImageSource=e}}}),h.prototype.doRender=function(e){e.globe.is2D()||(this.determineLightDirection(e),this.drawSky(e),this.drawGround(e))},h.prototype.applySkyVertices=function(e){var t,n,r=e.currentGlContext,i=e.currentProgram,o=this._skyData;o.verticesVboCacheKey||(o.verticesVboCacheKey=e.gpuResourceCache.generateCacheKey()),(n=e.gpuResourceCache.resourceForKey(o.verticesVboCacheKey))?(r.bindBuffer(r.ARRAY_BUFFER,n),r.vertexAttribPointer(0,3,r.FLOAT,!1,0,0)):(t=this.assembleVertexPoints(e,this._skyHeight,this._skyWidth,i.getAltitude()),n=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,n),r.bufferData(r.ARRAY_BUFFER,t,r.STATIC_DRAW),r.vertexAttribPointer(0,3,r.FLOAT,!1,0,0),e.gpuResourceCache.putResource(o.verticesVboCacheKey,n,4*t.length),e.frameStatistics.incrementVboLoadCount(1))},h.prototype.applySkyIndices=function(e){var t,n,r=e.currentGlContext,i=this._skyData;i.indicesVboCacheKey||(i.indicesVboCacheKey=e.gpuResourceCache.generateCacheKey()),(n=e.gpuResourceCache.resourceForKey(i.indicesVboCacheKey))?r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n):(t=this.assembleTriStripIndices(this._skyWidth,this._skyHeight),n=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t,r.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),e.gpuResourceCache.putResource(i.indicesVboCacheKey,n,2*t.length))},h.prototype.drawSky=function(e){var t=e.currentGlContext,n=e.findAndBindProgram(s);n.loadGlobeRadius(t,e.globe.equatorialRadius),n.loadEyePoint(t,e.eyePoint),n.loadVertexOrigin(t,l.ZERO),n.loadModelviewProjection(t,e.modelviewProjection),n.loadLightDirection(t,this._activeLightDirection),n.setScale(t),this.applySkyVertices(e),this.applySkyIndices(e),t.depthMask(!1),t.frontFace(t.CW),t.enableVertexAttribArray(0),t.drawElements(t.TRIANGLE_STRIP,this._numIndices,t.UNSIGNED_SHORT,0),t.depthMask(!0),t.frontFace(t.CCW),t.disableVertexAttribArray(0)},h.prototype.drawGround=function(e){var n,r=e.currentGlContext,i=e.findAndBindProgram(t),o=e.terrain;i.loadGlobeRadius(r,e.globe.equatorialRadius),i.loadEyePoint(r,e.eyePoint),i.loadLightDirection(r,this._activeLightDirection),i.setScale(r),this.nightImageSource&&null!==this.time&&(this._activeTexture=e.gpuResourceCache.resourceForKey(this.nightImageSource),this._activeTexture||(this._activeTexture=e.gpuResourceCache.retrieveTexture(r,this.nightImageSource)),n=this._activeTexture&&this._activeTexture.bind(e)),o.beginRendering(e);for(var a=0,s=o.surfaceGeometry.length;a<s;a++){var u=o.surfaceGeometry[a],l=u.referencePoint;i.loadVertexOrigin(r,l),n&&(this._texMatrix.setToUnitYFlip(),this._texMatrix.multiplyByTileTransform(u.sector,this._fullSphereSector),i.loadTexMatrix(r,this._texMatrix)),o.beginRenderingTile(e,u),i.loadFragMode(r,i.FRAGMODE_GROUND_SECONDARY),r.blendFunc(r.DST_COLOR,r.ZERO),o.renderTile(e,u);var c=n?i.FRAGMODE_GROUND_PRIMARY_TEX_BLEND:i.FRAGMODE_GROUND_PRIMARY;i.loadFragMode(r,c),r.blendFunc(r.ONE,r.ONE),o.renderTile(e,u),o.endRenderingTile(e,u)}o.endRendering(e),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),this._activeTexture=null},h.prototype.assembleVertexPoints=function(e,t,n,r){var i=t*n,o=new Array(i);c.fillArray(o,r);var a=new Float32Array(3*i);return e.globe.computePointsForGrid(this._fullSphereSector,t,n,o,l.ZERO,a)},h.prototype.assembleTriStripIndices=function(e,t){for(var n=[],r=0,i=0;i<e-1;i++){for(var o=0;o<t;o++)r=o+i*t,n.push(r+t),n.push(r);i<e-2&&(n.push(r),n.push((i+2)*t))}return this._numIndices=n.length,new Uint16Array(n)},h.prototype.determineLightDirection=function(e){if(null!==this.time){var t=u.getAsGeographicLocation(this.time);e.globe.computePointFromLocation(t.latitude,t.longitude,this._activeLightDirection)}else this._activeLightDirection.copy(e.eyePoint);this._activeLightDirection.normalize()},h})),i("util/BasicTimeSequence",["../error/ArgumentError","../util/Logger"],(function(e,t){"use strict";var n=function(n){if(!n&&n.length<2)throw new e(t.logMessage(t.LEVEL_SEVERE,"BasicTimeSequence","constructor","missingDates"));this.dates=n,this.currentIndex=0,this.currentTime=n[0]};return Object.defineProperties(n.prototype,{scaleForCurrentTime:{get:function(){return this.currentTime?this.currentIndex/this.dates.length:1}}}),n.prototype.next=function(){return this.currentIndex>=this.dates.length-1?null:(this.currentIndex++,this.currentTime=this.dates[this.currentIndex],this.currentTime)},n.prototype.previous=function(){return this.currentIndex<=0?null:(this.currentIndex--,this.currentTime=this.dates[this.currentIndex],this.currentTime)},n.prototype.reset=function(){this.currentIndex=-1,this.currentTime=null},n.prototype.getTimeForScale=function(e){return this.currentIndex=e<=0?0:e>=1?this.dates.length-1:Math.floor(this.dates.length*e),this.currentTime=this.dates[this.currentIndex],this.currentTime},n})),i("gesture/Touch",[],(function(){"use strict";var e=function(e,t,n){this.identifier=e,this._clientX=t,this._clientY=n,this._clientStartX=t,this._clientStartY=n};return Object.defineProperties(e.prototype,{clientX:{get:function(){return this._clientX},set:function(e){this._clientX=e}},clientY:{get:function(){return this._clientY},set:function(e){this._clientY=e}},translationX:{get:function(){return this._clientX-this._clientStartX},set:function(e){this._clientStartX=this._clientX-e}},translationY:{get:function(){return this._clientY-this._clientStartY},set:function(e){this._clientStartY=this._clientY-e}}}),e})),i("gesture/GestureRecognizer",["../error/ArgumentError","../util/Logger","../gesture/Touch"],(function(e,t,n){"use strict";var r=function n(r,i){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"GestureRecognizer","constructor","missingTarget"));this.target=r,this.enabled=!0,this._state=WorldWind.POSSIBLE,this._nextState=null,this._clientX=0,this._clientY=0,this._clientStartX=0,this._clientStartY=0,this._translationX=0,this._translationY=0,this._translationWeight=.4,this._mouseButtonMask=0,this._touches=[],this._touchCentroidShiftX=0,this._touchCentroidShiftY=0,this._gestureCallbacks=[],this._canRecognizeWith=[],this._requiresFailureOf=[],this._requiredToFailBy=[],i&&this._gestureCallbacks.push(i),this.listenerList=[],n.allRecognizers.push(this)};return r.allRecognizers=[],Object.defineProperties(r.prototype,{state:{get:function(){return this._state},set:function(e){this.transitionToState(e)}},clientX:{get:function(){return this._clientX},set:function(e){this._clientX=e}},clientY:{get:function(){return this._clientY},set:function(e){this._clientY=e}},translationX:{get:function(){return this._translationX},set:function(e){this._translationX=e,this._clientStartX=this._clientX,this._touchCentroidShiftX=0}},translationY:{get:function(){return this._translationY},set:function(e){this._translationY=e,this._clientStartY=this._clientY,this._touchCentroidShiftY=0}},mouseButtonMask:{get:function(){return this._mouseButtonMask}},touchCount:{get:function(){return this._touches.length}},gestureCallbacks:{get:function(){return this._gestureCallbacks}}}),r.prototype.touch=function(n){if(n<0||n>=this._touches.length)throw new e(t.logMessage(t.LEVEL_SEVERE,"GestureRecognizer","touch","indexOutOfRange"));return this._touches[n]},r.prototype.recognizeSimultaneouslyWith=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"GestureRecognizer","recognizeSimultaneouslyWith","The specified gesture recognizer is null or undefined."));-1==this._canRecognizeWith.indexOf(n)&&(this._canRecognizeWith.push(n),n._canRecognizeWith.push(this))},r.prototype.canRecognizeSimultaneouslyWith=function(e){return-1!=this._canRecognizeWith.indexOf(e)},r.prototype.requireRecognizerToFail=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"GestureRecognizer","requireRecognizerToFail","The specified gesture recognizer is null or undefined"));-1==this._requiresFailureOf.indexOf(n)&&(this._requiresFailureOf.push(n),n._requiredToFailBy.push(this))},r.prototype.requiresRecognizerToFail=function(e){return-1!=this._requiresFailureOf.indexOf(e)},r.prototype.requiredToFailByRecognizer=function(e){return-1!=this._requiredToFailBy.indexOf(e)},r.prototype.reset=function(){this._state=WorldWind.POSSIBLE,this._nextState=null,this._clientX=0,this._clientY=0,this._clientStartX=0,this._clientStartY=0,this._translationX=0,this._translationY=0,this._mouseButtonMask=0,this._touches=[],this._touchCentroidShiftX=0,this._touchCentroidShiftY=0},r.prototype.prepareToRecognize=function(){},r.prototype.mouseDown=function(e){},r.prototype.mouseMove=function(e){},r.prototype.mouseUp=function(e){},r.prototype.touchStart=function(e){},r.prototype.touchMove=function(e){},r.prototype.touchCancel=function(e){},r.prototype.touchEnd=function(e){},r.prototype.transitionToState=function(e){this._nextState=null,e===WorldWind.FAILED?(this._state=e,this.updateRecognizersWaitingForFailure(),this.resetIfEventsEnded()):e===WorldWind.RECOGNIZED?(this.tryToRecognize(e),this._state===e&&(this.prepareToRecognize(),this.notifyListeners(),this.callGestureCallbacks(),this.resetIfEventsEnded())):e===WorldWind.BEGAN?(this.tryToRecognize(e),this._state===e&&(this.prepareToRecognize(),this.notifyListeners(),this.callGestureCallbacks())):e===WorldWind.CHANGED?(this._state=e,this.notifyListeners(),this.callGestureCallbacks()):(e===WorldWind.CANCELLED||e===WorldWind.ENDED)&&(this._state=e,this.notifyListeners(),this.callGestureCallbacks(),this.resetIfEventsEnded())},r.prototype.updateRecognizersWaitingForFailure=function(){for(var e=0,t=this._requiredToFailBy.length;e<t;e++){var n=this._requiredToFailBy[e];null!=n._nextState&&n.transitionToState(n._nextState)}},r.prototype.tryToRecognize=function(e){if(r.allRecognizers.some(this.canBePreventedByRecognizer,this))this.transitionToState(WorldWind.FAILED);else if(r.allRecognizers.some(this.isWaitingForRecognizerToFail,this))this._nextState=e;else{for(var t=r.allRecognizers.filter(this.canPreventRecognizer,this),n=0,i=t.length;n<i;n++)t[n].transitionToState(WorldWind.FAILED);this._state=e}},r.prototype.canPreventRecognizer=function(e){return this!=e&&this.target==e.target&&e.state==WorldWind.POSSIBLE&&(this.requiredToFailByRecognizer(e)||!this.canRecognizeSimultaneouslyWith(e))},r.prototype.canBePreventedByRecognizer=function(e){return this!=e&&this.target==e.target&&e.state==WorldWind.RECOGNIZED&&(this.requiresRecognizerToFail(e)||!this.canRecognizeSimultaneouslyWith(e))},r.prototype.isWaitingForRecognizerToFail=function(e){return this!=e&&this.target==e.target&&e.state==WorldWind.POSSIBLE&&this.requiresRecognizerToFail(e)},r.prototype.addListener=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"GestureRecognizer","addListener","missingListener"));this.listenerList.push(n)},r.prototype.removeListener=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"GestureRecognizer","removeListener","missingListener"));var r=this.listenerList.indexOf(n);-1!==r&&this.listenerList.splice(r,1)},r.prototype.notifyListeners=function(){for(var e=0;e<this.listenerList.length;e++)this.listenerList[e].gestureStateChanged(this)},r.prototype.callGestureCallbacks=function(){for(var e=0,t=this._gestureCallbacks.length;e<t;e++)this._gestureCallbacks[e](this)},r.prototype.onGestureEvent=function(e){var n,r;if(this.enabled&&(!e.defaultPrevented||this.state!==WorldWind.POSSIBLE))try{if("mousedown"===e.type)this.handleMouseDown(e);else if("mousemove"===e.type)this.handleMouseMove(e);else if("mouseup"===e.type)this.handleMouseUp(e);else if("touchstart"===e.type)for(n=0,r=e.changedTouches.length;n<r;n++)this.handleTouchStart(e.changedTouches.item(n));else if("touchmove"===e.type)for(n=0,r=e.changedTouches.length;n<r;n++)this.handleTouchMove(e.changedTouches.item(n));else if("touchcancel"===e.type)for(n=0,r=e.changedTouches.length;n<r;n++)this.handleTouchCancel(e.changedTouches.item(n));else if("touchend"===e.type)for(n=0,r=e.changedTouches.length;n<r;n++)this.handleTouchEnd(e.changedTouches.item(n));else"pointerdown"===e.type&&"mouse"===e.pointerType?this.handleMouseDown(e):"pointermove"===e.type&&"mouse"===e.pointerType?this.handleMouseMove(e):"pointercancel"===e.type&&"mouse"===e.pointerType||("pointerup"===e.type&&"mouse"===e.pointerType?this.handleMouseUp(e):"pointerdown"===e.type&&"touch"===e.pointerType?this.handleTouchStart(e):"pointermove"===e.type&&"touch"===e.pointerType?this.handleTouchMove(e):"pointercancel"===e.type&&"touch"===e.pointerType?this.handleTouchCancel(e):"pointerup"===e.type&&"touch"===e.pointerType?this.handleTouchEnd(e):t.logMessage(t.LEVEL_INFO,"GestureRecognizer","handleEvent","Unrecognized event type: "+e.type))}catch(e){t.logMessage(t.LEVEL_SEVERE,"GestureRecognizer","handleEvent","Error handling event.\n"+e.toString())}},r.prototype.handleMouseDown=function(e){if(!("mousedown"==e.type&&this._touches.length>0)){var t=1<<e.button;t&0!=this._mouseButtonMask||(0==this._mouseButtonMask&&(this._clientX=e.clientX,this._clientY=e.clientY,this._clientStartX=e.clientX,this._clientStartY=e.clientY,this._translationX=0,this._translationY=0),this._mouseButtonMask|=t,this.mouseDown(e))}},r.prototype.handleMouseMove=function(e){if(0!=this._mouseButtonMask&&(this._clientX!=e.clientX||this._clientY!=e._clientY)){var t=e.clientX-this._clientStartX,n=e.clientY-this._clientStartY,r=this._translationWeight;this._clientX=e.clientX,this._clientY=e.clientY,this._translationX=this._translationX*(1-r)+t*r,this._translationY=this._translationY*(1-r)+n*r,this.mouseMove(e)}},r.prototype.handleMouseUp=function(e){var t=1<<e.button;t&0==this._mouseButtonMask||(this._mouseButtonMask&=~t,this.mouseUp(e),0==this._mouseButtonMask&&this.resetIfEventsEnded())},r.prototype.handleTouchStart=function(e){var t=new n(e.identifier||e.pointerId,e.clientX,e.clientY);this._touches.push(t),1==this._touches.length?(this._clientX=e.clientX,this._clientY=e.clientY,this._clientStartX=e.clientX,this._clientStartY=e.clientY,this._translationX=0,this._translationY=0,this._touchCentroidShiftX=0,this._touchCentroidShiftY=0):this.touchesAddedOrRemoved(),this.touchStart(t)},r.prototype.handleTouchMove=function(e){var t=this.indexOfTouchWithId(e.identifier||e.pointerId);if(-1!=t){var n=this._touches[t];if(n.clientX!=e.clientX||n.clientY!=e.clientY){n.clientX=e.clientX,n.clientY=e.clientY;var r=this.touchCentroid(),i=r.clientX-this._clientStartX+this._touchCentroidShiftX,o=r.clientY-this._clientStartY+this._touchCentroidShiftY,a=this._translationWeight;this._clientX=r.clientX,this._clientY=r.clientY,this._translationX=this._translationX*(1-a)+i*a,this._translationY=this._translationY*(1-a)+o*a,this.touchMove(n)}}},r.prototype.handleTouchCancel=function(e){var t=this.indexOfTouchWithId(e.identifier||e.pointerId);if(-1!=t){var n=this._touches[t];this._touches.splice(t,1),this.touchesAddedOrRemoved(),this.touchCancel(n),this.resetIfEventsEnded()}},r.prototype.handleTouchEnd=function(e){var t=this.indexOfTouchWithId(e.identifier||e.pointerId);if(-1!=t){var n=this._touches[t];this._touches.splice(t,1),this.touchesAddedOrRemoved(),this.touchEnd(n),this.resetIfEventsEnded()}},r.prototype.resetIfEventsEnded=function(){this._state!=WorldWind.POSSIBLE&&0==this._mouseButtonMask&&0==this._touches.length&&this.reset()},r.prototype.touchesAddedOrRemoved=function(){this._touchCentroidShiftX+=this._clientX,this._touchCentroidShiftY+=this._clientY;var e=this.touchCentroid();this._clientX=e.clientX,this._clientY=e.clientY,this._touchCentroidShiftX-=this._clientX,this._touchCentroidShiftY-=this._clientY},r.prototype.touchCentroid=function(){for(var e=0,t=0,n=0,r=this._touches.length;n<r;n++){var i=this._touches[n];e+=i.clientX/r,t+=i.clientY/r}return{clientX:e,clientY:t}},r.prototype.indexOfTouchWithId=function(e){for(var t=0,n=this._touches.length;t<n;t++)if(this._touches[t].identifier==e)return t;return-1},r})),i("gesture/ClickRecognizer",["../gesture/GestureRecognizer"],(function(e){"use strict";var t=function(t,n){e.call(this,t,n),this.numberOfClicks=1,this.button=0,this.maxMouseMovement=5,this.maxClickDuration=500,this.maxClickInterval=400,this.clicks=[],this.timeout=null};return(t.prototype=Object.create(e.prototype)).reset=function(){e.prototype.reset.call(this),this.clicks=[],this.cancelFailAfterDelay()},t.prototype.mouseDown=function(e){if(this.state==WorldWind.POSSIBLE)if(this.button!=e.button)this.state=WorldWind.FAILED;else{var t={clientX:this.clientX,clientY:this.clientY};this.clicks.push(t),this.failAfterDelay(this.maxClickDuration)}},t.prototype.mouseMove=function(e){if(this.state==WorldWind.POSSIBLE){var t=this.translationX,n=this.translationY;Math.sqrt(t*t+n*n)>this.maxMouseMovement&&(this.state=WorldWind.FAILED)}},t.prototype.mouseUp=function(e){this.state==WorldWind.POSSIBLE&&0==this.mouseButtonMask&&(this.clicks.length==this.numberOfClicks?(this.clientX=this.clicks[0].clientX,this.clientY=this.clicks[0].clientY,this.state=WorldWind.RECOGNIZED):this.failAfterDelay(this.maxClickInterval))},t.prototype.touchStart=function(e){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},t.prototype.failAfterDelay=function(e){var t=this;t.timeout&&window.clearTimeout(t.timeout),t.timeout=window.setTimeout((function(){t.timeout=null,t.state==WorldWind.POSSIBLE&&(t.state=WorldWind.FAILED)}),e)},t.prototype.cancelFailAfterDelay=function(){var e=this;e.timeout&&(window.clearTimeout(e.timeout),e.timeout=null)},t})),i("gesture/DragRecognizer",["../gesture/GestureRecognizer"],(function(e){"use strict";var t=function(t,n){e.call(this,t,n),this.button=0,this.interpretDistance=5};return(t.prototype=Object.create(e.prototype)).mouseMove=function(e){this.state==WorldWind.POSSIBLE?this.shouldInterpret()&&(this.shouldRecognize()?(this.translationX=0,this.translationY=0,this.state=WorldWind.BEGAN):this.state=WorldWind.FAILED):this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CHANGED)},t.prototype.mouseUp=function(e){0==this.mouseButtonMask&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},t.prototype.touchStart=function(e){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},t.prototype.shouldInterpret=function(){var e=this.translationX,t=this.translationY;return Math.sqrt(e*e+t*t)>this.interpretDistance},t.prototype.shouldRecognize=function(){return 1<<this.button==this.mouseButtonMask},t})),i("gesture/PanRecognizer",["../gesture/GestureRecognizer"],(function(e){"use strict";var t=function(t,n){e.call(this,t,n),this.minNumberOfTouches=1,this.maxNumberOfTouches=Number.MAX_VALUE,this.interpretDistance=20};return(t.prototype=Object.create(e.prototype)).mouseDown=function(e){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},t.prototype.touchMove=function(e){this.state==WorldWind.POSSIBLE?this.shouldInterpret()&&(this.shouldRecognize()?this.state=WorldWind.BEGAN:this.state=WorldWind.FAILED):this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CHANGED)},t.prototype.touchEnd=function(e){0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},t.prototype.touchCancel=function(e){0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CANCELLED))},t.prototype.prepareToRecognize=function(){this.translationX=0,this.translationY=0},t.prototype.shouldInterpret=function(){var e=this.translationX,t=this.translationY;return Math.sqrt(e*e+t*t)>this.interpretDistance},t.prototype.shouldRecognize=function(){var e=this.touchCount;return 0!=e&&e>=this.minNumberOfTouches&&e<=this.maxNumberOfTouches},t})),i("gesture/PinchRecognizer",["../gesture/GestureRecognizer"],(function(e){"use strict";var t=function(t,n){e.call(this,t,n),this._scale=1,this._offsetScale=1,this.referenceDistance=0,this.interpretThreshold=20,this.weight=.4,this.pinchTouches=[]};return t.prototype=Object.create(e.prototype),Object.defineProperties(t.prototype,{scale:{get:function(){return this._scale*this._offsetScale}}}),t.prototype.reset=function(){e.prototype.reset.call(this),this._scale=1,this._offsetScale=1,this.referenceDistance=0,this.pinchTouches=[]},t.prototype.mouseDown=function(e){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},t.prototype.touchStart=function(e){this.pinchTouches.length<2&&2==this.pinchTouches.push(e)&&(this.referenceDistance=this.currentPinchDistance(),this._offsetScale*=this._scale,this._scale=1)},t.prototype.touchMove=function(e){if(2==this.pinchTouches.length)if(this.state==WorldWind.POSSIBLE)this.shouldRecognize()&&(this.state=WorldWind.BEGAN);else if(this.state==WorldWind.BEGAN||this.state==WorldWind.CHANGED){var t=this.currentPinchDistance(),n=Math.abs(t/this.referenceDistance),r=this.weight;this._scale=this._scale*(1-r)+n*r,this.state=WorldWind.CHANGED}},t.prototype.touchEnd=function(e){var t=this.pinchTouches.indexOf(e);-1!=t&&this.pinchTouches.splice(t,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},t.prototype.touchCancel=function(e){var t=this.pinchTouches.indexOf(e);-1!=t&&this.pinchTouches.splice(t,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CANCELLED))},t.prototype.prepareToRecognize=function(){this.referenceDistance=this.currentPinchDistance(),this._scale=1},t.prototype.shouldRecognize=function(){var e=this.currentPinchDistance();return Math.abs(e-this.referenceDistance)>this.interpretThreshold},t.prototype.currentPinchDistance=function(){var e=this.pinchTouches[0],t=this.pinchTouches[1],n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(n*n+r*r)},t})),i("gesture/RotationRecognizer",["../geom/Angle","../gesture/GestureRecognizer"],(function(e,t){"use strict";var n=function(e,n){t.call(this,e,n),this._rotation=0,this._offsetRotation=0,this.referenceAngle=0,this.interpretThreshold=20,this.weight=.4,this.rotationTouches=[]};return n.prototype=Object.create(t.prototype),Object.defineProperties(n.prototype,{rotation:{get:function(){return this._rotation+this._offsetRotation}}}),n.prototype.reset=function(){t.prototype.reset.call(this),this._rotation=0,this._offsetRotation=0,this.referenceAngle=0,this.rotationTouches=[]},n.prototype.mouseDown=function(e){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},n.prototype.touchStart=function(e){this.rotationTouches.length<2&&2==this.rotationTouches.push(e)&&(this.referenceAngle=this.currentTouchAngle(),this._offsetRotation+=this._rotation,this._rotation=0)},n.prototype.touchMove=function(t){if(2==this.rotationTouches.length)if(this.state==WorldWind.POSSIBLE)this.shouldRecognize()&&(this.state=WorldWind.BEGAN);else if(this.state==WorldWind.BEGAN||this.state==WorldWind.CHANGED){var n=this.currentTouchAngle(),r=e.normalizedDegrees(n-this.referenceAngle),i=this.weight;this._rotation=this._rotation*(1-i)+r*i,this.state=WorldWind.CHANGED}},n.prototype.touchEnd=function(e){var t=this.rotationTouches.indexOf(e);-1!=t&&this.rotationTouches.splice(t,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},n.prototype.touchCancel=function(e){var t=this.rotationTouches.indexOf(e);-1!=t&&(this.rotationTouches.splice(t,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CANCELLED)))},n.prototype.prepareToRecognize=function(){this.referenceAngle=this.currentTouchAngle(),this._rotation=0},n.prototype.shouldRecognize=function(){var t=this.currentTouchAngle(),n=e.normalizedDegrees(t-this.referenceAngle);return Math.abs(n)>this.interpretThreshold},n.prototype.currentTouchAngle=function(){var t=this.rotationTouches[0],n=this.rotationTouches[1],r=t.clientX-n.clientX,i=t.clientY-n.clientY;return Math.atan2(i,r)*e.RADIANS_TO_DEGREES},n})),i("gesture/TapRecognizer",["../gesture/GestureRecognizer"],(function(e){"use strict";var t=function(t,n){e.call(this,t,n),this.numberOfTaps=1,this.numberOfTouches=1,this.maxTouchMovement=20,this.maxTapDuration=500,this.maxTapInterval=400,this.taps=[],this.timeout=null};return(t.prototype=Object.create(e.prototype)).reset=function(){e.prototype.reset.call(this),this.taps=[],this.cancelFailAfterDelay()},t.prototype.mouseDown=function(e){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},t.prototype.touchStart=function(e){var t;this.state==WorldWind.POSSIBLE&&(this.touchCount>this.numberOfTouches?this.state=WorldWind.FAILED:1==this.touchCount?(t={touchCount:this.touchCount,clientX:this.clientX,clientY:this.clientY},this.taps.push(t),this.failAfterDelay(this.maxTapDuration)):((t=this.taps[this.taps.length-1]).touchCount=this.touchCount,t.clientX=this.clientX,t.clientY=this.clientY))},t.prototype.touchMove=function(e){if(this.state==WorldWind.POSSIBLE){var t=this.translationX,n=this.translationY;Math.sqrt(t*t+n*n)>this.maxTouchMovement&&(this.state=WorldWind.FAILED)}},t.prototype.touchEnd=function(e){if(this.state==WorldWind.POSSIBLE&&0==this.touchCount){var t=this.taps.length;this.taps[t-1].touchCount!=this.numberOfTouches?this.state=WorldWind.FAILED:t==this.numberOfTaps?(this.clientX=this.taps[0].clientX,this.clientY=this.taps[0].clientY,this.state=WorldWind.RECOGNIZED):this.failAfterDelay(this.maxTapInterval)}},t.prototype.touchCancel=function(e){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},t.prototype.failAfterDelay=function(e){var t=this;t.timeout&&window.clearTimeout(t.timeout),t.timeout=window.setTimeout((function(){t.timeout=null,t.state==WorldWind.POSSIBLE&&(t.state=WorldWind.FAILED)}),e)},t.prototype.cancelFailAfterDelay=function(){var e=this;e.timeout&&(window.clearTimeout(e.timeout),e.timeout=null)},t})),i("gesture/TiltRecognizer",["../gesture/PanRecognizer"],(function(e){"use strict";var t=function(t,n){e.call(this,t,n),this.maxTouchDistance=250,this.maxTouchDivergence=50};return t.LEFT=1,t.RIGHT=2,t.UP=4,t.DOWN=8,(t.prototype=Object.create(e.prototype)).shouldInterpret=function(){for(var e=0,t=this.touchCount;e<t;e++){var n=this.touch(e),r=n.translationX,i=n.translationY;if(Math.sqrt(r*r+i*i)>this.interpretDistance)return!0}return!1},t.prototype.shouldRecognize=function(){if(this.touchCount<2)return!1;var e=this.touch(0),n=this.touch(1),r=e.clientX-n.clientX,i=e.clientY-n.clientY;if(Math.sqrt(r*r+i*i)>this.maxTouchDistance)return!1;var o=e.translationX-n.translationX,a=e.translationY-n.translationY;if(Math.sqrt(o*o+a*a)>this.maxTouchDivergence)return!1;var s=t.UP|t.DOWN;return 0!=(this.touchDirection(e)&s&this.touchDirection(n)&s)},t.prototype.touchDirection=function(e){var n=e.translationX,r=e.translationY,i=0;return Math.abs(n)>Math.abs(r)?(i|=n<0?t.LEFT:0,i|=n>0?t.RIGHT:0):(i|=r<0?t.UP:0,i|=r>0?t.DOWN:0),i},t})),i("WorldWindowController",["./error/ArgumentError","./util/Logger","./error/UnsupportedOperationError"],(function(e,t,n){"use strict";var r=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WorldWindowController","constructor","missingWorldWindow"));this.wwd=n,this.allGestureListeners=[]};return r.prototype.onGestureEvent=function(e){for(var t=!1,n=0;n<this.allGestureListeners.length&&!t;n++)t|=this.allGestureListeners[n].onGestureEvent(e);return t},r.prototype.gestureStateChanged=function(e){throw new n(t.logMessage(t.LEVEL_SEVERE,"WorldWindowController","gestureStateChanged","abstractInvocation"))},r.prototype.addGestureListener=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WorldWindowController","addGestureListener","missingListener"));this.allGestureListeners.push(n)},r.prototype.removeGestureListener=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WorldWindowController","removeGestureListener","missingListener"));var r=this.allGestureListeners.indexOf(n);-1!==r&&this.allGestureListeners.splice(r,1)},r.prototype.applyLimits=function(){},r})),i("BasicWorldWindowController",["./geom/Angle","./error/ArgumentError","./gesture/ClickRecognizer","./gesture/DragRecognizer","./gesture/GestureRecognizer","./util/Logger","./geom/Matrix","./gesture/PanRecognizer","./gesture/PinchRecognizer","./geom/Position","./gesture/RotationRecognizer","./gesture/TapRecognizer","./gesture/TiltRecognizer","./geom/Vec2","./geom/Vec3","./WorldWindowController","./util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g){"use strict";var A=function(e){m.call(this,e),this.primaryDragRecognizer=new r(this.wwd,null),this.primaryDragRecognizer.addListener(this),this.secondaryDragRecognizer=new r(this.wwd,null),this.secondaryDragRecognizer.addListener(this),this.secondaryDragRecognizer.button=2,this.panRecognizer=new s(this.wwd,null),this.panRecognizer.addListener(this),this.pinchRecognizer=new u(this.wwd,null),this.pinchRecognizer.addListener(this),this.rotationRecognizer=new c(this.wwd,null),this.rotationRecognizer.addListener(this),this.tiltRecognizer=new f(this.wwd,null),this.tiltRecognizer.addListener(this),this.panRecognizer.recognizeSimultaneouslyWith(this.pinchRecognizer),this.panRecognizer.recognizeSimultaneouslyWith(this.rotationRecognizer),this.pinchRecognizer.recognizeSimultaneouslyWith(this.rotationRecognizer),this.panRecognizer.requireRecognizerToFail(this.tiltRecognizer),this.pinchRecognizer.requireRecognizerToFail(this.tiltRecognizer),this.rotationRecognizer.requireRecognizerToFail(this.tiltRecognizer),this.beginPoint=new d(0,0),this.lastPoint=new d(0,0),this.beginHeading=0,this.beginTilt=0,this.beginRange=0,this.lastRotation=0};return(A.prototype=Object.create(m.prototype)).onGestureEvent=function(e){var t=m.prototype.onGestureEvent.call(this,e);if(!t)if("wheel"===e.type)t=!0,this.handleWheelEvent(e);else for(var n=0,r=i.allRecognizers.length;n<r;n++){var o=i.allRecognizers[n];o.target===this.wwd&&(t|=o.onGestureEvent(e))}return t},A.prototype.gestureStateChanged=function(e){e===this.primaryDragRecognizer||e===this.panRecognizer?this.handlePanOrDrag(e):e===this.secondaryDragRecognizer?this.handleSecondaryDrag(e):e===this.pinchRecognizer?this.handlePinch(e):e===this.rotationRecognizer?this.handleRotation(e):e===this.tiltRecognizer&&this.handleTilt(e)},A.prototype.handlePanOrDrag=function(e){this.wwd.globe.is2D()?this.handlePanOrDrag2D(e):this.handlePanOrDrag3D(e)},A.prototype.handlePanOrDrag3D=function(t){var n=t.state,r=t.translationX,i=t.translationY,o=this.wwd.navigator;if(n===WorldWind.BEGAN)this.lastPoint.set(0,0);else if(n===WorldWind.CHANGED){var a=this.wwd.canvas,s=this.wwd.globe,u=g.max(s.equatorialRadius,s.polarRadius),l=g.max(1,o.range),c=g.perspectivePixelSize(a.clientWidth,a.clientHeight,l),h=(i-this.lastPoint[1])*c,f=-(r-this.lastPoint[0])*c,d=h/u*e.RADIANS_TO_DEGREES,p=f/u*e.RADIANS_TO_DEGREES,m=Math.sin(o.heading*e.DEGREES_TO_RADIANS),A=Math.cos(o.heading*e.DEGREES_TO_RADIANS);o.lookAtLocation.latitude+=d*A-p*m,o.lookAtLocation.longitude+=d*m+p*A,this.lastPoint.set(r,i),this.applyLimits(),this.wwd.redraw()}},A.prototype.handlePanOrDrag2D=function(e){var t=e.state,n=e.clientX,r=e.clientY,i=e.translationX,o=e.translationY,s=this.wwd.navigator;if(t===WorldWind.BEGAN)this.beginPoint.set(n,r),this.lastPoint.set(n,r);else if(t===WorldWind.CHANGED){var u=this.lastPoint[0],l=this.lastPoint[1],c=this.beginPoint[0]+i,h=this.beginPoint[1]+o;this.lastPoint.set(c,h);var f=this.wwd.globe,d=this.wwd.rayThroughScreenPoint(this.wwd.canvasCoordinates(u,l)),m=new p(0,0,0),g=new p(0,0,0),A=new p(0,0,0);if(!f.intersectsLine(d,m))return;if(d=this.wwd.rayThroughScreenPoint(this.wwd.canvasCoordinates(c,h)),!f.intersectsLine(d,g))return;var v=a.fromIdentity();if(this.wwd.computeViewingTransform(null,v),v.multiplyByTranslation(g[0]-m[0],g[1]-m[1],g[2]-m[2]),v.extractEyePoint(d.origin),v.extractForwardVector(d.direction),!f.intersectsLine(d,A))return;var y=v.extractViewingParameters(A,s.roll,f,{});s.lookAtLocation.copy(y.origin),s.range=y.range,s.heading=y.heading,s.tilt=y.tilt,s.roll=y.roll,this.applyLimits(),this.wwd.redraw()}},A.prototype.handleSecondaryDrag=function(e){var t=e.state,n=e.translationX,r=e.translationY,i=this.wwd.navigator;if(t===WorldWind.BEGAN)this.beginHeading=i.heading,this.beginTilt=i.tilt;else if(t===WorldWind.CHANGED){var o=180*n/this.wwd.canvas.clientWidth,a=90*r/this.wwd.canvas.clientHeight;i.heading=this.beginHeading+o,i.tilt=this.beginTilt+a,this.applyLimits(),this.wwd.redraw()}},A.prototype.handlePinch=function(e){var t=this.wwd.navigator,n=e.state,r=e.scale;n===WorldWind.BEGAN?this.beginRange=t.range:n===WorldWind.CHANGED&&0!==r&&(t.range=this.beginRange/r,this.applyLimits(),this.wwd.redraw())},A.prototype.handleRotation=function(e){var t=this.wwd.navigator,n=e.state,r=e.rotation;n===WorldWind.BEGAN?this.lastRotation=0:n===WorldWind.CHANGED&&(t.heading-=r-this.lastRotation,this.lastRotation=r,this.applyLimits(),this.wwd.redraw())},A.prototype.handleTilt=function(e){var t=this.wwd.navigator,n=e.state,r=e.translationY;if(n===WorldWind.BEGAN)this.beginTilt=t.tilt;else if(n===WorldWind.CHANGED){var i=-90*r/this.wwd.canvas.clientHeight;t.tilt=this.beginTilt+i,this.applyLimits(),this.wwd.redraw()}},A.prototype.handleWheelEvent=function(e){var t,n=this.wwd.navigator;e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?t=e.deltaY:e.deltaMode===WheelEvent.DOM_DELTA_LINE?t=40*e.deltaY:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t=400*e.deltaY);var r=1+t/1e3;n.range*=r,this.applyLimits(),this.wwd.redraw()},A.prototype.applyLimits=function(){var t=this.wwd.navigator;if(t.lookAtLocation.latitude=g.clamp(t.lookAtLocation.latitude,-90,90),t.lookAtLocation.longitude=e.normalizedDegreesLongitude(t.lookAtLocation.longitude),t.range=g.clamp(t.range,1,Number.MAX_VALUE),t.heading=e.normalizedDegrees(t.heading),t.tilt=g.clamp(t.tilt,0,90),t.roll=e.normalizedDegrees(t.roll),this.wwd.globe.is2D()&&t.enable2DLimits){var n=2*Math.PI*this.wwd.globe.equatorialRadius;t.range=g.clamp(t.range,1,n),t.tilt=0}},A})),i("util/ImageSource",["../error/ArgumentError","../util/Color","../util/Logger"],(function(e,t,n){"use strict";var r=function t(r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"ImageSource","constructor","missingImage"));this.image=r,this.key="ImageSource "+ ++t.keyPool};return r.keyPool=0,r})),i("shapes/ScreenImage",["../error/ArgumentError","../shaders/BasicTextureProgram","../util/Color","../util/ImageSource","../util/Logger","../geom/Matrix","../util/Offset","../pick/PickedObject","../render/Renderable","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l,c){"use strict";var h=function(t,r){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"ScreenImage","constructor","missingOffset"));if(!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"ScreenImage","constructor","missingImage"));u.call(this),this.screenOffset=t,this._imageSource=r,this.imageColor=n.WHITE,this.imageOffset=new a(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,.5),this.imageScale=1,this.imageRotation=0,this.imageTilt=0,this.enabled=!0,this.opacity=1,this.pickDelegate=null,this.activeTexture=null,this.imageTransform=o.fromIdentity(),this.texCoordMatrix=o.fromIdentity(),this.imageBounds=null,this.layer=null};return h.matrix=o.fromIdentity(),h.prototype=Object.create(u.prototype),Object.defineProperties(h.prototype,{imageSource:{get:function(){return this._imageSource},set:function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"ScreenImage","imageSource","missingImage"));this._imageSource=t,this.imageSourceWasUpdated=!0}}}),h.prototype.render=function(e){if(this.enabled&&e.accumulateOrderedRenderables){var t=null;this.lastFrameTime!==e.timestamp&&(t=this.makeOrderedRenderable(e)),t&&t.isVisible(e)&&(t.layer=e.currentLayer,this.lastFrameTime=e.timestamp,e.addOrderedRenderable(t))}},h.prototype.renderOrdered=function(e){if(this.drawOrderedScreenImage(e),e.pickingMode){var t=new s(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);e.resolvePick(t)}},h.prototype.makeOrderedRenderable=function(e){var t,n,r,i,o,a,s;return this.activeTexture=this.getActiveTexture(e),this.activeTexture&&!this.imageSourceWasUpdated||(this.activeTexture=e.gpuResourceCache.retrieveTexture(e.currentGlContext,this._imageSource),this.activeTexture)?(this.eyeDistance=0,t=this.activeTexture.imageWidth,n=this.activeTexture.imageHeight,r=this.imageScale,a=this.imageOffset.offsetForSize(t,n),i=e.viewport.width,o=e.viewport.height,s=this.screenOffset.offsetForSize(i,o),this.imageTransform.setTranslation(s[0]-a[0]*r,s[1]-a[1]*r,0),this.imageTransform.setScale(t*r,n*r,1),this.imageBounds=c.boundingRectForUnitQuad(this.imageTransform),this):null},h.prototype.getActiveTexture=function(e){return e.gpuResourceCache.resourceForKey(this._imageSource)},h.prototype.isVisible=function(e){return e.pickingMode?e.pickRectangle&&this.imageBounds.intersects(e.pickRectangle):this.imageBounds.intersects(e.viewport)},h.prototype.drawOrderedScreenImage=function(e){this.beginDrawing(e);try{this.doDrawOrderedScreenImage(e)}finally{this.endDrawing(e)}},h.prototype.beginDrawing=function(e){var n,r=e.currentGlContext;e.findAndBindProgram(t),n=e.currentProgram,r.bindBuffer(r.ARRAY_BUFFER,e.unitQuadBuffer()),r.vertexAttribPointer(n.vertexTexCoordLocation,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.vertexPointLocation),r.enableVertexAttribArray(n.vertexTexCoordLocation),n.loadTextureUnit(r,r.TEXTURE0),n.loadModulateColor(r,e.pickingMode),r.disable(r.DEPTH_TEST)},h.prototype.endDrawing=function(e){var t=e.currentGlContext,n=e.currentProgram;t.disableVertexAttribArray(n.vertexPointLocation),t.disableVertexAttribArray(n.vertexTexCoordLocation),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindTexture(t.TEXTURE_2D,null),t.enable(t.DEPTH_TEST)},h.prototype.doDrawOrderedScreenImage=function(e){var t=e.currentGlContext,n=e.currentProgram;t.bindBuffer(t.ARRAY_BUFFER,e.unitQuadBuffer3()),t.vertexAttribPointer(n.vertexPointLocation,3,t.FLOAT,!1,0,0),h.matrix.copy(e.screenProjection),h.matrix.multiplyMatrix(this.imageTransform),h.matrix.multiplyByTranslation(.5,.5,.5),h.matrix.multiplyByRotation(1,0,0,this.imageTilt),h.matrix.multiplyByRotation(0,0,1,this.imageRotation),h.matrix.multiplyByTranslation(-.5,-.5,0),n.loadModelviewProjection(t,h.matrix),n.loadTextureEnabled(t,!0),e.pickingMode?(this.pickColor=e.uniquePickColor(),n.loadColor(t,this.pickColor),n.loadOpacity(t,1)):(n.loadColor(t,this.imageColor),n.loadOpacity(t,this.opacity*this.layer.opacity)),this.texCoordMatrix.setToIdentity(),this.texCoordMatrix.multiplyByTextureTransform(this.activeTexture),n.loadTextureMatrix(t,this.texCoordMatrix),this.activeTexture.bind(e)&&t.drawArrays(t.TRIANGLE_STRIP,0,4)},h})),i("render/TextureTile",["../error/ArgumentError","../util/Logger","../util/Tile"],(function(e,t,n){"use strict";var r=function(e,t,r,i){n.call(this,e,t,r,i),this.gpuCacheKey=null};return(r.prototype=Object.create(n.prototype)).size=function(){return n.prototype.size.call(this)},r.prototype.bind=function(e){var t=e.gpuResourceCache.resourceForKey(this.gpuCacheKey);return!!t&&t.bind(e)},r.prototype.applyInternalTransform=function(e,t){},r})),i("render/ImageTile",["../error/ArgumentError","../util/Logger","../render/TextureTile","../util/Tile"],(function(e,t,n,r){"use strict";var i=function(r,i,o,a,s){if(!s||s.length<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"ImageTile","constructor","The specified image path is null, undefined or zero length."));n.call(this,r,i,o,a),this.imagePath=s,this.fallbackTile=null,this.gpuCacheKey=s};return(i.prototype=Object.create(n.prototype)).size=function(){return this.__proto__.__proto__.size.call(this)+this.imagePath.length+8},i.prototype.bind=function(e){return!!this.__proto__.__proto__.bind.call(this,e)||!!this.fallbackTile&&this.fallbackTile.bind(e)},i.prototype.applyInternalTransform=function(e,t){this.fallbackTile&&!e.gpuResourceCache.resourceForKey(this.imagePath)&&this.applyFallbackTransform(t)},i.prototype.applyFallbackTransform=function(e){if(!(this.level.levelNumber-this.fallbackTile.level.levelNumber<=0)){var t=this.fallbackTile.sector.deltaLatitude(),n=this.fallbackTile.sector.deltaLongitude(),r=this.sector.deltaLongitude()/n,i=this.sector.deltaLatitude()/t,o=(this.sector.minLongitude-this.fallbackTile.sector.minLongitude)/n,a=(this.sector.minLatitude-this.fallbackTile.sector.minLatitude)/t;e.multiply(r,0,0,o,0,i,0,a,0,0,1,0,0,0,0,1)}},i})),i("layer/TiledImageLayer",["../util/AbsentResourceList","../error/ArgumentError","../render/ImageTile","../layer/Layer","../util/LevelSet","../util/Logger","../geom/Matrix","../cache/MemoryCache","../render/Texture","../util/Tile","../util/WWUtil"],(function(e,t,n,r,i,o,a,s,u,l,c){"use strict";var h=function(n,u,l,c,h,f,d){if(!n)throw new t(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","missingSector"));if(!u)throw new t(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","The specified level-zero delta is null or undefined."));if(!c)throw new t(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","The specified image format is null or undefined."));if(!h)throw new t(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","The specified cache path is null or undefined."));if(!l||l<1)throw new t(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","The specified number of levels is less than one."));if(!f||!d||f<1||d<1)throw new t(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","The specified tile width or height is less than one."));r.call(this,"Tiled Image Layer"),this.retrievalImageFormat=c,this.cachePath=h,this.retrievalQueueSize=WorldWind.configuration.layerRetrievalQueueSize,this.levels=new i(n,u,l,f,d),this.detailControl=1.75,this.crossOrigin="anonymous",this.expiration=null,this.currentTiles=[],this.currentTilesInvalid=!0,this.tileCache=new s(5e5,4e5),this.currentRetrievals=[],this.absentResourceList=new e(3,5e4),this.pickEnabled=!1,this.lasTtMVP=a.fromIdentity()};return(h.prototype=Object.create(r.prototype)).refresh=function(){this.expiration=new Date,this.currentTilesInvalid=!0},h.prototype.prePopulate=function(e){if(!e)throw new t(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","prePopulate","missingWorldWindow"));var n=e.drawContext;this.topLevelTiles&&0!==this.topLevelTiles.length||this.createTopLevelTiles(n);for(var r=0;r<this.topLevelTiles.length;r++){var i=this.topLevelTiles[r];this.isTileTextureInMemory(n,i)||this.retrieveTileImage(n,i,!0)}},h.prototype.prePopulateCurrentTiles=function(e){if(!e)throw new t(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","prePopulate","missingWorldWindow"));var n=e.drawContext;this.assembleTiles(n);for(var r=0,i=this.currentTiles.length;r<i;r++){var a=this.currentTiles[r];this.isTileTextureInMemory(n,a)||this.retrieveTileImage(n,a,!0)}},h.prototype.isPrePopulated=function(e){if(!e)throw new t(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","isPrePopulated","missingWorldWindow"));for(var n=0;n<this.topLevelTiles.length;n++)if(!this.isTileTextureInMemory(e.drawContext,this.topLevelTiles[n]))return!1;return!0},h.prototype.createTile=function(e,t,r,i){var o=this.cachePath+"-layer/"+t.levelNumber+"/"+r+"/"+r+"_"+i+"."+c.suffixForMimeType(this.retrievalImageFormat);return new n(e,t,r,i,o)},h.prototype.doRender=function(e){if(e.terrain){if(this.currentTilesInvalid||!e.modelviewProjection.equals(this.lasTtMVP)||e.globeStateKey!==this.lastGlobeStateKey)if(this.currentTilesInvalid=!1,e.surfaceOpacity>=1&&this.opacity>=1){this.previousTiles={};for(var t=0;t<this.currentTiles.length;t++)this.previousTiles[this.currentTiles[t].imagePath]=this.currentTiles[t];this.assembleTiles(e),this.fadeOutgoingTiles(e)}else this.assembleTiles(e);this.lasTtMVP.copy(e.modelviewProjection),this.lastGlobeStateKey=e.globeStateKey,this.currentTiles.length>0&&(e.surfaceTileRenderer.renderTiles(e,this.currentTiles,this.opacity,e.surfaceOpacity>=1),e.frameStatistics.incrementImageTileCount(this.currentTiles.length),this.inCurrentFrame=!0)}},h.prototype.fadeOutgoingTiles=function(e){for(var t=(e.timestamp-e.previousRedrawTimestamp)/e.fadeTime,n={},r=0;r<this.currentTiles.length;r++){var i=this.currentTiles[r];n[i.imagePath]=i}for(var o in this.previousTiles)this.previousTiles.hasOwnProperty(o)&&(i=this.previousTiles[o]).opacity>0&&!n[i.imagePath]&&(i.opacity=Math.max(0,i.opacity-t),i.opacity>0&&(this.currentTiles.push(i),this.currentTilesInvalid=!0,e.redrawRequested=!0))},h.prototype.isLayerInView=function(e){return e.terrain&&e.terrain.sector&&e.terrain.sector.intersects(this.levels.sector)},h.prototype.createTopLevelTiles=function(e){this.topLevelTiles=[],l.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles)},h.prototype.assembleTiles=function(e){this.currentTiles=[],this.topLevelTiles&&0!==this.topLevelTiles.length||this.createTopLevelTiles(e);for(var t=0,n=this.topLevelTiles.length;t<n;t++){var r=this.topLevelTiles[t];r.update(e),this.currentAncestorTile=null,this.isTileVisible(e,r)&&this.addTileOrDescendants(e,r)}},h.prototype.addTileOrDescendants=function(e,t){if(this.tileMeetsRenderingCriteria(e,t))this.addTile(e,t);else{var n=null;try{(this.isTileTextureInMemory(e,t)||0===t.level.levelNumber)&&(n=this.currentAncestorTile,this.currentAncestorTile=t);for(var r=this.levels.level(t.level.levelNumber+1),i=t.subdivideToCache(r,this,this.tileCache),o=0,a=i.length;o<a;o++){var s=i[o];s.update(e),this.levels.sector.intersects(s.sector)&&this.isTileVisible(e,s)&&this.addTileOrDescendants(e,s)}}finally{n&&(this.currentAncestorTile=n)}}},h.prototype.addTile=function(e,t){t.fallbackTile=null;var n=e.gpuResourceCache.resourceForKey(t.imagePath);return n?(t.opacity=1,this.currentTiles.push(t),void(this.expiration&&this.isTextureExpired(n)&&this.retrieveTileImage(e,t))):(this.retrieveTileImage(e,t),void(this.currentAncestorTile&&this.isTileTextureInMemory(e,this.currentAncestorTile)&&(t.fallbackTile=this.currentAncestorTile,t.fallbackTile.opacity=1,this.currentTiles.push(t))))},h.prototype.isTileVisible=function(e,t){return!(e.globe.projectionLimits&&!t.sector.overlaps(e.globe.projectionLimits))&&t.extent.intersectsFrustum(e.frustumInModelCoordinates)},h.prototype.tileMeetsRenderingCriteria=function(e,t){var n=this.detailControl;return(t.sector.minLatitude>=75||t.sector.maxLatitude<=-75)&&(n*=1.2),t.level.isLastLevel()||!t.mustSubdivide(e,n)},h.prototype.isTileTextureInMemory=function(e,t){return e.gpuResourceCache.containsResource(t.imagePath)},h.prototype.isTextureExpired=function(e){return this.expiration&&e.creationTime.getTime()<=this.expiration.getTime()},h.prototype.retrieveTileImage=function(e,t,n){if(this.currentRetrievals.indexOf(t.imagePath)<0){if(this.currentRetrievals.length>this.retrievalQueueSize)return;if(this.absentResourceList.isResourceAbsent(t.imagePath))return;var r=this.resourceUrlForTile(t,this.retrievalImageFormat),i=new Image,a=t.imagePath,s=e.gpuResourceCache,u=e.currentGlContext.canvas,l=this;if(!r)return void(this.currentTilesInvalid=!0);i.onload=function(){o.log(o.LEVEL_INFO,"Image retrieval succeeded: "+r);var c=l.createTexture(e,t,i);if(l.removeFromCurrentRetrievals(a),c&&(s.putResource(a,c,c.size),l.currentTilesInvalid=!0,l.absentResourceList.unmarkResourceAbsent(a),!n)){var h=document.createEvent("Event");h.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),u.dispatchEvent(h)}},i.onerror=function(){l.removeFromCurrentRetrievals(a),l.absentResourceList.markResourceAbsent(a),o.log(o.LEVEL_WARNING,"Image retrieval failed: "+r)},this.currentRetrievals.push(a),i.crossOrigin=this.crossOrigin,i.src=r}},h.prototype.createTexture=function(e,t,n){return new u(e.currentGlContext,n)},h.prototype.removeFromCurrentRetrievals=function(e){var t=this.currentRetrievals.indexOf(e);t>-1&&this.currentRetrievals.splice(t,1)},h.prototype.resourceUrlForTile=function(e,t){return this.urlBuilder?this.urlBuilder.urlForTile(e,t):null},h})),i("layer/MercatorTiledImageLayer",["../util/Color","../geom/Sector","../layer/TiledImageLayer","../geom/Vec2","../util/WWMath"],(function(e,t,n,r,i){"use strict";var o=function(e,t,i,o,a,s,u){n.call(this,e,t,i,o,a,s,u),this.detectBlankImages=!1,this.testPixels=[new r(20,20),new r(235,20),new r(20,235),new r(235,235)],this.destCanvas=document.createElement("canvas"),this.destContext=this.destCanvas.getContext("2d")};return(o.prototype=Object.create(n.prototype)).createTile=function(e,r,o,a){var s,u,l,c,h,f=this.mapSizeForLevel(r.levelNumber),d=i.clamp(a*this.imageSize,0,f),p=i.clamp(o*this.imageSize,0,f),m=i.clamp(d+this.imageSize,0,f);return s=d/f-.5,u=.5-i.clamp(p+this.imageSize,0,f)/f,l=90-360*Math.atan(Math.exp(2*-u*Math.PI))/Math.PI,c=360*s,s=m/f-.5,u=.5-p/f,h=90-360*Math.atan(Math.exp(2*-u*Math.PI))/Math.PI,e=new t(l,h,c,360*s),n.prototype.createTile.call(this,e,r,o,a)},o.prototype.createTexture=function(e,t,r){var o,a,s,u,l,c,h=e.canvas2D,f=e.ctx2D,d=this.destCanvas,p=this.destContext,m=p.createImageData(r.width,r.height),g=t.sector,A=i.gudermannianInverse(g.minLatitude),v=i.gudermannianInverse(g.maxLatitude);if(h.width=r.width,h.height=r.height,d.width=r.width,d.height=r.height,f.drawImage(r,0,0,r.width,r.height),o=f.getImageData(0,0,r.width,r.height),this.detectBlankImages&&this.isBlankImage(r,o))return this.absentResourceList.markResourceAbsentPermanently(t.imagePath),null;for(var y=0;y<1;y++)for(var b=0;b<r.height;b++){a=(1-b/(r.height-1))*g.deltaLatitude()+g.minLatitude,c=1-(i.gudermannianInverse(a)-A)/(v-A),c=i.clamp(c,0,1),s=Math.floor(c*(r.height-1));for(var _=0;_<r.width;_++)u=4*(_+s*r.width),l=4*(_+b*r.width),m.data[l]=o.data[u],m.data[l+1]=o.data[u+1],m.data[l+2]=o.data[u+2],m.data[l+3]=o.data[u+3]}return p.putImageData(m,0,0),n.prototype.createTexture.call(this,e,t,d)},o.prototype.isBlankImage=function(e,t){for(var n,r,i=null,o=0,a=this.testPixels.length;o<a;o++)if(r=4*((n=this.testPixels[o])[0]+n[1]*e.width),i){if(t.data[r]!=i[0]||t.data[r+1]!=i[1]||t.data[r+2]!=i[2])return!1}else i=[t.data[r],t.data[r+1],t.data[r+2]];return!0},o})),i("layer/BingTiledImageLayer",["../geom/Angle","../util/Color","../geom/Location","../util/Offset","../shapes/ScreenImage","../geom/Sector","../layer/MercatorTiledImageLayer"],(function(e,t,n,r,i,o,a){"use strict";var s=function(e){this.imageSize=256,a.call(this,new o(-85.05,85.05,-180,180),new n(85.05,180),23,"image/jpeg",e,this.imageSize,this.imageSize),this.displayName=e,this.pickEnabled=!0,this.detectBlankImages=!0};return s.logoImage=null,s.logoLastFrameTime=0,(s.prototype=Object.create(a.prototype)).doRender=function(e){a.prototype.doRender.call(this,e),this.inCurrentFrame&&this.renderLogo(e)},s.prototype.createTopLevelTiles=function(e){this.topLevelTiles=[],this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),0,0)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),0,1)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),1,0)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),1,1))},s.prototype.renderLogo=function(e){s.logoImage||((s.logoImage=new i(WorldWind.configuration.bingLogoPlacement,WorldWind.configuration.baseUrl+"images/powered-by-bing.png")).imageColor=new t(1,1,1,.5)),s.logoLastFrameTime!==e.timestamp&&(s.logoImage.screenOffset=WorldWind.configuration.bingLogoPlacement,s.logoImage.imageOffset=WorldWind.configuration.bingLogoAlignment,s.logoImage.render(e),s.logoLastFrameTime=e.timestamp)},s.prototype.mapSizeForLevel=function(e){return 256<<e+1},s})),i("util/BingImageryUrlBuilder",["../error/ArgumentError","../util/Logger","../util/WWUtil"],(function(e,t,n){"use strict";var r=function e(t,n){var r="AkttWCS8p6qzxvx5RH3qUcCPgwG9nRJ7IwlpFGb14B0rBorB5DvmXr2Y_eCUNIxH";this.bingMapsKey=n,this.bingMapsKey||(this.bingMapsKey=WorldWind.BingMapsKey),this.bingMapsKey||(this.bingMapsKey=r),this.bingMapsKey===r&&e.showBingMapsKeyWarning(),this.imagerySet=t};return r.showBingMapsKeyWarning=function(){r.keyMessagePrinted||(r.keyMessagePrinted=!0,t.log(t.LEVEL_WARNING,"WARNING: You are using a limited use, non-production Bing Maps key.\nIf you are developing an app or a web page this violates the Bing Terms of Use.\nPlease visit https://www.microsoft.com/en-us/maps/create-a-bing-maps-key to obtain your own key for your application.\nSpecify that key to WorldWind by setting the WorldWind.BingMapsKey property to your key prior to creating any Bing Maps layers.\n"))},r.prototype.requestMetadata=function(){if(!this.metadataRetrievalInProcess){this.metadataRetrievalInProcess=!0;var e="https://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+this.imagerySet+"/0,0?zl=1&uriScheme=https&key="+this.bingMapsKey,t=this;n.jsonp(e,"jsonp",(function(e){t.imageUrl=e.resourceSets[0].resources[0].imageUrl;var n=document.createEvent("Event");n.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(n),t.metadataRetrievalInProcess=!1}))}},r.prototype.urlForTile=function(n,r){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"BingImageryUrlBuilder","urlForTile","missingTile"));if(!this.imageUrl)return this.requestMetadata(),null;var i,o=this.quadKeyFromLevelRowColumn(n.level.levelNumber,n.row,n.column);return"Aerial"===this.imagerySet?i=this.imageUrl.replace(/a3/,"a"+o):"AerialWithLabels"===this.imagerySet?i=this.imageUrl.replace(/h3/,"h"+o):"Road"===this.imagerySet&&(i=this.imageUrl.replace(/r3/,"r"+o)),i},r.prototype.quadKeyFromLevelRowColumn=function(e,t,n){for(var r,i,o="",a=e+1;a>0;a--)r=0,0!=(n&(i=1<<a-1))&&(r+=1),0!=(t&i)&&(r+=2),o+=r.toString();return o},r})),i("layer/BingAerialLayer",["../geom/Location","../geom/Sector","../layer/BingTiledImageLayer","../util/BingImageryUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(e){n.call(this,"Bing Aerial"),this.urlBuilder=new r("Aerial",e)};return i.prototype=Object.create(n.prototype),i})),i("layer/BingAerialWithLabelsLayer",["../geom/Location","../geom/Sector","../layer/BingTiledImageLayer","../util/BingImageryUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(e){n.call(this,"Bing Aerial with Labels"),this.urlBuilder=new r("AerialWithLabels",e)};return i.prototype=Object.create(n.prototype),i})),i("layer/BingRoadsLayer",["../geom/Location","../geom/Sector","../layer/BingTiledImageLayer","../util/BingImageryUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(e){n.call(this,"Bing Roads"),this.urlBuilder=new r("Road",e),this.detectBlankImages=!1};return i.prototype=Object.create(n.prototype),i})),i("layer/BingWMSLayer",["../geom/Location","../geom/Sector","../layer/TiledImageLayer","../util/WmsUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(){n.call(this,t.FULL_SPHERE,new e(45,45),16,"image/png","BingWMS",256,256),this.displayName="Bing WMS",this.pickEnabled=!1,this.maxActiveAltitude=1e4,this.urlBuilder=new r("https://worldwind27.arc.nasa.gov/wms/virtualearth","ve","","1.3.0")};return i.prototype=Object.create(n.prototype),i})),i("layer/BMNGLandsatLayer",["../geom/Location","../geom/Sector","../layer/TiledImageLayer","../util/WmsUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(){n.call(this,t.FULL_SPHERE,new e(45,45),12,"image/jpeg","BMNGLandsat256",256,256),this.displayName="Blue Marble & Landsat",this.pickEnabled=!1,this.urlBuilder=new r("https://worldwind25.arc.nasa.gov/wms","BlueMarble-200405,esat","","1.3.0")};return i.prototype=Object.create(n.prototype),i})),i("layer/BMNGLayer",["../geom/Location","../geom/Sector","../layer/TiledImageLayer","../util/WmsUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(i){n.call(this,t.FULL_SPHERE,new e(45,45),7,"image/jpeg",i||"BMNG256",256,256),this.displayName="Blue Marble",this.pickEnabled=!1,this.urlBuilder=new r("https://worldwind25.arc.nasa.gov/wms",i||"BlueMarble-200405","","1.3.0")};return i.prototype=Object.create(n.prototype),i})),i("layer/RenderableLayer",["../error/ArgumentError","../layer/Layer","../util/Logger"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e),this.renderables=[]};return(r.prototype=Object.create(t.prototype)).addRenderable=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"RenderableLayer","addRenderable","missingRenderable"));this.renderables.push(t)},r.prototype.addRenderables=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"RenderableLayer","addRenderables","The renderables array is null or undefined."));for(var r=0,i=t.length;r<i;r++)this.addRenderable(t[r])},r.prototype.removeRenderable=function(e){var t=this.renderables.indexOf(e);t>=0&&this.renderables.splice(t,1)},r.prototype.removeAllRenderables=function(){this.renderables=[]},r.prototype.doRender=function(e){for(var t=e.orderedRenderables.length,r=0,i=this.renderables.length;r<i;r++)try{this.renderables[r].render(e)}catch(e){n.logMessage(n.LEVEL_SEVERE,"RenderableLayer","doRender","Error while rendering shape "+this.renderables[r].displayName+".\n"+e.toString())}e.orderedRenderables.length>t&&(this.inCurrentFrame=!0)},r})),i("render/SurfaceTile",["../error/ArgumentError","../util/Logger","../geom/Matrix","../geom/Sector","../error/UnsupportedOperationError"],(function(e,t,n,r,i){"use strict";var o=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"SurfaceTile","constructor","missingSector"));this.sector=n};return o.prototype.bind=function(e){throw new i(t.logMessage(t.LEVEL_SEVERE,"SurfaceTile","bind","abstractInvocation"))},o.prototype.applyInternalTransform=function(e,n){throw new i(t.logMessage(t.LEVEL_SEVERE,"SurfaceTile","applyInternalTransform","abstractInvocation"))},o})),i("shapes/SurfaceImage",["../error/ArgumentError","../util/Logger","../pick/PickedObject","../render/SurfaceTile"],(function(e,t,n,r){"use strict";var i=function(n,i){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"SurfaceImage","constructor","missingSector"));if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"SurfaceImage","constructor","missingImage"));r.call(this,n),this.enabled=!0,this._imageSource=i,this.resamplingMode=WorldWind.FILTER_LINEAR,this.opacity=1,this.displayName="Surface Image",this.imageSourceWasUpdated=!0};return i.prototype=Object.create(r.prototype),Object.defineProperties(i.prototype,{imageSource:{get:function(){return this._imageSource},set:function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"SurfaceImage","imageSource","missingImage"));this._imageSource=n,this.imageSourceWasUpdated=!0}}}),i.prototype.bind=function(e){var t=e.gpuResourceCache.resourceForKey(this._imageSource);return t&&!this.imageSourceWasUpdated?this.bindTexture(e,t):(t=e.gpuResourceCache.retrieveTexture(e.currentGlContext,this._imageSource),this.imageSourceWasUpdated=!1,t?this.bindTexture(e,t):void 0)},i.prototype.bindTexture=function(e,t){var n=e.currentGlContext;return t.setTexParameter(n.TEXTURE_MAG_FILTER,this.resamplingMode===WorldWind.FILTER_NEAREST?n.NEAREST:n.LINEAR),t.bind(e)},i.prototype.applyInternalTransform=function(e,t){},i.prototype.render=function(e){if(this.enabled&&e.terrain&&this.sector.overlaps(e.terrain.sector)){if(e.pickingMode&&(this.pickColor=e.uniquePickColor()),e.surfaceTileRenderer.renderTiles(e,[this],this.opacity*e.currentLayer.opacity),e.pickingMode){var t=new n(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);e.resolvePick(t)}e.currentLayer.inCurrentFrame=!0}},i})),i("layer/BMNGOneImageLayer",["../layer/RenderableLayer","../geom/Sector","../shapes/SurfaceImage","../util/WWUtil"],(function(e,t,n,r){"use strict";var i=function(){e.call(this,"Blue Marble Image");var r=new n(t.FULL_SPHERE,WorldWind.configuration.baseUrl+"images/BMNG_world.topo.bathy.200405.3.2048x1024.jpg");this.addRenderable(r),this.pickEnabled=!1,this.minActiveAltitude=3e6};return i.prototype=Object.create(e.prototype),i})),i("util/PeriodicTimeSequence",["../error/ArgumentError","../util/Logger"],(function(e,t){"use strict";var n=function n(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"PeriodicTimeSequence","constructor","missingString"));var i=r.split("/");if(3!==i.length)throw new e(t.logMessage(t.LEVEL_SEVERE,"PeriodicTimeSequence","constructor","The interval string "+r+" does not contain 3 elements."));this.sequenceString=r,this.startTime=new Date(i[0]),this.endTime=new Date(i[1]),this.intervalMilliseconds=this.endTime.getTime()-this.startTime.getTime(),this._currentTime=this.startTime,this.infiniteInterval=this.startTime.getTime()==this.endTime.getTime(),this.period=n.parsePeriodString(i[2],!1)};return Object.defineProperties(n.prototype,{currentTime:{get:function(){return this._currentTime},set:function(e){this._currentTime=e}},scaleForCurrentTime:{get:function(){return this.currentTime?(this.currentTime.getTime()-this.startTime.getTime())/this.intervalMilliseconds:1}}}),n.prototype.next=function(){return this.currentTime?this.currentTime.getTime()>=this.endTime.getTime()&&!this.infiniteInterval?this.currentTime=null:this.currentTime=n.incrementTime(this.currentTime,this.period):this.currentTime=this.startTime,this.currentTime},n.prototype.previous=function(){return this.currentTime?this.currentTime.getTime()===this.startTime.getTime()?this.currentTime=null:this.currentTime=this.getTimeForScale(.9999*this.scaleForCurrentTime):this.currentTime=this.endTime,this.currentTime},n.prototype.reset=function(){this.currentTime=null},n.prototype.getTimeForScale=function(e){if(e<=0)return this.startTime;if(e>=1)return this.endTime;var t=new Date(this.startTime.getTime()),r=t,i=0;for(i=0;i<e;i=(t.getTime()-this.startTime.getTime())/this.intervalMilliseconds)r=t,t=n.incrementTime(t,this.period);return r},n.incrementTime=function(e,t){var r=new Date(e.getTime());return 0!=t[0]&&r.setUTCFullYear(r.getUTCFullYear()+t[0]),0!=t[1]&&n.addMonths(r,t[1]),0!=t[2]&&r.setUTCDate(r.getUTCDate()+7*t[2]),0!=t[3]&&r.setUTCDate(r.getUTCDate()+t[3]),0!=t[4]&&r.setUTCHours(r.getUTCHours()+t[4]),0!=t[5]&&r.setUTCMinutes(r.getUTCMinutes()+t[5]),0!=t[6]&&r.setUTCSeconds(r.getUTCSeconds()+t[6]),r},n.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},n.getDaysInMonth=function(e,t){return[31,n.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},n.addMonths=function(e,t){var r=e.getUTCDate();return e.setUTCDate(1),e.setUTCMonth(e.getUTCMonth()+t),e.setUTCDate(Math.min(r,n.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()))),e},n.parsePeriodString=function(n,r){var i,o=!!r&&r,a=[2,3,4,5,7,8,9],s=[0,0,0,0,0,0,0],u=[0,12,4,7,24,60,60];if(!(n=n.toUpperCase().trim()))return s;if("string"!=typeof n)throw new e(t.logMessage(t.LEVEL_SEVERE,"PeriodicTimeSequence","parsePeriodString","Invalid ISO8601 period string '"+n+"'"));if(!(i=/^P((\d+Y)?(\d+M)?(\d+W)?(\d+D)?)?(T(\d+H)?(\d+M)?(\d+S)?)?$/.exec(n)))throw new e(t.logMessage(t.LEVEL_SEVERE,"PeriodicTimeSequence","parsePeriodString","String '"+n+"' is not a valid ISO8601 period."));for(var l=0;l<a.length;l++){var c=a[l];s[l]=i[c]?+i[c].replace(/[A-Za-z]+/g,""):0}if(o)for(l=s.length-1;l>0;l--)s[l]>=u[l]&&(s[l-1]=s[l-1]+Math.floor(s[l]/u[l]),s[l]=s[l]%u[l]);return s},n})),i("util/LevelRowColumnUrlBuilder",["../error/ArgumentError","../util/Logger","../util/WWUtil"],(function(e,t,n){"use strict";var r=function(e,t){this.serverAddress=e,e&&0!==e.length||(this.serverAddress=n.currentUrlSansFilePart()),this.pathToData=t};return r.prototype.urlForTile=function(r,i){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsUrlBuilder","urlForTile","missingTile"));if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsUrlBuilder","urlForTile","The image format is null or undefined."));var o=this.serverAddress;return this.pathToData&&(o=o+"/"+this.pathToData),(o=(o=(o=(o=o+"/"+r.level.levelNumber.toString())+"/"+r.row.toString())+"/"+r.row.toString()+"_"+r.column.toString())+"."+n.suffixForMimeType(i)).replace(" ","%20")},r})),i("layer/RestTiledImageLayer",["../error/ArgumentError","../geom/Location","../util/Logger","../geom/Sector","../layer/TiledImageLayer","../util/LevelRowColumnUrlBuilder","../util/WWUtil"],(function(e,t,n,r,i,o,a){"use strict";var s=function(e,n,s,u){var l=a.urlPath(e+"/"+n);i.call(this,u&&u.sector||r.FULL_SPHERE,u&&u.levelZeroTileDelta||new t(45,45),u&&u.numLevels||5,u&&u.imageFormat||"image/jpeg",l,u&&u.tileWidth||256,u&&u.tileHeight||256),this.displayName=s,this.pickEnabled=!1,this.urlBuilder=new o(e,n)};return s.prototype=Object.create(i.prototype),s})),i("layer/BMNGRestLayer",["../error/ArgumentError","../layer/Layer","../util/Logger","../util/PeriodicTimeSequence","../layer/RestTiledImageLayer"],(function(e,t,n,r,i){"use strict";var o=function e(n,i,o,a){t.call(this,o||"Blue Marble time series"),this.time=a||new Date("2004-01"),this.timeSequence=new r("2004-01-01/2004-12-01/P1M"),this.serverAddress=n,this.pathToData=i,this.layers={},this.layerNames=[{month:"BlueMarble-200401",time:e.availableTimes[0]},{month:"BlueMarble-200402",time:e.availableTimes[1]},{month:"BlueMarble-200403",time:e.availableTimes[2]},{month:"BlueMarble-200404",time:e.availableTimes[3]},{month:"BlueMarble-200405",time:e.availableTimes[4]},{month:"BlueMarble-200406",time:e.availableTimes[5]},{month:"BlueMarble-200407",time:e.availableTimes[6]},{month:"BlueMarble-200408",time:e.availableTimes[7]},{month:"BlueMarble-200409",time:e.availableTimes[8]},{month:"BlueMarble-200410",time:e.availableTimes[9]},{month:"BlueMarble-200411",time:e.availableTimes[10]},{month:"BlueMarble-200412",time:e.availableTimes[11]}],this.pickEnabled=!1};return o.prototype=Object.create(t.prototype),o.availableTimes=[new Date("2004-01"),new Date("2004-02"),new Date("2004-03"),new Date("2004-04"),new Date("2004-05"),new Date("2004-06"),new Date("2004-07"),new Date("2004-08"),new Date("2004-09"),new Date("2004-10"),new Date("2004-11"),new Date("2004-12")],o.prototype.prePopulate=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"BMNGRestLayer","prePopulate","missingWorldWindow"));for(var r=0;r<this.layerNames.length;r++){var i=this.layerNames[r].month;this.layers[i]||this.createSubLayer(i),this.layers[i].prePopulate(t)}},o.prototype.isPrePopulated=function(e){for(var t=0;t<this.layerNames.length;t++){var n=this.layers[this.layerNames[t].month];if(!n||!n.isPrePopulated(e))return!1}return!0},o.prototype.doRender=function(e){var t=this.nearestLayer(this.time);t.opacity=this.opacity,this.detailControl&&(t.detailControl=this.detailControl),t.doRender(e),this.inCurrentFrame=t.inCurrentFrame},o.prototype.nearestLayer=function(e){var t=this.nearestLayerName(e);return this.layers[t]||this.createSubLayer(t),this.layers[t]},o.prototype.createSubLayer=function(e){var t;t=this.pathToData?this.pathToData+"/"+e:e,this.layers[e]=new i(this.serverAddress,t,this.displayName)},o.prototype.nearestLayerName=function(e){var t=e.getTime();if(t<=this.layerNames[0].time.getTime())return this.layerNames[0].month;if(t>=this.layerNames[11].time.getTime())return this.layerNames[11].month;for(var n=0;n<this.layerNames.length-1;n++){var r=this.layerNames[n].time.getTime(),i=this.layerNames[n+1].time.getTime();if(t>=r&&t<=i)return t-r<i-t?this.layerNames[n].month:this.layerNames[n+1].month}},o})),i("formats/collada/ColladaAsset",[],(function(){"use strict";var e=function(e){this.xmlAsset=e.getElementsByTagName("asset")[0],this.asset={daeVersion:e.querySelector("COLLADA").getAttribute("version")}};return e.prototype.parse=function(){if(!this.xmlAsset)return null;for(var e=0;e<this.xmlAsset.childNodes.length;e++){var t=this.xmlAsset.childNodes.item(e);if(1===t.nodeType)switch(t.nodeName){case"contributor":var n=t.querySelector("authoring_tool");n&&(this.asset.authoring_tool=n.textContext);break;case"unit":this.asset.unit=t.getAttribute("meter");break;default:this.asset[t.localName]=t.textContent}}return this.xmlAsset=null,this.asset},e})),i("formats/collada/ColladaUtils",["../../util/Logger"],(function(e){"use strict";return{getRawValues:function(e){if(!e)return null;var t=e.textContent;return 0===(t=(t=(t=t.replace(/\n/gi," ")).replace(/\s+/gi," ")).trim()).length?null:t.split(" ")},bufferDataFloat32:function(e){var t=this.getRawValues(e);if(!t)return null;for(var n=t.length,r=new Float32Array(n),i=0;i<n;i++)r[i]=parseFloat(t[i]);return r},bufferDataUInt32:function(e){var t=this.getRawValues(e);if(!t)return null;for(var n=t.length,r=new Uint32Array(n),i=0;i<n;i++)r[i]=parseInt(t[i]);return r},getFirstChildElement:function(e,t){for(var n=e.childNodes,r=0;r<n.length;++r){var i=n.item(r);if(1===i.nodeType&&(i.nodeName&&!t||t&&t===i.nodeName))return i}return null},getFilename:function(e){var t=e.lastIndexOf("\\");return-1!==t&&(e=e.substr(t+1)),-1!==(t=e.lastIndexOf("/"))&&(e=e.substr(t+1)),e},replaceSpace:function(e){return e?e.replace(/ /g,"_"):""},querySelectorById:function(e,t){for(var n=0;n<e.length;n++){var r=e.item(n).getAttribute("id");if(r&&r.toString()===t)return e.item(n)}return null},getTextureType:function(e){for(var t=!0,n=0,r=e.length;n<r;n++)if(e[n]<0||e[n]>1){t=!1;break}return t},fetchFile:function(t,n){var r=new XMLHttpRequest;r.onload=function(){this.status>=200&&this.status<400?n(this.response):(e.log(e.LEVEL_SEVERE,"sever error: "+this.status),n(null))},r.onerror=function(t){e.log(e.LEVEL_SEVERE,"connection error: "+t),n(null)},r.open("get",t,!0),r.send()}}})),i("formats/collada/ColladaImage",["./ColladaUtils"],(function(e){"use strict";var t=function(e,t){this.filename="",this.map=e,this.name=t,this.path=""};return t.prototype.parse=function(t){for(var n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"init_from":this.filename=e.getFilename(r.textContent),this.path=r.textContent}}return this},t})),i("formats/collada/ColladaMaterial",["./ColladaUtils"],(function(e){"use strict";var t=function(e){this.id=e,this.newParams=[]};return t.prototype.parse=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1===n.nodeType)switch(n.nodeName){case"profile_COMMON":this.parseProfileCommon(n)}}return this},t.prototype.parseProfileCommon=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1===n.nodeType)switch(n.nodeName){case"newparam":this.parseNewparam(n);break;case"image":break;case"technique":this.parseTechnique(n)}}},t.prototype.parseNewparam=function(e){for(var t=e.getAttribute("sid"),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"surface":var i=r.querySelector("init_from");i&&this.newParams.push({sid:t,type:"surface",initFrom:i.textContent});break;case"sampler2D":var o=r.querySelector("source");this.newParams.push({sid:t,type:"sampler2D",source:o.textContent})}}},t.prototype.parseTechnique=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1===n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.techniqueType=n.nodeName,this.parseTechniqueType(n)}}},t.prototype.parseTechniqueType=function(t){for(var n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1===r.nodeType&&r.nodeName){var i=r.nodeName,o=e.getFirstChildElement(r);if(o)switch(o.nodeName){case"color":this[i]=e.bufferDataFloat32(o).subarray(0,4);break;case"float":this[i]=e.bufferDataFloat32(o)[0];break;case"texture":var a=o.getAttribute("texture"),s=this.newParams.map((function(e){return e.sid})).indexOf(a),u=this.newParams[s].source;s=this.newParams.map((function(e){return e.sid})).indexOf(u);var l=this.newParams[s].initFrom;this.textures||(this.textures={}),this.textures[i]={mapId:l}}}}},t})),i("formats/collada/ColladaMesh",["./ColladaUtils"],(function(e){"use strict";var t=function(e){this.filename=e||"",this.name=e||"",this.buffers=[]};return t.prototype.parse=function(t){for(var n={},r={},i={id:"",inputs:[]},o=0;o<t.childNodes.length;o++){var a=t.childNodes[o];if(1===a.nodeType)switch(a.nodeName){case"source":if(!a.querySelector)continue;var s=a.querySelector("float_array");if(!s)continue;var u=e.bufferDataFloat32(s),l=a.querySelector("accessor"),c=parseInt(l.getAttribute("stride"));n[a.getAttribute("id")]={stride:c,data:u};break;case"vertices":this.parseVertices(a,i);break;case"triangles":r=this.parsePolygons(a,n,i,3),this.buffers.push(r);break;case"polygons":r=this.parsePolygons(a,n,i,4),this.buffers.push(r);break;case"polylist":r=this.parsePolygons(a,n,i,null),this.buffers.push(r)}}return this},t.prototype.parseVertices=function(e,t){t.id=e.getAttribute("id");for(var n=e.querySelectorAll("input"),r=0;r<n.length;r++){var i=n[r],o=i.getAttribute("source").substr(1),a=i.getAttribute("semantic").toUpperCase();t.inputs.push({semantic:a,source:o})}},t.prototype.parsePolygons=function(e,t,n,r){var i=[];null==r&&(i=e.querySelector("vcount").textContent.trim().split(" "));var o=parseInt(e.getAttribute("count")),a=e.getAttribute("material"),s=this.parseInputs(e,t,n),u=s.inputs,l=s.maxOffset,c=e.querySelector("p"),h=[];c&&(h=c.textContent.trim().split(" "));for(var f=u.length,d=0,p={},m=[],g=0,A=!1,v=!1,y=0;y<o;y++){if(i.length)var b=parseInt(i[y]);else b=r;for(var _=-1,w=-1,E=-1,x=0;x<b;x++){var S=h.slice(g,g+l).join(" ");if(E=w,p.hasOwnProperty(S))w=p[S],A=!0;else{for(var T=0;T<f;T++){var M=u[T],L=M[4],C=parseInt(h[g+L]),R=M[1],O=M[3];C*=M[2];for(var I=0;I<M[2];I++)R.push(O[C+I])}w=d,d+=1,p[S]=w}b>3&&(0===x&&(_=w),x>2*l&&((_>65535||E>65535)&&(v=!0),m.push(_),m.push(E))),w>65535&&(v=!0),m.push(w),g+=l}}var P={vertices:new Float32Array(u[0][1]),indexedRendering:A,material:a};return P.indexedRendering&&(P.indices=v?new Uint32Array(m):new Uint16Array(m)),this.transformMeshInfo(P,u),P},t.prototype.parseInputs=function(e,t,n){for(var r=[],i=0,o=e.querySelectorAll("input"),a=0;a<o.length;a++){var s=o.item(a);if(s.getAttribute){var u=s.getAttribute("semantic").toUpperCase(),l=s.getAttribute("source").substr(1),c=parseInt(s.getAttribute("offset"));i=i<c+1?c+1:i;var h=0;if(s.getAttribute("set")&&(h=parseInt(s.getAttribute("set"))),n.id===l)for(var f=n.inputs,d=0;d<f.length;d++){var p=t[f[d].source];p&&r.push([f[d].semantic,[],p.stride,p.data,c,h])}else p=t[l],r.push([u,[],p.stride,p.data,c,h])}}return{inputs:r,maxOffset:i}},t.prototype.transformMeshInfo=function(t,n){for(var r={normal:"normals",texcoord:"uvs"},i=1;i<n.length;i++){var o=n[i][0].toLowerCase(),a=n[i][1];a.length&&(r[o]&&(o=r[o]),t[o]&&(o+=n[i][5]),t[o]=new Float32Array(a),"uvs"===o&&(t.isClamp=e.getTextureType(a)))}return t},t})),i("formats/collada/ColladaNode",["./ColladaUtils","../../geom/Matrix","../../geom/Vec3"],(function(e,t,n){"use strict";var r=function(e){this.children=[],this.materials=[],this.mesh="",e?(this.id=e.id,this.name=e.name,this.sid=e.sid,this.localMatrix=e.localMatrix.clone(),this.worldMatrix=e.worldMatrix.clone()):(this.id="",this.name="",this.sid="",this.localMatrix=t.fromIdentity(),this.worldMatrix=t.fromIdentity())};return r.prototype.parse=function(e,n,i){var o=[this],a=this;this.id=e.getAttribute("id"),this.sid=e.getAttribute("sid"),this.name=e.getAttribute("name"),this.children=[],this.materials=[],this.mesh="",this.localMatrix=t.fromIdentity(),this.worldMatrix=t.fromIdentity(),this.setNodeTransforms(e,i);for(var s=0;s<e.childNodes.length;s++){var u=e.childNodes[s];if(1===u.nodeType)switch(u.nodeName){case"node":if(d=(new r).parse(u,n,this.worldMatrix))for(var l=0,c=d.length;l<c;l++)this.children.push(d[l]);break;case"instance_geometry":""!==a.mesh&&(a=new r(a),o.push(a)),a.mesh=u.getAttribute("url").substr(1);var h=u.querySelectorAll("instance_material");for(l=0;l<h.length;l++){var f=h.item(l);a.materials.push({id:f.getAttribute("target").substr(1),symbol:f.getAttribute("symbol")})}break;case"instance_node":var d,p=u.getAttribute("url").substr(1),m=this.getLibraryNode(n,p);if(m&&(d=(new r).parse(m,n,this.worldMatrix)))for(l=0,c=d.length;l<c;l++)this.children.push(d[l])}}return o},r.prototype.setNodeTransforms=function(r,i){var o=t.fromIdentity(),a=t.fromIdentity(),s=t.fromIdentity(),u=t.fromIdentity();i||(i=t.fromIdentity());for(var l=[],c=0;c<r.childNodes.length;c++){var h=r.childNodes[c];if(1===h.nodeType)switch(h.nodeName){case"matrix":var f=e.bufferDataFloat32(h);o.copy(f),l.push(o);break;case"rotate":f=e.bufferDataFloat32(h),a.multiplyByRotation(f[0],f[1],f[2],f[3]),l.push(a);break;case"translate":f=e.bufferDataFloat32(h),s.multiplyByTranslation(f[0],f[1],f[2]),l.push(s);break;case"scale":f=e.bufferDataFloat32(h),u.multiplyByScale(f[0],f[1],f[2]),l.push(u)}}for(c=0;c<l.length;c++)this.localMatrix.multiplyMatrix(l[c]);this.worldMatrix.setToMultiply(i,this.localMatrix),this.normalMatrix=t.fromIdentity();var d=new n(0,0,0);this.worldMatrix.extractRotationAngles(d),this.normalMatrix.multiplyByRotation(-1,0,0,d[0]),this.normalMatrix.multiplyByRotation(0,-1,0,d[1]),this.normalMatrix.multiplyByRotation(0,0,-1,d[2])},r.prototype.getLibraryNode=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].attributes.getNamedItem("id");if(r&&r.value===t)return e[n]}return null},r})),i("formats/collada/ColladaScene",["../../error/ArgumentError","../../shaders/BasicTextureProgram","../../util/Color","../../util/Logger","../../geom/Matrix","../../geom/Position","../../pick/PickedObject","../../render/Renderable","../../geom/Vec3","../../util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l){"use strict";var c=function(t,o){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"ColladaScene","constructor","missingPosition"));s.call(this),this._position=t,this._nodes=[],this._meshes={},this._materials={},this._images={},this._upAxis="",this._dirPath="",this._xRotation=0,this._yRotation=0,this._zRotation=0,this._xTranslation=0,this._yTranslation=0,this._zTranslation=0,this._scale=1,this._altitudeMode=WorldWind.ABSOLUTE,this._localTransforms=!0,this._useTexturePaths=!0,this._nodesToHide=[],this._hideNodes=!1,this._placePoint=new u(0,0,0),this._transformationMatrix=i.fromIdentity(),this._mvpMatrix=i.fromIdentity(),this._normalTransformMatrix=i.fromIdentity(),this._normalMatrix=i.fromIdentity(),this._texCoordMatrix=i.fromIdentity().setToUnitYFlip(),this._entities=[],this._activeTexture=null,this._tmpVector=new u(0,0,0),this._tmpColor=new n(1,1,1,1),this._vboCacheKey="",this._iboCacheKey="",this._doubleSided=!1,this._computedNormals=!1,this.setSceneData(o)};return(c.prototype=Object.create(s.prototype)).constructor=c,Object.defineProperties(c.prototype,{position:{get:function(){return this._position},set:function(e){this._position=e}},nodes:{get:function(){return this._nodes},set:function(e){this._nodes=e}},meshes:{get:function(){return this._meshes},set:function(e){this._meshes=e}},materials:{get:function(){return this._materials},set:function(e){this._materials=e}},images:{get:function(){return this._images},set:function(e){this._images=e}},upAxis:{get:function(){return this._upAxis},set:function(e){this._upAxis=e}},dirPath:{get:function(){return this._dirPath},set:function(e){this._dirPath=e}},xRotation:{get:function(){return this._xRotation},set:function(e){this._xRotation=e}},yRotation:{get:function(){return this._yRotation},set:function(e){this._yRotation=e}},zRotation:{get:function(){return this._zRotation},set:function(e){this._zRotation=e}},xTranslation:{get:function(){return this._xTranslation},set:function(e){this._xTranslation=e}},yTranslation:{get:function(){return this._yTranslation},set:function(e){this._yTranslation=e}},zTranslation:{get:function(){return this._zTranslation},set:function(e){this._zTranslation=e}},scale:{get:function(){return this._scale},set:function(e){this._scale=e}},placePoint:{get:function(){return this._placePoint},set:function(e){this._placePoint=e}},altitudeMode:{get:function(){return this._altitudeMode},set:function(e){this._altitudeMode=e}},transformationMatrix:{get:function(){return this._transformationMatrix},set:function(e){this._transformationMatrix=e}},normalMatrix:{get:function(){return this._normalMatrix},set:function(e){this._normalMatrix=e}},localTransforms:{get:function(){return this._localTransforms},set:function(e){this._localTransforms=e}},useTexturePaths:{get:function(){return this._useTexturePaths},set:function(e){this._useTexturePaths=e}},nodesToHide:{get:function(){return this._nodesToHide},set:function(e){this._nodesToHide=e}},hideNodes:{get:function(){return this._hideNodes},set:function(e){this._hideNodes=e}},doubleSided:{get:function(){return this._doubleSided},set:function(e){this._doubleSided=e}},computedNormals:{get:function(){return this._computedNormals},set:function(e){this._computedNormals=e}}}),c.prototype.setSceneData=function(e){e&&(this._nodes=e.root.children,this._meshes=e.meshes,this._materials=e.materials,this._images=e.images,this._upAxis=e.metadata.up_axis,this._dirPath=e.dirPath,this.flattenModel())},c.prototype.flattenModel=function(){for(var e=0,t=this._nodes.length;e<t;e++)this.flattenNode(this._nodes[e]);this._entities.sort((function(e,t){var n=null===e.imageKey?"":""+e,r=null===t.imageKey?"":""+t;return n>r?1:n===r?0:-1}))},c.prototype.flattenNode=function(e){if(e.mesh)for(var t=e.mesh,n=this._meshes[t].buffers,r=0,i=n.length;r<i;r++){for(var o=n[r].material,a=0;a<e.materials.length;a++)if(o===e.materials[a].symbol){var s=e.materials[a].id;break}var u=this._materials[s],l=null;u&&u.textures&&n[r].uvs&&n[r].uvs.length>0&&(u.textures.diffuse?l=u.textures.diffuse.mapId:u.textures.reflective&&(l=u.textures.reflective.mapId)),this._entities.push({mesh:n[r],material:u,node:e,imageKey:l})}for(var c=0;c<e.children.length;c++)this.flattenNode(e.children[c])},c.prototype.render=function(e){var t,n=e.frustumInModelCoordinates;this.enabled&&(this.lastFrameTime!==e.timestamp&&(t=this.makeOrderedRenderable(e)),t&&n.containsPoint(this._placePoint)&&(t.layer=e.currentLayer,this.lastFrameTime=e.timestamp,e.addOrderedRenderable(t)))},c.prototype.makeOrderedRenderable=function(e){return e.surfacePointForMode(this._position.latitude,this._position.longitude,this._position.altitude,this._altitudeMode,this._placePoint),this.eyeDistance=e.eyePoint.distanceTo(this._placePoint),this},c.prototype.renderOrdered=function(e){if(this.drawOrderedScene(e),e.pickingMode){var t=new a(this.pickColor.clone(),this,this._position,this.layer,!1);e.resolvePick(t)}},c.prototype.drawOrderedScene=function(e){try{this.beginDrawing(e)}finally{this.endDrawing(e)}},c.prototype.beginDrawing=function(e){var n=e.currentGlContext,r=e.gpuResourceCache,i=r.resourceForKey(this._vboCacheKey),o=r.resourceForKey(this._iboCacheKey);i||(this.setupBuffers(e),i=r.resourceForKey(this._vboCacheKey),o=r.resourceForKey(this._iboCacheKey)),n.bindBuffer(n.ARRAY_BUFFER,i),o&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o),e.findAndBindProgram(t),n.enableVertexAttribArray(0),this._doubleSided&&n.disable(n.CULL_FACE),e.pickingMode&&(this.pickColor=e.uniquePickColor()),this.computeTransformationMatrix(e.globe);for(var a=0,s=this._entities.length;a<s;a++)this.mustRenderNode(this._entities[a].node.id)&&this.draw(e,this._entities[a])},c.prototype.rewriteBufferNormals=function(e){if(e._normalsComputed=!0,e.indexedRendering){var t=e.vertices,n=e.indices,r=e.uvs,i=e.uvs&&e.uvs.length>0,o=3*n.length,a=new Float32Array(o),s=new Float32Array(o),c=null;i&&(c=new Float32Array(2*n.length));for(var h=0,f=n.length;h<f;h+=3){for(var d=[],p=0;p<3;p++){var m=3*n[h+p],g=new u(t[m],t[m+1],t[m+2]);if(d.push(g),a[b=3*(h+p)]=t[m],a[b+1]=t[m+1],a[b+2]=t[m+2],i){var A=2*n[h+p],v=2*(h+p);c[v]=r[A],c[v+1]=r[A+1]}}var y=l.computeTriangleNormal(d[0],d[1],d[2]);for(p=0;p<3;p++){var b;s[b=3*(h+p)]=y[0],s[b+1]=y[1],s[b+2]=y[2]}}e.indexedRendering=!1,e.vertices=a,e.normals=s,e.indices=null,i&&(e.uvs=c)}return e},c.prototype.setupBuffers=function(e){for(var t=e.currentGlContext,n=Float32Array.BYTES_PER_ELEMENT||4,i=Uint16Array.BYTES_PER_ELEMENT||2,o=Uint32Array.BYTES_PER_ELEMENT||4,a=!1,s=0,u=0,l=0,c=this._entities.length;l<c;l++){this._computedNormals&&!this._entities[l].mesh._normalsComputed&&(this._entities[l].mesh=this.rewriteBufferNormals(this._entities[l].mesh));var h=this._entities[l].mesh;h.indexedRendering&&(s+=h.indices.length,h.indices instanceof Uint32Array&&(a=!0)),u+=h.vertices.length,this._entities[l].imageKey&&(u+=h.uvs.length),h.normals&&h.normals.length&&(u+=h.normals.length)}var f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,u*n,t.STATIC_DRAW);var d=0;for(l=0,c=this._entities.length;l<c;l++){var p=this._entities[l].mesh.vertices;this._entities[l].vertexOffset=d,t.bufferSubData(t.ARRAY_BUFFER,d*n,p),d+=p.length}for(l=0,c=this._entities.length;l<c;l++)this._entities[l].imageKey&&(p=this._entities[l].mesh.uvs,this._entities[l].uvOffset=d,t.bufferSubData(t.ARRAY_BUFFER,d*n,p),d+=p.length);for(l=0,c=this._entities.length;l<c;l++)(p=p=this._entities[l].mesh.normals)&&p.length&&(this._entities[l].normalOffset=d,t.bufferSubData(t.ARRAY_BUFFER,d*n,p),d+=p.length);var m,g=i,A=s*g;if(a&&((m=e.getExtension("OES_element_index_uint"))?A=s*(g=o):r.log(r.LEVEL_SEVERE,'The 3D model is too big and might not render properly. \nYour browser does not support the "OES_element_index_uint" extension, required to render large models.')),s){var v=t.createBuffer();for(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,v),t.bufferData(t.ELEMENT_ARRAY_BUFFER,A,t.STATIC_DRAW),d=0,l=0,c=this._entities.length;l<c;l++)(h=this._entities[l].mesh).indexedRendering&&((p=h.indices)instanceof Uint32Array&&!m&&(p=new Uint16Array(p)),this._entities[l].indexOffset=d,this._entities[l].indexSize=g,t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,d*g,p),d+=p.length)}this._vboCacheKey=e.gpuResourceCache.generateCacheKey(),e.gpuResourceCache.putResource(this._vboCacheKey,f,u*n),s&&(this._iboCacheKey=e.gpuResourceCache.generateCacheKey(),e.gpuResourceCache.putResource(this._iboCacheKey,v,A))},c.prototype.draw=function(e,t){var n,r=e.currentGlContext,i=e.currentProgram,o=e.gpuResourceCache,a=t.mesh,s=t.material,u=t.node.worldMatrix,l=t.node.normalMatrix;n=!this._doubleSided&&a.normals&&a.normals.length;var c=t.imageKey;if(this.applyColor(e,s),c){var h=this._useTexturePaths?this._images[c].path:this._images[c].filename,f=this._dirPath+h;if(this._activeTexture=o.resourceForKey(f),!this._activeTexture){var d=a.isClamp?r.CLAMP_TO_EDGE:r.REPEAT;this._activeTexture=o.retrieveTexture(r,f,d)}this._activeTexture&&this._activeTexture.bind(e)?(i.loadTextureEnabled(r,!0),r.vertexAttribPointer(2,2,r.FLOAT,!1,8,4*t.uvOffset),r.enableVertexAttribArray(2),i.loadModulateColor(r,e.pickingMode)):(i.loadTextureEnabled(r,!1),r.disableVertexAttribArray(2))}else i.loadTextureEnabled(r,!1),r.disableVertexAttribArray(2);if(n&&!e.pickingMode?(i.loadApplyLighting(r,1),r.vertexAttribPointer(1,3,r.FLOAT,!1,12,4*t.normalOffset),r.enableVertexAttribArray(1)):(i.loadApplyLighting(r,0),r.disableVertexAttribArray(1)),this.applyMatrix(e,n,f,u,l),r.vertexAttribPointer(0,3,r.FLOAT,!1,12,4*t.vertexOffset),a.indexedRendering){var p=t.indexOffset*t.indexSize;a.indices instanceof Uint32Array&&e.getExtension("OES_element_index_uint")?r.drawElements(r.TRIANGLES,a.indices.length,r.UNSIGNED_INT,p):r.drawElements(r.TRIANGLES,a.indices.length,r.UNSIGNED_SHORT,p)}else r.drawArrays(r.TRIANGLES,0,Math.floor(a.vertices.length/3))},c.prototype.applyColor=function(e,t){var n=e.currentGlContext,r=e.currentProgram;if(t)if("constant"===t.techniqueType)var i=t.reflective;else i=t.diffuse;var o,a=1,s=1,u=1,l=1;i&&(a=i[0],s=i[1],u=i[2],l=null!=i[3]?i[3]:1),this._tmpColor.set(a,s,u,l),o=l*this.layer.opacity,n.depthMask(o>=1||e.pickingMode),r.loadColor(n,e.pickingMode?this.pickColor:this._tmpColor),r.loadOpacity(n,e.pickingMode?o>0?1:0:o)},c.prototype.applyMatrix=function(e,t,n,r,i){this._mvpMatrix.copy(e.modelviewProjection),this._mvpMatrix.multiplyMatrix(this._transformationMatrix),r&&this._localTransforms&&this._mvpMatrix.multiplyMatrix(r),t&&!e.pickingMode&&(this._normalMatrix.copy(e.modelviewNormalTransform),this._normalMatrix.multiplyMatrix(this._normalTransformMatrix),i&&this._localTransforms&&this._normalMatrix.multiplyMatrix(i),e.currentProgram.loadModelviewInverse(e.currentGlContext,this._normalMatrix)),n&&this._activeTexture&&(e.currentProgram.loadTextureMatrix(e.currentGlContext,this._texCoordMatrix),this._activeTexture=null),e.currentProgram.loadModelviewProjection(e.currentGlContext,this._mvpMatrix)},c.prototype.endDrawing=function(e){var t=e.currentGlContext,n=e.currentProgram;this._doubleSided&&t.enable(t.CULL_FACE),t.disableVertexAttribArray(1),t.disableVertexAttribArray(2),n.loadApplyLighting(t,0),n.loadTextureEnabled(t,!1)},c.prototype.computeTransformationMatrix=function(e){this._transformationMatrix.setToIdentity(),this._transformationMatrix.multiplyByLocalCoordinateTransform(this._placePoint,e),this._transformationMatrix.multiplyByRotation(1,0,0,this._xRotation),this._transformationMatrix.multiplyByRotation(0,1,0,this._yRotation),this._transformationMatrix.multiplyByRotation(0,0,1,this._zRotation),this._transformationMatrix.multiplyByScale(this._scale,this._scale,this._scale),this._transformationMatrix.multiplyByTranslation(this._xTranslation,this._yTranslation,this._zTranslation),this.computeNormalMatrix()},c.prototype.computeNormalMatrix=function(){this._transformationMatrix.extractRotationAngles(this._tmpVector),this._normalTransformMatrix.setToIdentity(),this._normalTransformMatrix.multiplyByRotation(-1,0,0,this._tmpVector[0]),this._normalTransformMatrix.multiplyByRotation(0,-1,0,this._tmpVector[1]),this._normalTransformMatrix.multiplyByRotation(0,0,-1,this._tmpVector[2])},c.prototype.mustRenderNode=function(e){var t=!0;return this._hideNodes&&(t=-1===this._nodesToHide.indexOf(e)),t},c})),i("formats/collada/ColladaLoader",["../../error/ArgumentError","./ColladaAsset","./ColladaImage","./ColladaMaterial","./ColladaMesh","./ColladaNode","./ColladaScene","./ColladaUtils","../../util/Logger"],(function(e,t,n,r,i,o,a,s,u){"use strict";var l=function(t,n){if(!t)throw new e(u.logMessage(u.LEVEL_SEVERE,"ColladaLoader","constructor","missingPosition"));this.position=t,this.dirPath="/",this.init(n)};return l.prototype.init=function(e){e&&(this.dirPath=e.dirPath||"/"),this.scene={type:"SceneTree",dirPath:this.dirPath,images:{},metadata:{},materials:{},meshes:{},root:{children:[]}},this.xmlDoc=null},l.prototype.load=function(e,t){-1===e.indexOf("://")&&(e=this.dirPath+e),s.fetchFile(e,function(e){if(e)try{n=this.parse(e)}catch(e){n=null,u.log(u.LEVEL_SEVERE,"error parsing collada file: "+e)}else var n=null;t(n)}.bind(this))},l.prototype.parse=function(e){this.init();var n=new DOMParser;this.xmlDoc=n.parseFromString(e,"text/xml");var r=this.xmlDoc.querySelectorAll("library_nodes node"),i=this.xmlDoc.querySelectorAll("library_effects effect");return this.scene.metadata=new t(this.xmlDoc).parse(),this.parseLib("visual_scene",r),this.parseLib("library_geometries"),this.parseLib("library_materials",i),this.parseLib("library_images"),this.xmlDoc=null,new a(this.position,this.scene)},l.prototype.parseLib=function(e,t){var a=this.xmlDoc.getElementsByTagName(e),u=[];a&&a.length&&(u=a[0].childNodes);for(var l=0;l<u.length;l++){var c=u[l];if(1===c.nodeType)switch(c.nodeName){case"node":var h=(new o).parse(c,t);if(h)for(var f=0,d=h.length;f<d;f++)this.scene.root.children.push(h[f]);break;case"geometry":var p=c.getAttribute("id"),m=c.querySelector("mesh"),g=new i(p).parse(m);g&&(this.scene.meshes[p]=g);break;case"material":var A=c.getAttribute("id"),v=c.querySelector("instance_effect").getAttribute("url").substr(1),y=s.querySelectorById(t,v),b=new r(A).parse(y);b&&(this.scene.materials[A]=b);break;case"image":var _=c.getAttribute("id"),w=c.getAttribute("name"),E=new n(_,w).parse(c);E&&(this.scene.images[_]=E)}}},l})),i("shapes/Compass",["../error/ArgumentError","../util/Logger","../util/Offset","../shapes/ScreenImage"],(function(e,t,n,r){"use strict";var i=function(e,t){var i=e||new n(WorldWind.OFFSET_FRACTION,1,WorldWind.OFFSET_FRACTION,1),o=t||WorldWind.configuration.baseUrl+"images/notched-compass.png";r.call(this,i,o),e||(this.imageOffset=new n(WorldWind.OFFSET_FRACTION,1.1,WorldWind.OFFSET_FRACTION,1.1)),this.size=.15};return(i.prototype=Object.create(r.prototype)).render=function(e){this.imageRotation=e.navigator.heading,this.imageTilt=e.navigator.tilt;var t=this.getActiveTexture(e);t&&(this.imageScale=this.size*e.currentGlContext.drawingBufferWidth/t.imageWidth),r.prototype.render.call(this,e)},i})),i("layer/CompassLayer",["../shapes/Compass","../layer/RenderableLayer"],(function(e,t){"use strict";var n=function(){t.call(this,"Compass"),this._compass=new e(null,null),this.addRenderable(this._compass)};return n.prototype=Object.create(t.prototype),Object.defineProperties(n.prototype,{compass:{get:function(){return this._compass},set:function(t){t&&t instanceof e&&(this.removeAllRenderables(),this.addRenderable(t),this._compass=t)}}}),n})),i("shapes/Text",["../error/ArgumentError","../shaders/BasicTextureProgram","../util/Color","../util/Font","../util/Logger","../geom/Matrix","../pick/PickedObject","../render/Renderable","../shapes/TextAttributes","../error/UnsupportedOperationError","../geom/Vec2","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f){"use strict";var d=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Text","constructor","missingText"));s.call(this),this.attributes=new u(null),this.highlightAttributes=null,this.highlighted=!1,this.enabled=!0,this.text=t,this.altitudeMode=WorldWind.ABSOLUTE,this.pickDelegate=null,this.alwaysOnTop=!1,this.targetVisibility=1,this.currentVisibility=1,this.declutterGroup=0,this.markerImageSource=WorldWind.configuration.baseUrl+"images/white-dot.png",this.markerImageScale=.1,this.activeAttributes=null,this.activeTexture=null,this.imageTransform=o.fromIdentity(),this.imageBounds=null,this.layer=null,this.depthOffset=-.003,this.screenPoint=new h(0,0,0)};return d.matrix=o.fromIdentity(),d.glPickPoint=new h(0,0,0),(d.prototype=Object.create(s.prototype)).copy=function(e){return this.text=e.text,this.attributes=e.attributes,this.highlightAttributes=e.highlightAttributes,this.highlighted=e.highlighted,this.enabled=e.enabled,this.altitudeMode=e.altitudeMode,this.pickDelegate=e.pickDelegate,this.alwaysOnTop=e.alwaysOnTop,this.depthOffset=e.depthOffset,this.declutterGroup=e.declutterGroup,this.targetVisibility=e.targetVisibility,this.currentVisibility=e.currentVisibility,this},Object.defineProperties(d.prototype,{screenBounds:{get:function(){return this.imageBounds}}}),d.prototype.render=function(e){var t;this.enabled&&this.text&&0!==this.text.length&&e.accumulateOrderedRenderables&&((t=this.lastFrameTime!==e.timestamp?this.makeOrderedRenderable(e):this.clone().makeOrderedRenderable(e))&&t.isVisible(e)&&(t.layer=e.currentLayer,this.lastFrameTime=e.timestamp,e.addOrderedRenderable(t)))},d.prototype.renderOrdered=function(e){if((0!==this.currentVisibility||0!==this.targetVisibility||this.markerImageSource)&&(this.drawOrderedText(e),e.pickingMode)){var t=new a(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,this.position,this.layer,!1);e.resolvePick(t)}},d.prototype.makeOrderedRenderable=function(e){var t,n,r,i;return this.determineActiveAttributes(e),this.activeAttributes&&this.computeScreenPointAndEyeDistance(e)?(this.activeTexture=e.createTextTexture(this.text,this.activeAttributes),t=this.activeTexture.imageWidth,n=this.activeTexture.imageHeight,r=this.activeAttributes.scale,i=this.activeAttributes.offset.offsetForSize(t,n),this.imageTransform.setTranslation(this.screenPoint[0]-i[0]*r,this.screenPoint[1]-i[1]*r,this.screenPoint[2]),this.imageTransform.setScale(t*r,n*r,1),this.imageBounds=f.boundingRectForUnitQuad(this.imageTransform),this):null},d.prototype.computeScreenPointAndEyeDistance=function(e){throw new l(i.logMessage(i.LEVEL_SEVERE,"Renderable","render","abstractInvocation"))},d.prototype.determineActiveAttributes=function(e){this.highlighted&&this.highlightAttributes?this.activeAttributes=this.highlightAttributes:this.activeAttributes=this.attributes},d.prototype.isVisible=function(e){return e.pickingMode?e.pickRectangle&&this.imageBounds.intersects(e.pickRectangle):this.imageBounds.intersects(e.viewport)},d.prototype.drawOrderedText=function(e){this.beginDrawing(e);try{this.doDrawOrderedText(e),e.pickingMode}finally{this.endDrawing(e)}},d.prototype.drawBatchOrderedText=function(e){for(var t;(t=e.peekOrderedRenderable())&&t instanceof d;){e.popOrderedRenderable();try{t.doDrawOrderedText(e)}catch(e){i.logMessage(i.LEVEL_WARNING,"Text","drawBatchOrderedText","Error occurred while rendering text using batching: "+e.message)}}},d.prototype.beginDrawing=function(e){var n,r=e.currentGlContext;e.findAndBindProgram(t),n=e.currentProgram,r.bindBuffer(r.ARRAY_BUFFER,e.unitQuadBuffer3()),r.vertexAttribPointer(n.vertexPointLocation,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,e.unitQuadBuffer()),r.vertexAttribPointer(n.vertexTexCoordLocation,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.vertexPointLocation),r.enableVertexAttribArray(n.vertexTexCoordLocation),n.loadTextureUnit(r,r.TEXTURE0),n.loadModulateColor(r,!1),r.depthMask(!1)},d.prototype.endDrawing=function(e){var t=e.currentGlContext,n=e.currentProgram;t.disableVertexAttribArray(n.vertexPointLocation),t.disableVertexAttribArray(n.vertexTexCoordLocation),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindTexture(t.TEXTURE_2D,null),t.depthMask(!0)},d.prototype.doDrawOrderedText=function(e){var t=e.currentGlContext,r=e.currentProgram;if(!e.pickingMode&&this.currentVisibility!==this.targetVisibility){var i=(e.timestamp-e.previousRedrawTimestamp)/e.fadeTime;this.currentVisibility<this.targetVisibility?this.currentVisibility=Math.min(1,this.currentVisibility+i):this.currentVisibility=Math.max(0,this.currentVisibility-i),e.redrawRequested=!0}this.activeAttributes.depthTest||t.disable(t.DEPTH_TEST),e.pickingMode?(this.pickColor=e.uniquePickColor(),r.loadColor(t,this.pickColor),r.loadOpacity(t,1),r.loadTextureEnabled(t,!1)):(r.loadColor(t,n.WHITE),r.loadOpacity(t,this.layer.opacity*this.currentVisibility)),this.currentVisibility>0&&this.drawLabel(e),this.currentVisibility<1&&this.markerImageSource&&this.drawMarker(e),this.activeAttributes.depthTest||t.enable(t.DEPTH_TEST)},d.prototype.drawLabel=function(e){var t,n=e.currentGlContext,r=e.currentProgram;!e.pickingMode&&this.activeTexture&&(d.matrix.setToIdentity(),d.matrix.multiplyByTextureTransform(this.activeTexture),t=this.activeTexture.bind(e),r.loadTextureEnabled(n,t),r.loadTextureMatrix(n,d.matrix)),d.matrix.copy(e.screenProjection),d.matrix.multiplyMatrix(this.imageTransform),r.loadModelviewProjection(n,d.matrix),n.drawArrays(n.TRIANGLE_STRIP,0,4)},d.prototype.drawMarker=function(e){var t,n=e.currentGlContext,r=e.currentProgram,i=e.gpuResourceCache.resourceForKey(this.markerImageSource);if(i){e.pickingMode||(d.matrix.setToIdentity(),d.matrix.multiplyByTextureTransform(i),t=i.bind(e),r.loadTextureEnabled(n,t),r.loadTextureMatrix(n,d.matrix),r.loadOpacity(n,this.layer.opacity*(1-this.currentVisibility)));var o=this.markerImageScale;d.matrix.copy(e.screenProjection),d.matrix.multiplyByTranslation(this.screenPoint[0]-o*i.imageWidth/2,this.screenPoint[1]-o*i.imageWidth/2,this.screenPoint[2]),d.matrix.multiplyByScale(i.imageWidth*o,i.imageHeight*o,1),r.loadModelviewProjection(n,d.matrix),n.drawArrays(n.TRIANGLE_STRIP,0,4)}else e.gpuResourceCache.retrieveTexture(e.currentGlContext,this.markerImageSource)},d})),i("shapes/ScreenText",["../error/ArgumentError","../util/Logger","../util/Offset","../shapes/Text"],(function(e,t,n,r){"use strict";var i=function(n,i){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Text","constructor","missingOffset"));r.call(this,i),this.screenOffset=n,this.altitudeMode=null};return(i.prototype=Object.create(r.prototype)).render=function(e){this.lastFrameTime!==e.timestamp&&r.prototype.render.call(this,e)},i.prototype.computeScreenPointAndEyeDistance=function(e){var t=e.currentGlContext,n=this.screenOffset.offsetForSize(t.drawingBufferWidth,t.drawingBufferHeight);return this.screenPoint[0]=n[0],this.screenPoint[1]=n[1],this.screenPoint[2]=0,this.eyeDistance=0,!0},i})),i("layer/CoordinatesDisplayLayer",["../error/ArgumentError","../util/Color","../util/Font","../layer/Layer","../util/Logger","../util/Offset","../geom/Position","../shapes/ScreenImage","../shapes/ScreenText","../shapes/TextAttributes","../geom/Vec2"],(function(e,t,n,r,i,o,a,s,u,l,c){"use strict";var h=function(n){function a(e){f.handleUIEvent(e)}if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"CoordinatesDisplayLayer","constructor","missingWorldWindow"));r.call(this,"Coordinates"),this.wwd=n,this.pickEnabled=!1,this.eventType=null,this.clientX=null,this.clientY=null,this.terrainPosition=null,this.latText=new u(new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0)," "),this.latText.attributes=new l(null),this.latText.attributes.color=t.YELLOW,this.lonText=new u(new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0)," "),this.lonText.attributes=new l(null),this.lonText.attributes.color=t.YELLOW,this.elevText=new u(new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0)," "),this.elevText.attributes=new l(null),this.elevText.attributes.color=t.YELLOW,this.eyeText=new u(new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0)," "),this.eyeText.attributes=new l(null),this.eyeText.attributes.color=t.YELLOW;var c=new o(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,.5),h=WorldWind.configuration.baseUrl+"images/crosshair.png";this.crosshairImage=new s(c,h);var f=this;window.PointerEvent?(n.addEventListener("pointerdown",a),n.addEventListener("pointermove",a),n.addEventListener("pointerleave",a)):(n.addEventListener("mousedown",a),n.addEventListener("mousemove",a),n.addEventListener("mouseleave",a),n.addEventListener("touchstart",a),n.addEventListener("touchmove",a)),this.wwd.redrawCallbacks.push((function(e,t){f.handleRedraw(t)}))};return(h.prototype=Object.create(r.prototype)).doRender=function(e){var t,n,r,i,a,s=this.terrainPosition,u=e.eyePosition,l=e.currentGlContext.canvas.clientWidth;l>650?(t=l/2-50,n=11,r=WorldWind.OFFSET_PIXELS,i=0):l>400?(t=60,n=5,r=WorldWind.OFFSET_INSET_PIXELS,i=1):(t=60,n=5,r=WorldWind.OFFSET_INSET_PIXELS,i=1,a=!0),this.latText.text=s?this.formatLatitude(s.latitude):null,this.latText.screenOffset=new o(WorldWind.OFFSET_PIXELS,t,r,n),this.latText.attributes.offset=new o(WorldWind.OFFSET_FRACTION,1,WorldWind.OFFSET_FRACTION,i),this.latText.render(e),t+=70,this.lonText.text=s?this.formatLongitude(s.longitude):null,this.lonText.screenOffset=new o(WorldWind.OFFSET_PIXELS,t,r,n),this.lonText.attributes.offset=new o(WorldWind.OFFSET_FRACTION,1,WorldWind.OFFSET_FRACTION,i),this.lonText.render(e),e.globe.is2D()||(t+=70,this.elevText.text=s?this.formatAltitude(s.altitude,"m"):null,this.elevText.screenOffset=new o(WorldWind.OFFSET_PIXELS,t,r,n),this.elevText.attributes.offset=new o(WorldWind.OFFSET_FRACTION,1,WorldWind.OFFSET_FRACTION,i),this.elevText.render(e)),a||(t+=40,this.eyeText.text="Eye  "+this.formatAltitude(u.altitude,u.altitude<1e3?"m":"km"),this.eyeText.screenOffset=new o(WorldWind.OFFSET_PIXELS,t,r,n),this.eyeText.attributes.offset=new o(WorldWind.OFFSET_FRACTION,0,WorldWind.OFFSET_FRACTION,i),this.eyeText.render(e)),"touch"===this.eventType&&this.crosshairImage.render(e),this.inCurrentFrame=!0},h.prototype.handleUIEvent=function(e){-1!==e.type.indexOf("pointer")?this.eventType=e.pointerType:-1!==e.type.indexOf("mouse")?this.eventType="mouse":-1!==e.type.indexOf("touch")&&(this.eventType="touch"),-1!==e.type.indexOf("leave")?(this.clientX=null,this.clientY=null):(this.clientX=e.clientX,this.clientY=e.clientY),this.wwd.redraw()},h.prototype.handleRedraw=function(e){var t,n;e===WorldWind.BEFORE_REDRAW&&(("mouse"===this.eventType||"pen"===this.eventType)&&this.clientX&&this.clientY?(t=this.wwd.canvasCoordinates(this.clientX,this.clientY))[0]>=0&&t[0]<this.wwd.canvas.width&&t[1]>=0&&t[1]<this.wwd.canvas.height&&(n=this.wwd.pickTerrain(t).terrainObject()):"touch"===this.eventType&&(t=new c(this.wwd.canvas.width/2,this.wwd.canvas.height/2),n=this.wwd.pickTerrain(t).terrainObject()),this.terrainPosition=n?n.position:null)},h.prototype.formatLatitude=function(e){var t=e<0?"\xb0S":"\xb0N";return Math.abs(e).toFixed(2)+t},h.prototype.formatLongitude=function(e){var t=e<0?"\xb0W":"\xb0E";return Math.abs(e).toFixed(2)+t},h.prototype.formatAltitude=function(e,t){return"km"===t&&(e/=1e3),e.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")+" "+t},h})),i("util/Date",[],(function(){"use strict";var e=function(e){this._date=e?new Date(e):new Date};return(e.prototype=Object.create(Date.prototype)).isAfter=function(e){return-1==this.compare(e)},e.prototype.isBefore=function(e){return 1==this.compare(e)},e.prototype.valueOf=function(){return this._date.valueOf()},e.prototype.getTime=function(){return this._date.getTime()},e.prototype.compare=function(e){var t=this._date.valueOf(),n=e.valueOf();return t>n?-1:t<n?1:0},e})),i("layer/DigitalGlobeTiledImageLayer",["../geom/Angle","../error/ArgumentError","../util/Color","../geom/Location","../util/Logger","../geom/Sector","../layer/MercatorTiledImageLayer"],(function(e,t,n,r,i,o,a){"use strict";var s=function(e,n,s){if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"DigitalGlobeTiledImageLayer","constructor","The map ID is null or undefined."));if(!s)throw new t(i.logMessage(i.LEVEL_SEVERE,"DigitalGlobeTiledImageLayer","constructor","The access token is null or undefined."));this.imageSize=256,e=e||"Digital Globe",a.call(this,new o(-85.05,85.05,-180,180),new r(85.05,180),19,"image/jpeg",e,this.imageSize,this.imageSize),this.mapId=n,this.accessToken=s,this.displayName=e,this.pickEnabled=!0,this.destCanvas=document.createElement("canvas"),this.destContext=this.destCanvas.getContext("2d"),this.requestMetadata();var u=this;this.urlBuilder={urlForTile:function(e,t){return u.metadataRetrievalInProcess?null:u.urlTemplate.replace("{z}",e.level.levelNumber+1).replace("{x}",e.column).replace("{y}",e.row)}}};return(s.prototype=Object.create(a.prototype)).requestMetadata=function(){if(!this.metadataRetrievalInProcess){this.metadataRetrievalInProcess=!0;var e="https://api.mapbox.com/v4/"+this.mapId+".json?secure&access_token="+this.accessToken,t=new XMLHttpRequest,n=this;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=JSON.parse(t.responseText);n.urlTemplate=e.tiles[0];var r=document.createEvent("Event");r.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(r),n.metadataRetrievalInProcess=!1}},t.open("GET",e,!0),t.send()}},s.prototype.doRender=function(e){a.prototype.doRender.call(this,e),this.inCurrentFrame&&e.screenCreditController.addCredit("\xa9 Digital Globe",n.DARK_GRAY)},s.prototype.createTopLevelTiles=function(e){this.topLevelTiles=[],this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),0,0)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),0,1)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),1,0)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),1,1))},s.prototype.mapSizeForLevel=function(e){return 256<<e+1},s})),i("util/FrameStatistics",[],(function(){"use strict";var e=function(){this.frameCount=0,this.frameTimeCumulative=0,this.frameTimeBase=0,this.frameTimeExtremes=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],this.frameTime=0,this.tessellationTime=0,this.layerRenderingTime=0,this.orderedRenderingTime=0,this.terrainTileCount=0,this.imageTileCount=0,this.renderedTileCount=0,this.tileUpdateCount=0,this.textureLoadCount=0,this.vboLoadCount=0,this.frameTimeAverage=0,this.frameRateAverage=0,this.frameTimeMin=0,this.frameTimeMax=0};return e.prototype.beginFrame=function(){this.frameTime=Date.now(),this.tessellationTime=0,this.layerRenderingTime=0,this.orderedRenderingTime=0,this.terrainTileCount=0,this.imageTileCount=0,this.renderedTileCount=0,this.tileUpdateCount=0,this.textureLoadCount=0,this.vboLoadCount=0,++this.frameCount},e.prototype.endFrame=function(){var e=Date.now();this.frameTime=e-this.frameTime,this.frameTimeCumulative+=this.frameTime,this.frameTimeExtremes[0]=Math.min(this.frameTimeExtremes[0],this.frameTime),this.frameTimeExtremes[1]=Math.max(this.frameTimeExtremes[1],this.frameTime),e-this.frameTimeBase>2e3&&(this.frameTimeAverage=this.frameTimeCumulative/this.frameCount,this.frameRateAverage=1e3*this.frameCount/(e-this.frameTimeBase),this.frameTimeMin=this.frameTimeExtremes[0],this.frameTimeMax=this.frameTimeExtremes[1],this.frameCount=0,this.frameTimeCumulative=0,this.frameTimeBase=e,this.frameTimeExtremes=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY])},e.prototype.incrementRenderedTileCount=function(e){this.renderedTileCount+=e},e.prototype.setTerrainTileCount=function(e){this.terrainTileCount=e},e.prototype.incrementImageTileCount=function(e){this.imageTileCount=e},e.prototype.incrementTileUpdateCount=function(e){this.tileUpdateCount+=e},e.prototype.incrementTextureLoadCount=function(e){this.textureLoadCount+=e},e.prototype.incrementVboLoadCount=function(e){this.vboLoadCount+=e},e})),i("render/FramebufferTexture",["../error/ArgumentError","../util/Logger","../util/WWMath"],(function(e,t){"use strict";var n=function(n,r,i,o){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"FramebufferTexture","constructor","missingGlContext"));if(r<0||i<0)throw new e(t.logMessage(t.LEVEL_SEVERE,"FramebufferTexture","constructor","The framebuffer width or height is less than zero."));this.width=r,this.height=i,this.depth=o,this.size=r*i*4+(o?r*i*2:0),this.framebufferId=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,this.framebufferId),this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r,i,0,n.RGBA,n.UNSIGNED_BYTE,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture,0),this.depthBuffer=null,o&&(this.depthBuffer=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.depthBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r,i),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer));var a=n.checkFramebufferStatus(n.FRAMEBUFFER);a!=n.FRAMEBUFFER_COMPLETE&&(t.logMessage(t.LEVEL_WARNING,"FramebufferTexture","constructor","Error creating framebuffer: "+a),this.framebufferId=null,this.texture=null,this.depthBuffer=null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)};return n.prototype.bind=function(e){return this.texture&&e.currentGlContext.bindTexture(gl.TEXTURE_2D,this.texture),!!this.texture},n})),i("render/FramebufferTile",["../error/ArgumentError","../render/FramebufferTexture","../util/Logger","../geom/Matrix","../geom/Rectangle","../render/TextureTile"],(function(e,t,n,r,i,o){"use strict";var a=function(t,i,a,s,u){if(!u||u.length<1)throw new e(n.logMessage(n.LEVEL_SEVERE,"FramebufferTile","constructor","The specified cache name is null, undefined or zero length."));o.call(this,t,i,a,s),this.gpuCacheKey=u,this.textureTransform=r.fromIdentity().setToUnitYFlip(),this.mustClear=!0};return(a.prototype=Object.create(o.prototype)).clearFramebuffer=function(e){this.mustClear=!0},a.prototype.bindFramebuffer=function(e){var t=e.gpuResourceCache.resourceForKey(this.gpuCacheKey);return t||(t=this.createFramebuffer(e)),e.bindFramebuffer(t),this.mustClear&&(this.doClearFramebuffer(e),this.mustClear=!1),!0},a.prototype.createFramebuffer=function(e){var n=new t(e.currentGlContext,this.tileWidth,this.tileHeight,!1);return e.gpuResourceCache.putResource(this.gpuCacheKey,n,n.size),n},a.prototype.doClearFramebuffer=function(e){var t=e.currentGlContext;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},a.prototype.applyInternalTransform=function(e,t){t.multiplyMatrix(this.textureTransform)},a})),i("render/FramebufferTileController",["../error/ArgumentError","../render/FramebufferTile","../util/LevelSet","../geom/Location","../util/Logger","../cache/MemoryCache","../geom/Sector","../util/Tile"],(function(e,t,n,r,i,o,a,s){"use strict";var u=function e(){this.tileWidth=256,this.tileHeight=256,this.detailControl=1.75,this.levels=new n(a.FULL_SPHERE,new r(45,45),16,this.tileWidth,this.tileHeight),this.topLevelTiles=[],this.currentTiles=[],this.currentTimestamp=null,this.currentGlobeStateKey=null,this.tileCache=new o(5e5,4e5),this.key="FramebufferTileController "+ ++e.keyPool};return u.keyPool=0,u.prototype.selectTiles=function(t,n){if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"FramebufferTileController","selectTiles","missingSector"));this.assembleTiles(t);for(var r=[],o=0,a=this.currentTiles.length;o<a;o++){var s=this.currentTiles[o];s.sector.overlaps(n)&&(s.selected=!0,r.push(s))}return r},u.prototype.render=function(e){if(0!=this.currentTiles.length){for(var t=[],n=0,r=this.currentTiles.length;n<r;n++){var i=this.currentTiles[n];i.selected&&t.push(i)}e.surfaceTileRenderer.renderTiles(e,t,1);var o=e.currentGlContext,a=e.currentFramebuffer;try{for(o.clearColor(0,0,0,0),n=0,r=t.length;n<r;n++)(i=t[n]).selected=!1,i.bindFramebuffer(e),o.clear(o.COLOR_BUFFER_BIT)}finally{e.bindFramebuffer(a)}}},u.prototype.assembleTiles=function(e){var t=e.timestamp,n=e.globeStateKey;this.currentTimestamp==t&&this.currentGlobeStateKey==n||(this.doAssembleTiles(e),this.currentTimestamp=t,this.currentGlobeStateKey=n)},u.prototype.doAssembleTiles=function(e){if(this.currentTiles=[],e.terrain){0==this.topLevelTiles.length&&this.createTopLevelTiles();for(var t=0,n=this.topLevelTiles.length;t<n;t++){var r=this.topLevelTiles[t];r.update(e),this.isTileVisible(e,r)&&this.addTileOrDescendants(e,r)}}},u.prototype.createTile=function(e,n,r,i){var o=this.key+" "+n.levelNumber+"."+r+"."+i;return new t(e,n,r,i,o)},u.prototype.createTopLevelTiles=function(){s.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles)},u.prototype.addTileOrDescendants=function(e,t){if(this.tileMeetsRenderingCriteria(e,t))this.addTile(t);else for(var n=t.subdivideToCache(t.level.nextLevel(),this,this.tileCache),r=0,i=n.length;r<i;r++){var o=n[r];o.update(e),this.isTileVisible(e,o)&&this.addTileOrDescendants(e,o)}},u.prototype.addTile=function(e){this.currentTiles.push(e)},u.prototype.isTileVisible=function(e,t){return!(e.globe.projectionLimits&&!t.sector.overlaps(e.globe.projectionLimits))&&(e.pickingMode?t.extent.intersectsFrustum(e.pickFrustum):t.extent.intersectsFrustum(e.frustumInModelCoordinates))},u.prototype.tileMeetsRenderingCriteria=function(e,t){var n=this.detailControl;return(t.sector.minLatitude>=75||t.sector.maxLatitude<=-75)&&(n*=1.2),t.level.isLastLevel()||!t.mustSubdivide(e,n)},u})),i("globe/ElevationModel",["../error/ArgumentError","../geom/Angle","../geom/Location","../util/Logger"],(function(e,t,n,r){"use strict";var i=function(){this.id=0,this.stateKey="",this.coverages=[],this.scratchLocation=new n(0,0),this.computeStateKey()};return Object.defineProperties(i.prototype,{timestamp:{get:function(){var e,t,n=0;for(e=0,t=this.coverages.length;e<t;e++){var r=this.coverages[e];n<r.timestamp&&(n=r.timestamp)}return n}},minElevation:{get:function(){for(var e=Number.MAX_VALUE,t=0,n=this.coverages.length;t<n;t++){var r=this.coverages[t];r.enabled&&r.minElevation<e&&(e=r.minElevation)}return e!==Number.MAX_VALUE?e:0}},maxElevation:{get:function(){for(var e=-Number.MAX_VALUE,t=0,n=this.coverages.length;t<n;t++){var r=this.coverages[t];r.enabled&&r.maxElevation>e&&(e=r.maxElevation)}return e!==-Number.MAX_VALUE?e:0}}}),i.idPool=0,i.prototype.computeStateKey=function(){this.id=++i.idPool,this.stateKey="elevationModel "+this.id.toString()+" "},i.prototype.coverageComparator=function(e,t){var n=e.resolution,r=t.resolution;return n>r?-1:n===r?0:1},i.prototype.performCoverageListChangedActions=function(){this.coverages.length>1&&this.coverages.sort(this.coverageComparator),this.computeStateKey()},i.prototype.addCoverage=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","addCoverage","missingCoverage"));return!this.containsCoverage(t)&&(this.coverages.push(t),this.performCoverageListChangedActions(),!0)},i.prototype.removeAllCoverages=function(){this.coverages.length>0&&(this.coverages=[],this.performCoverageListChangedActions())},i.prototype.removeCoverage=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","removeCoverage","missingCoverage"));var n=this.coverages.indexOf(t);n>=0&&(this.coverages.splice(n,1),this.performCoverageListChangedActions())},i.prototype.containsCoverage=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","containsCoverage","missingCoverage"));return this.coverages.indexOf(t)>=0},i.prototype.minAndMaxElevationsForSector=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","minAndMaxElevationsForSector","missingSector"));for(var n=[Number.MAX_VALUE,-Number.MAX_VALUE],i=this.coverages.length-1;i>=0;i--){var o=this.coverages[i];if(o.enabled&&o.coverageSector.intersects(t)&&o.minAndMaxElevationsForSector(t,n))break}return n[0]!==Number.MAX_VALUE?n:[0,0]},i.prototype.elevationAtLocation=function(e,t){var n;for(n=this.coverages.length-1;n>=0;n--){var r=this.coverages[n];if(r.enabled&&r.coverageSector.containsLocation(e,t)){var i=r.elevationAtLocation(e,t);if(null!==i)return i}}return 0},i.prototype.preferredCoverageIndex=function(e,t,n){var r,i=this.coverages.length,o=Number.MAX_VALUE,a=-1;for(r=0;r<i;r++){var s=this.coverages[r];if(s.enabled&&(null!==e&&s.coverageSector.intersects(e)||null!==t&&s.coverageSector.containsLocation(t.latitude,t.longitude))){var u=Math.abs(s.resolution-n);if(u>o)return a;o=u,a=r}}return a},i.prototype.bestCoverageAtLocation=function(t,n,i){if(!i||i<0)throw new e(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","bestCoverageAtLocation","invalidResolution"));this.scratchLocation.set(t,n);var o=this.preferredCoverageIndex(null,this.scratchLocation,i);return o>=0?this.coverages[o]:null},i.prototype.elevationsForGrid=function(t,n,i,o,a){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","elevationsForGrid","missingSector"));if(!n||!i||n<1||i<1)throw new e(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","elevationsForGrid","The specified number of latitudinal or longitudinal positions is less than one."));if(!o)throw new e(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","elevationsForGrid","missingTargetResolution"));if(!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","elevationsForGrid","missingResult"));a.fill(NaN);var s=Number.MAX_VALUE,u=!1,l=this.preferredCoverageIndex(t,null,o);if(l>=0)for(var c=l;!u&&c>=0;c--){var h=this.coverages[c];h.enabled&&h.coverageSector.intersects(t)&&(u=h.elevationsForGrid(t,n,i,a))&&(s=h.resolution)}if(!u){var f=a.length;for(c=0;c<f;c++)isNaN(a[c])&&(a[c]=0)}return s},i})),i("projections/GeographicProjection",["../error/ArgumentError","../util/Logger","../geom/Sector","../error/UnsupportedOperationError"],(function(e,t,n,r){"use strict";var i=function(e,t,n){this.displayName=e||"Geographic Projection",this.continuous=t,this.projectionLimits=n,this.is2D=!0};return i.prototype.geographicToCartesian=function(e,n,i,o,a,s){throw new r(t.logMessage(t.LEVEL_SEVERE,"GeographicProjection","geographicToCartesian","abstractInvocation"))},i.prototype.geographicToCartesianGrid=function(e,n,i,o,a,s,u,l){throw new r(t.logMessage(t.LEVEL_SEVERE,"GeographicProjection","geographicToCartesianGrid","abstractInvocation"))},i.prototype.cartesianToGeographic=function(e,n,i,o,a,s){throw new r(t.logMessage(t.LEVEL_SEVERE,"GeographicProjection","cartesianToGeographic","abstractInvocation"))},i.prototype.northTangentAtLocation=function(n,r,i,o){if(!o)throw new e(t.logMessage(t.LEVEL_SEVERE,"ProjectionEquirectangular","northTangentAtLocation","missingResult"));return o[0]=0,o[1]=1,o[2]=0,o},i.prototype.northTangentAtPoint=function(n,r,i,o,a,s){if(!s)throw new e(t.logMessage(t.LEVEL_SEVERE,"ProjectionEquirectangular","northTangentAtPoint","missingResult"));return s[0]=0,s[1]=1,s[2]=0,s},i.prototype.surfaceNormalAtLocation=function(n,r,i,o){if(!o)throw new e(t.logMessage(t.LEVEL_SEVERE,"GeographicProjection","surfaceNormalAtLocation","missingResult"));return o[0]=0,o[1]=0,o[2]=1,o},i.prototype.surfaceNormalAtPoint=function(n,r,i,o,a){if(!a)throw new e(t.logMessage(t.LEVEL_SEVERE,"GeographicProjection","surfaceNormalAtPoint","missingResult"));return a[0]=0,a[1]=0,a[2]=1,a},i})),i("projections/ProjectionWgs84",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger","../geom/Position","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a){"use strict";var s=function(){n.call(this,"WGS84",!1,null),this.is2D=!1,this.scratchPosition=new i(0,0,0)};return s.prototype=Object.create(n.prototype),Object.defineProperties(s.prototype,{stateKey:{get:function(){return"projection wgs84 "}}}),s.prototype.geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionWgs84","geographicToCartesian","missingGlobe"));var l=Math.cos(i*e.DEGREES_TO_RADIANS),c=Math.sin(i*e.DEGREES_TO_RADIANS),h=Math.cos(o*e.DEGREES_TO_RADIANS),f=Math.sin(o*e.DEGREES_TO_RADIANS),d=n.equatorialRadius/Math.sqrt(1-n.eccentricitySquared*c*c);return u[0]=(d+a)*l*f,u[1]=(d*(1-n.eccentricitySquared)+a)*c,u[2]=(d+a)*l*h,u},s.prototype.geographicToCartesianGrid=function(n,i,a,s,u,l,c,h){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionWgs84","geographicToCartesianGrid","missingGlobe"));var f,d,p,m,g,A,v,y,b=i.minLatitude*e.DEGREES_TO_RADIANS,_=i.maxLatitude*e.DEGREES_TO_RADIANS,w=i.minLongitude*e.DEGREES_TO_RADIANS,E=i.maxLongitude*e.DEGREES_TO_RADIANS,x=(_-b)/(a>1?a-1:1),S=(E-w)/(s>1?s-1:1),T=l||new o(0,0,0),M=0,L=0,C=new Float64Array(s),R=new Float64Array(s);for(d=0,m=w;d<s;d++,m+=S)d===s-1&&(m=E),C[d]=Math.cos(m),R[d]=Math.sin(m);for(f=0,p=b;f<a;f++,p+=x)for(f===a-1&&(p=_),v=Math.cos(p),y=Math.sin(p),g=n.equatorialRadius/Math.sqrt(1-n.eccentricitySquared*y*y),d=0;d<s;d++)A=u[M++],h[L++]=(g+A)*v*R[d]-T[0],h[L++]=(g*(1-n.eccentricitySquared)+A)*y-T[1],h[L++]=(g+A)*v*C[d]-T[2];return h},s.prototype.cartesianToGeographic=function(n,i,o,s,u,l){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionWgs84","cartesianToGeographic","missingGlobe"));var c,h,f,d,p,m,g,A,v,y,b,_,w,E,x,S=s,T=i,M=o,L=S*S+T*T,C=Math.sqrt(L),R=n.equatorialRadius,O=1/(R*R),I=n.eccentricitySquared,P=I*I,k=L*O,N=M*M*(1-I)*O,D=(k+N-P)/6,F=8*D*D*D+P*k*N;return F>0||0!=N?(F>0?(d=Math.sqrt(F),p=Math.sqrt(P*k*N),f=F>10*I?D+.5*(m=a.cbrt((d+p)*(d+p)))+2*D*D/m:D+.5*a.cbrt((d+p)*(d+p))+.5*a.cbrt((d-p)*(d-p))):(d=Math.sqrt(-F),p=Math.sqrt(-8*D*D*D),m=Math.sqrt(P*k*N),g=2*Math.atan2(m,d+p)/3,f=-4*D*Math.sin(g)*Math.cos(Math.PI/6+g)),v=I*(f+(A=Math.sqrt(f*f+P*N))-N)/(2*A),b=(y=(f+A)/(Math.sqrt(v*v+f+A)+v))*C/(y+I),c=(y+I-1)*(_=Math.sqrt(b*b+M*M))/y,h=2*Math.atan2(M,_+b)):(c=-R*(d=Math.sqrt(1-I))*(p=Math.sqrt(I-k))/(w=Math.sqrt(I)),h=p/(w*p+d*Math.sqrt(k))),E=((x=Math.sqrt(2))-1)*T<C+S?2*Math.atan2(T,C+S):C+T<(x+1)*S?.5*-Math.PI+2*Math.atan2(S,C-T):.5*Math.PI-2*Math.atan2(S,C+T),l.latitude=e.RADIANS_TO_DEGREES*h,l.longitude=e.RADIANS_TO_DEGREES*E,l.altitude=c,l},s.prototype.northTangentAtLocation=function(t,n,r,i){var o=Math.cos(n*e.DEGREES_TO_RADIANS),a=Math.cos(r*e.DEGREES_TO_RADIANS),s=Math.sin(n*e.DEGREES_TO_RADIANS),u=Math.sin(r*e.DEGREES_TO_RADIANS);return i[0]=-s*u,i[1]=o,i[2]=-s*a,i.normalize()},s.prototype.northTangentAtPoint=function(e,t,n,r,i,a){return this.cartesianToGeographic(e,t,n,r,o.ZERO,this.scratchPosition),this.northTangentAtLocation(e,this.scratchPosition.latitude,this.scratchPosition.longitude,a)},s.prototype.surfaceNormalAtLocation=function(t,n,r,i){var o=Math.cos(n*e.DEGREES_TO_RADIANS),a=Math.cos(r*e.DEGREES_TO_RADIANS),s=Math.sin(n*e.DEGREES_TO_RADIANS),u=Math.sin(r*e.DEGREES_TO_RADIANS);return i[0]=o*u,i[1]=s,i[2]=o*a,i.normalize()},s.prototype.surfaceNormalAtPoint=function(e,n,i,o,a){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionWgs84","surfaceNormalAtPoint","missingGlobe"));var s=e.equatorialRadius*e.equatorialRadius,u=e.polarRadius*e.polarRadius;return a[0]=n/s,a[1]=i/u,a[2]=o/s,a.normalize()},s})),i("globe/Terrain",["../error/ArgumentError","../util/Logger","../geom/Vec3"],(function(e,t,n){"use strict";var r=function(e,t,n,r){this.globe=e,this.verticalExaggeration=r,this.sector=n.sector,this.tessellator=t,this.surfaceGeometry=n.tileArray,this.stateKey=e.stateKey+" ve "+r.toString()};return r.scratchPoint=new n(0,0,0),r.prototype.surfacePoint=function(n,i,o,a){if(!a)throw new e(t.logMessage(t.LEVEL_SEVERE,"Terrain","surfacePoint","missingResult"));for(var s=0,u=this.surfaceGeometry.length;s<u;s++)if(this.surfaceGeometry[s].sector.containsLocation(n,i)){if(this.surfaceGeometry[s].surfacePoint(n,i,a),o){var l=this.globe.surfaceNormalAtPoint(a[0],a[1],a[2],r.scratchPoint);a[0]+=l[0]*o,a[1]+=l[1]*o,a[2]+=l[2]*o}return a}var c=o+this.globe.elevationAtLocation(n,i)*this.verticalExaggeration;return this.globe.computePointFromPosition(n,i,c,a),a},r.prototype.surfacePointForMode=function(n,r,i,o,a){if(!a)throw new e(t.logMessage(t.LEVEL_SEVERE,"Terrain","surfacePointForMode","missingResult"));if(o||(o=WorldWind.ABSOLUTE),o===WorldWind.CLAMP_TO_GROUND)return this.surfacePoint(n,r,0,a);if(o===WorldWind.RELATIVE_TO_GROUND)return this.surfacePoint(n,r,i,a);var s=i*this.verticalExaggeration;return this.globe.computePointFromPosition(n,r,s,a),a},r.prototype.beginRendering=function(e){this.globe&&this.globe.tessellator&&this.globe.tessellator.beginRendering(e)},r.prototype.endRendering=function(e){this.globe&&this.globe.tessellator&&this.globe.tessellator.endRendering(e)},r.prototype.beginRenderingTile=function(n,r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"Terrain","beginRenderingTile","missingTile"));this.globe&&this.globe.tessellator&&this.globe.tessellator.beginRenderingTile(n,r)},r.prototype.endRenderingTile=function(e,t){},r.prototype.renderTile=function(n,r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"Terrain","renderTile","missingTile"));this.globe&&this.globe.tessellator&&this.globe.tessellator.renderTile(n,r)},r.prototype.pick=function(e){this.globe&&this.globe.tessellator&&this.globe.tessellator.pick(e,this.surfaceGeometry,this)},r})),i("globe/TerrainTile",["../error/ArgumentError","../util/Logger","../geom/Matrix","../util/Tile"],(function(e,t,n,r){"use strict";var i=function(e,t,i,o){r.call(this,e,t,i,o),this.transformationMatrix=n.fromIdentity(),this.points=null,this.pointsStateKey=null,this.pointsVboStateKey=null,this.neighborMap={},this.neighborMap[WorldWind.NORTH]=null,this.neighborMap[WorldWind.SOUTH]=null,this.neighborMap[WorldWind.EAST]=null,this.neighborMap[WorldWind.WEST]=null,this._stateKey=null,this._elevationTimestamp=null,this.scratchArray=[]};return i.prototype=Object.create(r.prototype),Object.defineProperties(i.prototype,{stateKey:{get:function(){return this._stateKey||(this._stateKey=this.computeStateKey()),this._stateKey}}}),i.prototype.neighborLevel=function(e){return this.neighborMap[e]},i.prototype.setNeighborLevel=function(e,t){this.neighborMap[e]=t,this._stateKey=null},i.prototype.surfacePoint=function(n,r,i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"TerrainTile","surfacePoint","missingResult"));var o,a,s,u,l,c,h,f,d,p,m=this.sector,g=m.minLatitude,A=m.maxLatitude,v=m.minLongitude,y=m.maxLongitude,b=this.tileWidth,_=this.tileHeight;a=(n-g)/(A-g)*_,s=(o=(r-v)/(y-v)*b)<b?Math.floor(o):b-1,u=a<_?Math.floor(a):_-1,l=b+1,c=this.points,h=this.scratchArray,f=3*(s+u*l);for(var w=0;w<6;w++)h[w]=c[f+w];f=3*(s+(u+1)*l);for(var E=6;E<12;E++)h[E]=c[f+(E-6)];return(d=o<b?o-Math.floor(o):1)>(p=a<_?a-Math.floor(a):1)?(i[0]=h[0]+d*(h[3]-h[0])+p*(h[6]-h[0]),i[1]=h[1]+d*(h[4]-h[1])+p*(h[7]-h[1]),i[2]=h[2]+d*(h[5]-h[2])+p*(h[8]-h[2])):(i[0]=h[9]+(1-d)*(h[6]-h[9])+(1-p)*(h[3]-h[9]),i[1]=h[10]+(1-d)*(h[7]-h[10])+(1-p)*(h[4]-h[10]),i[2]=h[11]+(1-d)*(h[8]-h[11])+(1-p)*(h[5]-h[11])),i[0]+=this.referencePoint[0],i[1]+=this.referencePoint[1],i[2]+=this.referencePoint[2],i},i.prototype.update=function(e){r.prototype.update.call(this,e);var t=e.globe.elevationTimestamp();this._elevationTimestamp!=t&&(this._elevationTimestamp=t,this._stateKey=null)},i.prototype.computeStateKey=function(){var e=[];return e.push(this._elevationTimestamp),e.push(this.neighborMap[WorldWind.NORTH]?this.neighborMap[WorldWind.NORTH].compare(this.level):0),e.push(this.neighborMap[WorldWind.SOUTH]?this.neighborMap[WorldWind.SOUTH].compare(this.level):0),e.push(this.neighborMap[WorldWind.EAST]?this.neighborMap[WorldWind.EAST].compare(this.level):0),e.push(this.neighborMap[WorldWind.WEST]?this.neighborMap[WorldWind.WEST].compare(this.level):0),e.join(".")},i})),i("globe/TerrainTileList",["../error/ArgumentError","../util/Logger","../geom/Sector"],(function(e,t,n){"use strict";var r=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"TerrainTileList","TerrainTileList","missingTessellator"));this.tessellator=n,this.sector=null,this.tileArray=[]};return Object.defineProperties(r.prototype,{length:{get:function(){return this.tileArray.length}}}),r.prototype.addTile=function(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"TerrainTileList","addTile","missingTile"));-1==this.tileArray.indexOf(r)&&(this.tileArray.push(r),this.sector?this.sector.union(r.sector):(this.sector=new n(0,0,0,0),this.sector.copy(r.sector)))},r.prototype.removeAllTiles=function(){this.tileArray=[],this.sector=null},r})),i("globe/Tessellator",["../geom/Angle","../error/ArgumentError","../shaders/BasicProgram","../globe/Globe","../shaders/GpuProgram","../util/Level","../util/LevelSet","../geom/Location","../util/Logger","../geom/Matrix","../cache/MemoryCache","../error/NotYetImplementedError","../pick/PickedObject","../geom/Position","../geom/Rectangle","../geom/Sector","../globe/Terrain","../globe/TerrainTile","../globe/TerrainTileList","../util/Tile","../util/WWMath","../util/WWUtil"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_){"use strict";var w=function(){this.numRowsTilesInTopLevel=4,this.numColumnsTilesInTopLevel=8,this.maximumSubdivisionDepth=15,this.tileWidth=32,this.tileHeight=32,this.detailControl=40,this.levels=new a(m.FULL_SPHERE,new s(180/this.numRowsTilesInTopLevel,360/this.numColumnsTilesInTopLevel),this.maximumSubdivisionDepth,this.tileWidth,this.tileHeight),this.topLevelTiles={},this.currentTiles=new v(this),this.tileCache=new c(5e6,4e6),this.elevationTimestamp=void 0,this.lastModelViewProjection=l.fromIdentity(),this.vertexPointLocation=-1,this.vertexTexCoordLocation=-1,this.texCoords=null,this.texCoordVboCacheKey="global_tex_coords",this.indices=null,this.indicesVboCacheKey="global_indices",this.baseIndices=null,this.baseIndicesOffset=null,this.numBaseIndices=null,this.indicesNorth=null,this.indicesNorthOffset=null,this.numIndicesNorth=null,this.indicesSouth=null,this.indicesSouthOffset=null,this.numIndicesSouth=null,this.indicesWest=null,this.indicesWestOffset=null,this.numIndicesWest=null,this.indicesEast=null,this.indicesEastOffset=null,this.numIndicesEast=null,this.indicesLoresNorth=null,this.indicesLoresNorthOffset=null,this.numIndicesLoresNorth=null,this.indicesLoresSouth=null,this.indicesLoresSouthOffset=null,this.numIndicesLoresSouth=null,this.indicesLoresWest=null,this.indicesLoresWestOffset=null,this.numIndicesLoresWest=null,this.indicesLoresEast=null,this.indicesLoresEastOffset=null,this.numIndicesLoresEast=null,this.outlineIndicesOffset=null,this.numOutlineIndices=null,this.wireframeIndicesOffset=null,this.numWireframeIndices=null,this.scratchMatrix=l.fromIdentity(),this.scratchElevations=null,this.scratchPrevElevations=null,this.corners={},this.tiles=[]};return w.prototype.tessellate=function(e){if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"Tessellator","tessellate","missingDC"));var n=e.globe.elevationTimestamp();if(this.lastGlobeStateKey===e.globeStateKey&&this.lastVerticalExaggeration===e.verticalExaggeration&&this.elevationTimestamp===n&&e.modelviewProjection.equals(this.lastModelViewProjection))return this.lastTerrain;this.lastModelViewProjection.copy(e.modelviewProjection),this.lastGlobeStateKey=e.globeStateKey,this.elevationTimestamp=n,this.lastVerticalExaggeration=e.verticalExaggeration,this.currentTiles.removeAllTiles(),this.topLevelTiles[e.globeStateKey]&&0!=this.topLevelTiles[e.globeStateKey].length||this.createTopLevelTiles(e),this.corners={},this.tiles=[];for(var r=0,i=this.topLevelTiles[e.globeStateKey].length;r<i;r+=1){var o=this.topLevelTiles[e.globeStateKey][r];o.update(e),this.isTileVisible(e,o)&&this.addTileOrDescendants(e,o)}return this.refineNeighbors(e),this.finishTessellating(e),this.lastTerrain=0===this.currentTiles.length?null:new g(e.globe,this,this.currentTiles,e.verticalExaggeration),this.lastTerrain},w.prototype.createTile=function(e,n,r,i){if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"Tile","constructor","missingSector"));if(!n)throw new t(u.logMessage(u.LEVEL_SEVERE,"Tile","constructor","The specified level is null or undefined."));if(r<0||i<0)throw new t(u.logMessage(u.LEVEL_SEVERE,"Tile","constructor","The specified row or column is less than zero."));return new A(e,n,r,i)},w.prototype.beginRendering=function(e){var t=e.currentProgram;if(t){this.buildSharedGeometry(),this.cacheSharedGeometryVBOs(e);var n=e.currentGlContext,r=e.gpuResourceCache;if(this.vertexPointLocation=t.attributeLocation(n,"vertexPoint"),this.vertexTexCoordLocation=t.attributeLocation(n,"vertexTexCoord"),n.enableVertexAttribArray(this.vertexPointLocation),this.vertexTexCoordLocation>=0){var i=r.resourceForKey(this.texCoordVboCacheKey);n.bindBuffer(n.ARRAY_BUFFER,i),n.vertexAttribPointer(this.vertexTexCoordLocation,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.vertexTexCoordLocation)}var o=r.resourceForKey(this.indicesVboCacheKey);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o)}else u.logMessage(u.LEVEL_INFO,"Tessellator","beginRendering","Current Program is empty")},w.prototype.endRendering=function(e){var t=e.currentGlContext;t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this.vertexPointLocation>=0&&t.disableVertexAttribArray(this.vertexPointLocation),this.vertexTexCoordLocation>=0&&t.disableVertexAttribArray(this.vertexTexCoordLocation)},w.prototype.beginRenderingTile=function(e,n){if(!n)throw new t(u.logMessage(u.LEVEL_SEVERE,"Tessellator","beginRenderingTile","missingTile"));var r=e.currentGlContext,i=e.gpuResourceCache;this.scratchMatrix.setToMultiply(e.modelviewProjection,n.transformationMatrix),e.currentProgram.loadModelviewProjection(r,this.scratchMatrix);var o=e.globeStateKey+n.tileKey,a=i.resourceForKey(o);a?n.pointsVboStateKey!=n.pointsStateKey?(r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferSubData(r.ARRAY_BUFFER,0,n.points),n.pointsVboStateKey=n.pointsStateKey):e.currentGlContext.bindBuffer(r.ARRAY_BUFFER,a):(a=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,n.points,r.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),i.putResource(o,a,4*n.points.length),n.pointsVboStateKey=n.pointsStateKey),r.vertexAttribPointer(this.vertexPointLocation,3,r.FLOAT,!1,0,0)},w.prototype.endRenderingTile=function(e,t){},w.prototype.renderTile=function(e,n){if(!n)throw new t(u.logMessage(u.LEVEL_SEVERE,"Tessellator","renderTile","missingTile"));var r=e.currentGlContext,i=r.TRIANGLE_STRIP;r.drawElements(i,this.numBaseIndices,r.UNSIGNED_SHORT,2*this.baseIndicesOffset);var o,a=n.level;(o=n.neighborLevel(WorldWind.NORTH))&&o.compare(a)<0?r.drawElements(i,this.numIndicesLoresNorth,r.UNSIGNED_SHORT,2*this.indicesLoresNorthOffset):r.drawElements(i,this.numIndicesNorth,r.UNSIGNED_SHORT,2*this.indicesNorthOffset),(o=n.neighborLevel(WorldWind.SOUTH))&&o.compare(a)<0?r.drawElements(i,this.numIndicesLoresSouth,r.UNSIGNED_SHORT,2*this.indicesLoresSouthOffset):r.drawElements(i,this.numIndicesSouth,r.UNSIGNED_SHORT,2*this.indicesSouthOffset),(o=n.neighborLevel(WorldWind.WEST))&&o.compare(a)<0?r.drawElements(i,this.numIndicesLoresWest,r.UNSIGNED_SHORT,2*this.indicesLoresWestOffset):r.drawElements(i,this.numIndicesWest,r.UNSIGNED_SHORT,2*this.indicesWestOffset),(o=n.neighborLevel(WorldWind.EAST))&&o.compare(a)<0?r.drawElements(i,this.numIndicesLoresEast,r.UNSIGNED_SHORT,2*this.indicesLoresEastOffset):r.drawElements(i,this.numIndicesEast,r.UNSIGNED_SHORT,2*this.indicesEastOffset)},w.prototype.renderWireframeTile=function(e,n){if(!n)throw new t(u.logMessage(u.LEVEL_SEVERE,"Tessellator","renderWireframeTile","missingTile"));var r=e.currentGlContext;this.vertexTexCoordLocation>=0&&r.disableVertexAttribArray(this.vertexTexCoordLocation),r.drawElements(r.LINES,this.numWireframeIndices,r.UNSIGNED_SHORT,2*this.wireframeIndicesOffset)},w.prototype.renderTileOutline=function(e,n){if(!n)throw new t(u.logMessage(u.LEVEL_SEVERE,"Tessellator","renderTileOutline","missingTile"));var r=e.currentGlContext;this.vertexTexCoordLocation>=0&&r.disableVertexAttribArray(this.vertexTexCoordLocation),r.drawElements(r.LINE_LOOP,this.numOutlineIndices,r.UNSIGNED_SHORT,2*this.outlineIndicesOffset)},w.prototype.pick=function(e,n,r){if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"Tessellator","pick","missingDc"));if(!n)throw new t(u.logMessage(u.LEVEL_SEVERE,"Tessellator","pick","missingList"));for(var i=null,o=r||this,a=new d(0,0,0),s=[],l=0,c=n.length;l<c;l++){var h=n[l];h.extent.intersectsFrustum(e.pickFrustum)&&s.push(h)}if(e.pickTerrainOnly||(i=e.uniquePickColor(),this.drawPickTiles(e,s,i)),!e.regionPicking){var p=e.pickRay.clone(),m=this.computeNearestIntersection(p,s);m&&(e.globe.computePositionFromPoint(m[0],m[1],m[2],a),a.altitude=e.globe.elevationAtLocation(a.latitude,a.longitude),e.addPickedObject(new f(i,o,a,null,!0)))}},w.prototype.drawPickTiles=function(e,t,r){var i=e.currentGlContext;try{e.findAndBindProgram(n),e.currentProgram.loadColor(i,r),this.beginRendering(e);for(var o=0,a=t.length;o<a;o++){var s=t[o];this.beginRenderingTile(e,s),this.renderTile(e,s),this.endRenderingTile(e,s)}}finally{this.endRendering(e)}},w.prototype.computeNearestIntersection=function(e,t){for(var n=[],r=0,i=t.length;r<i;r++)this.computeIntersections(e,t[r],n);if(0==n.length)return null;var o,a=Number.POSITIVE_INFINITY;for(r=0,i=n.length;r<i;r++){var s=e.origin.distanceToSquared(n[r]);a>s&&(a=s,o=r)}return n[o]},w.prototype.computeIntersections=function(e,t,n){var r,i,o=t.level,a=t.points,s=n.length;e.origin.subtract(t.referencePoint),this.buildSharedGeometry(t),i=this.baseIndices,b.computeTriStripIntersections(e,a,i,n),i=(r=t.neighborLevel(WorldWind.SOUTH))&&r.compare(o)<0?this.indicesLoresSouth:this.indicesSouth,b.computeTriStripIntersections(e,a,i,n),i=(r=t.neighborLevel(WorldWind.WEST))&&r.compare(o)<0?this.indicesLoresWest:this.indicesWest,b.computeTriStripIntersections(e,a,i,n),i=(r=t.neighborLevel(WorldWind.EAST))&&r.compare(o)<0?this.indicesLoresEast:this.indicesEast,b.computeTriStripIntersections(e,a,i,n),i=(r=t.neighborLevel(WorldWind.NORTH))&&r.compare(o)<0?this.indicesLoresNorth:this.indicesNorth,b.computeTriStripIntersections(e,a,i,n),e.origin.add(t.referencePoint);for(var u=s,l=n.length;u<l;u++)n[u].add(t.referencePoint)},w.prototype.createTopLevelTiles=function(e){this.topLevelTiles[e.globeStateKey]=[],y.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles[e.globeStateKey])},w.prototype.addTileOrDescendants=function(e,t){return this.tileMeetsRenderCriteria(e,t)?void this.addTile(e,t):void this.addTileDescendants(e,t)},w.prototype.addTileDescendants=function(e,t){for(var n=t.level.nextLevel(),r=t.subdivideToCache(n,this,this.tileCache),i=0;i<r.length;i+=1){var o=r[i];o.update(e),this.levels.sector.intersects(o.sector)&&this.isTileVisible(e,o)&&this.addTileOrDescendants(e,o)}},w.prototype.addTile=function(e,t){var n=this.tiles.length;this.tiles.push(t);var r,i=t.sector,o=[i.maxLatitude,i.maxLongitude].toString(),a=[i.minLatitude,i.maxLongitude].toString(),s=[i.maxLatitude,i.minLongitude].toString(),u=[i.minLatitude,i.minLongitude].toString();(r=this.corners[u])?r.sw=n:this.corners[u]={sw:n},(r=this.corners[s])?r.nw=n:this.corners[s]={nw:n},(r=this.corners[a])?r.se=n:this.corners[a]={se:n},(r=this.corners[o])?r.ne=n:this.corners[o]={ne:n}},w.prototype.refineNeighbors=function(e){for(var t={},n=0,r=this.tiles.length;n<r;n+=1){var i,o,a=(p=this.tiles[n]).level.levelNumber,s=p.sector,u=[s.maxLatitude,s.maxLongitude].toString(),l=[s.minLatitude,s.maxLongitude].toString(),c=[s.maxLatitude,s.minLongitude].toString(),h=[s.minLatitude,s.minLongitude].toString();(i=this.corners[u]).hasOwnProperty("se")&&(o=i.se,this.tiles[o].level.levelNumber<a-1&&(t[o]||(t[o]=!0))),i.hasOwnProperty("nw")&&(o=i.nw,this.tiles[o].level.levelNumber<a-1&&(t[o]||(t[o]=!0))),(i=this.corners[l]).hasOwnProperty("ne")&&(o=i.ne,this.tiles[o].level.levelNumber<a-1&&(t[o]||(t[o]=!0))),i.hasOwnProperty("sw")&&(o=i.sw,this.tiles[o].level.levelNumber<a-1&&(t[o]||(t[o]=!0))),(i=this.corners[c]).hasOwnProperty("ne")&&(o=i.ne,this.tiles[o].level.levelNumber<a-1&&(t[o]||(t[o]=!0))),i.hasOwnProperty("sw")&&(o=i.sw,this.tiles[o].level.levelNumber<a-1&&(t[o]||(t[o]=!0))),(i=this.corners[h]).hasOwnProperty("se")&&(o=i.se,this.tiles[o].level.levelNumber<a-1&&(t[o]||(t[o]=!0))),i.hasOwnProperty("nw")&&(o=i.nw,this.tiles[o].level.levelNumber<a-1&&(t[o]||(t[o]=!0)))}var f=[],d=[];for(n=0,r=this.tiles.length;n<r;n+=1)p=this.tiles[n],t[n]?f.push(p):d.push(p);if(f.length>0){for(this.tiles=[],this.corners={},n=0,r=d.length;n<r;n+=1)p=d[n],this.addTile(e,p);for(n=0,r=f.length;n<r;n+=1){var p=f[n];this.addTileDescendants(e,p)}this.refineNeighbors(e)}},w.prototype.finishTessellating=function(e){for(var t=0,n=this.tiles.length;t<n;t+=1){var r=this.tiles[t];this.setNeighbors(r),this.regenerateTileGeometryIfNeeded(e,r),this.currentTiles.addTile(r)}},w.prototype.setNeighbors=function(e){var t=e.sector,n=[t.maxLatitude,t.maxLongitude].toString(),r=[t.minLatitude,t.maxLongitude].toString(),i=[t.maxLatitude,t.minLongitude].toString(),o=[t.minLatitude,t.minLongitude].toString(),a=this.corners[n],s=this.corners[r],u=this.corners[i],l=this.corners[o],c=-1,h=-1,f=-1,d=-1;a.hasOwnProperty("se")?c=a.se:u.hasOwnProperty("sw")&&(c=u.sw),s.hasOwnProperty("ne")?h=s.ne:l.hasOwnProperty("nw")&&(h=l.nw),a.hasOwnProperty("nw")?f=a.nw:s.hasOwnProperty("sw")&&(f=s.sw),u.hasOwnProperty("ne")?d=u.ne:l.hasOwnProperty("se")&&(d=l.se),e.setNeighborLevel(WorldWind.NORTH,c>=0?this.tiles[c].level:null),e.setNeighborLevel(WorldWind.SOUTH,h>=0?this.tiles[h].level:null),e.setNeighborLevel(WorldWind.EAST,f>=0?this.tiles[f].level:null),e.setNeighborLevel(WorldWind.WEST,d>=0?this.tiles[d].level:null)},w.prototype.isTileVisible=function(e,t){return!(e.globe.projectionLimits&&!t.sector.overlaps(e.globe.projectionLimits))&&t.extent.intersectsFrustum(e.frustumInModelCoordinates)},w.prototype.tileMeetsRenderCriteria=function(e,t){var n=this.detailControl;return(t.sector.minLatitude>=75||t.sector.maxLatitude<=-75)&&(n*=2),t.level.isLastLevel()||!t.mustSubdivide(e,n)},w.prototype.regenerateTileGeometryIfNeeded=function(e,t){var n=e.globeStateKey+t.stateKey+e.verticalExaggeration;t.points&&t.pointsStateKey==n||(this.regenerateTileGeometry(e,t),t.pointsStateKey=n)},w.prototype.coverageTargetResolution=function(t){return t/8*e.RADIANS_TO_DEGREES},w.prototype.regenerateTileGeometry=function(e,t){var n=t.tileHeight+1,r=t.tileWidth+1,i=t.referencePoint,o=this.scratchElevations;o||(o=new Float64Array(n*r),this.scratchElevations=o),t.points||(t.points=new Float32Array(n*r*3)),_.fillArray(o,0),e.globe.elevationsForGrid(t.sector,n,r,this.coverageTargetResolution(t.texelSize),o),this.mustAlignNeighborElevations(e,t)&&this.alignNeighborElevations(e,t,o),_.multiplyArray(o,e.verticalExaggeration),e.globe.computePointsForGrid(t.sector,n,r,o,i,t.points),t.transformationMatrix.setTranslation(i[0],i[1],i[2])},w.prototype.mustAlignNeighborElevations=function(e,t){var n=t.level,r=t.neighborLevel(WorldWind.NORTH),i=t.neighborLevel(WorldWind.SOUTH),o=t.neighborLevel(WorldWind.EAST),a=t.neighborLevel(WorldWind.WEST);return r&&r.compare(n)<0||i&&i.compare(n)<0||o&&o.compare(n)<0||a&&a.compare(n)<0},w.prototype.alignNeighborElevations=function(e,t,n){var r,i,o,a,s=t.tileHeight+1,u=t.tileWidth+1,l=t.level,c=Math.floor(s/2)+1,h=Math.floor(u/2)+1,f=l.previousLevel(),d=this.scratchPrevElevations;if(d||(d=new Float64Array(c*h),this.scratchPrevElevations=d),_.fillArray(d,0),e.globe.elevationsForGrid(t.sector,c,h,this.coverageTargetResolution(f.texelSize),d),(r=t.neighborLevel(WorldWind.NORTH))&&r.compare(l)<0)for(o=(s-1)*u,a=(c-1)*h,i=0;i<h;i++,o+=2,a+=1)n[o]=d[a],i<h-1&&(n[o+1]=.5*(d[a]+d[a+1]));if((r=t.neighborLevel(WorldWind.SOUTH))&&r.compare(l)<0)for(o=0,a=0,i=0;i<h;i++,o+=2,a+=1)n[o]=d[a],i<h-1&&(n[o+1]=.5*(d[a]+d[a+1]));if((r=t.neighborLevel(WorldWind.EAST))&&r.compare(l)<0)for(o=u-1,a=h-1,i=0;i<c;i++,o+=2*u,a+=h)n[o]=d[a],i<c-1&&(n[o+u]=.5*(d[a]+d[a+h]));if((r=t.neighborLevel(WorldWind.WEST))&&r.compare(l)<0)for(o=0,a=0,i=0;i<c;i++,o+=2*u,a+=h)n[o]=d[a],i<c-1&&(n[o+u]=.5*(d[a]+d[a+h]))},w.prototype.buildSharedGeometry=function(){var e=this.levels.tileWidth,t=this.levels.tileHeight;this.texCoords||this.buildTexCoords(e,t),this.indices||this.buildIndices(e,t)},w.prototype.buildTexCoords=function(e,t){for(var n=e+1,r=t+1,i=1/e,o=1/t,a=new Float32Array(n*r*2),s=0,u=0,l=0;u<r;u++,l+=o){u==r-1&&(l=1);for(var c=0,h=0;c<n;c++,h+=i)c==n-1&&(h=1),a[s++]=h,a[s++]=l}this.texCoords=a},w.prototype.buildIndices=function(e,t){for(var n,r=t+1,i=e+1,o=2*(r-3)*(i-2)+2*(r-3),a=[],s=0,u=1;u<i-2;u+=1){for(var l=1;l<r-1;l+=1)n=u+l*i,a[s++]=n,a[s++]=n+1;a[s++]=n+1,n=u+1+1*i,a[s++]=n}for(this.baseIndicesOffset=a.length-o,this.baseIndices=new Uint16Array(a.slice(this.baseIndicesOffset)),this.numBaseIndices=o,o=2*i-2,n=(u=i-1)+(l=r-1)*i,a[s++]=n,u=i-2;u>0;u-=1)n=u+l*i,a[s++]=n,a[s++]=n-i;for(n=(u=0)+l*i,a[s++]=n,this.indicesNorthOffset=a.length-o,this.indicesNorth=new Uint16Array(a.slice(this.indicesNorthOffset)),this.numIndicesNorth=o,o=2*i-2,n=(u=0)+(l=0)*i,a[s++]=n,u=1;u<i-1;u+=1)n=u+l*i,a[s++]=n,a[s++]=n+i;for(n=(u=i-1)+l*i,a[s++]=n,this.indicesSouthOffset=a.length-o,this.indicesSouth=new Uint16Array(a.slice(this.indicesSouthOffset)),this.numIndicesSouth=o,o=2*r-2,n=(u=0)+(l=r-1)*i,a[s++]=n,l=r-2;l>0;l-=1)n=u+l*i,a[s++]=n,a[s++]=n+1;for(n=u+(l=0)*i,a[s++]=n,this.indicesWestOffset=a.length-o,this.indicesWest=new Uint16Array(a.slice(this.indicesWestOffset)),this.numIndicesWest=o,o=2*r-2,n=(u=i-1)+(l=0)*i,a[s++]=n,l=1;l<r-1;l+=1)n=u+l*i,a[s++]=n,a[s++]=n-1;for(n=u+(l=r-1)*i,a[s++]=n,this.indicesEastOffset=a.length-o,this.indicesEast=new Uint16Array(a.slice(this.indicesEastOffset)),this.numIndicesEast=o,o=2*i-2,n=(u=i-1)+(l=r-1)*i,a[s++]=n,u=i-2;u>0;u-=1)n=(u+1&-2)+l*i,a[s++]=n,n=u+(l-1)*i,a[s++]=n;for(n=(u=0)+l*i,a[s++]=n,this.indicesLoresNorthOffset=a.length-o,this.indicesLoresNorth=new Uint16Array(a.slice(this.indicesLoresNorthOffset)),this.numIndicesLoresNorth=o,o=2*i-2,n=(u=0)+(l=0)*i,a[s++]=n,u=1;u<i-1;u+=1)n=(-2&u)+l*i,a[s++]=n,n=u+(l+1)*i,a[s++]=n;for(n=(u=i-1)+l*i,a[s++]=n,this.indicesLoresSouthOffset=a.length-o,this.indicesLoresSouth=new Uint16Array(a.slice(this.indicesLoresSouthOffset)),this.numIndicesLoresSouth=o,o=2*r-2,n=(u=0)+(l=r-1)*i,a[s++]=n,l=r-2;l>0;l-=1)n=u+(l+1&-2)*i,a[s++]=n,n=u+1+l*i,a[s++]=n;for(n=u+(l=0)*i,a[s++]=n,this.indicesLoresWestOffset=a.length-o,this.indicesLoresWest=new Uint16Array(a.slice(this.indicesLoresWestOffset)),this.numIndicesLoresWest=o,o=2*r-2,n=(u=i-1)+(l=0)*i,a[s++]=n,l=1;l<r-1;l+=1)n=u+(-2&l)*i,a[s++]=n,n=u-1+l*i,a[s++]=n;n=u+(l=r-1)*i,a[s++]=n,this.indicesLoresEastOffset=a.length-o,this.indicesLoresEast=new Uint16Array(a.slice(this.indicesLoresEastOffset)),this.numIndicesLoresEast=o;var c=this.buildWireframeIndices(e,t),h=this.buildOutlineIndices(e,t);a=a.concat(c),this.wireframeIndicesOffset=a.length-this.numWireframeIndices,a=a.concat(h),this.outlineIndicesOffset=a.length-this.numOutlineIndices,this.indices=new Uint16Array(a)},w.prototype.buildWireframeIndices=function(e,t){var n,r,i,o=t+1,a=e+1,s=2*e*o+2*t*a,u=[],l=a,c=0;for(r=0;r<o;r+=1)for(n=0;n<e;n+=1)i=n+r*l,u[c]=i,u[c+1]=i+1,c+=2;for(n=0;n<a;n+=1)for(r=0;r<t;r+=1)i=n+r*l,u[c]=i,u[c+1]=i+l,c+=2;return this.numWireframeIndices=s,u},w.prototype.buildOutlineIndices=function(e,t){var n,r,i,o=t+1,a=e+1,s=2*(o-2)+2*a+1,u=[],l=0;for(r=0,n=0;n<a;n+=1)i=n+r*a,u[l]=i,l+=1;for(n=a-1,r=1;r<o;r+=1)i=n+r*a,u[l]=i,l+=1;for(r=o-1,n=a-1;n>=0;n-=1)i=n+r*a,u[l]=i,l+=1;for(n=0,r=o-1;r>=0;r-=1)i=n+r*a,u[l]=i,l+=1;return this.numOutlineIndices=s,u},w.prototype.cacheSharedGeometryVBOs=function(e){var t=e.currentGlContext,n=e.gpuResourceCache,r=n.resourceForKey(this.texCoordVboCacheKey);r||(r=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,this.texCoords,t.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),n.putResource(this.texCoordVboCacheKey,r,4*this.texCoords.length/2));var i=n.resourceForKey(this.indicesVboCacheKey);i||(i=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),n.putResource(this.indicesVboCacheKey,i,2*this.indices.length))},w})),i("globe/Globe",["../geom/Angle","../error/ArgumentError","../geom/BoundingBox","../globe/ElevationModel","../geom/Line","../geom/Location","../util/Logger","../geom/Position","../projections/ProjectionWgs84","../geom/Sector","../globe/Tessellator","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f){"use strict";var d=function e(n,r){if(!n)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","constructor","Elevation model is null or undefined."));this.elevationModel=n,this.equatorialRadius=WorldWind.WGS84_SEMI_MAJOR_AXIS;var i=1/WorldWind.WGS84_INVERSE_FLATTENING;this.polarRadius=this.equatorialRadius*(1-i),this.eccentricitySquared=2*i-i*i,this.tessellator=new c,this._projection=r||new u,this._offset=0,this.offsetVector=new h(0,0,0),this.id=++e.idPool,this._stateKey="globe "+this.id.toString()+" "};return d.idPool=0,Object.defineProperties(d.prototype,{stateKey:{get:function(){return this._stateKey+this.elevationModel.stateKey+"offset "+this.offset.toString()+" "+this.projection.stateKey}},continuous:{get:function(){return this.projection.continuous}},projection:{get:function(){return this._projection},set:function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","projection","missingProjection"));this.projection!=e&&(this.tessellator=new c),this._projection=e}},projectionLimits:{get:function(){return this._projection.projectionLimits}},offset:{get:function(){return this._offset},set:function(e){this._offset=e,this.offsetVector[0]=2*e*Math.PI*this.equatorialRadius}}}),d.prototype.is2D=function(){return this.projection.is2D},d.prototype.computePointFromPosition=function(e,n,r,i){if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointFromPosition","missingResult"));return this.projection.geographicToCartesian(this,e,n,r,this.offsetVector,i)},d.prototype.computePointFromLocation=function(e,n,r){if(!r)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointFromLocation","missingResult"));return this.computePointFromPosition(e,n,0,r)},d.prototype.computePointsForGrid=function(e,n,r,i,o,s){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointsFromPositions","missingSector"));if(n<1||r<1)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointsFromPositions","Number of latitude or longitude locations is less than one."));var u=n*r;if(!i||i.length<u)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointsFromPositions","Elevations array is null, undefined or insufficient length."));if(!s||s.length<u)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointsFromPositions","Result array is null, undefined or insufficient length."));return this.projection.geographicToCartesianGrid(this,e,n,r,i,o,this.offsetVector,s)},d.prototype.computePositionFromPoint=function(e,n,r,i){if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","computePositionFromPoint","missingResult"));return this.projection.cartesianToGeographic(this,e,n,r,this.offsetVector,i),this.continuous&&(i.longitude<-180?i.longitude+=360:i.longitude>180&&(i.longitude-=360)),i},d.prototype.radiusAt=function(t,n){var r=Math.sin(t*e.DEGREES_TO_RADIANS);return this.equatorialRadius/Math.sqrt(1-this.eccentricitySquared*r*r)*Math.sqrt(1+(this.eccentricitySquared*this.eccentricitySquared-2*this.eccentricitySquared)*r*r)},d.prototype.surfaceNormalAtLocation=function(n,r,i){if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","surfaceNormalAtLocation","missingResult"));if(this.projection.surfaceNormalAtLocation)return this.projection.surfaceNormalAtLocation(this,n,r,i);if(this.is2D())return i[0]=0,i[1]=0,i[2]=1,i;var o=Math.cos(n*e.DEGREES_TO_RADIANS),s=Math.cos(r*e.DEGREES_TO_RADIANS),u=Math.sin(n*e.DEGREES_TO_RADIANS),l=Math.sin(r*e.DEGREES_TO_RADIANS);return i[0]=o*l,i[1]=u,i[2]=o*s,i.normalize()},d.prototype.surfaceNormalAtPoint=function(e,n,r,i){if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","surfaceNormalAtPoint","missingResult"));if(this.projection.surfaceNormalAtPoint)return this.projection.surfaceNormalAtPoint(this,e,n,r,i);if(this.is2D())return i[0]=0,i[1]=0,i[2]=1,i;var o=this.equatorialRadius*this.equatorialRadius,s=this.polarRadius*this.polarRadius;return i[0]=e/o,i[1]=n/s,i[2]=r/o,i.normalize()},d.prototype.northTangentAtLocation=function(e,n,r){if(!r)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","northTangentAtLocation","missingResult"));return this.projection.northTangentAtLocation(this,e,n,r)},d.prototype.northTangentAtPoint=function(e,n,r,i){if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","northTangentAtPoint","missingResult"));return this.projection.northTangentAtPoint(this,e,n,r,this.offsetVector,i)},d.prototype.intersectsFrustum=function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","intersectsFrustum","missingFrustum"));if(this.is2D()){var r=new n;return r.setToSector(l.FULL_SPHERE,this,this.elevationModel.minElevation,this.elevationModel.maxElevation),r.intersectsFrustum(e)}return!(e.far.distance<=this.equatorialRadius)&&!(e.left.distance<=this.equatorialRadius)&&!(e.right.distance<=this.equatorialRadius)&&!(e.top.distance<=this.equatorialRadius)&&!(e.bottom.distance<=this.equatorialRadius)&&!(e.near.distance<=this.equatorialRadius)},d.prototype.intersectsLine=function(e,n){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","intersectWithRay","missingLine"));if(!n)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","intersectsLine","missingResult"));var r,i=e.direction[0],o=e.direction[1],s=e.direction[2],u=e.origin[0],l=e.origin[1],c=e.origin[2];if(this.is2D())return(0!=s||0==c)&&!((r=-c/s)<0)&&(n[0]=u+i*r,n[1]=l+o*r,n[2]=c+s*r,!0);var h,f,d,p=this.equatorialRadius,m=p*p,g=p/this.polarRadius,A=g*g;return!((d=(f=2*(u*i+A*l*o+c*s))*f-4*(h=i*i+A*o*o+s*s)*(u*u+A*l*l+c*c-m))<0)&&((r=(-f-Math.sqrt(d))/(2*h))>0||(r=(-f+Math.sqrt(d))/(2*h))>0)&&(n[0]=u+i*r,n[1]=l+o*r,n[2]=c+s*r,!0)},d.prototype.elevationTimestamp=function(){return this.elevationModel.timestamp},d.prototype.minElevation=function(){return this.elevationModel.minElevation},d.prototype.maxElevation=function(){return this.elevationModel.maxElevation},d.prototype.minAndMaxElevationsForSector=function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","minAndMaxElevationsForSector","missingSector"));return this.elevationModel.minAndMaxElevationsForSector(e)},d.prototype.elevationAtLocation=function(e,t){return this.elevationModel.elevationAtLocation(e,t)},d.prototype.elevationsForGrid=function(e,n,r,i,o){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","elevationsForSector","missingSector"));if(n<=0||r<=0)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","elevationsForSector","numLat or numLon is less than 1"));if(!o||o.length<n*r)throw new t(a.logMessage(a.LEVEL_SEVERE,"Globe","elevationsForSector","missingArray"));return this.elevationModel.elevationsForGrid(e,n,r,i,o)},d})),i("cache/GpuResourceCache",["../util/AbsentResourceList","../error/ArgumentError","../util/ImageSource","../util/Logger","../cache/MemoryCache","../render/Texture"],(function(e,t,n,r,i,o){"use strict";var a=function(n,o){if(!n||n<1)throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuResourceCache","constructor","Specified cache capacity is undefined, 0 or negative."));if(!o||o<0||o>=n)throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuResourceCache","constructor","Specified cache low-water value is undefined, negative or not less than the capacity."));this.entries=new i(n,o),this.cacheKeyPool=0,this.currentRetrievals={},this.absentResourceList=new e(3,6e4)};return Object.defineProperties(a.prototype,{capacity:{get:function(){return this.entries.capacity}},lowWater:{get:function(){return this.entries.lowWater}},usedCapacity:{get:function(){return this.entries.usedCapacity}},freeCapacity:{get:function(){return this.entries.freeCapacity}}}),a.prototype.generateCacheKey=function(){return"GpuResourceCache "+ ++this.cacheKeyPool},a.prototype.putResource=function(e,i,o){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuResourceCache","putResource","missingKey."));if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuResourceCache","putResource","missingResource."));if(!o||o<1)throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuResourceCache","putResource","The specified resource size is undefined or less than 1."));var a={resource:i};this.entries.putEntry(e instanceof n?e.key:e,a,o)},a.prototype.resourceForKey=function(e){var t=e instanceof n?this.entries.entryForKey(e.key):this.entries.entryForKey(e),r=t?t.resource:null;return null!==r&&"function"==typeof r.clearTexParameters&&r.clearTexParameters(),r},a.prototype.setResourceAgingFactor=function(e,t){this.entries.setEntryAgingFactor(e,t)},a.prototype.containsResource=function(e){return this.entries.containsKey(e instanceof n?e.key:e)},a.prototype.removeResource=function(e){this.entries.removeEntry(e instanceof n?e.key:e)},a.prototype.clear=function(){this.entries.clear(!1)},a.prototype.retrieveTexture=function(e,t,i){if(!t)return null;if(t instanceof n){var a=new o(e,t.image,i);return this.putResource(t.key,a,a.size),a}if(this.currentRetrievals[t]||this.absentResourceList.isResourceAbsent(t))return null;var s=this,u=new Image;return u.onload=function(){r.log(r.LEVEL_INFO,"Image retrieval succeeded: "+t);var n=new o(e,u,i);s.putResource(t,n,n.size),delete s.currentRetrievals[t],s.absentResourceList.unmarkResourceAbsent(t);var a=document.createEvent("Event");a.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(a)},u.onerror=function(){delete s.currentRetrievals[t],s.absentResourceList.markResourceAbsent(t),r.log(r.LEVEL_WARNING,"Image retrieval failed: "+t)},this.currentRetrievals[t]=t,u.crossOrigin="anonymous",u.src=t,null},a})),i("pick/PickedObjectList",[],(function(){"use strict";var e=function(){this.objects=[]};return e.prototype.hasNonTerrainObjects=function(){return this.objects.length>1||1===this.objects.length&&null==this.terrainObject()},e.prototype.terrainObject=function(){for(var e=0,t=this.objects.length;e<t;e++)if(this.objects[e].isTerrain)return this.objects[e];return null},e.prototype.add=function(e){if(e)if(e.isTerrain){for(var t=this.objects.length,n=0,r=this.objects.length;n<r;n++)if(this.objects[n].isTerrain){t=n;break}this.objects[t]=e}else this.objects.push(e)},e.prototype.clear=function(){this.objects=[]},e.prototype.topPickedObject=function(){var e=this.objects.length;if(e>1)for(var t=0;t<e;t++)if(this.objects[t].isOnTop)return this.objects[t];return e>0?this.objects[0]:null},e})),i("render/ScreenCreditController",["../error/ArgumentError","../util/Color","../util/Font","../layer/Layer","../util/Logger","../util/Offset","../shapes/ScreenText"],(function(e,t,n,r,i,o,a){"use strict";var s=function(){r.call(this,"ScreenCreditController"),this.creditPlacement=new o(WorldWind.OFFSET_PIXELS,11,WorldWind.OFFSET_PIXELS,2),this.creditMargin=11,this.opacity=.5,this.credits=[]};return(s.prototype=Object.create(r.prototype)).clear=function(){this.credits=[]},s.prototype.addCredit=function(t,r,s){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"ScreenCreditController","addCredit","missingText"));if(!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"ScreenCreditController","addCredit","missingColor"));for(var u=0,l=this.credits.length;u<l;u++)if(this.credits[u].text===t)return;var c=new a(new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0),t);c.attributes.font=new n(10),c.attributes.color=r,c.attributes.enableOutline=!1,c.attributes.offset=new o(WorldWind.OFFSET_FRACTION,0,WorldWind.OFFSET_FRACTION,0),s&&(c.userProperties.url=s),this.credits.push(c)},s.prototype.doRender=function(e){for(var t=this.creditPlacement.offsetForSize(e.viewport.width,e.viewport.height),n=0,r=this.credits.length;n<r;n++)this.credits[n].screenOffset.x=t[0],this.credits[n].screenOffset.y=t[1],this.credits[n].render(e),e.textRenderer.typeFace=this.credits[n].attributes.font,e.textRenderer.outlineWidth=this.credits[n].attributes.outlineWidth,e.textRenderer.enableOutline=this.credits[n].attributes.enableOutline,t[0]+=e.textRenderer.textSize(this.credits[n].text)[0],t[0]+=this.creditMargin},s})),i("util/HashMap",[],(function(){"use strict";var e=function(){this._entries=Object.create(null)};return e.prototype.get=function(e){return this._entries[e]},e.prototype.set=function(e,t){this._entries[e]=t},e.prototype.remove=function(e){delete this._entries[e]},e.prototype.contains=function(e){return e in this._entries},e.reIndex=function(t,n,r){var i=new e;for(var o in t._entries){var a=parseInt(o);a>=n&&(a+=r);var s=t.get(o);s.index=a,i.set(a,s)}return i},e})),i("util/PolygonSplitter",["./HashMap","../geom/Location","../geom/Position","./WWMath"],(function(e,t,n,r){"use strict";return{addedIndex:-1,poleIndexOffset:-1,splitContours:function(e,t){for(var n=!1,r=0,i=e.length;r<i;r++){var o=this.splitContour(e[r]);o.polygons.length>1&&(n=!0),t.push(o)}return n},splitContour:function(n){var r=new e,i=[],o=[],a=[],s=[],u=-1,l=this.findIntersectionAndPole(n,i,o,r);return 0===o.length?(a.push(i),s.push(r),this.formatContourOutput(a,l,u,s)):(o.length>2&&o.sort((function(e,t){return t.latitude-e.latitude})),l!==t.poles.NONE&&(i=this.handleOnePole(i,o,r,l),r=this.reindexIntersections(o,r,this.poleIndexOffset)),0===o.length?(a.push(i),s.push(r),u=0,this.formatContourOutput(a,l,u,s)):(this.linkIntersections(o,r),u=this.makePolygons(i,o,r,a,s),this.formatContourOutput(a,l,u,s)))},findIntersectionAndPole:function(e,n,i,o){var a=!1,s=90,u=-90;this.addedIndex=-1;for(var l=0,c=e.length;l<c;l++){var h=e[l],f=e[(l+1)%c];if(s=Math.min(s,h.latitude),u=Math.max(u,h.latitude),t.locationsCrossDateLine([h,f])){a=!a;var d=t.meridianIntersection(h,f,180);null===d&&(d=(h.latitude+f.latitude)/2);var p=180*r.signum(h.longitude)||180,m=this.createPoint(d,p,h.altitude),g=this.createPoint(d,-p,f.altitude);this.safeAdd(n,h,l,c);var A=n.length;o.set(A,this.makeIntersectionEntry(A)),o.set(A+1,this.makeIntersectionEntry(A+1)),i.push({indexEnd:A,indexStart:A+1,latitude:d}),n.push(m),n.push(g),this.safeAdd(n,f,l+1,c)}else this.safeAdd(n,h,l,c),this.safeAdd(n,f,l+1,c)}var v=t.poles.NONE;return a&&(v=this.determinePole(s,u)),v},determinePole:function(e,n){return e>0?t.poles.NORTH:n<0?t.poles.SOUTH:Math.abs(n)>=Math.abs(e)?t.poles.NORTH:t.poles.SOUTH},handleOnePole:function(e,n,r,i){var o;if(i===t.poles.NORTH)var a=n.shift(),s=90;else i===t.poles.SOUTH&&(a=n.pop(),s=-90);var u=r.get(a.indexEnd),l=r.get(a.indexStart);u.forPole=!0,l.forPole=!0,this.poleIndexOffset=a.indexStart,o=e.slice(0,a.indexEnd+1);var c=this.createPoint(s,e[u.index].longitude,e[u.index].altitude),h=this.createPoint(s,e[l.index].longitude,e[l.index].altitude);return o.push(c,h),o.concat(e.slice(this.poleIndexOffset))},linkIntersections:function(e,t){for(var n=0;n<e.length-1;n+=2){var r=e[n],i=e[n+1],o=t.get(r.indexEnd),a=t.get(r.indexStart),s=t.get(i.indexEnd),u=t.get(i.indexStart);o.linkTo=i.indexStart,a.linkTo=i.indexEnd,s.linkTo=r.indexStart,u.linkTo=r.indexEnd}},reindexIntersections:function(t,n,r){n=e.reIndex(n,r,2);for(var i=0,o=t.length;i<o;i++)t[i].indexEnd>=r&&(t[i].indexEnd+=2),t[i].indexStart>=r&&(t[i].indexStart+=2);return n},makePolygons:function(t,n,r,i,o){for(var a=-1,s=0;s<n.length-1;s+=2){var u=n[s],l=n[s+1],c=u.indexStart,h=l.indexEnd,f=[],d=new e,p=this.makePolygon(c,h,t,r,f,d);f.length&&(i.push(f),o.push(d),p&&(a=i.length-1)),c=l.indexStart,h=u.indexEnd,f=[],d=new e,p=this.makePolygon(c,h,t,r,f,d),f.length&&(i.push(f),o.push(d),p&&(a=i.length-1))}return a},makePolygon:function(e,t,n,r,i,o){var a=!1,s=n.length,u=!1;t<e&&(t+=s);for(var l=e;l<=t;l++){var c=l%s,h=n[c],f=r.get(c);if(f){if(f.visited)break;if(i.push(h),o.set(i.length-1,f),f.forPole)u=!0;else{if(a&&1+(l=f.linkTo-1)===e)break;a=!a,f.visited=!0}}else i.push(h)}return u},safeAdd:function(e,t,n,r){this.addedIndex<n&&this.addedIndex<r-1&&(e.push(t),this.addedIndex=n)},createPoint:function(e,r,i){return null==i?new t(e,r):new n(e,r,i)},formatContourOutput:function(e,t,n,r){return{polygons:e,pole:t,poleIndex:n,iMap:r}},makeIntersectionEntry:function(e){return null==e&&(e=-1),{visited:!1,forPole:!1,index:e,linkTo:-1}}}})),i("shapes/ShapeAttributes",["../util/Color","../util/ImageSource"],(function(e,t){"use strict";var n=function(t){this._drawInterior=!t||t._drawInterior,this._drawOutline=!t||t._drawOutline,this._enableLighting=!!t&&t._enableLighting,this._interiorColor=t?t._interiorColor.clone():e.WHITE.clone(),this._outlineColor=t?t._outlineColor.clone():e.RED.clone(),this._outlineWidth=t?t._outlineWidth:1,this._outlineStippleFactor=t?t._outlineStippleFactor:0,this._outlineStipplePattern=t?t._outlineStipplePattern:61680,this._imageSource=t?t._imageSource:null,this._depthTest=!t||t._depthTest,this._drawVerticals=!!t&&t._drawVerticals,this._applyLighting=!!t&&t._applyLighting,this.stateKeyInvalid=!0};return n.prototype.computeStateKey=function(){return"di "+this._drawInterior+" do "+this._drawOutline+" el "+this._enableLighting+" ic "+this._interiorColor.toHexString(!0)+" oc "+this._outlineColor.toHexString(!0)+" ow "+this._outlineWidth+" osf "+this._outlineStippleFactor+" osp "+this._outlineStipplePattern+" is "+(this._imageSource?this.imageSource instanceof t?this.imageSource.key:this.imageSource:"null")+" dt "+this._depthTest+" dv "+this._drawVerticals+" li "+this._applyLighting},Object.defineProperties(n.prototype,{stateKey:{get:function(){return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey(),this.stateKeyInvalid=!1),this._stateKey}},drawInterior:{get:function(){return this._drawInterior},set:function(e){this._drawInterior=e,this.stateKeyInvalid=!0}},drawOutline:{get:function(){return this._drawOutline},set:function(e){this._drawOutline=e,this.stateKeyInvalid=!0}},enableLighting:{get:function(){return this._enableLighting},set:function(e){this._enableLighting=e,this.stateKeyInvalid=!0}},interiorColor:{get:function(){return this._interiorColor},set:function(e){this._interiorColor=e,this.stateKeyInvalid=!0}},outlineColor:{get:function(){return this._outlineColor},set:function(e){this._outlineColor=e,this.stateKeyInvalid=!0}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth=e,this.stateKeyInvalid=!0}},outlineStipplePattern:{get:function(){return this._outlineStipplePattern},set:function(e){this._outlineStipplePattern=e,this.stateKeyInvalid=!0}},outlineStippleFactor:{get:function(){return this._outlineStippleFactor},set:function(e){this._outlineStippleFactor=e,this.stateKeyInvalid=!0}},imageSource:{get:function(){return this._imageSource},set:function(e){this._imageSource=e,this.stateKeyInvalid=!0}},depthTest:{get:function(){return this._depthTest},set:function(e){this._depthTest=e,this.stateKeyInvalid=!0}},drawVerticals:{get:function(){return this._drawVerticals},set:function(e){this._drawVerticals=e,this.stateKeyInvalid=!0}},applyLighting:{get:function(){return this._applyLighting},set:function(e){this._applyLighting=e,this.stateKeyInvalid=!0}}}),n})),i("shapes/SurfaceShape",["../error/AbstractError","../geom/Angle","../error/ArgumentError","../geom/BoundingBox","../util/Color","../geom/Location","../util/Logger","../cache/MemoryCache","../error/NotYetImplementedError","../pick/PickedObject","../util/PolygonSplitter","../render/Renderable","../geom/Sector","../shapes/ShapeAttributes","../error/UnsupportedOperationError","../geom/Vec3"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){"use strict";var g=function e(t){h.call(this),this._displayName="Surface Shape",this._attributes=t||new d(null),this._highlightAttributes=null,this._highlighted=!1,this._enabled=!0,this._pathType=WorldWind.GREAT_CIRCLE,this._maximumNumEdgeIntervals=e.DEFAULT_NUM_EDGE_INTERVALS,this._polarThrottle=e.DEFAULT_POLAR_THROTTLE,this._boundingSector=null,this.pickDelegate=null,this._boundingSectors=[],this._locations=null,this._boundaries=null,this._interiorGeometry=null,this._outlineGeometry=null,this._isInteriorInhibited=!1,this.stateKeyInvalid=!0,this._attributesStateKey=null,this.boundariesArePrepared=!1,this.layer=null,this.pickColor=null,this.contours=[],this.containsPole=!1,this.crossesAntiMeridian=!1,this.expirationInterval=2e3,this.shapeDataCache=new s(3,2),this.currentData=null};return g.prototype=Object.create(h.prototype),Object.defineProperties(g.prototype,{stateKey:{get:function(){if(this._attributesStateKey){var e=null;this._highlighted?this._highlightAttributes&&(e=this._highlightAttributes.stateKey):this._attributes&&(e=this._attributes.stateKey),e!=this._attributesStateKey&&(this._attributesStateKey=e,this.stateKeyInvalid=!0)}else this._highlighted?this._highlightAttributes&&(this._attributesStateKey=this._highlightAttributes.stateKey):this._attributes&&(this._attributesStateKey=this._attributes.stateKey),this._attributesStateKey&&(this.stateKeyInvalid=!0);return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey()),this._stateKey}},displayName:{get:function(){return this._displayName},set:function(e){this.stateKeyInvalid=!0,this._displayName=e}},attributes:{get:function(){return this._attributes},set:function(e){this.stateKeyInvalid=!0,this._attributes=e,this._attributesStateKey=e.stateKey}},highlightAttributes:{get:function(){return this._highlightAttributes},set:function(e){this.stateKeyInvalid=!0,this._highlightAttributes=e}},highlighted:{get:function(){return this._highlighted},set:function(e){this.stateKeyInvalid=!0,this._highlighted=e}},enabled:{get:function(){return this._enabled},set:function(e){this.stateKeyInvalid=!0,this._enabled=e}},pathType:{get:function(){return this._pathType},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._pathType=e}},maximumNumEdgeIntervals:{get:function(){return this._maximumNumEdgeIntervals},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._maximumNumEdgeIntervals=e}},polarThrottle:{get:function(){return this._polarThrottle},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._polarThrottle=e}},boundingSector:{get:function(){return this._boundingSector}}}),g.staticStateKey=function(e){return e.stateKeyInvalid=!1,e.highlighted&&e._highlightAttributes?e._attributesStateKey=e._highlightAttributes.stateKey:e._attributes?e._attributesStateKey=e._attributes.stateKey:e._attributesStateKey=null,"dn "+e.displayName+" at "+(e._attributesStateKey?e._attributesStateKey:"null")+" hi "+e.highlighted+" en "+e.enabled+" pt "+e.pathType+" ne "+e.maximumNumEdgeIntervals+" po "+e.polarThrottle+" se ["+e.boundingSector.minLatitude+","+e.boundingSector.maxLatitude+","+e.boundingSector.minLongitude+","+e.boundingSector.maxLongitude+"]"},g.prototype.computeStateKey=function(){return g.staticStateKey(this)},g.prototype.area=function(e,t){throw new u(a.logMessage(a.LEVEL_SEVERE,"SurfaceShape","area","notYetImplemented"))},g.prototype.computeBoundaries=function(t){throw new e(a.logMessage(a.LEVEL_SEVERE,"SurfaceShape","computeBoundaries","abstractInvocation"))},g.prototype.intersectsFrustum=function(e){return!this.currentData||!this.currentData.extent||(e.pickingMode?this.currentData.extent.intersectsFrustum(e.pickFrustum):this.currentData.extent.intersectsFrustum(e.frustumInModelCoordinates))},g.prototype.isShapeDataCurrent=function(e,t){return t.verticalExaggeration===e.verticalExaggeration&&t.expiryTime>Date.now()},g.prototype.createShapeDataObject=function(){return{}},g.prototype.resetExpiration=function(e){e.expiryTime=Date.now()+this.expirationInterval+1e3*Math.random()},g.prototype.establishCurrentData=function(e){this.currentData=this.shapeDataCache.entryForKey(e.globeStateKey),this.currentData||(this.currentData=this.createShapeDataObject(),this.resetExpiration(this.currentData),this.shapeDataCache.putEntry(e.globeStateKey,this.currentData,1)),this.currentData.isExpired=!this.isShapeDataCurrent(e,this.currentData)},g.prototype.render=function(e){this.enabled&&(this.layer=e.currentLayer,this.prepareBoundaries(e),this.establishCurrentData(e),!this.currentData.isExpired&&this.currentData.extent||(this.computeExtent(e),this.currentData.verticalExaggeration=e.verticalExaggeration,this.resetExpiration(this.currentData)),this.currentData&&this.currentData.extent&&!this.intersectsFrustum(e)||e.surfaceShapeTileBuilder.insertSurfaceShape(this))},g.prototype.interpolateLocations=function(e){var t,n,r,i=e[0],o=i,a=!0,s=!0,u=0,l=!0;for(this._locations=[i],n=1,r=e.length;n<r;n+=1)t=o,s=a,l=!0,((a=(o=e[n]).latitude==i.latitude&&o.longitude==i.longitude)||s)&&(u+=1)>2&&(l=!1),l&&this.interpolateEdge(t,o,this._locations),this._locations.push(o),t=o;this._isInteriorInhibited||t.latitude==i.latitude&&t.longitude==i.longitude||(this.interpolateEdge(t,i,this._locations),this._locations.push(i))},g.prototype.interpolateEdge=function(e,t,n){var r,i,a=o.greatCircleDistance(e,t),s=Math.round(this._maximumNumEdgeIntervals*a/Math.PI);if(s>0){r=1/s,i=e;for(var u=this.throttledStep(r,i);u<1;u+=this.throttledStep(r,i))i=new o(0,0),o.interpolateAlongPath(this._pathType,u,e,t,i),180===e.longitude&&180===t.longitude?i.longitude=180:-180===e.longitude&&-180===t.longitude&&(i.longitude=-180),n.push(i)}},g.prototype.throttledStep=function(e,n){var r=Math.cos(n.latitude*t.DEGREES_TO_RADIANS);r*=r;var i=this._polarThrottle/(1+this._polarThrottle);return e*(1-i+i*r)},g.prototype.prepareBoundaries=function(e){if(!this.boundariesArePrepared){this.computeBoundaries(e);var t=this.formatBoundaries();this.normalizeAngles(t),t=this.interpolateBoundaries(t);var n=[],r=c.splitContours(t,n);this.contours=n,this.crossesAntiMeridian=r,this.prepareGeometry(e,n),this.prepareSectors(),this.boundariesArePrepared=!0}},g.prototype.formatBoundaries=function(){var e=[];return this._boundaries.length?(null!=this._boundaries[0].latitude?e.push(this._boundaries):e=this._boundaries,e):e},g.prototype.resetBoundaries=function(){this.boundariesArePrepared=!1,this.shapeDataCache.clear(!1)},g.prototype.normalizeAngles=function(e){for(var n=0,r=e.length;n<r;n++)for(var i=e[n],o=0,a=i.length;o<a;o++){var s=i[o];(s.longitude<-180||s.longitude>180)&&(s.longitude=t.normalizedDegreesLongitude(s.longitude)),(s.latitude<-90||s.latitude>90)&&(s.latitude=t.normalizedDegreesLatitude(s.latitude))}},g.prototype.interpolateBoundaries=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.interpolateLocations(i),t.push(this._locations.slice()),this._locations.length=0}return t},g.prototype.computeSectors=function(e){return this._boundingSectors&&this._boundingSectors.length>0||this.prepareBoundaries(e),this._boundingSectors},g.prototype.computeExtent=function(e){if(!this._boundingSectors||0===this._boundingSectors.length)return null;if(!this.currentData)return null;var t;if(this.currentData.extent||(this.currentData.extent=new r),1===this._boundingSectors.length)t=this._boundingSectors[0].computeBoundingPoints(e.globe,e.verticalExaggeration),this.currentData.extent.setToVec3Points(t);else{for(var n=[],i=0;i<this._boundingSectors.length;i++){t=this._boundingSectors[i].computeBoundingPoints(e.globe,e.verticalExaggeration);var o=new r;o.setToVec3Points(t);for(var a=o.getCorners(),s=0;s<a.length;s++)n.push(a[s])}this.currentData.extent.setToVec3Points(n)}return this.currentData.extent},g.prototype.computeShiftedLocations=function(e,t,n,r){for(var i=[],a=new m(0,0,0),s=new WorldWind.Position(0,0,0),u=e.computePointFromLocation(t.latitude,t.longitude,new m(0,0,0)),l=e.computePointFromLocation(n.latitude,n.longitude,new m(0,0,0)).subtract(u),c=0,h=r.length;c<h;c++)e.computePointFromLocation(r[c].latitude,r[c].longitude,a),a.add(l),e.computePositionFromPoint(a[0],a[1],a[2],s),i.push(new o(s.latitude,s.longitude));return i},g.prototype.prepareSectors=function(){this.determineSectors(),this.crossesAntiMeridian?this.sectorsOverAntiMeridian():this.sectorsNotOverAntiMeridian()},g.prototype.determineSectors=function(){for(var e=0,t=this.contours.length;e<t;e++){var n=this.contours[e],r=n.polygons;n.sectors=[];for(var i=0,a=r.length;i<a;i++){var s=r[i],u=new f(0,0,0,0);if(u.setToBoundingSector(s),this._pathType===WorldWind.GREAT_CIRCLE){var l=o.greatCircleArcExtremeLocations(s),c=Math.min(u.minLatitude,l[0].latitude),h=Math.max(u.maxLatitude,l[1].latitude);u.minLatitude=c,u.maxLatitude=h}n.sectors.push(u)}}},g.prototype.sectorsOverAntiMeridian=function(){for(var e=new f(90,-90,180,-180),t=new f(90,-90,180,-180),n=0,r=this.contours.length;n<r;n++)for(var i=this.contours[n].sectors,o=0,a=i.length;o<a;o++){var s=i[o];s.minLongitude<0&&s.maxLongitude>0?(t.union(s),e.union(s)):s.minLongitude<0?t.union(s):e.union(s)}var u=Math.min(e.minLatitude,t.minLatitude),l=Math.max(e.maxLatitude,e.maxLatitude);this._boundingSector=new f(u,l,-180,180),this._boundingSectors=[e,t]},g.prototype.sectorsNotOverAntiMeridian=function(){this._boundingSector=new f(90,-90,180,-180);for(var e=0,t=this.contours.length;e<t;e++)for(var n=this.contours[e].sectors,r=0,i=n.length;r<i;r++)this._boundingSector.union(n[r]);this._boundingSectors=[this._boundingSector]},g.prototype.prepareGeometry=function(e,t){for(var n=[],r=[],i=0,a=t.length;i<a;i++)for(var s=t[i],u=s.poleIndex,l=0,c=s.polygons.length;l<c;l++){var h=s.polygons[l],f=s.iMap[l];n.push(h),s.pole!==o.poles.NONE&&c>1?l===u?this.outlineForPole(h,f,r):this.outlineForSplit(h,f,r):s.pole!==o.poles.NONE&&1===c?this.outlineForPole(h,f,r):s.pole===o.poles.NONE&&c>1?this.outlineForSplit(h,f,r):s.pole===o.poles.NONE&&1===c&&r.push(h)}this._interiorGeometry=n,this._outlineGeometry=r},g.prototype.outlineForPole=function(e,t,n){this.containsPole=!0;for(var r=[],i=0,o=0,a=e.length;o<a;o++){var s=e[o],u=t.get(o);u&&u.forPole&&++i%2===1&&(r.push(s),n.push(r),r=[]),i%2===0&&r.push(s)}r.length&&n.push(r)},g.prototype.outlineForSplit=function(e,t,n){for(var r=[],i=0,o=0,a=e.length;o<a;o++){var s=e[o],u=t.get(o);u&&!u.forPole&&++i%2===0&&(r.push(s),n.push(r),r=[]),i%2===1&&r.push(s)}},g.prototype.resetPickColor=function(){this.pickColor=null},g.prototype.renderToTexture=function(e,t,n,r,o,a){var s=this._highlighted&&this._highlightAttributes||this._attributes;if(s){var u=!this._isInteriorInhibited&&s.drawInterior,c=s.drawOutline&&s.outlineWidth>0;if(u||c){if(e.pickingMode)this.pickColor||(this.pickColor=e.uniquePickColor()),t.fillStyle=this.pickColor.toCssColorString(),t.strokeStyle=t.fillStyle,t.lineWidth=s.outlineWidth;else{var h=s.interiorColor,f=s.outlineColor;t.fillStyle=new i(h.red,h.green,h.blue,h.alpha*this.layer.opacity).toCssColorString(),t.strokeStyle=new i(f.red,f.green,f.blue,f.alpha*this.layer.opacity).toCssColorString(),t.lineWidth=s.outlineWidth}if(this.crossesAntiMeridian||this.containsPole?(u&&(this.draw(this._interiorGeometry,t,n,r,o,a),t.fill()),c&&(this.draw(this._outlineGeometry,t,n,r,o,a),t.stroke())):(this.draw(this._interiorGeometry,t,n,r,o,a),u&&t.fill(),c&&t.stroke()),e.pickingMode){var d=new l(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);e.resolvePick(d)}}}},g.prototype.draw=function(e,t,n,r,i,o){t.beginPath();for(var a=0,s=e.length;a<s;a++){var u=e[a],l=u[0],c=l.longitude*n+i,h=l.latitude*r+o;t.moveTo(c,h);for(var f=1,d=u.length;f<d;f++)c=(l=u[f]).longitude*n+i,h=l.latitude*r+o,t.lineTo(c,h)}},g.DEFAULT_NUM_EDGE_INTERVALS=128,g.DEFAULT_POLAR_THROTTLE=10,g})),i("shapes/SurfaceShapeTile",["../geom/Angle","../error/ArgumentError","../util/Level","../util/Logger","../geom/Sector","../render/Texture","../render/TextureTile"],(function(e,t,n,r,i,o,a){"use strict";var s=function(e,t,n,r){a.call(this,e,t,n,r),this.surfaceShapes=[],this.surfaceShapeStateKeys=[],this.asRenderedSurfaceShapeStateKeys=[],this.sector=e,this.cacheKey=null,this.pickSequence=0,this.createCtx2D()};return(s.prototype=Object.create(a.prototype)).clearShapes=function(){this.surfaceShapes=[],this.surfaceShapeStateKeys=[]},s.prototype.hasShapes=function(){return this.surfaceShapes.length>0},s.prototype.getShapes=function(){return this.surfaceShapes},s.prototype.setShapes=function(e){this.surfaceShapes=e},s.prototype.getSector=function(){return this.sector},s.prototype.addSurfaceShape=function(e){this.surfaceShapes.push(e),this.surfaceShapeStateKeys.push(e.stateKey+" lo "+e.layer.opacity)},s.prototype.needsUpdate=function(e){var t,n;if(this.surfaceShapes.length!=this.asRenderedSurfaceShapeStateKeys.length)return!0;for(t=0,n=this.surfaceShapes.length;t<n;t+=1)if(this.surfaceShapeStateKeys[t]!==this.asRenderedSurfaceShapeStateKeys[t])return!0;return!this.hasTexture(e)},s.prototype.hasTexture=function(e){return!e.pickingMode&&(this.gpuCacheKey||(this.gpuCacheKey=this.getCacheKey()),e.gpuResourceCache.containsResource(this.gpuCacheKey))},s.prototype.updateTexture=function(e){var t=e.currentGlContext,n=s.canvas,r=s.ctx2D;n.width=this.tileWidth,n.height=this.tileHeight;var i=this.tileWidth/this.sector.deltaLongitude(),a=-this.tileHeight/this.sector.deltaLatitude(),u=-this.sector.minLongitude*i,l=-this.sector.maxLatitude*a;this.asRenderedSurfaceShapeStateKeys=[];for(var c=0,h=this.surfaceShapes.length;c<h;c+=1){var f=this.surfaceShapes[c];this.asRenderedSurfaceShapeStateKeys.push(this.surfaceShapeStateKeys[c]),f.renderToTexture(e,r,i,a,u,l)}this.gpuCacheKey=this.getCacheKey();var d=e.gpuResourceCache,p=new o(t,n);return d.putResource(this.gpuCacheKey,p,p.size),d.setResourceAgingFactor(this.gpuCacheKey,10),p},s.prototype.getCacheKey=function(){return this.cacheKey||(this.cacheKey="SurfaceShapeTile:"+this.tileKey+","+this.pickSequence.toString()),this.cacheKey},s.prototype.createCtx2D=function(){s.ctx2D||(s.canvas=document.createElement("canvas"),s.ctx2D=s.canvas.getContext("2d"))},s.canvas=null,s.ctx2D=null,s})),i("shapes/SurfaceShapeTileBuilder",["../error/ArgumentError","../render/DrawContext","../globe/Globe","../shaders/GpuProgram","../util/Level","../util/LevelSet","../geom/Location","../util/Logger","../geom/Matrix","../cache/MemoryCache","../error/NotYetImplementedError","../pick/PickedObject","../geom/Rectangle","../geom/Sector","../shapes/SurfaceShape","../shapes/SurfaceShapeTile","../globe/Terrain","../globe/TerrainTile","../globe/TerrainTileList","../render/TextureTile","../util/Tile"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b){"use strict";var _=function(){this.numRowsTilesInTopLevel=4,this.numColumnsTilesInTopLevel=8,this.maximumSubdivisionDepth=15,this.tileWidth=256,this.tileHeight=256,this.levels=new o(d.FULL_SPHERE,new a(180/this.numRowsTilesInTopLevel,360/this.numColumnsTilesInTopLevel),this.maximumSubdivisionDepth,this.tileWidth,this.tileHeight),this.surfaceShapes=[],this.surfaceShapeTiles=[],this.topLevelTiles=[],this.sector=new d(-90,90,-180,180),this.detailControl=1.25,this.tileCache=new l(5e5,4e5)};return _.prototype.clear=function(){this.surfaceShapeTiles.splice(0,this.surfaceShapeTiles.length),this.surfaceShapes.splice(0,this.surfaceShapes.length)},_.prototype.insertSurfaceShape=function(e){this.surfaceShapes.push(e)},_.prototype.doRender=function(e){if(e.pickingMode){for(var t=0,n=this.surfaceShapes.length;t<n;t+=1)this.surfaceShapes[t].resetPickColor();_.pickSequence+=1;var r=this.surfaceShapeTiles,i=this.topLevelTiles;this.surfaceShapeTiles=[],this.topLevelTiles=[],this.buildTiles(e),e.deepPicking?this.doDeepPickingRender(e):e.surfaceTileRenderer.renderTiles(e,this.surfaceShapeTiles,1),this.surfaceShapeTiles=r,this.topLevelTiles=i}else this.buildTiles(e),e.surfaceTileRenderer.renderTiles(e,this.surfaceShapeTiles,1)},_.prototype.doDeepPickingRender=function(e){var t,n,r,i,o,a,s,u,l,c=[];for(o=0,a=e.objectsAtPickPoint.objects.length;o<a;o+=1)(s=e.objectsAtPickPoint.objects[o]).userObject instanceof p&&(u=s.userObject,c.indexOf(u)<0&&(c.push(u),e.objectsAtPickPoint.objects.splice(o,1),o-=1,a-=1));if(!(c.length<=0)){var f=[];for(r=0,i=c.length;r<i;r+=1){for(u=c[r],t=0,n=this.surfaceShapeTiles.length;t<n;t+=1)(l=this.surfaceShapeTiles[t]).setShapes([u]),l.updateTexture(e);e.surfaceTileRenderer.renderTiles(e,this.surfaceShapeTiles,1);var d=e.readPickColor(e.pickPoint);d&&u.pickColor.equals(d)&&(s=new h(u.pickColor.clone(),u.pickDelegate?u.pickDelegate:u,null,u.layer,!1),f.push(s))}for(o=0,a=e.objectsAtPickPoint.objects.length;o<a;o+=1)(s=e.objectsAtPickPoint.objects[o]).userObject instanceof p&&(e.objectsAtPickPoint.objects.splice(o,1),o-=1,a-=1);for(o=0,a=f.length;o<a;o+=1)s=f[o],e.objectsAtPickPoint.objects.push(s)}},_.prototype.buildTiles=function(t){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"SurfaceShapeTileBuilder","buildTiles","missingDc"));if(this.surfaceShapes&&!(this.surfaceShapes.length<1)){this.assembleTiles(t),this.surfaceShapes.splice(0,this.surfaceShapes.length);for(var n=0,r=this.surfaceShapeTiles.length;n<r;n+=1)this.surfaceShapeTiles[n].clearShapes()}},_.prototype.assembleTiles=function(e){var t,n,r,i,o,a,s;this.topLevelTiles.length<1&&this.createTopLevelTiles();var u={};for(n=0,r=this.surfaceShapes.length;n<r;n+=1){var l=this.surfaceShapes[n],c=l.computeSectors(e);if(c)for(a=0,s=c.length;a<s;a+=1){var h=c[a];for(i=0,o=this.topLevelTiles.length;i<o;i+=1)(t=this.topLevelTiles[i]).sector.intersects(h)&&(u[t.tileKey]=t,t.addSurfaceShape(l))}}for(var f in u)u.hasOwnProperty(f)&&(t=u[f],this.addTileOrDescendants(e,this.levels,null,t))},_.prototype.addTileOrDescendants=function(e,t,n,r){if(this.intersectsFrustum(e,r)){if(null!=n&&this.addIntersectingShapes(e,n,r),r.hasShapes()){if(this.meetsRenderCriteria(e,t,r))return void this.addTile(e,r);for(var i=t.level(r.level.levelNumber+1),o=e.pickingMode?r.subdivide(i,this):r.subdivideToCache(i,this,this.tileCache),a=0,s=o.length;a<s;a+=1){var u=o[a];this.addTileOrDescendants(e,t,r,u)}r.clearShapes()}}else r.clearShapes()},_.prototype.addIntersectingShapes=function(e,t,n){for(var r=t.getShapes(),i=0,o=r.length;i<o;i+=1){var a=r[i],s=a.computeSectors(e);if(s)for(var u=0,l=s.length;u<l;u+=1){var c=s[u];if(n.getSector().intersects(c)){n.addSurfaceShape(a);break}}}},_.prototype.addTile=function(e,t){e.pickingMode&&(t.pickSequence=_.pickSequence),t.needsUpdate(e)&&t.updateTexture(e),this.surfaceShapeTiles.push(t)},_.prototype.createTile=function(e,t,n,r){return new m(e,t,n,r)},_.prototype.createTopLevelTiles=function(){b.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles)},_.prototype.intersectsFrustum=function(e,t){return!(e.globe.projectionLimits&&!t.sector.overlaps(e.globe.projectionLimits))&&(t.update(e),t.extent.intersectsFrustum(e.pickingMode?e.pickFrustum:e.frustumInModelCoordinates))},_.prototype.meetsRenderCriteria=function(e,t,n){return n.level.levelNumber==t.lastLevel().levelNumber||!n.mustSubdivide(e,this.detailControl)},_.pickSequence=0,_})),i("shaders/SurfaceTileRendererProgram",["../error/ArgumentError","../util/Color","../shaders/GpuProgram","../util/Logger"],(function(e,t,n,r){"use strict";var i=function(e){n.call(this,e,"attribute vec4 vertexPoint;\nattribute vec4 vertexTexCoord;\nuniform mat4 mvpMatrix;\nuniform mat4 texSamplerMatrix;\nuniform mat4 texMaskMatrix;\nvarying vec2 texSamplerCoord;\nvarying vec2 texMaskCoord;\nvoid main() {\ngl_Position = mvpMatrix * vertexPoint;\ntexSamplerCoord = (texSamplerMatrix * vertexTexCoord).st;\ntexMaskCoord = (texMaskMatrix * vertexTexCoord).st;\n}","precision mediump float;\nuniform sampler2D texSampler;\nuniform float opacity;\nuniform vec4 color;\nuniform bool modulateColor;\nvarying vec2 texSamplerCoord;\nvarying vec2 texMaskCoord;\nbool isInsideTextureImage(const vec2 coord) {\n    return coord.x >= 0.0 && coord.x <= 1.0 && coord.y >= 0.0 && coord.y <= 1.0;\n}\nvoid main(void) {\nfloat mask = float(isInsideTextureImage(texMaskCoord));if (modulateColor) {\n    gl_FragColor = color * mask * floor(texture2D(texSampler, texSamplerCoord).a + 0.5);\n} else {\n    gl_FragColor = texture2D(texSampler, texSamplerCoord) * mask * opacity;\n}\n}"),this.vertexPointLocation=this.attributeLocation(e,"vertexPoint"),this.vertexTexCoordLocation=this.attributeLocation(e,"vertexTexCoord"),this.mvpMatrixLocation=this.uniformLocation(e,"mvpMatrix"),this.colorLocation=this.uniformLocation(e,"color"),this.modulateColorLocation=this.uniformLocation(e,"modulateColor"),this.texSamplerMatrixLocation=this.uniformLocation(e,"texSamplerMatrix"),this.texMaskMatrixLocation=this.uniformLocation(e,"texMaskMatrix"),this.texSamplerLocation=this.uniformLocation(e,"texSampler"),this.opacityLocation=this.uniformLocation(e,"opacity"),this.vertexPointLocation=-1};return i.key="WorldWindGpuSurfaceTileRenderingProgram",(i.prototype=Object.create(n.prototype)).loadModelviewProjection=function(t,n){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(t,n,this.mvpMatrixLocation)},i.prototype.loadTexSamplerMatrix=function(t,n){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadTexSamplerMatrix","missingMatrix"));this.loadUniformMatrix(t,n,this.texSamplerMatrixLocation)},i.prototype.loadTexMaskMatrix=function(t,n){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadTexMaskMatrix","missingMatrix"));this.loadUniformMatrix(t,n,this.texMaskMatrixLocation)},i.prototype.loadTexSampler=function(e,t){e.uniform1i(this.texSamplerLocation,t-WebGLRenderingContext.TEXTURE0)},i.prototype.loadOpacity=function(e,t){e.uniform1f(this.opacityLocation,t)},i.prototype.loadColor=function(t,n){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadColor","missingColor"));this.loadUniformColor(t,n,this.colorLocation)},i.prototype.loadModulateColor=function(e,t){e.uniform1i(this.modulateColorLocation,t?1:0)},i})),i("render/SurfaceTileRenderer",["../error/ArgumentError","../util/Logger","../geom/Matrix","../shapes/SurfaceShapeTile","../shaders/SurfaceTileRendererProgram"],(function(e,t,n,r,i){"use strict";var o=function(){this.texMaskMatrix=n.fromIdentity(),this.texSamplerMatrix=n.fromIdentity(),this.isSurfaceShapeTileRendering=!1};return o.prototype.renderTiles=function(n,i,o,a){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"SurfaceTileRenderer","renderTiles","Specified surface tiles array is null or undefined."));if(!(i.length<1)){var s,u,l,c,h=n.terrain,f=n.currentGlContext,d=0,p=1;if(h){this.isSurfaceShapeTileRendering=i[0]instanceof r,o*=n.surfaceOpacity,s=this.beginRendering(n,o),h.beginRendering(n);try{for(var m=0,g=h.surfaceGeometry.length;m<g;m++){l=(u=h.surfaceGeometry[m]).sector,h.beginRenderingTile(n,u);try{for(var A=0,v=i.length;A<v;A++)(c=i[A]).sector.overlaps(l)&&c.bind(n)&&(n.pickingMode?c.pickColor&&s.loadColor(f,c.pickColor):a&&c.opacity!=p&&(s.loadOpacity(f,o*c.opacity),p=c.opacity),this.applyTileState(n,u,c),h.renderTile(n,u),++d)}catch(e){console.log(e)}finally{h.endRenderingTile(n,u)}}}catch(e){console.log(e)}finally{h.endRendering(n),this.endRendering(n),n.frameStatistics.incrementRenderedTileCount(d)}}}},o.prototype.beginRendering=function(e,t){var n=e.currentGlContext,r=e.findAndBindProgram(i);return r.loadTexSampler(n,n.TEXTURE0),e.pickingMode&&!this.isSurfaceShapeTileRendering?r.loadModulateColor(n,!0):(r.loadModulateColor(n,!1),r.loadOpacity(n,t)),r},o.prototype.endRendering=function(e){var t=e.currentGlContext;t.bindTexture(t.TEXTURE_2D,null)},o.prototype.applyTileState=function(e,t,n){var r=e.currentGlContext,i=e.currentProgram,o=t.sector,a=o.deltaLatitude(),s=o.deltaLongitude(),u=n.sector,l=u.deltaLatitude(),c=u.deltaLongitude(),h=l>0?l:1,f=c>0?c:1,d=s/f,p=a/h,m=-(u.minLongitude-o.minLongitude)/f,g=-(u.minLatitude-o.minLatitude)/h;this.texMaskMatrix.set(d,0,0,m,0,p,0,g,0,0,1,0,0,0,0,1),this.texSamplerMatrix.setToUnitYFlip(),n.applyInternalTransform(e,this.texSamplerMatrix),this.texSamplerMatrix.multiplyMatrix(this.texMaskMatrix),i.loadTexSamplerMatrix(r,this.texSamplerMatrix),i.loadTexMaskMatrix(r,this.texMaskMatrix)},o})),i("render/TextRenderer",["../error/ArgumentError","../shaders/BasicTextureProgram","../util/Color","../util/Font","../util/Logger","../geom/Matrix","../render/Texture","../geom/Vec2"],(function(e,t,n,r,i,o,a,s){"use strict";var u=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"TextRenderer","constructor","missingDc"));this.canvas2D=document.createElement("canvas"),this.ctx2D=this.canvas2D.getContext("2d"),this.dc=t,this.enableOutline=!0,this.lineSpacing=.15,this.outlineColor=new n(0,0,0,.5),this.outlineWidth=4,this.textColor=new n(1,1,1,1),this.typeFace=new r(14)};return u.prototype.textSize=function(e){if(0===e.length)return new s(0,0);this.ctx2D.font=this.typeFace.fontString;for(var t=e.split("\n"),n=t.length*(this.typeFace.size*(1+this.lineSpacing)),r=0,i=0;i<t.length;i++)r=Math.max(r,this.ctx2D.measureText(t[i]).width);return this.enableOutline&&(r+=this.outlineWidth,n+=this.outlineWidth),new s(r,n)},u.prototype.renderText=function(e){if(e&&e.length>0){var t=this.drawText(e);return new a(this.dc.currentGlContext,t)}return null},u.prototype.drawText=function(e){var t=this.ctx2D,n=this.canvas2D,r=this.textSize(e),i=e.split("\n"),o=this.enableOutline?this.outlineWidth/2:0,a=this.dc.pixelScale;n.width=Math.ceil(r[0])*a,n.height=Math.ceil(r[1])*a,t.scale(a,a),t.font=this.typeFace.fontString,t.textBaseline="bottom",t.textAlign=this.typeFace.horizontalAlignment,t.fillStyle=this.textColor.toCssColorString(),t.strokeStyle=this.outlineColor.toCssColorString(),t.lineWidth=this.outlineWidth,t.lineCap="round",t.lineJoin="round","left"===this.typeFace.horizontalAlignment?t.translate(o,0):"right"===this.typeFace.horizontalAlignment?t.translate(r[0]-o,0):t.translate(r[0]/2,0);for(var s=0;s<i.length;s++)t.translate(0,this.typeFace.size*(1+this.lineSpacing)+o),this.enableOutline&&t.strokeText(i[s],0,0),t.fillText(i[s],0,0);return n},u.prototype.getMaxLineHeight=function(){return this.textSize("_\xc9")[1]},u.prototype.wrap=function(t,n,r){if(!t)throw new e(i.logMessage(i.WARNING,"TextRenderer","wrap","missing text"));var o,a=t.split("\n"),s="";for(o=0;o<a.length;o++)a[o]=this.wrapLine(a[o],n);var u=0,l=!1,c=this.getMaxLineHeight();for(o=0;o<a.length&&!l;o++){for(var h=a[o].split("\n"),f=0;f<h.length&&!l;f++)r<=0||u+c<=r?(s+=h[f],u+=c+this.lineSpacing,f<h.length-1&&(s+="\n")):l=!0;o<a.length-1&&!l&&(s+="\n")}return l&&(s.length>0&&(s=s.substring(0,s.length-1)),s+="..."),s},u.prototype.wrapLine=function(e,t){var n="",r=e.trim();if(this.textSize(r)[0]>t){for(var i="",o=0,a=r.indexOf(" ",o+1);o<r.length;){-1===a&&(a=r.length);var s=r.substring(o,a),u=i+s;this.textSize(u)[0]<=t?i+=s:0!==i.length?(n+=i,n+="\n",i="",i+=s.trim()):i+=s.trim(),(o=a)<r.length-1&&(a=r.indexOf(" ",o+1))}n+=i}else n+=r;return n},u})),i("render/DrawContext",["../error/ArgumentError","../util/Color","../util/FrameStatistics","../render/FramebufferTexture","../render/FramebufferTileController","../geom/Frustum","../globe/Globe","../shaders/GpuProgram","../cache/GpuResourceCache","../layer/Layer","../geom/Line","../util/Logger","../geom/Matrix","../pick/PickedObjectList","../geom/Plane","../geom/Position","../geom/Rectangle","../render/ScreenCreditController","../geom/Sector","../shapes/SurfaceShape","../shapes/SurfaceShapeTileBuilder","../render/SurfaceTileRenderer","../render/TextRenderer","../geom/Vec2","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w,E,x,S){"use strict";var T=function(n){if(!n)throw new e(h.logMessage(h.LEVEL_SEVERE,"Texture","constructor","missingGlContext"));this.currentGlContext=n,this.canvas2D=document.createElement("canvas"),this.ctx2D=this.canvas2D.getContext("2d"),this.clearColor=t.TRANSPARENT,this.gpuResourceCache=new u(WorldWind.configuration.gpuCacheSize,.8*WorldWind.configuration.gpuCacheSize),this.surfaceTileRenderer=new _,this.surfaceShapeTileBuilder=new b,this.surfaceShapeTileController=new i,this.screenCreditController=new A,this.textRenderer=new w(this),this.currentFramebuffer=null,this.currentProgram=null,this.surfaceRenderables=[],this.orderedRenderingMode=!1,this.orderedRenderables=[],this.orderedRenderablesCounter=0,this.timestamp=Date.now(),this.previousRedrawTimestamp=this.timestamp,this.redrawRequested=!1,this.globe=null,this.globeStateKey=null,this.layers=null,this.currentLayer=null,this.eyePosition=new m(0,0,0),this.eyePoint=new x(0,0,0),this.screenProjection=f.fromIdentity(),this.terrain=null,this.verticalExaggeration=1,this.fadeTime=500,this.surfaceOpacity=1,this.frameStatistics=null,this.pickingMode=!1,this.pickTerrainOnly=!1,this.deepPicking=!1,this.regionPicking=!1,this.pickPoint=null,this.pickRay=null,this.pickRectangle=null,this.pickFramebuffer=null,this.pickFrustum=null,this.pickColor=new t(0,0,0,1),this.objectsAtPickPoint=new d,this.pixelScale=1,this.navigator=null,this.modelview=f.fromIdentity(),this.projection=f.fromIdentity(),this.modelviewProjection=f.fromIdentity(),this.frustumInModelCoordinates=null,this.modelviewNormalTransform=f.fromIdentity(),this.viewport=new g(0,0,0,0),this.pixelSizeFactor=0,this.pixelSizeOffset=0,this.glExtensionsCache={}};return T.unitCubeKey="DrawContextUnitCubeKey",T.unitCubeElementsKey="DrawContextUnitCubeElementsKey",T.unitQuadKey="DrawContextUnitQuadKey",T.unitQuadKey3="DrawContextUnitQuadKey3",T.prototype.reset=function(){this.screenCreditController.clear(),this.surfaceRenderables=[],this.orderedRenderingMode=!1,this.orderedRenderables=[],this.screenRenderables=[],this.orderedRenderablesCounter=0;var e=this.timestamp;this.timestamp=Date.now(),this.timestamp===e&&++this.timestamp,this.redrawRequested=!1,this.globe=null,this.globeStateKey=null,this.layers=null,this.currentLayer=null,this.terrain=null,this.verticalExaggeration=1,this.frameStatistics=null,this.accumulateOrderedRenderables=!0,this.pickingMode=!1,this.pickTerrainOnly=!1,this.deepPicking=!1,this.regionPicking=!1,this.pickPoint=null,this.pickRay=null,this.pickRectangle=null,this.pickFrustum=null,this.pickColor=new t(0,0,0,1),this.objectsAtPickPoint.clear(),this.eyePoint.set(0,0,0),this.modelview.setToIdentity(),this.projection.setToIdentity(),this.modelviewProjection.setToIdentity(),this.frustumInModelCoordinates=null,this.modelviewNormalTransform.setToIdentity()},T.prototype.update=function(){var e=this.currentGlContext,t=this.eyePoint;this.globeStateKey=this.globe.stateKey,this.globe.computePositionFromPoint(t[0],t[1],t[2],this.eyePosition),this.screenProjection.setToScreenProjection(e.drawingBufferWidth,e.drawingBufferHeight)},T.prototype.contextLost=function(){this.gpuResourceCache.clear(),this.pickFramebuffer=null,this.currentFramebuffer=null,this.currentProgram=null,this.glExtensionsCache={}},T.prototype.contextRestored=function(){this.gpuResourceCache.clear(),this.glExtensionsCache={}},T.prototype.bindFramebuffer=function(e){this.currentFramebuffer!=e&&(this.currentGlContext.bindFramebuffer(this.currentGlContext.FRAMEBUFFER,e?e.framebufferId:null),this.currentFramebuffer=e)},T.prototype.bindProgram=function(e){this.currentProgram!=e&&(this.currentGlContext.useProgram(e?e.programId:null),this.currentProgram=e)},T.prototype.findAndBindProgram=function(t){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"DrawContext","findAndBindProgram","The specified program constructor is null or undefined."));var n=this.gpuResourceCache.resourceForKey(t.key);if(n)this.bindProgram(n);else try{n=new t(this.currentGlContext),this.bindProgram(n),this.gpuResourceCache.putResource(t.key,n,n.size)}catch(e){h.log(h.LEVEL_SEVERE,"Error attempting to create GPU program.")}return n},T.prototype.addSurfaceRenderable=function(e){e&&this.surfaceRenderables.push(e)},T.prototype.peekSurfaceRenderable=function(){return this.surfaceRenderables.length>0?this.surfaceRenderables[this.surfaceRenderables.length-1]:null},T.prototype.popSurfaceRenderable=function(){return this.surfaceRenderables.length>0?this.surfaceRenderables.pop():null},T.prototype.reverseSurfaceRenderables=function(){this.surfaceRenderables.reverse()},T.prototype.addOrderedRenderable=function(e,t){if(e){var n={orderedRenderable:e,insertionOrder:this.orderedRenderablesCounter++,eyeDistance:t||e.eyeDistance,globeStateKey:this.globeStateKey};this.globe.continuous&&(n.globeOffset=this.globe.offset),0===n.eyeDistance?this.screenRenderables.push(n):this.orderedRenderables.push(n)}},T.prototype.addOrderedRenderableToBack=function(e){if(e){var t={orderedRenderable:e,insertionOrder:this.orderedRenderablesCounter++,eyeDistance:Number.MAX_VALUE,globeStateKey:this.globeStateKey};this.globe.continuous&&(t.globeOffset=this.globe.offset),this.orderedRenderables.push(t)}},T.prototype.peekOrderedRenderable=function(){return this.orderedRenderables.length>0?this.orderedRenderables[this.orderedRenderables.length-1].orderedRenderable:null},T.prototype.popOrderedRenderable=function(){if(this.orderedRenderables.length>0){var e=this.orderedRenderables.pop();return this.globeStateKey=e.globeStateKey,this.globe.continuous&&(this.globe.offset=e.globeOffset),e.orderedRenderable}return null},T.prototype.nextScreenRenderable=function(){if(this.screenRenderables.length>0){var e=this.screenRenderables.shift();return this.globeStateKey=e.globeStateKey,this.globe.continuous&&(this.globe.offset=e.globeOffset),e.orderedRenderable}return null},T.prototype.sortOrderedRenderables=function(){this.orderedRenderables.sort((function(e,t){var n=e.eyeDistance,r=t.eyeDistance;if(n<r)return-1;if(n>r)return 1;var i=e.insertionOrder,o=t.insertionOrder;return i>o?-1:i<o?1:0}))},T.prototype.readPickColor=function(e){var n=this.convertPointToViewport(e,new E(0,0)),r=new Uint8Array(4);return this.currentGlContext.readPixels(n[0],n[1],1,1,this.currentGlContext.RGBA,this.currentGlContext.UNSIGNED_BYTE,r),this.clearColor.equalsBytes(r)?null:t.colorFromByteArray(r)},T.prototype.readPickColors=function(e){var n,r=this.currentGlContext,i=new Uint8Array(e.width*e.height*4),o={},a=new t(0,0,0,0),s=r.getParameter(r.PACK_ALIGNMENT);r.pixelStorei(r.PACK_ALIGNMENT,1),this.currentGlContext.readPixels(e.x,e.y,e.width,e.height,r.RGBA,r.UNSIGNED_BYTE,i),r.pixelStorei(r.PACK_ALIGNMENT,s);for(var u=0,l=e.width*e.height;u<l;u++){var c=4*u;(n=t.colorFromBytes(i[c],i[c+1],i[c+2],i[c+3])).equals(this.clearColor)||n.equals(a)||(o[n.toByteString()]=n)}return o},T.prototype.resolvePick=function(e){if(e.userObject instanceof y||!this.deepPicking||this.regionPicking)this.addPickedObject(e);else{var t=this.readPickColor(this.pickPoint);if(!t)return null;e.color.equals(t)&&this.addPickedObject(e)}},T.prototype.addPickedObject=function(e){e&&this.objectsAtPickPoint.add(e)},T.prototype.uniquePickColor=function(){var e=this.pickColor.nextColor().clone();return e.equals(this.clearColor)?e.nextColor():e},T.prototype.makePickFramebuffer=function(){var e=this.currentGlContext,t=e.drawingBufferWidth,n=e.drawingBufferHeight;return this.pickFramebuffer&&this.pickFramebuffer.width==t&&this.pickFramebuffer.height==n||(this.pickFramebuffer=new r(e,t,n,!0)),this.pickFramebuffer},T.prototype.makePickFrustum=function(){if(!this.pickPoint&&!this.pickRectangle)return!1;var e,t,n,r,i,a,s,u,l,c,h,d,m,A,v,y,b,_,w,T,M,L,C=new x(0,0,0),R=new x(0,0,0),O=this.pickRectangle,I=this.viewport;O||(L=this.convertPointToViewport(this.pickPoint,new E(0,0)),O=new g(L[0]-2,L[1]-2,4,4));var P=O.x,k=O.x+O.width,N=O.y,D=O.y+O.height;if(k<0||D<0||P>I.x+I.width||N>I.y+I.height)return!1;O.x=S.clamp(P,I.x,I.x+I.width),O.y=S.clamp(N,I.y,I.y+I.height),O.width=S.clamp(k,I.x,I.x+I.width)-O.x,O.height=S.clamp(D,I.y,I.y+I.height)-O.y,this.pickRectangle=O;var F=f.fromIdentity();return F.invertMatrix(this.modelviewProjection),R[0]=O.x,R[1]=O.y,R[2]=0,F.unProject(R,I,e=new x(0,0,0)),R[0]=O.x,R[1]=O.y,R[2]=1,F.unProject(R,I,t=new x(0,0,0)),R[0]=O.x+O.width,R[1]=O.y,R[2]=0,F.unProject(R,I,n=new x(0,0,0)),R[0]=O.x+O.width,R[1]=O.y,R[2]=1,F.unProject(R,I,r=new x(0,0,0)),R[0]=O.x,R[1]=O.y+O.height,R[2]=0,F.unProject(R,I,i=new x(0,0,0)),R[0]=O.x,R[1]=O.y+O.height,R[2]=1,F.unProject(R,I,a=new x(0,0,0)),R[0]=O.x+O.width,R[1]=O.y+O.height,R[2]=0,F.unProject(R,I,s=new x(0,0,0)),R[0]=O.x+O.width,R[1]=O.y+O.height,R[2]=1,F.unProject(R,I,u=new x(0,0,0)),M=new x(a[0]-e[0],a[1]-e[1],a[2]-e[2]),C.set(i[0]-t[0],i[1]-t[1],i[2]-t[2]),l=M.cross(C),(v=new p(l[0],l[1],l[2],-l.dot(e))).normalize(),M=new x(s[0]-r[0],s[1]-r[1],s[2]-r[2]),C.set(u[0]-n[0],u[1]-n[1],u[2]-n[2]),c=M.cross(C),(y=new p(c[0],c[1],c[2],-c.dot(n))).normalize(),M=new x(a[0]-s[0],a[1]-s[1],a[2]-s[2]),C.set(u[0]-i[0],u[1]-i[1],u[2]-i[2]),h=M.cross(C),(b=new p(h[0],h[1],h[2],-h.dot(i))).normalize(),M=new x(r[0]-e[0],r[1]-e[1],r[2]-e[2]),C.set(t[0]-n[0],t[1]-n[1],t[2]-n[2]),d=M.cross(C),(_=new p(d[0],d[1],d[2],-d.dot(n))).normalize(),M=new x(i[0]-n[0],i[1]-n[1],i[2]-n[2]),C.set(s[0]-e[0],s[1]-e[1],s[2]-e[2]),m=M.cross(C),(w=new p(m[0],m[1],m[2],-m.dot(e))).normalize(),M=new x(u[0]-t[0],u[1]-t[1],u[2]-t[2]),C.set(a[0]-r[0],a[1]-r[1],a[2]-r[2]),A=M.cross(C),(T=new p(A[0],A[1],A[2],-A.dot(t))).normalize(),this.pickFrustum=new o(v,y,_,b,w,T),!0},T.prototype.isSmall=function(e,t){if(!e)return!1;var n=this.eyePoint.distanceTo(e.center),r=this.pixelSizeAtDistance(n);return 2*e.radius<t*r},T.prototype.unitCubeBuffer=function(){var e=this.gpuResourceCache.resourceForKey(T.unitCubeKey);if(!e){var t=this.currentGlContext,n=new Float32Array(24),r=0;n[r++]=0,n[r++]=1,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=1,n[r++]=1,n[r++]=0,n[r++]=1,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=1,n[r++]=1,n[r++]=0,n[r++]=0,n[r++]=1,n[r++]=1,n[r++]=1,n[r++]=1,n[r++]=1,n[r++]=0,n[23]=1,e=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(T.unitCubeKey,e,4*n.length)}return e},T.prototype.unitCubeElements=function(){var e=this.gpuResourceCache.resourceForKey(T.unitCubeElementsKey);if(!e){var t=this.currentGlContext,n=new Int16Array(60),r=0;n[r++]=1,n[r++]=0,n[r++]=3,n[r++]=3,n[r++]=0,n[r++]=2,n[r++]=4,n[r++]=5,n[r++]=6,n[r++]=6,n[r++]=5,n[r++]=7,n[r++]=5,n[r++]=1,n[r++]=7,n[r++]=7,n[r++]=1,n[r++]=3,n[r++]=6,n[r++]=2,n[r++]=4,n[r++]=4,n[r++]=2,n[r++]=0,n[r++]=4,n[r++]=0,n[r++]=5,n[r++]=5,n[r++]=0,n[r++]=1,n[r++]=7,n[r++]=3,n[r++]=6,n[r++]=6,n[r++]=3,n[r++]=2,n[r++]=0,n[r++]=1,n[r++]=1,n[r++]=3,n[r++]=3,n[r++]=2,n[r++]=2,n[r++]=0,n[r++]=4,n[r++]=5,n[r++]=5,n[r++]=7,n[r++]=7,n[r++]=6,n[r++]=6,n[r++]=4,n[r++]=0,n[r++]=4,n[r++]=5,n[r++]=1,n[r++]=2,n[r++]=6,n[r++]=7,n[59]=3,e=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(T.unitCubeElementsKey,e,2*n.length)}return e},T.prototype.unitQuadBuffer=function(){var e=this.gpuResourceCache.resourceForKey(T.unitQuadKey);if(!e){var t=this.currentGlContext,n=new Float32Array(8);n[0]=0,n[1]=1,n[2]=0,n[3]=0,n[4]=1,n[5]=1,n[6]=1,n[7]=0,e=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(T.unitQuadKey,e,4*n.length)}return e},T.prototype.unitQuadBuffer3=function(){var e=this.gpuResourceCache.resourceForKey(T.unitQuadKey3);if(!e){var t=this.currentGlContext,n=new Float32Array(12);n[0]=0,n[1]=1,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=1,n[7]=1,n[8]=0,n[9]=1,n[10]=0,n[11]=0,e=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(T.unitQuadKey3,e,4*n.length)}return e},T.prototype.surfacePointForMode=function(t,n,r,i,o){if(!o)throw new e(h.logMessage(h.LEVEL_SEVERE,"DrawContext","surfacePointForMode","missingResult"));if(this.terrain)this.terrain.surfacePointForMode(t,n,r,i,o);else{var a=r+this.globe.elevationAtLocation(t,n)*this.verticalExaggeration;this.globe.computePointFromPosition(t,n,a,o)}return o},T.prototype.project=function(t,n){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"DrawContext","project","missingPoint"));if(!n)throw new e(h.logMessage(h.LEVEL_SEVERE,"DrawContext","project","missingResult"));var r=t[0],i=t[1],o=t[2],a=this.modelviewProjection,s=a[0]*r+a[1]*i+a[2]*o+a[3],u=a[4]*r+a[5]*i+a[6]*o+a[7],l=a[8]*r+a[9]*i+a[10]*o+a[11],c=a[12]*r+a[13]*i+a[14]*o+a[15];return 0!==c&&(s/=c,u/=c,!((l/=c)<-1||l>1)&&(u=.5*u+.5,l=.5*l+.5,s=(s=.5*s+.5)*this.viewport.width+this.viewport.x,u=u*this.viewport.height+this.viewport.y,n[0]=s,n[1]=u,n[2]=l,!0))},T.prototype.projectWithDepth=function(t,n,r){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"DrawContext","projectWithDepth","missingPoint"));if(!r)throw new e(h.logMessage(h.LEVEL_SEVERE,"DrawContext","projectWithDepth","missingResult"));var i=t[0],o=t[1],a=t[2],s=this.modelview,u=s[0]*i+s[1]*o+s[2]*a+s[3],l=s[4]*i+s[5]*o+s[6]*a+s[7],c=s[8]*i+s[9]*o+s[10]*a+s[11],f=s[12]*i+s[13]*o+s[14]*a+s[15],d=this.projection,p=d[0]*u+d[1]*l+d[2]*c+d[3]*f,m=d[4]*u+d[5]*l+d[6]*c+d[7]*f,g=d[8]*u+d[9]*l+d[10]*c+d[11]*f,A=d[12]*u+d[13]*l+d[14]*c+d[15]*f;return 0!==A&&(p/=A,m/=A,!((g/=A)<-1||g>1)&&(g=d[8]*u+d[9]*l+d[10]*c*(1+n)+d[11]*f,g/=A,m=.5*m+.5,g=.5*(g=S.clamp(g,-1,1))+.5,p=(p=.5*p+.5)*this.viewport.width+this.viewport.x,m=m*this.viewport.height+this.viewport.y,r[0]=p,r[1]=m,r[2]=g,!0))},T.prototype.convertPointToViewport=function(t,n){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"DrawContext","convertPointToViewport","missingPoint"));if(!n)throw new e(h.logMessage(h.LEVEL_SEVERE,"DrawContext","convertPointToViewport","missingResult"));return n[0]=t[0],n[1]=this.viewport.height-t[1],n},T.prototype.pixelSizeAtDistance=function(e){return this.pixelSizeFactor*e+this.pixelSizeOffset},T.prototype.createTextTexture=function(e,t){if(!e||!t)return null;var n=this.computeTextTextureStateKey(e,t),r=this.gpuResourceCache.resourceForKey(n);return r||(this.textRenderer.textColor=t.color,this.textRenderer.typeFace=t.font,this.textRenderer.enableOutline=t.enableOutline,this.textRenderer.outlineColor=t.outlineColor,this.textRenderer.outlineWidth=t.outlineWidth,r=this.textRenderer.renderText(e),this.gpuResourceCache.putResource(n,r,r.size),this.gpuResourceCache.setResourceAgingFactor(n,100)),r},T.prototype.computeTextTextureStateKey=function(e,t){return e&&t?e+"c "+t.color.toHexString(!0)+" f "+t.font.toString()+" eo "+t.enableOutline+" ow "+t.outlineWidth+" oc "+t.outlineColor.toHexString(!0):null},T.prototype.getExtension=function(t){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"DrawContext","getExtension","missingExtensionName"));return t in this.glExtensionsCache||(this.glExtensionsCache[t]=this.currentGlContext.getExtension(t)||null),this.glExtensionsCache[t]},T})),i("globe/GebcoElevationCoverage",["../geom/Location","../geom/Sector","../globe/TiledElevationCoverage","../util/WmsUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(){n.call(this,{coverageSector:t.FULL_SPHERE,resolution:.008333333333333,retrievalImageFormat:"application/bil16",minElevation:-11e3,maxElevation:8850,urlBuilder:new r("https://worldwind26.arc.nasa.gov/elev","GEBCO","","1.3.0")}),this.displayName="GEBCO Earth Elevation Coverage"};return i.prototype=Object.create(n.prototype),i})),i("globe/UsgsNedElevationCoverage",["../geom/Location","../geom/Sector","../globe/TiledElevationCoverage","../util/WmsUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(){n.call(this,{coverageSector:new t(24.396308,49.384358,-124.848974,-66.885444),resolution:92592592593e-15,retrievalImageFormat:"application/bil16",minElevation:-11e3,maxElevation:8850,urlBuilder:new r("https://worldwind26.arc.nasa.gov/elev","USGS-NED","","1.3.0")}),this.displayName="USGS NED Earth Elevation Coverage"};return i.prototype=Object.create(n.prototype),i})),i("globe/UsgsNedHiElevationCoverage",["../geom/Location","../geom/Sector","../globe/TiledElevationCoverage","../util/WmsUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(){n.call(this,{coverageSector:new t(18.86546,28.517269,-178.443593,-154.755792),resolution:92592592593e-15,retrievalImageFormat:"application/bil16",minElevation:-11e3,maxElevation:8850,urlBuilder:new r("https://worldwind26.arc.nasa.gov/elev","USGS-NED","","1.3.0")}),this.displayName="USGS NED Hawaii Elevation Coverage"};return i.prototype=Object.create(n.prototype),i})),i("globe/EarthElevationModel",["../globe/AsterV2ElevationCoverage","../globe/ElevationModel","../globe/GebcoElevationCoverage","../globe/UsgsNedElevationCoverage","../globe/UsgsNedHiElevationCoverage"],(function(e,t,n,r,i){"use strict";var o=function(){t.call(this),this.addCoverage(new n),this.addCoverage(new e),this.addCoverage(new r),this.addCoverage(new i)};return o.prototype=Object.create(t.prototype),o})),i("globe/EarthRestElevationCoverage",["../util/LevelSet","../geom/Location","../geom/Sector","../util/LevelRowColumnUrlBuilder","../globe/TiledElevationCoverage"],(function(e,t,n,r,i){"use strict";var o=function(o,a,s){i.call(this,{coverageSector:n.FULL_SPHERE,resolution:.00732421875,retrievalImageFormat:"application/bil16",minElevation:-11e3,maxElevation:8850,urlBuilder:new r(o,a)}),this.displayName=s||"Earth Elevations",this.levels=new e(n.FULL_SPHERE,new t(60,60),5,512,512)};return o.prototype=Object.create(i.prototype),o})),i("layer/FrameStatisticsLayer",["../error/ArgumentError","../util/Color","../util/Font","../layer/Layer","../util/Logger","../util/Offset","../shapes/ScreenText","../shapes/TextAttributes"],(function(e,t,n,r,i,o,a,s){"use strict";var u=function(u){if(!u)throw new e(i.logMessage(i.LEVEL_SEVERE,"FrameStatisticsLayer","constructor","missingWorldWindow"));r.call(this,"Frame Statistics"),this.pickEnabled=!1;var l=new s(null);l.color=t.GREEN,l.font=new n(12),l.offset=new o(WorldWind.OFFSET_FRACTION,0,WorldWind.OFFSET_FRACTION,1),this.frameTime=new a(new o(WorldWind.OFFSET_PIXELS,5,WorldWind.OFFSET_INSET_PIXELS,5)," "),this.frameTime.attributes=l,this.frameRate=new a(new o(WorldWind.OFFSET_PIXELS,5,WorldWind.OFFSET_INSET_PIXELS,25)," "),this.frameRate.attributes=l;var c=this;u.redrawCallbacks.push((function(e,t){c.handleRedraw(e,t)}))};return(u.prototype=Object.create(r.prototype)).doRender=function(e){this.frameRate.render(e),this.frameTime.render(e),this.inCurrentFrame=!0},u.prototype.handleRedraw=function(e,t){if(t===WorldWind.BEFORE_REDRAW){var n=e.frameStatistics;this.frameTime.text="Frame time  "+n.frameTimeAverage.toFixed(0)+" ms  ("+n.frameTimeMin.toFixed(0)+" - "+n.frameTimeMax.toFixed(0)+")",this.frameRate.text="Frame rate  "+n.frameRateAverage.toFixed(0)+" fps"}},u})),i("shapes/AbstractShape",["../error/ArgumentError","../util/Logger","../geom/Matrix","../cache/MemoryCache","../render/Renderable","../shapes/ShapeAttributes","../error/UnsupportedOperationError","../geom/Vec3"],(function(e,t,n,r,i,o,a,s){"use strict";var u=function(e){i.call(this),this._attributes=e||new o(null),this._highlightAttributes=null,this.highlighted=!1,this._altitudeMode=WorldWind.ABSOLUTE,this.referencePosition=null,this.shapeDataCache=new r(3,2),this.currentData=null,this.activeAttributes=null,this.expirationInterval=2e3,this.useSurfaceShapeFor2D=!1,this.scratchMatrix=n.fromIdentity()};return u.prototype=Object.create(i.prototype),Object.defineProperties(u.prototype,{attributes:{get:function(){return this._attributes},set:function(e){this._attributes=e,this.surfaceShape&&(this.surfaceShape.attributes=this._attributes)}},highlightAttributes:{get:function(){return this._highlightAttributes},set:function(e){this._highlightAttributes=e,this.surfaceShape&&(this.surfaceShape.highlightAttributes=this._highlightAttributes)}},altitudeMode:{get:function(){return this._altitudeMode},set:function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"AbstractShape","altitudeMode","missingAltitudeMode"));this._altitudeMode=n,this.reset()}}}),u.prototype.reset=function(){this.shapeDataCache.clear(!1),this.surfaceShape=null},u.prototype.updateSurfaceShape=function(){this.surfaceShape.displayName=this.displayName,this.surfaceShape.highlighted=this.highlighted,this.surfaceShape.enabled=this.enabled,this.surfaceShape.pathType=this.pathType,this.surfaceShape.pickDelegate=this.pickDelegate?this.pickDelegate:this},u.prototype.createSurfaceShape=function(){return null},u.prototype.render=function(e){if(this.enabled&&e.accumulateOrderedRenderables){if(e.globe.is2D()&&this.useSurfaceShapeFor2D&&(this.surfaceShape||(this.surfaceShape=this.createSurfaceShape(),this.surfaceShape&&(this.surfaceShape.attributes=this._attributes,this.surfaceShape.highlightAttributes=this._highlightAttributes)),this.surfaceShape))return this.updateSurfaceShape(),void this.surfaceShape.render(e);if((e.terrain||this.altitudeMode==WorldWind.ABSOLUTE)&&(this.establishCurrentData(e),(!e.globe.projectionLimits||this.isWithinProjectionLimits(e))&&(!this.currentData.extent||this.intersectsFrustum(e))&&(this.determineActiveAttributes(e),this.activeAttributes))){var t=this.makeOrderedRenderable(e);if(t){if(!this.intersectsFrustum(e))return;if(e.isSmall(this.currentData.extent,1))return;t.layer=e.currentLayer,e.addOrderedRenderable(t,this.currentData.eyeDistance)}}}},u.prototype.renderOrdered=function(e){this.currentData=this.shapeDataCache.entryForKey(e.globeStateKey),this.beginDrawing(e);try{this.doRenderOrdered(e)}finally{this.endDrawing(e)}},u.prototype.makeOrderedRenderable=function(e){var t=this.doMakeOrderedRenderable(e);return this.currentData.verticalExaggeration=e.verticalExaggeration,t},u.prototype.doMakeOrderedRenderable=function(e){throw new a(t.logMessage(t.LEVEL_SEVERE,"AbstractShape","makeOrderedRenderable","abstractInvocation"))},u.prototype.doRenderOrdered=function(e){throw new a(t.logMessage(t.LEVEL_SEVERE,"AbstractShape","doRenderOrdered","abstractInvocation"))},u.prototype.beginDrawing=function(e){},u.prototype.endDrawing=function(e){},u.prototype.intersectsFrustum=function(e){return!this.currentData||!this.currentData.extent||(e.pickingMode?this.currentData.extent.intersectsFrustum(e.pickFrustum):this.currentData.extent.intersectsFrustum(e.frustumInModelCoordinates))},u.prototype.establishCurrentData=function(e){this.currentData=this.shapeDataCache.entryForKey(e.globeStateKey),this.currentData||(this.currentData=this.createShapeDataObject(),this.resetExpiration(this.currentData),this.shapeDataCache.putEntry(e.globeStateKey,this.currentData,1)),this.currentData.isExpired=!this.isShapeDataCurrent(e,this.currentData)},u.prototype.createShapeDataObject=function(){return{transformationMatrix:n.fromIdentity(),referencePoint:new s(0,0,0)}},u.prototype.resetExpiration=function(e){e.expiryTime=Date.now()+this.expirationInterval+1e3*Math.random()},u.prototype.isShapeDataCurrent=function(e,t){return t.verticalExaggeration===e.verticalExaggeration&&t.expiryTime>Date.now()},u.prototype.determineActiveAttributes=function(e){this.highlighted&&this._highlightAttributes?this.activeAttributes=this.highlightAttributes:this.activeAttributes=this._attributes},u.prototype.isWithinProjectionLimits=function(e){return!0},u.prototype.applyMvpMatrix=function(e){this.scratchMatrix.copy(e.modelviewProjection),this.scratchMatrix.multiplyMatrix(this.currentData.transformationMatrix),e.currentProgram.loadModelviewProjection(e.currentGlContext,this.scratchMatrix)},u.prototype.applyMvpMatrixForOutline=function(e){this.scratchMatrix.copy(e.projection),this.scratchMatrix.offsetProjectionDepth(-.001),this.scratchMatrix.multiplyMatrix(e.modelview),this.scratchMatrix.multiplyMatrix(this.currentData.transformationMatrix),e.currentProgram.loadModelviewProjection(e.currentGlContext,this.scratchMatrix)},u})),i("shapes/AbstractMesh",["../shapes/AbstractShape","../error/ArgumentError","../shaders/BasicTextureProgram","../geom/BoundingBox","../util/Color","../util/ImageSource","../geom/Line","../geom/Location","../util/Logger","../geom/Matrix","../pick/PickedObject","../geom/Position","../shapes/ShapeAttributes","../geom/Vec2","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){"use strict";var g=function(t){e.call(this,t),this.pickTransparentImagePixels=!0,this._altitudeScale=1};return g.prototype=Object.create(e.prototype),Object.defineProperties(g.prototype,{altitudeScale:{get:function(){return this._altitudeScale},set:function(e){this._altitudeScale=e,this.reset()}}}),g.prototype.mustGenerateGeometry=function(e){return!this.currentData.meshPoints||this.currentData.drawInterior!==this.activeAttributes.drawInterior||!(!this.activeAttributes.applyLighting||this.currentData.normals)||this.altitudeMode!==WorldWind.ABSOLUTE&&this.currentData.isExpired},g.prototype.doMakeOrderedRenderable=function(e){if(!this.activeAttributes.drawInterior&&!this.activeAttributes.drawOutline)return null;if(!this.mustGenerateGeometry(e))return this;var t=this.currentData,n=t.referencePoint;return e.surfacePointForMode(this.referencePosition.latitude,this.referencePosition.longitude,this.referencePosition.altitude*this._altitudeScale,this._altitudeMode,n),t.transformationMatrix.setToTranslation(n[0],n[1],n[2]),t.meshPoints=this.computeMeshPoints(e,t),t.refreshVertexBuffer=!0,this.activeAttributes.imageSource&&!this.texCoords&&(this.texCoords=this.computeTexCoords(),this.texCoords&&(t.refreshTexCoordBuffer=!0)),this.meshIndices||(this.meshIndices=this.computeMeshIndices(),t.refreshMeshIndices=!0),this.meshOutlineIndices||(this.meshOutlineIndices=this.computeOutlineIndices(),this.meshOutlineIndices&&(t.refreshOutlineIndices=!0)),this.activeAttributes.applyLighting&&this.computeNormals(t),t.drawInterior=this.activeAttributes.drawInterior,this.resetExpiration(t),t.extent||(t.extent=new r),t.extent.setToPoints(t.meshPoints),t.extent.translate(t.referencePoint),this},g.prototype.computeMeshPoints=function(e,t){throw new UnsupportedOperationError(u.logMessage(u.LEVEL_SEVERE,"AbstractMesh","computeMeshPoints","abstractInvocation"))},g.prototype.computeTexCoords=function(){return null},g.prototype.computeMeshIndices=function(e){throw new UnsupportedOperationError(u.logMessage(u.LEVEL_SEVERE,"AbstractMesh","computeMeshIndices","abstractInvocation"))},g.prototype.computeOutlineIndices=function(e){},g.prototype.computeNormals=function(e){for(var t,n=new Float32Array(e.meshPoints.length),r=this.meshIndices,i=e.meshPoints,o=[],a=[new p(0,0,0),new p(0,0,0),new p(0,0,0)],s=0;s<r.length;s+=3){for(var u=0;u<3;u++)t=r[s+u],a[u].set(i[3*t],i[3*t+1],i[3*t+2]);var l=p.computeTriangleNormal(a[0],a[1],a[2]);for(u=0;u<3;u++)o[t=r[s+u]]||(o[t]=[]),o[t].push(l)}for(l=new p(0,0,0),s=0;s<o.length;s++)o[s]?(p.average(o[s],l),l.normalize(),n[3*s]=l[0],n[3*s+1]=l[1],n[3*s+2]=l[2]):(n[3*s]=0,n[3*s+1]=0,n[3*s+2]=0);e.normals=n,e.refreshNormalsBuffer=!0},g.prototype.doRenderOrdered=function(e){var t,n,r,i=e.currentGlContext,o=e.currentProgram,a=this.currentData,s=this.texCoords&&!!this.activeAttributes.imageSource;if(e.pickingMode&&(r=e.uniquePickColor()),a.pointsVboCacheKey||(a.pointsVboCacheKey=e.gpuResourceCache.generateCacheKey()),(t=e.gpuResourceCache.resourceForKey(a.pointsVboCacheKey))||(t=i.createBuffer(),e.gpuResourceCache.putResource(a.pointsVboCacheKey,t,4*a.meshPoints.length),a.refreshVertexBuffer=!0),i.bindBuffer(i.ARRAY_BUFFER,t),a.refreshVertexBuffer&&(i.bufferData(i.ARRAY_BUFFER,a.meshPoints,i.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),a.refreshVertexBuffer=!1),i.vertexAttribPointer(o.vertexPointLocation,3,i.FLOAT,!1,0,0),o.loadTextureEnabled(i,!1),this.activeAttributes.drawInterior){var u=!e.pickingMode&&a.normals&&this.activeAttributes.applyLighting;this.applyMvpMatrix(e),a.meshIndicesVboCacheKey||(a.meshIndicesVboCacheKey=e.gpuResourceCache.generateCacheKey()),(t=e.gpuResourceCache.resourceForKey(a.meshIndicesVboCacheKey))||(t=i.createBuffer(),e.gpuResourceCache.putResource(a.meshIndicesVboCacheKey,t,2*this.meshIndices.length),a.refreshMeshIndices=!0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t),a.refreshMeshIndices&&(i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.meshIndices,i.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),a.refreshMeshIndices=!1),n=this.activeAttributes.interiorColor,i.depthMask(n.alpha*this.layer.opacity>=1||e.pickingMode),o.loadColor(i,e.pickingMode?r:n),o.loadOpacity(i,e.pickingMode?1:this.layer.opacity),!s||e.pickingMode&&this.pickTransparentImagePixels||(this.activeTexture=e.gpuResourceCache.resourceForKey(this.activeAttributes.imageSource),this.activeTexture||(this.activeTexture=e.gpuResourceCache.retrieveTexture(e.currentGlContext,this.activeAttributes.imageSource)),this.activeTexture&&this.activeTexture.bind(e)&&(a.texCoordsVboCacheKey||(a.texCoordsVboCacheKey=e.gpuResourceCache.generateCacheKey()),(t=e.gpuResourceCache.resourceForKey(a.texCoordsVboCacheKey))||(t=i.createBuffer(),e.gpuResourceCache.putResource(a.texCoordsVboCacheKey,t,4*this.texCoords.length),a.refreshTexCoordBuffer=!0),i.bindBuffer(i.ARRAY_BUFFER,t),a.refreshTexCoordBuffer&&(i.bufferData(i.ARRAY_BUFFER,this.texCoords,i.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),a.refreshTexCoordBuffer=!1),i.enableVertexAttribArray(o.vertexTexCoordLocation),i.vertexAttribPointer(o.vertexTexCoordLocation,2,i.FLOAT,!1,0,0),this.scratchMatrix.setToIdentity(),this.scratchMatrix.multiplyByTextureTransform(this.activeTexture),o.loadTextureEnabled(i,!0),o.loadTextureUnit(i,i.TEXTURE0),o.loadTextureMatrix(i,this.scratchMatrix),o.loadModulateColor(i,e.pickingMode))),u&&(o.loadApplyLighting(i,!0),a.normalsVboCacheKey||(a.normalsVboCacheKey=e.gpuResourceCache.generateCacheKey()),(t=e.gpuResourceCache.resourceForKey(a.normalsVboCacheKey))||(t=i.createBuffer(),e.gpuResourceCache.putResource(a.normalsVboCacheKey,t,4*a.normals.length),a.refreshNormalsBuffer=!0),i.bindBuffer(i.ARRAY_BUFFER,t),a.refreshNormalsBuffer&&(i.bufferData(i.ARRAY_BUFFER,a.normals,i.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),a.refreshNormalsBuffer=!1),i.enableVertexAttribArray(o.normalVectorLocation),i.vertexAttribPointer(o.normalVectorLocation,3,i.FLOAT,!1,0,0)),i.drawElements(i.TRIANGLES,this.meshIndices.length,i.UNSIGNED_SHORT,0),s&&i.disableVertexAttribArray(o.vertexTexCoordLocation),u&&(o.loadApplyLighting(i,!1),i.disableVertexAttribArray(o.normalVectorLocation))}if(this.activeAttributes.drawOutline&&this.meshOutlineIndices&&(o.loadTextureEnabled(i,!1),i.disableVertexAttribArray(o.vertexTexCoordLocation),this.applyMvpMatrixForOutline(e),n=this.activeAttributes.outlineColor,i.depthMask(n.alpha*this.layer.opacity>=1||e.pickingMode),o.loadColor(i,e.pickingMode?r:n),o.loadOpacity(i,e.pickingMode?1:this.layer.opacity),i.lineWidth(this.activeAttributes.outlineWidth),a.outlineIndicesVboCacheKey||(a.outlineIndicesVboCacheKey=e.gpuResourceCache.generateCacheKey()),(t=e.gpuResourceCache.resourceForKey(a.outlineIndicesVboCacheKey))||(t=i.createBuffer(),e.gpuResourceCache.putResource(a.outlineIndicesVboCacheKey,t,2*this.meshOutlineIndices.length),a.refreshOutlineIndices=!0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t),a.refreshOutlineIndices&&(i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.meshOutlineIndices,i.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),a.refreshOutlineIndices=!1),i.drawElements(i.LINE_STRIP,this.meshOutlineIndices.length,i.UNSIGNED_SHORT,0)),e.pickingMode){var l=this.computePickPosition(e),h=new c(r,this.pickDelegate?this.pickDelegate:this,l,this.layer,!1);e.resolvePick(h)}},g.prototype.computePickPosition=function(e){var t=this.currentData,n=e.pickRay,r=new p(n.origin[0],n.origin[1],n.origin[2]).subtract(t.referencePoint),i=new a(r,n.direction),o=[];if(m.computeIndexedTrianglesIntersection(i,t.meshPoints,this.meshIndices,o)){var s=o[0];if(o.length>1)for(var u=s.distanceToSquared(e.eyePoint),l=1;l<o.length;l++){var c=o[l].distanceToSquared(e.eyePoint);c<u&&(u=c,s=o[l])}var f=new h(0,0,0);return e.globe.computePositionFromPoint(s[0]+t.referencePoint[0],s[1]+t.referencePoint[1],s[2]+t.referencePoint[2],f),f.altitude/=this._altitudeScale,f}return null},g.prototype.beginDrawing=function(e){var t=e.currentGlContext;this.activeAttributes.drawInterior&&(t.disable(t.CULL_FACE),e.findAndBindProgram(n),!e.pickMode&&this.currentData.normals&&this.activeAttributes.applyLighting&&e.currentProgram.loadModelviewInverse(t,e.modelviewNormalTransform)),t.enableVertexAttribArray(e.currentProgram.vertexPointLocation)},g.prototype.endDrawing=function(e){var t=e.currentGlContext;t.disableVertexAttribArray(e.currentProgram.vertexPointLocation),t.depthMask(!0),t.lineWidth(1),t.enable(t.CULL_FACE)},g})),i("shapes/SurfacePolygon",["../error/ArgumentError","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape"],(function(e,t,n,r){"use strict";var i=function n(i,o){if(!Array.isArray(i))throw new e(t.logMessage(t.LEVEL_SEVERE,"SurfacePolygon","constructor","The specified boundary is not an array."));r.call(this,o),this._boundaries=i,this._stateId=n.stateId++};return i.prototype=Object.create(r.prototype),Object.defineProperties(i.prototype,{boundaries:{get:function(){return this._boundaries},set:function(n){if(!Array.isArray(n))throw new e(t.logMessage(t.LEVEL_SEVERE,"SurfacePolygon","set boundaries","The specified value is not an array."));this.resetBoundaries(),this._boundaries=n,this._stateId=i.stateId++,this.stateKeyInvalid=!0}}}),i.stateId=Number.MIN_SAFE_INTEGER,i.staticStateKey=function(e){return r.staticStateKey(e)+" pg "+e._stateId},i.prototype.computeStateKey=function(){return i.staticStateKey(this)},i.prototype.computeBoundaries=function(e){},i.prototype.getReferencePosition=function(){return this.boundaries.length>0&&this.boundaries[0].length>2?this.boundaries[0][0]:this.boundaries.length>2?this.boundaries[0]:null},i.prototype.moveTo=function(e,t){if(this.boundaries.length>0&&this.boundaries[0].length>2){for(var n=[],r=0,i=this._boundaries.length;r<i;r++){var o=this.computeShiftedLocations(e,this.getReferencePosition(),t,this._boundaries[r]);n.push(o)}this.boundaries=n}else this.boundaries.length>2&&(this.boundaries=this.computeShiftedLocations(e,this.getReferencePosition(),t,this._boundaries))},i})),i("shapes/GeographicMesh",["../shapes/AbstractMesh","../error/ArgumentError","../shaders/BasicTextureProgram","../geom/BoundingBox","../util/Color","../util/ImageSource","../geom/Location","../util/Logger","../geom/Matrix","../pick/PickedObject","../geom/Position","../shapes/ShapeAttributes","../shapes/SurfacePolygon","../geom/Vec2","../geom/Vec3"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p){"use strict";var m=function(n,r){if(!n)throw new t(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","constructor","missingPositions"));if(n.length<2||n[0].length<2)throw new t(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","constructor","Number of positions is insufficient."));if(n.length*n[0].length>65536)throw new t(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","constructor","Too many positions. Must be fewer than 65536. Try using multiple meshes."));for(var i=n[0].length,o=1;o<n.length;o++)if(n[o].length!==i)throw new t(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","constructor","Array lengths are inconsistent."));var a=n.length,u=n[0].length;e.call(this,r),this.pickTransparentImagePixels=!0,this._positions=n,this._altitudeScale=1,this.numRows=a,this.numColumns=u,this._textureCoordinates=null,this.referencePosition=this.determineReferencePosition(this._positions)};return m.prototype=Object.create(e.prototype),Object.defineProperties(m.prototype,{positions:{get:function(){return this._positions},set:function(e){if(!e)throw new t(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","positions","missingPositions"));if(e.length<2||e[0].length<2)throw new t(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","positions","Number of positions is insufficient."));for(var n=e[0].length,r=1;r<e.length;r++)if(e[r].length!==n)throw new t(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","positions","Array lengths are inconsistent."));this.numRows=e.length,this.numColumns=e[0].length,this._positions=e,this.referencePosition=this.determineReferencePosition(this._positions),this.reset(),this.meshIndices=null,this.outlineIndices=null}},textureCoordinates:{get:function(){return this._textureCoordinates},set:function(e){if(e&&e.length!=this.numRows)throw new t(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","textureCoordinates","Number of texture coordinate rows is inconsistent with the currently specified positions."));for(var n=0;n<this.numRows;n++)if(e[n].length!==this.numColumns)throw new t(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","textureCoordinates","Texture coordinate row lengths are inconsistent with the currently specified positions."));this._textureCoordinates=e,this.reset(),this.texCoords=null}}}),m.makeGridIndices=function(e,t){for(var n=[],r=0,i=0;i<e-1;i++)for(var o=0;o<t-1;o++){var a=i*t+o;n[r++]=a,n[r++]=a+1,n[r++]=a+t,n[r++]=a+1,n[r++]=a+1+t,n[r++]=a+t}return n},m.prototype.determineReferencePosition=function(e){return e[0][0]},m.prototype.createSurfaceShape=function(){for(var e=[],t=0;t<this.numColumns;t++)e.push(this._positions[0][t]);for(var n=1;n<this.numRows;n++)e.push(this._positions[n][this.numColumns-1]);for(t=this.numColumns-2;t>=0;t--)e.push(this._positions[this.numRows-1][t]);for(n=this.numRows-2;n>0;n--)e.push(this._positions[n][0]);return new f(e,null)},m.prototype.computeMeshPoints=function(e,t){for(var n,r,i=Number.MAX_VALUE,o=e.eyePoint,a=new Float32Array(this.numRows*this.numColumns*3),s=new p(0,0,0),u=0,l=0;l<this._positions.length;l++)for(var c=0,h=this._positions[l].length;c<h;c++)n=this._positions[l][c],e.surfacePointForMode(n.latitude,n.longitude,n.altitude*this._altitudeScale,this.altitudeMode,s),(r=s.distanceToSquared(o))<i&&(i=r),s.subtract(this.currentData.referencePoint),a[u++]=s[0],a[u++]=s[1],a[u++]=s[2];return t.eyeDistance=Math.sqrt(i),a},m.prototype.computeTexCoords=function(){return this._textureCoordinates?this.computeExplicitTexCoords():this.computeImplicitTexCoords()},m.prototype.computeExplicitTexCoords=function(){for(var e=new Float32Array(2*this.numRows*this.numColumns),t=0,n=0;n<this._textureCoordinates.length;n++)for(var r=0,i=this._textureCoordinates[n].length;r<i;r++){var o=this._textureCoordinates[n][r];e[t++]=o[0],e[t++]=o[1]}return e},m.prototype.computeImplicitTexCoords=function(){for(var e=new Float32Array(2*this.numRows*this.numColumns),t=1/(this.numRows-1),n=1/(this.numColumns-1),r=0,i=0;i<this._positions.length;i++)for(var o=i===this.numRows-1?1:i*t,a=0,s=this._positions[i].length;a<s;a++)e[r++]=a===this.numColumns-1?1:a*n,e[r++]=o;return e},m.prototype.computeMeshIndices=function(){for(var e=new Uint16Array((this.numRows-1)*(this.numColumns-1)*6),t=0,n=0;n<this.numRows-1;n++)for(var r=0;r<this.numColumns-1;r++){var i=n*this.numColumns+r;e[t++]=i,e[t++]=i+1,e[t++]=i+this.numColumns,e[t++]=i+1,e[t++]=i+1+this.numColumns,e[t++]=i+this.numColumns}return e},m.prototype.computeOutlineIndices=function(){for(var e=new Uint16Array(2*this.numRows+2*this.numColumns),t=0,n=0;n<this.numColumns;n++)e[t++]=n;for(var r=1;r<this.numRows;r++)e[t++]=(r+1)*this.numColumns-1;for(n=this.numRows*this.numColumns-2;n>=(this.numRows-1)*this.numColumns;n--)e[t++]=n;for(r=this.numRows-2;r>=0;r--)e[t++]=r*this.numColumns;return e},m})),i("shapes/GeographicText",["../error/ArgumentError","../util/Logger","../shapes/Text","../geom/Vec3"],(function(e,t,n,r){"use strict";var i=function(r,i){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"Text","constructor","missingPosition"));n.call(this,i),this.position=r,this.declutterGroup=1};return i.placePoint=new r(0,0,0),(i.prototype=Object.create(n.prototype)).clone=function(){var e=new i(this.position,this.text);return e.copy(this),e.pickDelegate=this.pickDelegate?this.pickDelegate:this,e},i.prototype.render=function(e){e.globe.projectionLimits&&!e.globe.projectionLimits.containsLocation(this.position.latitude,this.position.longitude)||n.prototype.render.call(this,e)},i.prototype.computeScreenPointAndEyeDistance=function(e){return e.surfacePointForMode(this.position.latitude,this.position.longitude,this.position.altitude,this.altitudeMode,i.placePoint),!!e.frustumInModelCoordinates.containsPoint(i.placePoint)&&(this.eyeDistance=this.alwaysOnTop?0:e.eyePoint.distanceTo(i.placePoint),!!e.projectWithDepth(i.placePoint,this.depthOffset,this.screenPoint))},i})),i("formats/geojson/GeoJSONConstants",[],(function(){"use strict";var e=function(){};return e.FIELD_TYPE="type",e.FIELD_CRS="crs",e.FIELD_NAME="name",e.FIELD_BBOX="bbox",e.FIELD_COORDINATES="coordinates",e.FIELD_GEOMETRIES="geometries",e.FIELD_GEOMETRY="geometry",e.FIELD_PROPERTIES="properties",e.FIELD_FEATURES="features",e.FIELD_ID="id",e.TYPE_POINT="Point",e.TYPE_MULTI_POINT="MultiPoint",e.TYPE_LINE_STRING="LineString",e.TYPE_MULTI_LINE_STRING="MultiLineString",e.TYPE_POLYGON="Polygon",e.TYPE_MULTI_POLYGON="MultiPolygon",e.TYPE_GEOMETRY_COLLECTION="GeometryCollection",e.TYPE_FEATURE="Feature",e.TYPE_FEATURE_COLLECTION="FeatureCollection",e.FIELD_CRS_NAME="name",e.FIELD_CRS_LINK="link",e.WGS84_CRS="urn:ogc:def:crs:OGC:1.3:CRS84",e.EPSG4326_CRS="EPSG:4326",e})),i("formats/geojson/GeoJSONExporter",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger"],(function(e,t,n){"use strict";return{exportRenderable:function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportRenderable","missingRenderable"));return t instanceof WorldWind.Placemark?this.exportPlacemark(t):t instanceof WorldWind.SurfacePolyline?this.exportSurfacePolyline(t):t instanceof WorldWind.SurfacePolygon?this.exportSurfacePolygon(t):t instanceof WorldWind.SurfaceEllipse?this.exportSurfaceEllipse(t):t instanceof WorldWind.SurfaceCircle?this.exportSurfaceCircle(t):t instanceof WorldWind.SurfaceRectangle?this.exportSurfaceRectangle(t):t instanceof WorldWind.SurfaceSector?this.exportSurfaceSector(t):t instanceof WorldWind.Path?this.exportPath(t):t instanceof WorldWind.Polygon?this.exportPolygon(t):(n.log(n.LEVEL_WARNING,"Export renderable not implemented: "+t),null)},exportRenderables:function(r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportRenderables","missingRenderables"));if(0!=r.length){if(r.length>1){var i="{";i=(i=i+'"'+t.FIELD_TYPE+'":"'+t.TYPE_GEOMETRY_COLLECTION+'"')+',"'+t.FIELD_GEOMETRIES+'":[';for(var o=0;o<r.length;o++){var a=this.exportRenderable(r[o]);a&&(i+=a,i+=",")}return","===i.slice(-1)&&(i=i.substring(0,i.length-1)),(i+="]")+"}"}return this.exportRenderable(r[0])}},exportLayer:function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportLayer","missingLayer"));return this.exportRenderables(t.renderables)},exportPlacemark:function(r){if(!(r instanceof WorldWind.Placemark))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportPlacemark","invalidTypeOfRenderable"));var i="{";return(i=(i=(i=i+'"'+t.FIELD_TYPE+'":"'+t.TYPE_POINT+'",')+'"'+t.FIELD_COORDINATES+'":')+"["+r.position.longitude+","+r.position.latitude+"]")+"}"},exportSurfacePolyline:function(r){if(!(r instanceof WorldWind.SurfacePolyline))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfacePolyline","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+t.FIELD_TYPE+'":"'+t.TYPE_LINE_STRING+'",')+'"'+t.FIELD_COORDINATES+'":[';for(var o=0;o<r.boundaries.length;o++)i=i+"["+r.boundaries[o].longitude+","+r.boundaries[o].latitude+"]",o!==r.boundaries.length-1&&(i+=",");return(i+="]")+"}"},exportSurfacePolygon:function(r){if(!(r instanceof WorldWind.SurfacePolygon))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfacePolygon","invalidTypeOfRenderable"));var i="{";if(i=(i=i+'"'+t.FIELD_TYPE+'":"'+t.TYPE_POLYGON+'",')+'"'+t.FIELD_COORDINATES+'":[',r.boundaries.length>0&&r.boundaries[0].length>2)for(var o=0;o<r.boundaries.length;o++){i+="[";for(var a=0;a<r.boundaries[o].length;a++)i=i+"["+r.boundaries[o][a].longitude+","+r.boundaries[o][a].latitude+"]",i+=",",a===r.boundaries[o].length-1&&(i=i+"["+r.boundaries[o][0].longitude+","+r.boundaries[o][0].latitude+"]");i+="]",o!==r.boundaries.length-1&&(i+=",")}else{for(i+="[",o=0;o<r.boundaries.length;o++)i=i+"["+r.boundaries[o].longitude+","+r.boundaries[o].latitude+"]",i+=",",o===r.boundaries.length-1&&(i=i+"["+r.boundaries[0].longitude+","+r.boundaries[0].latitude+"]");i+="]"}return(i+="]")+"}"},exportSurfaceEllipse:function(r){if(!(r instanceof WorldWind.SurfaceEllipse))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfaceEllipse","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+t.FIELD_TYPE+'":"'+t.TYPE_POLYGON+'",')+'"'+t.FIELD_COORDINATES+'":[',i+="[";for(var o=0;o<r._boundaries.length;o++)i=i+"["+r._boundaries[o].longitude+","+r._boundaries[o].latitude+"]",i+=",",o===r._boundaries.length-1&&(i=i+"["+r._boundaries[0].longitude+","+r._boundaries[0].latitude+"]");return i+="]",(i+="]")+"}"},exportSurfaceCircle:function(r){if(!(r instanceof WorldWind.SurfaceCircle))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfaceCircle","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+t.FIELD_TYPE+'":"'+t.TYPE_POLYGON+'",')+'"'+t.FIELD_COORDINATES+'":[',i+="[";for(var o=r._boundaries.length-1;o>=0;o--)i=i+"["+r._boundaries[o].longitude+","+r._boundaries[o].latitude+"]",i+=",",0===o&&(i=i+"["+r._boundaries[r._boundaries.length-1].longitude+","+r._boundaries[r._boundaries.length-1].latitude+"]");return i+="]",(i+="]")+"}"},exportSurfaceRectangle:function(r){if(!(r instanceof WorldWind.SurfaceRectangle))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfaceRectangle","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+t.FIELD_TYPE+'":"'+t.TYPE_POLYGON+'",')+'"'+t.FIELD_COORDINATES+'":[',i+="[";for(var o=0;o<r._boundaries.length;o++)i=i+"["+r._boundaries[o].longitude+","+r._boundaries[o].latitude+"]",i+=",",o===r._boundaries.length-1&&(i=i+"["+r._boundaries[0].longitude+","+r._boundaries[0].latitude+"]");return i+="]",(i+="]")+"}"},exportSurfaceSector:function(r){if(!(r instanceof WorldWind.SurfaceSector))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfaceSector","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+t.FIELD_TYPE+'":"'+t.TYPE_POLYGON+'",')+'"'+t.FIELD_COORDINATES+'":[',i+="[",r._boundaries.reverse();for(var o=0;o<r._boundaries.length;o++)i=i+"["+r._boundaries[o].longitude+","+r._boundaries[o].latitude+"]",i+=",",o===r._boundaries.length-1&&(i=i+"["+r._boundaries[0].longitude+","+r._boundaries[0].latitude+"]");return i+="]",(i+="]")+"}"},exportPath:function(r){if(!(r instanceof WorldWind.Path))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportPath","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+t.FIELD_TYPE+'":"'+t.TYPE_LINE_STRING+'",')+'"'+t.FIELD_COORDINATES+'":[';for(var o=0;o<r.positions.length;o++)i=i+"["+r.positions[o].longitude+","+r.positions[o].latitude+","+r.positions[o].altitude+"]",o!==r.positions.length-1&&(i+=",");return(i+="]")+"}"},exportPolygon:function(r){if(!(r instanceof WorldWind.Polygon))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportPolygon","invalidTypeOfRenderable"));var i="{";if(i=(i=i+'"'+t.FIELD_TYPE+'":"'+t.TYPE_POLYGON+'",')+'"'+t.FIELD_COORDINATES+'":[',r.boundaries.length>0&&r.boundaries[0].length>2)for(var o=0;o<r.boundaries.length;o++){i+="[";for(var a=0;a<r.boundaries[o].length;a++)i=i+"["+r.boundaries[o][a].longitude+","+r.boundaries[o][a].latitude+","+r.boundaries[o][a].altitude+"]",i+=",",a===r.boundaries[o].length-1&&(i=i+"["+r.boundaries[o][0].longitude+","+r.boundaries[o][0].latitude+","+r.boundaries[o][0].altitude+"]");i+="]",o!==r.boundaries.length-1&&(i+=",")}else{for(i+="[",o=0;o<r.boundaries.length;o++)i=i+"["+r.boundaries[o].longitude+","+r.boundaries[o].latitude+","+r.boundaries[o].altitude+"]",i+=",",o===r.boundaries.length-1&&(i=i+"["+r.boundaries[0].longitude+","+r.boundaries[0].latitude+","+r.boundaries[0].altitude+"]");i+="]"}return(i+="]")+"}"}}})),i("formats/geojson/GeoJSONGeometry",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger"],(function(e,t,n){"use strict";var r=function(t,r,i){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometry","constructor","missingCoordinates"));if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometry","constructor","missingType"));this._coordinates=t,this._type=r,this._bbox=i||null};return Object.defineProperties(r.prototype,{coordinates:{get:function(){return this._coordinates}},type:{get:function(){return this._type}},bbox:{get:function(){return this._bbox}}}),r.prototype.isPointType=function(){return this.type===t.TYPE_POINT},r.prototype.isMultiPointType=function(){return this.type===t.TYPE_MULTI_POINT},r.prototype.isLineStringType=function(){return this.type===t.TYPE_LINE_STRING},r.prototype.isMultiLineStringType=function(){return this.type===t.TYPE_MULTI_LINE_STRING},r.prototype.isPolygonType=function(){return this.type===t.TYPE_POLYGON},r.prototype.isMultiPolygonType=function(){return this.type===t.TYPE_MULTI_POLYGON},r})),i("formats/geojson/GeoJSONGeometryCollection",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger"],(function(e,t,n){"use strict";var r=function(t,r){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryCollection","constructor","missingGeometries"));if("[object Array]"!==Object.prototype.toString.call(t))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryCollection","constructor","invalidGeometries"));this._geometries=t,this._bbox=r};return Object.defineProperties(r.prototype,{geometries:{get:function(){return this._geometries}},bbox:{get:function(){return this._bbox}}}),r})),i("formats/geojson/GeoJSONGeometryLineString",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(e,t,n){"use strict";var r=function(r,i,o){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryLineString","constructor","missingCoordinates"));if(r.length<2||r[0].length<2)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryLineString","constructor","invalidNumberOfCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r[0])||"[object Number]"!==Object.prototype.toString.call(r[0][0]))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryLineString","constructor","invalidCoordinatesType"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryLineString","constructor","missingType"));t.call(this,r,i,o)};return r.prototype=Object.create(t.prototype),r})),i("formats/geojson/GeoJSONGeometryMultiLineString",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(e,t,n){"use strict";var r=function(r,i,o){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiLineString","constructor","missingCoordinates"));if(r[0].length<2||r[0][0].length<2)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiLineString","constructor","invalidNumberOfCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r[0])||"[object Array]"!==Object.prototype.toString.call(r[0][0])||"[object Number]"!==Object.prototype.toString.call(r[0][0][0]))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiLineString","constructor","invalidCoordinatesType"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryLineString","constructor","missingType"));t.call(this,r,i,o)};return r.prototype=Object.create(t.prototype),r})),i("formats/geojson/GeoJSONGeometryMultiPoint",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(e,t,n){"use strict";var r=function(r,i,o){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiPoint","constructor","missingCoordinates"));if(r[0].length<2)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiPoint","constructor","invalidNumberOfCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r[0])||"[object Number]"!==Object.prototype.toString.call(r[0][0]))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiPoint","constructor","invalidCoordinatesType"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPoint","constructor","missingType"));t.call(this,r,i,o)};return r.prototype=Object.create(t.prototype),r})),i("formats/geojson/GeoJSONGeometryMultiPolygon",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(e,t,n){"use strict";var r=function(r,i,o){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiPolygon","constructor","missingCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r[0])||"[object Array]"!==Object.prototype.toString.call(r[0][0])||"[object Array]"!==Object.prototype.toString.call(r[0][0][0])||"[object Number]"!==Object.prototype.toString.call(r[0][0][0][0]))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","invalidCoordinatesType"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","missingType"));t.call(this,r,i,o)};return r.prototype=Object.create(t.prototype),r})),i("formats/geojson/GeoJSONGeometryPoint",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(e,t,n){"use strict";var r=function(r,i,o){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPoint","constructor","missingCoordinates"));if(r.length<2)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPoint","constructor","invalidNumberOfCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r)||"[object Number]"!==Object.prototype.toString.call(r[0]))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPoint","constructor","invalidCoordinatesType"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPoint","constructor","missingType"));t.call(this,r,i,o)};return r.prototype=Object.create(t.prototype),r})),i("formats/geojson/GeoJSONGeometryPolygon",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(e,t,n){"use strict";var r=function(r,i,o){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","missingCoordinates"));if(r[0].length<2||r[0][0].length<2)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","invalidNumberOfCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r[0])||"[object Array]"!==Object.prototype.toString.call(r[0][0])||"[object Number]"!==Object.prototype.toString.call(r[0][0][0]))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","invalidCoordinatesType"));for(var a=0;a<r.length;a++)if(r[a][0][0]!==r[a][r[a].length-1][0]||r[a][0][1]!==r[a][r[a].length-1][1])throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","invalidLinearRing"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","missingType"));t.call(this,r,i,o)};return r.prototype=Object.create(t.prototype),r})),i("formats/geojson/GeoJSONCRS",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger","../../util/proj4-src"],(function(e,t,n,r){"use strict";var i=function(t,r){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONCRS","constructor","missingType"));if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONCRS","constructor","missingProperties"));this._type=t,this._properties=r,this._projectionString=null};return Object.defineProperties(i.prototype,{type:{get:function(){return this._type}},properties:{get:function(){return this._properties}},projectionString:{get:function(){return this._projectionString}}}),i.prototype.isDefault=function(){return!(!this.isNamed()||this._projectionString!==t.EPSG4326_CRS&&this._projectionString!==t.WGS84_CRS)},i.prototype.isNamed=function(){return this._type===t.FIELD_CRS_NAME},i.prototype.isLinked=function(){return this._type===t.FIELD_CRS_LINK},i.prototype.isCRSSupported=function(){try{r(this._projectionString,t.EPSG4326_CRS)}catch(e){return n.log(n.LEVEL_WARNING,"Unknown GeoJSON coordinate reference system ("+e+"): "+this._properties.name),!1}return!0},i.prototype.getLinkedCRSString=function(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="text",r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(this._projectionString=r.response,t()):n.log(n.LEVEL_WARNING,"GeoJSON Linked CRS retrieval failed ("+r.statusText+"): "+e))}.bind(this),r.onerror=function(){n.log(n.LEVEL_WARNING,"GeoJSON Linked CRS retrieval failed: "+e)},r.ontimeout=function(){n.log(n.LEVEL_WARNING,"GeoJSON Linked CRS retrieval timed out: "+e)},r.send(null)},i.prototype.setCRSString=function(e){this.isNamed()?(this._projectionString=this._properties.name,e()):this.isLinked()&&this.getLinkedCRSString(this._properties.href,e)},i})),i("formats/geojson/GeoJSONFeature",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger"],(function(e,t,n){"use strict";var r=function(r,i,o,a){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONFeature","constructor","missingGeometry"));if(!r[t.FIELD_TYPE])throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONFeature","constructor","missingFeatureGeometryType"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONFeature","constructor","missingProperties"));this._geometry=r,this._properties=i,this._id=o,this._bbox=a};return Object.defineProperties(r.prototype,{geometry:{get:function(){return this._geometry}},properties:{get:function(){return this._properties}},id:{get:function(){return this._id}},bbox:{get:function(){return this._bbox}}}),r})),i("formats/geojson/GeoJSONFeatureCollection",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger"],(function(e,t,n){"use strict";var r=function(t,r){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONFeatureCollection","constructor","missingFeatures"));if("[object Array]"!==Object.prototype.toString.call(t))throw new e(n.logMessage(n.LEVEL_SEVERE,"GeoJSONFeatureCollection","constructor","invalidFeatures"));this._features=t,this._bbox=r};return Object.defineProperties(r.prototype,{features:{get:function(){return this._features}},bbox:{get:function(){return this._bbox}}}),r})),i("shapes/PlacemarkAttributes",["../util/Color","../util/Font","../util/Offset","../shapes/ShapeAttributes","../shapes/TextAttributes"],(function(e,t,n,r,i){"use strict";var o=function(t){this._imageColor=t?t._imageColor.clone():e.WHITE.clone(),this._imageOffset=t?t._imageOffset:new n(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,.5),this._imageScale=t?t._imageScale:1,this._imageSource=t?t._imageSource:null,this._depthTest=!t||t._depthTest,this._labelAttributes=t?t._labelAttributes:new i(null),this._drawLeaderLine=!!t&&t._drawLeaderLine,this._leaderLineAttributes=t?t._leaderLineAttributes:new r(null),this.stateKeyInvalid=!0};return o.prototype.computeStateKey=function(){return"ic "+this._imageColor.toHexString(!0)+" io "+this._imageOffset.toString()+" is "+this._imageScale+" ip "+this._imageSource+" dt "+this._depthTest+" la "+this._labelAttributes.stateKey+" dll "+this._drawLeaderLine+" lla "+this._leaderLineAttributes.stateKey},Object.defineProperties(o.prototype,{stateKey:{get:function(){return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey(),this.stateKeyInvalid=!1),this._stateKey}},imageColor:{get:function(){return this._imageColor},set:function(e){this._imageColor=e,this.stateKeyInvalid=!0}},imageOffset:{get:function(){return this._imageOffset},set:function(e){this._imageOffset=e,this.stateKeyInvalid=!0}},imageScale:{get:function(){return this._imageScale},set:function(e){this._imageScale=e,this.stateKeyInvalid=!0}},imageSource:{get:function(){return this._imageSource},set:function(e){this._imageSource=e,this.stateKeyInvalid=!0}},depthTest:{get:function(){return this._depthTest},set:function(e){this._depthTest=e,this.stateKeyInvalid=!0}},labelAttributes:{get:function(){return this._labelAttributes},set:function(e){this._labelAttributes=e,this.stateKeyInvalid=!0}},drawLeaderLine:{get:function(){return this._drawLeaderLine},set:function(e){this._drawLeaderLine=e,this.stateKeyInvalid=!0}},leaderLineAttributes:{get:function(){return this._leaderLineAttributes},set:function(e){this._leaderLineAttributes=e,this.stateKeyInvalid=!0}}}),o})),i("shapes/Placemark",["../error/ArgumentError","../shaders/BasicTextureProgram","../util/Color","../util/Font","../util/Logger","../geom/Matrix","../pick/PickedObject","../shapes/PlacemarkAttributes","../render/Renderable","../geom/Vec2","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l,c,h){"use strict";var f=function(t,n,r){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Placemark","constructor","missingPosition"));u.call(this),this.attributes=r||new s(null),this.highlightAttributes=null,this.highlighted=!1,this.position=t,this.eyeDistanceScaling=n,this.eyeDistanceScalingThreshold=1e6,this.eyeDistanceScalingLabelThreshold=1.5*this.eyeDistanceScalingThreshold,this.label=null,this.altitudeMode=WorldWind.ABSOLUTE,this.alwaysOnTop=!1,this.enableLeaderLinePicking=!1,this.updateImage=!0,this.declutterGroup=2,this.targetVisibility=1,this.currentVisibility=1,this.imageRotation=0,this.imageTilt=0,this.imageRotationReference=WorldWind.RELATIVE_TO_SCREEN,this.imageTiltReference=WorldWind.RELATIVE_TO_SCREEN,this.activeAttributes=null,this.activeTexture=null,this.labelTexture=null,this.placePoint=new c(0,0,0),this.groundPoint=new c(0,0,0),this.imageTransform=o.fromIdentity(),this.labelTransform=o.fromIdentity(),this.texCoordMatrix=o.fromIdentity(),this.imageBounds=null,this.layer=null,this.depthOffset=-.003};return f.screenPoint=new c(0,0,0),f.matrix=o.fromIdentity(),f.scratchPoint=new c(0,0,0),f.prototype=Object.create(u.prototype),Object.defineProperties(f.prototype,{screenBounds:{get:function(){return this.labelBounds}}}),f.prototype.copy=function(e){return this.position=e.position,this.attributes=e.attributes,this.highlightAttributes=e.highlightAttributes,this.highlighted=e.highlighted,this.enabled=e.enabled,this.label=e.label,this.altitudeMode=e.altitudeMode,this.pickDelegate=e.pickDelegate,this.alwaysOnTop=e.alwaysOnTop,this.depthOffset=e.depthOffset,this.targetVisibility=e.targetVisibility,this.currentVisibility=e.currentVisibility,this.imageRotation=e.imageRotation,this.imageTilt=e.imageTilt,this.imageRotationReference=e.imageRotationReference,this.imageTiltReference=e.imageTiltReference,this},f.prototype.clone=function(){var e=new f(this.position);return e.copy(this),e.pickDelegate=this.pickDelegate?this.pickDelegate:this,e},f.prototype.render=function(e){var t;this.enabled&&e.accumulateOrderedRenderables&&(!e.globe.projectionLimits||e.globe.projectionLimits.containsLocation(this.position.latitude,this.position.longitude))&&((t=this.lastFrameTime!==e.timestamp?this.makeOrderedRenderable(e):this.clone().makeOrderedRenderable(e))&&t.isVisible(e)&&(t.layer=e.currentLayer,this.lastFrameTime=e.timestamp,e.addOrderedRenderable(t)))},f.prototype.renderOrdered=function(e){if(this.drawOrderedPlacemark(e),e.pickingMode){var t=new a(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,this.position,this.layer,!1);e.pickPoint&&this.mustDrawLabel()&&this.labelBounds.containsPoint(e.convertPointToViewport(e.pickPoint,f.scratchPoint))&&(t.labelPicked=!0),e.resolvePick(t)}},f.prototype.makeOrderedRenderable=function(e){var t,n,r,i;if(this.determineActiveAttributes(e),!this.activeAttributes)return null;if(e.surfacePointForMode(this.position.latitude,this.position.longitude,this.position.altitude,this.altitudeMode,this.placePoint),this.eyeDistance=this.alwaysOnTop?0:e.eyePoint.distanceTo(this.placePoint),this.mustDrawLeaderLine(e)&&e.surfacePointForMode(this.position.latitude,this.position.longitude,0,this.altitudeMode,this.groundPoint),!e.projectWithDepth(this.placePoint,this.depthOffset,f.screenPoint))return null;var o=this.eyeDistanceScaling?Math.max(0,Math.min(1,this.eyeDistanceScalingThreshold/this.eyeDistance)):1;return this.activeTexture?(t=this.activeTexture.originalImageWidth,n=this.activeTexture.originalImageHeight,r=this.activeAttributes.imageScale*o,i=this.activeAttributes.imageOffset.offsetForSize(t,n),this.imageTransform.setTranslation(f.screenPoint[0]-i[0]*r,f.screenPoint[1]-i[1]*r,f.screenPoint[2]),this.imageTransform.setScale(t*r,n*r,1)):(r=this.activeAttributes.imageScale*o,i=this.activeAttributes.imageOffset.offsetForSize(r,r),this.imageTransform.setTranslation(f.screenPoint[0]-i[0],f.screenPoint[1]-i[1],f.screenPoint[2]),this.imageTransform.setScale(r,r,1)),this.imageBounds=h.boundingRectForUnitQuad(this.imageTransform),this.mustDrawLabel()&&(this.labelTexture=e.createTextTexture(this.label,this.activeAttributes.labelAttributes),t=this.labelTexture.imageWidth,n=this.labelTexture.imageHeight,r=this.activeAttributes.labelAttributes.scale*o,i=this.activeAttributes.labelAttributes.offset.offsetForSize(t,n),this.labelTransform.setTranslation(f.screenPoint[0]-i[0]*r,f.screenPoint[1]-i[1]*r,f.screenPoint[2]),this.labelTransform.setScale(t*r,n*r,1),this.labelBounds=h.boundingRectForUnitQuad(this.labelTransform)),this},f.prototype.determineActiveAttributes=function(e){this.highlighted&&this.highlightAttributes?this.activeAttributes=this.highlightAttributes:this.activeAttributes=this.attributes,this.activeAttributes&&this.activeAttributes.imageSource&&(this.activeTexture=e.gpuResourceCache.resourceForKey(this.activeAttributes.imageSource),this.activeTexture&&!this.updateImage||(this.activeTexture=e.gpuResourceCache.retrieveTexture(e.currentGlContext,this.activeAttributes.imageSource),this.updateImage=!1))},f.prototype.isVisible=function(e){return e.pickingMode?e.pickRectangle&&(this.imageBounds.intersects(e.pickRectangle)||this.mustDrawLabel()&&this.labelBounds.intersects(e.pickRectangle)||this.mustDrawLeaderLine(e)&&e.pickFrustum.intersectsSegment(this.groundPoint,this.placePoint)):this.imageBounds.intersects(e.viewport)||this.mustDrawLabel()&&this.labelBounds.intersects(e.viewport)||this.mustDrawLeaderLine(e)&&e.frustumInModelCoordinates.intersectsSegment(this.groundPoint,this.placePoint)},f.prototype.drawOrderedPlacemark=function(e){this.beginDrawing(e);try{this.doDrawOrderedPlacemark(e),e.pickingMode||this.drawBatchOrderedPlacemarks(e)}finally{this.endDrawing(e)}},f.prototype.drawBatchOrderedPlacemarks=function(e){for(var t;(t=e.peekOrderedRenderable())&&t.doDrawOrderedPlacemark;){e.popOrderedRenderable();try{t.doDrawOrderedPlacemark(e)}catch(e){i.logMessage(i.LEVEL_WARNING,"Placemark","drawBatchOrderedPlacemarks","Error occurred while rendering placemark using batching: "+e.message)}}},f.prototype.beginDrawing=function(e){var n,r=e.currentGlContext;e.findAndBindProgram(t),n=e.currentProgram,r.bindBuffer(r.ARRAY_BUFFER,e.unitQuadBuffer()),r.vertexAttribPointer(n.vertexTexCoordLocation,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.vertexPointLocation),r.enableVertexAttribArray(n.vertexTexCoordLocation),n.loadTextureUnit(r,r.TEXTURE0),n.loadModulateColor(r,e.pickingMode)},f.prototype.endDrawing=function(e){var t=e.currentGlContext,n=e.currentProgram;t.disableVertexAttribArray(n.vertexPointLocation),t.disableVertexAttribArray(n.vertexTexCoordLocation),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindTexture(t.TEXTURE_2D,null)},f.prototype.doDrawOrderedPlacemark=function(e){var t,r=e.currentGlContext,i=e.currentProgram,o=!0;if(e.pickingMode&&(this.pickColor=e.uniquePickColor()),this.eyeDistanceScaling&&this.eyeDistance>this.eyeDistanceScalingLabelThreshold&&(this.targetVisibility=0),!e.pickingMode&&this.mustDrawLabel()&&this.currentVisibility!=this.targetVisibility){var a=(e.timestamp-e.previousRedrawTimestamp)/e.fadeTime;this.currentVisibility<this.targetVisibility?this.currentVisibility=Math.min(1,this.currentVisibility+a):this.currentVisibility=Math.max(0,this.currentVisibility-a),e.redrawRequested=!0}if(i.loadOpacity(r,e.pickingMode?1:this.layer.opacity),this.mustDrawLeaderLine(e)){this.leaderLinePoints||(this.leaderLinePoints=new Float32Array(6)),this.leaderLinePoints[0]=this.groundPoint[0],this.leaderLinePoints[1]=this.groundPoint[1],this.leaderLinePoints[2]=this.groundPoint[2],this.leaderLinePoints[3]=this.placePoint[0],this.leaderLinePoints[4]=this.placePoint[1],this.leaderLinePoints[5]=this.placePoint[2],this.leaderLineCacheKey||(this.leaderLineCacheKey=e.gpuResourceCache.generateCacheKey());var s=e.gpuResourceCache.resourceForKey(this.leaderLineCacheKey);s||(s=r.createBuffer(),e.gpuResourceCache.putResource(this.leaderLineCacheKey,s,4*this.leaderLinePoints.length)),i.loadTextureEnabled(r,!1),i.loadColor(r,e.pickingMode?this.pickColor:this.activeAttributes.leaderLineAttributes.outlineColor),f.matrix.copy(e.modelviewProjection),i.loadModelviewProjection(r,f.matrix),this.activeAttributes.leaderLineAttributes.depthTest||r.disable(r.DEPTH_TEST),r.lineWidth(this.activeAttributes.leaderLineAttributes.outlineWidth),r.bindBuffer(r.ARRAY_BUFFER,s),r.bufferData(r.ARRAY_BUFFER,this.leaderLinePoints,r.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),r.vertexAttribPointer(i.vertexPointLocation,3,r.FLOAT,!1,0,0),r.drawArrays(r.LINES,0,2)}this.activeAttributes.depthTest||(o=!1,r.disable(r.DEPTH_TEST)),r.bindBuffer(r.ARRAY_BUFFER,e.unitQuadBuffer3()),r.vertexAttribPointer(i.vertexPointLocation,3,r.FLOAT,!1,0,0),f.matrix.copy(e.screenProjection),f.matrix.multiplyMatrix(this.imageTransform);var u=this.imageRotationReference===WorldWind.RELATIVE_TO_GLOBE?e.navigator.heading-this.imageRotation:-this.imageRotation;f.matrix.multiplyByTranslation(.5,.5,0),f.matrix.multiplyByRotation(0,0,1,u),f.matrix.multiplyByTranslation(-.5,-.5,0);var l=this.imageTiltReference===WorldWind.RELATIVE_TO_GLOBE?e.navigator.tilt+this.imageTilt:this.imageTilt;f.matrix.multiplyByRotation(-1,0,0,l),i.loadModelviewProjection(r,f.matrix),i.loadTextureEnabled(r,!0),e.pickingMode?i.loadColor(r,this.pickColor):i.loadColor(r,this.activeAttributes.imageColor),this.texCoordMatrix.setToIdentity(),this.activeTexture&&this.texCoordMatrix.multiplyByTextureTransform(this.activeTexture),i.loadTextureMatrix(r,this.texCoordMatrix),this.activeTexture?(t=this.activeTexture.bind(e),i.loadTextureEnabled(r,t)):i.loadTextureEnabled(r,!1),r.drawArrays(r.TRIANGLE_STRIP,0,4),this.mustDrawLabel()&&this.currentVisibility>0&&(i.loadOpacity(r,e.pickingMode?1:this.layer.opacity*this.currentVisibility),f.matrix.copy(e.screenProjection),f.matrix.multiplyMatrix(this.labelTransform),i.loadModelviewProjection(r,f.matrix),!e.pickingMode&&this.labelTexture?(this.texCoordMatrix.setToIdentity(),this.texCoordMatrix.multiplyByTextureTransform(this.labelTexture),i.loadTextureMatrix(r,this.texCoordMatrix),i.loadColor(r,n.WHITE),t=this.labelTexture.bind(e),i.loadTextureEnabled(r,t)):(i.loadTextureEnabled(r,!1),i.loadColor(r,this.pickColor)),this.activeAttributes.labelAttributes.depthTest?o||(o=!0,r.enable(r.DEPTH_TEST)):(o=!1,r.disable(r.DEPTH_TEST)),r.drawArrays(r.TRIANGLE_STRIP,0,4)),o||r.enable(r.DEPTH_TEST)},f.prototype.mustDrawLabel=function(){return this.label&&this.label.length>0&&this.activeAttributes.labelAttributes},f.prototype.mustDrawLeaderLine=function(e){return this.activeAttributes.drawLeaderLine&&this.activeAttributes.leaderLineAttributes&&(!e.pickingMode||this.enableLeaderLinePicking)},f.prototype.getReferencePosition=function(){return this.position},f.prototype.moveTo=function(e,t){this.position=t},f})),i("shapes/Polygon",["../shapes/AbstractShape","../error/ArgumentError","../shaders/BasicTextureProgram","../geom/BoundingBox","../util/Color","../util/ImageSource","../geom/Location","../util/Logger","../geom/Matrix","../pick/PickedObject","../geom/Position","../shapes/ShapeAttributes","../shapes/SurfacePolygon","../geom/Vec2","../geom/Vec3","../util/libtess"],(function(e,t,n,r,i,a,s,u,l,c,h,f,d,p,m,g){"use strict";var A=function(n,r){if(!n)throw new t(u.logMessage(u.LEVEL_SEVERE,"Polygon","constructor","missingBoundaries"));e.call(this,r),n.length>0&&n[0].latitude&&(n=[n],this._boundariesSpecifiedSimply=!0),this._boundaries=n,this._textureCoordinates=null,this.referencePosition=this.determineReferencePosition(this._boundaries),this._extrude=!1,this.scratchPoint=new m(0,0,0)};return A.prototype=Object.create(e.prototype),Object.defineProperties(A.prototype,{boundaries:{get:function(){return this._boundariesSpecifiedSimply?this._boundaries[0]:this._boundaries},set:function(e){if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"Polygon","boundaries","missingBoundaries"));e.length>0&&e[0].latitude&&(e=[e],this._boundariesSpecifiedSimply=!0),this._boundaries=e,this.referencePosition=this.determineReferencePosition(this._boundaries),this.reset()}},textureCoordinates:{get:function(){return this._textureCoordinates},set:function(e){this._textureCoordinates=e,this.reset()}},extrude:{get:function(){return this._extrude},set:function(e){this._extrude=e,this.reset()}}}),A.prototype.determineReferencePosition=function(e){return e.length>0&&e[0].length>2?e[0][0]:null},A.prototype.mustGenerateGeometry=function(e){return!this.currentData.boundaryPoints||this.currentData.drawInterior!==this.activeAttributes.drawInterior||this.altitudeMode!==WorldWind.ABSOLUTE&&this.currentData.isExpired},A.prototype.hasCapTexture=function(){return this.textureCoordinates&&this.capImageSource()},A.prototype.capImageSource=function(){return this.activeAttributes.imageSource?"string"==typeof this.activeAttributes.imageSource||this.activeAttributes.imageSource instanceof a?this.activeAttributes.imageSource:Array.isArray(this.activeAttributes.imageSource)&&this.activeAttributes.imageSource[0]&&("string"==typeof this.activeAttributes.imageSource[0]||this.activeAttributes.imageSource instanceof a)?this.activeAttributes.imageSource[0]:null:null},A.prototype.hasSideTextures=function(){return this.activeAttributes.imageSource&&Array.isArray(this.activeAttributes.imageSource)&&this.activeAttributes.imageSource.length>1},A.prototype.sideImageSource=function(e){if(0===e||2===this.activeAttributes.imageSource.length)return this.activeAttributes.imageSource[1];var t=this.activeAttributes.imageSource.length-1;return e=Math.min(e+1,t),this.activeAttributes.imageSource[e]},A.prototype.createSurfaceShape=function(){return new d(this.boundaries,null)},A.prototype.doMakeOrderedRenderable=function(e){if(!this.referencePosition)return null;if(!this.activeAttributes.drawInterior&&!this.activeAttributes.drawOutline)return null;if(!this.mustGenerateGeometry(e))return this;var t=this.currentData,n=t.referencePoint;e.surfacePointForMode(this.referencePosition.latitude,this.referencePosition.longitude,this.referencePosition.altitude,this._altitudeMode,n),t.transformationMatrix.setToTranslation(n[0],n[1],n[2]);for(var i=[],o=0;o<this._boundaries.length;o++)i[o]=this._boundaries[o].slice(0),i[o].push(this._boundaries[o][0]);var a=this.computeBoundaryPoints(e,i);if(this.activeAttributes.drawInterior){var s=this.tessellatePolygon(e,a);if(s){t.capTriangles=new Float32Array(s.length);for(var u=0,l=s.length;u<l;u++)t.capTriangles[u]=s[u]}}if(t.boundaryPoints=a,t.drawInterior=this.activeAttributes.drawInterior,this.resetExpiration(t),t.refreshBuffers=!0,t.extent||(t.extent=new r),1===a.length)t.extent.setToPoints(a[0]);else{var c=[];for(o=0;o<a.length;o++)for(var h=0;h<a[o].length;h++)c.push(a[o][h]);t.extent.setToPoints(c)}return t.extent.translate(t.referencePoint),this},A.prototype.computeBoundaryPoints=function(e,t){for(var n,r,i,o,a=Number.MAX_VALUE,s=e.eyePoint,u=[],l=this._extrude?6:3,c=new m(0,0,0),h=0;h<t.length;h++){n=(this._extrude?2:1)*t[h].length,u[h]=new Float32Array(3*n);for(var f=0,d=t[h].length;f<d;f++)r=t[h][f],e.surfacePointForMode(r.latitude,r.longitude,r.altitude,this.altitudeMode,c),(o=c.distanceToSquared(s))<a&&(a=o),c.subtract(this.currentData.referencePoint),i=l*f,u[h][i]=c[0],u[h][i+1]=c[1],u[h][i+2]=c[2],this._extrude&&(e.surfacePointForMode(r.latitude,r.longitude,0,WorldWind.CLAMP_TO_GROUND,c),(o=c.distanceToSquared(s))<a&&(a=o),c.subtract(this.currentData.referencePoint),u[h][i+3]=c[0],u[h][i+4]=c[1],u[h][i+5]=c[2])}return this.currentData.eyeDistance=0,u},A.prototype.tessellatePolygon=function(e,t){var n,r,i=[],a=0,s=this._extrude?6:3,l=this.hasCapTexture();this.polygonTessellator||(this.polygonTessellator=new o.GluTesselator,this.polygonTessellator.gluTessCallback(o.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t[t.length]=e[0],t[t.length]=e[1],t[t.length]=e[2],l&&(t[t.length]=e[3],t[t.length]=e[4])})),this.polygonTessellator.gluTessCallback(o.gluEnum.GLU_TESS_COMBINE,(function(e,t,n){var r=[e[0],e[1],e[2]];if(l)for(var i=3;i<=4;i++){for(var o=0,a=0;a<4;a++)n[a]>0&&(o+=n[a]*t[a][i]);r[i]=o}return r})),this.polygonTessellator.gluTessCallback(o.gluEnum.GLU_TESS_ERROR,(function(e){a=e,u.logMessage(u.LEVEL_WARNING,"Polygon","tessellatePolygon","Tessellation error "+e+".")}))),(r=m.computeBufferNormal(t[0],s))||(r=new m(0,0,0),e.globe.surfaceNormalAtLocation(this.referencePosition.latitude,this.referencePosition.longitude,r)),this.polygonTessellator.gluTessNormal(r[0],r[1],r[2]),this.currentData.capNormal=r,this.polygonTessellator.gluTessBeginPolygon(i);for(var c=0;c<t.length;c++){var h=0;this.polygonTessellator.gluTessBeginContour();for(var f=t[c],d=0;d<f.length;d+=s)n=[f[d],f[d+1],f[d+2]],l&&(h<this.textureCoordinates[c].length?(n[3]=this.textureCoordinates[c][h][0],n[4]=this.textureCoordinates[c][h][1]):(n[3]=this.textureCoordinates[c][0][0],n[4]=this.textureCoordinates[c][1][1]),++h),this.polygonTessellator.gluTessVertex(n,n);this.polygonTessellator.gluTessEndContour()}return this.polygonTessellator.gluTessEndPolygon(),0===a?i:null},A.prototype.mustDrawVerticals=function(e){return this._extrude&&this.activeAttributes.drawOutline&&this.activeAttributes.drawVerticals&&this.altitudeMode!==WorldWind.CLAMP_TO_GROUND},A.prototype.doRenderOrdered=function(e){var t,n=this.currentData;if(e.pickingMode&&(t=e.uniquePickColor()),this.activeAttributes.drawInterior&&n.capTriangles&&n.capTriangles.length>0&&this.drawCap(e,t),this._extrude&&this.activeAttributes.drawInterior&&this.drawSides(e,t),this.activeAttributes.drawOutline&&this.drawOutline(e,t),n.refreshBuffers=!1,e.pickingMode){var r=new c(t,this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);e.resolvePick(r)}},A.prototype.drawCap=function(e,t){var n,r,i,o,a=e.currentGlContext,s=e.currentProgram,u=this.currentData,l=u.refreshBuffers,c=!!this.hasCapTexture(),h=this.activeAttributes.applyLighting,f=u.capTriangles.length/(c?5:3);s.loadTextureEnabled(a,!1),this.applyMvpMatrix(e),u.capVboCacheKey||(u.capVboCacheKey=e.gpuResourceCache.generateCacheKey()),(n=e.gpuResourceCache.resourceForKey(u.capVboCacheKey))||(n=a.createBuffer(),e.gpuResourceCache.putResource(u.capVboCacheKey,n,4*u.capTriangles.length),l=!0),a.bindBuffer(a.ARRAY_BUFFER,n),l&&(o=h?this.makeCapBufferWithNormals():u.capTriangles,a.bufferData(a.ARRAY_BUFFER,o,a.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1)),r=this.activeAttributes.interiorColor,a.depthMask(r.alpha*this.layer.opacity>=1||e.pickingMode),s.loadColor(a,e.pickingMode?t:r),s.loadOpacity(a,e.pickingMode?1:this.layer.opacity),i=12+(c?8:0)+(h?12:0),c&&!e.pickingMode&&(this.activeTexture=e.gpuResourceCache.resourceForKey(this.capImageSource()),this.activeTexture||(this.activeTexture=e.gpuResourceCache.retrieveTexture(e.currentGlContext,this.capImageSource())),this.activeTexture&&this.activeTexture.bind(e)&&(a.enableVertexAttribArray(s.vertexTexCoordLocation),a.vertexAttribPointer(s.vertexTexCoordLocation,2,a.FLOAT,!1,i,12),this.scratchMatrix.setToIdentity(),this.scratchMatrix.multiplyByTextureTransform(this.activeTexture),s.loadTextureEnabled(a,!0),s.loadTextureUnit(a,a.TEXTURE0),s.loadTextureMatrix(a,this.scratchMatrix),s.loadModulateColor(a,e.pickingMode))),h&&!e.pickingMode&&(s.loadApplyLighting(a,!0),a.enableVertexAttribArray(s.normalVectorLocation),a.vertexAttribPointer(s.normalVectorLocation,3,a.FLOAT,!1,i,i-12)),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,i,0),a.drawArrays(a.TRIANGLES,0,f)},A.prototype.makeCapBufferWithNormals=function(){for(var e=this.currentData,t=e.capNormal,n=this.hasCapTexture()?5:3,r=n+3,i=e.capTriangles.length/n,o=e.capTriangles,a=new Float32Array(i*r),s=0,u=0;u<i;u++){for(var l=0;l<n;l++)a[s++]=o[u*n+l];a[s++]=t[0],a[s++]=t[1],a[s++]=t[2]}return a},A.prototype.drawSides=function(e,t){var n,r,i,o,a=e.currentGlContext,s=e.currentProgram,u=this.currentData,l=u.refreshBuffers,c=this.hasSideTextures(),h=this.activeAttributes.applyLighting,f=3+(c?2:0)+(h?3:0),d=4*f;o=0;for(var p=0;p<u.boundaryPoints.length;p++)o+=u.boundaryPoints[p].length/6-1;if(u.sidesVboCacheKey||(u.sidesVboCacheKey=e.gpuResourceCache.generateCacheKey()),!(n=e.gpuResourceCache.resourceForKey(u.sidesVboCacheKey))||l?(i=this.makeSidesBuffer(o),u.numSideVertices=i.length/f,n||(n=a.createBuffer()),e.gpuResourceCache.putResource(u.sidesVboCacheKey,n,4*i.length),a.bindBuffer(a.ARRAY_BUFFER,n),a.bufferData(a.ARRAY_BUFFER,i,a.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1)):a.bindBuffer(a.ARRAY_BUFFER,n),r=this.activeAttributes.interiorColor,a.depthMask(r.alpha*this.layer.opacity>=1||e.pickingMode),s.loadColor(a,e.pickingMode?t:r),s.loadOpacity(a,e.pickingMode?1:this.layer.opacity),c&&!e.pickingMode){h?(s.loadApplyLighting(a,!0),a.enableVertexAttribArray(s.normalVectorLocation)):s.loadApplyLighting(a,!1);for(var m=0;m<o;m++){var g=this.sideImageSource(m),A=e.gpuResourceCache.resourceForKey(g),v=6*m*d;g&&!A&&(A=e.gpuResourceCache.retrieveTexture(e.currentGlContext,g)),A&&A.bind(e)?(a.enableVertexAttribArray(s.vertexTexCoordLocation),a.vertexAttribPointer(s.vertexTexCoordLocation,2,a.FLOAT,!1,d,v+12),this.scratchMatrix.setToIdentity(),this.scratchMatrix.multiplyByTextureTransform(A),s.loadTextureEnabled(a,!0),s.loadTextureUnit(a,a.TEXTURE0),s.loadTextureMatrix(a,this.scratchMatrix)):(s.loadTextureEnabled(a,!1),a.disableVertexAttribArray(s.vertexTexCoordLocation)),h&&a.vertexAttribPointer(s.normalVectorLocation,3,a.FLOAT,!1,d,v+20),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,d,v),a.drawArrays(a.TRIANGLES,0,6)}}else s.loadTextureEnabled(a,!1),h&&!e.pickingMode?(s.loadApplyLighting(a,!0),a.enableVertexAttribArray(s.normalVectorLocation),a.vertexAttribPointer(s.normalVectorLocation,3,a.FLOAT,!1,d,d-12)):s.loadApplyLighting(a,!1),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,d,0),a.drawArrays(a.TRIANGLES,0,u.numSideVertices)},A.prototype.makeSidesBuffer=function(e){var t,n,r,i,o,a,s,u,l,c,h=this.currentData,f=this.hasSideTextures(),d=this.activeAttributes.applyLighting,g=3+(f?2:0)+(d?3:0);t=new Float32Array(2*e*3*g),n=0,r=new m(0,0,0),i=new m(0,0,0),o=new m(0,0,0),a=new m(0,0,0),f?(s=new p(0,1),u=new p(0,0),l=new p(1,1),c=new p(1,0)):s=u=l=c=null;for(var A=0;A<h.boundaryPoints.length;A++)for(var v,y=h.boundaryPoints[A],b=0;b<y.length-6;b+=6)r[0]=y[b],r[1]=y[b+1],r[2]=y[b+2],i[0]=y[b+3],i[1]=y[b+4],i[2]=y[b+5],o[0]=y[b+6],o[1]=y[b+7],o[2]=y[b+8],a[0]=y[b+9],a[1]=y[b+10],a[2]=y[b+11],v=d?m.computeTriangleNormal(r,i,o):null,this.addVertexToBuffer(r,s,v,t,n),n+=g,this.addVertexToBuffer(i,u,v,t,n),n+=g,this.addVertexToBuffer(o,l,v,t,n),n+=g,this.addVertexToBuffer(i,u,v,t,n),n+=g,this.addVertexToBuffer(a,c,v,t,n),n+=g,this.addVertexToBuffer(o,l,v,t,n),n+=g;return t},A.prototype.addVertexToBuffer=function(e,t,n,r,i){r[i++]=e[0],r[i++]=e[1],r[i++]=e[2],t&&(r[i++]=t[0],r[i++]=t[1]),n&&(r[i++]=n[0],r[i++]=n[1],r[i]=n[2])},A.prototype.drawOutline=function(e,t){var n,r,i,o,a,s=e.currentGlContext,u=e.currentProgram,l=this.currentData,c=l.refreshBuffers;u.loadTextureEnabled(s,!1),u.loadApplyLighting(s,!1),this.hasCapTexture()&&s.disableVertexAttribArray(u.vertexTexCoordLocation),this.activeAttributes.applyLighting&&s.disableVertexAttribArray(u.normalVectorLocation),l.boundaryVboCacheKeys||(this.currentData.boundaryVboCacheKeys=[]),this.applyMvpMatrixForOutline(e),u.loadTextureEnabled(s,!1),s.disableVertexAttribArray(u.vertexTexCoordLocation);for(var h=0;h<l.boundaryPoints.length;h++)n=l.boundaryPoints[h].length/3,l.boundaryVboCacheKeys[h]||(l.boundaryVboCacheKeys[h]=e.gpuResourceCache.generateCacheKey()),(r=e.gpuResourceCache.resourceForKey(l.boundaryVboCacheKeys[h]))||(r=s.createBuffer(),e.gpuResourceCache.putResource(l.boundaryVboCacheKeys[h],r,12*n),c=!0),s.bindBuffer(s.ARRAY_BUFFER,r),c&&(s.bufferData(s.ARRAY_BUFFER,l.boundaryPoints[h],s.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1)),i=this.activeAttributes.outlineColor,s.depthMask(i.alpha*this.layer.opacity>=1||e.pickingMode),u.loadColor(s,e.pickingMode?t:i),u.loadOpacity(s,e.pickingMode?1:this.layer.opacity),s.lineWidth(this.activeAttributes.outlineWidth),this._extrude?(o=24,a=n/2):(o=12,a=n),s.vertexAttribPointer(u.vertexPointLocation,3,s.FLOAT,!1,o,0),s.drawArrays(s.LINE_STRIP,0,a),this.mustDrawVerticals(e)&&(s.vertexAttribPointer(u.vertexPointLocation,3,s.FLOAT,!1,0,0),s.drawArrays(s.LINES,0,n-2))},A.prototype.beginDrawing=function(e){var t=e.currentGlContext;this.activeAttributes.drawInterior&&t.disable(t.CULL_FACE),e.findAndBindProgram(n),t.enableVertexAttribArray(e.currentProgram.vertexPointLocation),!e.pickMode&&this.activeAttributes.applyLighting&&e.currentProgram.loadModelviewInverse(t,e.modelviewNormalTransform)},A.prototype.endDrawing=function(e){var t=e.currentGlContext;t.disableVertexAttribArray(e.currentProgram.vertexPointLocation),t.disableVertexAttribArray(e.currentProgram.normalVectorLocation),t.depthMask(!0),t.lineWidth(1),t.enable(t.CULL_FACE)},A})),i("shapes/SurfacePolyline",["../error/ArgumentError","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape"],(function(e,t,n,r){"use strict";var i=function n(i,o){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"SurfacePolyline","constructor","The specified locations array is null or undefined."));r.call(this,o),this._boundaries=i,this._stateId=n.stateId++,this._isInteriorInhibited=!0};return i.prototype=Object.create(r.prototype),Object.defineProperties(i.prototype,{boundaries:{get:function(){return this._boundaries},set:function(n){if(!Array.isArray(n))throw new e(t.logMessage(t.LEVEL_SEVERE,"SurfacePolyline","set boundaries","The specified value is not an array."));this.resetBoundaries(),this._boundaries=n,this._stateId=i.stateId++,this.stateKeyInvalid=!0}}}),i.stateId=Number.MIN_SAFE_INTEGER,i.staticStateKey=function(e){return r.staticStateKey(e)+" pl "+e._stateId},i.prototype.computeStateKey=function(){return i.staticStateKey(this)},i.prototype.computeBoundaries=function(e){},i.prototype.getReferencePosition=function(){return this.boundaries.length>1?this.boundaries[0]:null},i.prototype.moveTo=function(e,t){this.boundaries=this.computeShiftedLocations(e,this.getReferencePosition(),t,this._boundaries)},i})),i("formats/geojson/GeoJSONParser",["../../error/ArgumentError","../../util/Color","./GeoJSONConstants","./GeoJSONCRS","./GeoJSONFeature","./GeoJSONFeatureCollection","./GeoJSONGeometry","./GeoJSONGeometryCollection","./GeoJSONGeometryLineString","./GeoJSONGeometryMultiLineString","./GeoJSONGeometryMultiPoint","./GeoJSONGeometryMultiPolygon","./GeoJSONGeometryPoint","./GeoJSONGeometryPolygon","../../geom/Location","../../util/Logger","../../shapes/Placemark","../../shapes/PlacemarkAttributes","../../shapes/Polygon","../../geom/Position","../../util/proj4-src","../../layer/RenderableLayer","../../shapes/ShapeAttributes","../../shapes/SurfacePolygon","../../shapes/SurfacePolyline"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w,E,x){"use strict";var S=function(t){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","constructor","missingDataSource"));this._dataSource=t,this._geoJSONObject=null,this._geoJSONType=null,this._crs=null,this._layer=null,this._parserCompletionCallback=null,this._shapeConfigurationCallback=this.defaultShapeConfigurationCallback,this.defaultPlacemarkAttributes=new A(null),this.defaultShapeAttributes=new w(null),this.setProj4jsAliases()};return Object.defineProperties(S.prototype,{dataSource:{get:function(){return this._dataSource}},geoJSONObject:{get:function(){return this._geoJSONObject}},geoJSONType:{get:function(){return this._geoJSONType}},crs:{get:function(){return this._crs}},layer:{get:function(){return this._layer}},parserCompletionCallback:{get:function(){return this._parserCompletionCallback}},shapeConfigurationCallback:{get:function(){return this._shapeConfigurationCallback}}}),S.prototype.load=function(e,t,n){e&&(this._parserCompletionCallback=e),t&&(this._shapeConfigurationCallback=t),this._layer=n||new _;var r=typeof this.dataSource;if("string"===r){var i=S.tryParseJSONString(this.dataSource);null!==i?this.handle(i):this.requestUrl(this.dataSource)}else"object"===r?this.handle(this.dataSource):m.logMessage(m.LEVEL_SEVERE,"GeoJSON","load","Unsupported data source type: "+r)},S.prototype.defaultShapeConfigurationCallback=function(e,t){var n={},r=t.name||t.Name||t.NAME;return r&&(n.name=r),e.isPointType()||e.isMultiPointType()?n.attributes=this.defaultPlacemarkAttributes:(e.isLineStringType()||e.isMultiLineStringType()||e.isPolygonType()||e.isMultiPolygonType())&&(n.attributes=this.defaultShapeAttributes),n},S.prototype.requestUrl=function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="text",t.onreadystatechange=function(){4===t.readyState&&(200===t.status?this.handle(S.tryParseJSONString(t.response)):m.log(m.LEVEL_WARNING,"GeoJSON retrieval failed ("+t.statusText+"): "+e))}.bind(this),t.onerror=function(){m.log(m.LEVEL_WARNING,"GeoJSON retrieval failed: "+e)},t.ontimeout=function(){m.log(m.LEVEL_WARNING,"GeoJSON retrieval timed out: "+e)},t.send(null)},S.prototype.handle=function(t){if(t||m.logMessage(m.LEVEL_SEVERE,"GeoJSON","handle","Invalid GeoJSON object"),this._geoJSONObject=t,"[object Array]"===Object.prototype.toString.call(this.geoJSONObject))throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","handle","invalidGeoJSONObjectLength"));if(!this.geoJSONObject.hasOwnProperty(n.FIELD_TYPE))throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","handle","missingGeoJSONType"));this.setGeoJSONType(),this.setGeoJSONCRS(),this._parserCompletionCallback&&"function"==typeof this._parserCompletionCallback&&this._parserCompletionCallback(this.layer)},S.prototype.setGeoJSONCRS=function(){if(this.geoJSONObject[n.FIELD_CRS]){this._crs=new r(this.geoJSONObject[n.FIELD_CRS][n.FIELD_TYPE],this.geoJSONObject[n.FIELD_CRS][n.FIELD_PROPERTIES]);var e=function(){this.addRenderablesForGeoJSON(this.layer)}.bind(this);this.crs.setCRSString(e)}else this.addRenderablesForGeoJSON(this.layer)},S.prototype.addRenderablesForGeoJSON=function(t){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForGeoJSON","missingLayer"));switch(this.geoJSONType){case n.TYPE_FEATURE:var r=new i(this.geoJSONObject[n.FIELD_GEOMETRY],this.geoJSONObject[n.FIELD_PROPERTIES],this.geoJSONObject[n.FIELD_ID],this.geoJSONObject[n.FIELD_BBOX]);this.addRenderablesForFeature(t,r);break;case n.TYPE_FEATURE_COLLECTION:var a=new o(this.geoJSONObject[n.FIELD_FEATURES],this.geoJSONObject[n.FIELD_BBOX]);this.addRenderablesForFeatureCollection(t,a);break;case n.TYPE_GEOMETRY_COLLECTION:var u=new s(this.geoJSONObject[n.FIELD_GEOMETRIES],this.geoJSONObject[n.FIELD_BBOX]);this.addRenderablesForGeometryCollection(t,u,null);break;default:this.addRenderablesForGeometry(t,this.geoJSONObject,null)}},S.prototype.addRenderablesForGeometry=function(t,r,i){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForGeometry","missingLayer"));if(!r)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForGeometry","missingGeometry"));switch(r[n.FIELD_TYPE]){case n.TYPE_POINT:var o=new f(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForPoint(t,o,i||null);break;case n.TYPE_MULTI_POINT:var a=new c(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForMultiPoint(t,a,i||null);break;case n.TYPE_LINE_STRING:var s=new u(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForLineString(t,s,i||null);break;case n.TYPE_MULTI_LINE_STRING:var p=new l(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForMultiLineString(t,p,i||null);break;case n.TYPE_POLYGON:var g=new d(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForPolygon(t,g,i||null);break;case n.TYPE_MULTI_POLYGON:var A=new h(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForMultiPolygon(t,A,i||null)}},S.prototype.addRenderablesForPoint=function(t,n,r){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForPoint","missingLayer"));if(!n)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForPoint","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported()){var o=n.coordinates[0],a=n.coordinates[1],s=n.coordinates[2]?n.coordinates[2]:0,u=this.getReprojectedIfRequired(a,o,this.crs),l=new y(u[1],u[0],s),c=new g(l,!1,i&&i.attributes?i.attributes:null);c.altitudeMode=WorldWind.RELATIVE_TO_GROUND,i&&i.name&&(c.label=i.name),i.highlightAttributes&&(c.highlightAttributes=i.highlightAttributes),i&&i.pickDelegate&&(c.pickDelegate=i.pickDelegate),i&&i.userProperties&&(c.userProperties=i.userProperties),t.addRenderable(c)}},S.prototype.addRenderablesForMultiPoint=function(t,n,r){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiPoint","missingLayer"));if(!n)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiPoint","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported())for(var o=0,a=n.coordinates.length;o<a;o+=1){var s=n.coordinates[o][0],u=n.coordinates[o][1],l=n.coordinates[o][2]?n.coordinates[o][2]:0,c=this.getReprojectedIfRequired(u,s,this.crs),h=new y(c[1],c[0],l),f=new g(h,!1,i&&i.attributes?i.attributes:null);f.altitudeMode=WorldWind.RELATIVE_TO_GROUND,i&&i.name&&(f.label=i.name),i.highlightAttributes&&(f.highlightAttributes=i.highlightAttributes),i&&i.pickDelegate&&(f.pickDelegate=i.pickDelegate),i&&i.userProperties&&(f.userProperties=i.userProperties),t.addRenderable(f)}},S.prototype.addRenderablesForLineString=function(t,n,r){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForLineString","missingLayer"));if(!n)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForLineString","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported()){for(var o=[],a=0,s=n.coordinates;a<s.length;a++){var u=s[a][0],l=s[a][1],c=this.getReprojectedIfRequired(l,u,this.crs),h=new p(c[1],c[0]);o.push(h)}var f;f=new x(o,i&&i.attributes?i.attributes:null),i.highlightAttributes&&(f.highlightAttributes=i.highlightAttributes),i&&i.pickDelegate&&(f.pickDelegate=i.pickDelegate),i&&i.userProperties&&(f.userProperties=i.userProperties),t.addRenderable(f)}},S.prototype.addRenderablesForMultiLineString=function(t,n,r){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiLineString","missingLayer"));if(!n)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiLineString","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported())for(var o=0,a=n.coordinates;o<a.length;o++){for(var s=[],u=0,l=a[o];u<l.length;u++){var c=l[u][0],h=l[u][1],f=this.getReprojectedIfRequired(h,c,this.crs),d=new p(f[1],f[0]);s.push(d)}var g;g=new x(s,i&&i.attributes?i.attributes:null),i.highlightAttributes&&(g.highlightAttributes=i.highlightAttributes),i&&i.pickDelegate&&(g.pickDelegate=i.pickDelegate),i&&i.userProperties&&(g.userProperties=i.userProperties),t.addRenderable(g)}},S.prototype.addRenderablesForPolygon=function(t,n,r){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForPolygon","missingLayer"));if(!n)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForPolygon","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported()){for(var o=[],a=0,s=n.coordinates;a<s.length;a++){for(var u=[],l=0,c=s[a];l<c.length;l++){var h=c[l][0],f=c[l][1],d=this.getReprojectedIfRequired(f,h,this.crs),g=new p(d[1],d[0]);u.push(g)}o.push(u)}var A;A=new E(o,i&&i.attributes?i.attributes:null),i.highlightAttributes&&(A.highlightAttributes=i.highlightAttributes),i&&i.pickDelegate&&(A.pickDelegate=i.pickDelegate),i&&i.userProperties&&(A.userProperties=i.userProperties),t.addRenderable(A)}},S.prototype.addRenderablesForMultiPolygon=function(t,n,r){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiPolygon","missingLayer"));if(!n)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiPolygon","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported())for(var o=0,a=n.coordinates;o<a.length;o++){for(var s=[],u=0;u<a[o].length;u++){for(var l=[],c=0,h=a[o][u];c<h.length;c++){var f=h[c][0],d=h[c][1],g=this.getReprojectedIfRequired(d,f,this.crs),A=new p(g[1],g[0]);l.push(A)}s.push(l)}var v;v=new E(s,i&&i.attributes?i.attributes:null),i.highlightAttributes&&(v.highlightAttributes=i.highlightAttributes),i&&i.pickDelegate&&(v.pickDelegate=i.pickDelegate),i&&i.userProperties&&(v.userProperties=i.userProperties),t.addRenderable(v)}},S.prototype.addRenderablesForGeometryCollection=function(t,r,i){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForGeometryCollection","missingLayer"));if(!r)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForGeometryCollection","missingGeometryCollection"));for(var o=0,a=r.geometries;o<a.length;o++)a[o].hasOwnProperty(n.FIELD_TYPE)&&this.addRenderablesForGeometry(t,a[o],i)},S.prototype.addRenderablesForFeature=function(t,r){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForFeature","missingLayer"));if(!r)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForFeature","missingFeature"));if(r.geometry.type===n.TYPE_GEOMETRY_COLLECTION){var i=new s(r.geometry.geometries,r.bbox);this.addRenderablesForGeometryCollection(t,i,r.properties)}else this.addRenderablesForGeometry(t,r.geometry,r.properties)},S.prototype.addRenderablesForFeatureCollection=function(t,r){if(!t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForFeatureCollection","missingLayer"));if(!r)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","addRenderablesForFeatureCollection","missingFeatureCollection"));if(r.features.length>0)for(var o=0;o<r.features.length;o++){var a=new i(r.features[o][n.FIELD_GEOMETRY],r.features[o][n.FIELD_PROPERTIES],r.features[o][n.FIELD_ID],r.features[o][n.FIELD_BBOX]);this.addRenderablesForFeature(t,a)}},S.prototype.setGeoJSONType=function(){switch(this.geoJSONObject[n.FIELD_TYPE]){case n.TYPE_POINT:this._geoJSONType=n.TYPE_POINT;break;case n.TYPE_MULTI_POINT:this._geoJSONType=n.TYPE_MULTI_POINT;break;case n.TYPE_LINE_STRING:this._geoJSONType=n.TYPE_LINE_STRING;break;case n.TYPE_MULTI_LINE_STRING:this._geoJSONType=n.TYPE_MULTI_LINE_STRING;break;case n.TYPE_POLYGON:this._geoJSONType=n.TYPE_POLYGON;break;case n.TYPE_MULTI_POLYGON:this._geoJSONType=n.TYPE_MULTI_POLYGON;break;case n.TYPE_GEOMETRY_COLLECTION:this._geoJSONType=n.TYPE_GEOMETRY_COLLECTION;break;case n.TYPE_FEATURE:this._geoJSONType=n.TYPE_FEATURE;break;case n.TYPE_FEATURE_COLLECTION:this._geoJSONType=n.TYPE_FEATURE_COLLECTION;break;default:throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","setGeoJSONType","invalidGeoJSONType"))}},S.prototype.getReprojectedIfRequired=function(t,r,i){if(!t&&0!==t)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","getReprojectedIfRequired","missingLatitude"));if(!r&&0!==r)throw new e(m.logMessage(m.LEVEL_SEVERE,"GeoJSON","getReprojectedIfRequired","missingLongitude"));return!i||i.isDefault()?[r,t]:b(i.projectionString,n.EPSG4326_CRS,[r,t])},S.prototype.setProj4jsAliases=function(){b.defs([["urn:ogc:def:crs:EPSG::4326",b.defs("EPSG:4326")],["urn:ogc:def:crs:OGC:1.3:CRS84",b.defs("EPSG:4326")],["urn:ogc:def:crs:EPSG::3857",b.defs("EPSG:3857")]])},S.tryParseJSONString=function(e){try{return JSON.parse(e)}catch(e){return null}},S})),i("projections/ProjectionEquirectangular",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger","../geom/Vec3"],(function(e,t,n,r,i){"use strict";var o=function(){n.call(this,"Equirectangular",!0,null)};return o.prototype=Object.create(n.prototype),Object.defineProperties(o.prototype,{stateKey:{get:function(){return"projection equirectangular "}}}),o.prototype.geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesian","missingGlobe"));if(!u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesian","missingResult"));return u[0]=n.equatorialRadius*o*e.DEGREES_TO_RADIANS+(s?s[0]:0),u[1]=n.equatorialRadius*i*e.DEGREES_TO_RADIANS,u[2]=a,u},o.prototype.geographicToCartesianGrid=function(n,o,a,s,u,l,c,h){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","missingGlobe"));if(!o)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","missingSector"));if(!u||u.length<a*s)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!h)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","missingResult"));var f,d,p,m,g,A=n.equatorialRadius,v=o.minLatitude*e.DEGREES_TO_RADIANS,y=o.maxLatitude*e.DEGREES_TO_RADIANS,b=o.minLongitude*e.DEGREES_TO_RADIANS,_=o.maxLongitude*e.DEGREES_TO_RADIANS,w=(y-v)/(a>1?a-1:1),E=(_-b)/(s>1?s-1:1),x=l||new i(0,0,0),S=c?c[0]:0,T=0,M=0;for(f=0,p=v;f<a;f++,p+=w)for(f===a-1&&(p=y),g=A*p-x[1],d=0,m=b;d<s;d++,m+=E)d===s-1&&(m=_),h[M++]=A*m-x[0]+S,h[M++]=g,h[M++]=u[T++]-x[2];return h},o.prototype.cartesianToGeographic=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","cartesianToGeographic","missingGlobe"));if(!u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","cartesianToGeographic","missingResult"));return u.latitude=o/n.equatorialRadius*e.RADIANS_TO_DEGREES,u.longitude=(i-(s?s[0]:0))/n.equatorialRadius*e.RADIANS_TO_DEGREES,u.altitude=a,u},o})),i("globe/Globe2D",["../globe/ElevationModel","../globe/Globe","../projections/ProjectionEquirectangular"],(function(e,t,n){"use strict";var r=function(){t.call(this,new e,new n)};return r.prototype=Object.create(t.prototype),r})),i("util/GoToAnimator",["../geom/Location","../util/Logger","../geom/Position","../geom/Vec3"],(function(e,t,n,r){"use strict";var i=function(e){if(!e)throw new ArgumentError(t.logMessage(t.LEVEL_SEVERE,"GoToAnimator","constructor","missingWorldWindow"));this.wwd=e,this.animationFrequency=20,this.travelTime=3e3,this.cancelled=!1};return i.prototype.cancel=function(){this.cancelled=!0},i.prototype.goTo=function(i,o){if(!i)throw new ArgumentError(t.logMessage(t.LEVEL_SEVERE,"GoToAnimator","goTo","missingPosition"));this.completionCallback=o,this.cancelled=!1,this.targetPosition=new n(i.latitude,i.longitude,i.altitude||this.wwd.navigator.range),this.startPosition=new n(this.wwd.navigator.lookAtLocation.latitude,this.wwd.navigator.lookAtLocation.longitude,this.wwd.navigator.range),this.startTime=Date.now();var a,s=this.travelTime,u=e.greatCircleDistance(this.startPosition,this.targetPosition),l=this.wwd.globe.computePointFromLocation(this.startPosition.latitude,this.startPosition.longitude,new r(0,0,0)),c=this.wwd.globe.computePointFromLocation(this.targetPosition.latitude,this.targetPosition.longitude,new r(0,0,0));this.maxAltitude=l.distanceTo(c);var h=this.wwd.pixelSizeAtDistance(this.startPosition.altitude)*this.wwd.canvas.clientWidth/this.wwd.globe.equatorialRadius;u<=2*h&&(this.maxAltitude=this.startPosition.altitude),this.maxAltitudeReachedTime=this.maxAltitude<=this.wwd.navigator.range?Date.now():null,this.maxAltitude>this.startPosition.altitude?(a=Math.max(0,this.maxAltitude-this.startPosition.altitude),a+=Math.abs(this.targetPosition.altitude-this.maxAltitude)):a=Math.abs(this.targetPosition.altitude-this.startPosition.altitude);var f=Math.max(u,a/this.wwd.globe.equatorialRadius);if(0!==f){f<2*h&&(s=Math.min(f/h*this.travelTime,this.travelTime)),s=Math.max(1,s),this.panVelocity=u/s,this.rangeVelocity=a/s;var d=this;setTimeout((function e(){return d.cancelled?void(d.completionCallback&&d.completionCallback(d)):void(d.update()?setTimeout(e,d.animationFrequency):d.completionCallback&&d.completionCallback(d))}),this.animationFrequency)}},i.prototype.update=function(){var e=new n(this.wwd.navigator.lookAtLocation.latitude,this.wwd.navigator.lookAtLocation.longitude,this.wwd.navigator.range),t=this.updateRange(e);return t=this.updateLocation(e)||t,this.wwd.redraw(),t},i.prototype.updateRange=function(e){var t,n,r=!1;return this.maxAltitudeReachedTime?(n=Date.now()-this.maxAltitudeReachedTime,this.maxAltitude>this.targetPosition.altitude?(t=this.maxAltitude-this.rangeVelocity*n,t=Math.max(t,this.targetPosition.altitude)):(t=this.maxAltitude+this.rangeVelocity*n,t=Math.min(t,this.targetPosition.altitude)),this.wwd.navigator.range=t,r=Math.abs(this.wwd.navigator.range-this.targetPosition.altitude)>1):(n=Date.now()-this.startTime,t=Math.min(this.startPosition.altitude+this.rangeVelocity*n,this.maxAltitude),Math.abs(this.wwd.navigator.range-t)<1&&(this.maxAltitudeReachedTime=Date.now()),this.wwd.navigator.range=t,r=!0),r},i.prototype.updateLocation=function(t){var n=Date.now()-this.startTime,r=e.greatCircleDistance(this.startPosition,t),i=e.greatCircleDistance(t,this.targetPosition),o=e.greatCircleAzimuth(t,this.targetPosition),a=this.panVelocity*n,s=Math.min(a-r,i),u=e.greatCircleLocation(t,o,s,new e(0,0)),l=!1;return this.wwd.navigator.lookAtLocation.latitude=u.latitude,this.wwd.navigator.lookAtLocation.longitude=u.longitude,s<1/this.wwd.globe.equatorialRadius&&(l=!0),!l},i})),i("layer/heatmap/HeatMapTile",[],(function(){var e=function(e,t){this._data=e,this._sector=t.sector,this._canvas=this.createCanvas(t.width,t.height),this._width=t.width,this._height=t.height,this._intensityGradient=t.intensityGradient,this._radius=t.radius,this._incrementPerIntensity=t.incrementPerIntensity};return e.prototype.url=function(){return this.draw().toDataURL()},e.prototype.canvas=function(){return this.draw()},e.prototype.draw=function(){var e=[];for(var t in this._intensityGradient)this._intensityGradient.hasOwnProperty(t)&&e.push({shape:this.shape(t),min:t});for(var n,r=this._canvas.getContext("2d"),i=null,o=0;o<this._data.length;o++){var a=this._data[o];n=a.measure*this._incrementPerIntensity,r.globalAlpha=n,e.forEach((function(e){n>e.min&&(i=e.shape)})),r.drawImage(i,this.longitudeInSector(a,this._sector,this._width)-i.width/2,this._height-this.latitudeInSector(a,this._sector,this._height)-i.height/2)}return this._canvas},e.prototype.createCanvas=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},e.prototype.shape=function(e){var t=this.createCanvas(2*this._radius,2*this._radius),n=t.getContext("2d"),r=n.createRadialGradient(this._radius,this._radius,0,this._radius,this._radius,this._radius);return r.addColorStop(0,"rgba(0,0,0,"+e+")"),r.addColorStop(1,"rgba(0,0,0,0)"),n.beginPath(),n.arc(this._radius,this._radius,this._radius,0,2*Math.PI,!0),n.fillStyle=r,n.fill(),n.closePath(),t},e.prototype.latitudeInSector=function(e,t,n){var r=t.maxLatitude-t.minLatitude,i=e.latitude-t.minLatitude;return Math.ceil(i/r*n)},e.prototype.longitudeInSector=function(e,t,n){var r=t.maxLongitude-t.minLongitude,i=e.longitude-t.minLongitude;return Math.ceil(i/r*n)},e})),i("layer/heatmap/HeatMapColoredTile",["./HeatMapTile"],(function(e){var t=function(t,n){e.call(this,t,n),this._extendedWidth=n.extendedWidth,this._extendedHeight=n.extendedHeight,this._gradient=this.gradient(n.intensityGradient)};return(t.prototype=Object.create(e.prototype)).draw=function(){var t=e.prototype.draw.call(this),n=t.getContext("2d"),r=0,i=0,o=this._width,a=this._height;this._extendedHeight&&(r=this._extendedHeight,a=this._height-2*this._extendedHeight),this._extendedWidth&&(i=this._extendedWidth,o=this._width-2*this._extendedWidth);var s=n.getImageData(r,i,o,a);return this.colorize(s.data,this._gradient),n.putImageData(s,r,i),t},t.prototype.gradient=function(e){var t=this.createCanvas(1,256).getContext("2d"),n=t.createLinearGradient(0,0,0,256);for(var r in e)n.addColorStop(+r,e[r]);return t.fillStyle=n,t.fillRect(0,0,1,256),t.getImageData(0,0,1,256).data},t.prototype.colorize=function(e,t){for(var n,r=0,i=e.length;r<i;r+=4)(n=4*e[r+3])&&(e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2],e[r+3]=255)},t})),i("layer/heatmap/HeatMapIntervalType",[],(function(){"use strict";return{CONTINUOUS:0,QUANTILES:1}})),i("geom/MeasuredLocation",["./Angle","./Location"],(function(e,t){"use strict";var n=function(e,n,r){t.call(this,e,n),this.measure=r};return n.prototype=Object.create(t.prototype),n.fromRadians=function(t,r,i){return new n(t*e.RADIANS_TO_DEGREES,r*e.RADIANS_TO_DEGREES,i)},n.prototype.copy=function(e){return t.prototype.copy.call(this,e),this.measure=e.measure,this},n.prototype.set=function(e,n,r){return t.prototype.set.call(this,e,n),this.measure=r,this},n.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&this.measure===e.measure},n})),i("layer/heatmap/HeatMapLayer",["../../error/ArgumentError","./HeatMapColoredTile","./HeatMapIntervalType","./HeatMapTile","../../util/ImageSource","../../geom/Location","../../util/Logger","../../geom/MeasuredLocation","../TiledImageLayer","../../geom/Sector","../../util/WWUtil"],(function(e,t,n,r,i,o,a,s,u,l,c){"use strict";var h=function(e,t,r){this.tileWidth=256,this.tileHeight=256,u.call(this,new l(-90,90,-180,180),new o(45,45),r||18,"image/png","HeatMap"+c.guid(),this.tileWidth,this.tileHeight),this.displayName=e;for(var i={},a=-90;a<=90;a++){i[a]={};for(var s=-180;s<=180;s++)i[a][s]=[]}var h,f,d=Number.MIN_VALUE;t.forEach((function(e){h=Math.floor(e.latitude),f=Math.floor(e.longitude),i[h][f].push(e),e.measure>d&&(d=e.measure)})),this._data=i,this._measuredLocations=t,this._intervalType=n.CONTINUOUS,this._scale=["blue","cyan","lime","yellow","red"],this._radius=12.5,this._incrementPerIntensity=1/d,this.setGradient(t)};return h.prototype=Object.create(u.prototype),Object.defineProperties(h.prototype,{intervalType:{get:function(){return this._intervalType},set:function(e){this._intervalType=e,this.setGradient()}},scale:{get:function(){return this._scale},set:function(e){this._scale=e,this.setGradient()}},gradient:{get:function(){return this._gradient}},radius:{get:function(){return this._radius},set:function(e){this._radius=e}}}),h.prototype.filterGeographically=function(e,t){var n=Math.floor(t.minLatitude),r=Math.floor(t.maxLatitude),i=Math.floor(t.minLongitude),o=Math.floor(t.maxLongitude),a=0,s=0;n<=-90&&(n=-90),r>=90&&(r=90),i<=-180&&(a=Math.abs(i- -180),i=-180),o>=180&&(s=Math.abs(o-180),o=180);var u=[];if(this.gatherGeographical(e,u,t,n,r,i,o),0!==a){var c=new l(n,r,180-a,180);this.gatherGeographical(e,u,c,n,r,180-a,180,-360)}if(0!==s){var h=new l(n,r,-180,-180+s);this.gatherGeographical(e,u,h,n,r,-180,-180+s,360)}return u},h.prototype.gatherGeographical=function(e,t,n,r,i,o,a,u){var l,c;for(l=r;l<=i;l++)for(c=o;c<=a;c++)e[l][c].forEach((function(e){n.containsLocation(e.latitude,e.longitude)&&(u?t.push(new s(e.latitude,u+e.longitude,e.measure)):t.push(e))}))},h.prototype.setGradient=function(){var e=this.intervalType,t=this.scale,r={};if(e===n.CONTINUOUS)t.forEach((function(e,n){r[n/t.length]=e}));else if(e===n.QUANTILES){var i=this._measuredLocations;i.sort((function(e,t){return e.measure<t.measure?-1:e.measure>t.measure?1:0}));var o=i[i.length-1].measure;i.length>=t.length?t.forEach((function(e,n){0===n?r[0]=e:r[i[Math.floor(n/t.length*i.length)].measure/o]=e})):t.forEach((function(e,n){r[n/t.length]=e}))}this._gradient=r},h.prototype.retrieveTileImage=function(e,t,n){if(this.currentRetrievals.indexOf(t.imagePath)<0){if(this.absentResourceList.isResourceAbsent(t.imagePath))return;var r=t.imagePath,i=e.gpuResourceCache,o=this,a=this.radius,s=this.calculateExtendedSector(t.sector,a/this.tileWidth*2,a/this.tileHeight*2),u=Math.ceil(s.extensionFactorWidth*this.tileWidth),l=Math.ceil(s.extensionFactorHeight*this.tileHeight),c=this.filterGeographically(this._data,s.sector),h=this.createHeatMapTile(c,{sector:s.sector,width:this.tileWidth+2*u,height:this.tileHeight+2*l,radius:a,intensityGradient:this.gradient,incrementPerIntensity:this._incrementPerIntensity,extendedWidth:u,extendedHeight:l}).canvas(),f=document.createElement("canvas");f.height=this.tileHeight,f.width=this.tileWidth,f.getContext("2d").putImageData(h.getContext("2d").getImageData(u,l,this.tileWidth,this.tileHeight),0,0);var d=o.createTexture(e,t,f);if(o.removeFromCurrentRetrievals(r),d&&(i.putResource(r,d,d.size),o.currentTilesInvalid=!0,o.absentResourceList.unmarkResourceAbsent(r),!n)){var p=document.createEvent("Event");p.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(p)}}},h.prototype.calculateExtendedSector=function(e,t,n){var r=(e.maxLatitude-e.minLatitude)*n,i=(e.maxLongitude-e.minLongitude)*t;return{sector:new l(e.minLatitude-r,e.maxLatitude+r,e.minLongitude-i,e.maxLongitude+i),extensionFactorHeight:n,extensionFactorWidth:t}},h.prototype.createHeatMapTile=function(e,n){return new t(e,n)},h})),i("util/HighlightController",["../error/ArgumentError","../util/Logger"],(function(e,t){"use strict";return function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"HighlightController","constructor","missingWorldWindow"));this.worldWindow=n;var r=[],i=function(e){for(var t=e.clientX,i=e.clientY,o=r.length>0,a=0;a<r.length;a++)r[a].highlighted=!1;r=[];var s=n.pick(n.canvasCoordinates(t,i));if(s.objects.length>0&&(o=!0),s.objects.length>0)for(var u=0;u<s.objects.length;u++)s.objects[u].isTerrain||(s.objects[u].userObject.highlighted=!0,r.push(s.objects[u].userObject));o&&n.redraw()};this.worldWindow.addEventListener("mousemove",i),new WorldWind.TapRecognizer(this.worldWindow,i)}})),i("formats/kml/util/KmlAttribute",[],(function(){"use strict";var e=function(e,t){this.node=e,this.name=t};return e.prototype.value=function(){return this.node.attributes&&this.node.attributes.getNamedItem(this.name)&&this.node.attributes.getNamedItem(this.name).value||null},e.prototype.exists=function(){return null!=this.value()},e.prototype.save=function(e){this.node.setAttribute(this.name,e)},e})),i("formats/kml/KmlElements",[],(function(){"use strict";return{keys:{},addKey:function(e,t){this.keys[e]=t},getKey:function(e){return this.keys[e]}}})),i("formats/kml/util/KmlNodeTransformers",["./KmlAttribute","../KmlElements","../../../geom/Position","../../../util/WWUtil"],(function(e,t,n,r){function i(e){var t;return null!=e&&e.childNodes[0]?t=e.childNodes[0].nodeValue:null!=e&&(t=""),t}var o=function(){};return o.string=function(e){return String(i(e))},o.number=function(e){return Number(i(e))},o.boolean=function(e){return r.transformToBoolean(i(e))},o.date=function(e){return r.date(i(e))},o.kmlObject=function(e,n,r){var i=e.nodeName,o=t.getKey(i);return o?new o({objectNode:e,parent:n,controls:r}):null},o.linearRing=function(e,n,r){var i=t.getKey("LinearRing");if(!i)return null;var o=null;return Array.prototype.forEach.call(e.childNodes,(function(e){e.nodeName.toUpperCase()=="LinearRing".toUpperCase()&&(o=e)})),new i({objectNode:o,parent:n,controls:r})},o.positions=function(e){var t=[];return i(e).trim().replace(/\s+/g," ").split(" ").forEach((function(e){e=e.split(","),t.push(new n(Number(e[1]),Number(e[0]),Number(e[2]||0)))})),t},o.attribute=function(t){return function(n){return new e(n,t).value()}},o})),i("formats/kml/util/KmlElementsFactory",["./KmlNodeTransformers"],(function(e){"use strict";var t=function(e){this.options=e||{},this.options.controls=this.options.controls||[]};t.prototype.specific=function(e,t){var n=e.node,r=null,i=this;return[].forEach.call(n.childNodes,(function(n){n.nodeName==t.name&&(r=t.transformer(n,e,i.options.controls))})),r},t.prototype.any=function(t,n){var r=t.node,i=null,o=this;return[].forEach.call(r.childNodes,(function(r){-1!=n.name.indexOf(r.nodeName)&&(i=e.kmlObject(r,t,o.options.controls))})),i},t.prototype.all=function(t){var n=t.node,r=[],i=this;return[].forEach.call(n.childNodes,(function(n){var o=e.kmlObject(n,t,i.options.controls);o&&r.push(o)})),r};var n=new t;return t.applicationWide=function(){return n},t})),i("formats/kml/util/KmlTreeKeyValueCache",["../../../util/WWUtil"],(function(e){"use strict";var t=function(){this.map={}};t.prototype.add=function(e,t,n){this.map[e]||(this.map[e]={}),this.map[e][t]=n},t.prototype.value=function(t,n){if(!this.map[t])return null;if(-1==n.indexOf("#")){var r=this.level(t);for(var i in r)if(r.hasOwnProperty(i)&&e.startsWith(i,n))return r[i]}return this.map[t][n]||null},t.prototype.level=function(e){return this.map[e]},t.prototype.remove=function(e,t){delete this.map[e][t]};var n=new t;return t.applicationLevelCache=function(){return n},t})),i("formats/kml/util/KmlElementsFactoryCached",["./KmlAttribute","./KmlElementsFactory","./KmlTreeKeyValueCache","../../../util/WWUtil"],(function(e,t,n,r){"use strict";var i=function(e){this.internalFactory=new t(e),this.cache=n.applicationLevelCache()};i.prototype.all=function(e){var t=e.node,n=this.cache.level(this.cacheKey(e.node,"All"));if(n){var r=[];for(var i in n)n.hasOwnProperty(i)&&r.push(n[i]);return r}var o=this.internalFactory.all(e);if(o&&o.length){var a=this;o.forEach((function(e){a.cache.add(a.cacheKey(t,"All"),a.cacheKey(e.node),e)}))}return o},i.prototype.specific=function(e,t){var n=e.node,r=t.name;t.attribute&&(r=t.attribute+r);var i=this.cache.value(this.cacheKey(n),r);if(i)return i;var o=this.internalFactory.specific(e,t);return o&&o.node?this.cache.add(this.cacheKey(n),this.cacheKey(o.node),o):o&&this.cache.add(this.cacheKey(n),r,o),o},i.prototype.any=function(e,t){var n,r=e.node,i=this,o=null;if(t.name.forEach((function(e){(n=i.cache.value(i.cacheKey(r),e))&&(o=n)})),o)return o;var a=this.internalFactory.any(e,t);return a&&this.cache.add(i.cacheKey(r),i.cacheKey(a.node),a),a},i.prototype.cacheKey=function(t,n){var i=new e(t,"id");i.exists()||i.save(r.guid());var o=t.nodeName+"#"+i.value();return n&&(o=n+o),o};var o=new i;return i.applicationWide=function(){return o},i})),function(){"use strict";function o(e){return"function"==typeof e}function a(){return function(){setTimeout(s,1)}}function s(){for(var e=0;e<x;e+=2)(0,O[e])(O[e+1]),O[e]=void 0,O[e+1]=void 0;x=0}function u(){}function l(e,t){if(t.constructor===e.constructor)!function(e,t){t._state===P?f(e,t._result):t._state===k?d(e,t._result):p(t,void 0,(function(t){c(e,t)}),(function(t){d(e,t)}))}(e,t);else{var n=function(e){try{return e.then}catch(e){return N.error=e,N}}(t);n===N?d(e,N.error):void 0===n?f(e,t):o(n)?function(e,t,n){S((function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?c(e,n):f(e,n))}),(function(t){r||(r=!0,d(e,t))}),e._label);!r&&i&&(r=!0,d(e,i))}),e)}(e,t,n):f(e,t)}}function c(e,t){e===t?d(e,new TypeError("You cannot resolve a promise with itself")):function(e){return"function"==typeof e||"object"==typeof e&&null!==e}(t)?l(e,t):f(e,t)}function h(e){e._onerror&&e._onerror(e._result),m(e)}function f(e,t){e._state===I&&(e._result=t,e._state=P,0!==e._subscribers.length&&S(m,e))}function d(e,t){e._state===I&&(e._state=k,e._result=t,S(h,e))}function p(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+P]=n,i[o+k]=r,0===o&&e._state&&S(m,e)}function m(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?A(n,r,i,o):i(o);e._subscribers.length=0}}function g(){this.error=null}function A(e,t,n,r){var i,a,s,u,l=o(n);if(l){if((i=function(e,t){try{return e(t)}catch(e){return D.error=e,D}}(n,r))===D?(u=!0,a=i.error,i=null):s=!0,t===i)return void d(t,new TypeError("A promises callback cannot return that same promise."))}else i=r,s=!0;t._state!==I||(l&&s?c(t,i):u?d(t,a):e===P?f(t,i):e===k&&d(t,i))}function v(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(u),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?f(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&f(n.promise,n._result))):d(n.promise,n._validationError())}function y(e){this._id=U++,this._state=void 0,this._result=void 0,this._subscribers=[],u!==e&&(o(e)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof y||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(e,t){try{t((function(t){c(e,t)}),(function(t){d(e,t)}))}catch(t){d(e,t)}}(this,e))}var b,_,w,E=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},x=0,S=function(e,t){O[x]=e,O[x+1]=t,2===(x+=2)&&(_?_(s):w())},T="undefined"!=typeof window?window:void 0,M=T||{},L=M.MutationObserver||M.WebKitMutationObserver,C="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),R="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,O=new Array(1e3);w=C?function(){t.nextTick(s)}:L?function(){var e=0,t=new L(s),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():R?function(){var e=new MessageChannel;return e.port1.onmessage=s,function(){e.port2.postMessage(0)}}():void 0===T&&"function"==typeof r?function(){try{var e=r("vertx");return b=e.runOnLoop||e.runOnContext,function(){b(s)}}catch(n){return a()}}():a();var I=void 0,P=1,k=2,N=new g,D=new g;v.prototype._validateInput=function(e){return E(e)},v.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},v.prototype._init=function(){this._result=new Array(this.length)};var F=v;v.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,i=0;n._state===I&&i<t;i++)e._eachEntry(r[i],i)},v.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;!function(e){return"object"==typeof e&&null!==e}(e)?(n._remaining--,n._result[t]=e):e.constructor===r&&e._state!==I?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t)},v.prototype._settledAt=function(e,t,n){var r=this,i=r.promise;i._state===I&&(r._remaining--,e===k?d(i,n):r._result[t]=n),0===r._remaining&&f(i,r._result)},v.prototype._willSettleAt=function(e,t){var n=this;p(e,void 0,(function(e){n._settledAt(P,t,e)}),(function(e){n._settledAt(k,t,e)}))};var j=function(e){return new F(this,e).promise},B=function(e){function t(e){c(r,e)}function n(e){d(r,e)}var r=new this(u);if(!E(e))return d(r,new TypeError("You must pass an array to race.")),r;for(var i=e.length,o=0;r._state===I&&o<i;o++)p(this.resolve(e[o]),void 0,t,n);return r},V=function(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(u);return c(t,e),t},G=function(e){var t=new this(u);return d(t,e),t},U=0,q=y;y.all=j,y.race=B,y.resolve=V,y.reject=G,y._setScheduler=function(e){_=e},y._setAsap=function(e){S=e},y._asap=S,y.prototype={constructor:y,then:function(e,t){var n=this,r=n._state;if(r===P&&!e||r===k&&!t)return this;var i=new this.constructor(u),o=n._result;if(r){var a=arguments[r-1];S((function(){A(r,i,a,o)}))}else p(n,i,e,t);return i},catch:function(e){return this.then(null,e)}};var W=function(){var e;if("undefined"!=typeof H)e=H;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=q)},z={Promise:q,polyfill:W};"function"==typeof i&&i.amd?i("util/es6-promise",[],(function(){return z})):e.exports?e.exports=z:"undefined"!=typeof this&&(this.ES6Promise=z);var H={};W()}.call(this),i("util/Promise",["./es6-promise"],(function(e){"use strict";return window.Promise?window.Promise:e.Promise})),i("formats/kml/KmlObject",["../../error/ArgumentError","./util/KmlAttribute","./KmlElements","./util/KmlElementsFactoryCached","../../util/Logger","../../util/Promise","../../render/Renderable"],(function(e,t,n,r,i,o,a){"use strict";var s=function(t){if(a.call(this),!(t=t||{}).objectNode)throw new e(i.logMessage(i.LEVEL_SEVERE,"KmlObject","constructor","Passed node isn't defined."));this._node=t.objectNode,this._cache={},this._controls=t.controls||[],this._factory=new r({controls:this._controls}),this.hook(this._controls,t)};return s.prototype=Object.create(a.prototype),Object.defineProperties(s.prototype,{id:{get:function(){return new t(this.node,"id").value()}},node:{get:function(){return this._node}}}),s.prototype.hook=function(e,t){var n=this;e.forEach((function(e){e.hook(n,t)}))},s.prototype.render=function(e){},s.prototype.getTagNames=function(){return[]},s})),i("formats/kml/KmlTimePrimitive",["./KmlObject"],(function(e){"use strict";var t=function(t){e.call(this,t)};return(t.prototype=Object.create(e.prototype)).timeRange=function(){var e,t;return this.kmlBegin&&(t=e=this.kmlBegin.valueOf()),this.kmlEnd&&(t=this.kmlEnd.valueOf(),e||(e=t)),this.kmlWhen&&(t=e=this.kmlWhen.valueOf()),{from:e,to:t}},t.prototype.getTagNames=function(){return["TimeSpan","TimeStamp"]},t})),i("formats/kml/KmlAbstractView",["./KmlObject","./KmlElements","./KmlTimePrimitive"],(function(e,t,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlTimePrimitive:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}}}),r.prototype.getTagNames=function(){return["Camera","LookAt"]},r})),i("formats/kml/styles/KmlSubStyle",["./../KmlObject"],(function(e){"use strict";var t=function(t){e.call(this,t)};return(t.prototype=Object.create(e.prototype)).getTagNames=function(){return["LineStyle","PolyStyle","IconStyle","LabelStyle","BalloonStyle","ListStyle"]},t})),i("formats/kml/styles/KmlBalloonStyle",["../KmlElements","./KmlSubStyle","../util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlBgColor:{get:function(){return this._factory.specific(this,{name:"bgColor",transformer:n.string})}},kmlTextColor:{get:function(){return this._factory.specific(this,{name:"textColor",transformer:n.string})}},kmlText:{get:function(){return this._factory.specific(this,{name:"text",transformer:n.string})}},kmlDisplayMode:{get:function(){return this._factory.specific(this,{name:"displayMode",transformer:n.string})}}}),r.update=function(){},r.prototype.getTagNames=function(){return["BalloonStyle"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlCamera",["./KmlElements","./KmlAbstractView","./util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlLongitude:{get:function(){return this._factory.specific(this,{name:"longitude",transformer:n.string})}},kmlLatitude:{get:function(){return this._factory.specific(this,{name:"latitude",transformer:n.string})}},kmlAltitude:{get:function(){return this._factory.specific(this,{name:"altitude",transformer:n.string})}},kmlHeading:{get:function(){return this._factory.specific(this,{name:"heading",transformer:n.string})}},kmlTilt:{get:function(){return this._factory.specific(this,{name:"tilt",transformer:n.string})}},kmlRoll:{get:function(){return this._factory.specific(this,{name:"roll",transformer:n.string})}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["Camera"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/util/KmlChange",["../KmlElements","../KmlObject"],(function(e,t){var n=function(e){t.call(this,e)};return n.prototype=Object.create(t.prototype),Object.defineProperties(n.prototype,{shapes:{get:function(){return this._factory.all(this)}}}),n.prototype.getTagNames=function(){return["Change"]},e.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/styles/KmlColorStyle",["./KmlSubStyle","../util/KmlNodeTransformers"],(function(e,t){"use strict";var n=function(t){e.call(this,t)};return n.prototype=Object.create(e.prototype),Object.defineProperties(n.prototype,{kmlColor:{get:function(){return this._factory.specific(this,{name:"color",transformer:t.string})}},kmlColorMode:{get:function(){return this._factory.specific(this,{name:"colorMode",transformer:t.string})}}}),n.prototype.getTagNames=function(){return["LineStyle","PolyStyle","IconStyle","LabelStyle"]},n})),i("formats/kml/KmlFileCache",[],(function(){"use strict";var e=function(){this._rootFile=null,this._map={}};return e.prototype.retrieve=function(e){if(0!=e.indexOf("kmz;")&&0!=e.indexOf("href;")&&(0==e.indexOf("#")||null==e||0!=e.indexOf("http")))return this._rootFile;var t=e;return-1!=e.indexOf("#")&&(t=e.substr(0,e.indexOf("#")-1)),this._map[t]?this._map[t]:null},e.prototype.add=function(e,t,n){n?this._rootFile=t:this._map[e]=t},e})),i("formats/kml/styles/KmlStyleSelector",["./../KmlObject"],(function(e){"use strict";var t=function(t){e.call(this,t)};return(t.prototype=Object.create(e.prototype)).getTagNames=function(){return["Style","StyleMap"]},t})),i("formats/kml/styles/KmlPolyStyle",["../../../util/Color","./KmlColorStyle","./../KmlElements","../util/KmlNodeTransformers"],(function(e,t,n,r){"use strict";var i=function(e){t.call(this,e)};return i.prototype=Object.create(t.prototype),Object.defineProperties(i.prototype,{kmlFill:{get:function(){return this._factory.specific(this,{name:"fill",transformer:r.boolean})}},kmlOutline:{get:function(){return this._factory.specific(this,{name:"outline",transformer:r.boolean})}}}),i.update=function(t,n){t=t||{};var r=n||{};return r._drawInterior=t.kmlFill||!0,r._drawOutline=t.kmlOutline||!1,r._outlineColor=n._outlineColor||e.WHITE,r._interiorColor=t.kmlColor&&e.colorFromKmlHex(t.kmlColor)||e.WHITE,r._colorMode=t.kmlColorMode||"normal",r},i.prototype.getTagNames=function(){return["PolyStyle"]},n.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/util/KmlHrefResolver",["../../../util/Promise","../../../util/WWUtil"],(function(e,t){var n=function(e,t){this._url=e,this._fileCache=t};return n.prototype.url=function(){if(t.startsWith(this._url,"http://")||t.startsWith(this._url,"https://"))return this._url;var e=this._fileCache.retrieve("kmz;"+this._url);return e||(e=this._fileCache.retrieve("href;"+this._url))||this._url},n})),i("formats/kml/KmlLink",["./util/KmlHrefResolver","./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(e,t,n,r){"use strict";var i=function(e){n.call(this,e),this.onChangeListeners=[]};return i.prototype=Object.create(n.prototype),Object.defineProperties(i.prototype,{kmlRefreshMode:{get:function(){return this._factory.specific(this,{name:"refreshMode",transformer:r.string})}},kmlRefreshInterval:{get:function(){return this._factory.specific(this,{name:"refreshInterval",transformer:r.number})}},kmlViewRefreshMode:{get:function(){return this._factory.specific(this,{name:"viewRefreshMode",transformer:r.string})}},kmlViewRefreshTime:{get:function(){return this._factory.specific(this,{name:"viewRefreshTime",transformer:r.number})}},kmlViewBoundScale:{get:function(){return this._factory.specific(this,{name:"viewBoundScale",transformer:r.number})}},kmlViewFormat:{get:function(){return this._factory.specific(this,{name:"viewFormat",transformer:r.string})}},kmlHttpQuery:{get:function(){return this._factory.specific(this,{name:"httpQuery",transformer:r.string})}}}),i.prototype.kmlHref=function(t){return new e(this._factory.specific(this,{name:"href",transformer:r.string}),t).url()},i.prototype.getTagNames=function(){return["Link"]},t.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/KmlIcon",["./KmlLink","./KmlElements","./util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlX:{get:function(){return this._factory.specific(this,{name:"gx:x",transformer:n.number})}},kmlY:{get:function(){return this._factory.specific(this,{name:"gx:y",transformer:n.number})}},kmlW:{get:function(){return this._factory.specific(this,{name:"gx:w",transformer:n.number})}},kmlH:{get:function(){return this._factory.specific(this,{name:"gx:h",transformer:n.number})}}}),r.prototype.getTagNames=function(){return["Icon"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/styles/KmlIconStyle",["./KmlColorStyle","./../KmlElements","../KmlIcon","../util/KmlNodeTransformers"],(function(e,t,n,r){"use strict";var i=function(t){e.call(this,t)};return i.prototype=Object.create(e.prototype),Object.defineProperties(i.prototype,{kmlScale:{get:function(){return this._factory.specific(this,{name:"scale",transformer:r.number})}},kmlHeading:{get:function(){return this._factory.specific(this,{name:"heading",transformer:r.number})}},kmlIcon:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}},kmlHotSpotX:{get:function(){return this._factory.specific(this,{name:"hotSpot",transformer:r.attribute("x")})}},kmlHotSpotY:{get:function(){return this._factory.specific(this,{name:"hotSpot",transformer:r.attribute("y")})}},kmlHotSpotXUnits:{get:function(){return this._factory.specific(this,{name:"hotSpot",transformer:r.attribute("xunits")})}},kmlHotSpotYUnits:{get:function(){return this._factory.specific(this,{name:"hotSpot",transformer:r.attribute("yunits")})}}}),i.update=function(e,t,n){e=e||{};var r=t||{};return r._imageScale=e.kmlScale||1,r._imageSource=e.kmlIcon&&e.kmlIcon.kmlHref(n)||null,r},i.prototype.getTagNames=function(){return["IconStyle"]},t.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/styles/KmlLabelStyle",["./KmlColorStyle","../KmlElements","../util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlScale:{get:function(){return this._factory.specific(this,{name:"scale",transformer:n.number})}}}),r.update=function(){},r.prototype.getTagNames=function(){return["LabelStyle"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/styles/KmlLineStyle",["../../../util/Color","./KmlColorStyle","./../KmlElements","../util/KmlNodeTransformers"],(function(e,t,n,r){"use strict";var i=function(e){t.call(this,e)};return i.prototype=Object.create(t.prototype),Object.defineProperties(i.prototype,{kmlWidth:{get:function(){return this._factory.specific(this,{name:"width",transformer:r.number})}},kmlOuterColor:{get:function(){return this._factory.specific(this,{name:"gx:outerColor",transformer:r.string})}},kmlOuterWidth:{get:function(){return this._factory.specific(this,{name:"gx:outerWidth",transformer:r.number})}},kmlPhysicalWidth:{get:function(){return this._factory.specific(this,{name:"gx:physicalWidth",transformer:r.number})}},kmlLabelVisibility:{get:function(){return this._factory.specific(this,{name:"gx:labelVisibility",transformer:r.boolean})}}}),i.update=function(t,n){var r=n||{};return t=t||{},r._outlineColor=t.kmlColor&&e.colorFromKmlHex(t.kmlColor)||e.WHITE,r._outlineWidth=t.kmlWidth||10,r},i.prototype.getTagNames=function(){return["LineStyle"]},n.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/util/KmlItemIcon",["./KmlHrefResolver","./../KmlElements","../KmlObject","./KmlNodeTransformers"],(function(e,t,n,r){"use strict";var i=function(e){n.call(this,e)};return i.prototype=Object.create(n.prototype),Object.defineProperties(i.prototype,{kmlState:{get:function(){return this._factory.specific(this,{name:"state",transformer:r.string})}}}),i.prototype.kmlHref=function(t){return new e(this._factory.specific(this,{name:"href",transformer:r.string}),t).url()},i.prototype.getTagNames=function(){return["ItemIcon"]},t.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/styles/KmlListStyle",["../util/KmlItemIcon","../KmlElements","./KmlSubStyle","../util/KmlNodeTransformers"],(function(e,t,n,r){"use strict";var i=function(e){n.call(this,e)};return i.prototype=Object.create(n.prototype),Object.defineProperties(i.prototype,{kmlBgColor:{get:function(){return this._factory.specific(this,{name:"bgColor",transformer:r.string})}},kmlListItemType:{get:function(){return this._factory.specific(this,{name:"listItemType",transformer:r.string})}},kmlItemIcon:{get:function(){return this._factory.any(this,{name:e.prototype.getTagNames()})}}}),i.update=function(){},i.prototype.getTagNames=function(){return["ListStyle"]},t.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/styles/KmlStyle",["../../../util/Color","../../../util/Font","./KmlStyleSelector","./../KmlElements","./KmlPolyStyle","./KmlIconStyle","./KmlLabelStyle","./KmlLineStyle","./KmlListStyle","./KmlBalloonStyle","../../../util/Offset","../../../util/Promise","../../../shapes/ShapeAttributes","../../../shapes/TextAttributes"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d){"use strict";var p=function(e){n.call(this,e)};return p.prototype=Object.create(n.prototype),Object.defineProperties(p.prototype,{kmlIconStyle:{get:function(){return this._factory.any(this,{name:o.prototype.getTagNames()})}},kmlLabelStyle:{get:function(){return this._factory.any(this,{name:a.prototype.getTagNames()})}},kmlLineStyle:{get:function(){return this._factory.any(this,{name:s.prototype.getTagNames()})}},kmlPolyStyle:{get:function(){return this._factory.any(this,{name:i.prototype.getTagNames()})}},kmlBalloonStyle:{get:function(){return this._factory.any(this,{name:l.prototype.getTagNames()})}},kmlListStyle:{get:function(){return this._factory.any(this,{name:u.prototype.getTagNames()})}}}),p.prototype.generate=function(e,t){e=e||{};var n=this||{};return n.kmlIconStyle&&o.update(n.kmlIconStyle,e,t),n.kmlListStyle&&u.update(n.kmlListStyle,e),n.kmlBalloonStyle&&l.update(n.kmlBalloonStyle,e),n.kmlLabelStyle&&a.update(n.kmlLabelStyle,e),n.kmlPolyStyle&&i.update(n.kmlPolyStyle,e),n.kmlLineStyle&&s.update(n.kmlLineStyle,e),e},p.prototype.getStyle=function(){var e=this;return new h((function(t){window.setTimeout((function(){t(e)}),0)}))},p.prototype.getTagNames=function(){return["Style"]},r.addKey(p.prototype.getTagNames()[0],p),p.placemarkAttributes=function(t){return(t=t||{})._imageColor=t._imageColor||new e(1,1,1,1),t._imageOffset=t._imageOffset||new c(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,.5),t._imageScale=t._imageScale||1,t._imageSource=t._imageSource||null,t._depthTest=t._depthTest||!0,t._labelAttributes=t._labelAttributes||new d(p.textAttributes()),t._drawLeaderLine=t._drawLeaderLine||!1,t._leaderLineAttributes=t._leaderLineAttributes||new f(p.shapeAttributes()),t},p.textAttributes=function(n){return(n=n||{})._color=n._color||new e(1,1,1,1),n._font=n._font||new t(14),n._offset=n._offset||new c(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,0),n._scale=n._scale||1,n._depthTest=n._depthTest||!1,n._outlineColor=n._outlineColor||e.RED,n},p.shapeAttributes=function(t){return(t=t||{})._drawInterior=t._drawInterior||!0,t._drawOutline=t._drawOutline||!0,t._enableLighting=t._enableLighting||!1,t._interiorColor=t._interiorColor||e.WHITE,t._outlineColor=t._outlineColor||e.RED,t._outlineWidth=t._outlineWidth||1,t._outlineStippleFactor=t._outlineStippleFactor||0,t._outlineStipplePattern=t._outlineStipplePattern||61680,t._imageSource=t._imageSource||null,t._depthTest=t._depthTest||!0,t._drawVerticals=t._drawVerticals||!1,t._applyLighting=t._applyLighting||!1,t},p.default=function(){return new p({objectNode:document.createElement("Style")})},p})),i("formats/kml/util/KmlPair",["./../KmlElements","../KmlObject","../styles/KmlStyleSelector","./KmlNodeTransformers"],(function(e,t,n,r){"use strict";var i=function(e){t.call(this,e)};return i.prototype=Object.create(t.prototype),Object.defineProperties(i.prototype,{kmlKey:{get:function(){return this._factory.specific(this,{name:"key",transformer:r.string})}},kmlStyleUrl:{get:function(){return this._factory.specific(this,{name:"styleUrl",transformer:r.string})}},kmlStyleSelector:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}}}),i.prototype.getTagNames=function(){return["Pair"]},i.prototype.getStyle=function(e){return e.handleRemoteStyle(this.kmlStyleUrl,this.kmlStyleSelector)},e.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/styles/KmlStyleMap",["../KmlElements","./KmlSubStyle","../util/KmlPair","../../../util/Promise"],(function(e,t,n,r){"use strict";var i=function(e){t.call(this,e)};return i.prototype=Object.create(t.prototype),Object.defineProperties(i.prototype,{kmlPairs:{get:function(){return this._factory.all(this)}},isMap:{get:function(){return!0}}}),i.prototype.resolve=function(e){var t={},n=this.kmlPairs.map((function(n){var r=n.kmlKey;return n.getStyle(e).then((function(e){t[r]=e.normal}))}));return r.all(n).then((function(){return t.normal||(t.normal=null),t.highlight||(t.highlight=null),t}))},i.prototype.getTagNames=function(){return["StyleMap"]},e.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/KmlTimeSpan",["./KmlElements","./KmlTimePrimitive","./util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){e.isTimeSpan=!0,t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlBegin:{get:function(){return this._factory.specific(this,{name:"begin",transformer:n.date})}},kmlEnd:{get:function(){return this._factory.specific(this,{name:"end",transformer:n.date})}}}),r.prototype.getTagNames=function(){return["TimeSpan"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlTimeStamp",["./KmlElements","./KmlTimePrimitive","./util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){e.isTimeStamp=!0,t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlWhen:{get:function(){return this._factory.specific(this,{name:"when",transformer:n.date})}}}),r.prototype.getTagNames=function(){return["TimeStamp"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("util/jszip",[],(function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=104)}([function(e,t,n){"use strict";function r(e){return e}function i(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}function o(e){var n=65536,r=t.getTypeOf(e),i=!0;if("uint8array"===r?i=f.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=f.applyCanBeUsed.nodebuffer),i)for(;n>1;)try{return f.stringifyByChunk(e,r,n)}catch(e){n=Math.floor(n/2)}return f.stringifyByChar(e)}function a(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}var s=n(3),u=n(44),l=n(12),c=n(88),h=n(8);t.newBlob=function(e,n){t.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&1===String.fromCharCode.apply(null,l.allocBuffer(1)).length}catch(e){return!1}}()}};t.applyFromCharCode=o;var d={};d.string={string:r,array:function(e){return i(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return i(e,new Uint8Array(e.length))},nodebuffer:function(e){return i(e,l.allocBuffer(e.length))}},d.array={string:o,array:r,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return l.newBufferFrom(e)}},d.arraybuffer={string:function(e){return o(new Uint8Array(e))},array:function(e){return a(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:r,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return l.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:o,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:r,nodebuffer:function(e){return l.newBufferFrom(e)}},d.nodebuffer={string:o,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return a(e,new Uint8Array(e.length))},nodebuffer:r},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return d[r][e](n)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":s.nodebuffer&&l.isBuffer(e)?"nodebuffer":s.uint8array&&e instanceof Uint8Array?"uint8array":s.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!s[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},t.delay=function(e,t,n){c((function(){e.apply(n||null,t||[])}))},t.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},t.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},t.prepareContent=function(e,n,r,o,a){return h.Promise.resolve(n).then((function(e){return s.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new h.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(n){var l=t.getTypeOf(n);return l?("arraybuffer"===l?n=t.transformTo("uint8array",n):"string"===l&&(a?n=u.decode(n):r&&!0!==o&&(n=function(e){return i(e,s.uint8array?new Uint8Array(e.length):new Array(e.length))}(n))),n):h.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},e.exports=r},function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},function(e,t,n){"use strict";(function(e){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),t.blob=0===i.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!n(50).Readable}catch(e){t.nodestream=!1}}).call(this,n(10).Buffer)},function(e,t,n){"use strict";function r(e){return this instanceof r?(l.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||a.nextTick(o,this)}function o(e){e.end()}var a=n(14),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var u=n(9);u.inherits=n(6);var l=n(49),c=n(21);u.inherits(r,l);for(var h=s(c.prototype),f=0;f<h.length;f++){var d=h[f];r.prototype[d]||(r.prototype[d]=c.prototype[d])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function r(){u.call(this,"utf-8 decode"),this.leftOver=null}function i(){u.call(this,"utf-8 encode")}for(var o=n(0),a=n(3),s=n(12),u=n(1),l=new Array(256),c=0;c<256;c++)l[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;l[254]=l[254]=1,t.utf8encode=function(e){return a.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,n,r,i,o,s=e.length,u=0;for(i=0;i<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=a.uint8array?new Uint8Array(u):new Array(u),o=0,i=0;o<u;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}(e)},t.utf8decode=function(e){return a.nodebuffer?o.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,r,i,a=e.length,s=new Array(2*a);for(n=0,t=0;t<a;)if((r=e[t++])<128)s[n++]=r;else if((i=l[r])>4)s[n++]=65533,t+=i-1;else{for(r&=2===i?31:3===i?15:7;i>1&&t<a;)r=r<<6|63&e[t++],i--;i>1?s[n++]=65533:r<65536?s[n++]=r:(r-=65536,s[n++]=55296|r>>10&1023,s[n++]=56320|1023&r)}return s.length!==n&&(s.subarray?s=s.subarray(0,n):s.length=n),o.applyFromCharCode(s)}(e=o.transformTo(a.uint8array?"uint8array":"array",e))},o.inherits(r,u),r.prototype.processChunk=function(e){var n=o.transformTo(a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var r=n;(n=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),n.set(r,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var i=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+l[e[n]]>t?n:t}(n),s=n;i!==n.length&&(a.uint8array?(s=n.subarray(0,i),this.leftOver=n.subarray(i,n.length)):(s=n.slice(0,i),this.leftOver=n.slice(i,n.length))),this.push({data:t.utf8decode(s),meta:e.meta})},r.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=r,o.inherits(i,u),i.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=i},function(e,t,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:n(74),e.exports={Promise:r}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(10).Buffer)},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=o.prototype:(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t).__proto__=o.prototype:e=l(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),a=(e=i(e,r)).write(t,n);return a!==r&&(e=e.slice(0,a)),e}(e,t,n):function(e,t){if(o.isBuffer(t)){var n=0|c(t.length);return 0===(e=i(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?i(e,0):l(e,t);if("Buffer"===t.type&&V(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(s(t),e=i(e,t<0?0:0|c(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t){var n=t.length<0?0:0|c(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function c(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function h(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return D(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function d(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:p(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):p(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function p(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var a,s=1,u=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,u/=2,l/=2,n/=2}if(i){var c=-1;for(a=n;a<u;a++)if(o(e,a)===o(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*s}else-1!==c&&(a-=a-c),c=-1}else for(n+l>u&&(n=u-l),a=n;a>=0;a--){for(var h=!0,f=0;f<l;f++)if(o(e,a+f)!==o(t,f)){h=!1;break}if(h)return a}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function g(e,t,n,r){return F(N(t,e.length-n),e,n,r)}function A(e,t,n,r){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function v(e,t,n,r){return A(e,t,n,r)}function y(e,t,n,r){return F(D(t),e,n,r)}function b(e,t,n,r){return F(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function _(e,t,n){return 0===t&&n===e.length?j.fromByteArray(e):j.fromByteArray(e.slice(t,n))}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,l=e[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(e){var t=e.length;if(t<=G)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=G));return n}(r)}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function S(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=k(e[o]);return i}function T(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function C(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function O(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,n,r,i){return i||O(e,0,n,4),B.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,i){return i||O(e,0,n,8),B.write(e,t,n,r,52,8),n+8}function k(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function D(e){return j.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}var j=n(102),B=n(101),V=n(51);t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return function(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}(null,e,t,n)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!V(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?w(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return S(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return _(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(a,s),l=this.slice(r,i),c=e.slice(t,n),h=0;h<u;++h)if(l[h]!==c[h]){a=l[h],s=c[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return d(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return d(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return g(this,e,t,n);case"ascii":return A(this,e,t,n);case"latin1":case"binary":return v(this,e,t,n);case"base64":return y(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var G=4096;o.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),o.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),B.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),B.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),B.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),B.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:N(new o(e,r).toString()),u=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var U=/[^+\/0-9A-Za-z-_]/g}).call(this,n(5))},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";(function(t){e.exports={isNode:void 0!==t,newBufferFrom:function(e,n){return new t(e,n)},allocBuffer:function(e){return t.alloc?t.alloc(e):new t(e)},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,n(10).Buffer)},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}var o=n(10),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=i),r(a,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,n){"use strict";(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,n(15))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(){p&&f&&(p=!1,f.length?d=f.concat(d):m=-1,d.length&&a())}function a(){if(!p){var e=i(o);p=!0;for(var t=d.length;t;){for(f=d,d=[];++m<t;)f&&f[m].run();m=-1,t=d.length}f=null,p=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,c,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var f,d=[],p=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new s(e,t)),1!==d.length||p||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";var r=n(0),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,a=0+n;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length):function(e,t,n,r){var o=i,a=0+n;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length):0}},function(e,t,n){"use strict";function r(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}var i=n(8),o=n(37),a=n(36),s=n(35);a=n(36),r.prototype={getContentWorker:function(){var e=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},r.createWorkerFrom=function(e,t,n){return e.pipe(new s).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},e.exports=r},function(e,t,n){e.exports=!n(41)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";(function(t,r,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(void 0),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}function a(){}function s(e,t){g=g||n(4),e=e||{};var r=t instanceof g;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,a=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(m.nextTick(i,r),m.nextTick(p,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),p(e,t))}(e,n,r,t,i);else{var o=f(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||h(e,n),r?A(c,e,n,o,i):c(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function u(e){return g=g||n(4),y.call(u,this)||this instanceof g?(this._writableState=new s(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),void _.call(this)):new u(e)}function l(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function c(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),p(e,t)}function h(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,l(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,h=n.encoding,f=n.callback;if(l(e,t,!1,t.objectMode?1:c.length,c,h,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function f(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function d(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),p(e,t)}))}function p(e,t){var n=f(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,m.nextTick(d,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}var m=n(14);e.exports=u;var g,A=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:m.nextTick;u.WritableState=s;var v=n(9);v.inherits=n(6);var y,b={deprecate:n(94)},_=n(48),w=n(13).Buffer,E=i.Uint8Array||function(){},x=n(47);v.inherits(u,_),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,"buffer",{get:b.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!y.call(this,e)||this===u&&e&&e._writableState instanceof s}})):y=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&function(e){return w.isBuffer(e)||e instanceof E}(e);return o&&!w.isBuffer(e)&&(e=function(e){return w.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=a),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),m.nextTick(t,n)}(this,n):(o||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),m.nextTick(r,o),i=!1),i}(this,r,e,n))&&(r.pendingcb++,i=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=w.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else l(e,t,!1,s,r,i,o);return u}(this,r,o,e,t,n)),i},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||h(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),u.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,p(e,t),n&&(t.finished?m.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=x.destroy,u.prototype._undestroy=x.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(15),n(96).setImmediate,n(5))},function(e,t,n){(t=e.exports=n(49)).Stream=t,t.Readable=t,t.Writable=n(21),t.Duplex=n(4),t.Transform=n(45),t.PassThrough=n(93)},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(l=n.slice()).length,u=0;u<a;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function r(e){i.call(this,e)}var i=n(26);n(0).inherits(r,i),r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";function r(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}var i=n(0);r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}var i=n(25);n(0).inherits(r,i),r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(26),a=n(54),s=n(53),u=n(24);e.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new u(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},function(e,t,n){"use strict";t.LOCAL_FILE_HEADER="PK\x03\x04",t.CENTRAL_FILE_HEADER="PK\x01\x02",t.CENTRAL_DIRECTORY_END="PK\x05\x06",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",t.DATA_DESCRIPTOR="PK\x07\b"},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var i=n(2),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new i.Buf8(256),u=0;u<256;u++)s[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;s[254]=s[254]=1,t.string2buf=function(e){var t,n,r,o,a,s=e.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return r(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,i,o,a,u=t||e.length,l=new Array(2*u);for(i=0,n=0;n<u;)if((o=e[n++])<128)l[i++]=o;else if((a=s[o])>4)l[i++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<u;)o=o<<6|63&e[n++],a--;a>1?l[i++]=65533:o<65536?l[i++]=o:(o-=65536,l[i++]=55296|o>>10&1023,l[i++]=56320|1023&o)}return r(l,i)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(e,t,n){"use strict";var r=n(1);t.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=n(68)},function(e,t,n){"use strict";function r(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var i=n(1),o=n(17);n(0).inherits(r,i),r.prototype.processChunk=function(e){this.streamInfo.crc32=o(e.data,this.streamInfo.crc32||0),this.push(e)},e.exports=r},function(e,t,n){"use strict";function r(e){o.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}var i=n(0),o=n(1);i.inherits(r,o),r.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}o.prototype.processChunk.call(this,e)},e.exports=r},function(e,t,n){"use strict";function r(e){o.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}var i=n(0),o=n(1);i.inherits(r,o),r.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=r},function(e,t,n){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},function(e,t,n){"use strict";(function(t){function r(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,i.checkSupport(r),this._worker=e.pipe(new o(r)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}var i=n(0),o=n(72),a=n(1),s=n(44),u=n(3),l=n(8),c=null;if(u.nodestream)try{c=n(71)}catch(e){}r.prototype={accumulate:function(e){return function(e,n){return new l.Promise((function(r,o){var a=[],u=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,t){a.push(e),n&&n(t)})).on("error",(function(e){a=[],o(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return s.encode(t);default:return i.transformTo(e,t)}}(l,function(e,n){var r,i=0,o=null,a=0;for(r=0;r<n.length;r++)a+=n[r].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(a),r=0;r<n.length;r++)o.set(n[r],i),i+=n[r].length;return o;case"nodebuffer":return t.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}(u,a),c);r(e)}catch(e){o(e)}a=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},e.exports=r}).call(this,n(10).Buffer)},function(e,t,n){var r=n(20),i=n(11).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(85);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n=e.exports={version:"2.3.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";var r=n(0),i=n(3),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var t,n,i,a,s,u,l,c=[],h=0,f=e.length,d=f,p="string"!==r.getTypeOf(e);h<e.length;)d=f-h,p?(t=e[h++],n=h<f?e[h++]:0,i=h<f?e[h++]:0):(t=e.charCodeAt(h++),n=h<f?e.charCodeAt(h++):0,i=h<f?e.charCodeAt(h++):0),a=t>>2,s=(3&t)<<4|n>>4,u=d>1?(15&n)<<2|i>>6:64,l=d>2?63&i:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(u)+o.charAt(l));return c.join("")},t.decode=function(e){var t,n,r,a,s,u,l=0,c=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&f--,e.charAt(e.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|f):new Array(0|f);l<e.length;)t=o.indexOf(e.charAt(l++))<<2|(a=o.indexOf(e.charAt(l++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(l++)))>>2,r=(3&s)<<6|(u=o.indexOf(e.charAt(l++))),h[c++]=t,64!==s&&(h[c++]=n),64!==u&&(h[c++]=r);return h}},function(e,t,n){"use strict";function r(e){return this instanceof r?(a.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",i)):new r(e)}function i(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){o(e,t,n)})):o(this,null,null)}function o(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=r;var a=n(4),s=n(9);s.inherits=n(6),s.inherits(r,a),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},r.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},r.prototype._destroy=function(e,t){var n=this;a.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){"use strict";function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(f.isEncoding===d||!d(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=a,this.end=s,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=u,this.end=l,t=3;break;default:return this.write=c,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function a(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function c(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}var f=n(13).Buffer,d=f.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},r.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=i(t[r]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--r<n||-2===o?0:(o=i(t[r]))>=0?(o>0&&(e.lastNeed=o-2),o):--r<n||-2===o?0:(o=i(t[r]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},r.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},function(e,t,n){"use strict";function r(e,t){e.emit("error",t)}var i=n(14);e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(r,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){e.exports=n(23).EventEmitter},function(e,t,n){"use strict";(function(t,r){function i(e,t){e=e||{};var r=t instanceof(_=_||n(4));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(R||(R=n(46).StringDecoder),this.decoder=new R(e.encoding),this.encoding=e.encoding)}function o(e){return _=_||n(4),this instanceof o?(this._readableState=new i(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),void x.call(this)):new o(e)}function a(e,t,n,r,i){var o,a=e._readableState;return null===t?(a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,l(e)}}(e,a)):(i||(o=function(e,t){var n;return function(e){return S.isBuffer(e)||e instanceof T}(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===S.prototype||(t=function(e){return S.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):s(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?s(e,a,t,!1):h(e,a)):s(e,a,t,!1))):r||(a.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function s(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&l(e)),h(e,t)}function u(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(C("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?b.nextTick(c,e):c(e))}function c(e){C("emit readable"),e.emit("readable"),m(e)}function h(e,t){t.readingMore||(t.readingMore=!0,b.nextTick(f,e,t))}function f(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(C("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function d(e){C("readable nexttick read 0"),e.read(0)}function p(e,t){t.reading||(C("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),m(e),t.flowing&&!t.reading&&e.read(0)}function m(e){var t=e._readableState;for(C("flow",t.flowing);t.flowing&&null!==e.read(););}function g(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(i+=a===o.length?o:o.slice(0,e),0===(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=S.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,b.nextTick(v,t,e))}function v(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function y(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var b=n(14);e.exports=o;var _,w=n(51);o.ReadableState=i,n(23).EventEmitter;var E=function(e,t){return e.listeners(t).length},x=n(48),S=n(13).Buffer,T=t.Uint8Array||function(){},M=n(9);M.inherits=n(6);var L=n(99),C=void 0;C=L&&L.debuglog?L.debuglog("stream"):function(){};var R,O=n(98),I=n(47);M.inherits(o,x);var P=["error","close","destroy","pause","resume"];Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),o.prototype.destroy=I.destroy,o.prototype._undestroy=I.undestroy,o.prototype._destroy=function(e,t){this.push(null),t(e)},o.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=S.from(e,t),t=""),n=!0),a(this,e,t,!1,n)},o.prototype.unshift=function(e){return a(this,e,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(e){return R||(R=n(46).StringDecoder),this._readableState.decoder=new R(e),this._readableState.encoding=e,this};var k=8388608;o.prototype.read=function(e){C("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return C("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):l(this),null;if(0===(e=u(e,t))&&t.ended)return 0===t.length&&A(this),null;var r,i=t.needReadable;return C("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&C("length less than watermark",i=!0),t.ended||t.reading?C("reading or ended",i=!1):i&&(C("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=u(n,t))),null===(r=e>0?g(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==r&&this.emit("data",r),r},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function n(){C("onend"),e.end()}function i(t){C("ondata"),p=!1,!1!==e.write(t)||p||((1===c.pipesCount&&c.pipes===e||c.pipesCount>1&&-1!==y(c.pipes,e))&&!d&&(C("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,p=!0),l.pause())}function o(t){C("onerror",t),u(),e.removeListener("error",o),0===E(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",s),u()}function s(){C("onfinish"),e.removeListener("close",a),u()}function u(){C("unpipe"),l.unpipe(e)}var l=this,c=this._readableState;switch(c.pipesCount){case 0:c.pipes=e;break;case 1:c.pipes=[c.pipes,e];break;default:c.pipes.push(e)}c.pipesCount+=1,C("pipe count=%d opts=%j",c.pipesCount,t);var h=t&&!1===t.end||e===r.stdout||e===r.stderr?u:n;c.endEmitted?b.nextTick(h):l.once("end",h),e.on("unpipe",(function t(r,h){C("onunpipe"),r===l&&h&&!1===h.hasUnpiped&&(h.hasUnpiped=!0,C("cleanup"),e.removeListener("close",a),e.removeListener("finish",s),e.removeListener("drain",f),e.removeListener("error",o),e.removeListener("unpipe",t),l.removeListener("end",n),l.removeListener("end",u),l.removeListener("data",i),d=!0,!c.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}));var f=function(e){return function(){var t=e._readableState;C("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&E(e,"data")&&(t.flowing=!0,m(e))}}(l);e.on("drain",f);var d=!1,p=!1;return l.on("data",i),function(e,t,n){"function"==typeof e.prependListener?e.prependListener(t,n):e._events&&e._events[t]?w(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",o),e.once("close",a),e.once("finish",s),e.emit("pipe",l),c.flowing||(C("pipe resume"),l.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=y(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},o.prototype.on=function(e,t){var n=x.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&l(this):b.nextTick(d,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(C("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,b.nextTick(p,e,t))}(this,e)),this},o.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(C("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){C("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<P.length;o++)e.on(P[o],this.emit.bind(this,P[o]));return this._read=function(t){C("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(o.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),o._fromList=g}).call(this,n(5),n(15))},function(e,t,n){e.exports=n(100)},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";function r(e,t){this.options=e,this.loadOptions=t}var i=n(27),o=n(0),a=n(18),s=n(17),u=n(7),l=n(34),c=n(3);r.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r}},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:u.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:u.utf8decode(t.readData(e.length-5))}return null}},e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e)}var i=n(24);n(0).inherits(r,i),r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e)}var i=n(25);n(0).inherits(r,i),r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";function r(e){this.files=[],this.loadOptions=e}var i=n(27),o=n(0),a=n(28),s=n(52),u=(n(7),n(3));r.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(t)+", expected "+o.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=u.uint8array?"uint8array":"array",n=o.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(r>0)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=r},function(e,t,n){"use strict";function r(e){return new o.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new u);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}var i=n(0),o=n(8),a=n(7),s=(i=n(0),n(55)),u=n(35),l=n(12);e.exports=function(e,t){var n=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(e)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new s(t);return n.load(e),n})).then((function(e){var n=[o.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var a=0;a<i.length;a++)n.push(r(i[a]));return o.Promise.all(n)})).then((function(e){for(var r=e.shift(),i=r.files,o=0;o<i.length;o++){var a=i[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},function(e,t,n){"use strict";function r(e,t){o.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}var i=n(0),o=n(1);i.inherits(r,o),r.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},r.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var i=n(0),o=n(1),a=n(7),s=n(17),u=n(28),l=function(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r},c=function(e,t,n,r,o,c){var h,f,d=e.file,p=e.compression,m=c!==a.utf8encode,g=i.transformTo("string",c(d.name)),A=i.transformTo("string",a.utf8encode(d.name)),v=d.comment,y=i.transformTo("string",c(v)),b=i.transformTo("string",a.utf8encode(v)),_=A.length!==d.name.length,w=b.length!==v.length,E="",x="",S="",T=d.dir,M=d.date,L={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(L.crc32=e.crc32,L.compressedSize=e.compressedSize,L.uncompressedSize=e.uncompressedSize);var C=0;t&&(C|=8),m||!_&&!w||(C|=2048);var R=0,O=0;T&&(R|=16),"UNIX"===o?(O=798,R|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(d.unixPermissions,T)):(O=20,R|=function(e,t){return 63&(e||0)}(d.dosPermissions)),h=M.getUTCHours(),h<<=6,h|=M.getUTCMinutes(),h<<=5,h|=M.getUTCSeconds()/2,f=M.getUTCFullYear()-1980,f<<=4,f|=M.getUTCMonth()+1,f<<=5,f|=M.getUTCDate(),_&&(x=l(1,1)+l(s(g),4)+A,E+="up"+l(x.length,2)+x),w&&(S=l(1,1)+l(s(y),4)+b,E+="uc"+l(S.length,2)+S);var I="";return I+="\n\0",I+=l(C,2),I+=p.magic,I+=l(h,2),I+=l(f,2),I+=l(L.crc32,4),I+=l(L.compressedSize,4),I+=l(L.uncompressedSize,4),I+=l(g.length,2),I+=l(E.length,2),{fileRecord:u.LOCAL_FILE_HEADER+I+g+E,dirRecord:u.CENTRAL_FILE_HEADER+l(O,2)+I+l(y.length,2)+"\0\0\0\0"+l(R,4)+l(r,4)+g+E+y}};i.inherits(r,o),r.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},r.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=c(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},r.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=c(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return u.DATA_DESCRIPTOR+l(e.crc32,4)+l(e.compressedSize,4)+l(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,r=function(e,t,n,r,o){var a=i.transformTo("string",o(r));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(e,2)+l(e,2)+l(t,4)+l(n,4)+l(a.length,2)+a}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},r.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},r.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},e.exports=r},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){"use strict";var r=n(2),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,l,c,h,f){var d,p,m,g,A,v,y,b,_,w=f.bits,E=0,x=0,S=0,T=0,M=0,L=0,C=0,R=0,O=0,I=0,P=null,k=0,N=new r.Buf16(16),D=new r.Buf16(16),F=null,j=0;for(E=0;E<=15;E++)N[E]=0;for(x=0;x<u;x++)N[t[n+x]]++;for(M=w,T=15;T>=1&&0===N[T];T--);if(M>T&&(M=T),0===T)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(S=1;S<T&&0===N[S];S++);for(M<S&&(M=S),R=1,E=1;E<=15;E++)if(R<<=1,(R-=N[E])<0)return-1;if(R>0&&(0===e||1!==T))return-1;for(D[1]=0,E=1;E<15;E++)D[E+1]=D[E]+N[E];for(x=0;x<u;x++)0!==t[n+x]&&(h[D[t[n+x]]++]=x);if(0===e?(P=F=h,v=19):1===e?(P=i,k-=257,F=o,j-=257,v=256):(P=a,F=s,v=-1),I=0,x=0,E=S,A=c,L=M,C=0,m=-1,g=(O=1<<M)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){y=E-C,h[x]<v?(b=0,_=h[x]):h[x]>v?(b=F[j+h[x]],_=P[k+h[x]]):(b=96,_=0),d=1<<E-C,S=p=1<<L;do{l[A+(I>>C)+(p-=d)]=y<<24|b<<16|_|0}while(0!==p);for(d=1<<E-1;I&d;)d>>=1;if(0!==d?(I&=d-1,I+=d):I=0,x++,0==--N[E]){if(E===T)break;E=t[n+h[x]]}if(E>M&&(I&g)!==m){for(0===C&&(C=M),A+=S,R=1<<(L=E-C);L+C<T&&!((R-=N[L+C])<=0);)L++,R<<=1;if(O+=1<<L,1===e&&O>852||2===e&&O>592)return 1;l[m=I&g]=M<<24|L<<16|A-c|0}}return 0!==I&&(l[A+I]=E-C<<24|64<<16|0),f.bits=M,0}},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w,E,x,S,T;n=e.state,r=e.next_in,S=e.input,i=r+(e.avail_in-5),o=e.next_out,T=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,h=n.wnext,f=n.window,d=n.hold,p=n.bits,m=n.lencode,g=n.distcode,A=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),y=m[d&A];t:for(;;){if(d>>>=b=y>>>24,p-=b,0===(b=y>>>16&255))T[o++]=65535&y;else{if(!(16&b)){if(0==(64&b)){y=m[(65535&y)+(d&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&y,(b&=15)&&(p<b&&(d+=S[r++]<<p,p+=8),_+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),y=g[d&v];n:for(;;){if(d>>>=b=y>>>24,p-=b,!(16&(b=y>>>16&255))){if(0==(64&b)){y=g[(65535&y)+(d&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&y,p<(b&=15)&&(d+=S[r++]<<p,(p+=8)<b&&(d+=S[r++]<<p,p+=8)),(w+=d&(1<<b)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=b,p-=b,w>(b=o-a)){if((b=w-b)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=0,x=f,0===h){if(E+=l-b,b<_){_-=b;do{T[o++]=f[E++]}while(--b);E=o-w,x=T}}else if(h<b){if(E+=l+h-b,(b-=h)<_){_-=b;do{T[o++]=f[E++]}while(--b);if(E=0,h<_){_-=b=h;do{T[o++]=f[E++]}while(--b);E=o-w,x=T}}}else if(E+=h-b,b<_){_-=b;do{T[o++]=f[E++]}while(--b);E=o-w,x=T}for(;_>2;)T[o++]=x[E++],T[o++]=x[E++],T[o++]=x[E++],_-=3;_&&(T[o++]=x[E++],_>1&&(T[o++]=x[E++]))}else{E=o-w;do{T[o++]=T[E++],T[o++]=T[E++],T[o++]=T[E++],_-=3}while(_>2);_&&(T[o++]=T[E++],_>1&&(T[o++]=T[E++]))}break}}break}}while(r<i&&o<s);r-=_=p>>3,d&=(1<<(p-=_<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=p}},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=_,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new f.Buf32(E),t.distcode=t.distdyn=new f.Buf32(x),t.sane=1,t.back=-1,y):b}function o(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,i(e)):b}function a(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?b:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,o(e))):b}function s(e,t){var n,r;return e?(r=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},e.state=r,r.window=null,(n=a(e,t))!==y&&(e.state=null),n):b}function u(e){if(S){var t;for(c=new f.Buf32(512),h=new f.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(g(A,e.lens,0,288,c,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;g(v,e.lens,0,32,h,0,e.work,{bits:5}),S=!1}e.lencode=c,e.lenbits=9,e.distcode=h,e.distbits=5}function l(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new f.Buf8(o.wsize)),r>=o.wsize?(f.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),f.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(f.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}var c,h,f=n(2),d=n(33),p=n(32),m=n(61),g=n(60),A=1,v=2,y=0,b=-2,_=1,w=12,E=852,x=592,S=!0;t.inflateReset=o,t.inflateReset2=a,t.inflateResetKeep=i,t.inflateInit=function(e){return s(e,15)},t.inflateInit2=s,t.inflate=function(e,t){var n,i,o,a,s,c,h,E,x,S,T,M,L,C,R,O,I,P,k,N,D,F,j,B,V=0,G=new f.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return b;(n=e.state).mode===w&&(n.mode=13),s=e.next_out,o=e.output,h=e.avail_out,a=e.next_in,i=e.input,c=e.avail_in,E=n.hold,x=n.bits,S=c,T=h,F=y;e:for(;;)switch(n.mode){case _:if(0===n.wrap){n.mode=13;break}for(;x<16;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}if(2&n.wrap&&35615===E){n.check=0,G[0]=255&E,G[1]=E>>>8&255,n.check=p(n.check,G,2,0),E=0,x=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&E)<<8)+(E>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!==(15&E)){e.msg="unknown compression method",n.mode=30;break}if(x-=4,D=8+(15&(E>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<D,e.adler=n.check=1,n.mode=512&E?10:w,E=0,x=0;break;case 2:for(;x<16;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}if(n.flags=E,8!==(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=E>>8&1),512&n.flags&&(G[0]=255&E,G[1]=E>>>8&255,n.check=p(n.check,G,2,0)),E=0,x=0,n.mode=3;case 3:for(;x<32;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}n.head&&(n.head.time=E),512&n.flags&&(G[0]=255&E,G[1]=E>>>8&255,G[2]=E>>>16&255,G[3]=E>>>24&255,n.check=p(n.check,G,4,0)),E=0,x=0,n.mode=4;case 4:for(;x<16;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}n.head&&(n.head.xflags=255&E,n.head.os=E>>8),512&n.flags&&(G[0]=255&E,G[1]=E>>>8&255,n.check=p(n.check,G,2,0)),E=0,x=0,n.mode=5;case 5:if(1024&n.flags){for(;x<16;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}n.length=E,n.head&&(n.head.extra_len=E),512&n.flags&&(G[0]=255&E,G[1]=E>>>8&255,n.check=p(n.check,G,2,0)),E=0,x=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((M=n.length)>c&&(M=c),M&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),f.arraySet(n.head.extra,i,a,M,D)),512&n.flags&&(n.check=p(n.check,i,M,a)),c-=M,a+=M,n.length-=M),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===c)break e;M=0;do{D=i[a+M++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D))}while(D&&M<c);if(512&n.flags&&(n.check=p(n.check,i,M,a)),c-=M,a+=M,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===c)break e;M=0;do{D=i[a+M++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D))}while(D&&M<c);if(512&n.flags&&(n.check=p(n.check,i,M,a)),c-=M,a+=M,D)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;x<16;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}if(E!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}E=0,x=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=w;break;case 10:for(;x<32;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}e.adler=n.check=r(E),E=0,x=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=c,n.hold=E,n.bits=x,2;e.adler=n.check=1,n.mode=w;case w:if(5===t||6===t)break e;case 13:if(n.last){E>>>=7&x,x-=7&x,n.mode=27;break}for(;x<3;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}switch(n.last=1&E,x-=1,3&(E>>>=1)){case 0:n.mode=14;break;case 1:if(u(n),n.mode=20,6===t){E>>>=2,x-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}E>>>=2,x-=2;break;case 14:for(E>>>=7&x,x-=7&x;x<32;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}if((65535&E)!=(E>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&E,E=0,x=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(M=n.length){if(M>c&&(M=c),M>h&&(M=h),0===M)break e;f.arraySet(o,i,a,M,s),c-=M,a+=M,h-=M,s+=M,n.length-=M;break}n.mode=w;break;case 17:for(;x<14;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}if(n.nlen=257+(31&E),E>>>=5,x-=5,n.ndist=1+(31&E),E>>>=5,x-=5,n.ncode=4+(15&E),E>>>=4,x-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;x<3;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}n.lens[U[n.have++]]=7&E,E>>>=3,x-=3}for(;n.have<19;)n.lens[U[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,j={bits:n.lenbits},F=g(0,n.lens,0,19,n.lencode,0,n.work,j),n.lenbits=j.bits,F){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=(V=n.lencode[E&(1<<n.lenbits)-1])>>>16&255,I=65535&V,!((R=V>>>24)<=x);){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}if(I<16)E>>>=R,x-=R,n.lens[n.have++]=I;else{if(16===I){for(B=R+2;x<B;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}if(E>>>=R,x-=R,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}D=n.lens[n.have-1],M=3+(3&E),E>>>=2,x-=2}else if(17===I){for(B=R+3;x<B;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}x-=R,D=0,M=3+(7&(E>>>=R)),E>>>=3,x-=3}else{for(B=R+7;x<B;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}x-=R,D=0,M=11+(127&(E>>>=R)),E>>>=7,x-=7}if(n.have+M>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;M--;)n.lens[n.have++]=D}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,j={bits:n.lenbits},F=g(A,n.lens,0,n.nlen,n.lencode,0,n.work,j),n.lenbits=j.bits,F){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,j={bits:n.distbits},F=g(v,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,j),n.distbits=j.bits,F){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(c>=6&&h>=258){e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=c,n.hold=E,n.bits=x,m(e,T),s=e.next_out,o=e.output,h=e.avail_out,a=e.next_in,i=e.input,c=e.avail_in,E=n.hold,x=n.bits,n.mode===w&&(n.back=-1);break}for(n.back=0;O=(V=n.lencode[E&(1<<n.lenbits)-1])>>>16&255,I=65535&V,!((R=V>>>24)<=x);){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}if(O&&0==(240&O)){for(P=R,k=O,N=I;O=(V=n.lencode[N+((E&(1<<P+k)-1)>>P)])>>>16&255,I=65535&V,!(P+(R=V>>>24)<=x);){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}E>>>=P,x-=P,n.back+=P}if(E>>>=R,x-=R,n.back+=R,n.length=I,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=w;break}if(64&O){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for(B=n.extra;x<B;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}n.length+=E&(1<<n.extra)-1,E>>>=n.extra,x-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=(V=n.distcode[E&(1<<n.distbits)-1])>>>16&255,I=65535&V,!((R=V>>>24)<=x);){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}if(0==(240&O)){for(P=R,k=O,N=I;O=(V=n.distcode[N+((E&(1<<P+k)-1)>>P)])>>>16&255,I=65535&V,!(P+(R=V>>>24)<=x);){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}E>>>=P,x-=P,n.back+=P}if(E>>>=R,x-=R,n.back+=R,64&O){e.msg="invalid distance code",n.mode=30;break}n.offset=I,n.extra=15&O,n.mode=24;case 24:if(n.extra){for(B=n.extra;x<B;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}n.offset+=E&(1<<n.extra)-1,E>>>=n.extra,x-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===h)break e;if(M=T-h,n.offset>M){if((M=n.offset-M)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}M>n.wnext?(M-=n.wnext,L=n.wsize-M):L=n.wnext-M,M>n.length&&(M=n.length),C=n.window}else C=o,L=s-n.offset,M=n.length;M>h&&(M=h),h-=M,n.length-=M;do{o[s++]=C[L++]}while(--M);0===n.length&&(n.mode=21);break;case 26:if(0===h)break e;o[s++]=n.length,h--,n.mode=21;break;case 27:if(n.wrap){for(;x<32;){if(0===c)break e;c--,E|=i[a++]<<x,x+=8}if(T-=h,e.total_out+=T,n.total+=T,T&&(e.adler=n.check=n.flags?p(n.check,o,T,s-T):d(n.check,o,T,s-T)),T=h,(n.flags?E:r(E))!==n.check){e.msg="incorrect data check",n.mode=30;break}E=0,x=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;x<32;){if(0===c)break e;c--,E+=i[a++]<<x,x+=8}if(E!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}E=0,x=0}n.mode=29;case 29:F=1;break e;case 30:F=-3;break e;case 31:return-4;case 32:default:return b}return e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=c,n.hold=E,n.bits=x,(n.wsize||T!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&l(e,e.output,e.next_out,T-e.avail_out)?(n.mode=31,-4):(S-=e.avail_in,T-=e.avail_out,e.total_in+=S,e.total_out+=T,n.total+=T,n.wrap&&T&&(e.adler=n.check=n.flags?p(n.check,o,T,e.next_out-T):d(n.check,o,T,e.next_out-T)),e.data_type=n.bits+(n.last?64:0)+(n.mode===w?128:0)+(20===n.mode||15===n.mode?256:0),(0===S&&0===T||4===t)&&F===y&&(F=-5),F)},t.inflateEnd=function(e){if(!e||!e.state)return b;var t=e.state;return t.window&&(t.window=null),e.state=null,y},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?b:(n.head=t,t.done=!1,y):b},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?b:11===n.mode&&d(1,t,r,0)!==n.check?-3:l(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,y):b},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,t.windowBits);if(n!==u.Z_OK)throw new Error(l[n]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}var o=n(62),a=n(2),s=n(31),u=n(29),l=n(16),c=n(30),h=n(59),f=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,i,l,c,h,d=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof e?d.input=s.binstring2buf(e):"[object ArrayBuffer]"===f.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new a.Buf8(p),d.next_out=0,d.avail_out=p),(n=o.inflate(d,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&m&&(h="string"==typeof m?s.string2buf(m):"[object ArrayBuffer]"===f.call(m)?new Uint8Array(m):m,n=o.inflateSetDictionary(this.strm,h)),n===u.Z_BUF_ERROR&&!0===g&&(n=u.Z_OK,g=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==u.Z_STREAM_END&&(0!==d.avail_in||r!==u.Z_FINISH&&r!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(i=s.utf8border(d.output,d.next_out),l=d.next_out-i,c=s.buf2string(d.output,i),d.next_out=l,d.avail_out=p-l,l&&a.arraySet(d.output,d.output,i,l,0),this.onData(c)):this.onData(a.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((d.avail_in>0||0===d.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(r=u.Z_FINISH),r===u.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):r!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),d.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=r,t.inflate=i,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,i(e,t)},t.ungzip=i},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?V[e]:V[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function u(e,t,n){e.bi_valid>C-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>C-e.bi_valid,e.bi_valid+=n-C):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function l(e,t,n){u(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function h(e,t,n){var r,i,o=new Array(L+1),a=0;for(r=1;r<=L;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=c(o[s]++,s))}}function f(e){var t;for(t=0;t<x;t++)e.dyn_ltree[2*t]=0;for(t=0;t<S;t++)e.dyn_dtree[2*t]=0;for(t=0;t<T;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*R]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function d(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function p(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function m(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&p(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!p(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function g(e,t,n){var r,i,o,s,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?l(e,i,t):(l(e,(o=G[i])+E+1,t),0!==(s=k[o])&&u(e,i-=U[o],s),l(e,o=a(--r),n),0!==(s=N[o])&&u(e,r-=H[o],s))}while(c<e.last_lit);l(e,R,t)}function A(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=M,n=0;n<u;n++)0!==o[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)m(e,o,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],m(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,m(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;o<=L;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<M;n++)(o=u[2*u[2*(r=e.heap[n])+1]+1]+1)>p&&(o=p,m++),u[2*r+1]=o,r>l||(e.bl_count[o]++,a=0,r>=d&&(a=f[r-d]),s=u[2*r],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>l||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(e,t),h(o,l,e.bl_count)}function v(e,t,n){var r,i,o=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<u&&i===a||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*O]++):s<=10?e.bl_tree[2*I]++:e.bl_tree[2*P]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function y(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,h=4;for(0===a&&(c=138,h=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<h)do{l(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(l(e,i,e.bl_tree),s--),l(e,O,e.bl_tree),u(e,s-3,2)):s<=10?(l(e,I,e.bl_tree),u(e,s-3,3)):(l(e,P,e.bl_tree),u(e,s-11,7));s=0,o=i,0===a?(c=138,h=3):i===a?(c=6,h=3):(c=7,h=4)}}function b(e,t,n,r){u(e,(w<<1)+(r?1:0),3),function(e,t,n,r){d(e),s(e,n),s(e,~n),_.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}var _=n(2),w=0,E=256,x=E+1+29,S=30,T=19,M=2*x+1,L=15,C=16,R=256,O=16,I=17,P=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=new Array(2*(x+2));r(j);var B=new Array(2*S);r(B);var V=new Array(512);r(V);var G=new Array(256);r(G);var U=new Array(29);r(U);var q,W,z,H=new Array(S);r(H);var K=!1;t._tr_init=function(e){K||(function(){var e,t,n,r,o,a=new Array(L+1);for(n=0,r=0;r<28;r++)for(U[r]=n,e=0;e<1<<k[r];e++)G[n++]=r;for(G[n-1]=r,o=0,r=0;r<16;r++)for(H[r]=o,e=0;e<1<<N[r];e++)V[o++]=r;for(o>>=7;r<S;r++)for(H[r]=o<<7,e=0;e<1<<N[r]-7;e++)V[256+o++]=r;for(t=0;t<=L;t++)a[t]=0;for(e=0;e<=143;)j[2*e+1]=8,e++,a[8]++;for(;e<=255;)j[2*e+1]=9,e++,a[9]++;for(;e<=279;)j[2*e+1]=7,e++,a[7]++;for(;e<=287;)j[2*e+1]=8,e++,a[8]++;for(h(j,x+1,a),e=0;e<S;e++)B[2*e+1]=5,B[2*e]=c(e,5);q=new i(j,k,E+1,x,L),W=new i(B,N,0,S,L),z=new i(new Array(0),D,0,T,7)}(),K=!0),e.l_desc=new o(e.dyn_ltree,q),e.d_desc=new o(e.dyn_dtree,W),e.bl_desc=new o(e.bl_tree,z),e.bi_buf=0,e.bi_valid=0,f(e)},t._tr_stored_block=b,t._tr_flush_block=function(e,t,n,r){var i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<E;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),A(e,e.l_desc),A(e,e.d_desc),a=function(e){var t;for(v(e,e.dyn_ltree,e.l_desc.max_code),v(e,e.dyn_dtree,e.d_desc.max_code),A(e,e.bl_desc),t=T-1;t>=3&&0===e.bl_tree[2*F[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?b(e,t,n,r):4===e.strategy||o===i?(u(e,2+(r?1:0),3),g(e,j,B)):(u(e,4+(r?1:0),3),function(e,t,n,r){var i;for(u(e,t-257,5),u(e,n-1,5),u(e,r-4,4),i=0;i<r;i++)u(e,e.bl_tree[2*F[i]+1],3);y(e,e.dyn_ltree,t-1),y(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),g(e,e.dyn_ltree,e.dyn_dtree)),f(e),r&&d(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(G[n]+E+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){u(e,2,3),l(e,R,j),function(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";function r(e,t){return e.msg=x[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(b.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){_._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function u(e,t){e.pending_buf[e.pending++]=t}function l(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,b.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=w(e.adler,t,i,n):2===e.state.wrap&&(e.adler=E(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function h(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-U?e.strstart-(e.w_size-U):0,l=e.window,c=e.w_mask,h=e.prev,f=e.strstart+G,d=l[o+a-1],p=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+a]===p&&l[n+a-1]===d&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<f);if(r=G-(f-o),o=f-G,r>a){if(e.match_start=t,a=r,r>=s)break;d=l[o+a-1],p=l[o+a]}}}while((t=h[t&c])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function f(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-U)){b.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=a?r-a:0}while(--n);t=n=a;do{r=e.prev[--t],e.prev[t]=r>=a?r-a:0}while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=V)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+V-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<V)););}while(e.lookahead<U&&0!==e.strm.avail_in)}function d(e,t){for(var n,r;;){if(e.lookahead<U){if(f(e),e.lookahead<U&&t===S)return z;if(0===e.lookahead)break}if(n=0,e.lookahead>=V&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+V-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-U&&(e.match_length=h(e,n)),e.match_length>=V)if(r=_._tr_tally(e,e.strstart-e.match_start,e.match_length-V),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=V){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+V-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=_._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return z}return e.insert=e.strstart<V-1?e.strstart:V-1,t===T?(s(e,!0),0===e.strm.avail_out?K:Y):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?z:H}function p(e,t){for(var n,r,i;;){if(e.lookahead<U){if(f(e),e.lookahead<U&&t===S)return z;if(0===e.lookahead)break}if(n=0,e.lookahead>=V&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+V-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=V-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-U&&(e.match_length=h(e,n),e.match_length<=5&&(e.strategy===R||e.match_length===V&&e.strstart-e.match_start>4096)&&(e.match_length=V-1)),e.prev_length>=V&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-V,r=_._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-V),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+V-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=V-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return z}else if(e.match_available){if((r=_._tr_tally(e,0,e.window[e.strstart-1]))&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return z}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=_._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<V-1?e.strstart:V-1,t===T?(s(e,!0),0===e.strm.avail_out?K:Y):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?z:H}function m(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function g(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=I,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?q:W,e.adler=2===t.wrap?0:1,t.last_flush=S,_._tr_init(t),M):r(e,L)}function A(e){var t=g(e);return t===M&&function(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=y[e.level].max_lazy,e.good_match=y[e.level].good_length,e.nice_match=y[e.level].nice_length,e.max_chain_length=y[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=V-1,e.match_available=0,e.ins_h=0}(e.state),t}function v(e,t,n,i,a,s){if(!e)return L;var u=1;if(t===C&&(t=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16),a<1||a>k||n!==P||i<8||i>15||t<0||t>9||s<0||s>O)return r(e,L);8===i&&(i=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(2*j),this.dyn_dtree=new b.Buf16(2*(2*D+1)),this.bl_tree=new b.Buf16(2*(2*F+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(B+1),this.heap=new b.Buf16(2*N+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(2*N+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return e.state=l,l.strm=e,l.wrap=u,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+V-1)/V),l.window=new b.Buf8(2*l.w_size),l.head=new b.Buf16(l.hash_size),l.prev=new b.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new b.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=n,A(e)}var y,b=n(2),_=n(64),w=n(33),E=n(32),x=n(16),S=0,T=4,M=0,L=-2,C=-1,R=1,O=4,I=2,P=8,k=9,N=286,D=30,F=19,j=2*N+1,B=15,V=3,G=258,U=G+V+1,q=42,W=113,z=1,H=2,K=3,Y=4;y=[new m(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(f(e),0===e.lookahead&&t===S)return z;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return z;if(e.strstart-e.block_start>=e.w_size-U&&(s(e,!1),0===e.strm.avail_out))return z}return e.insert=0,t===T?(s(e,!0),0===e.strm.avail_out?K:Y):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),z)})),new m(4,4,8,4,d),new m(4,5,16,8,d),new m(4,6,32,32,d),new m(4,4,16,16,p),new m(8,16,32,32,p),new m(8,16,128,128,p),new m(8,32,128,256,p),new m(32,128,258,1024,p),new m(32,258,258,4096,p)],t.deflateInit=function(e,t){return v(e,t,P,15,8,0)},t.deflateInit2=v,t.deflateReset=A,t.deflateResetKeep=g,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?L:(e.state.gzhead=t,M):L},t.deflate=function(e,t){var n,c,h,d;if(!e||!e.state||t>5||t<0)return e?r(e,L):L;if(c=e.state,!e.output||!e.input&&0!==e.avail_in||666===c.status&&t!==T)return r(e,0===e.avail_out?-5:L);if(c.strm=e,n=c.last_flush,c.last_flush=t,c.status===q)if(2===c.wrap)e.adler=0,u(c,31),u(c,139),u(c,8),c.gzhead?(u(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),u(c,255&c.gzhead.time),u(c,c.gzhead.time>>8&255),u(c,c.gzhead.time>>16&255),u(c,c.gzhead.time>>24&255),u(c,9===c.level?2:c.strategy>=2||c.level<2?4:0),u(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(u(c,255&c.gzhead.extra.length),u(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(e.adler=E(e.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=69):(u(c,0),u(c,0),u(c,0),u(c,0),u(c,0),u(c,9===c.level?2:c.strategy>=2||c.level<2?4:0),u(c,3),c.status=W);else{var p=P+(c.w_bits-8<<4)<<8;p|=(c.strategy>=2||c.level<2?0:c.level<6?1:6===c.level?2:3)<<6,0!==c.strstart&&(p|=32),p+=31-p%31,c.status=W,l(c,p),0!==c.strstart&&(l(c,e.adler>>>16),l(c,65535&e.adler)),e.adler=1}if(69===c.status)if(c.gzhead.extra){for(h=c.pending;c.gzindex<(65535&c.gzhead.extra.length)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>h&&(e.adler=E(e.adler,c.pending_buf,c.pending-h,h)),a(e),h=c.pending,c.pending!==c.pending_buf_size));)u(c,255&c.gzhead.extra[c.gzindex]),c.gzindex++;c.gzhead.hcrc&&c.pending>h&&(e.adler=E(e.adler,c.pending_buf,c.pending-h,h)),c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=73)}else c.status=73;if(73===c.status)if(c.gzhead.name){h=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>h&&(e.adler=E(e.adler,c.pending_buf,c.pending-h,h)),a(e),h=c.pending,c.pending===c.pending_buf_size)){d=1;break}d=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,u(c,d)}while(0!==d);c.gzhead.hcrc&&c.pending>h&&(e.adler=E(e.adler,c.pending_buf,c.pending-h,h)),0===d&&(c.gzindex=0,c.status=91)}else c.status=91;if(91===c.status)if(c.gzhead.comment){h=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>h&&(e.adler=E(e.adler,c.pending_buf,c.pending-h,h)),a(e),h=c.pending,c.pending===c.pending_buf_size)){d=1;break}d=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,u(c,d)}while(0!==d);c.gzhead.hcrc&&c.pending>h&&(e.adler=E(e.adler,c.pending_buf,c.pending-h,h)),0===d&&(c.status=103)}else c.status=103;if(103===c.status&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&a(e),c.pending+2<=c.pending_buf_size&&(u(c,255&e.adler),u(c,e.adler>>8&255),e.adler=0,c.status=W)):c.status=W),0!==c.pending){if(a(e),0===e.avail_out)return c.last_flush=-1,M}else if(0===e.avail_in&&i(t)<=i(n)&&t!==T)return r(e,-5);if(666===c.status&&0!==e.avail_in)return r(e,-5);if(0!==e.avail_in||0!==c.lookahead||t!==S&&666!==c.status){var m=2===c.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(f(e),0===e.lookahead)){if(t===S)return z;break}if(e.match_length=0,n=_._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return z}return e.insert=0,t===T?(s(e,!0),0===e.strm.avail_out?K:Y):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?z:H}(c,t):3===c.strategy?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=G){if(f(e),e.lookahead<=G&&t===S)return z;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=V&&e.strstart>0&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+G;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=G-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=V?(n=_._tr_tally(e,1,e.match_length-V),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=_._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return z}return e.insert=0,t===T?(s(e,!0),0===e.strm.avail_out?K:Y):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?z:H}(c,t):y[c.level].func(c,t);if(m!==K&&m!==Y||(c.status=666),m===z||m===K)return 0===e.avail_out&&(c.last_flush=-1),M;if(m===H&&(1===t?_._tr_align(c):5!==t&&(_._tr_stored_block(c,0,0,!1),3===t&&(o(c.head),0===c.lookahead&&(c.strstart=0,c.block_start=0,c.insert=0))),a(e),0===e.avail_out))return c.last_flush=-1,M}return t!==T?M:c.wrap<=0?1:(2===c.wrap?(u(c,255&e.adler),u(c,e.adler>>8&255),u(c,e.adler>>16&255),u(c,e.adler>>24&255),u(c,255&e.total_in),u(c,e.total_in>>8&255),u(c,e.total_in>>16&255),u(c,e.total_in>>24&255)):(l(c,e.adler>>>16),l(c,65535&e.adler)),a(e),c.wrap>0&&(c.wrap=-c.wrap),0!==c.pending?M:1)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==q&&69!==t&&73!==t&&91!==t&&103!==t&&t!==W&&666!==t?r(e,L):(e.state=null,t===W?r(e,-3):M):L},t.deflateSetDictionary=function(e,t){var n,r,i,a,s,u,l,c,h=t.length;if(!e||!e.state)return L;if(2===(a=(n=e.state).wrap)||1===a&&n.status!==q||n.lookahead)return L;for(1===a&&(e.adler=w(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new b.Buf8(n.w_size),b.arraySet(c,t,h-n.w_size,n.w_size,0),t=c,h=n.w_size),s=e.avail_in,u=e.next_in,l=e.input,e.avail_in=h,e.next_in=0,e.input=t,f(n);n.lookahead>=V;){r=n.strstart,i=n.lookahead-(V-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+V-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=V-1,f(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=V-1,n.match_available=0,e.next_in=u,e.input=l,e.avail_in=s,n.wrap=a,M},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=a.assign({level:f,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==h)throw new Error(u[n]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=o.deflateSetDictionary(this.strm,i))!==h)throw new Error(u[n]);this._dict_set=!0}}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||u[n.err];return n.result}var o=n(65),a=n(2),s=n(31),u=n(16),l=n(30),c=Object.prototype.toString,h=0,f=-1,d=0,p=8;r.prototype.push=function(e,t){var n,r,i=this.strm,u=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=s.string2buf(e):"[object ArrayBuffer]"===c.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(u),i.next_out=0,i.avail_out=u),1!==(n=o.deflate(i,r))&&n!==h)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===h):2!==r||(this.onEnd(h),i.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=r,t.deflate=i,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,i(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,i(e,t)}},function(e,t,n){"use strict";var r={};(0,n(2).assign)(r,n(66),n(63),n(29)),e.exports=r},function(e,t,n){"use strict";function r(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=n(67),a=n(0),s=n(1),u=i?"uint8array":"array";t.magic="\b\0",a.inherits(r,s),r.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(u,e.data),!1)},r.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},r.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},r.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},t.compressWorker=function(e){return new r("Deflate",e)},t.uncompressWorker=function(){return new r("Inflate",{})}},function(e,t,n){"use strict";var r=n(34),i=n(58);t.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},u=n.dir,l=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:u,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},function(e,t,n){"use strict";var r=n(39),i=n(37),o=n(7),a=n(18),s=n(1),u=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};u.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!i&&(t=t.pipe(new o.Utf8EncodeWorker)),!a&&i&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new s("error")).error(e)}return new r(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)u.prototype[l[h]]=c;e.exports=u},function(e,t,n){"use strict";function r(e,t,n){i.call(this,t),this._helper=e;var r=this;e.on("data",(function(e,t){r.push(e)||r._helper.pause(),n&&n(t)})).on("error",(function(e){r.emit("error",e)})).on("end",(function(){r.push(null)}))}var i=n(50).Readable;n(0).inherits(r,i),r.prototype._read=function(){this._helper.resume()},e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,"ConvertWorker to "+e),this.destType=e}var i=n(1),o=n(0);o.inherits(r,i),r.prototype.processChunk=function(e){this.push({data:o.transformTo(this.destType,e.data),meta:e.meta})},e.exports=r},function(e,t,n){"use strict";(function(t){function n(){var e,t;i=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}i=!1}var r,i,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var a=0,s=new o(n),u=t.document.createTextNode("");s.observe(u,{characterData:!0}),r=function(){u.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var l=new t.MessageChannel;l.port1.onmessage=n,r=function(){l.port2.postMessage(0)}}var c=[];e.exports=function(e){1!==c.push(e)||i||r()}}).call(this,n(5))},function(e,t,n){"use strict";function r(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,e!==r&&u(this,e)}function o(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(e,t,n){c((function(){var r;try{r=t(n)}catch(t){return h.reject(e,t)}r===e?h.reject(e,new TypeError("Cannot resolve promise with itself")):h.resolve(e,r)}))}function s(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function u(e,t){function n(t){i||(i=!0,h.reject(e,t))}function r(t){i||(i=!0,h.resolve(e,t))}var i=!1,o=l((function(){t(r,n)}));"error"===o.status&&n(o.value)}function l(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}var c=n(73),h={},f=["REJECTED"],d=["FULFILLED"],p=["PENDING"];e.exports=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===d||"function"!=typeof t&&this.state===f)return this;var n=new this.constructor(r);return this.state!==p?a(n,this.state===d?e:t,this.outcome):this.queue.push(new o(n,e,t)),n},o.prototype.callFulfilled=function(e){h.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){h.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},h.resolve=function(e,t){var n=l(s,t);if("error"===n.status)return h.reject(e,n.value);var r=n.value;if(r)u(e,r);else{e.state=d,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},h.reject=function(e,t){e.state=f,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},i.resolve=function(e){return e instanceof this?e:h.resolve(new this(r),e)},i.reject=function(e){var t=new this(r);return h.reject(t,e)},i.all=function(e){function t(e,t){n.resolve(e).then((function(e){a[t]=e,++s!==i||o||(o=!0,h.resolve(l,a))}),(function(e){o||(o=!0,h.reject(l,e))}))}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var a=new Array(i),s=0,u=-1,l=new this(r);++u<i;)t(e[u],u);return l},i.race=function(e){function t(e){n.resolve(e).then((function(e){o||(o=!0,h.resolve(s,e))}),(function(e){o||(o=!0,h.reject(s,e))}))}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var a=-1,s=new this(r);++a<i;)t(e[a]);return s}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){e.exports=n(11).document&&document.documentElement},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r,i,o,a=n(42),s=n(77),u=n(76),l=n(40),c=n(11),h=c.process,f=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,m=0,g={},A=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},v=function(e){A.call(e.data)};f&&d||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},d=function(e){delete g[e]},"process"==n(75)(h)?r=function(e){h.nextTick(a(A,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=v,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",v,!1)):r="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),A.call(e)}}:function(e){setTimeout(a(A,e,1),0)}),e.exports={set:f,clear:d}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(20);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=!n(19)&&!n(41)((function(){return 7!=Object.defineProperty(n(40)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(20);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(82),i=n(81),o=n(80),a=Object.defineProperty;t.f=n(19)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(83),i=n(79);e.exports=n(19)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(11),i=n(43),o=n(42),a=n(84),s=function e(t,n,s){var u,l,c,h=t&e.F,f=t&e.G,d=t&e.S,p=t&e.P,m=t&e.B,g=t&e.W,A=f?i:i[n]||(i[n]={}),v=A.prototype,y=f?r:d?r[n]:(r[n]||{}).prototype;for(u in f&&(s=n),s)(l=!h&&y&&void 0!==y[u])&&u in A||(c=l?y[u]:s[u],A[u]=f&&"function"!=typeof y[u]?s[u]:m&&l?o(c,r):g&&y[u]==c?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((A.virtual||(A.virtual={}))[u]=c,t&e.R&&v&&!v[u]&&a(v,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){var r=n(86),i=n(78);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){n(87),e.exports=n(43).setImmediate},function(e,t,n){e.exports=n(22).PassThrough},function(e,t,n){e.exports=n(22).Transform},function(e,t,n){e.exports=n(4)},function(e,t,n){e.exports=n(21)},function(e,t,n){"use strict";function r(e){return this instanceof r?void i.call(this,e):new r(e)}e.exports=r;var i=n(45),o=n(9);o.inherits=n(6),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(5))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){delete s[e]}function i(e){if(u)setTimeout(i,0,e);else{var t=s[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{r(e),u=!1}}}}if(!e.setImmediate){var o,a=1,s={},u=!1,l=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){i(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),o=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},o=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;o=function(t){var n=l.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():o=function(e){setTimeout(i,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return s[a]=r,o(a),a++},c.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(5),n(15))},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(95),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(5))},function(e,t){},function(e,t,n){"use strict";function r(e,t,n){e.copy(t,n)}var i=n(13).Buffer,o=n(97);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),n=this.head,o=0;n;)r(n.data,t,o),o+=n.data.length,n=n.next;return t},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(23).EventEmitter;n(6)(r,i),r.Readable=n(22),r.Writable=n(92),r.Duplex=n(91),r.Transform=n(90),r.PassThrough=n(89),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",n),e.removeListener("drain",r),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(l.on("end",o),l.on("close",a));var c=!1;return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+d]=255&a,d+=p,a/=256,l-=8);e[n+d-p]|=128*m}},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}function o(e,t,n){for(var r,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(i(r));return o.join("")}t.byteLength=function(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){for(var t,n=r(e),i=n[0],o=n[1],a=new u(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),l=0,c=o>0?i-4:i,h=0;h<c;h+=4)t=s[e.charCodeAt(h)]<<18|s[e.charCodeAt(h+1)]<<12|s[e.charCodeAt(h+2)]<<6|s[e.charCodeAt(h+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;return 2===o&&(t=s[e.charCodeAt(h)]<<2|s[e.charCodeAt(h+1)]>>4,a[l++]=255&t),1===o&&(t=s[e.charCodeAt(h)]<<10|s[e.charCodeAt(h+1)]<<4|s[e.charCodeAt(h+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t),a},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],s=0,u=n-r;s<u;s+=16383)i.push(o(e,s,s+16383>u?u:s+16383));return 1===r?(t=e[n-1],i.push(a[t>>2]+a[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"=")),i.join("")};for(var a=[],s=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,h=l.length;c<h;++c)a[c]=l[c],s[l.charCodeAt(c)]=c;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(e,t,n){"use strict";function r(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var i=n(7),o=n(0),a=n(1),s=n(39),u=n(38),l=n(18),c=n(70),h=n(69),f=n(12),d=n(57),p=function(e,t,n){var r,i=o.getTypeOf(t),s=o.extend(n||{},u);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=g(e)),s.createFolders&&(r=m(e))&&A.call(this,r,!0);var h="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!h),(t instanceof l&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string");var p=null;p=t instanceof l||t instanceof a?t:f.isNode&&f.isStream(t)?new d(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var v=new c(e,p,s);this.files[e]=v},m=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},A=function(e,t){return t=void 0!==t?t:u.createFolders,e=g(e),this.files[e]||p.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r))},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1===arguments.length){if(r(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null}return e=this.root+e,p.call(this,e,t,n),this},folder:function(e){if(!e)return this;if(r(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=A.call(this,t),i=this.clone();return i.root=n.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=h.generateWorker(this,n,r)}catch(e){(t=new a("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};e.exports=v},function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}r.prototype=n(103),r.prototype.loadAsync=n(56),r.support=n(3),r.defaults=n(38),r.version="3.1.5",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=n(8),e.exports=r}])})),i("formats/kml/KmzFile",["../../util/jszip","../../util/Promise","../../util/WWUtil"],(function(e,t,n){"use strict";var r=function(e,t){this._binary=e,this._fileCache=t};return r.prototype.load=function(){var n=this,r=null,i=!1;return(new e).loadAsync(this._binary).then((function(e){return t.all(Object.keys(e.files).map((function(t){return e.files[t]})).map((function(e){return n.hasExtension("kml",e.name)&&!i?(i=!0,e.async("text").then((function(e){r=e}))):n.hasExtension("kml",e.name)?e.async("base64").then((function(t){return new WorldWind.KmlFile(t).then((function(t){n._fileCache.add("href;"+e.name,t)}))})):e.async("base64").then((function(t){var r="data:image/jpeg;base64,"+t;n._fileCache.add("href;"+e.name,r)}))})))})).then((function(){return r}))},r.prototype.hasExtension=function(e,t){return n.endsWith(t,"."+e)},r})),i("formats/kml/util/KmlRefreshListener",[],(function(){var e=function(){this.currentActiveEvents=[]};return e.prototype.addEvent=function(e){var t=this;setTimeout((function(){t.currentActiveEvents.push(e)}),e.time)},e.prototype.getActiveEvents=function(){var e=this.currentActiveEvents.slice();return this.currentActiveEvents=[],e},e.Event=function(e,t,n){this.type=e,this.payload=n,this.time=t},e})),i("formats/kml/util/KmlRemoteFile",["../../../error/ArgumentError","../../../util/Logger","../../../util/Promise"],(function(e,t,n){"use strict";var r=function(n){if(!n.ajax&&!n.zip)throw new e(t.logMessage(t.LEVEL_SEVERE,"RemoteDocument","constructor","Invalid option for retrieval specified. Use either ajax or zip option."));this.options=n};return r.prototype.get=function(){var n=this.options;if(n.ajax)return this.ajax(n.url,n);if(n.zip)return n.responseType=n.responseType||"arraybuffer",this.ajax(n.url,n);throw new e(t.logMessage(t.LEVEL_SEVERE,"RemoteDocument","constructor","Invalid option for retrieval specified. Use either ajax or zip option."))},r.prototype.ajax=function(e,r){return new n((function(n,i){var o=new XMLHttpRequest;o.open("GET",e,!0),r.responseType&&(o.responseType=r.responseType),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var i;i="arraybuffer"==r.responseType?this.response:this.responseText,n({text:i,headers:o.getAllResponseHeaders()})}else t.log(t.LEVEL_WARNING,"KmlFile retrieval failed ("+o.statusText+"): "+e)},o.onerror=function(){t.log(t.LEVEL_WARNING,"Remote file retrieval failed: "+e),i()}.bind(this),o.ontimeout=function(){t.log(t.LEVEL_WARNING,"Remote file retrieval timed out: "+e),i()}.bind(this),o.send(null)}))},r})),i("formats/kml/util/KmlStyleResolver",["../KmlFile","../styles/KmlStyle","../../../util/Logger","../../../util/Promise"],(function(e,t,n,r){"use strict";var i=function(e){this._fileCache=e};return i.prototype.handleRemoteStyle=function(e,i){return e?this.handleStyleUrl(e):i?this.handleStyleSelector(i):(n.logMessage(n.LEVEL_INFO,"KmlStyleResolver","handleRemoteStyle","Style was null."),r.resolve(t.default()))},i.prototype.handleStyleUrl=function(e){var t=this;return this.handlePromiseOfFile(e).then((function(t){return t.resolveStyle(e)})).then((function(e){return e.isMap?e.resolve(t):r.resolve({normal:e,highlight:null})}))},i.prototype.handlePromiseOfFile=function(e){var t=this._fileCache.retrieve(e);return t?r.resolve(t):new WorldWind.KmlFile({url:e}).then(function(t){return this._fileCache.add(e,t),t}.bind(this))},i.prototype.handleStyleSelector=function(e){return e.isMap?e.resolve(this):new r((function(t){window.setTimeout((function(){t({normal:e,highlight:null})}),0)}))},i})),i("util/XmlDocument",["../error/ArgumentError","../util/Logger"],(function(e,t){var n=function(e){this._document=e};return n.prototype.dom=function(){if(DOMParser){var n=(new DOMParser).parseFromString(this._document,"text/xml");if(n.getElementsByTagName("parsererror").length||!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"XmlDocument","dom","Invalid XML document. "+n.getElementsByTagName("parsererror")[0].innerHTML));return n}var r=new ActiveXObject("Microsoft.XMLDOM");return r.async=!1,r.loadXML(text),r},n.isValid=function(e){try{return new n(e).dom(),!0}catch(e){return!1}},n})),i("formats/kml/KmlFile",["../../error/ArgumentError","./KmlElements","./KmlFileCache","./KmlObject","./styles/KmlStyle","./styles/KmlStyleMap","./KmlTimeSpan","./KmlTimeStamp","./KmzFile","../../util/Logger","../../util/Promise","./util/KmlRefreshListener","./util/KmlRemoteFile","./util/KmlStyleResolver","../../util/XmlDocument","../../util/WWUtil"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){"use strict";var g=function(t,i){var o=this;if(!t)throw new e(l.logMessage(l.LEVEL_SEVERE,"KmlFile","constructor","invalidDocumentPassed"));return this._controls=i||null,this._fileCache=new n,this._styleResolver=new d(this._fileCache),this._listener=new h,this._headers=null,this.requestRemote(t).then((function(e){var n=e.text;return o._headers=e.headers,o.hasExtension("kmz",t)?new u(n,o._fileCache).load():n})).then((function(e){return o._document=new p(e).dom(),r.call(o,{objectNode:o._document.documentElement,controls:i}),o._fileCache.add(t,o,!0),o}))};return g.prototype=Object.create(r.prototype),Object.defineProperties(g.prototype,{shapes:{get:function(){return this._factory.all(this)}}}),g.prototype.render=function(e,t){var n=this;t=t||{},this.shapes.forEach((function(r){r.render(e,{lastStyle:t.lastStyle||null,lastVisibility:t.lastVisibility||null,currentTimeInterval:t.currentTimeInterval||null,regionInvisible:t.regionInvisible||null,fileCache:n._fileCache,styleResolver:n._styleResolver,listener:n._listener,activeEvents:n._listener.getActiveEvents()})}))},g.prototype.hasExtension=function(e,t){return m.endsWith(t,"."+e)},g.prototype.requestRemote=function(e){var t={};return t.url=e,this.hasExtension("kmz",e)?t.zip=!0:t.ajax=!0,new f(t).get()},g.prototype.resolveStyle=function(e){var t=this,n=e.substring(e.indexOf("#")+1,e.length);return new c((function(e,r){var a;(a=t._document.querySelector?t._document.querySelector("*[id='"+n+"']"):t._document.getElementById(n))&&null!=a||r(),a.nodeName==i.prototype.getTagNames()[0]?e(new i({objectNode:a},{styleResolver:t._styleResolver})):a.nodeName==o.prototype.getTagNames()[0]?e(new o({objectNode:a},{styleResolver:t._styleResolver})):l.logMessage(l.LEVEL_WARNING,"KmlFile","resolveStyle","Style must contain either Style node or StyleMap node.")}))},g.prototype.getExpired=function(){var e=new Date(this._headers.getRequestHeader("Expires"));return(new Date).getTime-e.getTime()},g})),i("formats/kml/KmlLatLonAltBox",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlNorth:{get:function(){return this._factory.specific(this,{name:"north",transformer:n.number})}},kmlSouth:{get:function(){return this._factory.specific(this,{name:"south",transformer:n.number})}},kmlEast:{get:function(){return this._factory.specific(this,{name:"east",transformer:n.number})}},kmlWest:{get:function(){return this._factory.specific(this,{name:"west",transformer:n.number})}},kmlMinAltitude:{get:function(){return this._factory.specific(this,{name:"minAltitude",transformer:n.number})}},kmlMaxAltitude:{get:function(){return this._factory.specific(this,{name:"maxAltitude",transformer:n.number})}}}),r.prototype.getTagNames=function(){return["LatLonAltBox"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlLod",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlMinLodPixels:{get:function(){return this._factory.specific(this,{name:"minLodPixels",transformer:n.number})}},kmlMaxLodPixels:{get:function(){return this._factory.specific(this,{name:"maxLodPixels",transformer:n.number})}},kmlMinFadeExtent:{get:function(){return this._factory.specific(this,{name:"minFadeExtent",transformer:n.number})}},kmlMaxFadeExtent:{get:function(){return this._factory.specific(this,{name:"maxFadeExtent",transformer:n.number})}}}),r.prototype.getTagNames=function(){return["Lod"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlRegion",["../../geom/BoundingBox","../../util/Color","./KmlElements","./KmlLatLonAltBox","./KmlLod","./KmlObject","./styles/KmlStyle","./util/KmlNodeTransformers","../../geom/Sector"],(function(e,t,n,r,i,o,a,s,u){"use strict";var l=function(e){o.call(this,e)};return l.prototype=Object.create(o.prototype),Object.defineProperties(l.prototype,{kmlLatLonAltBox:{get:function(){return this._factory.specific(this,{name:r.prototype.getTagNames(),transformer:s.kmlObject})}},kmlLod:{get:function(){return this._factory.specific(this,{name:i.prototype.getTagNames(),transformer:s.kmlObject})}}}),l.prototype.intersectsVisible=function(t){var n=this.kmlLatLonAltBox,r=new e;return r.setToSector(new u(n.kmlSouth,n.kmlNorth,n.kmlWest,n.kmlEast),t.globe,n.kmlMinAltitude,n.kmlMaxAltitude),r.intersectsFrustum(t.frustumInModelCoordinates)&&(!n.kmlMinAltitude||t.eyePosition.altitude>n.kmlMinAltitude)&&(!n.kmlMaxAltitude||t.eyePosition.altitude<n.kmlMaxAltitude)},l.prototype.getTagNames=function(){return["Region"]},n.addKey(l.prototype.getTagNames()[0],l),l})),i("formats/kml/features/KmlFeature",["./../KmlObject","../KmlAbstractView","../KmlFile","../styles/KmlStyleMap","../styles/KmlStyleSelector","../KmlRegion","../KmlTimePrimitive","../util/KmlNodeTransformers","../../../util/Promise"],(function(e,t,n,r,i,o,a,s,u){"use strict";var l=function(t){this.isFeature=t.isFeature=!0,e.call(this,t),this._pStyle=null,this.controlledVisibility=null};return l.prototype=Object.create(e.prototype),Object.defineProperties(l.prototype,{style:{get:function(){return this._pStyle}},kmlName:{get:function(){return this._factory.specific(this,{name:"name",transformer:s.string})}},kmlVisibility:{get:function(){return this._factory.specific(this,{name:"visibility",transformer:s.boolean})}},kmlOpen:{get:function(){return this._factory.specific(this,{name:"open",transformer:s.boolean})}},kmlAddress:{get:function(){return this._factory.specific(this,{name:"address",transformer:s.string})}},kmlPhoneNumber:{get:function(){return this._factory.specific(this,{name:"phoneNumber",transformer:s.string})}},kmlDescription:{get:function(){return this._factory.specific(this,{name:"description",transformer:s.string})}},kmlStyleUrl:{get:function(){return this._factory.specific(this,{name:"styleUrl",transformer:s.string})}},kmlSnippet:{get:function(){return this._factory.specific(this,{name:"Snippet",transformer:s.string})}},kmlAbstractView:{get:function(){return this._factory.any(this,{name:t.prototype.getTagNames()})}},kmlTimePrimitive:{get:function(){return this._factory.any(this,{name:a.prototype.getTagNames()})}},kmlStyleSelector:{get:function(){return this._factory.any(this,{name:i.prototype.getTagNames()})}},kmlRegion:{get:function(){return this._factory.any(this,{name:o.prototype.getTagNames()})}}}),l.prototype.render=function(t,n){e.prototype.render.call(this,t,n),this.solveStyle(t,n),this.solveVisibility(t,n)},l.prototype.solveStyle=function(e,t){this.getStyle(e,t),null!=this.style&&(t.lastStyle=this.style)},l.prototype.solveRegion=function(e){return!this.kmlRegion||this.kmlRegion.intersectsVisible(e)},l.prototype.solveVisibility=function(e,t){var n=!1!==t.lastVisibility,r=this.solveTimeVisibility(e),i=this.solveRegion(e),o=!1!==this.kmlVisibility;!0===this.controlledVisibility?this.enabled=!0:!1===this.controlledVisibility?this.enabled=!1:this.enabled=n&&r&&i&&o,t.lastVisibility=this.enabled,this._renderable&&(this._renderable.enabled=this.enabled)},l.prototype.solveTimeVisibility=function(e){var t=this.kmlTimePrimitive&&this.kmlTimePrimitive.timeRange();if(e.currentLayer.currentTimeInterval&&t){var n=e.currentLayer.currentTimeInterval[0],r=e.currentLayer.currentTimeInterval[1];if(t&&(t.from<n||t.from>r||t.to>r))return!1}return!0},l.prototype.getStyle=function(e,t){if(!this._pStyle){var n=this;return t.styleResolver.handleRemoteStyle(n.kmlStyleUrl,n.kmlStyleSelector).then((function(t){n._pStyle=t,e.redrawRequested=!0}))}},l.prototype.getTagNames=function(){return["NetworkLink","Placemark","PhotoOverlay","ScreenOverlay","GroundOverlay","Folder","Document"]},l})),i("formats/kml/features/KmlContainer",["./KmlFeature"],(function(e){"use strict";var t=function(t){e.call(this,t)};return t.prototype=Object.create(e.prototype),Object.defineProperties(t.prototype,{kmlShapes:{get:function(){return this._factory.all(this).filter((function(e){return e.isFeature}))}}}),t.prototype.render=function(t,n){e.prototype.render.call(this,t,n);var r=this;this.kmlShapes.forEach((function(e){e.render(t,{lastStyle:n.lastStyle,lastVisibility:r.enabled,currentTimeInterval:n.currentTimeInterval,regionInvisible:n.regionInvisible,fileCache:n.fileCache,styleResolver:n.styleResolver,listener:n.listener,activeEvents:n.activeEvents})}))},t.prototype.getTagNames=function(){return["Folder","Document"]},t})),i("formats/kml/controls/KmlControls",["../../../util/Logger"],(function(e){"use strict";var t=function(){};return t.prototype.hook=function(){e.logMessage(e.LEVEL_WARNING,"KmlControls","hook","Every KML controls should override hook method.")},t})),i("formats/kml/util/KmlCreate",["../KmlElements","../KmlObject"],(function(e,t){var n=function(e){t.call(this,e)};return n.prototype=Object.create(t.prototype),Object.defineProperties(n.prototype,{shapes:{get:function(){return this._factory.all(this)}}}),n.prototype.getTagNames=function(){return["Create"]},e.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/util/KmlDelete",["../KmlElements","../KmlObject"],(function(e,t){var n=function(e){t.call(this,e)};return n.prototype=Object.create(t.prototype),Object.defineProperties(n.prototype,{shapes:{get:function(){return this._factory.all(this)}}}),n.prototype.getTagNames=function(){return["Delete"]},e.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/util/KmlSchema",["./../KmlElements","../KmlObject"],(function(e,t){"use strict";var n=function(e){t.call(this,e)};return(n.prototype=Object.create(t.prototype)).getTagNames=function(){return["Schema"]},e.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/features/KmlDocument",["./KmlContainer","../KmlElements","./KmlFeature","../util/KmlSchema"],(function(e,t,n,r){"use strict";var i=function(t){e.call(this,t)};return i.prototype=Object.create(e.prototype),Object.defineProperties(i.prototype,{kmlSchemas:{get:function(){return this._factory.all(this).filter((function(e){return e instanceof r}))}}}),i.prototype.getTagNames=function(){return["Document"]},t.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/features/KmlFolder",["./KmlContainer","./../KmlElements"],(function(e,t){"use strict";var n=function(t){e.call(this,t)};return(n.prototype=Object.create(e.prototype)).getTagNames=function(){return["Folder"]},t.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/geom/KmlGeometry",["../KmlObject"],(function(e){"use strict";var t=function(t){e.call(this,t),this._renderable=null};return(t.prototype=Object.create(e.prototype)).render=function(t,n){e.prototype.render.call(this,t,n),this.enabled=n.lastVisibility},t.prototype.getTagNames=t.getTagNames=function(){return["Point","LinearRing","LineString","MultiGeometry","Polygon"]},t})),i("formats/kml/KmlLatLonBox",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlNorth:{get:function(){return this._factory.specific(this,{name:"north",transformer:n.number})}},kmlSouth:{get:function(){return this._factory.specific(this,{name:"south",transformer:n.number})}},kmlEast:{get:function(){return this._factory.specific(this,{name:"east",transformer:n.number})}},kmlWest:{get:function(){return this._factory.specific(this,{name:"west",transformer:n.number})}},kmlRotation:{get:function(){return this._factory.specific(this,{name:"rotation",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["LatLonBox"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlLatLonQuad",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlCoordinates:{get:function(){return this._factory.specific(this,{name:"coordinates",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["gx:LatLonQuad"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/features/KmlOverlay",["./KmlFeature","./../KmlIcon","../util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlColor:{get:function(){return this._factory.specific(this,{name:"color",transformer:n.string})}},kmlDrawOrder:{get:function(){return this._factory.specific(this,{name:"drawOrder",transformer:n.string})}},kmlIcon:{get:function(){return this._factory.any(this,{name:t.prototype.getTagNames()})}}}),r.prototype.getTagNames=function(){return["PhotoOverlay","ScreenOverlay","GroundOverlay"]},r})),i("formats/kml/features/KmlGroundOverlay",["./../KmlElements","./KmlFeature","../KmlLatLonBox","../KmlLatLonQuad","./KmlOverlay","../util/KmlNodeTransformers","../../../geom/Sector","../../../shapes/SurfaceImage"],(function(e,t,n,r,i,o,a,s){"use strict";var u=function(e){this.isGroundOverlay=!0,i.call(this,e)};return u.prototype=Object.create(i.prototype),Object.defineProperties(u.prototype,{kmlAltitude:{get:function(){return this._factory.specific(this,{name:"altitude",transformer:o.string})}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:o.string})}},kmlLatLonBox:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}},kmlLatLonQuad:{get:function(){return this._factory.any(this,{name:r.prototype.getTagNames()})}}}),u.prototype.render=function(e,n){t.prototype.render.call(this,e,n),!this._renderable&&this.enabled&&this.kmlIcon&&this.kmlLatLonBox&&(this._renderable=new s(new a(this.kmlLatLonBox.kmlSouth,this.kmlLatLonBox.kmlNorth,this.kmlLatLonBox.kmlWest,this.kmlLatLonBox.kmlEast),this.kmlIcon.kmlHref(n.fileCache)),e.redrawRequested=!0),this._renderable&&this._renderable.render(e)},u.prototype.getTagNames=function(){return["GroundOverlay"]},e.addKey(u.prototype.getTagNames()[0],u),u})),i("formats/kml/util/KmlImagePyramid",["../KmlElements","../KmlObject","../util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlTileSize:{get:function(){return this._factory.specific(this,{name:"tileSize",transformer:n.number})}},kmlMaxWidth:{get:function(){return this._factory.specific(this,{name:"maxWidth",transformer:n.number})}},kmlMaxHeight:{get:function(){return this._factory.specific(this,{name:"maxHeight",transformer:n.number})}},kmlGridOrigin:{get:function(){return this._factory.specific(this,{name:"gridOrigin",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["ImagePyramid"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("shapes/Path",["../shapes/AbstractShape","../error/ArgumentError","../shaders/BasicTextureProgram","../geom/BoundingBox","../util/Color","../geom/Location","../util/Logger","../geom/Matrix","../pick/PickedObject","../geom/Position","../shapes/ShapeAttributes","../shapes/SurfacePolyline","../geom/Vec2","../geom/Vec3"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d){"use strict";var p=function(n,r){if(!n)throw new t(a.logMessage(a.LEVEL_SEVERE,"Path","constructor","missingPositions"));e.call(this,r),this._positions=n,this._pathType=WorldWind.GREAT_CIRCLE,this._terrainConformance=10,this._numSubSegments=10,this.referencePosition=this.determineReferencePosition(this._positions),this.scratchPoint=new d(0,0,0)};return p.prototype=Object.create(e.prototype),Object.defineProperties(p.prototype,{positions:{get:function(){return this._positions},set:function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Path","constructor","missingPositions"));this._positions=e,this.referencePosition=this.determineReferencePosition(this._positions),this.reset()}},followTerrain:{get:function(){return this._followTerrain},set:function(e){this._followTerrain=e,this.reset()}},terrainConformance:{get:function(){return this._terrainConformance},set:function(e){this._terrainConformance=e,this.reset()}},numSubSegments:{get:function(){return this._numSubSegments},set:function(e){this._numSubSegments=e>=0?e:0,this.reset()}},pathType:{get:function(){return this._pathType},set:function(e){this._pathType=e,this.reset()}},extrude:{get:function(){return this._extrude},set:function(e){this._extrude=e,this.reset()}}}),p.prototype.determineReferencePosition=function(e){return e.length>0?e[0]:null},p.prototype.mustGenerateGeometry=function(e){return!this.currentData.tessellatedPoints||this.currentData.drawInterior!==this.activeAttributes.drawInterior||this.currentData.drawVerticals!==this.activeAttributes.drawVerticals||!this.followTerrain&&this.currentData.numSubSegments!==this.numSubSegments||!(!this.followTerrain||this.currentData.terrainConformance===this.terrainConformance)||this.altitudeMode!==WorldWind.ABSOLUTE&&this.currentData.isExpired},p.prototype.createSurfaceShape=function(){return new h(this.positions,null)},p.prototype.doMakeOrderedRenderable=function(e){if(!this.referencePosition)return null;if(!this.mustGenerateGeometry(e))return this;var t=this.currentData.referencePoint;e.surfacePointForMode(this.referencePosition.latitude,this.referencePosition.longitude,this.referencePosition.altitude,this._altitudeMode,t),this.currentData.transformationMatrix.setToTranslation(t[0],t[1],t[2]);var n=this.makeTessellatedPositions(e);if(n.length<2)return null;var i=this.computeRenderedPath(e,n);return this.currentData.tessellatedPoints=i,this.currentData.drawInterior=this.activeAttributes.drawInterior,this.currentData.drawVerticals=this.activeAttributes.drawVerticals,this.currentData.numSubSegments=this.numSubSegments,this.currentData.terrainConformance=this.terrainConformance,this.resetExpiration(this.currentData),this.currentData.fillVbo=!0,this.currentData.extent||(this.currentData.extent=new r),this.currentData.extent.setToPoints(i),this.currentData.extent.translate(this.currentData.referencePoint),this},p.prototype.makeTessellatedPositions=function(e){var t,n,r,i=[],o=e.eyePoint,a=this.mustDrawVerticals(e),s=new d(0,0,0),u=new d(0,0,0),l=this._positions[0];a&&(this.currentData.verticalIndices=new Int16Array(2*this.positions.length),this.currentData.verticalIndices[0]=0,this.currentData.verticalIndices[1]=1),i.push(l),e.surfacePointForMode(l.latitude,l.longitude,l.altitude,this._altitudeMode,s);for(var c=1,h=this._positions.length;c<h;c++)if(t=this._positions[c],e.surfacePointForMode(t.latitude,t.longitude,t.altitude,this._altitudeMode,u),n=o.distanceTo(s),r=e.pixelSizeAtDistance(n),s.distanceTo(u)<8*r&&this.altitudeMode!==WorldWind.ABSOLUTE?i.push(t):this.makeSegment(e,l,t,s,u,i),l=t,s.copy(u),a){var f=2*(i.length-1);this.currentData.verticalIndices[2*c]=f,this.currentData.verticalIndices[2*c+1]=f+1}return i},p.prototype.makeSegment=function(e,t,n,r,i,a){var s,u,c,h,f,d,p=e.eyePoint,m=new o(0,0),g=0;if(this._pathType!==WorldWind.LINEAR||this._followTerrain){if(c=this._pathType===WorldWind.LINEAR?o.linearDistance(t,n):this._pathType===WorldWind.RHUMB_LINE?o.rhumbDistance(t,n):o.greatCircleDistance(t,n),this._altitudeMode!==WorldWind.CLAMP_TO_GROUND&&(g=.5*(t.altitude+n.altitude)),!((s=c*(e.globe.equatorialRadius+g*e.verticalExaggeration))<=0)){for(u=this._pathType===WorldWind.LINEAR?o.linearAzimuth(t,n):this._pathType===WorldWind.RHUMB_LINE?o.rhumbAzimuth(t,n):o.greatCircleAzimuth(t,n),this.scratchPoint.copy(r),h=0,f=0;h<1&&!(s<(f+=this._followTerrain?this._terrainConformance*e.pixelSizeAtDistance(this.scratchPoint.distanceTo(p)):s/this._numSubSegments)||s-f<1e-9);)d=(h=f/s)*c,this._pathType===WorldWind.LINEAR?o.linearLocation(t,u,d,m):this._pathType===WorldWind.RHUMB_LINE?o.rhumbLocation(t,u,d,m):o.greatCircleLocation(t,u,d,m),m.altitude=(1-h)*t.altitude+h*n.altitude,a.push(new l(m.latitude,m.longitude,m.altitude)),this._followTerrain&&e.surfacePointForMode(m.latitude,m.longitude,m.altitude,WorldWind.CLAMP_TO_GROUND,this.scratchPoint);a.push(n)}}else r.equals(i)||a.push(n)},p.prototype.computeRenderedPath=function(e,t){var n,r,i,o,a=this.mustDrawInterior(e)||this.mustDrawVerticals(e),s=Number.MAX_VALUE,u=e.eyePoint,l=(a?2:1)*t.length,c=new Float32Array(3*l),h=a?6:3,f=new d(0,0,0);n=this._followTerrain&&this.altitudeMode!==WorldWind.CLAMP_TO_GROUND?WorldWind.RELATIVE_TO_GROUND:this.altitudeMode;for(var p=0,m=t.length;p<m;p++)r=t[p],e.surfacePointForMode(r.latitude,r.longitude,r.altitude,n,f),(o=f.distanceToSquared(u))<s&&(s=o),f.subtract(this.currentData.referencePoint),c[i=h*p]=f[0],c[i+1]=f[1],c[i+2]=f[2],a&&(e.surfacePointForMode(r.latitude,r.longitude,0,WorldWind.CLAMP_TO_GROUND,f),(o=f.distanceToSquared(u))<s&&(s=o),f.subtract(this.currentData.referencePoint),c[i+3]=f[0],c[i+4]=f[1],c[i+5]=f[2]);return this.currentData.pointBufferHasExtrusionPoints=a,this.currentData.eyeDistance=Math.sqrt(s),c},p.prototype.mustDrawInterior=function(e){return this.activeAttributes.drawInterior&&this._extrude&&this._altitudeMode!==WorldWind.CLAMP_TO_GROUND},p.prototype.mustDrawVerticals=function(e){return this.activeAttributes.drawOutline&&this.activeAttributes.drawVerticals&&this.altitudeMode!==WorldWind.CLAMP_TO_GROUND},p.prototype.doRenderOrdered=function(e){var t,n,r,i,o,a=e.currentGlContext,s=e.currentProgram,l=this.currentData,c=l.tessellatedPoints.length/3;if(this.applyMvpMatrix(e),l.vboCacheKey||(l.vboCacheKey=e.gpuResourceCache.generateCacheKey()),(t=e.gpuResourceCache.resourceForKey(l.vboCacheKey))||(t=a.createBuffer(),e.gpuResourceCache.putResource(this.currentData.vboCacheKey,t,4*l.tessellatedPoints.length),l.fillVbo=!0),a.bindBuffer(a.ARRAY_BUFFER,t),l.fillVbo&&(a.bufferData(a.ARRAY_BUFFER,l.tessellatedPoints,a.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1)),s.loadTextureEnabled(a,!1),e.pickingMode&&(r=e.uniquePickColor()),this.mustDrawInterior(e)&&(n=this.activeAttributes.interiorColor,a.depthMask(n.alpha*this.layer.opacity>=1||e.pickingMode),s.loadColor(a,e.pickingMode?r:n),s.loadOpacity(a,e.pickingMode?1:this.layer.opacity),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,0,0),a.drawArrays(a.TRIANGLE_STRIP,0,c)),this.activeAttributes.drawOutline&&((this.mustDrawVerticals(e)&&this.mustDrawInterior(e)||this.altitudeMode===WorldWind.CLAMP_TO_GROUND)&&this.applyMvpMatrixForOutline(e),n=this.activeAttributes.outlineColor,a.depthMask(n.alpha*this.layer.opacity>=1||e.pickingMode),s.loadColor(a,e.pickingMode?r:n),s.loadOpacity(a,e.pickingMode?1:this.layer.opacity),a.lineWidth(this.activeAttributes.outlineWidth),this.currentData.pointBufferHasExtrusionPoints?(i=24,o=c/2):(i=12,o=c),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,i,0),a.drawArrays(a.LINE_STRIP,0,o),this.mustDrawVerticals(e)&&(l.verticalIndicesVboCacheKey||(l.verticalIndicesVboCacheKey=e.gpuResourceCache.generateCacheKey()),(t=e.gpuResourceCache.resourceForKey(l.verticalIndicesVboCacheKey))||(t=a.createBuffer(),e.gpuResourceCache.putResource(l.verticalIndicesVboCacheKey,t,4*l.verticalIndices.length),l.fillVbo=!0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t),l.fillVbo&&(a.bufferData(a.ELEMENT_ARRAY_BUFFER,l.verticalIndices,a.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1)),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,0,0),a.drawElements(a.LINES,l.verticalIndices.length,a.UNSIGNED_SHORT,0))),l.fillVbo=!1,e.pickingMode){var h=new u(r,this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);e.resolvePick(h)}},p.prototype.beginDrawing=function(e){var t=e.currentGlContext;this.mustDrawInterior(e)&&t.disable(t.CULL_FACE),e.findAndBindProgram(n),t.enableVertexAttribArray(e.currentProgram.vertexPointLocation)},p.prototype.endDrawing=function(e){var t=e.currentGlContext;t.disableVertexAttribArray(e.currentProgram.vertexPointLocation),t.depthMask(!0),t.lineWidth(1),t.enable(t.CULL_FACE)},p})),i("formats/kml/geom/KmlLineString",["../../../util/Color","../KmlElements","./KmlGeometry","../styles/KmlStyle","../../../geom/Location","../util/KmlNodeTransformers","../../../shapes/Path","../../../geom/Position","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolyline","../../../util/WWUtil"],(function(e,t,n,r,i,o,a,s,u,l,c){"use strict";var h=function(e){n.call(this,e),this._style=null};return h.prototype=Object.create(n.prototype),Object.defineProperties(h.prototype,{kmlExtrude:{get:function(){return this._factory.specific(this,{name:"extrude",transformer:o.boolean})||!1}},kmlTessellate:{get:function(){return this._factory.specific(this,{name:"tessellate",transformer:o.boolean})||!1}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:o.string})||WorldWind.ABSOLUTE}},kmlPositions:{get:function(){return this._factory.specific(this,{name:"coordinates",transformer:o.positions})}},kmlCenter:{get:function(){var e=this.kmlPositions,t=0,n=0,r=0;return e.forEach((function(e){t+=e.latitude,n+=e.longitude,r+=e.altitude})),new s(t/this.kmlPositions.length,n/this.kmlPositions.length,r/this.kmlPositions.length)}}}),h.prototype.createPath=function(e,t){this.kmlAltitudeMode==WorldWind.CLAMP_TO_GROUND?this._renderable=new l(this.prepareLocations(),this.prepareAttributes(e.normal,t)):this._renderable=new a(this.prepareLocations(),this.prepareAttributes(e.normal,t)),e.highlight&&(this._renderable.highlightAttributes=this.prepareAttributes(e.highlight,t)),this.moveValidProperties()},h.prototype.render=function(e,t){n.prototype.render.call(this,e,t),t.lastStyle&&!this._renderable&&(this.createPath(t.lastStyle,t.fileCache),e.redrawRequested=!0),this._renderable&&(this._renderable.enabled=this.enabled,this._renderable.render(e))},h.prototype.prepareAttributes=function(e,t){var n=e&&e.generate(t)||{};return n._applyLighting=!0,n._drawOutline=!0,n._drawInterior=!0,n._drawVerticals=this.kmlExtrude||!1,n._outlineStippleFactor=0,n._outlineStipplePattern=61680,n._enableLighting=!0,new u(r.shapeAttributes(n))},h.prototype.prepareLocations=function(){return this.kmlPositions},h.prototype.moveValidProperties=function(){this._renderable.extrude=this.kmlExtrude||!1,this._renderable.altitudeMode=this.kmlAltitudeMode||WorldWind.ABSOLUTE,this._renderable.tesselate=this.kmlTesselate||!1},h.prototype.equals=function(e){return!!e&&c.arrayEquals(e.kmlPositions,this.kmlPositions)&&e.kmlExtrude==this.kmlExtrude&&e.kmlTessellate==this.kmlTessellate&&e.kmlAltitudeMode==this.kmlAltitudeMode},h.prototype.getTagNames=function(){return["LineString"]},t.addKey(h.prototype.getTagNames()[0],h),h})),i("formats/kml/geom/KmlLinearRing",["./KmlLineString","../KmlElements"],(function(e,t){"use strict";var n=function(t){e.call(this,t)};return(n.prototype=Object.create(e.prototype)).getTagNames=function(){return["LinearRing"]},t.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/KmlLocation",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlLongitude:{get:function(){return this._factory.specific(this,{name:"longitude",transformer:n.string})}},kmlLatitude:{get:function(){return this._factory.specific(this,{name:"latitude",transformer:n.string})}},kmlAltitude:{get:function(){return this._factory.specific(this,{name:"altitude",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["Location"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlLookAt",["./KmlAbstractView","./KmlElements","./util/KmlNodeTransformers","../../geom/Position"],(function(e,t,n,r){"use strict";var i=function(t){e.call(this,t)};return i.prototype=Object.create(e.prototype),Object.defineProperties(i.prototype,{kmlLongitude:{get:function(){return this._factory.specific(this,{name:"longitude",transformer:n.number})}},kmlLatitude:{get:function(){return this._factory.specific(this,{name:"latitude",transformer:n.number})}},kmlAltitude:{get:function(){return this._factory.specific(this,{name:"altitude",transformer:n.number})}},kmlHeading:{get:function(){return this._factory.specific(this,{name:"heading",transformer:n.number})}},kmlTilt:{get:function(){return this._factory.specific(this,{name:"tilt",transformer:n.number})}},kmlRange:{get:function(){return this._factory.specific(this,{name:"range",transformer:n.number})}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:n.string})}}}),i.prototype.update=function(e){if(e.wwd){var t=this.kmlAltitude||4e3;e.wwd.goTo(new r(this.kmlLatitude,this.kmlLongitude,t))}},i.prototype.getTagNames=function(){return["LookAt"]},t.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/geom/KmlMultiGeometry",["./../KmlElements","./KmlGeometry","../../../geom/Position"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e),this._style=e.style};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlShapes:{get:function(){return this._factory.all(this)}},kmlCenter:{get:function(){var e=this.kmlShapes.map((function(e){return e.kmlCenter})),t=0,r=0,i=0;return e.forEach((function(e){t+=e.latitude,r+=e.longitude,i+=e.altitude})),new n(t/e.length,r/e.length,i/e.length)}}}),r.prototype.render=function(e,n){t.prototype.render.call(this,e,n),this.kmlShapes.forEach((function(t){t.render(e,n)}))},r.prototype.getTagNames=function(){return["MultiGeometry"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/geom/KmlMultiTrack",["./../KmlElements","./KmlGeometry"],(function(e,t){"use strict";var n=function(e){t.call(this,e)};return(n.prototype=Object.create(t.prototype)).getTagNames=function(){return["gx:MultiTrack"]},e.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/features/KmlNetworkLink",["./../KmlElements","./KmlFeature","../KmlFile","../KmlLink","../util/KmlNodeTransformers","../util/KmlRefreshListener"],(function(e,t,n,r,i,o){"use strict";var a="refreshNetworkLinkEvent",s=function(e){t.call(this,e),this.isFeature=!0,this.resolvedFile=null,this.displayed=!1,this.isDownloading=!1};return s.prototype=Object.create(t.prototype),Object.defineProperties(s.prototype,{kmlRefreshVisibility:{get:function(){return this._factory.specific(this,{name:"refreshVisibility",transformer:i.boolean})}},kmlFlyToView:{get:function(){return this._factory.specific(this,{name:"flyToView",transformer:i.boolean})}},kmlLink:{get:function(){return this._factory.any(this,{name:r.prototype.getTagNames()})}}}),s.prototype.getTagNames=function(){return["NetworkLink"]},s.prototype.render=function(e,r){if(t.prototype.render.call(this,e,r),r.lastVisibility||this.displayed){if(!this.isDownloading&&!this.resolvedFile){this.isDownloading=!0;var i=this;new n(i.buildUrl(r.fileCache)).then((function(e){i.resolvedFile=e,i.isDownloading=!1,i.fireEvent(r)}))}this.resolvedFile&&!this.displayed&&(this.resolvedFile.render(e,r),this.handleRefresh(r))}},s.prototype.buildUrl=function(e){return this.kmlLink.kmlHref(e)},s.prototype.handleRefresh=function(e){var t=e.activeEvents;if((t=t.filter((function(e){return e.type==a}))).length>0){var r=this;new n(r.buildUrl(e.fileCache)).then((function(t){r.resolvedFile=t,r.fireEvent(e)}))}},s.prototype.fireEvent=function(e){var t=0;if("onInterval"==this.kmlLink.kmlRefreshMode)t=1e3*this.kmlLink.kmlRefreshInterval;else{if("onExpire"!=this.kmlLink.kmlRefreshMode)return;if(!this.resolvedFile)return;t=this.resolvedFile.getExpired()}e.listener.addEvent(new o.Event(a,t,null))},e.addKey(s.prototype.getTagNames()[0],s),s})),i("formats/kml/util/KmlUpdate",["./KmlChange","./KmlCreate","./KmlDelete","../KmlElements","../KmlObject","./KmlNodeTransformers"],(function(e,t,n,r,i,o){var a=function(e){i.call(this,e)};return a.prototype=Object.create(i.prototype),Object.defineProperties(a.prototype,{targetHref:{get:function(){return this._factory.specific(this,{name:"minRefreshPeriod",transformer:o.number})}},Change:{get:function(){return this._factory.any(this,{name:e.prototype.getTagNames()})}},Create:{get:function(){return this._factory.any(this,{name:t.prototype.getTagNames()})}},Delete:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}}}),a.prototype.getTagNames=function(){return["Update"]},r.addKey(a.prototype.getTagNames()[0],a),a})),i("formats/kml/util/KmlNetworkLinkControl",["../KmlAbstractView","../KmlElements","../KmlObject","./KmlNodeTransformers","./KmlUpdate"],(function(e,t,n,r,i){var o=function(e){n.call(this,e)};return o.prototype=Object.create(n.prototype),Object.defineProperties(o.prototype,{minRefreshPeriod:{get:function(){return this._factory.specific(this,{name:"minRefreshPeriod",transformer:r.number})}},maxSessionLength:{get:function(){return this._factory.specific(this,{name:"maxSessionLength",transformer:r.number})}},cookie:{get:function(){return this._factory.specific(this,{name:"cookie",transformer:r.string})}},message:{get:function(){return this._factory.specific(this,{name:"message",transformer:r.string})}},linkName:{get:function(){return this._factory.specific(this,{name:"linkName",transformer:r.string})}},linkDescription:{get:function(){return this._factory.specific(this,{name:"linkDescription",transformer:r.string})}},linkSnippet:{get:function(){return this._factory.specific(this,{name:"linkSnippet",transformer:r.string})}},expires:{get:function(){return this._factory.specific(this,{name:"expires",transformer:r.date})}},Update:{get:function(){return this._factory.any(this,{name:i.prototype.getTagNames()})}},AbstractView:{get:function(){return this._factory.any(this,{name:e.prototype.getTagNames()})}}}),o.prototype.getTagNames=function(){return["NetworkLinkControl"]},t.addKey(o.prototype.getTagNames()[0],o),o})),i("formats/kml/KmlOrientation",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlHeading:{get:function(){return this._factory.specific(this,{name:"heading",transformer:n.number})}},kmlTilt:{get:function(){return this._factory.specific(this,{name:"tilt",transformer:n.number})}},kmlRoll:{get:function(){return this._factory.specific(this,{name:"roll",transformer:n.number})}}}),r.prototype.getTagNames=function(){return["Orientation"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/geom/KmlPoint",["../../../util/Color","../KmlElements","./KmlGeometry","../../../geom/Location","../util/KmlNodeTransformers","../../../shapes/Polygon","../../../geom/Position"],(function(e,t,n,r,i,o,a){"use strict";var s=function(e){n.call(this,e),this._shape=null};return s.prototype=Object.create(n.prototype),Object.defineProperties(s.prototype,{kmlPosition:{get:function(){var e=this._factory.specific(this,{name:"coordinates",transformer:i.string}).split(",");return new a(e[1],e[0],e[2]||0)}},kmlExtrude:{get:function(){return this._factory.specific(this,{name:"extrude",transformer:i.boolean})}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:i.string})}},kmlCenter:{get:function(){return this.kmlPosition}}}),s.prototype.getTagNames=function(){return["Point"]},t.addKey(s.prototype.getTagNames()[0],s),s})),i("formats/kml/util/KmlViewVolume",["../KmlElements","../KmlObject","./KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlLeftFov:{get:function(){return this._factory.specific(this,{name:"leftFov",transformer:n.number})}},kmlRightFov:{get:function(){return this._factory.specific(this,{name:"rightFov",transformer:n.number})}},kmlBottomFov:{get:function(){return this._factory.specific(this,{name:"bottomFov",transformer:n.number})}},kmlTopFov:{get:function(){return this._factory.specific(this,{name:"topFov",transformer:n.number})}},kmlNear:{get:function(){return this._factory.specific(this,{name:"near",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["ViewVolume"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/features/KmlPhotoOverlay",["../util/KmlImagePyramid","./../KmlElements","./KmlOverlay","../geom/KmlPoint","../util/KmlNodeTransformers","../util/KmlViewVolume"],(function(e,t,n,r,i,o){"use strict";var a=function(e){n.call(this,e)};return a.prototype=Object.create(n.prototype),Object.defineProperties(a.prototype,{kmlRotation:{get:function(){return this._factory.specific(this,{name:"rotation",transformer:i.string})}},kmlShape:{get:function(){return this._factory.specific(this,{name:"shape",transformer:i.string})}},kmlPoint:{get:function(){return this._factory.any(this,{name:r.prototype.getTagNames()})}},kmlViewVolume:{get:function(){return this._factory.any(this,{name:o.prototype.getTagNames()})}},kmlImagePyramid:{get:function(){return this._factory.any(this,{name:e.prototype.getTagNames()})}}}),a.prototype.getTagNames=function(){return["PhotoOverlay"]},t.addKey(a.prototype.getTagNames[0],a),a})),i("formats/kml/features/KmlPlacemark",["./../KmlElements","./KmlFeature","../geom/KmlGeometry","../styles/KmlStyle","../KmlTimeSpan","../KmlTimeStamp","../../../shapes/PlacemarkAttributes","../../../shapes/Placemark","../../../util/Color","../../../shapes/ShapeAttributes","../../../shapes/TextAttributes","../../../util/Offset","../../../util/WWUtil"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f){"use strict";var d=function(e){t.call(this,e)};return d.prototype=Object.create(t.prototype),Object.defineProperties(d.prototype,{kmlGeometry:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}}}),d.prototype.render=function(e,n){t.prototype.render.call(this,e,n),(n=f.clone(n)).lastStyle&&!this._renderable&&this.kmlGeometry&&(this._renderable=new s(this.kmlGeometry.kmlCenter,!1,this.prepareAttributes(n.lastStyle.normal,n.fileCache)),n.lastStyle.highlight&&(this._renderable.highlightAttributes=this.prepareAttributes(n.lastStyle.highlight,n.fileCache)),this.moveValidProperties(),e.redrawRequested=!0),this._renderable&&this.kmlGeometry&&(this.kmlGeometry.render(e,n),this._renderable.render(e))},d.prototype.prepareAttributes=function(e,t){var n=e&&e.generate({},t)||{normal:{},highlight:{}},i=new a(r.placemarkAttributes(n));return i.imageOffset=new h(WorldWind.OFFSET_FRACTION,.3,WorldWind.OFFSET_FRACTION,0),i.imageColor=u.WHITE,i.labelAttributes=new c(r.textAttributes({_offset:new h(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,1),_color:u.YELLOW})),i.drawLeaderLine=!0,i.leaderLineAttributes=new l(r.shapeAttributes({_outlineColor:u.RED})),i},d.prototype.moveValidProperties=function(){this._renderable.label=this.kmlName||"",this._renderable.altitudeMode=this.kmlAltitudeMode||WorldWind.RELATIVE_TO_GROUND,this._renderable.enableLeaderLinePicking=!0},d.prototype.getTagNames=function(){return["Placemark"]},e.addKey(d.prototype.getTagNames()[0],d),d})),i("formats/kml/geom/KmlPolygon",["../../../util/Color","../KmlElements","./KmlGeometry","./KmlLinearRing","../styles/KmlStyle","../../../geom/Location","../util/KmlNodeTransformers","../../../shapes/Polygon","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolygon"],(function(e,t,n,r,i,o,a,s,u,l){"use strict";var c=function(e){n.call(this,e),this.initialized=!1};return c.prototype=Object.create(n.prototype),Object.defineProperties(c.prototype,{kmlExtrude:{get:function(){return this._factory.specific(this,{name:"extrude",transformer:a.boolean})}},kmlTessellate:{get:function(){return this._factory.specific(this,{name:"tessellate",transformer:a.boolean})}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:a.string})}},kmlOuterBoundary:{get:function(){return this._factory.specific(this,{name:"outerBoundaryIs",transformer:a.linearRing})}},kmlInnerBoundary:{get:function(){return this._factory.specific(this,{name:"innerBoundaryIs",transformer:a.linearRing})}},kmlCenter:{get:function(){return this.kmlOuterBoundary.kmlCenter}}}),c.prototype.createPolygon=function(e,t){console.log(this.kmlInnerBoundary&&this.kmlInnerBoundary.kmlAltitudeMode===WorldWind.CLAMP_TO_GROUND),!this.isValidAltitudeMode(this.kmlAltitudeMode)||this.kmlAltitudeMode===WorldWind.CLAMP_TO_GROUND||this.kmlInnerBoundary&&this.kmlInnerBoundary.kmlAltitudeMode===WorldWind.CLAMP_TO_GROUND||this.kmlOuterBoundary&&this.kmlOuterBoundary.kmlAltitudeMode===WorldWind.CLAMP_TO_GROUND?this._renderable=new l(this.prepareLocations(),this.prepareAttributes(e.normal,t)):this._renderable=new s(this.prepareLocations(),this.prepareAttributes(e.normal,t)),e.highlight&&(this._renderable.highlightAttributes=this.prepareAttributes(e.highlight,t)),this.moveValidProperties()},c.prototype.render=function(e,t){n.prototype.render.call(this,e,t),t.lastStyle&&!this._renderable&&(this.createPolygon(t.lastStyle,t.fileCache),e.redrawRequested=!0),this._renderable&&(this._renderable.enabled=this.enabled,this._renderable.render(e))},c.prototype.moveValidProperties=function(){this._renderable.extrude=this.kmlExtrude||!0,this._renderable.altitudeMode=this.kmlAltitudeMode||WorldWind.CLAMP_TO_GROUND},c.prototype.prepareAttributes=function(e,t){var n=e&&e.generate(t)||{};return n._drawVerticals=this.kmlExtrude||!1,n._applyLighting=!0,n._depthTest=!0,n._outlineStippleFactor=0,n._outlineStipplePattern=61680,n._enableLighting=!0,new u(i.shapeAttributes(n))},c.prototype.prepareLocations=function(){var e=[];return null!=this.kmlInnerBoundary?(e[0]=this.kmlInnerBoundary.kmlPositions,e[1]=this.kmlOuterBoundary.kmlPositions):e=this.kmlOuterBoundary.kmlPositions,e},c.prototype.isValidAltitudeMode=function(e){return WorldWind.CLAMP_TO_GROUND===e||WorldWind.RELATIVE_TO_GROUND===e||WorldWind.ABSOLUTE===e},c.prototype.getStyle=function(){return this._style},c.prototype.getTagNames=function(){return["Polygon"]},t.addKey(c.prototype.getTagNames()[0],c),c})),i("formats/kml/util/KmlScale",["./../KmlElements","../KmlObject","./KmlNodeTransformers"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlX:{get:function(){return this._factory.specific(this,{name:"x",transformer:n.number})}},kmlY:{get:function(){return this._factory.specific(this,{name:"y",transformer:n.number})}},kmlZ:{get:function(){return this._factory.specific(this,{name:"z",transformer:n.number})}}}),r.prototype.getTagNames=function(){return["Scale"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/features/KmlScreenOverlay",["./../KmlElements","./KmlFeature","./KmlOverlay","../util/KmlNodeTransformers","../../../util/Offset","../../../shapes/ScreenImage"],(function(e,t,n,r,i,o){"use strict";var a=function(e){n.call(this,e)};return a.prototype=Object.create(n.prototype),Object.defineProperties(a.prototype,{kmlRotation:{get:function(){return this._factory.specific(this,{name:"rotation",transformer:r.number})}},kmlOverlayXYx:{get:function(){return this._factory.specific(this,{name:"overlayXY",transformer:r.attribute("x"),attribute:"kmlOverlayXYx"})}},kmlOverlayXYy:{get:function(){return this._factory.specific(this,{name:"overlayXY",transformer:r.attribute("y"),attribute:"kmlOverlayXYy"})}},kmlOverlayXYxunits:{get:function(){return this._factory.specific(this,{name:"overlayXY",transformer:r.attribute("xunits"),attribute:"kmlOverlayXYxunits"})}},kmlOverlayXYyunits:{get:function(){return this._factory.specific(this,{name:"overlayXY",transformer:r.attribute("yunits"),attribute:"kmlOverlayXYyunits"})}},kmlScreenXYx:{get:function(){return this._factory.specific(this,{name:"screenXY",transformer:r.attribute("x"),attribute:"kmlScreenXYx"})}},kmlScreenXYy:{get:function(){return this._factory.specific(this,{name:"screenXY",transformer:r.attribute("y"),attribute:"kmlScreenXYy"})}},kmlScreenXYxunits:{get:function(){return this._factory.specific(this,{name:"screenXY",transformer:r.attribute("xunits"),attribute:"kmlScreenXYxunits"})}},kmlScreenXYyunits:{get:function(){return this._factory.specific(this,{name:"screenXY",transformer:r.attribute("yunits"),attribute:"kmlScreenXYyunits"})}},kmlRotationXYx:{get:function(){return this._factory.specific(this,{name:"rotationXY",transformer:r.attribute("x"),attribute:"kmlRotationXYx"})}},kmlRotationXYy:{get:function(){return this._factory.specific(this,{name:"rotationXY",transformer:r.attribute("y"),attribute:"kmlRotationXYy"})}},kmlRotationXYxunits:{get:function(){return this._factory.specific(this,{name:"rotationXY",transformer:r.attribute("xunits"),attribute:"kmlRotationXYxunits"})}},kmlRotationXYyunits:{get:function(){return this._factory.specific(this,{name:"rotationXY",transformer:r.attribute("yunits"),attribute:"kmlRotationXYyunits"})}},kmlSizex:{get:function(){return this._factory.specific(this,{name:"size",transformer:r.attribute("x"),attribute:"kmlSizex"})}},kmlSizey:{get:function(){return this._factory.specific(this,{name:"size",transformer:r.attribute("y"),attribute:"kmlSizey"})}},kmlSizexunits:{get:function(){return this._factory.specific(this,{name:"size",transformer:r.attribute("xunits"),attribute:"kmlSizexunits"})}},kmlSizeyunits:{get:function(){return this._factory.specific(this,{name:"size",transformer:r.attribute("yunits"),attribute:"kmlSizeyunits"})}}}),a.prototype.render=function(e,n){t.prototype.render.call(this,e,n),this._renderable||this.kmlIcon&&(this._renderable=new o(new i(this.kmlScreenXYxunits,this.kmlScreenXYx,this.kmlScreenXYyunits,this.kmlScreenXYy),this.kmlIcon.kmlHref(n.fileCache)),this._renderable.imageOffset=new i(this.kmlOverlayXYxunits,this.kmlOverlayXYx,this.kmlOverlayXYyunits,this.kmlOverlayXYy),e.redrawRequested=!0),this._renderable&&this._renderable.render(e)},a.prototype.getTagNames=function(){return["ScreenOverlay"]},e.addKey(a.prototype.getTagNames()[0],a),a})),i("formats/kml/features/KmlTour",["./../KmlElements","./KmlFeature"],(function(e,t){"use strict";var n=function(e){t.call(this,e)};return(n.prototype=Object.create(t.prototype)).getTagNames=function(){return["gx:Tour"]},e.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/geom/KmlTrack",["./../KmlElements","./KmlGeometry"],(function(e,t){"use strict";var n=function(e){t.call(this,e)};return(n.prototype=Object.create(t.prototype)).getTagNames=function(){return["gx:Track"]},e.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/controls/KmlTreeVisibility",["../../../util/WWUtil","./KmlControls"],(function(e,t){"use strict";var n=function(e,n){t.apply(this),this._visualElementId=e,this._wwd=n};return(n.prototype=Object.create(t.prototype)).hook=function(e,t){t.isFeature&&this.createControls(e)},n.prototype.createControls=function(t){var n,r=t.kmlName||t.id||e.guid(),i=t.enabled&&!0===t.kmlVisibility,o=document.createElement("div"),a=document.createElement("input");a.setAttribute("type","checkbox"),i&&a.setAttribute("checked","checked"),a.addEventListener("click",(function(){i=!i,s.updateDescendants(t,i)}),!0),o.appendChild(a),(n=t.kmlAbstractView?document.createElement("a"):document.createElement("span")).appendChild(document.createTextNode(r)),n.addEventListener("click",(function(){t.kmlAbstractView&&t.kmlAbstractView.update({wwd:s._wwd})}),!0),o.appendChild(n),document.getElementById(this._visualElementId).appendChild(o);var s=this},n.prototype.updateDescendants=function(e,t){e.controlledVisibility=t,this._wwd.redraw()},n})),i("layer/LandsatRestLayer",["../error/ArgumentError","../geom/Location","../util/Logger","../geom/Sector","../layer/TiledImageLayer","../util/LevelRowColumnUrlBuilder","../util/WWUtil"],(function(e,t,n,r,i,o,a){"use strict";var s=function(e,n,s){var u=a.urlPath(e+"/"+n);i.call(this,r.FULL_SPHERE,new t(36,36),10,"image/png",u,512,512),this.displayName=s,this.pickEnabled=!1,this.urlBuilder=new o(e,n)};return s.prototype=Object.create(i.prototype),s})),i("util/measure/LengthMeasurer",["../../error/ArgumentError","../../geom/Location","../Logger","./MeasurerUtils","../../geom/Position","../../geom/Vec3"],(function(e,t,n,r,i,o){var a=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"LengthMeasurer","constructor","missingWorldWindow"));this.wwd=t,this.DEFAULT_MIN_SEGMENT_LENGTH=30,this._maxSegmentLength=1e5,this._lengthTerrainSamplingSteps=128,this.subdividedPositions=null};return Object.defineProperties(a.prototype,{maxSegmentLength:{get:function(){return this._maxSegmentLength},set:function(e){this._maxSegmentLength=e}},lengthTerrainSamplingSteps:{get:function(){return this._lengthTerrainSamplingSteps},set:function(e){this._lengthTerrainSamplingSteps=e}}}),a.prototype.getLength=function(e,t,n){return n=n||WorldWind.GREAT_CIRCLE,this.subdividedPositions=null,this.computeLength(e,t,n)},a.prototype.getPathLength=function(e){return this.subdividedPositions=null,this.computeLength(e.positions,e.followTerrain,e.pathType)},a.prototype.getGeographicDistance=function(e,n){if(e instanceof WorldWind.Path)var r=e.positions,i=e.pathType;else Array.isArray(e)&&(r=e,i=n||WorldWind.GREAT_CIRCLE);if(!r||r.length<2)return-1;var o=t.greatCircleDistance;i===WorldWind.RHUMB_LINE?o=t.rhumbDistance:i===WorldWind.LINEAR&&(o=t.linearDistance);for(var a=0,s=0,u=r.length-1;s<u;s++)a+=o(r[s],r[s+1]);return a*this.wwd.globe.equatorialRadius},a.prototype.computeLength=function(e,t,n){if(!e||e.length<2)return-1;var i=this.wwd.globe;if(null==this.subdividedPositions){var a=this._maxSegmentLength;t&&(a=this.computeLength(e,!1,n)/this._lengthTerrainSamplingSteps,a=Math.min(Math.max(a,this.DEFAULT_MIN_SEGMENT_LENGTH),this._maxSegmentLength)),this.subdividedPositions=r.subdividePositions(i,e,t,n,a)}var s=0,u=this.subdividedPositions[0],l=new o(0,0,0),c=new o(0,0,0);l=i.computePointFromPosition(u.latitude,u.longitude,u.altitude,l);for(var h=1,f=this.subdividedPositions.length;h<f;h++){var d=this.subdividedPositions[h];c=i.computePointFromPosition(d.latitude,d.longitude,d.altitude,c),s+=l.distanceTo(c),l.copy(c)}return s},a})),i("navigate/Navigator",[],(function(){"use strict";return function(){this.heading=0,this.tilt=0,this.roll=0}})),i("navigate/LookAtNavigator",["../geom/Location","../navigate/Navigator"],(function(e,t){"use strict";var n=function(){t.call(this),this.lookAtLocation=new e(30,-110),this.range=1e7,this.enable2DLimits=!0};return n.prototype=Object.create(t.prototype),n})),i("cache/MemoryCacheListener",["../util/Logger","../error/UnsupportedOperationError"],(function(e,t){"use strict";var n=function(){};return n.prototype.entryRemoved=function(n,r){throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCacheListener","entryRemoved","abstractInvocation"))},n.prototype.removalError=function(n,r,i){throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCacheListener","removalError","abstractInvocation"))},n})),i("util/NominatimGeocoder",["../util/Logger"],(function(e){"use strict";var t=function(){this.service="https://open.mapquestapi.com/nominatim/v1/search/"};return t.prototype.lookup=function(e,t,n){var r=this.service+e.replace(" ","%20")+"?format=json",i=new XMLHttpRequest,o=this;r+="&key="+(n||"lUvVRchXGGDh5Xwk3oidrXeIDAAevOUS"),i.open("GET",r,!0),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var e=JSON.parse(i.responseText);t(o,e)}},i.send(null)},t})),i("ogc/ows/OwsLanguageString",["../../error/ArgumentError","../../util/Logger"],(function(e,t){"use strict";return function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"LanguageString","constructor","missingDomElement"));this.value=n.textContent,this.lang;var r=n.getAttribute("lang");r&&(this.lang=r)}})),i("ogc/ows/OwsDescription",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsLanguageString"],(function(e,t,n){"use strict";return function(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsDescription","assembleDescriptions","missingDomElement"));for(var i=r.children||r.childNodes,o=0;o<i.length;o++){var a=i[o];if("Title"===a.localName)this.titles=this.titles||[],this.titles.push(new n(a));else if("Abstract"===a.localName)this.abstracts=this.abstracts||[],this.abstracts.push(new n(a));else if("Keywords"===a.localName){this.keywords=this.keywords||[];for(var s=a.children||a.childNodes,u=0;u<s.length;u++){var l=s[u];"Keyword"===l.localName&&this.keywords.push(new n(l))}}}}})),i("ogc/ows/OwsConstraint",["../../error/ArgumentError","../../util/Logger"],(function(e,t){"use strict";return function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsConstraint","constructor","missingDomElement"));this.name=n.getAttribute("name");for(var r=n.children||n.childNodes,i=0;i<r.length;i++){var o=r[i];if("AllowedValues"===o.localName){this.allowedValues=this.allowedValues||[];for(var a=o.children||o.childNodes,s=0;s<a.length;s++)"Value"===a[s].localName&&this.allowedValues.push(a[s].textContent)}else"AnyValue"===o.localName?this.anyValue=!0:"NoValues"===o.localName&&(this.noValues=!0)}}})),i("ogc/ows/OwsOperationsMetadata",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsConstraint"],(function(e,t,n){"use strict";var r=function n(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsOperationsMetadata","constructor","missingDomElement"));for(var i=r.children||r.childNodes,o=0;o<i.length;o++){var a=i[o];"Operation"===a.localName&&(this.operation=this.operation||[],this.operation.push(n.assembleOperation(a)))}};return r.prototype.getGetCapabilities=function(){return this.getOperationMetadataByName("GetCapabilities")},r.prototype.getGetTile=function(){return this.getOperationMetadataByName("GetTile")},r.prototype.getOperationMetadataByName=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsOperationsMetadata","getOperationsMetadataByName","missingName"));for(var r=0;r<this.operation.length;r++)if(this.operation[r].name===n)return this.operation[r];return null},r.assembleOperation=function(e){var t={};t.name=e.getAttribute("name");for(var n=e.children||e.childNodes,i=0;i<n.length;i++){var o=n[i];"DCP"===o.localName&&(t.dcp=t.dcp||[],t.dcp.push(r.assembleDcp(o)))}return t},r.assembleDcp=function(e){for(var t={},n=e.children||e.childNodes,i=0;i<n.length;i++){var o=n[i];if("HTTP"===o.localName)for(var a=o.children||o.childNodes,s=0;s<a.length;s++){var u=a[s];"Get"===u.localName?(t.getMethods=t.getMethods||[],t.getMethods.push(r.assembleMethod(u))):"Post"===u.localName&&(t.postMethods=t.postMethods||[],t.postMethods.push(r.assembleMethod(u)))}}return t},r.assembleMethod=function(e){var t={};t.url=e.getAttribute("xlink:href");for(var r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];"Constraint"===o.localName&&(t.constraint=t.constraint||[],t.constraint.push(new n(o)))}return t},r})),i("ogc/ows/OwsServiceIdentification",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsDescription"],(function(e,t,n){"use strict";var r=function(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsServiceIdentification","constructor","missingDomElement"));n.call(this,r);for(var i=r.children||r.childNodes,o=0;o<i.length;o++){var a=i[o];"ServiceType"===a.localName?this.serviceType=a.textContent:"ServiceTypeVersion"===a.localName?(this.serviceTypeVersions=this.serviceTypeVersions||[],this.serviceTypeVersions.push(a.textContent)):"Profile"===a.localName?(this.profile=this.profile||[],this.profile.push(a.textContent)):"Fees"===a.localName?this.fees=a.textContent:"AccessConstraints"===a.localName&&(this.accessConstraints=this.accessConstraints||[],this.accessConstraints.push(a.textContent))}};return r.prototype=Object.create(n.prototype),r})),i("ogc/ows/OwsServiceProvider",["../../error/ArgumentError","../../util/Logger"],(function(e,t){"use strict";var n=function n(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsServiceProvider","constructor","missingDomElement"));for(var i=r.children||r.childNodes,o=0;o<i.length;o++){var a=i[o];"ProviderName"===a.localName?this.providerName=a.textContent:"ProviderSite"===a.localName?this.providerSiteUrl=a.getAttribute("xlink:href"):"ServiceContact"===a.localName&&(this.serviceContact=n.assembleServiceContact(a))}};return n.assembleServiceContact=function(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsServiceProvider","assembleServiceContact","missingDomElement"));for(var i={},o=r.children||r.childNodes,a=0;a<o.length;a++){var s=o[a];"IndividualName"===s.localName?i.individualName=s.textContent:"PositionName"===s.localName?i.positionName=s.textContent:"ContactInfo"===s.localName&&(i.contactInfo=n.assembleContacts(s))}return i},n.assembleContacts=function(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsServiceProvider","assembleContacts","missingDomElement"));for(var i={},o=r.children||r.childNodes,a=0;a<o.length;a++){var s=o[a];"HoursOfService"===s.localName?i.hoursOfService=s.textContent:"ContactInstructions"===s.localName?i.contactInstructions=s.textContent:"Phone"===s.localName?i.phone=n.assemblePhone(s):"Address"===s.localName&&(i.address=n.assembleAddress(s))}return i},n.assemblePhone=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsServiceProvider","assemblePhone","missingDomElement"));for(var r={},i=n.children||n.childNodes,o=0;o<i.length;o++){var a=i[o];"Voice"===a.localName?r.voice=a.textContent:"Facsimile"===a.localName&&(r.facsimile=a.textContent)}return r},n.assembleAddress=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsServiceProvider","assembleAddress","missingDomElement"));for(var r={},i=n.children||n.childNodes,o=0;o<i.length;o++){var a=i[o];"DeliveryPoint"===a.localName?(r.deliveryPoints=r.deliveryPoints||[],r.deliveryPoints.push(a.textContent)):"City"===a.localName?r.city=a.textContent:"AdministrativeArea"===a.localName?r.administrativeArea=a.textContent:"PostalCode"===a.localName?(r.postalCodes=r.postalCodes||[],r.postalCodes.push(a.textContent)):"Country"===a.localName?(r.countries=r.countries||[],r.countries.push(a.textContent)):"ElectronicMailAddress"===a.localName&&(r.electronicMailAddresses=r.electronicMailAddresses||[],r.electronicMailAddresses.push(a.textContent))}return r},n})),i("ogc/wms/WmsLayerCapabilities",["../../error/ArgumentError","../../util/Logger"],(function(e,t){"use strict";var n=function(n,r){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsLayerCapabilities","constructor","Layer element is null or undefined."));this.parent=r,this.layers,this.name,this.title,this.abstract,this.keywordList,this.identifiers,this.metadataUrls,this.dataUrls,this.featureListUrls,this.assembleLayer(n)};return Object.defineProperties(n.prototype,{capability:{get:function(){for(var e=this;e&&e instanceof n;)e=e.parent;return e}},queryable:{get:function(){return n.replace(this,"_queryable")}},cascaded:{get:function(){return n.replace(this,"_cascaded")}},opaque:{get:function(){return n.replace(this,"_opaque")}},noSubsets:{get:function(){return n.replace(this,"_noSubsets")}},fixedWidth:{get:function(){return n.replace(this,"_fixedWidth")}},fixedHeight:{get:function(){return n.replace(this,"_fixedHeight")}},styles:{get:function(){return n.accumulate(this,"_styles",[])}},crses:{get:function(){return n.accumulate(this,"_crses",[])}},srses:{get:function(){return n.accumulate(this,"_srses",[])}},geographicBoundingBox:{get:function(){return n.replace(this,"_geographicBoundingBox")}},latLonBoundingBox:{get:function(){return n.replace(this,"_latLonBoundingBox")}},boundingBoxes:{get:function(){return n.replace(this,"_boundingBoxes")}},dimensions:{get:function(){for(var e=[],t=this;t&&t instanceof n;)t._dimensions&&t._dimensions.length>0&&t._dimensions.forEach((function(t){var n=t.name,r=!0;e.forEach((function(e){e.name===n&&(r=!1)})),r&&e.push(t)})),t=t.parent;return e.length>0?e:void 0}},extents:{get:function(){for(var e=[],t=this;t&&t instanceof n;)t._extents&&t._extents.length>0&&t._extents.forEach((function(t){var n=t.name,r=!0;e.forEach((function(e){e.name===n&&(r=!1)})),r&&e.push(t)})),t=t.parent;return e.length>0?e:void 0}},attribution:{get:function(){return n.replace(this,"_attribution")}},authorityUrls:{get:function(){return n.accumulate(this,"_authorityUrls",[])}},minScaleDenominator:{get:function(){return n.replace(this,"_minScaleDenominator")}},maxScaleDenominator:{get:function(){return n.replace(this,"_maxScaleDenominator")}},scaleHint:{get:function(){return n.replace(this,"_scaleHint")}}}),n.prototype.style=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsLayerCapabilities","style","Style name is null or undefined."));var r=this.styles;if(!r)return null;for(var i,o=0,a=r.length;o<a;o++)if((i=r[o]).name===n)return i},n.accumulate=function(e,t,r){for(;e&&e instanceof n;){var i=e[t];if(i)for(var o=0;o<i.length;o++)r.push(i[o]);e=e.parent}return r.length>0?r:null},n.replace=function(e,t){for(;e&&e instanceof n;){var r=e[t];if(r)return r;e=e.parent}},n.prototype.assembleLayer=function(e){var t,r;(t=e.getAttribute("queryable"))&&(this._queryable="1"===t||"true"===t),(t=e.getAttribute("opaque"))&&(this._opaque="1"===t||"true"===t),(t=e.getAttribute("noSubsets"))&&(this._noSubsets="1"===t||"true"===t),(t=e.getAttribute("cascaded"))&&(this._cascaded=parseInt("10")),(t=e.getAttribute("fixedWidth"))&&(this._fixedWidth=parseInt("10")),(t=e.getAttribute("fixedHeight"))&&(this._fixedHeight=parseInt("10"));var i=e.children||e.childNodes;for(r=0;r<i.length;r++){var o=i[r];if("Layer"===o.localName)this.layers||(this.layers=[]),this.layers.push(new n(o,this));else if("Name"===o.localName)this.name=o.textContent;else if("Title"===o.localName)this.title=o.textContent;else if("Abstract"===o.localName)this.abstract=o.textContent;else if("KeywordList"===o.localName){this.keywordList=this.keywordList||[];for(var a=o.children||o.childNodes,s=0;s<a.length;s++){var u=a[s];"Keyword"===u.localName&&this.keywordList.push(u.textContent)}}else"Style"===o.localName?(this._styles||(this._styles=[]),this._styles.push(n.assembleStyle(o))):"CRS"===o.localName?(this._crses||(this._crses=[]),this._crses.push(o.textContent)):"SRS"===o.localName?(this._srses||(this._srses=[]),this._srses.push(o.textContent)):"EX_GeographicBoundingBox"===o.localName?this._geographicBoundingBox=n.assembleGeographicBoundingBox(o):"LatLonBoundingBox"===o.localName?this._geographicBoundingBox=n.assembleLatLonBoundingBox(o):"BoundingBox"===o.localName?(this._boundingBoxes||(this._boundingBoxes=[]),this._boundingBoxes.push(n.assembleBoundingBox(o))):"Dimension"===o.localName?(this._dimensions||(this._dimensions=[]),this._dimensions.push(n.assembleDimension(o))):"Extent"===o.localName?(this._extents||(this._extents=[]),this._extents.push(n.assembleDimension(o))):"Attribution"===o.localName?this._attribution=n.assembleAttribution(o):"AuthorityURL"===o.localName?(this._authorityUrls||(this._authorityUrls=[]),this._authorityUrls.push(n.assembleAuthorityUrl(o))):"Identifier"===o.localName?(this.identifiers||(this.identifiers=[]),this.identifiers.push(n.assembleIdentifier(o))):"MetadataURL"===o.localName?(this.metadataUrls||(this.metadataUrls=[]),this.metadataUrls.push(n.assembleMetadataUrl(o))):"DataURL"===o.localName?(this.dataUrls||(this.dataUrls=[]),this.dataUrls.push(n.assembleUrl(o))):"FeatureListURL"===o.localName?(this.featureListUrls||(this.featureListUrls=[]),this.featureListUrls.push(n.assembleUrl(o))):"MinScaleDenominator"===o.localName?this._minScaleDenominator=parseFloat(o.textContent):"MaxScaleDenominator"===o.localName?this._maxScaleDenominator=parseFloat(o.textContent):"ScaleHint"===o.localName&&(this._scaleHint={},this._scaleHint.min=n.getFloatAttribute(o,"min"),this._scaleHint.max=n.getFloatAttribute(o,"max"))}},n.assembleStyle=function(e){for(var t={},r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];"Name"===o.localName?t.name=o.textContent:"Title"===o.localName?t.title=o.textContent:"Abstract"===o.localName?t.abstract=o.textContent:"LegendURL"===o.localName?(t.legendUrls||(t.legendUrls=[]),t.legendUrls.push(n.assembleLegendUrl(o))):"StyleSheetURL"===o.localName?t.styleSheetUrl=n.assembleUrl(o):"StyleURL"===o.localName&&(t.styleUrl=n.assembleUrl(o))}return t},n.assembleGeographicBoundingBox=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"westBoundLongitude"===i.localName?t.westBoundLongitude=parseFloat(i.textContent):"eastBoundLongitude"===i.localName?t.eastBoundLongitude=parseFloat(i.textContent):"southBoundLatitude"===i.localName?t.southBoundLatitude=parseFloat(i.textContent):"northBoundLatitude"===i.localName&&(t.northBoundLatitude=parseFloat(i.textContent))}return t},n.assembleLatLonBoundingBox=function(e){var t={};return t.minx=n.getFloatAttribute(e,"minx"),t.miny=n.getFloatAttribute(e,"miny"),t.maxx=n.getFloatAttribute(e,"maxx"),t.maxy=n.getFloatAttribute(e,"maxy"),t},n.assembleBoundingBox=function(e){var t={};return t.crs=e.getAttribute("CRS"),t.minx=n.getFloatAttribute(e,"minx"),t.miny=n.getFloatAttribute(e,"miny"),t.maxx=n.getFloatAttribute(e,"maxx"),t.maxy=n.getFloatAttribute(e,"maxy"),t.resx=n.getFloatAttribute(e,"resx"),t.resy=n.getFloatAttribute(e,"resy"),t},n.assembleDimension=function(e){var t={};return t.name=e.getAttribute("name"),t.units=e.getAttribute("units"),t.unitSymbol=e.getAttribute("unitSymbol"),t.default=e.getAttribute("default"),t.multipleValues=e.getAttribute("multipleValues"),t.multipleValues&&(t.multipleValues="true"===t.multipleValues||"1"===t.multipleValues),t.nearestValue=e.getAttribute("nearestValue"),t.nearestValue&&(t.nearestValue="true"===t.nearestValue||"1"===t.nearestValue),t.current=e.getAttribute("current"),t.current&&(t.current="true"===t.current||"1"===t.current),t.content=e.textContent,t},n.assembleAttribution=function(e){for(var t={},r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];"Title"===o.localName?t.title=o.textContent:"OnlineResource"===o.localName?t.url=o.getAttribute("xlink:href"):"LogoUrul"===o.localName&&(t.logoUrl=n.assembleLogoUrl(o))}return t},n.assembleAuthorityUrl=function(e){var t={};t.name=e.getAttribute("name");for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"OnlineResource"===i.localName&&(t.url=i.getAttribute("xlink:href"))}return t},n.assembleIdentifier=function(e){var t={};return t.authority=e.getAttribute("authority"),t.content=e.textContent,t},n.assembleMetadataUrl=function(e){var t={};t.type=e.getAttribute("type");for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Format"===i.localName?t.format=i.textContent:"OnlineResource"===i.localName&&(t.url=i.getAttribute("xlink:href"))}return t},n.assembleLegendUrl=function(e){var t={};t.width=n.getIntegerAttribute(e,"width"),t.height=n.getIntegerAttribute(e,"height");for(var r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];"Format"===o.localName?t.format=o.textContent:"OnlineResource"===o.localName&&(t.url=o.getAttribute("xlink:href"))}return t},n.assembleLogoUrl=function(e){var t={};t.width=n.getIntegerAttribute(e,"width"),t.height=n.getIntegerAttribute(e,"height");for(var r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];"Format"===o.localName?t.format=o.textContent:"OnlineResource"===o.localName&&(t.url=o.getAttribute("xlink:href"))}return t},n.assembleUrl=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Format"===i.localName?t.format=i.textContent:"OnlineResource"===i.localName&&(t.url=i.getAttribute("xlink:href"))}return t},n.getIntegerAttribute=function(e,t){var n=e.getAttribute(t);return n?parseInt(n):void 0},n.getFloatAttribute=function(e,t){var n=e.getAttribute(t);return n?parseFloat(n):void 0},n})),i("ogc/wms/WmsCapabilities",["../../error/ArgumentError","../../util/Logger","../../ogc/wms/WmsLayerCapabilities"],(function(e,t,n){"use strict";var r=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsCapabilities","constructor","No XML DOM specified."));this.assembleDocument(n)};return r.prototype.getNamedLayers=function(){return this.accumulateNamedLayers(this.capability.layers)},r.prototype.accumulateNamedLayers=function(e,t){var n=t||[];if(!e)return n;for(var r=0,i=e.length;r<i;r++){var o=e[r];o.name&&n.push(o),o.layers&&this.accumulateNamedLayers(o.layers,n)}return n},r.prototype.getNamedLayer=function(n){if(!n||0===n.length)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsCapabilities","getNamedLayer","No WMS layer name provided."));for(var r=this.getNamedLayers(),i=0,o=r.length;i<o;i++)if(n===r[i].name)return r[i];return null},r.prototype.assembleDocument=function(e){var t=e.documentElement;this.version=t.getAttribute("version"),this.updateSequence=t.getAttribute("updateSequence");for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Service"===i.localName?this.service=this.assembleService(i):"Capability"===i.localName&&(this.capability=this.assembleCapability(i))}},r.prototype.assembleService=function(e){for(var t={capsDoc:this},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Name"===i.localName?t.name=i.textContent:"Title"===i.localName?t.title=i.textContent:"Abstract"===i.localName?t.abstract=i.textContent:"KeywordList"===i.localName?t.keywordList=this.assembleKeywordList(i):"OnlineResource"===i.localName?t.url=i.getAttribute("xlink:href"):"Fees"===i.localName?t.fees=i.textContent:"AccessConstraints"===i.localName?t.accessConstraints=i.textContent:"LayerLimit"==i.localName?t.layerLimit=parseInt(i.textContent):"MaxWidth"==i.localName?t.maxWidth=parseInt(i.textContent):"MaxHeight"==i.localName?t.maxHeight=parseInt(i.textContent):"ContactInformation"===i.localName&&(t.contactInformation=this.assembleContactInformation(i))}return t},r.prototype.assembleKeywordList=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Keyword"===i.localName&&t.push(i.textContent)}return t},r.prototype.assembleContactInformation=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"ContactPersonPrimary"===i.localName?t.contactPersonPrimary=this.assembleContactPersonPrimary(i):"ContactPosition"===i.localName?t.contactPosition=i.textContent:"ContactVoiceTelephone"===i.localName?t.contactVoiceTelephone=i.textContent:"ContactFacsimileTelephone"===i.localName?t.contactFacsimileTelephone=i.textContent:"ContactElectronicMailAddress"===i.localName?t.contactElectronicMailAddress=i.textContent:"ContactAddress"===i.localName&&(t.contactAddress=this.assembleContactAddress(i))}return t},r.prototype.assembleContactPersonPrimary=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"ContactPerson"===i.localName?t.contactPerson=i.textContent:"ContactOrganization"===i.localName&&(t.contactOrganization=i.textContent)}return t},r.prototype.assembleContactAddress=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"AddressType"===i.localName?t.addressType=i.textContent:"Address"===i.localName?t.address=i.textContent:"City"===i.localName?t.city=i.textContent:"StateOrProvince"===i.localName?t.stateOrProvince=i.textContent:"PostCode"===i.localName?t.postCode=i.textContent:"Country"===i.localName&&(t.country=i.textContent)}return t},r.prototype.assembleCapability=function(e){for(var t={capsDoc:this},r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];"Request"===o.localName?t.request=this.assembleRequests(o):"Exception"===o.localName?t.exception=this.assembleException(o):"Layer"===o.localName&&(t.layers=t.layers||[],t.layers.push(new n(o,t)))}return t},r.prototype.assembleRequests=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"GetCapabilities"===i.localName?t.getCapabilities=this.assembleRequest(i):"GetMap"===i.localName?t.getMap=this.assembleRequest(i):"GetFeatureInfo"===i.localName&&(t.getFeatureInfo=this.assembleRequest(i))}return t},r.prototype.assembleRequest=function(e){for(var t={name:e.localName},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];if("Format"===i.localName)t.formats=t.formats||[],t.formats.push(i.textContent);else if("DCPType"===i.localName)for(var o=i.children||i.childNodes,a=0;a<o.length;a++){var s=o[a];if("HTTP"===s.localName)for(var u=s.children||s.childNodes,l=0;l<u.length;l++){var c=u[l];if("Get"===c.localName)for(var h=c.children||c.childNodes,f=0;f<h.length;f++){var d=h[f];"OnlineResource"===d.localName&&(t.getUrl=d.getAttribute("xlink:href"))}}}}return t},r.prototype.assembleException=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Format"===i.localName&&(t.formats=t.formats||[],t.formats.push(i.textContent))}return t},r})),i("ogc/wmts/WmtsLayerCapabilities",["../../error/ArgumentError","../../geom/Sector","../../ogc/ows/OwsDescription","../../util/Logger"],(function(e,t,n,r){"use strict";var i=function(t,i){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"WmtsLayerCapabilities","constructor","missingDomElement"));n.call(this,t),this.capabilities=i,this.identifier,this.title,this.abstract,this.keywords,this.wgs84BoundingBox,this.boundingBox,this.styles,this.formats,this.infoFormat,this.dimension,this.metadata,this.tileMatrixSetLink,this.resourceUrl,this.assembleLayer(t)};return(i.prototype=Object.create(n.prototype)).getLayerSupportedTileMatrixSets=function(){for(var e=[],t=0,n=this.tileMatrixSetLink.length;t<n;t++)for(var r=this.tileMatrixSetLink[t].tileMatrixSet,i=0,o=this.capabilities.contents.tileMatrixSet.length;i<o;i++)this.capabilities.contents.tileMatrixSet[i].identifier===r&&e.push(this.capabilities.contents.tileMatrixSet[i]);return e},i.prototype.assembleLayer=function(e){for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n];"Identifier"===r.localName?this.identifier=r.textContent:"WGS84BoundingBox"===r.localName?this.wgs84BoundingBox=i.assembleBoundingBox(r):"BoundingBox"===r.localName?(this.boundingBox=this.boundingBox||[],this.boundingBox.push(i.assembleBoundingBox(r))):"Style"===r.localName?(this.style=this.style||[],this.style.push(i.assembleStyle(r))):"Format"===r.localName?(this.format=this.format||[],this.format.push(r.textContent)):"InfoFormat"===r.localName?(this.infoFormat=this.infoFormat||[],this.infoFormat.push(r.textContent)):"Dimension"===r.localName?(this.dimension=this.dimension||[],this.dimension.push(i.assembleDimension(r))):"Metadata"===r.localName?(this.metadata=this.metadata||[],this.metadata.push(i.assembleMetadata(r))):"ResourceURL"===r.localName?(this.resourceUrl=this.resourceUrl||[],this.resourceUrl.push(i.assembleResourceUrl(r))):"TileMatrixSetLink"===r.localName&&(this.tileMatrixSetLink=this.tileMatrixSetLink||[],this.tileMatrixSetLink.push(i.assembleTileMatrixSetLink(r)))}},i.assembleStyle=function(e){var t=new n(e);t.isDefault=e.getAttribute("isDefault");for(var r=e.children||e.childNodes,o=0;o<r.length;o++){var a=r[o];"Identifier"===a.localName?t.identifier=a.textContent:"LegendURL"===a.localName&&(t.legendUrl=t.legendUrl||[],t.legendUrl.push(i.assembleLegendUrl(a)))}return t},i.assembleBoundingBox=function(e){var n={},r=e.getAttribute("crs");r&&(n.crs=r);for(var i=e.children||e.childNodes,o=0;o<i.length;o++){var a=i[o];if("LowerCorner"===a.localName){var s=a.textContent.split(" ");n.lowerCorner=[parseFloat(s[0]),parseFloat(s[1])]}else if("UpperCorner"===a.localName){var u=a.textContent.split(" ");n.upperCorner=[parseFloat(u[0]),parseFloat(u[1])]}}return"WGS84BoundingBox"===e.localName&&(n.getSector=function(){return new t(n.lowerCorner[1],n.upperCorner[1],n.lowerCorner[0],n.upperCorner[0])}),n},i.assembleDimension=function(e){for(var t=new n(e),r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];"Identifier"===o.localName?t.identifier=o.textContent:"UOM"===o.localName?t.uom={name:o.getAttribute("name"),reference:o.getAttribute("reference")}:"UnitSymbol"==o.localName?t.unitSymbol=o.textContent:"Default"===o.localName?t.default=o.textContent:"Current"===o.localName?t.current="true"===o.textContent:"Value"===o.localName&&(t.value=t.value||[],t.value.push(o.textContent))}return t},i.assembleMetadata=function(e){var t={},n=e.getAttribute("xlink:href");n&&(t.url=n);var r=e.getAttribute("about");n&&(t.about=r);var i=e.getAttribute("xlink:type");i&&(t.type=i);var o=e.getAttribute("xlink:role");o&&(t.role=o);var a=e.getAttribute("xlink:title");a&&(t.title=a);for(var s=e.children||e.childNodes,u=0;u<s.length;u++){var l=s[u];"Metadata"===l.localName&&(t.metadata=WmsLayerCapabilities.assembleMetadata(l))}return t},i.assembleResourceUrl=function(e){var t={};return t.format=e.getAttribute("format"),t.resourceType=e.getAttribute("resourceType"),t.template=e.getAttribute("template"),t},i.assembleLegendUrl=function(e){var t={};return t.format=e.getAttribute("format"),t.minScaleDenominator=e.getAttribute("minScaleDenominator"),t.maxScaleDenominator=e.getAttribute("maxScaleDenominator"),t.href=e.getAttribute("xlink:href"),t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t},i.assembleTileMatrixSetLink=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var o=n[r];"TileMatrixSet"===o.localName?t.tileMatrixSet=o.textContent:"TileMatrixSetLimits"===o.localName&&(t.tileMatrixSetLimits=i.assembleTileMatrixSetLimits(o))}return t},i.assembleTileMatrixSetLimits=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var o=n[r];"TileMatrixLimits"===o.localName&&(t.tileMatrixLimits=t.tileMatrixLimits||[],t.tileMatrixLimits.push(i.assembleTileMatrixLimits(o)))}return t},i.assembleTileMatrixLimits=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"TileMatrix"===i.localName?t.tileMatrix=i.textContent:"MinTileRow"===i.localName?t.minTileRow=parseInt(i.textContent):"MaxTileRow"===i.localName?t.maxTileRow=parseInt(i.textContent):"MinTileCol"===i.localName?t.minTileCol=parseInt(i.textContent):"maxTileCol"===i.localName&&(t.maxTileCol=parseInt(i.textContent))}return t},i})),i("ogc/wmts/WmtsCapabilities",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsDescription","../../ogc/ows/OwsLanguageString","../../ogc/ows/OwsOperationsMetadata","../../ogc/ows/OwsServiceIdentification","../../ogc/ows/OwsServiceProvider","../../ogc/wms/WmsCapabilities","../../ogc/wmts/WmtsLayerCapabilities"],(function(e,t,n,r,i,o,a,s,u){"use strict";var l=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmtsCapabilities","constructor","No XML DOM specified."));this.assembleDocument(n)};return l.prototype.getLayers=function(){return this.contents.layer},l.prototype.getLayer=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmtsCapabilities","getLayer","empty identifier"));for(var r=0,i=this.contents.layer.length;r<i;r++){var o=this.contents.layer[r];if(o.identifier===n)return o}return null},l.prototype.assembleDocument=function(e){var t=e.documentElement;this.version=t.getAttribute("version"),this.updateSequence=t.getAttribute("updateSequence");for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var s=n[r];"ServiceIdentification"===s.localName?this.serviceIdentification=new o(s):"ServiceProvider"===s.localName?this.serviceProvider=new a(s):"OperationsMetadata"===s.localName?this.operationsMetadata=new i(s):"Contents"===s.localName?this.contents=this.assembleContents(s):"Themes"===s.localName?this.themes=l.assembleThemes(s):"ServiceMetadataURL"===s.localName&&(this.serviceMetadataUrls=this.serviceMetadataUrls||[],this.serviceMetadataUrls.push(l.assembleServiceMetadataURL(s)))}},l.prototype.assembleContents=function(e){for(var n={},r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];if("Layer"===o.localName){n.layer=n.layer||[];try{n.layer.push(new u(o,this))}catch(e){t.logMessage(t.LEVEL_SEVERE,"WmtsCapabilities","constructor","Exception reading WMTS layer description: "+e.message)}}else if("TileMatrixSet"===o.localName){n.tileMatrixSet=n.tileMatrixSet||[];try{n.tileMatrixSet.push(l.assembleTileMatrixSet(o))}catch(e){t.logMessage(t.LEVEL_SEVERE,"WmtsCapabilities","constructor","Exception reading WMTS tile matrix set description: "+e.message)}}}return n},l.assembleTileMatrixSet=function(e){for(var t=new n(e),r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];"Identifier"===o.localName?t.identifier=o.textContent:"SupportedCRS"===o.localName?t.supportedCRS=o.textContent:"WellKnownScaleSet"===o.localName?t.wellKnownScaleSet=o.textContent:"BoundingBox"===o.localName?t.boundingBox=u.assembleBoundingBox(o):"TileMatrix"===o.localName&&(t.tileMatrix=t.tileMatrix||[],t.tileMatrix.push(l.assembleTileMatrix(o)))}l.sortTileMatrices(t);for(var a=0;a<t.tileMatrix.length;a++)t.tileMatrix[a].levelNumber=a;return t},l.assembleTileMatrix=function(e){for(var t=new n(e),r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];if("Identifier"===o.localName)t.identifier=o.textContent;else if("ScaleDenominator"===o.localName)t.scaleDenominator=parseFloat(o.textContent);else if("TileWidth"===o.localName)t.tileWidth=parseFloat(o.textContent);else if("TileHeight"===o.localName)t.tileHeight=parseFloat(o.textContent);else if("MatrixWidth"===o.localName)t.matrixWidth=parseFloat(o.textContent);else if("MatrixHeight"===o.localName)t.matrixHeight=parseFloat(o.textContent);else if("TopLeftCorner"===o.localName){var a=o.textContent.split(" ");t.topLeftCorner=[parseFloat(a[0]),parseFloat(a[1])]}}return t},l.assembleThemes=function(e){for(var t,n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Theme"===i.localName&&(t=t||[]).push(l.assembleTheme(i))}return t},l.assembleTheme=function(e){for(var t=new n(e),r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];"Identifier"===o.localName?t.identifier=o.textContent:"LayerRef"===o.localName?(t.layerRef=t.layerRef||[],t.layerRef.push(o.textContent)):"Theme"===o.localName&&(t.themes=t.themes||[],t.themes.push(l.assembleTheme(o)))}return t},l.assembleServiceMetadataURL=function(e){var t={},n=e.getAttribute("xlink:href");return n&&(t.url=n),t},l.sortTileMatrices=function(e){e.tileMatrix.sort((function(e,t){return t.scaleDenominator-e.scaleDenominator}))},l.prototype.getGetTileKvpAddress=function(){for(var e=0;e<this.operationsMetadata.operation.length;e++){var t=this.operationsMetadata.operation[e];if("GetTile"===t.name)return t.dcp[0].getMethods[0].url}return null},l})),i("layer/WmtsLayerTile",["../geom/Angle","../error/ArgumentError","../geom/BoundingBox","../util/Logger","../geom/Vec3","../util/WWUtil"],(function(e,t,n,r,i,o){"use strict";var a=function(t,n,r,i,o){this.sector=t,this.tileMatrix=n,this.row=r,this.column=i,this.imagePath=o,this.texelSize=t.deltaLatitude()*e.DEGREES_TO_RADIANS/n.tileHeight,this.tileKey=n.levelNumber.toString()+"."+r.toString()+"."+i.toString(),this.gpuCacheKey=o};return a.prototype.isEqual=function(e){return!!e&&!!e.tileKey&&this.tileKey==e.tileKey},a.prototype.distanceTo=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"Tile","distanceTo","missingVector"));for(var n,i,o,a=e[0],s=e[1],u=e[2],l=this.samplePoints,c=Number.POSITIVE_INFINITY,h=0,f=l.length;h<f;h+=3)n=a-l[h],i=s-l[h+1],o=u-l[h+2],c=Math.min(c,n*n+i*i+o*o);return Math.sqrt(c)},a.prototype.subdivide=function(e,n){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"WmtsLayerTile","subdivide","The specified tile matrix is null or undefined."));if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"WmtsLayerTile","subdivide","The specified tile factory is null or undefined."));for(var i,o,a=[],s=e.matrixHeight/this.tileMatrix.matrixHeight,u=e.matrixWidth/this.tileMatrix.matrixWidth,l=0;l<s;l++)for(var c=0;c<u;c++)i=s*this.row+l,o=u*this.column+c,a.push(n.createTile(e,i,o));return a},a.prototype.subdivideToCache=function(e,n,i){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"Tile","subdivideToCache","The specified tile matrix is null or undefined."));if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"Tile","subdivideToCache","The specified tile factory is null or undefined."));var o=i?i.entryForKey(this.tileKey):null;return o||(o=this.subdivide(e,n))&&i&&i.putEntry(this.tileKey,o,o.length),o},a.prototype.mustSubdivide=function(e,t){var n=e.globe.equatorialRadius*this.texelSize,r=this.distanceTo(e.eyePoint),i=e.pixelSizeAtDistance(r);return n>Math.max(t*i,.5)},a.prototype.update=function(e){var t=e.globe.elevationTimestamp(),n=e.verticalExaggeration,r=e.globeStateKey;this.updateTimestamp==t&&this.updateVerticalExaggeration==n&&this.updateGlobeStateKey==r||(this.doUpdate(e),e.frameStatistics.incrementTileUpdateCount(1),this.updateTimestamp=t,this.updateVerticalExaggeration=n,this.updateGlobeStateKey=r)},a.prototype.doUpdate=function(e){var t=e.globe,r=e.verticalExaggeration,a=t.minAndMaxElevationsForSector(this.sector),s=a[0]*r,u=a[1]*r;s===u&&(s=u+10),this.extent||(this.extent=new n),this.extent.setToSector(this.sector,t,s,u),this.samplePoints||(this.sampleElevations=new Float64Array(9),this.samplePoints=new Float64Array(3*this.sampleElevations.length)),o.fillArray(this.sampleElevations,.5*(s+u)),t.computePointsForGrid(this.sector,3,3,this.sampleElevations,i.ZERO,this.samplePoints),this.referencePoint||(this.referencePoint=new i(0,0,0)),t.computePointFromPosition(this.sector.centroidLatitude(),this.sector.centroidLongitude(),0,this.referencePoint)},a.prototype.bind=function(e){var t=e.gpuResourceCache.resourceForKey(this.gpuCacheKey);return!(!t||!t.bind(e))||!!this.fallbackTile&&this.fallbackTile.bind(e)},a.prototype.applyInternalTransform=function(e,t){},a})),i("layer/WmtsLayer",["../util/AbsentResourceList","../error/ArgumentError","../util/Logger","../geom/Matrix","../geom/Sector","../layer/Layer","../cache/MemoryCache","../render/Texture","../util/WmsUrlBuilder","../layer/WmtsLayerTile","../util/WWMath","../util/WWUtil"],(function(e,t,n,r,i,o,a,s,u,l,c,h){"use strict";var f=function s(u,l){if(!u)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","constructor","No layer configuration specified."));if(o.call(this,"WMTS Layer"),this.layerIdentifier=u.identifier,this.styleIdentifier=u.style,this.timeString=l,this.imageFormat=u.format,this.resourceUrl=u.resourceUrl,this.serviceUrl=u.service,this.tileMatrixSet=u.tileMatrixSet,this.lasTtMVP=r.fromIdentity(),u.wgs84BoundingBox||u.boundingBox){if(u.wgs84BoundingBox)this.sector=u.wgs84BoundingBox.getSector();else if(this.tileMatrixSet.boundingBox&&s.isEpsg4326Crs(this.tileMatrixSet.boundingBox.crs))this.sector=new i(this.tileMatrixSet.boundingBox.lowerCorner[1],this.tileMatrixSet.boundingBox.upperCorner[1],this.tileMatrixSet.boundingBox.lowerCorner[0],this.tileMatrixSet.boundingBox.upperCorner[0]);else if(s.isEpsg4326Crs(this.tileMatrixSet.supportedCRS))throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","constructor","No EPSG:4326 bounding box was specified in the layer or tile matrix set capabilities."))}else{if(!this.tileMatrixSet.boundingBox)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","constructor","No bounding box was specified in the layer or tile matrix set capabilities."));this.sector=new i(u.tileMatrixSet.boundingBox.lowerCorner[1],u.tileMatrixSet.boundingBox.upperCorner[1],u.tileMatrixSet.boundingBox.lowerCorner[0],u.tileMatrixSet.boundingBox.upperCorner[0])}if(!s.isTileSubdivisionCompatible(this.tileMatrixSet))throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","constructor","TileMatrixSet level division not compatible."));var c=this.tileMatrixSet.supportedCRS;if(!(s.isEpsg3857Crs(c)||s.isEpsg4326Crs(c)||s.isOGCCrs84(c)))throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","constructor","Provided CRS is not compatible."));this.cachePath=(this.resourceUrl||this.serviceUrl)+this.layerIdentifier+this.styleIdentifier+this.tileMatrixSet.identifier,l&&(this.cachePath=this.cachePath+l),this.displayName=u.title,this.currentTiles=[],this.currentTilesInvalid=!0,this.tileCache=new a(1e3,850),this.currentRetrievals=[],this.absentResourceList=new e(3,5e4),this.pickEnabled=!1,this.detailControl=1.75,this.retrievalQueueSize=WorldWind.configuration.layerRetrievalQueueSize};return f.isTileSubdivisionCompatible=function(e){if(!e||!e.tileMatrix||e.tileMatrix.length<1)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","isTileSubdivisionCompatible","Empty tile matrix set"));for(var r,i,o,a=e.tileMatrix[0],s=1,u=e.tileMatrix.length;s<u;s++)if(r=(o=e.tileMatrix[s]).matrixHeight/a.matrixHeight,i=o.matrixWidth/a.matrixWidth,a=o,2!==r||2!==i)return!1;return!0},f.createTileMatrixSet=function(e){if(!e.matrixSet)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No matrixSet provided."));if(!e.projection)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No projection provided."));if(!e.extent||4!=e.extent.length)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No extent provided."));var r={lowerCorner:[e.extent[0],e.extent[1]],upperCorner:[e.extent[2],e.extent[3]]};if(!e.resolutions)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No resolutions provided."));if(!e.tileSize)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No tile size provided."));if(!e.topLeftCorner||2!=e.topLeftCorner.length)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No extent provided."));if(void 0===e.prefix)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","Prefix not provided."));if(!(f.isEpsg4326Crs(e.projection)||f.isOGCCrs84(e.projection)||f.isEpsg3857Crs(e.projection)))throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","Projection provided not supported."));for(var i,o=[],a=0;a<e.resolutions.length;a++){f.isEpsg4326Crs(e.projection)||f.isOGCCrs84(e.projection)?i=6378137*e.resolutions[a]*2*Math.PI/360/28e-5:f.isEpsg3857Crs(e.projection)&&(i=e.resolutions[a]/28e-5);var s=e.tileSize*e.resolutions[a],u=e.tileSize*e.resolutions[a],l=Math.ceil((e.extent[2]-e.extent[0]-.01*s)/s),c=Math.ceil((e.extent[3]-e.extent[1]-.01*u)/u),h={identifier:e.prefix?e.matrixSet+":"+a:a,levelNumber:a,matrixHeight:c,matrixWidth:l,tileHeight:e.tileSize,tileWidth:e.tileSize,topLeftCorner:e.topLeftCorner,scaleDenominator:i};o.push(h)}return{identifier:e.matrixSet,supportedCRS:e.projection,boundingBox:r,tileMatrix:o}},f.formLayerConfiguration=function(e,r,i,o){var a={};if(a.identifier=e.identifier,o){for(var s=!1,l=0;l<e.format.length;l++)if(e.format[l]===o){s=!0,a.format=e.format[l];break}s||(n.logMessage(n.LEVEL_WARNING,"WmtsLayer","formLayerConfiguration","The specified image format is not available. Another one will be used."),a.format=null)}if(a.format||(e.format.indexOf("image/png")>=0?a.format="image/png":e.format.indexOf("image/jpeg")>=0?a.format="image/jpeg":e.format.indexOf("image/tiff")>=0?a.format="image/tiff":e.format.indexOf("image/gif")>=0?a.format="image/gif":a.format=e.format[0]),!a.format)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","formLayerConfiguration","Layer does not provide a supported image format."));if(e.resourceUrl&&e.resourceUrl.length>=1){for(l=0;l<e.resourceUrl.length;l++)if(a.format===e.resourceUrl[l].format){a.resourceUrl=e.resourceUrl[l].template;break}}else a.service=e.capabilities.getGetTileKvpAddress(),a.service&&(a.service=u.fixGetMapString(a.service));if(!a.resourceUrl&&!a.service)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","formLayerConfiguration","No resource URL or KVP GetTile service URL specified in WMTS capabilities."));if(r){var c=!1;for(l=0;l<e.style.length;l++)if(e.style[l].identifier===r){c=!0,a.style=e.style[l].identifier;break}c||(n.logMessage(n.LEVEL_WARNING,"WmtsLayer","formLayerConfiguration","The specified style identifier is not available. The server's default style will be used."),a.style=null)}if(!a.style)for(l=0;l<e.style.length;l++)if(e.style[l].isDefault){a.style=e.style[l].identifier;break}a.style||n.logMessage(n.LEVEL_WARNING,"WmtsLayer","formLayerConfiguration","No default style available. A style will not be specified in tile requests.");var h=e.getLayerSupportedTileMatrixSets();if(i){l=0;for(var d=h.length;l<d;l++)if(h[l].identifier===i&&f.isTileSubdivisionCompatible(h[l])){a.tileMatrixSet=h[l];break}a.tileMatrixSet||(n.logMessage(n.LEVEL_WARNING,"WmtsLayer","formLayerConfiguration","The specified tileMatrixSet is not available. Another one will be used."),a.tileMatrixSet=null)}if(!a.tileMatrixSet){var p,m=null,g=null,A=null;for(l=0,d=h.length;l<d;l++)p=h[l],f.isTileSubdivisionCompatible(p)&&(f.isEpsg4326Crs(p.supportedCRS)?m=m||p:f.isEpsg3857Crs(p.supportedCRS)?g=g||p:f.isOGCCrs84(p.supportedCRS)&&(A=A||p));a.tileMatrixSet=m||g||A}if(!a.tileMatrixSet)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","formLayerConfiguration","No supported Tile Matrix Set could be found."));return a.boundingBox=e.boundingBox,a.wgs84BoundingBox=e.wgs84BoundingBox,e.titles.length>0?a.title=e.titles[0].value:a.title=e.identifier,a},(f.prototype=Object.create(o.prototype)).doRender=function(e){e.terrain&&(!this.currentTilesInvalid&&e.modelviewProjection.equals(this.lasTtMVP)&&e.globeStateKey===this.lastGlobeStateKey||(this.currentTilesInvalid=!1,this.assembleTiles(e)),this.lasTtMVP.copy(e.modelviewProjection),this.lastGlobeStateKey=e.globeStateKey,this.currentTiles.length>0&&(e.surfaceTileRenderer.renderTiles(e,this.currentTiles,this.opacity),e.frameStatistics.incrementImageTileCount(this.currentTiles.length),this.inCurrentFrame=!0))},f.prototype.isLayerInView=function(e){return e.terrain&&e.terrain.sector&&e.terrain.sector.intersects(this.sector)},f.prototype.isTileVisible=function(e,t){return!(e.globe.projectionLimits&&!t.sector.overlaps(e.globe.projectionLimits))&&t.extent.intersectsFrustum(e.frustumInModelCoordinates)},f.prototype.assembleTiles=function(e){this.currentTiles=[],this.topLevelTiles&&0!==this.topLevelTiles.length||this.createTopLevelTiles(e);for(var t=0,n=this.topLevelTiles.length;t<n;t++){var r=this.topLevelTiles[t];r.update(e),this.currentAncestorTile=null,this.isTileVisible(e,r)&&this.addTileOrDescendants(e,r)}},f.prototype.addTileOrDescendants=function(e,t){if(t.column>=t.tileMatrix.matrixWidth&&(t.column=t.column-t.tileMatrix.matrixWidth),t.column<0&&(t.column=t.column+t.tileMatrix.matrixWidth),this.tileMeetsRenderingCriteria(e,t))this.addTile(e,t);else{var n=null;try{(this.isTileTextureInMemory(e,t)||0===t.tileMatrix.levelNumber)&&(n=this.currentAncestorTile,this.currentAncestorTile=t);for(var r=this.tileMatrixSet.tileMatrix[t.tileMatrix.levelNumber+1],i=t.subdivideToCache(r,this,this.tileCache),o=0,a=i.length;o<a;o++){var s=i[o];s.update(e),this.sector.intersects(s.sector)&&this.isTileVisible(e,s)&&this.addTileOrDescendants(e,s)}}finally{n&&(this.currentAncestorTile=n)}}},f.prototype.addTile=function(e,t){t.fallbackTile=null;var n=e.gpuResourceCache.resourceForKey(t.imagePath);return n?(this.currentTiles.push(t),void(this.expiration&&this.isTextureExpired(n)&&this.retrieveTileImage(e,t))):(this.retrieveTileImage(e,t),void(this.currentAncestorTile&&this.isTileTextureInMemory(e,this.currentAncestorTile)&&this.currentTiles.push(this.currentAncestorTile)))},f.prototype.isTextureExpired=function(e){return this.expiration&&e.creationTime.getTime()<=this.expiration.getTime()},f.prototype.isTileTextureInMemory=function(e,t){return e.gpuResourceCache.containsResource(t.imagePath)},f.prototype.tileMeetsRenderingCriteria=function(e,t){var n=this.detailControl;return(t.sector.minLatitude>=75||t.sector.maxLatitude<=-75)&&(n*=1.2),t.tileMatrix.levelNumber===this.tileMatrixSet.tileMatrix.length-1||!t.mustSubdivide(e,n)},f.prototype.retrieveTileImage=function(e,t){if(this.currentRetrievals.indexOf(t.imagePath)<0){if(this.currentRetrievals.length>this.retrievalQueueSize)return;if(this.absentResourceList.isResourceAbsent(t.imagePath))return;var r=this.resourceUrlForTile(t,this.imageFormat),i=new Image,o=t.imagePath,a=e.gpuResourceCache,s=e.currentGlContext.canvas,u=this;if(!r)return void(this.currentTilesInvalid=!0);i.onload=function(){n.log(n.LEVEL_INFO,"Image retrieval succeeded: "+r);var l=u.createTexture(e,t,i);if(u.removeFromCurrentRetrievals(o),l){a.putResource(o,l,l.size),u.currentTilesInvalid=!0,u.absentResourceList.unmarkResourceAbsent(o);var c=document.createEvent("Event");c.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),s.dispatchEvent(c)}},i.onerror=function(){u.removeFromCurrentRetrievals(o),u.absentResourceList.markResourceAbsent(o),n.log(n.LEVEL_WARNING,"Image retrieval failed: "+r)},this.currentRetrievals.push(o),i.crossOrigin="anonymous",i.src=r}},f.prototype.resourceUrlForTile=function(e,t){var n;return this.resourceUrl?(n=this.resourceUrl.replace("{Style}",this.styleIdentifier).replace("{TileMatrixSet}",this.tileMatrixSet.identifier).replace("{TileMatrix}",e.tileMatrix.identifier).replace("{TileCol}",e.column).replace("{TileRow}",e.row),this.timeString&&(n=n.replace("{Time}",this.timeString))):(n=this.serviceUrl+"service=WMTS&request=GetTile&version=1.0.0",n+="&Layer="+this.layerIdentifier,this.styleIdentifier&&(n+="&Style="+this.styleIdentifier),n+="&Format="+t,this.timeString&&(n+="&Time="+this.timeString),n+="&TileMatrixSet="+this.tileMatrixSet.identifier,n+="&TileMatrix="+e.tileMatrix.identifier,n+="&TileRow="+e.row,n+="&TileCol="+e.column),n},f.prototype.removeFromCurrentRetrievals=function(e){var t=this.currentRetrievals.indexOf(e);t>-1&&this.currentRetrievals.splice(t,1)},f.prototype.createTopLevelTiles=function(e){var t=this.tileMatrixSet.tileMatrix[0];this.topLevelTiles=[];for(var n=0;n<t.matrixHeight;n++)for(var r=0;r<t.matrixWidth;r++)this.topLevelTiles.push(this.createTile(t,n,r))},f.prototype.createTile=function(e,t,n){return f.isEpsg4326Crs(this.tileMatrixSet.supportedCRS)?this.createTile4326(e,t,n):f.isEpsg3857Crs(this.tileMatrixSet.supportedCRS)?this.createTile3857(e,t,n):f.isOGCCrs84(this.tileMatrixSet.supportedCRS)?this.createTileCrs84(e,t,n):void 0},f.prototype.createTileCrs84=function(e,t,n){var r=this.sector.deltaLatitude()/e.matrixHeight,o=this.sector.deltaLongitude()/e.matrixWidth,a=e.topLeftCorner[1]-t*r,s=a-r,u=e.topLeftCorner[0]+o*n,l=new i(s,a,u,u+o);return this.makeTile(l,e,t,n)},f.prototype.createTile4326=function(e,t,n){var r=this.sector.deltaLatitude()/e.matrixHeight,o=this.sector.deltaLongitude()/e.matrixWidth,a=e.topLeftCorner[0]-t*r,s=a-r,u=e.topLeftCorner[1]+o*n,l=new i(s,a,u,u+o);return this.makeTile(l,e,t,n)},f.prototype.createTile3857=function(e,t,n){e.mapWidth||this.computeTileMatrixValues3857(e);var r,o,a,s,u,l,h=c.clamp(n*e.tileWidth-.5,0,e.mapWidth),f=c.clamp(t*e.tileHeight-.5,0,e.mapHeight),d=c.clamp(h+e.tileWidth+.5,0,e.mapWidth),p=c.clamp(f+e.tileHeight+.5,0,e.mapHeight);r=h/e.mapWidth,o=p/e.mapHeight,s=e.topLeftCorner[0]+r*e.tileMatrixDeltaX,a=e.topLeftCorner[1]-o*e.tileMatrixDeltaY;var m=c.epsg3857ToEpsg4326(s,a);r=d/e.mapWidth,o=f/e.mapHeight,l=e.topLeftCorner[0]+r*e.tileMatrixDeltaX,u=e.topLeftCorner[1]-o*e.tileMatrixDeltaY;var g=c.epsg3857ToEpsg4326(l,u),A=new i(m[0],g[0],m[1],g[1]);return this.makeTile(A,e,t,n)},f.prototype.computeTileMatrixValues3857=function(e){var t=28e-5*e.scaleDenominator,n=e.tileWidth*t,r=e.tileHeight*t,i=[e.topLeftCorner[0]+n*e.matrixWidth,e.topLeftCorner[1]-r*e.matrixHeight],o=e.topLeftCorner;e.tileMatrixDeltaX=i[0]-o[0],e.tileMatrixDeltaY=o[1]-i[1],e.mapWidth=e.tileWidth*e.matrixWidth,e.mapHeight=e.tileHeight*e.matrixHeight},f.prototype.makeTile=function(e,t,n,r){var i=this.cachePath+"-layer/"+t.identifier+"/"+n+"/"+r+"."+h.suffixForMimeType(this.imageFormat);return new l(e,t,n,r,i)},f.prototype.createTexture=function(e,t,n){return f.isEpsg4326Crs(this.tileMatrixSet.supportedCRS)?new s(e.currentGlContext,n):f.isEpsg3857Crs(this.tileMatrixSet.supportedCRS)?this.createTexture3857(e,t,n):f.isOGCCrs84(this.tileMatrixSet.supportedCRS)?new s(e.currentGlContext,n):void 0},f.prototype.createTexture3857=function(e,t,n){this.destCanvas||(this.destCanvas=document.createElement("canvas"),this.destContext=this.destCanvas.getContext("2d"));var r,i,o,a,u,l,h=e.canvas2D,f=e.ctx2D,d=this.destCanvas,p=this.destContext,m=p.createImageData(n.width,n.height),g=t.sector,A=c.gudermannianInverse(g.minLatitude),v=c.gudermannianInverse(g.maxLatitude);h.width=n.width,h.height=n.height,d.width=n.width,d.height=n.height,f.drawImage(n,0,0,n.width,n.height),r=f.getImageData(0,0,n.width,n.height);for(var y=0;y<1;y++)for(var b=0;b<n.height;b++){i=(1-b/(n.height-1))*g.deltaLatitude()+g.minLatitude,l=1-(c.gudermannianInverse(i)-A)/(v-A),l=c.clamp(l,0,1),o=Math.floor(l*(n.height-1));for(var _=0;_<n.width;_++)a=4*(_+o*n.width),u=4*(_+b*n.width),m.data[u]=r.data[a],m.data[u+1]=r.data[a+1],m.data[u+2]=r.data[a+2],m.data[u+3]=r.data[a+3]}return p.putImageData(m,0,0),new s(e.currentGlContext,d)},f.isEpsg4326Crs=function(e){return e.indexOf("EPSG")>=0&&e.indexOf("4326")>=0},f.isEpsg3857Crs=function(e){return e.indexOf("EPSG")>=0&&(e.indexOf("3857")>=0||e.indexOf("900913")>=0)},f.isOGCCrs84=function(e){return e.indexOf("OGC")>=0&&e.indexOf("CRS84")>=0},f})),i("layer/OpenStreetMapImageLayer",["../util/Color","../layer/Layer","../util/Logger","../ogc/wmts/WmtsCapabilities","../layer/WmtsLayer"],(function(e,t,n,r,i){"use strict";var o=function(e){t.call(this,this.displayName),this.displayName=e||"Open Street Map",this.layer=null,this.xhr=null,this.pickEnabled=!0};return(o.prototype=Object.create(t.prototype)).doRender=function(t){this.configureLayer(t),this.layer&&(this.layer.opacity=this.opacity,this.layer.doRender(t),this.inCurrentFrame=this.layer.inCurrentFrame,this.inCurrentFrame&&(t.screenCreditController.addCredit("OpenStreetMap \xa9",e.DARK_GRAY),t.screenCreditController.addCredit("EOX.at \xa9",e.DARK_GRAY)))},o.prototype.configureLayer=function(e){if(!this.xhr){var t=this,o=e.currentGlContext.canvas;this.xhr=new XMLHttpRequest,this.xhr.open("GET","https://tiles.maps.eox.at/wmts/1.0.0/WMTSCapabilities.xml",!0),this.xhr.onreadystatechange=function(){if(4===t.xhr.readyState)if(200===t.xhr.status){var e=new r(t.xhr.responseXML).getLayer("osm"),a=i.formLayerConfiguration(e);a.title=t.displayName,t.layer=new i(a);var s=document.createEvent("Event");s.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),o.dispatchEvent(s)}else n.log(n.LEVEL_WARNING,"OSM retrieval failed ("+xhr.statusText+"): "+url)},this.xhr.onerror=function(){n.log(n.LEVEL_WARNING,"OSM retrieval failed: "+url)},this.xhr.ontimeout=function(){n.log(n.LEVEL_WARNING,"OSM retrieval timed out: "+url)},this.xhr.send(null)}},o})),i("projections/ProjectionGnomonic",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger","../geom/Sector","../util/WWMath"],(function(e,t,n,r,i,o){"use strict";var a=function(e){this.north=!("South"===e);var t=this.north?new i(30,90,-180,180):new i(-90,-30,-180,180);n.call(this,"Polar Gnomonic",!1,t),this._pole=e,this.displayName=this.north?"North Gnomonic":"South Gnomonic",this._stateKey="projection polar gnomonic "+this._pole+" "};return a.prototype=Object.create(n.prototype),Object.defineProperties(a.prototype,{pole:{get:function(){return this._pole},set:function(e){this._pole=e,this.north=!("South"===this._pole),this.projectionLimits=this.north?new i(30,90,-180,180):new i(-90,-30,-180,180),this._stateKey="projection polar gnomonic "+this._pole+" "}},stateKey:{get:function(){return this._stateKey}}}),a.prototype.geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesian","missingGlobe"));if(!u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesian","missingResult"));if(this.north&&90===i||!this.north&&-90===i)u[0]=0,u[1]=0,u[2]=a;else{var l=this.north?1:-1,c=n.equatorialRadius/Math.tan(i*e.DEGREES_TO_RADIANS);u[0]=c*Math.sin(o*e.DEGREES_TO_RADIANS)*l,u[1]=c*-Math.cos(o*e.DEGREES_TO_RADIANS),u[2]=a}return u},a.prototype.geographicToCartesianGrid=function(n,i,a,s,u,l,c,h){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesianGrid","missingGlobe"));if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesianGrid","missingSector"));if(!u||u.length<a*s)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!h)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesianGrid","missingResult"));var f,d,p,m,g,A,v=i.minLatitude*e.DEGREES_TO_RADIANS,y=i.maxLatitude*e.DEGREES_TO_RADIANS,b=i.minLongitude*e.DEGREES_TO_RADIANS,_=i.maxLongitude*e.DEGREES_TO_RADIANS,w=(y-v)/(a>1?a-1:1),E=(_-b)/(s>1?s-1:1),x=this.projectionLimits.minLatitude*e.DEGREES_TO_RADIANS,S=this.projectionLimits.maxLatitude*e.DEGREES_TO_RADIANS,T=this.north?1:-1,M=l||new Vec3(0,0,0),L=0,C=0;for(f=0,p=v;f<a;f++,p+=w)for(f===a-1&&(p=y),g=o.clamp(p,x,S),A=n.equatorialRadius/Math.tan(g),(this.north&&g===Math.PI/2||!this.north&&g===-Math.PI/2)&&(A=0),d=0,m=b;d<s;d++,m+=E)d===s-1&&(m=_),h[C++]=A*Math.sin(m)*T-M[0],h[C++]=A*-Math.cos(m)-M[1],h[C++]=u[L++]-M[2];return h},a.prototype.cartesianToGeographic=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","cartesianToGeographic","missingGlobe"));if(!u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","cartesianToGeographic","missingResult"));var l,c=Math.sqrt(i*i+o*o);return c<1e-4?(u.latitude=this.north?90:-90,u.longitude=0,u.altitude=a):((l=Math.atan2(c,n.equatorialRadius))>Math.PI&&(l=Math.PI),u.latitude=Math.asin(Math.cos(l)*(this.north?1:-1))*e.RADIANS_TO_DEGREES,u.longitude=Math.atan2(i,o*(this.north?-1:1))*e.RADIANS_TO_DEGREES,u.altitude=a),u},a.prototype.northTangentAtLocation=function(n,i,o,a){if(!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","northTangentAtLocation","missingResult"));return a[0]=Math.sin(o*e.DEGREES_TO_RADIANS)*(this.north?-1:1),a[1]=Math.cos(o*e.DEGREES_TO_RADIANS),a[2]=0,a},a.prototype.northTangentAtPoint=function(e,n,i,o,a,s){if(!s)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","northTangentAtLocation","missingResult"));var u=Math.sqrt(n*n+i*i);return u<1e-4?(s[0]=0,s[1]=1,s[2]=0):(s[0]=n/u*(this.north?-1:1),s[1]=i/u*(this.north?-1:1),s[2]=0),s},a})),i("projections/ProjectionMercator",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger","../geom/Sector","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a){"use strict";var s=function(){n.call(this,"Mercator",!0,new i(-78,78,-180,180))};return(s.prototype=Object.create(n.prototype)).geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesian","missingGlobe"));if(!u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesian","missingResult"));i>this.projectionLimits.maxLatitude&&(i=this.projectionLimits.maxLatitude),i<this.projectionLimits.minLatitude&&(i=this.projectionLimits.minLatitude);var l=Math.sqrt(n.eccentricitySquared),c=Math.sin(i*e.DEGREES_TO_RADIANS),h=(1+c)/(1-c)*Math.pow((1-l*c)/(1+l*c),l);return u[0]=n.equatorialRadius*o*e.DEGREES_TO_RADIANS+(s?s[0]:0),u[1]=.5*n.equatorialRadius*Math.log(h),u[2]=a,u},Object.defineProperties(s.prototype,{stateKey:{get:function(){return"projection mercator "}}}),s.prototype.geographicToCartesianGrid=function(n,i,s,u,l,c,h,f){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesianGrid","missingGlobe"));if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesianGrid","missingSector"));if(!l||l.length<s*u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!f)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesianGrid","missingResult"));var d,p,m,g,A,v,y,b,_=n.equatorialRadius,w=Math.sqrt(n.eccentricitySquared),E=i.minLatitude*e.DEGREES_TO_RADIANS,x=i.maxLatitude*e.DEGREES_TO_RADIANS,S=i.minLongitude*e.DEGREES_TO_RADIANS,T=i.maxLongitude*e.DEGREES_TO_RADIANS,M=(x-E)/(s>1?s-1:1),L=(T-S)/(u>1?u-1:1),C=this.projectionLimits.minLatitude*e.DEGREES_TO_RADIANS,R=this.projectionLimits.maxLatitude*e.DEGREES_TO_RADIANS,O=c||new o(0,0,0),I=h?h[0]:0,P=0,k=0;for(d=0,m=E;d<s;d++,m+=M)for(d===s-1&&(m=x),A=a.clamp(m,C,R),y=(1+(v=Math.sin(A)))/(1-v)*Math.pow((1-w*v)/(1+w*v),w),b=_*Math.log(y)*.5-O[1],p=0,g=S;p<u;p++,g+=L)p===u-1&&(g=T),f[k++]=_*g-O[0]+I,f[k++]=b,f[k++]=l[P++]-O[2];return f},s.prototype.cartesianToGeographic=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","cartesianToGeographic","missingGlobe"));if(!u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","cartesianToGeographic","missingResult"));var l=n.eccentricitySquared,c=l*l,h=c*l,f=h*l,d=Math.pow(Math.E,-o/n.equatorialRadius),p=Math.PI/2-2*Math.atan(d),m=7*c/48+29*h/240+811*f/11520,g=7*h/120+81*f/1120,A=4279*f/161280,v=p-m+A,y=l/2+5*c/24+h/12+13*f/360-3*g,b=2*m-8*A,_=4*g,w=8*A,E=Math.sin(2*p),x=v+E*(y+E*(b+E*(_+w*E)));return u.latitude=x*e.RADIANS_TO_DEGREES,u.longitude=(i-(s?s[0]:0))/n.equatorialRadius*e.RADIANS_TO_DEGREES,u.altitude=a,u},s})),i("projections/ProjectionPolarEquidistant",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger"],(function(e,t,n,r){"use strict";var i=function(e){n.call(this,"Polar Equidistant",!1,null),this._pole=e,this.north=!("South"===e),this.displayName=this.north?"North Polar":"South Polar",this._stateKey="projection polar equidistant "+this._pole+" "};return i.prototype=Object.create(n.prototype),Object.defineProperties(i.prototype,{pole:{get:function(){return this._pole},set:function(e){this._pole=e,this.north=!("South"===this._pole),this._stateKey="projection polar equidistant "+this._pole+" "}},stateKey:{get:function(){return this._stateKey}}}),i.prototype.geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesian","missingGlobe"));if(!u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesian","missingResult"));if(this.north&&90===i||!this.north&&-90===i)u[0]=0,u[1]=0,u[2]=a;else{var l=this.north?-1:1,c=n.equatorialRadius*(Math.PI/2+i*e.DEGREES_TO_RADIANS*l);u[0]=c*Math.sin(o*e.DEGREES_TO_RADIANS),u[1]=c*Math.cos(o*e.DEGREES_TO_RADIANS)*l,u[2]=a}return u},i.prototype.geographicToCartesianGrid=function(n,i,o,a,s,u,l,c){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesianGrid","missingGlobe"));if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesianGrid","missingSector"));if(!s||s.length<o*a)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!c)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesianGrid","missingResult"));var h,f,d,p,m,g=n.equatorialRadius,A=i.minLatitude*e.DEGREES_TO_RADIANS,v=i.maxLatitude*e.DEGREES_TO_RADIANS,y=i.minLongitude*e.DEGREES_TO_RADIANS,b=i.maxLongitude*e.DEGREES_TO_RADIANS,_=(v-A)/(o>1?o-1:1),w=(b-y)/(a>1?a-1:1),E=this.north?-1:1,x=u||new Vec3(0,0,0),S=Math.PI/2,T=0,M=0,L=new Float64Array(a),C=new Float64Array(a);for(f=0,p=y;f<a;f++,p+=w)f===a-1&&(p=b),L[f]=Math.cos(p),C[f]=Math.sin(p);for(h=0,d=A;h<o;h++,d+=_)for(h===o-1&&(d=v),m=g*(S+d*E),(this.north&&d===S||!this.north&&d===-S)&&(m=0),f=0;f<a;f++)c[M++]=m*C[f]-x[0],c[M++]=m*L[f]*E-x[1],c[M++]=s[T++]-x[2];return c},i.prototype.cartesianToGeographic=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","cartesianToGeographic","missingGlobe"));if(!u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","cartesianToGeographic","missingResult"));var l,c=Math.sqrt(i*i+o*o);return c<1e-4?(u.latitude=this.north?90:-90,u.longitude=0,u.altitude=a):((l=c/n.equatorialRadius)>Math.PI&&(l=Math.PI),u.latitude=Math.asin(Math.cos(l)*(this.north?1:-1))*e.RADIANS_TO_DEGREES,u.longitude=Math.atan2(i,o*(this.north?-1:1))*e.RADIANS_TO_DEGREES,u.altitude=a),u},i.prototype.northTangentAtLocation=function(n,i,o,a){if(!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","northTangentAtLocation","missingResult"));return a[0]=Math.sin(o*e.DEGREES_TO_RADIANS)*(this.north?-1:1),a[1]=Math.cos(o*e.DEGREES_TO_RADIANS),a[2]=0,a},i.prototype.northTangentAtPoint=function(e,n,i,o,a,s){if(!s)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","northTangentAtLocation","missingResult"));var u=Math.sqrt(n*n+i*i);return u<1e-4?(s[0]=0,s[1]=1,s[2]=0):(s[0]=n/u*(this.north?-1:1),s[1]=i/u*(this.north?-1:1),s[2]=0),s},i})),i("projections/ProjectionUPS",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger","../geom/Sector","../geom/Vec3","../util/WWMath"],(function(e,t,n,r,i,o,a){"use strict";var s=function(e){this.north=!("South"===e);var t=this.north?new i(0,90,-180,180):new i(-90,0,-180,180);n.call(this,"Uniform Polar Stereographic",!1,t),this._pole=e,this.displayName=this.north?"North UPS":"South UPS",this._stateKey="projection ups "+this._pole+" "};return s.prototype=Object.create(n.prototype),Object.defineProperties(s.prototype,{pole:{get:function(){return this._pole},set:function(e){this._pole=e,this.north=!("South"===this._pole),this.projectionLimits=this.north?new i(0,90,-180,180):new i(-90,0,-180,180),this._stateKey="projection ups "+this._pole+" "}},stateKey:{get:function(){return this._stateKey}}}),s.prototype.geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesian","missingGlobe"));if(!u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesian","missingResult"));if(this.north&&90===i||!this.north&&-90===i)u[0]=0,u[1]=0,u[2]=a;else{var l,c,h,f=this.north?1:-1,d=i*e.DEGREES_TO_RADIANS,p=o*e.DEGREES_TO_RADIANS,m=Math.sqrt(n.eccentricitySquared),g=Math.sqrt(Math.pow(1+m,1+m)*Math.pow(1-m,1-m));(this.north&&d<0||!this.north&&d>0)&&(d=0),l=Math.sin(d*f),c=Math.sqrt((1-l)/(1+l)*Math.pow((1+m*l)/(1-m*l),m)),h=2*n.equatorialRadius*.994*c/g,u[0]=h*Math.sin(p),u[1]=-h*Math.cos(p)*f,u[2]=a}return u},s.prototype.geographicToCartesianGrid=function(n,i,s,u,l,c,h,f){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesianGrid","missingGlobe"));if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesianGrid","missingSector"));if(!l||l.length<s*u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!f)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesianGrid","missingResult"));var d,p,m,g,A,v,y,b=n.equatorialRadius,_=i.minLatitude*e.DEGREES_TO_RADIANS,w=i.maxLatitude*e.DEGREES_TO_RADIANS,E=i.minLongitude*e.DEGREES_TO_RADIANS,x=i.maxLongitude*e.DEGREES_TO_RADIANS,S=(w-_)/(s>1?s-1:1),T=(x-E)/(u>1?u-1:1),M=this.projectionLimits.minLatitude*e.DEGREES_TO_RADIANS,L=this.projectionLimits.maxLatitude*e.DEGREES_TO_RADIANS,C=Math.sqrt(n.eccentricitySquared),R=Math.sqrt(Math.pow(1+C,1+C)*Math.pow(1-C,1-C)),O=this.north?1:-1,I=c||new o(0,0,0),P=0,k=0;for(d=0,m=_;d<s;d++,m+=S)for(d===s-1&&(m=w),A=a.clamp(m,M,L),v=Math.sin(A*O),y=2*b*.994*Math.sqrt((1-v)/(1+v)*Math.pow((1+C*v)/(1-C*v),C))/R,p=0,g=E;p<u;p++,g+=T)p===u-1&&(g=x),f[k++]=y*Math.sin(g)-I[0],f[k++]=-y*Math.cos(g)*O-I[1],f[k++]=l[P++]-I[2];return f},s.prototype.cartesianToGeographic=function(n,i,o,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","cartesianToGeographic","missingGlobe"));if(!u)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","cartesianToGeographic","missingResult"));var l=Math.atan2(i,o*(this.north?-1:1)),c=Math.sqrt(n.eccentricitySquared),h=Math.sqrt(i*i+o*o)*Math.sqrt(Math.pow(1+c,1+c)*Math.pow(1-c,1-c))/(2*n.equatorialRadius*.994),f=n.eccentricitySquared,d=f*f,p=d*f,m=p*f,g=Math.PI/2-2*Math.atan(h),A=7*d/48+29*p/240+811*m/11520,v=7*p/120+81*m/1120,y=4279*m/161280,b=g-A+y,_=f/2+5*d/24+p/12+13*m/360-3*v,w=2*A-8*y,E=4*v,x=8*y,S=Math.sin(2*g),T=b+S*(_+S*(w+S*(E+x*S)));return T*=this.north?1:-1,u.latitude=T*e.RADIANS_TO_DEGREES,u.longitude=l*e.RADIANS_TO_DEGREES,u.altitude=a,u},s.prototype.northTangentAtLocation=function(n,i,o,a){if(!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","northTangentAtLocation","missingResult"));return a[0]=Math.sin(o*e.DEGREES_TO_RADIANS)*(this.north?-1:1),a[1]=Math.cos(o*e.DEGREES_TO_RADIANS),a[2]=0,a},s.prototype.northTangentAtPoint=function(e,n,i,o,a,s){if(!s)throw new t(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","northTangentAtLocation","missingResult"));var u=Math.sqrt(n*n+i*i);return u<1e-4?(s[0]=0,s[1]=1,s[2]=0):(s[0]=n/u*(this.north?-1:1),s[1]=i/u*(this.north?-1:1),s[2]=0),s},s})),i("util/ByteBuffer",["../error/ArgumentError","../util/Logger"],(function(e,t){"use strict";var n=function n(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"ByteBuffer","constructor","missingArray"));this.array=r,this.data=new DataView(r),this.position=0,this._order=n.LITTLE_ENDIAN};return n.prototype.getByte=function(){var e=this.data.getUint8(this.position);return this.position+=n.BYTE_SIZE,e},n.prototype.getByteArray=function(e){var t=new Uint8Array(this.array,this.position,e);return this.position+=n.BYTE_SIZE*e,t},n.prototype.getInt16=function(){var e=this.data.getInt16(this.position,this._order);return this.position+=n.INT16_SIZE,e},n.prototype.getInt16Array=function(e){var t=new Int16Array(this.array,this.position,e);return this.position+=n.INT16_SIZE*e,t},n.prototype.getInt32=function(){var e=this.data.getInt32(this.position,this._order);return this.position+=n.INT32_SIZE,e},n.prototype.getInt32Array=function(e){var t=new Int32Array(this.array,this.position,e);return this.position+=n.INT32_SIZE*e,t},n.prototype.getFloat=function(){var e=this.data.getFloat32(this.position,this._order);return this.position+=n.FLOAT_SIZE,e},n.prototype.getFloatArray=function(e){var t=new Float32Array(this.array,this.position,e);return this.position+=n.FLOAT_SIZE*e,t},n.prototype.getDouble=function(){var e=this.data.getFloat64(this.position,this._order);return this.position+=n.DOUBLE_SIZE,e},n.prototype.getDoubleArray=function(e){var t;if(this.position%8!=0){var r=this.array.slice(this.position,this.position+e*n.DOUBLE_SIZE);t=new Float64Array(r)}else t=new Float64Array(this.array,this.position,e);return this.position+=n.DOUBLE_SIZE*e,t},n.prototype.skipBytes=function(e){this.position+=e*n.BYTE_SIZE},n.prototype.skipInt16s=function(e){this.position+=e*n.INT16_SIZE},n.prototype.skipInt32s=function(e){this.position+=e*n.INT32_SIZE},n.prototype.skipFloats=function(e){this.position+=e*n.FLOAT_SIZE},n.prototype.skipDoubles=function(e){this.position+=e*n.DOUBLE_SIZE},n.prototype.seek=function(e){this.position=e},n.prototype.order=function(e){this._order=e},n.prototype.limit=function(){return this.data.byteLength},n.prototype.hasRemaining=function(){return this.position<this.data.byteLength},n.BIG_ENDIAN=!1,n.LITTLE_ENDIAN=!0,n.BYTE_SIZE=1,n.INT16_SIZE=2,n.INT32_SIZE=4,n.FLOAT_SIZE=4,n.DOUBLE_SIZE=8,n})),i("formats/shapefile/DBaseField",["../../error/ArgumentError","../../util/ByteBuffer","../../formats/shapefile/DBaseFile","../../util/Logger"],(function(e,t,n,r){"use strict";var i=function(t,n){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"DBaseField","constructor","missingAttributeName"));if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"DBaseField","constructor","missingBuffer"));this.name=null,this.type=null,this.typeCode=-1,this.length=-1,this.decimals=-1,this.readFieldDescriptor(t,n)};return i.prototype.getName=function(){return this.name},i.prototype.getType=function(){return this.type},i.prototype.getLength=function(){return this.length},i.prototype.getDecimals=function(){return this.decimals},i.prototype.readFieldDescriptor=function(e,n){n.order(t.LITTLE_ENDIAN);var o=n.position;if(this.name=e.readNullTerminatedString(n,i.FIELD_NAME_LENGTH),n.seek(o+i.FIELD_NAME_LENGTH),this.typeCode=String.fromCharCode(n.getByte()),this.type=i.getFieldType(this.typeCode),null==this.type)throw new Error(r.log(r.LEVEL_SEVERE,"Shapefile dBase encountered unsupported field type: "+this.typeCode));n.skipBytes(4),this.length=n.getByte(),this.decimals=n.getByte(),n.seek(o+i.FIELD_DESCRIPTOR_LENGTH)},i.getFieldType=function(e){switch(e){case"C":return i.TYPE_CHAR;case"D":return i.TYPE_DATE;case"F":return i.TYPE_NUMBER;case"L":return i.TYPE_BOOLEAN;case"N":return i.TYPE_NUMBER;default:return null}},i.prototype.toString=function(){return this.name+"("+this.typeCode+")"},i.TYPE_CHAR="DBase.FieldTypeChar",i.TYPE_NUMBER="DBase.FieldTypeNumber",i.TYPE_DATE="DBase.FieldTypeDate",i.TYPE_BOOLEAN="DBase.FieldTypeBoolean",i.FIELD_NAME_LENGTH=11,i.FIELD_DESCRIPTOR_LENGTH=32,i})),i("formats/shapefile/DBaseRecord",["../../error/ArgumentError","../../util/ByteBuffer","../../formats/shapefile/DBaseField","../../formats/shapefile/DBaseFile","../../util/Logger"],(function(e,t,n,r,i){"use strict";var o=function(t,n,r){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"DBaseRecord","constructor","missingAttributeName"));if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"DBaseRecord","constructor","missingBuffer"));this.deleted=!1,this.recordNumber=r,this.values=null,this.readFromBuffer(t,n,r)};return o.prototype.isDeleted=function(){return this.deleted},o.prototype.getRecordNumber=function(){return this.recordNumber},o.prototype.readFromBuffer=function(e,r,o){r.order(t.LITTLE_ENDIAN),this.recordNumber=o;var a=r.getByte();this.deleted=42==a;var s=e.getFields();this.values={};for(var u=0,l=s.length;u<l;u+=1){var c=s[u],h=c.getName(),f=e.readNullTerminatedString(r,c.getLength()).trim();try{if(c.getType()==n.TYPE_BOOLEAN){var d=f.charAt(0);this.values[h]="t"==d||"T"==d||"Y"==d||"y"==d}else c.getType()==n.TYPE_CHAR?this.values[h]=f:c.getType()==n.TYPE_DATE?this.values[h]=new Date(f):c.getType()==n.TYPE_NUMBER&&(this.values[h]=+f)}catch(e){i.log(i.LEVEL_WARNING,"Shapefile attribute parsing error:"+c.toString()+" -> "+f.toString()+" ["+e+"]")}}},o})),i("formats/shapefile/DBaseFile",["../../error/ArgumentError","../../util/ByteBuffer","../../formats/shapefile/DBaseField","../../formats/shapefile/DBaseRecord","../../util/Logger"],(function(e,t,n,r,i){"use strict";var o=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"DBaseFile","constructor","missingUrl"));this.url=t,this.header=null,this.fields=null,this.buffer=null,this.boolean=!0,this.numRecordsRead=0,this._completionCallback=null};return o.prototype.getLastModificationDate=function(){return this.header.lastModificationDate},o.prototype.getNumberOfRecords=function(){return this.header.numberOfRecords},o.prototype.getHeaderLength=function(){return this.header.headerLength},o.prototype.getRecordLength=function(){return this.header.recordLength},o.prototype.getNumberOfFields=function(){return(this.header.headerLength-1-o.FIXED_HEADER_LENGTH)/o.FIELD_DESCRIPTOR_LENGTH},o.prototype.getFields=function(){return this.fields},o.prototype.hasNext=function(){return this.numRecordsRead<this.header.numberOfRecords},o.prototype.nextRecord=function(){return this.numRecordsRead>=this.getNumberOfRecords()?null:this.readNextRecord(this._buffer,++this.numRecordsRead)},o.prototype.load=function(e){this._completionCallback=e,this.requestUrl(this.url)},o.prototype.requestUrl=function(e){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(200===n.status?(this._buffer=new t(n.response),this.parse(),this._completionCallback&&this._completionCallback(this)):(i.log(i.LEVEL_WARNING,"DBaseFile retrieval failed ("+n.statusText+"): "+e),this._completionCallback&&this._completionCallback(this)))}.bind(this),n.onerror=function(){i.log(i.LEVEL_WARNING,"DBaseFile retrieval failed: "+e),this._completionCallback&&this._completionCallback(this)},n.ontimeout=function(){i.log(i.LEVEL_WARNING,"DBaseFile retrieval timed out: "+e),this._completionCallback&&this._completionCallback(this)},n.send(null)},o.prototype.parse=function(){this.header=this.readHeader(this._buffer),this.fields=this.readFieldDescriptors(this._buffer,this.getNumberOfFields())},o.prototype.readHeader=function(e){var n=e.position;e.order(t.LITTLE_ENDIAN);var r=e.getByte();if(r>5)throw new Error("???");var i={fileCode:r,lastModificationDate:{year:1900+e.getByte(),month:e.getByte()-1,day:e.getByte()},numberOfRecords:e.getInt32(),headerLength:e.getInt16(),recordLength:e.getInt16()};return e.seek(n+o.FIXED_HEADER_LENGTH),i},o.prototype.readFieldDescriptors=function(e,t){for(var r=e.position,i=[],a=0;a<t;a+=1)i[a]=new n(this,e);var s=this.header.headerLength-o.FIXED_HEADER_LENGTH;return e.seek(r+s),i},o.prototype.readNextRecord=function(e,t){return new r(this,e,t)},o.prototype.readNullTerminatedString=function(e,t){if(t<=0)return 0;for(var n="",r=0;r<t;r+=1){var i=e.getByte();if(0==i)break;n+=String.fromCharCode(i)}return this.isStringEmpty(n)?"":n},o.prototype.isStringEmpty=function(e){return e.length<=0||o.isStringFilled(e,32)||o.isStringFilled(e,42)},o.isStringFilled=function(e,t){if(e.length<=0)return!1;for(var n=0;n<e.length;n++)if(e.charAt(n)!=t)return!1;return!0},o.FIXED_HEADER_LENGTH=32,o.FIELD_DESCRIPTOR_LENGTH=32,o})),i("formats/shapefile/PrjFile",["../../error/ArgumentError","../../util/Logger","../../error/NotYetImplementedError"],(function(e,t,n){"use strict";var r=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"DBaseFile","constructor","missingUrl"));this._url=n,this._completionCallback=null,this._params=null};return Object.defineProperties(r.prototype,{url:{get:function(){return this._url}},coordinateSystem:{get:function(){return this.params?this.params[r.COORDINATE_SYSTEM]:null}},params:{get:function(){return this._params}}}),r.prototype.load=function(e){this._completionCallback=e,this.requestUrl(this._url)},r.prototype.requestUrl=function(e){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status){var r=String.fromCharCode.apply(null,new Uint8Array(n.response));this._params=this.decodeOGCCoordinateSystem(r)}else t.log(t.LEVEL_WARNING,"PrjFile retrieval failed ("+n.statusText+"): "+e);this._completionCallback&&this._completionCallback(this)}}.bind(this),n.onerror=function(){t.log(t.LEVEL_WARNING,"PrjFile retrieval failed: "+e),this._completionCallback&&this._completionCallback(this)}.bind(this),n.ontimeout=function(){t.log(t.LEVEL_WARNING,"PrjFile retrieval timed out: "+e),this._completionCallback&&this._completionCallback(this)}.bind(this),n.send(null)},r.prototype.decodeOGCCoordinateSystem=function(i){i||new e(t.logMessage(t.LEVEL_SEVERE,"PrjFile","decodeOGCCoordinateSystem","missingText"));var o={};if(i=i.trim().toUpperCase(),r.GEOGCS_WKT_PATTERN.test(i))o[r.COORDINATE_SYSTEM]=r.COORDINATE_SYSTEM_GEOGRAPHIC;else{if(i.match(r.PROJCS_WKT_PATTERN))throw o[PrfFile.COORDINATE_SYSTEM]=r.COORDINATE_SYSTEM_PROJECTED,new n(t.log(t.LEVEL_SEVERE,"PrjFile implementation  for projected coordinate systems in incomplete."));o[r.COORDINATE_SYSTEM]=r.COORDINATE_SYSTEM_UNKNOWN}return o},r.prototype.isUnknownCoordinateSystem=function(){return!this.params||this.params.coordinateSystem===r.COORDINATE_SYSTEM_UNKNOWN},r.prototype.isKnownCoordinateSystem=function(){return!!this.params&&this.params.coordinateSystem!==r.COORDINATE_SYSTEM_UNKNOWN},r.prototype.isGeographicCoordinateSystem=function(){return!!this.params&&this.params.coordinateSystem===r.COORDINATE_SYSTEM_GEOGRAPHIC},r.prototype.isProjectedCoordinateSystem=function(){return!!this.params&&this.params.coordinateSystem===r.COORDINATE_SYSTEM_PROJECTED},r.GEOGCS_WKT_PATTERN=new RegExp("\\{*GEOGCS[\\[\\(](.*)[\\]\\)]\\}*"),r.PROJCS_WKT_PATTERN=new RegExp("\\{*PROJCS[\\[\\(](.*)[\\]\\)]\\}*"),r.UTM_NAME_WKT_PATTERN=new RegExp(".*UTM.*ZONE.*?(\\d+).*?([\\w\\s]+).*?"),r.COORDINATE_SYSTEM="Coordinate_system",r.COORDINATE_SYSTEM_GEOGRAPHIC="Coordinate_system_geographic",r.COORDINATE_SYSTEM_PROJECTED="Coordinate_system_projected",r.COORDINATE_SYSTEM_UNKNOWN="Coordinate_system_unknown",r.PROJECTION_NAME="Projection_name",r.PROJECTION_UTM="Projection_UTM",r.PROJECTION_ZONE="Projection_zone",r.PROJECTION_HEMISPHERE="Projection_hemisphere",r.PROJECTION_HEMISPHERE_NORTH="Projection_hemisphere_north",r.PROJECTION_HEMISPHERE_SOUTH="Projection_hemisphere_south",r})),i("formats/shapefile/ShapefileRecord",["../../geom/Angle","../../error/ArgumentError","../../util/ByteBuffer","../../geom/Location","../../util/Logger","../../formats/shapefile/Shapefile"],(function(e,t,n,r,i,o){"use strict";var a=function(e,n){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"ShapefileRecord","constructor","The specified shapefile is null or undefined"));if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"ShapefileRecord","constructor","The specified buffer is null or undefined"));this._shapefile=e,this._recordNumber=-1,this._attributes={},this._numberOfParts=0,this._firstPartNumber=0,this._lastPartNumber=0,this._numberOfPoints=0,this._boundingRectangle=[],this._zRange=null,this._zValues=null,this._mRange=null,this._mValues=null,this._contentLengthInBytes=-1,this._buffer=n,this._isNormalized=!1,this._parts=[],this.readRecord()};return Object.defineProperties(a.prototype,{shapefile:{get:function(){return this._shapefile}},recordNumber:{get:function(){return this._recordNumber}},attributes:{get:function(){return this._attributes}},numberOfParts:{get:function(){return this._numberOfParts}},firstPartNumber:{get:function(){return this._firstPartNumber}},lastPartNumber:{get:function(){return this._lastPartNumber}},numberOfPoints:{get:function(){return this._numberOfPoints}},boundingRectangle:{get:function(){return this._boundingRectangle}},zRange:{get:function(){return this._zRange}},zValues:{get:function(){return this._zValues}},mRange:{get:function(){return this._mRange}},mValues:{get:function(){return this._mValues}}}),a.prototype.pointBuffer=function(e){return e>=0&&e<this._parts.length?this._parts[e]:null},a.prototype.readRecord=function(){this.readHeader(),this._buffer.order(n.LITTLE_ENDIAN);var e=this._buffer.getInt32(),t=this.shapefile.getShapeType(e);this.validateShapeType(t),this.readContents()},a.prototype.readHeader=function(){this._buffer.order(n.BIG_ENDIAN),this._recordNumber=this._buffer.getInt32(),this._contentLengthInBytes=2*this._buffer.getInt32()},a.prototype.validateShapeType=function(e){if(e!==this.shapefile.NULL&&e!==this.shapefile.shapeType)throw new Error(i.log(i.LEVEL_SEVERE,"Shapefile record is not supported."))},a.prototype.readNullContents=function(){this._numberOfParts=0,this._numberOfPoints=0,this._parts=null,this._boundingRectangle=null,this._buffer.seek(this._contentLengthInBytes-n.INT32_SIZE)},a.prototype.readPointContents=function(){this._numberOfParts=1,this._firstPartNumber=0,this._lastPartNumber=this._numberOfParts-1,this._numberOfPoints=1,this._parts=[this._buffer.getDoubleArray(2)];var e=this._parts[0][1],t=this._parts[0][0];this._boundingRectangle=[e,e,t,t],this.isZType()&&this.readZ(!0),this.isMeasureType()&&this.readOptionalMeasures(!0)},a.prototype.readPolylineContents=function(){var e=this.shapefile.readBoundingRectangle(this._buffer);if(this._boundingRectangle=e.coords,this._isNormalized=e.isNormalized,this._numberOfParts=this._buffer.getInt32(),this._firstPartNumber=0,this._lastPartNumber=this._numberOfParts-1,this._numberOfPoints=this._buffer.getInt32(),this._numberOfParts>0&&this._numberOfPoints>0)for(var t=this._buffer.getInt32Array(this.numberOfParts),n=0;n<this.numberOfParts;n+=1){var r=n==this.numberOfParts-1?this._numberOfPoints-t[n]:t[n+1]-t[n];this._parts[n]=this._buffer.getDoubleArray(2*r),a.normalizeLocations(this._parts[n])}this.isZType()&&this.readZ(!1),this.isMeasureType()&&this.readOptionalMeasures(!1)},a.prototype.readMultiPointContents=function(){var e=this.shapefile.readBoundingRectangle(this._buffer);this._boundingRectangle=e.coords,this._isNormalized=e.isNormalized,this._numberOfParts=1,this._numberOfPoints=this._buffer.getInt32(),this._parts=[this._buffer.getDoubleArray(2*this._numberOfPoints)],a.normalizeLocations(this._parts[0]),this.isZType()&&this.readZ(!1),this.isMeasureType()&&this.readOptionalMeasures(!1)},a.prototype.readZ=function(e){if(e){this._zValues=this._buffer.getDoubleArray(1);var t=this._zValues[0];this._zRange=[t,t]}else this._zRange=this._buffer.getDoubleArray(2),this._zValues=this._buffer.getDoubleArray(this.numberOfPoints)},a.prototype.readOptionalMeasures=function(e){if(this._buffer.hasRemaining()&&this._buffer.limit()-this._buffer.position>=8*this.numberOfPoints)if(e){this._mValues=this._buffer.getDoubleArray(1);var t=this._mValues[0];this._mRange=[t,t]}else this._mRange=this._buffer.getDoubleArray(2),this._mValues=this._buffer.getDoubleArray(this.numberOfPoints)},a.normalizeLocations=function(t){for(var n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];t[n]=e.normalizedDegreesLongitude(i),t[n+1]=e.normalizedDegreesLatitude(o)}},a.prototype.isPointType=function(){return this.shapefile.isPointType()},a.prototype.isMultiPointType=function(){return this.shapefile.isMultiPointType()},a.prototype.isPolylineType=function(){return this.shapefile.isPolylineType()},a.prototype.isPolygonType=function(){return this.shapefile.isPolygonType()},a.prototype.isZType=function(){return this.shapefile.isZType()},a.prototype.isMeasureType=function(){return this.shapefile.isMeasureType()},a.prototype.setAttributes=function(e){this._attributes=e},a.RECORD_HEADER_LENGTH=8,a})),i("formats/shapefile/ShapefileRecordMultiPoint",["../../util/ByteBuffer","../../formats/shapefile/Shapefile","../../formats/shapefile/ShapefileRecord"],(function(e,t,n){"use strict";var r=function(e,t){n.call(this,e,t)};return(r.prototype=Object.create(n.prototype)).readContents=function(){this.readMultiPointContents()},r})),i("formats/shapefile/ShapefileRecordNull",["../../formats/shapefile/Shapefile","../../formats/shapefile/ShapefileRecord"],(function(e,t){"use strict";var n=function(e,n){t.call(this,e,n)};return(n.prototype=Object.create(t.prototype)).readContents=function(){this.readNullContents()},n})),i("formats/shapefile/ShapefileRecordPoint",["../../formats/shapefile/Shapefile","../../formats/shapefile/ShapefileRecord"],(function(e,t){"use strict";var n=function(e,n){t.call(this,e,n)};return(n.prototype=Object.create(t.prototype)).readContents=function(){this.readPointContents()},n})),i("formats/shapefile/ShapefileRecordPolygon",["../../formats/shapefile/Shapefile","../../formats/shapefile/ShapefileRecord"],(function(e,t){"use strict";var n=function(e,n){t.call(this,e,n)};return(n.prototype=Object.create(t.prototype)).readContents=function(){this.readPolylineContents()},n})),i("formats/shapefile/ShapefileRecordPolyline",["../../formats/shapefile/Shapefile","../../formats/shapefile/ShapefileRecord"],(function(e,t){"use strict";var n=function(e,n){t.call(this,e,n)};return(n.prototype=Object.create(t.prototype)).readContents=function(){this.readPolylineContents()},n})),i("formats/shapefile/Shapefile",["../../geom/Angle","../../error/ArgumentError","../../util/ByteBuffer","../../util/Color","../../formats/shapefile/DBaseFile","../../geom/Location","../../util/Logger","../../error/NotYetImplementedError","../../shapes/Path","../../shapes/Placemark","../../shapes/PlacemarkAttributes","../../shapes/Polygon","../../geom/Position","../../formats/shapefile/PrjFile","../../layer/RenderableLayer","../../shapes/ShapeAttributes","../../formats/shapefile/ShapefileRecord","../../formats/shapefile/ShapefileRecordMultiPoint","../../formats/shapefile/ShapefileRecordNull","../../formats/shapefile/ShapefileRecordPoint","../../formats/shapefile/ShapefileRecordPolygon","../../formats/shapefile/ShapefileRecordPolyline","../../shapes/SurfacePolygon","../../shapes/SurfacePolyline"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w,E){"use strict";var x=function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Shapefile","constructor","missingUrl"));this._url=e,this._shapeType=null,this._layer=null,this._shapeConfigurationCallback=this.defaultShapeConfigurationCallback,this._parserCompletionCallback=this.defaultParserCompletionCallback,this._buffer=null,this.attributeFile=new i(e.replace(".shp",".dbf")),this.projectionFile=new d(e.replace(".shp",".prj")),this.defaultPlacemarkAttributes=new c(null),this.defaultShapeAttributes=new m(null)};return Object.defineProperties(x.prototype,{url:{get:function(){return this._url}},shapeType:{get:function(){return this._shapeType}},layer:{get:function(){return this._layer}},parserCompletionCallback:{get:function(){return this._parserCompletionCallback}},shapeConfigurationCallback:{get:function(){return this._shapeConfigurationCallback}}}),x.prototype.load=function(e,t,n){e&&(this._parserCompletionCallback=e),t&&(this._shapeConfigurationCallback=t),this._layer=n||new p;var r=function(){var e=function(){this.requestUrl(this.url)}.bind(this);this.attributeFile.load(e)}.bind(this);this.projectionFile.load(r)},x.prototype.defaultParserCompletionCallback=function(e){this.addRenderablesForShapefile(this.layer)},x.prototype.defaultShapeConfigurationCallback=function(e,t){var n={},r=e.values.name||e.values.Name||e.values.NAME;if(r&&(n.name=r),t.isPointType())n.attributes=this.defaultPlacemarkAttributes;else if(t.isMultiPointType())n.attributes=this.defaultPlacemarkAttributes;else if(t.isPolylineType())n.attributes=this.defaultShapeAttributes;else if(t.isPolygonType()){n.attributes=this.defaultShapeAttributes;var i=e.values.height||e.values.Height||e.values.HEIGHT;i&&(n.height=i)}return n},x.prototype.addRenderablesForShapefile=function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Shapefile","addRenderablesForShapefile","missingLayer"));this.isPointType()?this.addRenderablesForPoints(e):this.isMultiPointType()?this.addRenderablesForMultiPoints(e):this.isPolylineType()?this.addRenderablesForPolylines(e):this.isPolygonType()&&this.addRenderablesForPolygons(e)},x.prototype.addRenderablesForPoints=function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Shapefile","addRenderablesForPoints","missingLayer"));for(var n=this.next();n;n=this.next()){var r=this.shapeConfigurationCallback(n.attributes,n),i=r&&r.altitude?r.altitude:0;if(r)for(var o=0,s=n.numberOfParts;o<s;o+=1)for(var u=n.pointBuffer(o),c=0,h=u.length;c<h;c+=2){var d=u[c],p=u[c+1],m=new f(p,d,i),g=new l(m,!1,r.attributes);g.altitudeMode=r.altitudeMode||WorldWind.RELATIVE_TO_GROUND,r.highlightAttributes&&(g.highlightAttributes=r.highlightAttributes),r.name&&(g.label=r.name),r.pickDelegate&&(g.pickDelegate=r.pickDelegate),r.userProperties&&(g.userProperties=r.userProperties),e.addRenderable(g)}}},x.prototype.addRenderablesForMultiPoints=function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Shapefile","addRenderablesForMultiPoints","missingLayer"));for(var n=this.next();n;n=this.next()){var r=this.shapeConfigurationCallback(n.attributes,n),i=r&&r.altitude?r.altitude:0;if(r)for(var o=0,s=n.numberOfParts;o<s;o+=1)for(var u=n.pointBuffer(o),c=0,h=u.length;c<h;c+=2){var d=u[c],p=u[c+1],m=new f(p,d,i),g=new l(m,!1,r.attributes);g.altitudeMode=r.altitudeMode||WorldWind.RELATIVE_TO_GROUND,r.highlightAttributes&&(g.highlightAttributes=r.highlightAttributes),r.name&&(g.label=r.name),r.pickDelegate&&(g.pickDelegate=r.pickDelegate),r.userProperties&&(g.userProperties=r.userProperties),e.addRenderable(g)}}},x.prototype.addRenderablesForPolylines=function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Shapefile","addRenderablesForPolylines","missingLayer"));for(var n=this.next();n;n=this.next()){var r=this.shapeConfigurationCallback(n.attributes,n),i=r&&r.altitude?r.altitude:0;if(r)for(var s=0,l=n.numberOfParts;s<l;s+=1){for(var c=n.pointBuffer(s),h=[],d=0,p=c.length;d<p;d+=2){var m=c[d],g=c[d+1],A=i?new f(g,m,i):new o(g,m);h.push(A)}var v;i?(v=new u(h,r.attributes)).altitudeMode=r.altitudeMode||WorldWind.RELATIVE_TO_GROUND:v=new E(h,r.attributes),r.highlightAttributes&&(v.highlightAttributes=r.highlightAttributes),r.name&&(v.displayName=r.name),r.pickDelegate&&(v.pickDelegate=r.pickDelegate),r.userProperties&&(v.userProperties=r.userProperties),e.addRenderable(v)}}},x.prototype.addRenderablesForPolygons=function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Shapefile","addRenderablesForPolygons","missingLayer"));for(var n=this.next();n;n=this.next()){for(var r,i=this.shapeConfigurationCallback(n.attributes,n),s=[],u=i.height,l=i.altitude,c=0,d=n.numberOfParts;c<d;c+=1){for(var p=n.pointBuffer(c),m=[],g=0,A=p.length-2;g<A;g+=2){var v=p[g],y=p[g+1];r=u?new f(y,v,u):l?new f(y,v,l):new o(y,v),m.push(r)}s.push(m)}var b;u?((b=new h(s,i.attributes)).extrude=!0,b.altitudeMode=i.altitudeMode||WorldWind.RELATIVE_TO_GROUND):l?(b=new h(s,i.attributes)).altitudeMode=i.altitudeMode||WorldWind.RELATIVE_TO_GROUND:b=new w(s,i.attributes),i.highlightAttributes&&(b.highlightAttributes=i.highlightAttributes),i.name&&(b.displayName=i.name),i.pickDelegate&&(b.pickDelegate=i.pickDelegate),i.userProperties&&(b.userProperties=i.userProperties),e.addRenderable(b)}},x.prototype.next=function(){for(;this._buffer.position<this._buffer.limit();){var e=this.readRecord(this._buffer);if(!(e instanceof v))return e}return null},x.prototype.requestUrl=function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(this._buffer=new n(t.response),this.parse()):a.log(a.LEVEL_WARNING,"Shapefile retrieval failed ("+t.statusText+"): "+e),this._parserCompletionCallback&&this._parserCompletionCallback(this))}.bind(this),t.onerror=function(){a.log(a.LEVEL_WARNING,"Shapefile retrieval failed: "+e),this._parserCompletionCallback&&this._parserCompletionCallback(this)},t.ontimeout=function(){a.log(a.LEVEL_WARNING,"Shapefile retrieval timed out: "+e),this._parserCompletionCallback&&this._parserCompletionCallback(this)},t.send(null)},x.prototype.parse=function(){try{var e=this.readHeader(this._buffer);this._shapeType=e.shapeType}catch(e){console.log(e)}},x.prototype.readHeader=function(e){if(e.order(n.BIG_ENDIAN),e.getInt32()!=x.FILE_CODE)throw new Error(a.log(a.LEVEL_SEVERE,"Shapefile header is invalid"));e.skipInt32s(5);var t=e.getInt32();e.order(n.LITTLE_ENDIAN);var r=e.getInt32(),i=e.getInt32(),o=this.readBoundingRectangle(e),s=this.getShapeType(i);if(null==s)throw new Error(a.log(a.LEVEL_SEVERE,"Shapefile type is unsupported: "+i.toString()));var u={fileLength:2*t,version:r,shapeType:s,boundingRectangle:o.coords,normalizePoints:o.isNormalized};return e.skipDoubles(4),u},x.prototype.readBoundingRectangle=function(e){return this.projectionFile?this.projectionFile.isGeographicCoordinateSystem()?this.readGeographicBoundingRectangle(e):this.projectionFile.isProjectedCoordinateSystem()?this.readProjectedBoundingRectangle(e):this.readUnspecifiedBoundingRectangle(e):this.readUnspecifiedBoundingRectangle(e)},x.prototype.readUnspecifiedBoundingRectangle=function(e){return{coords:this.readBoundingRectangleCoordinates(e),isNormalized:!1}},x.prototype.readGeographicBoundingRectangle=function(t){var n=this.readBoundingRectangleCoordinates(t),r=!1,i=0;return n[0]<-90&&(i=e.normalizedDegreesLatitude(n[0]),n[0]=90,r=!0,n[1]<i&&(n[1]=i)),n[1]>90&&(i=e.normalizedDegreesLatitude(n[1]),n[1]=90,r=!0,n[0]>i&&(n[0]=i)),(n[2]<-180||n[3]>180)&&(n[2]=-180,n[3]=180,r=!0),{coords:n,isNormalized:r}},x.prototype.readProjectedBoundingRectangle=function(e){throw new s(a.log(a.LEVEL_SEVERE,"Shapefile.readProjectedBoundingRectangle() not yet implemented"))},x.prototype.readBoundingRectangleCoordinates=function(e){var t=e.getDouble(),n=e.getDouble(),r=e.getDouble();return[n,e.getDouble(),t,r]},x.prototype.readRecord=function(e){var t=this.createRecord(e);if(null!=t&&null!=this.attributeFile&&this.attributeFile.hasNext()){var n=this.attributeFile.nextRecord();t.setAttributes(n)}return t},x.prototype.createRecord=function(e){return this.isNullType()?this.createNull(e):this.isPointType()?this.createPoint(e):this.isMultiPointType()?this.createMultiPoint(e):this.isPolygonType()?this.createPolygon(e):this.isPolylineType()?this.createPolyline(e):null},x.prototype.createNull=function(e){return new v(this,e)},x.prototype.createPoint=function(e){return new y(this,e)},x.prototype.createMultiPoint=function(e){return new A(this,e)},x.prototype.createPolyline=function(e){return new _(this,e)},x.prototype.createPolygon=function(e){return new b(this,e)},x.prototype.getShapeType=function(e){switch(e){case 0:return x.NULL;case 1:return x.POINT;case 3:return x.POLYLINE;case 5:return x.POLYGON;case 8:return x.MULTI_POINT;case 11:return x.POINT_Z;case 13:return x.POLYLINE_Z;case 15:return x.POLYGON_Z;case 18:return x.MULTI_POINT_Z;case 21:return x.POINT_M;case 23:return x.POLYLINE_M;case 25:return x.POLYGON_M;case 28:return x.MULTI_POINT_M;default:return null}},x.prototype.isMeasureType=function(){return x.measureTypes.hasOwnProperty(this._shapeType)},x.prototype.isZType=function(){return x.zTypes.hasOwnProperty(this._shapeType)},x.prototype.isNullType=function(){return this._shapeType===x.NULL},x.prototype.isPointType=function(){return x.pointTypes.hasOwnProperty(this._shapeType)},x.prototype.isMultiPointType=function(){return x.multiPointTypes.hasOwnProperty(this._shapeType)},x.prototype.isPolylineType=function(){return x.polylineTypes.hasOwnProperty(this._shapeType)},x.prototype.isPolygonType=function(){return x.polygonTypes.hasOwnProperty(this._shapeType)},x.NULL="null",x.POINT="point",x.MULTI_POINT="multiPoint",x.POLYLINE="polyline",x.POLYGON="polygon",x.POINT_M=x.POINT+"M",x.MULTI_POINT_M=x.MULTI_POINT+"M",x.POLYLINE_M=x.POLYLINE+"M",x.POLYGON_M=x.POLYGON+"M",x.POINT_Z=x.POINT+"Z",x.MULTI_POINT_Z=x.MULTI_POINT+"Z",x.POLYLINE_Z=x.POLYLINE+"Z",x.POLYGON_Z=x.POLYGON+"Z",x.SHAPE_MULTI_PATCH="multiPatch",x.measureTypes={pointM:x.POINT_M,pointZ:x.POINT_Z,multiPointM:x.MULTI_POINT_M,multiPointZ:x.MULTI_POINT_Z,polylineM:x.POLYLINE_M,polylineZ:x.POLYLINE_Z,polygonM:x.POLYGON_M,polygonZ:x.POLYGON_Z},x.zTypes={pointZ:x.POINT_Z,multiPointZ:x.MULTI_POINT_Z,polylineZ:x.POLYLINE_Z,polygonZ:x.POLYGON_Z},x.pointTypes={point:x.POINT,pointZ:x.POINT_Z,pointM:x.POINT_M},x.multiPointTypes={multiPoint:x.MULTI_POINT,multiPointZ:x.MULTI_POINT_Z,multiPointM:x.MULTI_POINT_M},x.polylineTypes={polyline:x.POLYLINE,polylineZ:x.POLYLINE_Z,polylineM:x.POLYLINE_M},x.polygonTypes={polygon:x.POLYGON,polygonZ:x.POLYGON_Z,polygonM:x.POLYGON_M},x.FILE_CODE=9994,x})),i("layer/ShowTessellationLayer",["../shaders/BasicProgram","../layer/Layer"],(function(e,t){"use strict";var n=function(){t.call(this,"Show Tessellation"),this.enableTerrainGeometry=!0,this.enableTerrainExtent=!1};return(n.prototype=Object.create(t.prototype)).doRender=function(e){try{this.beginRendering(e),this.enableTerrainGeometry&&this.drawTerrainGeometry(e),this.enableTerrainExtent&&this.drawTerrainExtent(e)}finally{this.endRendering(e)}},n.prototype.beginRendering=function(e){e.currentGlContext.depthMask(!1)},n.prototype.endRendering=function(e){e.currentGlContext.depthMask(!0)},n.prototype.drawTerrainGeometry=function(t){if(t.terrain&&t.terrain.tessellator){var n,r,i=t.currentGlContext,o=t.terrain,a=o.tessellator,s=o.surfaceGeometry;try{n=t.findAndBindProgram(e),a.beginRendering(t);for(var u=0,l=s.length;u<l;u++)r=s[u],a.beginRenderingTile(t,r),n.loadColorComponents(i,1,1,1,.3),a.renderWireframeTile(t,r),n.loadColorComponents(i,1,0,0,.6),a.renderTileOutline(t,r),a.endRenderingTile(t,r)}finally{a.endRendering(t)}}},n.prototype.drawTerrainExtent=function(e){for(var t=e.terrain.surfaceGeometry,n=0,r=t.length;n<r;n++)t[n].extent.render(e)},n})),i("shaders/StarFieldProgram",["../error/ArgumentError","../shaders/GpuProgram","../util/Logger"],(function(e,t,n){"use strict";var r=function(e){t.call(this,e,"attribute vec4 vertexPoint;\nuniform mat4 mvpMatrix;\nuniform float numDays;\nuniform vec2 magnitudeRange;\nvarying float magnitudeWeight;\nfloat normalizeAngle(float angle) {\n   float angleDivisions = angle / 360.0;\n   return 360.0 * (angleDivisions - floor(angleDivisions));\n}\nvec3 computePosition(float dec, float ra) {\n   float GMST = normalizeAngle(280.46061837 + 360.98564736629 * numDays);\n   float GHA = normalizeAngle(GMST - ra);\n   float lon = -GHA + 360.0 * step(180.0, GHA);\n   float latRad = radians(dec);\n   float lonRad = radians(lon);\n   float radCosLat = cos(latRad);\n   return vec3(radCosLat * sin(lonRad), sin(latRad), radCosLat * cos(lonRad));\n}\nfloat normalizeScalar(float value, float minValue, float maxValue){\n   return (value - minValue) / (maxValue - minValue);\n}\nvoid main() {\n   vec3 vertexPosition = computePosition(vertexPoint.x, vertexPoint.y);\n   gl_Position = mvpMatrix * vec4(vertexPosition.xyz, 1.0);\n   gl_Position.z = gl_Position.w - 0.00001;\n   gl_PointSize = vertexPoint.z;\n   magnitudeWeight = normalizeScalar(vertexPoint.w, magnitudeRange.x, magnitudeRange.y);\n}","precision mediump float;\nuniform sampler2D textureSampler;\nuniform int textureEnabled;\nvarying float magnitudeWeight;\nconst vec4 white = vec4(1.0, 1.0, 1.0, 1.0);\nconst vec4 grey = vec4(0.5, 0.5, 0.5, 1.0);\nvoid main() {\n   if (textureEnabled == 1) {\n       gl_FragColor = texture2D(textureSampler, gl_PointCoord);\n   }\n   else {\n       gl_FragColor = mix(white, grey, magnitudeWeight);\n   }\n}",["vertexPoint"]),this.vertexPointLocation=this.attributeLocation(e,"vertexPoint"),this.mvpMatrixLocation=this.uniformLocation(e,"mvpMatrix"),this.numDaysLocation=this.uniformLocation(e,"numDays"),this.magnitudeRangeLocation=this.uniformLocation(e,"magnitudeRange"),this.textureUnitLocation=this.uniformLocation(e,"textureSampler"),this.textureEnabledLocation=this.uniformLocation(e,"textureEnabled")};return r.key="WorldWindGpuStarFieldProgram",(r.prototype=Object.create(t.prototype)).loadModelviewProjection=function(t,r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"StarFieldProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(t,r,this.mvpMatrixLocation)},r.prototype.loadNumDays=function(t,r){if(null==r)throw new e(n.logMessage(n.LEVEL_SEVERE,"StarFieldProgram","loadNumDays","missingNumDays"));t.uniform1f(this.numDaysLocation,r)},r.prototype.loadMagnitudeRange=function(t,r,i){if(null==r)throw new e(n.logMessage(n.LEVEL_SEVERE,"StarFieldProgram","loadMagRange","missingMinMag"));if(null==i)throw new e(n.logMessage(n.LEVEL_SEVERE,"StarFieldProgram","loadMagRange","missingMaxMag"));t.uniform2f(this.magnitudeRangeLocation,r,i)},r.prototype.loadTextureUnit=function(e,t){e.uniform1i(this.textureUnitLocation,t-e.TEXTURE0)},r.prototype.loadTextureEnabled=function(e,t){e.uniform1i(this.textureEnabledLocation,t?1:0)},r})),i("layer/StarFieldLayer",["./Layer","../util/Logger","../geom/Matrix","../shaders/StarFieldProgram","../util/SunPosition"],(function(e,t,n,r,i){"use strict";var o=function(t){e.call(this,"StarField"),this.pickEnabled=!1,this.sunSize=128,this.showSun=!0,this._starDataSource=t||WorldWind.configuration.baseUrl+"images/stars.json",this._sunImageSource=WorldWind.configuration.baseUrl+"images/sunTexture.png",this._matrix=n.fromIdentity(),this._starsPositionsVboCacheKey=null,this._numStars=0,this._starData=null,this._minMagnitude=Number.MAX_VALUE,this._maxMagnitude=Number.MIN_VALUE,this._loadStarted=!1,this._minScale=1e7,this._sunPositionsCacheKey="",this._sunBufferView=new Float32Array(4),this._MAX_GL_POINT_SIZE=0};return o.prototype=Object.create(e.prototype),Object.defineProperties(o.prototype,{starDataSource:{get:function(){return this._starDataSource},set:function(e){this._starDataSource=e,this.invalidateStarData()}},sunImageSource:{get:function(){return this._sunImageSource},set:function(e){this._sunImageSource=e}}}),o.prototype.doRender=function(e){if(!e.globe.is2D()){if(!this.haveResources(e))return void this.loadResources(e);this.beginRendering(e);try{this.doDraw(e)}finally{this.endRendering(e)}}},o.prototype.haveResources=function(e){var t=e.gpuResourceCache.resourceForKey(this._sunImageSource);return null!=this._starData&&null!=t},o.prototype.loadResources=function(e){var t=e.currentGlContext,n=e.gpuResourceCache;this._starData||this.fetchStarData(),n.resourceForKey(this._sunImageSource)||n.retrieveTexture(t,this._sunImageSource)},o.prototype.beginRendering=function(e){var t=e.currentGlContext;e.findAndBindProgram(r),t.enableVertexAttribArray(0),t.depthMask(!1)},o.prototype.doDraw=function(e){this.loadCommonUniforms(e),this.renderStars(e),this.showSun&&this.renderSun(e)},o.prototype.loadCommonUniforms=function(e){var t=e.currentGlContext,n=e.currentProgram,r=e.eyePoint,o=e.globe.computePositionFromPoint(r[0],r[1],r[2],{}),a=Math.max(1.5*o.altitude,this._minScale);this._matrix.copy(e.modelviewProjection),this._matrix.multiplyByScale(a,a,a),n.loadModelviewProjection(t,this._matrix);var s=i.computeJulianDate(this.time||new Date);n.loadNumDays(t,s-2451545)},o.prototype.renderStars=function(e){var t=e.currentGlContext,n=e.gpuResourceCache,r=e.currentProgram;this._starsPositionsVboCacheKey||(this._starsPositionsVboCacheKey=n.generateCacheKey());var i=n.resourceForKey(this._starsPositionsVboCacheKey);if(i)t.bindBuffer(t.ARRAY_BUFFER,i);else{i=t.createBuffer();var o=this.createStarsGeometry();n.putResource(this._starsPositionsVboCacheKey,i,4*o.length),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW)}e.frameStatistics.incrementVboLoadCount(1),t.vertexAttribPointer(0,4,t.FLOAT,!1,0,0),r.loadMagnitudeRange(t,this._minMagnitude,this._maxMagnitude),r.loadTextureEnabled(t,!1),t.drawArrays(t.POINTS,0,this._numStars)},o.prototype.renderSun=function(e){var n=e.currentGlContext,r=e.currentProgram,o=e.gpuResourceCache;this._MAX_GL_POINT_SIZE||(this._MAX_GL_POINT_SIZE=n.getParameter(n.ALIASED_POINT_SIZE_RANGE)[1]),this.sunSize>this._MAX_GL_POINT_SIZE&&t.log(t.LEVEL_WARNING,"StarFieldLayer - sunSize is to big, max size allowed is: "+this._MAX_GL_POINT_SIZE);var a=i.getAsCelestialLocation(this.time||new Date);this._sunBufferView[0]=a.declination,this._sunBufferView[1]=a.rightAscension,this._sunBufferView[2]=Math.min(this.sunSize,this._MAX_GL_POINT_SIZE),this._sunBufferView[3]=1,this._sunPositionsCacheKey||(this._sunPositionsCacheKey=o.generateCacheKey());var s=o.resourceForKey(this._sunPositionsCacheKey);s?(n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferSubData(n.ARRAY_BUFFER,0,this._sunBufferView)):(s=n.createBuffer(),o.putResource(this._sunPositionsCacheKey,s,4*this._sunBufferView.length),n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferData(n.ARRAY_BUFFER,this._sunBufferView,n.DYNAMIC_DRAW)),e.frameStatistics.incrementVboLoadCount(1),n.vertexAttribPointer(0,4,n.FLOAT,!1,0,0),r.loadTextureEnabled(n,!0),e.gpuResourceCache.resourceForKey(this._sunImageSource).bind(e),n.drawArrays(n.POINTS,0,1)},o.prototype.endRendering=function(e){var t=e.currentGlContext;t.depthMask(!0),t.disableVertexAttribArray(0)},o.prototype.fetchStarData=function(){if(!this._loadStarted){this._loadStarted=!0;var e=this,n=new XMLHttpRequest;n.onload=function(){if(this.status>=200&&this.status<300)try{e._starData=JSON.parse(this.response),e.sendRedrawRequest()}catch(e){t.log(t.LEVEL_SEVERE,"StarFieldLayer unable to parse JSON for star data "+e.toString())}else t.log(t.LEVEL_SEVERE,"StarFieldLayer unable to fetch star data. Status: "+this.status+" "+this.statusText);e._loadStarted=!1},n.onerror=function(){t.log(t.LEVEL_SEVERE,"StarFieldLayer unable to fetch star data"),e._loadStarted=!1},n.ontimeout=function(){t.log(t.LEVEL_SEVERE,"StarFieldLayer fetch star data has timeout"),e._loadStarted=!1},n.open("GET",this._starDataSource,!0),n.send()}},o.prototype.createStarsGeometry=function(){var e=this.parseStarsMetadata(this._starData.metadata);if(-1===e.raIndex)throw new Error(t.logMessage(t.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing ra field in star data."));if(-1===e.decIndex)throw new Error(t.logMessage(t.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing dec field in star data."));if(-1===e.magIndex)throw new Error(t.logMessage(t.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing vmag field in star data."));var n=this._starData.data,r=[];this._minMagnitude=Number.MAX_VALUE,this._maxMagnitude=Number.MIN_VALUE;for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a[e.decIndex],u=a[e.raIndex],l=a[e.magIndex],c=l<2?2:1;r.push(s,u,c,l),this._minMagnitude=Math.min(this._minMagnitude,l),this._maxMagnitude=Math.max(this._maxMagnitude,l)}return this._numStars=Math.floor(r.length/4),r},o.prototype.parseStarsMetadata=function(e){for(var t=-1,n=-1,r=-1,i=0,o=e.length;i<o;i++){var a=e[i];"ra"===a.name&&(t=i),"dec"===a.name&&(n=i),"vmag"===a.name&&(r=i)}return{raIndex:t,decIndex:n,magIndex:r}},o.prototype.invalidateStarData=function(){this._starData=null,this._starsPositionsVboCacheKey=null},o.prototype.sendRedrawRequest=function(){var e=document.createEvent("Event");e.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(e)},o})),i("shapes/SurfaceCircle",["../error/ArgumentError","../geom/Location","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape"],(function(e,t,n,r,i){"use strict";var o=function t(r,o,a){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"SurfaceCircle","constructor","missingLocation"));if(o<0)throw new e(n.logMessage(n.LEVEL_SEVERE,"SurfaceCircle","constructor","Radius is negative"));i.call(this,a),this._center=r,this._radius=o,this._intervals=t.DEFAULT_NUM_INTERVALS};return o.prototype=Object.create(i.prototype),Object.defineProperties(o.prototype,{center:{get:function(){return this._center},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._center=e}},radius:{get:function(){return this._radius},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._radius=e}},intervals:{get:function(){return this._intervals},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._intervals=e}}}),o.staticStateKey=function(e){return i.staticStateKey(e)+" ce "+e.center.toString()+" ra "+e.radius.toString()},o.prototype.computeStateKey=function(){return o.staticStateKey(this)},o.prototype.computeBoundaries=function(e){if(0===this.radius)return null;var n=1+Math.max(o.MIN_NUM_INTERVALS,this.intervals),r=360/(n-1),i=this.radius/e.globe.radiusAt(this.center.latitude,this.center.longitude);this._boundaries=new Array(n);for(var a=0;a<n;a++){var s=a!==n-1?a*r:0;this._boundaries[a]=t.greatCircleLocation(this.center,s,i,new t(0,0))}},o.prototype.getReferencePosition=function(){return this.center},o.prototype.moveTo=function(e,t){this.center=t},o.MIN_NUM_INTERVALS=8,o.DEFAULT_NUM_INTERVALS=64,o})),i("shapes/SurfaceEllipse",["../geom/Angle","../error/ArgumentError","../geom/Location","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape","../util/WWMath"],(function(e,t,n,r,i,o,a){"use strict";var s=function e(n,i,a,s,u){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"SurfaceEllipse","constructor","missingLocation"));if(i<0||a<0)throw new t(r.logMessage(r.LEVEL_SEVERE,"SurfaceEllipse","constructor","Radius is negative."));o.call(this,u),this._center=n,this._majorRadius=i,this._minorRadius=a,this._heading=s,this._intervals=e.DEFAULT_NUM_INTERVALS};return s.prototype=Object.create(o.prototype),Object.defineProperties(s.prototype,{center:{get:function(){return this._center},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._center=e}},majorRadius:{get:function(){return this._majorRadius},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._majorRadius=e}},minorRadius:{get:function(){return this._minorRadius},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._minorRadius=e}},heading:{get:function(){return this._heading},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._heading=e}},intervals:{get:function(){return this._intervals},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._intervals=e}}}),s.staticStateKey=function(e){return o.staticStateKey(e)+" ce "+e.center.toString()+" ma "+e.majorRadius.toString()+" mi "+e.minorRadius.toString()+" he "+e.heading.toString()+" in "+e.intervals.toString()},s.prototype.computeStateKey=function(){return s.staticStateKey(this)},s.prototype.computeBoundaries=function(t){if(0==this.majorRadius&&0==this.minorRadius)return null;var r=t.globe,i=1+Math.max(s.MIN_NUM_INTERVALS,this.intervals),o=2*Math.PI/(i-1),u=r.radiusAt(this.center.latitude,this.center.longitude);this._boundaries=new Array(i);for(var l=0;l<i;l++){var c=l!=i-1?l*o:0,h=this.majorRadius*Math.cos(c),f=this.minorRadius*Math.sin(c),d=Math.sqrt(h*h+f*f),p=Math.PI/2-(Math.acos(h/d)*a.signum(f)-this.heading*e.DEGREES_TO_RADIANS);this._boundaries[l]=n.greatCircleLocation(this.center,p*e.RADIANS_TO_DEGREES,d/u,new n(0,0))}},s.prototype.getReferencePosition=function(){return this.center},s.prototype.moveTo=function(e,t){this.center=t},s.MIN_NUM_INTERVALS=8,s.DEFAULT_NUM_INTERVALS=64,s})),i("shapes/SurfaceRectangle",["../geom/Angle","../error/ArgumentError","../geom/Location","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape","../util/WWMath"],(function(e,t,n,r,i,o,a){"use strict";var s=function(e,n,i,a,s){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"SurfaceRectangle","constructor","missingLocation"));if(n<0||i<0)throw new t(r.logMessage(r.LEVEL_SEVERE,"SurfaceRectangle","constructor","Size is negative."));o.call(this,s),this._center=e,this._width=n,this._height=i,this._heading=a};return s.prototype=Object.create(o.prototype),Object.defineProperties(s.prototype,{center:{get:function(){return this._center},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._center=e}},width:{get:function(){return this._width},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._width=e}},height:{get:function(){return this._height},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._height=e}},heading:{get:function(){return this._heading},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._heading=e}}}),s.staticStateKey=function(e){return o.staticStateKey(e)+" ce "+e.center.toString()+" wi "+e.width.toString()+" he "+e.height.toString()+" hd "+e.heading.toString()},s.prototype.computeStateKey=function(){return s.staticStateKey(this)},s.prototype.computeBoundaries=function(e){var t=.5*this.width,n=.5*this.height,r=e.globe.radiusAt(this.center.latitude,this.center.longitude);this._boundaries=new Array(4),this.addLocation(0,-t,-n,r),this.addLocation(1,t,-n,r),this.addLocation(2,t,n,r),this.addLocation(3,-t,n,r)},s.prototype.addLocation=function(t,r,i,o){var s=Math.sqrt(r*r+i*i),u=Math.PI/2-(Math.acos(r/s)*a.signum(i)-this.heading*e.DEGREES_TO_RADIANS);this._boundaries[t]=n.greatCircleLocation(this.center,u*e.RADIANS_TO_DEGREES,s/o,new n(0,0))},s.prototype.getReferencePosition=function(){return this.center},s.prototype.moveTo=function(e,t){this.center=this.computeShiftedLocations(e,this.getReferencePosition(),t,[this.center])[0]},s})),i("render/SurfaceRenderable",["../util/Logger","../error/UnsupportedOperationError"],(function(e,t){"use strict";var n=function(){throw this.displayName="Renderable",this.enabled=!0,new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceRenderable","constructor","abstractInvocation"))};return n.prototype.renderSurface=function(n){throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceRenderable","renderSurface","abstractInvocation"))},n})),i("shapes/SurfaceSector",["../error/ArgumentError","../geom/Location","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape"],(function(e,t,n,r,i){"use strict";var o=function(t,r){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"SurfaceSector","constructor","missingSector"));i.call(this,r),this._sector=t,this._pathType=WorldWind.LINEAR};return o.prototype=Object.create(i.prototype),Object.defineProperties(o.prototype,{sector:{get:function(){return this._sector},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._sector=e}}}),o.staticStateKey=function(e){return i.staticStateKey(e)},o.prototype.computeStateKey=function(){return o.staticStateKey(this)},o.prototype.computeBoundaries=function(e){var n=this._sector;this._boundaries=new Array(4),this._boundaries[0]=new t(n.minLatitude,n.minLongitude),this._boundaries[1]=new t(n.maxLatitude,n.minLongitude),this._boundaries[2]=new t(n.maxLatitude,n.maxLongitude),this._boundaries[3]=new t(n.minLatitude,n.maxLongitude)},o.prototype.getReferencePosition=function(){return new t(this.sector.centroidLatitude(),this.sector.centroidLongitude())},o.prototype.moveTo=function(e,n){var r=this._sector,i=new Array(3);i[0]=new t(r.minLatitude,r.minLongitude),i[1]=new t(r.maxLatitude,r.minLongitude),i[2]=new t(r.maxLatitude,r.maxLongitude),i=this.computeShiftedLocations(e,this.getReferencePosition(),n,i),this.sector=new WorldWind.Sector(i[0].latitude,i[1].latitude,i[1].longitude,i[2].longitude)},o})),i("layer/TectonicPlatesLayer",["../error/ArgumentError","../util/Color","../geom/Location","../util/Logger","../layer/RenderableLayer","../shapes/ShapeAttributes","../shapes/SurfacePolygon"],(function(e,t,n,r,i,o,a){"use strict";var s=function(e){i.call(this,"Tectonic Plates"),e?this._attributes=e:(this._attributes=new o(null),this._attributes.drawInterior=!1,this._attributes.drawOutline=!0,this._attributes.outlineColor=t.RED),this.loadPlateData()};return s.prototype=Object.create(i.prototype),Object.defineProperties(s.prototype,{attributes:{get:function(){return this._attributes},set:function(e){e&&this.renderables.map((function(t,n,r){t.attributes=e}))}}}),s.prototype.loadPlateData=function(){var e=WorldWind.configuration.baseUrl+"images/TectonicPlates.json",t=new XMLHttpRequest;t.open("GET",e,!0),t.onreadystatechange=function(){4===t.readyState&&(200===t.status?this.parse(t.responseText):r.log(r.LEVEL_WARNING,"Tectonic plate data retrieval failed ("+t.statusText+"): "+e))}.bind(this),t.onerror=function(){r.log(r.LEVEL_WARNING,"Tectonic plate data retrieval failed: "+e)},t.ontimeout=function(){r.log(r.LEVEL_WARNING,"Tectonic plate data retrieval timed out: "+e)},t.send(null)},s.prototype.parse=function(e){var t=JSON.parse(e),r=this;t.features.map((function(e,t,i){var o=[];e.geometry.coordinates.map((function(e,t,r){o.push(new n(e[1],e[0]))}));var s=new a(o,r._attributes);r.addRenderable(s)}))},s})),i("util/TileFactory",["../util/Logger","../error/UnsupportedOperationError"],(function(e,t){"use strict";var n=function(){};return n.prototype.createTile=function(n,r,i,o){throw new t(e.logMessage(e.LEVEL_SEVERE,"TileFactory","createTile","abstractInvocation"))},n})),i("shapes/TriangleMesh",["../shapes/AbstractMesh","../error/ArgumentError","../shaders/BasicTextureProgram","../geom/BoundingBox","../util/Color","../util/ImageSource","../geom/Location","../util/Logger","../geom/Matrix","../pick/PickedObject","../geom/Position","../shapes/ShapeAttributes","../shapes/SurfacePolygon","../geom/Vec2","../geom/Vec3"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p){"use strict";var m=function(n,r,i){if(!n)throw new t(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","constructor","missingPositions"));if(n.length<1)throw new t(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","constructor","missingPositions"));if(n.length>65536)throw new t(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","constructor","Too many positions. Must be fewer than 65537. Use TriangleMesh.split to split the shape."));if(!r)throw new t(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","constructor","Indices array is null or undefined"));if(r.length<3)throw new t(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","constructor","Too few indices."));e.call(this,i),this._positions=n,this._indices=r,this.referencePosition=this._positions[0]};return m.prototype=Object.create(e.prototype),Object.defineProperties(m.prototype,{positions:{get:function(){return this._positions},set:function(e){if(!e)throw new t(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","positions","missingPositions"));this._positions=e,this.referencePosition=this._positions[0],this.reset()}},indices:{get:function(){return this._indices},set:function(e){if(!e)throw new t(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","indices","Indices array is null or undefined"));this._indices=e,this.meshIndices=null,this.reset()}},outlineIndices:{get:function(){return this._outlineIndices},set:function(e){this._outlineIndices=e,this.meshOutlineIndices=null,this.reset()}},textureCoordinates:{get:function(){return this._textureCoordinates},set:function(e){if(e&&e.length!=this._positions.length)throw new t(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","textureCoordinates","Number of texture coordinates is inconsistent with the currently specified positions."));this._textureCoordinates=e,this.reset(),this.texCoords=null}}}),m.prototype.createSurfaceShape=function(){if(this._outlineIndices){for(var e=[],t=0;t<this._outlineIndices.length;t++)e.push(this._positions[this._outlineIndices[t]]);return new f(e,null)}return null},m.prototype.computeMeshPoints=function(e,t){for(var n,r,i=Number.MAX_VALUE,o=e.eyePoint,a=new Float32Array(3*this._positions.length),s=new p(0,0,0),u=0,l=0;l<this._positions.length;l++)n=this._positions[l],e.surfacePointForMode(n.latitude,n.longitude,n.altitude*this._altitudeScale,this.altitudeMode,s),(r=s.distanceToSquared(o))<i&&(i=r),s.subtract(this.currentData.referencePoint),a[u++]=s[0],a[u++]=s[1],a[u++]=s[2];return t.eyeDistance=Math.sqrt(i),a},m.prototype.computeTexCoords=function(){if(this._textureCoordinates){for(var e=new Float32Array(2*this._textureCoordinates.length),t=0,n=0,r=this._textureCoordinates.length;n<r;n++){var i=this._textureCoordinates[n];e[t++]=i[0],e[t++]=i[1]}return e}return null},m.prototype.computeMeshIndices=function(){for(var e=new Uint16Array(this._indices.length),t=0,n=this._indices.length;t<n;t++)e[t]=this._indices[t];return e},m.prototype.computeOutlineIndices=function(){if(this._outlineIndices){for(var e=new Uint16Array(this._outlineIndices.length),t=0;t<this._outlineIndices.length;t++)e[t]=this._outlineIndices[t];return e}return null},m.split=function(e,t,n,r){for(var i,o,a=[],s=[],u=[],l=[],c=[],h=0;h<=t.length;h++){if(h===t.length||a.length>65533&&u.length%3===0){if(a.length>0){var f={positions:a,indices:u};if(n&&(f.textureCoords=s),r){for(var d=[],p=0;p<r.length;p++)(o=l[i=r[p]])&&d.push(l[r[p]]);f.outlineIndices=d}c.push(f)}if(h===t.length)break;a=[],u=[],l=[]}(o=l[i=t[h]])||(o=a.length,l[i]=o,a.push(e[i]),n&&s.push(n[i])),u.push(o)}return c},m})),i("util/UrlBuilder",["../util/Logger","../error/UnsupportedOperationError"],(function(e,t){"use strict";var n=function(){};return n.prototype.urlForTile=function(n,r){throw new t(e.logMessage(e.LEVEL_SEVERE,"UrlBuilder","urlForTile","abstractInvocation"))},n})),i("layer/ViewControlsLayer",["../geom/Angle","../error/ArgumentError","../layer/Layer","../geom/Location","../util/Logger","../util/Offset","../shapes/ScreenImage","../geom/Vec2"],(function(e,t,n,r,i,o,a,s){"use strict";var u=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"ViewControlsLayer","constructor","missingWorldWindow"));n.call(this,"View Controls"),this.wwd=e,this.placement=new o(WorldWind.OFFSET_PIXELS,11,WorldWind.OFFSET_PIXELS,11),this.alignment=new o(WorldWind.OFFSET_FRACTION,0,WorldWind.OFFSET_FRACTION,0),this.exaggerationIncrement=.01,this.zoomIncrement=.04,this.headingIncrement=1,this.tiltIncrement=1,this.fieldOfViewIncrement=.1,this.panIncrement=.001,this._inactiveOpacity=.5,this._activeOpacity=1;var r=new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0),u=WorldWind.configuration.baseUrl+"images/view/";this.panControl=new a(r.clone(),u+"view-pan-64x64.png"),this.zoomInControl=new a(r.clone(),u+"view-zoom-in-32x32.png"),this.zoomOutControl=new a(r.clone(),u+"view-zoom-out-32x32.png"),this.headingLeftControl=new a(r.clone(),u+"view-heading-left-32x32.png"),this.headingRightControl=new a(r.clone(),u+"view-heading-right-32x32.png"),this.tiltUpControl=new a(r.clone(),u+"view-pitch-up-32x32.png"),this.tiltDownControl=new a(r.clone(),u+"view-pitch-down-32x32.png"),this.exaggerationUpControl=new a(r.clone(),u+"view-elevation-up-32x32.png"),this.exaggerationDownControl=new a(r.clone(),u+"view-elevation-down-32x32.png"),this.fovNarrowControl=new a(r.clone(),u+"view-fov-narrow-32x32.png"),this.fovWideControl=new a(r.clone(),u+"view-fov-wide-32x32.png"),this.fovNarrowControl.enabled=!1,this.fovWideControl.enabled=!1,this.controls=[this.panControl,this.zoomInControl,this.zoomOutControl,this.headingLeftControl,this.headingRightControl,this.tiltUpControl,this.tiltDownControl,this.exaggerationUpControl,this.exaggerationDownControl,this.fovNarrowControl,this.fovWideControl];for(var l=0;l<this.controls.length;l++)this.controls[l].imageOffset=r.clone(),this.controls[l].opacity=this._inactiveOpacity,this.controls[l]===this.panControl?this.controls[l].size=64:this.controls[l].size=32;this.panControlCenter=new s(0,0),this.pickEnabled=!1,this.wwd.worldWindowController.addGestureListener(this)};return u.prototype=Object.create(n.prototype),Object.defineProperties(u.prototype,{showPanControl:{get:function(){return this.panControl.enabled},set:function(e){this.panControl.enabled=e}},showZoomControl:{get:function(){return this.zoomInControl.enabled},set:function(e){this.zoomInControl.enabled=e,this.zoomOutControl.enabled=e}},showHeadingControl:{get:function(){return this.headingLeftControl.enabled},set:function(e){this.headingLeftControl.enabled=e,this.headingRightControl.enabled=e}},showTiltControl:{get:function(){return this.tiltUpControl.enabled},set:function(e){this.tiltUpControl.enabled=e,this.tiltDownControl.enabled=e}},showExaggerationControl:{get:function(){return this.exaggerationUpControl.enabled},set:function(e){this.exaggerationUpControl.enabled=e,this.exaggerationDownControl.enabled=e}},showFieldOfViewControl:{get:function(){return this.fovNarrowControl.enabled},set:function(e){this.fovNarrowControl.enabled=e,this.fovWideControl.enabled=e}},inactiveOpacity:{get:function(){return this._inactiveOpacity},set:function(e){this._inactiveOpacity=e;for(var t=0;t<this.controls.length;t++)this.controls[t].opacity=e}},activeOpacity:{get:function(){return this._activeOpacity},set:function(e){this._activeOpacity=e;for(var t=0;t<this.controls.length;t++)this.controls[t].opacity=e}}}),u.prototype.doRender=function(e){var t,n,r,i,o=0;this.inCurrentFrame=!1,this.showPanControl&&(o+=this.panControl.size,this.inCurrentFrame=!0),this.showZoomControl&&(o+=this.zoomInControl.size,this.inCurrentFrame=!0),this.showHeadingControl&&(o+=this.headingLeftControl.size,this.inCurrentFrame=!0),this.showTiltControl&&(o+=this.tiltDownControl.size,this.inCurrentFrame=!0),this.showExaggerationControl&&(o+=this.exaggerationDownControl.size,this.inCurrentFrame=!0),this.showFieldOfViewControl&&(o+=this.fovNarrowControl.size,this.inCurrentFrame=!0),n=this.placement.offsetForSize(e.viewport.width,e.viewport.height),t=this.alignment.offsetForSize(o,64),r=n[0]-t[0],i=n[1]-t[1],this.showPanControl&&(this.panControl.screenOffset.x=r,this.panControl.screenOffset.y=i,this.panControl.render(e),this.panControlCenter[0]=r+this.panControl.size/2,this.panControlCenter[1]=i+this.panControl.size/2,r+=this.panControl.size),this.showZoomControl&&(this.zoomOutControl.screenOffset.x=r,this.zoomOutControl.screenOffset.y=i,this.zoomInControl.screenOffset.x=r,this.zoomInControl.screenOffset.y=i+this.zoomOutControl.size,this.zoomOutControl.render(e),this.zoomInControl.render(e),r+=this.zoomOutControl.size),this.showHeadingControl&&(this.headingRightControl.screenOffset.x=r,this.headingRightControl.screenOffset.y=i,this.headingLeftControl.screenOffset.x=r,this.headingLeftControl.screenOffset.y=i+this.headingLeftControl.size,this.headingRightControl.render(e),this.headingLeftControl.render(e),r+=this.headingLeftControl.size),this.showTiltControl&&(this.tiltDownControl.screenOffset.x=r,this.tiltDownControl.screenOffset.y=i,this.tiltUpControl.screenOffset.x=r,this.tiltUpControl.screenOffset.y=i+this.tiltDownControl.size,this.tiltDownControl.render(e),this.tiltUpControl.render(e),r+=this.tiltDownControl.size),this.showExaggerationControl&&(this.exaggerationDownControl.screenOffset.x=r,this.exaggerationDownControl.screenOffset.y=i,this.exaggerationUpControl.screenOffset.x=r,this.exaggerationUpControl.screenOffset.y=i+this.exaggerationDownControl.size,this.exaggerationUpControl.render(e),this.exaggerationDownControl.render(e),r+=this.exaggerationDownControl.size),this.showFieldOfViewControl&&(this.fovNarrowControl.screenOffset.x=r,this.fovNarrowControl.screenOffset.y=i,this.fovWideControl.screenOffset.x=r,this.fovWideControl.screenOffset.y=i+this.fovNarrowControl.size,this.fovNarrowControl.render(e),this.fovWideControl.render(e))},u.prototype.isPointerDown=function(e){return"pointerdown"===e.type||"mousedown"===e.type&&1===e.which},u.prototype.isPointerUp=function(e){return"pointerup"===e.type||"mouseup"===e.type&&1===e.which},u.prototype.isPointerMove=function(e){return"pointermove"===e.type||"mousemove"===e.type},u.prototype.isTouchStart=function(e){return"touchstart"===e.type},u.prototype.isTouchEnd=function(e){return"touchend"===e.type||"touchcancel"===e.type},u.prototype.isTouchMove=function(e){return"touchmove"===e.type},u.prototype.onGestureEvent=function(e){var t,n=!1;if(!this.enabled)return n;this.highlightedControl&&(this.highlight(this.highlightedControl,!1),this.wwd.redraw());var r=!1;if(e.type&&this.activeControl&&(this.isPointerUp(e)||this.isTouchEnd(e)&&this.isCurrentTouch(e)?r=!0:(t=this.pickControl(e),this.activeControl!==t&&(r=!0))),r)this.activeControl=null,this.activeOperation=null,e.preventDefault();else{if(this.activeOperation)n=this.activeOperation.call(this,e,null),e.preventDefault();else if(t=this.pickControl(e)){var i=this.determineOperation(e,t);i&&(n=i.call(this,e,t))}this.handleHighlight(e,t),this.wwd.redraw()}return n},u.prototype.isControl=function(e){for(var t=0;t<this.controls.length;t++)if(this.controls[t]==e)return!0;return!1},u.prototype.pickControl=function(e){var t,n;if(e.changedTouches){var r=e.changedTouches.item(0);t=r.clientX,n=r.clientY}else t=e.clientX,n=e.clientY;for(var i,o=this.wwd.canvasCoordinates(t,n),a=o[0],s=this.wwd.canvas.height-o[1],u=0;u<this.controls.length;u++)if((i=this.controls[u]).enabled&&a>=i.screenOffset.x&&a<=i.screenOffset.x+i.size&&s>=i.screenOffset.y&&s<=i.screenOffset.y+i.size)return i;return null},u.prototype.determineOperation=function(e,t){var n=null;return t&&t instanceof a&&(t===this.panControl?n=this.handlePan:t===this.zoomInControl||t===this.zoomOutControl?n=this.handleZoom:t===this.headingLeftControl||t===this.headingRightControl?n=this.handleHeading:t===this.tiltUpControl||t===this.tiltDownControl?n=this.handleTilt:t===this.exaggerationUpControl||t===this.exaggerationDownControl?n=this.handleExaggeration:t!==this.fovNarrowControl&&t!==this.fovWideControl||(n=this.handleFov)),n},u.prototype.isCurrentTouch=function(e){for(var t=0;t<e.changedTouches.length;t++)if(e.changedTouches.item(t).identifier===this.currentTouchId)return!0;return!1},u.prototype.handlePan=function(t,n){var i=!1;if(this.isPointerDown(t)||this.isPointerMove(t))this.currentEventPoint=this.wwd.canvasCoordinates(t.clientX,t.clientY);else if(this.isTouchStart(t)||this.isTouchMove(t)){var o=t.changedTouches.item(0);this.currentEventPoint=this.wwd.canvasCoordinates(o.clientX,o.clientY)}if(this.isPointerDown(t)||this.isTouchStart(t)){this.activeControl=n,this.activeOperation=this.handlePan,t.preventDefault(),this.isTouchStart(t)&&(this.currentTouchId=t.changedTouches.item(0).identifier);var a=this;setTimeout((function t(){if(a.activeControl){var n=a.panControlCenter[0]-a.currentEventPoint[0],i=a.panControlCenter[1]-(a.wwd.viewport.height-a.currentEventPoint[1]),o=a.wwd.navigator.lookAtLocation.latitude,s=a.wwd.navigator.lookAtLocation.longitude,u=a.panIncrement*(a.wwd.navigator.range/a.wwd.globe.radiusAt(o,s)),l=a.wwd.navigator.heading+Math.atan2(n,i)*e.RADIANS_TO_DEGREES,c=u*Math.sqrt(n*n+i*i);r.greatCircleLocation(a.wwd.navigator.lookAtLocation,l,-c,a.wwd.navigator.lookAtLocation),a.wwd.redraw(),setTimeout(t,50)}}),50),i=!0}return i},u.prototype.handleZoom=function(e,t){var n=!1;if(this.isPointerDown(e)||this.isTouchStart(e)){this.activeControl=t,this.activeOperation=this.handleZoom,e.preventDefault(),this.isTouchStart(e)&&(this.currentTouchId=e.changedTouches.item(0).identifier);var r=this;setTimeout((function e(){r.activeControl&&(r.activeControl===r.zoomInControl?r.wwd.navigator.range*=1-r.zoomIncrement:r.activeControl===r.zoomOutControl&&(r.wwd.navigator.range*=1+r.zoomIncrement),r.wwd.redraw(),setTimeout(e,50))}),50),n=!0}return n},u.prototype.handleHeading=function(e,t){var n=!1;if(this.isPointerDown(e)||this.isTouchStart(e)){this.activeControl=t,this.activeOperation=this.handleHeading,e.preventDefault(),this.isTouchStart(e)&&(this.currentTouchId=e.changedTouches.item(0).identifier);var r=this;setTimeout((function e(){r.activeControl&&(r.activeControl===r.headingLeftControl?r.wwd.navigator.heading+=r.headingIncrement:r.activeControl===r.headingRightControl&&(r.wwd.navigator.heading-=r.headingIncrement),r.wwd.redraw(),setTimeout(e,50))}),50),n=!0}return n},u.prototype.handleTilt=function(e,t){var n=!1;if(this.isPointerDown(e)||this.isTouchStart(e)){this.activeControl=t,this.activeOperation=this.handleTilt,e.preventDefault(),this.isTouchStart(e)&&(this.currentTouchId=e.changedTouches.item(0).identifier);var r=this;setTimeout((function e(){r.activeControl&&(r.activeControl===r.tiltUpControl?r.wwd.navigator.tilt=Math.max(0,r.wwd.navigator.tilt-r.tiltIncrement):r.activeControl===r.tiltDownControl&&(r.wwd.navigator.tilt=Math.min(90,r.wwd.navigator.tilt+r.tiltIncrement)),r.wwd.redraw(),setTimeout(e,50))}),50),n=!0}return n},u.prototype.handleExaggeration=function(e,t){var n=!1;if(this.isPointerDown(e)||this.isTouchStart(e)){this.activeControl=t,this.activeOperation=this.handleExaggeration,e.preventDefault(),this.isTouchStart(e)&&(this.currentTouchId=e.changedTouches.item(0).identifier);var r=this;setTimeout((function e(){r.activeControl&&(r.activeControl===r.exaggerationUpControl?r.wwd.verticalExaggeration+=r.exaggerationIncrement:r.activeControl===r.exaggerationDownControl&&(r.wwd.verticalExaggeration=Math.max(1,r.wwd.verticalExaggeration-r.exaggerationIncrement)),r.wwd.redraw(),setTimeout(e,50))}),50),n=!0}return n},u.prototype.handleFov=function(e,t){var n=!1;if(this.isPointerDown(e)||this.isTouchStart(e)){this.activeControl=t,this.activeOperation=this.handleFov,e.preventDefault(),this.isTouchStart(e)&&(this.currentTouchId=e.changedTouches.item(0).identifier);var r=this;setTimeout((function e(){r.activeControl&&(r.activeControl===r.fovWideControl?r.wwd.navigator.fieldOfView=Math.max(90,r.wwd.navigator.fieldOfView+r.fieldOfViewIncrement):r.activeControl===r.fovNarrowControl&&(r.wwd.navigator.fieldOfView=Math.min(0,r.wwd.navigator.fieldOfView-r.fieldOfViewIncrement)),r.wwd.redraw(),setTimeout(e,50))}),50),n=!0}return n},u.prototype.handleHighlight=function(e,t){this.activeControl?this.highlight(this.activeControl,!0):t&&this.isControl(t)&&this.highlight(t,!0)},u.prototype.highlight=function(e,t){e.opacity=t?this._activeOpacity:this._inactiveOpacity,this.highlightedControl=t?e:null},u})),i("ogc/ows/OwsBoundingBox",["../../error/ArgumentError","../../util/Logger","../../geom/Sector"],(function(e,t,n){"use strict";var r=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsBoundingBox","constructor","missingDomElement"));this.assembleElement(n)};return r.prototype.assembleElement=function(e){this.crs="WGS84BoundingBox"===e.localName?"WGS84":e.getAttribute("crs"),this.dimensions=e.getAttribute("dimensions");for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n];"LowerCorner"===r.localName?this.lowerCorner=r.textContent:"UpperCorner"===r.localName&&(this.upperCorner=r.textContent)}},r.prototype.getSector=function(){var e,t,r,i,o;return-1!==this.crs.indexOf("WGS84")||-1!==this.crs.indexOf("EPSG:4326")?(t=(o=this.lowerCorner.split(/\s+/))[0],e=o[1],i=(o=this.upperCorner.split(/\s+/))[0],r=o[1],new n(e,r,t,i)):null},r})),i("ogc/ows/OwsKeywords",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsLanguageString"],(function(e,t,n){"use strict";return function(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsKeywords","constructor","missingDomElement"));for(var i=r.children||r.childNodes,o=0;o<i.length;o++){var a=i[o];"keyword"===a.localName&&(this.keywords=this.keywords||[],this.keywords.push(new n(a)))}}})),i("ogc/ows/OwsDatasetSummary",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsBoundingBox","../../ogc/ows/OwsKeywords","../../ogc/ows/OwsLanguageString"],(function(e,t,n,r,i){"use strict";var o=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"OwsDatasetSummary","constructor","missingDomElement"));this.assembleElement(n)};return o.prototype.assembleElement=function(e){for(var t=e.children||e.childNodes,o=0;o<t.length;o++){var a=t[o];"Title"===a.localName?(this.titles=this.titles||[],this.titles.push(new i(a))):"Abstract"===a.localName?(this.abstracts=this.abtracts||[],this.abstracts.push(new i(a))):"Keywords"===a.localName?(this.keywords=this.keywords||[],this.keywords.push(new r(a))):"Identifier"===a.localName?this.identifier=a.textContent:"WGS84BoundingBox"===a.localName?this.wgs84BoundingBox=new n(a):"BoundingBox"===a.localName?(this.boundingBox=this.boundingBox||[],this.boundingBox.push(new n(a))):"OutputFormat"===a.localName?(this.outputFormat=this.outputFormat||[],this.outputFormat.push(a.textContent)):"AvailableCRS"===a.localName&&(this.availableCrs=this.availableCrs||[],this.availableCRS.push(a.textContent))}},o})),i("ogc/wcs/WcsCapabilities",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsDatasetSummary","../../ogc/ows/OwsKeywords","../../ogc/ows/OwsOperationsMetadata","../../ogc/ows/OwsServiceIdentification","../../ogc/ows/OwsServiceProvider"],(function(e,t,n,r,i,o,a){"use strict";var s=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsCapabilities","constructor","missingDom"));this.xmlDom=n,this.assembleDocument()};return s.prototype.getCoverageBaseUrl=function(){return"1.0.0"===this.version?this.capability.request.getCoverage.get:"2.0.1"===this.version||"2.0.0"===this.version?this.operationsMetadata.getOperationMetadataByName("GetCoverage").dcp[0].getMethods[0].url:null},s.prototype.assembleDocument=function(){var n=this.xmlDom.documentElement;if(this.version=n.getAttribute("version"),this.updateSequence=n.getAttribute("updateSequence"),"1.0.0"===this.version)this.assembleDocument100(n);else{if("2.0.0"!==this.version&&"2.0.1"!==this.version)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsCapabilities","assembleDocument","unsupportedVersion"));this.assembleDocument20x(n)}},s.prototype.assembleDocument100=function(e){for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n];"Service"===r.localName?this.service=this.assembleService100(r):"Capability"===r.localName?this.capability=this.assembleCapability100(r):"ContentMetadata"===r.localName&&this.assembleContents100(r)}},s.prototype.assembleDocument20x=function(e){for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n];"ServiceIdentification"===r.localName?this.serviceIdentification=new o(r):"ServiceProvider"===r.localName?this.serviceProvider=new a(r):"OperationsMetadata"===r.localName?this.operationsMetadata=new i(r):"ServiceMetadata"===r.localName?this.serviceMetadata=this.assembleServiceMetadata(r):"Contents"===r.localName&&this.assembleContents20x(r)}},s.prototype.assembleContents100=function(e){for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n];"CoverageOfferingBrief"===r.localName&&(this.coverages=this.coverages||[],this.coverages.push(this.assembleCoverages100(r)))}},s.prototype.assembleContents20x=function(e){for(var t,r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];"CoverageSummary"===o.localName&&(t=new n(o),this.assembleDatasetAugment20x(o,t),this.coverages=this.coverages||[],this.coverages.push(t))}},s.prototype.assembleDatasetAugment20x=function(e,t){for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"CoverageId"===i.localName?t.coverageId=i.textContent:"CoverageSubtype"===i.localName&&(t.subType=t.subType||[],t.subType.push(i.textContent))}},s.prototype.assembleCoverages100=function(e){for(var t=e.children||e.childNodes,n={},i=0;i<t.length;i++){var o=t[i];"name"===o.localName?n.name=o.textContent:"description"===o.localName?n.description=o.textContent:"label"===o.localName?n.label=o.textContent:"Keywords"===o.localName?(n.keywords=n.keywords||[],n.keywords.push(new r(o))):"lonLatEnvelope"===o.localName&&(n.wgs84BoundingBox=this.assembleLatLonBoundingBox(o))}return n},s.prototype.assembleService100=function(e){for(var t=e.children||e.childNodes,n={},i=0;i<t.length;i++){var o=t[i];"description"===o.localName?n.description=o.textContent:"name"===o.localName?n.name=o.textContent:"label"===o.localName?n.label=o.textContent:"fees"===o.localName?n.fees=o.textContent:"accessConstraints"===o.localName?(n.accessConstraints=n.accessConstraints||[],n.accessConstraints.push(o.textContent)):"Keywords"===o.localName&&(n.keywords=new r(o))}return n},s.prototype.assembleCapability100=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];"Request"===i.localName?n.request=this.assembleRequestCapabilities100(i):"Exception"===i.localName&&(i=(i=i.children||i.childNodes)[0],n.exception=n.exception||[],n.exception.push(i.textContent))}return n},s.prototype.assembleRequestCapabilities100=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];"GetCapabilities"===i.localName?n.getCapabilities=this.assembleDCPType100(i):"DescribeCoverage"===i.localName?n.describeCoverage=this.assembleDCPType100(i):"GetCoverage"===i.localName&&(n.getCoverage=this.assembleDCPType100(i))}return n},s.prototype.assembleDCPType100=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];"DCPType"===i.localName&&this.assembleHttp100(i,n)}return n},s.prototype.assembleHttp100=function(e,t){for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];if("HTTP"===i.localName)return this.assembleMethod100(i,t)}},s.prototype.assembleMethod100=function(e,t){for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Get"===i.localName?t.get=this.assembleOnlineResource100(i):"Post"===i.localName&&(t.post=this.assembleOnlineResource100(i))}},s.prototype.assembleOnlineResource100=function(e){for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n];if("OnlineResource"===r.localName)return r.getAttribute("xlink:href")}},s.prototype.assembleLatLonBoundingBox=function(e){for(var t,n,r=e.children||e.childNodes,i={},o=0;o<r.length;o++){var a=r[o];"pos"===a.localName&&(t?n<parseFloat(a.textContent.split(/\s+/)[0])?(i.lowerCorner=t,i.upperCorner=a.textContent):(i.lowerCorner=a.textContent,i.upperCorner=t):(t=a.textContent,n=parseFloat(t.split(/\s+/)[0])))}return i},s.prototype.assembleServiceMetadata=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];"formatSupported"===i.localName?(n.formatsSupported=n.formatsSupported||[],n.formatsSupported.push(i.textContent)):"Extension"===i.localName&&(n.extension=this.assembleServiceMetadataExtension(i))}return n},s.prototype.assembleServiceMetadataExtension=function(e){for(var t=e.children||e.childNodes,n=t.length,r={},i=0;i<n;i++){var o=t[i];"crsSupported"===o.localName?(r.crsSupported=r.crsSupported||[],r.crsSupported.push(o.textContent)):"interpolationSupported"===o.localName&&(r.interpolationSupported=r.interpolationSupported||[],r.interpolationSupported.push(o.textContent))}return r},s})),i("ogc/wcs/WcsUrlBuilder",["../../error/ArgumentError","../../util/Logger"],(function(e,t){"use strict";var n=function(n,r){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsUrlBuilder","constructor","missingId"));if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsUrlBuilder","constructor","missingWebCoverageService"));this.coverageId=n,this.service=r};return n.prototype.urlForTile=function(n,r){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsUrlBuilder","urlForTile","missingTile"));if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsUrlBuilder","urlForTile","The specified format is null or undefined."));var i=this.service.capabilities.version,o=this.fixGetCoverageString(this.service.capabilities.getCoverageBaseUrl());return o+="SERVICE=WCS",o+="&REQUEST=GetCoverage","1.0.0"===i?this.buildUrl100(n,r,o):"2.0.1"===i||"2.0.0"===i?this.buildUrl20x(n,r,o):void 0},n.prototype.buildUrl100=function(e,t,n){var r=e.sector;return n+="&VERSION=1.0.0",n+="&COVERAGE="+this.coverageId,n+="&CRS=EPSG:4326",n+="&WIDTH="+e.tileWidth,n+="&HEIGHT="+e.tileHeight,n+="&FORMAT="+t,n+="&BBOX="+r.minLongitude+","+r.minLatitude+","+r.maxLongitude+","+r.maxLatitude,encodeURI(n)},n.prototype.buildUrl20x=function(e,t,n){for(var r,i,o,a,s,u=e.sector,l=0,c=this.service.coverageDescriptions.coverages.length;l<c;l++)if(this.coverageId===this.service.coverageDescriptions.coverages[l].coverageId){o=this.service.coverageDescriptions.coverages[l];break}return a=o.domainSet.rectifiedGrid.axisLabels,(s=o.boundedBy.envelope.axisLabels)[0].toLowerCase().indexOf("lat")>=0?(r=s[0],i=s[1]):(r=s[1],i=s[0]),n+="&VERSION="+this.service.capabilities.version,n+="&COVERAGEID="+this.coverageId,n+="&FORMAT="+t,n+="&SCALESIZE="+a[0]+"("+e.tileWidth+"),",n+=a[1]+"("+e.tileHeight+")",n+="&OVERVIEWPOLICY=NEAREST",n+="&SUBSET="+r+"("+u.minLatitude+","+u.maxLatitude+")",n+="&SUBSET="+i+"("+u.minLongitude+","+u.maxLongitude+")",encodeURI(n)},n.prototype.fixGetCoverageString=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WmsUrlBuilder","fixGetMapString","The specified service address is null or undefined."));var r=n.indexOf("?");return r<0?n+="?":r!==n.length-1&&(r=n.search(/&$/))<0&&(n+="&"),n},n})),i("ogc/wcs/WcsCoverage",["../../error/ArgumentError","../../util/Logger","../../ogc/wcs/WcsUrlBuilder"],(function(e,t,n){"use strict";var r=function(n,r){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsCoverage","constructor","missingId"));if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsCoverage","constructor","missingWebCoverageService"));this.coverageId=n,this.service=r,this.sector=this.service.coverageDescriptions.getSector(this.coverageId),this.resolution=this.service.coverageDescriptions.getResolution(this.coverageId),this.elevationConfig=this.createElevationConfig()};return r.PREFERRED_FORMATS={GeoTIFF:!0,"image/tiff":!0,TIFF:!0},r.DEFAULT_FORMAT="image/tiff",r.prototype.createElevationConfig=function(){return{resolution:this.resolution,coverageSector:this.sector,retrievalImageFormat:this.determineFormatFromService(),urlBuilder:new n(this.coverageId,this.service)}},r.prototype.determineFormatFromService=function(){var e,t,n,i=this.service.capabilities.version;if("1.0.0"===i){for(t=0,n=this.service.coverageDescriptions.coverages.length;t<n;t++)if(this.coverageId===this.service.coverageDescriptions.coverages[t].name){e=this.service.coverageDescriptions.coverages[t].supportedFormats.formats;break}}else"2.0.1"!==i&&"2.0.0"!==i||(e=this.service.capabilities.serviceMetadata.formatsSupported);if(!e)return r.DEFAULT_FORMAT;for(t=0,n=e.length;t<n;t++)if(r.PREFERRED_FORMATS.hasOwnProperty(e[t]))return e[t];return r.DEFAULT_FORMAT},r})),i("ogc/gml/GmlBoundedBy",["../../error/ArgumentError","../../util/Logger"],(function(e,t){"use strict";var n=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"GmlAbstractGeometry","constructor","missingDom"));this.assembleElement(n)};return n.prototype.assembleElement=function(e){var t=e.children||e.childNodes;this.nilReason=e.getAttribute("nilReason");for(var n=0;n<t.length;n++){var r=t[n];"Envelope"===r.localName&&(this.envelope=this.assembleEnvelope(r))}},n.prototype.assembleEnvelope=function(e){var t=e.children||e.childNodes,n={};n.srsName=e.getAttribute("srsName"),n.srsDimension=parseInt(e.getAttribute("srsDimension")),n.axisLabels=e.getAttribute("axisLabels"),n.axisLabels&&(n.axisLabels=n.axisLabels.split(/\s+/)),n.uomLabels=e.getAttribute("uomLabels"),n.uomLabels&&(n.uomLabels=n.uomLabels.split(/\s+/));for(var r=0;r<t.length;r++){var i=t[r];if("lowerCorner"===i.localName){n.lower=i.textContent.split(/\s+/);for(var o=0;o<n.lower.length;o++)n.lower[o]=parseFloat(n.lower[o])}else if("upperCorner"===i.localName)for(n.upper=i.textContent.split(/\s+/),o=0;o<n.upper.length;o++)n.upper[o]=parseFloat(n.upper[o])}return n},n})),i("ogc/gml/GmlRectifiedGrid",["../../error/ArgumentError","../../util/Logger"],(function(e,t){"use strict";var n=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"GmlRectifiedGrid","constructor","missingDom"));this.assembleElement(n)};return n.prototype.assembleElement=function(e){var t=e.children||e.childNodes;this.captureAttributes(e);for(var n=0;n<t.length;n++){var r=t[n];"description"===r.localName?this.description=r.textContent:"descriptionReference"===r.localName?this.descriptionReference=r.getAttribute("xlink:href"):"identifier"===r.localName?this.identifier=r.textContent:"name"===r.localName?(this.names=this.names||[],this.names.push(r.textContent)):"limits"===r.localName?this.limits=this.assembleLimits(r):"axisLabels"===r.localName?this.axisLabels=r.textContent.split(/\s+/):"axisName"===r.localName?(this.axisNames=this.axisNames||[],this.axisNames.push(r.textContent)):"origin"===r.localName?this.origin=this.assembleOrigin(r):"offsetVector"===r.localName&&(this.offsetVector=this.offsetVector||[],this.offsetVector.push(this.assembleOffsetVector(r)))}},n.prototype.captureAttributes=function(e){this.id=e.getAttribute("gml:id"),this.srsName=e.getAttribute("srsName"),this.srsDimension=e.getAttribute("srsDimension"),this.axisLabels=e.getAttribute("axisLabels"),this.axisLabels&&(this.axisLabels=this.axisLabels.split(/\s+/)),this.uomLabels=e.getAttribute("uomLabels"),this.uomLabels&&(this.uomLabels=this.uomLabels.split(/\s+/)),this.dimension=parseInt(e.getAttribute("dimension"))},n.prototype.assembleLimits=function(e){for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n];if("GridEnvelope"===r.localName)return this.assembleGridEnvelope(r)}},n.prototype.assembleGridEnvelope=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];n[i.localName]=i.textContent.split(/\s+/)}return n},n.prototype.assembleOrigin=function(e){var t={};t.type=e.getAttribute("xlink:type"),t.href=e.getAttribute("xlink:href"),t.role=e.getAttribute("xlink:role"),t.arcrole=e.getAttribute("xlink:arcrole"),t.title=e.getAttribute("xlink:title"),t.show=e.getAttribute("xlink:show"),t.actuate=e.getAttribute("xlink:actuate"),t.nilReason=e.getAttribute("nilReason"),t.remoteSchema=e.getAttribute("gml:remoteSchema"),t.owns=e.getAttribute("owns");for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Point"===i.localName?t.point=this.assemblePoint(i):"pos"===i.localName&&(t.pos=this.assemblePos(i))}return t},n.prototype.assemblePoint=function(e){var t={};t.id=e.getAttribute("gml:id"),t.srsName=e.getAttribute("srsName"),t.srsDimension=e.getAttribute("srsDimension"),t.axisLabels=e.getAttribute("axisLabels"),t.axisLabels&&(t.axisLabels=t.axisLabels.split(/\s+/)),t.uomLabels=e.getAttribute("uomLabels"),t.uomLabels&&(t.uomLabels=t.uomLabels.split(/\s+/));for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"description"===i.localName?t.description=i.textContent:"descriptionReference"===i.localName?t.descriptionReference=this.assembleOrigin(i):"identifier"===i.localName?t.identifier=i.textContent:"name"===i.localName?t.name=i.textContent:"pos"===i.localName&&(t.pos=this.assemblePos(i))}return t},n.prototype.assemblePos=function(e){var t={};if(t.srsName=e.getAttribute("srsName"),t.srsDimension=parseInt(e.getAttribute("srsDimension")),t.axisLabels=e.getAttribute("axisLabels"),t.axisLabels&&(t.axisLabels=t.axisLabels.split(/\s+/)),t.uomLabels=e.getAttribute("uomLabels"),t.uomLabels&&(t.uomLabels=t.uomLabels.split(/\s+/)),t.pos=e.textContent,t.pos){t.pos=t.pos.split(/\s+/);for(var n=0;n<t.pos.length;n++)t.pos[n]=parseFloat(t.pos[n])}return t},n.prototype.assembleOffsetVector=function(e){var t,n=(e.children||e.childNodes,{});n.srsName=e.getAttribute("srsName"),n.srsDimension=parseInt(e.getAttribute("srsDimension")),n.axisLabels=e.getAttribute("axisLabels"),n.axisLabels&&(n.axisLabels=n.axisLabels.split(/\s+/)),n.uomLabels=e.getAttribute("uomLabels"),n.uomLabels&&(n.uomLabels=n.uomLabels.split(/\s+/)),t=e.textContent.split(/\s+/),n.values=[];for(var r=0;r<t.length;r++)n.values.push(parseFloat(t[r]));return n},n})),i("ogc/gml/GmlDomainSet",["../../error/ArgumentError","../../ogc/gml/GmlRectifiedGrid","../../util/Logger"],(function(e,t,n){"use strict";var r=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"GmlAbstractGeometry","constructor","missingDom"));this.assembleElement(t)};return r.prototype.assembleElement=function(e){for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"RectifiedGrid"===i.localName&&(this.rectifiedGrid=new t(i))}},r})),i("ogc/wcs/WcsCoverageDescriptions",["../../error/ArgumentError","../../ogc/gml/GmlBoundedBy","../../ogc/gml/GmlDomainSet","../../ogc/gml/GmlRectifiedGrid","../../util/Logger","../../ogc/ows/OwsKeywords","../../geom/Sector"],(function(e,t,n,r,i,o,a){"use strict";var s=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"WcsCoverageDescriptions","constructor","missingDom"));this.xmlDom=t,this.assembleDocument()};return s.prototype.getSector=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"WcsCoverageDescriptions","getSector","missingId"));var n,r=this.getCoverage(t);return r?"1.0.0"===this.version?(n=r.lonLatEnvelope.pos,new a(n[0][1],n[1][1],n[0][0],n[1][0])):"2.0.1"===this.version||"2.0.0"===this.version?(n=r.boundedBy.envelope,new a(n.lower[0],n.upper[0],n.lower[1],n.upper[1])):null:null},s.prototype.getResolution=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"WcsCoverageDescriptions","getResolution","missingId"));var n,r,o,a,s,u,l=this.getCoverage(t),c=this.getSector(t);return l?("1.0.0"===this.version?(n=l.domainSet.spatialDomain.rectifiedGrid.limits.low[0],r=l.domainSet.spatialDomain.rectifiedGrid.limits.low[1],o=l.domainSet.spatialDomain.rectifiedGrid.limits.high[0],a=l.domainSet.spatialDomain.rectifiedGrid.limits.high[1]):"2.0.1"!==this.version&&"2.0.0"!==this.version||(n=l.domainSet.rectifiedGrid.limits.low[0],r=l.domainSet.rectifiedGrid.limits.low[1],o=l.domainSet.rectifiedGrid.limits.high[0],a=l.domainSet.rectifiedGrid.limits.high[1]),s=c.deltaLongitude()/(o-n),u=c.deltaLatitude()/(a-r),Math.max(s,u)):null},s.prototype.getSupportedCrs=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"WcsCoverageDescriptions","getSupportedCrs","missingId"));var n=this.getCoverage(t),r=[];return n?"1.0.0"===this.version?n.supportedCrs.requests:"2.0.1"===this.version||"2.0.0"===this.version?(r.push(n.boundedBy.envelope.srsName),r):null:null},s.prototype.getCoverage=function(e){for(var t=0,n=this.coverages.length;t<n;t++)if(e===(this.coverages[t].coverageId||this.coverages[t].name))return this.coverages[t];return null},s.prototype.assembleDocument=function(){var t=this.xmlDom.documentElement;if("CoverageDescription"===t.localName)this.assembleDocument100(t),this.version="1.0.0";else{if("CoverageDescriptions"!==t.localName)throw new e(i.logMessage(i.LEVEL_SEVERE,"WcsCapabilities","assembleDocument","unsupportedVersion"));this.assembleDocument20x(t),this.version=t.getAttribute("version")||"2.0.1"}},s.prototype.assembleDocument100=function(e){this.version=e.getAttribute("version");for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n];"CoverageOffering"===r.localName&&(this.coverages=this.coverages||[],this.coverages.push(this.assembleCoverages100(r)))}},s.prototype.assembleDocument20x=function(e){for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n];"CoverageDescription"===r.localName&&(this.coverages=this.coverages||[],this.coverages.push(this.assembleCoverages20x(r)))}},s.prototype.assembleCoverages100=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];"name"===i.localName?n.name=i.textContent:"description"===i.localName?n.description=i.textContent:"label"===i.localName?n.label=i.textContent:"keywords"===i.localName?n.keywords=new o(i).keywords:"lonLatEnvelope"===i.localName?n.lonLatEnvelope=this.assembleLonLatEnvelope100(i):"supportedCRSs"===i.localName?n.supportedCrs=this.assembleSupportedCrs100(i):"supportedFormats"===i.localName?n.supportedFormats=this.assembleSupportedFormats100(i):"supportedInterpolations"===i.localName?n.supportedInterpolations=this.assembleSupportedInterpolations100(i):"domainSet"===i.localName?n.domainSet=this.assembleDomainSet100(i):"rangeSet"===i.localName&&(n.rangeSet=this.assembleRangeSet100(i))}return n},s.prototype.assembleCoverages20x=function(e){for(var r=e.children||e.childNodes,i={},o=0;o<r.length;o++){var a=r[o];"CoverageId"===a.localName?i.coverageId=a.textContent:"domainSet"===a.localName?i.domainSet=new n(a):"boundedBy"===a.localName?i.boundedBy=new t(a):"ServiceParameters"===a.localName?i.serviceParameters=this.assembleServiceParameters20x(a):"rangeType"===a.localName&&(i.rangeType=a)}return i},s.prototype.assembleServiceParameters20x=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];"nativeFormat"===i.localName?n.nativeFormat=i.textContent:"CoverageSubtype"===i.localName&&(n.coverageSubtype=i.textContent)}return n},s.prototype.assembleLonLatEnvelope100=function(e){var t=e.children||e.childNodes,n={};n.srsName=e.getAttribute("srsName");for(var r=0;r<t.length;r++){var i=t[r];"pos"===i.localName&&(n.pos=n.pos||[],n.pos.push(s.parseSpacedFloatArray(i.textContent)))}return n},s.prototype.assembleSupportedCrs100=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];"requestResponseCRSs"===i.localName?(n.requests=n.requests||[],n.requests.push(i.textContent),n.responses=n.responses||[],n.responses.push(i.textContent)):"requestCRSs"===i.localName?(n.requests=n.requests||[],n.push(i.textContent)):"responseCRSs"===i.localName?(n.responses=n.responses||[],n.push(i.textContent)):"NativeCRSs"===i.localName&&(n.nativeCrs=n.nativeCrs||[],n.push(i.textContent))}return n},s.prototype.assembleSupportedFormats100=function(e){var t=e.children||e.childNodes,n={};n.nativeFormat=e.getAttribute("nativeFormat");for(var r=0;r<t.length;r++){var i=t[r];"formats"===i.localName&&(n.formats=n.formats||[],n.formats.push(i.textContent))}return n},s.prototype.assembleSupportedInterpolations100=function(e){var t=e.children||e.childNodes,n={};n.default=e.getAttribute("default");for(var r=0;r<t.length;r++){var i=t[r];"interpolationMethod"===i.localName&&(n.methods=n.methods||[],n.methods.push(i.textContent))}return n},s.prototype.assembleDomainSet100=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];"spatialDomain"===i.localName&&(n.spatialDomain=this.assembleSpatialDomain100(i))}return n},s.prototype.assembleSpatialDomain100=function(e){for(var t=e.children||e.childNodes,n={},i=0;i<t.length;i++){var o=t[i];"Envelope"===o.localName?n.envelope=this.assembleLonLatEnvelope100(o):"RectifiedGrid"===o.localName&&(n.rectifiedGrid=new r(o))}return n},s.prototype.assembleRangeSet100=function(e){for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n];if("RangeSet"===r.localName)return this.assembleRangeSetElement100(r)}},s.prototype.assembleRangeSetElement100=function(e){var t=e.children||e.childNodes,n={};n.semantic=e.getAttribute("semantic"),n.refSys=e.getAttribute("refSys"),n.refSysLable=e.getAttribute("refSysLabel");for(var r=0;r<t.length;r++){var i=t[r];"name"===i.localName?n.name=i.textContent:"label"===i.localName?n.label=i.textContent:"axisDescription"===i.localName&&(n.axisDescriptions=this.assembleRangeSetAxisDescription100(i))}return n},s.prototype.assembleRangeSetAxisDescription100=function(e){for(var t=e.children||e.childNodes,n=[],r=0;r<t.length;r++){var i=t[r];"AxisDescription"===i.localName&&n.push(this.assembleRangeSetAxisDescriptionElement100(i))}return n},s.prototype.assembleRangeSetAxisDescriptionElement100=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];"name"===i.localName?n.name=i.textContent:"label"===i.localName?n.label=i.textContent:"values"===i.localName&&(n.values=this.assembleRangeSetValues100(i))}return n},s.prototype.assembleRangeSetValues100=function(e){for(var t=e.children||e.childNodes,n={},r=0;r<t.length;r++){var i=t[r];"singleValue"===i.localName&&(n.singleValue=i.textContent)}return n},s.parseSpacedFloatArray=function(e){for(var t=[],n=e.split(/\s+/),r=0;r<n.length;r++)t.push(parseFloat(n[r]));return t},s})),i("util/WcsTileUrlBuilder",["../error/ArgumentError","../util/Logger"],(function(e,t){"use strict";var n=function(n,r,i){if(!n||0===n.length)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsTileUrlBuilder","constructor","The WCS service address is missing."));if(!r||0===r.length)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsTileUrlBuilder","constructor","The WCS coverage name is missing."));this.serviceAddress=n,this.coverageName=r,this.wcsVersion=i&&i.length>0?i:"1.0.0",this.crs="EPSG:4326"};return n.prototype.urlForTile=function(r,i){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsUrlBuilder","urlForTile","missingTile"));if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsUrlBuilder","urlForTile","The coverage format is null or undefined."));var o=r.sector,a=n.fixGetCoverageString(this.serviceAddress);return a.search(/service=wcs/i)<0&&(a+="service=WCS"),a=(a=(a=(a=(a=(a=(a+="&request=GetCoverage")+"&version="+this.wcsVersion)+"&coverage="+this.coverageName)+"&format="+i)+"&width="+r.tileWidth)+"&height="+r.tileHeight)+"&crs="+this.crs,(a=(a=(a+="&bbox=")+o.minLongitude+","+o.minLatitude+",")+o.maxLongitude+","+o.maxLatitude).replace(" ","%20")},n.fixGetCoverageString=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WcsTileUrlBuilder","fixGetCoverageString","The specified service address is null or undefined."));var r=n.indexOf("?");return r<0?n+="?":r!==n.length-1&&(r=n.search(/&$/))<0&&(n+="&"),n},n})),i("globe/WcsEarthElevationCoverage",["../geom/Location","../geom/Sector","../globe/TiledElevationCoverage","../util/WcsTileUrlBuilder"],(function(e,t,n,r){"use strict";var i=function(){n.call(this,{coverageSector:t.FULL_SPHERE,resolution:.008333333333333,retrievalImageFormat:"image/tiff",minElevation:-11e3,maxElevation:8850,urlBuilder:new r("https://worldwind26.arc.nasa.gov/wms2","NASA_SRTM30_900m_Tiled","1.0.0")}),this.displayName="WCS Earth Elevation Coverage"};return i.prototype=Object.create(n.prototype),i})),i("ogc/wcs/WebCoverageService",["../../error/ArgumentError","../../util/Logger","../../util/Promise","../../ogc/wcs/WcsCapabilities","../../ogc/wcs/WcsCoverage","../../ogc/wcs/WcsCoverageDescriptions"],(function(e,t,n,r,i,o){"use strict";var a=function(){this.serviceAddress=null,this.coverages=[],this.capabilities=null,this.coverageDescriptions=null};return a.WCS_XLMNS="http://www.opengis.net/wcs",a.WCS_2_XLMNS="http://www.opengis.net/wcs/2.0",a.create=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WebCoverageService","constructor","missingUrl"));var r=new a;return r.serviceAddress=n,r.retrieveCapabilities().then((function(e){return r.capabilities=e,r.retrieveCoverageDescriptions(e)})).then((function(e){return r.parseCoverages(e),r}))},a.prototype.getCoverage=function(e){},a.prototype.retrieveCapabilities=function(){var e,t=this;return t.retrieveXml(t.buildCapabilitiesXmlRequest("2.0.1")).then((function(n){return"2.0.1"===(e=n.documentElement.getAttribute("version"))||"2.0.0"===e?n:t.retrieveXml(t.buildCapabilitiesXmlRequest("1.0.0"))})).then((function(e){return new r(e)}))},a.prototype.retrieveCoverageDescriptions=function(){return this.retrieveXml(this.buildDescribeCoverageXmlRequest())},a.prototype.parseCoverages=function(e){this.coverageDescriptions=new o(e);for(var t,n,r=this.coverageDescriptions.coverages.length,a=0;a<r;a++)t=this.coverageDescriptions.coverages[a].coverageId||this.coverageDescriptions.coverages[a].name,n=new i(t,this),this.coverages.push(n)},a.prototype.retrieveXml=function(e){return new n((function(n,r){var i=new XMLHttpRequest;i.open("POST",e.url),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?n(i.responseXML):r(new Error(t.logMessage(t.LEVEL_WARNING,"XML retrieval failed ("+i.statusText+"): "+e.url))))},i.onerror=function(){r(new Error(t.logMessage(t.LEVEL_WARNING,"XML retrieval failed: "+e.url)))},i.ontimeout=function(){r(new Error(t.logMessage(t.LEVEL_WARNING,"XML retrieval timed out: "+e.url)))},i.send(e.body)}))},a.prototype.buildCapabilitiesXmlRequest=function(e){var t=this.createBaseWcsElement("GetCapabilities",e);return{url:this.serviceAddress,body:(new XMLSerializer).serializeToString(t)}},a.prototype.buildDescribeCoverageXmlRequest=function(){var e,t,n,r=this.capabilities.version,i=this.capabilities.coverages.length;e=this.createBaseWcsElement("DescribeCoverage",r),"1.0.0"===r?n=this.capabilities.capability.request.describeCoverage.get:"2.0.1"!==r&&"2.0.0"!==r||(n=this.capabilities.operationsMetadata.getOperationMetadataByName("DescribeCoverage").dcp[0].getMethods[0].url);for(var o=0;o<i;o++)"1.0.0"===r?(t=document.createElementNS(a.WCS_XLMNS,"Coverage")).appendChild(document.createTextNode(this.capabilities.coverages[o].name)):"2.0.1"!==r&&"2.0.0"!==r||(t=document.createElementNS(a.WCS_2_XLMNS,"CoverageId")).appendChild(document.createTextNode(this.capabilities.coverages[o].coverageId)),e.appendChild(t);return{url:n,body:(new XMLSerializer).serializeToString(e)}},a.prototype.createBaseWcsElement=function(e,t){var n;return"1.0.0"===t?(n=document.createElementNS(a.WCS_XLMNS,e)).setAttribute("version","1.0.0"):"2.0.1"!==t&&"2.0.0"!==t||(n=document.createElementNS(a.WCS_2_XLMNS,e)).setAttribute("version",t),n.setAttribute("service","WCS"),n},a})),i("ogc/WfsCapabilities",["../error/ArgumentError","../util/Logger","../ogc/ows/OwsLanguageString","../ogc/ows/OwsOperationsMetadata","../ogc/ows/OwsServiceIdentification","../ogc/ows/OwsServiceProvider"],(function(e,t,n,r,i,o){"use strict";var a=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WfsCapabilities","constructor","No XML DOM specified."));this.assembleDocument(n)};return a.prototype.assembleDocument=function(e){var t=e.documentElement;this.version=t.getAttribute("version"),this.updateSequence=t.getAttribute("updateSequence");for(var n=t.children||t.childNodes,a=0;a<n.length;a++){var s=n[a];"ServiceIdentification"===s.localName?this.serviceIdentification=new i(s):"ServiceProvider"===s.localName?this.serviceProvider=new o(s):"OperationsMetadata"===s.localName?this.operationsMetadata=new r(s):"FeatureTypeList"===s.localName?this.featureTypeList=this.assembleFeatureTypeList(s):"Filter_Capabilities"===s.localName&&(this.filterCapabilities=this.assembleFilterCapabilities(s))}},a.prototype.assembleFeatureTypeList=function(e){for(var n={},r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];if("Operations"==o.localName){n.operations=n.operations||[];try{n.operations=a.assembleOperations(o)}catch(e){t.logMessage(t.LEVEL_SEVERE,"WfsCapabilities","constructor","Exception reading WFS operations description: "+e.message)}}else if("FeatureType"==o.localName){n.featureType=n.featureType||[];try{n.featureType.push(a.assembleFeatureType(o))}catch(e){t.logMessage(t.LEVEL_SEVERE,"WfsCapabilities","constructor","Exception reading WFS operations description: "+e.message)}}}return n},a.prototype.assembleFilterCapabilities=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Conformance"===i.localName?t.conformance=a.assembleConformance(i):"Id_Capabilities"===i.localName?t.idCapabilities=a.assembleIdCapabilities(i):"Scalar_Capabilities"===i.localName?t.scalarCapabilities=a.assembleScalarCapabilities(i):"Spatial_Capabilities"===i.localName?t.spatialCapabilities=a.assembleSpatialCapabilities(i):"Functions"===i.localName&&(t.functions=a.assembleFunctions(i))}return t},a.assembleOperations=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Operation"==i.localName&&t.push(i.textContent)}return t},a.assembleFeatureType=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Name"==i.localName?t.name=i.textContent:"Title"==i.localName?t.title=i.textContent:"Abstract"==i.localName?t.abstract=i.textContent:"Keywords"==i.localName?(t.keywords=t.keywords||[],t.keywords=a.assembleKeywords(i)):"DefaultSRS"==i.localName?t.defaultSRS=i.textContent:"OtherSRS"==i.localName?(t.otherSRS=t.otherSRS||[],t.otherSRS.push(i.textContent)):"WGS84BoundingBox"==i.localName?t.wgs84BoundingBox=a.assembleBoundingBox(i):"DefaultCRS"==i.localName?t.defaultCRS=i.textContent:"OtherCRS"==i.localName?(t.otherCRS=t.otherCRS||[],t.otherCRS.push(i.textContent)):"OutputFormats"==i.localName?t.outputFormats=a.assembleOutputFormats(i):"MetadataURL"==i.localName&&(t.metadataUrl=a.assembleMetadataUrl(i))}return t},a.assembleBoundingBox=function(e){var t={},n=e.getAttribute("crs");n&&(t.crs=n);for(var r=e.children||e.childNodes,i=0;i<r.length;i++){var o=r[i];if("LowerCorner"===o.localName){var a=o.textContent.split(" ");t.lowerCorner=[parseFloat(a[0]),parseFloat(a[1])]}else if("UpperCorner"===o.localName){var s=o.textContent.split(" ");t.upperCorner=[parseFloat(s[0]),parseFloat(s[1])]}}return t},a.assembleOutputFormats=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Format"===i.localName&&t.push(i.textContent)}return t},a.assembleMetadataUrl=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"MetadataURL"===i.localName&&(t.format=i.getAttribute("format"),t.type=i.getAttribute("type"))}return outputFormats},a.assembleKeywords=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Keyword"===i.localName&&t.push(i.textContent)}return t},a.assembleConformance=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i,o=n[r];"Constraint"===o.localName&&((i=a.assembleConstraint(o)).name=o.getAttribute("name"),t.push(i))}return t},a.assembleConstraint=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"DefaultValue"===i.localName&&(t.defaultValue=i.textContent)}return t},a.assembleIdCapabilities=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"ResourceIdentifier"===i.localName&&(t.resourceIdentifier=i.getAttribute("name"))}return t},a.assembleScalarCapabilities=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"ComparisonOperators"===i.localName?t.comparisonOperators=a.assembleComparisonOperators(i):"ArithmeticOperators"===i.localName&&(t.arithmeticOperators=a.assembleArithmeticOperators(i))}return t},a.assembleComparisonOperators=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"ComparisonOperator"===i.localName&&t.push(i.textContent)}return t},a.assembleArithmeticOperators=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Functions"===i.localName&&(t.functions=a.assembleArithmeticFunctions(i))}return t},a.assembleArithmeticFunctions=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"FunctionNames"===i.localName&&(t=a.assembleFunctionNames(i))}return t},a.assembleFunctionNames=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];if("FunctionName"===i.localName){var o={name:i.textContent,nArgs:i.getAttribute("nArgs")};t.push(o)}}return t},a.assembleSpatialCapabilities=function(e){for(var t={},n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"GeometryOperands"===i.localName?t.geometryOperands=a.assembleGeometryOperands(i):"SpatialOperators"===i.localName&&(t.spatialOperators=a.assembleSpatialOperators(i))}return t},a.assembleGeometryOperands=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"GeometryOperand"===i.localName&&t.push(i.getAttribute("name"))}return t},a.assembleSpatialOperators=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"SpatialOperator"===i.localName&&t.push(i.getAttribute("name"))}return t},a.assembleFunctions=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Function"===i.localName&&t.push(a.assembleFunction(i))}return t},a.assembleFunction=function(e){var t={};t.name=e.getAttribute("name");for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Returns"===i.localName?t.returns=i.textContent:"Arguments"===i.localName&&(t.arguments=a.assembleArguments(i))}return t},a.assembleArguments=function(e){for(var t=[],n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Argument"===i.localName&&t.push(a.assembleArgument(i))}return t},a.assembleArgument=function(e){var t={};t.name=e.getAttribute("name");for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Type"===i.localName&&(t.type=i.textContent)}return t},a})),i("formats/wkt/WktElements",[],(function(){return{}})),i("formats/wkt/WktType",[],(function(){var e=function(){};return e.SupportedGeometries={LINE_STRING:"LINESTRING",MULTI_LINE_STRING:"MULTILINESTRING",POLYGON:"POLYGON",MULTI_POLYGON:"MULTIPOLYGON",POINT:"POINT",MULTI_POINT:"MULTIPOINT",TRIANGLE:"TRIANGLE",GEOMETRY_COLLECTION:"GEOMETRYCOLLECTION"},e.TokenType={LEFT_PARENTHESIS:0,COMMA:1,RIGHT_PARENTHESIS:2,NUMBER:3,TEXT:4},e})),i("formats/wkt/geom/WktObject",["../../../geom/Location","../../../geom/Position","../WktElements","../WktType"],(function(e,t,n,r){var i=function(e){this.type=e,this._is3d=!1,this._isLrs=!1,this.coordinates=[],this.options={coordinates:[],leftParenthesis:0,rightParenthesis:0,tokens:[]}};return i.prototype.set3d=function(){this._is3d=!0},i.prototype.setLrs=function(){this._isLrs=!0},i.prototype.addCoordinates=function(n){this._is3d?this.coordinates.push(new t(n[1],n[0],n[2]||0)):this.coordinates.push(new e(n[1],n[0]))},i.prototype.shapes=function(){return[]},i.prototype.handleToken=function(e){var t=e.value,n=this.options;e.type===r.TokenType.TEXT?this.text(n,t):e.type===r.TokenType.LEFT_PARENTHESIS?this.leftParenthesis(n):e.type===r.TokenType.RIGHT_PARENTHESIS?this.rightParenthesis(n):e.type===r.TokenType.NUMBER?this.number(n,t):e.type===r.TokenType.COMMA&&this.comma(n),n.tokens.push(e)},i.prototype.text=function(e,t){if((t=t.toUpperCase()).length<=2)this.setOptions(t,this);else if(0===t.indexOf("EMPTY"))e.leftParenthesis=1,e.rightParenthesis=1;else{var r=t.match("[M]?[Z]?$");r&&r.length>0&&""!=r[0]&&this.setOptions(r,null);var o=n[t]&&new n[t];o||(o=new i),r&&r.length>0&&""!=r[0]&&o.setOptions(r[0],o),this.add(o)}},i.prototype.rightParenthesis=function(e){e.rightParenthesis++,e.coordinates&&(this.addCoordinates(e.coordinates),e.coordinates=null)},i.prototype.leftParenthesis=function(e){e.leftParenthesis++},i.prototype.comma=function(e){e.coordinates?(this.addCoordinates(e.coordinates),e.coordinates=null):this.commaWithoutCoordinates(e)},i.prototype.commaWithoutCoordinates=function(e){},i.prototype.number=function(e,t){e.coordinates=e.coordinates||[],e.coordinates.push(t)},i.prototype.setOptions=function(e,t){"Z"==e?t.set3d():"M"==e?t.setLrs():"MZ"==e&&(t.set3d(),t.setLrs())},i.prototype.isFinished=function(){return this.options.leftParenthesis===this.options.rightParenthesis&&this.options.leftParenthesis>0},i})),i("formats/wkt/WktTokens",["./WktElements","./geom/WktObject","./WktType"],(function(e,t,n){var r=function(e){this.sourceText=e};return r.prototype.objects=function(){var n,r=[];return this.tokenize(this.sourceText).forEach((function(i){if(n&&n.isFinished()||!n){var o=i.value,a=o.match("[M]?[Z]?$");a&&a.length>0&&""!=a[0]&&(o=o.substring(0,o.length-a.length)),(n=e[o]&&new e[o])||(n=new t),a&&a.length>0&&""!=a[0]&&n.setOptions(a[0],n),r.push(n)}else n.handleToken(i)})),r},r.prototype.tokenize=function(e){this.currentPosition=0;for(var t=[];this.currentPosition<e.length;this.currentPosition++){var r=e.charAt(this.currentPosition);if("("==r)t.push({type:n.TokenType.LEFT_PARENTHESIS});else if(","==r)t.push({type:n.TokenType.COMMA});else if(")"==r)t.push({type:n.TokenType.RIGHT_PARENTHESIS});else if(this.isAlpha(r)){var i=this.readText(e);t.push({type:n.TokenType.TEXT,value:i})}else{if(!this.isNumeric(r)){if(this.isWhiteSpace(r))continue;throw new Error("Invalid character: {{",r,"}}")}var o=this.readNumeric(e);t.push({type:n.TokenType.NUMBER,value:o})}}return t},r.prototype.isAlpha=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"},r.prototype.isNumeric=function(e){return e>="0"&&e<="9"||"."==e||"-"==e},r.prototype.isWhiteSpace=function(e){return" "==e||"\t"==e||"\r"==e||"\n"==e},r.prototype.readText=function(e){for(var t="";this.isAlpha(e.charAt(this.currentPosition));)t+=e.charAt(this.currentPosition),this.currentPosition++;return this.currentPosition--,t},r.prototype.readNumeric=function(e){for(var t="";this.isNumeric(e.charAt(this.currentPosition));)t+=e.charAt(this.currentPosition),this.currentPosition++;return this.currentPosition--,Number(t)},r})),i("formats/wkt/Wkt",["../../error/ArgumentError","../../util/Logger","./WktTokens"],(function(e,t,n){var r=function(e){this.textRepresentation=e,this._parserCompletionCallback=this.defaultParserCompletionCallback,this._shapeConfigurationCallback=this.defaultShapeConfigurationCallback,this._layer=null};return Object.defineProperties(r.prototype,{parserCompletionCallback:{get:function(){return this._parserCompletionCallback}},shapeConfigurationCallback:{get:function(){return this._shapeConfigurationCallback}},layer:{get:function(){return this._layer}}}),r.prototype.load=function(e,t,r){r&&(this._layer=r),e&&(this._parserCompletionCallback=e),t&&(this._shapeConfigurationCallback=t),this.parserCompletionCallback(this,new n(this.textRepresentation).objects())},r.prototype.defaultShapeConfigurationCallback=function(e){},r.prototype.defaultParserCompletionCallback=function(e,t){var n=e.shapeConfigurationCallback,r=[];t.forEach((function(e){e.shapes().forEach((function(t){var i=n(e);i&&i.attributes&&(t.attributes=i.attributes),i&&i.highlightAttributes&&(t.highlightAttributes=i.highlightAttributes),i&&i.pickDelegate&&(t.pickDelegate=i.pickDelegate),i&&i.userProperties&&(t.userProperties=i.userProperties),r.push(t)}))})),e.layer&&e.layer.addRenderables(r)},r})),i("formats/wkt/WktExporter",["../../error/ArgumentError","../../util/Logger","./WktType"],(function(e,t,n){"use strict";return{exportRenderable:function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportRenderable","missingRenderable"));return n instanceof WorldWind.Placemark?this.exportPlacemark(n):n instanceof WorldWind.Path?this.exportPath(n):n instanceof WorldWind.Polygon?this.exportPolygon(n):n instanceof WorldWind.SurfacePolyline?this.exportSurfacePolyline(n):n instanceof WorldWind.SurfacePolygon?this.exportSurfacePolygon(n):n instanceof WorldWind.SurfaceEllipse?this.exportSurfaceEllipse(n):n instanceof WorldWind.SurfaceCircle?this.exportSurfaceCircle(n):n instanceof WorldWind.SurfaceRectangle?this.exportSurfaceRectangle(n):n instanceof WorldWind.SurfaceSector?this.exportSurfaceSector(n):(t.log(t.LEVEL_WARNING,"Export renderable not implemented: "+n),null)},exportRenderables:function(r){if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportRenderables","missingRenderables"));if(0!=r.length){if(r.length>1){for(var i=n.SupportedGeometries.GEOMETRY_COLLECTION+"(",o=0;o<r.length;o++){var a=this.exportRenderable(r[o]);a&&(i+=a,i+=",")}return(i=i.substring(0,i.length-1))+")"}return this.exportRenderable(r[0])}},exportLayer:function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportLayer","missingLayer"));return this.exportRenderables(n.renderables)},exportPlacemark:function(r){if(!(r instanceof WorldWind.Placemark))throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportPlacemark","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POINT+"(";return(i=i+r.position.longitude+" "+r.position.latitude)+")"},exportPath:function(r){if(!(r instanceof WorldWind.Path))throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportPath","invalidTypeOfRenderable"));for(var i=n.SupportedGeometries.LINE_STRING+"(",o=0;o<r.positions.length;o++)i=i+r.positions[o].longitude+" "+r.positions[o].latitude;return(i=i.substring(0,i.length-2))+")"},exportPolygon:function(r){if(!(r instanceof WorldWind.Polygon))throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportPolygon","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";if(r.boundaries.length>0&&r.boundaries[0].length>2){for(var o=0;o<r.boundaries.length;o++){i+="(";for(var a=0;a<r.boundaries[o].length;a++)i=i+r.boundaries[o][a].longitude+" "+r.boundaries[o][a].latitude,i+=", ";i=i.substring(0,i.length-2),i+=")",i+=", "}i=i.substring(0,i.length-2)}else{for(i+="(",o=0;o<r.boundaries.length;o++)i=i+r.boundaries[o].longitude+" "+r.boundaries[o].latitude,i+=", ";i=i.substring(0,i.length-2),i+=")"}return i+")"},exportSurfacePolyline:function(r){if(!(r instanceof WorldWind.SurfacePolyline))throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportSurfacePolyline","invalidTypeOfRenderable"));for(var i=n.SupportedGeometries.LINE_STRING+"(",o=0;o<r.boundaries.length;o++)i=i+r.boundaries[o].longitude+" "+r.boundaries[o].latitude,i+=", ";return(i=i.substring(0,i.length-2))+")"},exportSurfacePolygon:function(r){if(!(r instanceof WorldWind.SurfacePolygon))throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportSurfacePolygon","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";if(r.boundaries.length>0&&r.boundaries[0].length>2){for(var o=0;o<r.boundaries.length;o++){i+="(";for(var a=0;a<r.boundaries[o].length;a++)i=i+r.boundaries[o][a].longitude+" "+r.boundaries[o][a].latitude,i+=", ";i=i.substring(0,i.length-2),i+=")",i+=", "}i=i.substring(0,i.length-2)}else{for(i+="(",o=0;o<r.boundaries.length;o++)i=i+r.boundaries[o].longitude+" "+r.boundaries[o].latitude,i+=", ";i=i.substring(0,i.length-2),i+=")"}return i+")"},exportSurfaceEllipse:function(r){if(!(r instanceof WorldWind.SurfaceEllipse))throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportSurfaceEllipse","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";i+="(";for(var o=0;o<r._boundaries.length;o++)i=i+r._boundaries[o].longitude+" "+r._boundaries[o].latitude,i+=", ";return i=i.substring(0,i.length-2),(i+=")")+")"},exportSurfaceCircle:function(r){if(!(r instanceof WorldWind.SurfaceCircle))throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportSurfaceCircle","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";i+="(";for(var o=0;o<r._boundaries.length;o++)i=i+r._boundaries[o].longitude+" "+r._boundaries[o].latitude,i+=", ";return i=i.substring(0,i.length-2),(i+=")")+")"},exportSurfaceRectangle:function(r){if(!(r instanceof WorldWind.SurfaceRectangle))throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportSurfaceRectangle","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";i+="(";for(var o=0;o<r._boundaries.length;o++)i=i+r._boundaries[o].longitude+" "+r._boundaries[o].latitude,i+=", ";return i=i.substring(0,i.length-2),(i+=")")+")"},exportSurfaceSector:function(r){if(!(r instanceof WorldWind.SurfaceSector))throw new e(t.logMessage(t.LEVEL_SEVERE,"WktExporter","exportSurfaceSector","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";i+="(";for(var o=0;o<r._boundaries.length;o++)i=i+r._boundaries[o].longitude+" "+r._boundaries[o].latitude,i+=", ";return i=i.substring(0,i.length-2),(i+=")")+")"}}})),i("formats/wkt/geom/WktGeometryCollection",["../../../geom/Location","../../../geom/Position","../WktElements","./WktObject","../WktType"],(function(e,t,n,r,i){var o=function(){r.call(this,i.SupportedGeometries.GEOMETRY_COLLECTION),this.objects=[]};return(o.prototype=Object.create(r.prototype)).add=function(e){this.objects.push(e)},o.prototype.addCoordinates=function(n){var r=this.objects[this.objects.length-1];this._is3d?r.coordinates.push(new t(n[0],n[1],n[2]||0)):r.coordinates.push(new e(n[0],n[1]))},o.prototype.shapes=function(){var e=[];return this.objects.forEach((function(t){t.shapes().forEach((function(t){e.push(t)}))})),e},n.GEOMETRYCOLLECTION=o,o})),i("formats/wkt/geom/WktLineString",["../../../shapes/Path","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolyline","../WktElements","./WktObject","../WktType"],(function(e,t,n,r,i,o){var a=function(){i.call(this,o.SupportedGeometries.LINE_STRING)};return(a.prototype=Object.create(i.prototype)).shapes=function(){return this._is3d?[new e(this.coordinates,new t(null))]:[new n(this.coordinates,new t(null))]},r.LINESTRING=a,a})),i("formats/wkt/geom/WktMultiLineString",["../../../shapes/Path","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolyline","../WktElements","./WktObject","../WktType"],(function(e,t,n,r,i,o){var a=function(){i.call(this,o.SupportedGeometries.MULTI_LINE_STRING),this.objectBoundaries=[]};return(a.prototype=Object.create(i.prototype)).commaWithoutCoordinates=function(){this.objectBoundaries.push(this.coordinates.slice()),this.coordinates=[]},a.prototype.shapes=function(){return this.commaWithoutCoordinates(),this._is3d?this.objectBoundaries.map(function(n){return new e(n,new t(null))}.bind(this)):this.objectBoundaries.map(function(e){return new n(e,new t(null))}.bind(this))},r.MULTILINESTRING=a,a})),i("formats/wkt/geom/WktPoint",["../../../shapes/Placemark","../../../shapes/PlacemarkAttributes","../WktElements","./WktObject","../WktType"],(function(e,t,n,r,i){var o=function(){r.call(this,i.SupportedGeometries.POINT)};return(o.prototype=Object.create(r.prototype)).shapes=function(){return[o.placemark(this.coordinates[0])]},o.placemark=function(n){var r=new t(null);r.imageScale=1,r.imageOffset=new WorldWind.Offset(WorldWind.OFFSET_FRACTION,.3,WorldWind.OFFSET_FRACTION,0),r.imageColor=WorldWind.Color.WHITE,r.labelAttributes.offset=new WorldWind.Offset(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,1),r.labelAttributes.color=WorldWind.Color.YELLOW,r.drawLeaderLine=!0,r.leaderLineAttributes.outlineColor=WorldWind.Color.RED,r.imageSource=WorldWind.configuration.baseUrl+"images/pushpins/castshadow-purple.png";var i=new e(n,!0,r);return i.altitudeMode=WorldWind.RELATIVE_TO_GROUND,i},n.POINT=o,o})),i("formats/wkt/geom/WktMultiPoint",["../../../shapes/Placemark","../../../shapes/PlacemarkAttributes","../WktElements","./WktObject","./WktPoint","../WktType"],(function(e,t,n,r,i,o){var a=function(){r.call(this,o.SupportedGeometries.MULTI_POINT)};return(a.prototype=Object.create(r.prototype)).commaWithoutCoordinates=function(){},a.prototype.shapes=function(){return this.coordinates.map(function(e){return i.placemark(e)}.bind(this))},n.MULTIPOINT=a,a})),i("formats/wkt/geom/WktMultiPolygon",["../../../shapes/Polygon","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolygon","../WktElements","./WktObject","../WktType"],(function(e,t,n,r,i,o){var a=function(){i.call(this,o.SupportedGeometries.MULTI_POLYGON),this.objectBoundaries=[],this.currentIndex=0};return(a.prototype=Object.create(i.prototype)).rightParenthesis=function(e){i.prototype.rightParenthesis.call(this,e),e.tokens[e.tokens.length-1].type!=o.TokenType.RIGHT_PARENTHESIS?this.addBoundaries():e.tokens[e.tokens.length-1].type==o.TokenType.RIGHT_PARENTHESIS&&e.tokens[e.tokens.length-2].type!=o.TokenType.RIGHT_PARENTHESIS&&this.addObject()},a.prototype.addBoundaries=function(){this.objectBoundaries[this.currentIndex]||(this.objectBoundaries[this.currentIndex]=[]),this.objectBoundaries[this.currentIndex].push(this.coordinates.slice()),this.coordinates=[]},a.prototype.addObject=function(){this.currentIndex++},a.prototype.shapes=function(){return this._is3d?this.objectBoundaries.map(function(n){return new e(n,new t(null))}.bind(this)):this.objectBoundaries.map(function(e){return new n(e,new t(null))}.bind(this))},r.MULTIPOLYGON=a,a})),i("formats/wkt/geom/WktPolygon",["../../../shapes/Polygon","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolygon","../WktElements","./WktObject","../WktType"],(function(e,t,n,r,i,o){var a=function(){i.call(this,o.SupportedGeometries.POLYGON),this._renderable=null};return(a.prototype=Object.create(i.prototype)).commaWithoutCoordinates=function(){this.outerBoundaries=this.coordinates.slice(),this.coordinates=[]},a.prototype.shapes=function(){return this._is3d?this.outerBoundaries?[new e([this.outerBoundaries,this.coordinates],new t(null))]:[new e(this.coordinates,new t(null))]:this.outerBoundaries?[new n([this.outerBoundaries,this.coordinates],new t(null))]:[new n(this.coordinates,new t(null))]},r.POLYGON=a,a})),i("formats/wkt/geom/WktTriangle",["../../../shapes/Polygon","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolygon","../WktElements","./WktObject","../WktType"],(function(e,t,n,r,i,o){var a=function(){i.call(this,o.SupportedGeometries.TRIANGLE),this._renderable=null};return(a.prototype=Object.create(i.prototype)).shapes=function(){return this._is3d?[new e(this.coordinates,new t(null))]:[new n(this.coordinates,new t(null))]},r.TRIANGLE=a,a})),i("layer/WmsLayer",["../error/ArgumentError","../geom/Location","../util/Logger","../util/PeriodicTimeSequence","../geom/Sector","../layer/TiledImageLayer","../util/WmsUrlBuilder"],(function(e,t,n,r,i,o,a){"use strict";var s=function(t,r){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmsLayer","constructor","No configuration specified."));var i=t.service+t.layerNames+t.styleNames;r&&(i+=r),o.call(this,t.sector,t.levelZeroDelta,t.numLevels,t.format,i,t.size,t.size),this.displayName=t.title,this.pickEnabled=!1,this.urlBuilder=new a(t.service,t.layerNames,t.styleNames,t.version,r),t.coordinateSystem&&(this.urlBuilder.crs=t.coordinateSystem),this.timeString=r};return s.prototype=Object.create(o.prototype),s.formLayerConfiguration=function(e){var n={title:e.title,version:e.capability.capsDoc.version},r=e.geographicBoundingBox||e.latLonBoundingBox;r&&r.westBoundLongitude?n.sector=new i(r.southBoundLatitude,r.northBoundLatitude,r.westBoundLongitude,r.eastBoundLongitude):r&&r.minx?n.sector=new i(r.miny,r.maxy,r.minx,r.maxx):n.sector=i.FULL_SPHERE,n.levelZeroDelta=new t(36,36),n.numLevels=19,n.size=256,n.layerNames=e.name;var o=e.capability.request.getMap,a=o.formats;a.indexOf("image/png")>=0?n.format="image/png":a.indexOf("image/jpeg")>=0?n.format="image/jpeg":a.indexOf("image/tiff")>=0?n.format="image/tiff":a.indexOf("image/gif")>=0&&(n.format="image/gif"),n.service=o.getUrl;var u=e.crses;u||(u=e.srses),u&&(u.indexOf("EPSG:4326")>=0||u.indexOf("epsg:4326")>=0?n.coordinateSystem="EPSG:4326":(u.indexOf("CRS84")>=0||u.indexOf("CRS:84")>=0)&&(n.coordinateSystem="CRS:84"));var l=s.parseTimeDimensions(e);return l&&l.length>0&&(n.timeSequences=l),n},s.parseTimeDimensions=function(e){var t=e.extents||e.dimensions,n=null;if(t){n=[];for(var i=0;i<t.length;i++){var o=t[i];if("time"===o.name.toLowerCase()&&(!o.units||"iso8601"===o.units.toLowerCase()))for(var a=o.content.split(","),s=0;s<a.length;s++){var u=a[s],l=u.split("/");1===l.length?n.push(new Date(u)):3===l.length&&n.push(new r(u))}}}return n},s})),i("layer/WmsTimeDimensionedLayer",["../error/ArgumentError","../layer/Layer","../util/Logger","../layer/WmsLayer"],(function(e,t,n,r){"use strict";var i=function(r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmsTimeDimensionedLayer","constructor","No configuration specified."));t.call(this,"WMS Time Dimensioned Layer"),this.config=r,this.displayName=r.title,this.pickEnabled=!1,this.layers={}};return(i.prototype=Object.create(t.prototype)).doRender=function(e){if(this.time){var t=this.time.toISOString(),n=this.layers[t];n||(n=new r(this.config,t),this.layers[t]=n),n.opacity=this.opacity,n.doRender(e),this.inCurrentFrame=n.inCurrentFrame}},i})),i("WorldWindow",["./error/ArgumentError","./BasicWorldWindowController","./render/DrawContext","./globe/EarthElevationModel","./util/FrameStatistics","./geom/Frustum","./globe/Globe","./globe/Globe2D","./util/GoToAnimator","./cache/GpuResourceCache","./geom/Line","./util/Logger","./navigate/LookAtNavigator","./geom/Matrix","./pick/PickedObjectList","./geom/Position","./geom/Rectangle","./geom/Sector","./shapes/SurfaceShape","./shapes/SurfaceShapeTileBuilder","./globe/Terrain","./geom/Vec2","./geom/Vec3","./util/WWMath"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w,E){"use strict";var x=function(o,s){function l(e){e.preventDefault()}function c(e){v.onGestureEvent(e)}function p(e){v.handleRedrawEvent(e)}if(!window.WebGLRenderingContext)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","constructor","webglNotSupported"));var m;if(o instanceof HTMLCanvasElement)m=o;else if(!(m=document.getElementById(o)))throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","constructor","The specified canvas ID is not in the document."));var A=this.createContext(m);if(!A)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","constructor","webglNotSupported"));this.drawContext=new n(A),this.eventListeners={},this.redrawRequested=!0,this.redrawRequestId=null,this.scratchModelview=d.fromIdentity(),this.scratchProjection=d.fromIdentity(),this.hasStencilBuffer=A.getContextAttributes().stencil,this.canvas=m,this.depthBits=A.getParameter(A.DEPTH_BITS),this.viewport=new g(0,0,A.drawingBufferWidth,A.drawingBufferHeight),this.globe=new a(s||new r),this.layers=[],this.navigator=new f,this.worldWindowController=new t(this),this.verticalExaggeration=1,this.deepPicking=!1,this.subsurfaceMode=!1,this.surfaceOpacity=1,this.frameStatistics=new i,this.goToAnimator=new u(this),this._redrawCallbacks=[],this._orderedRenderingFilters=[function(e){v.declutter(e,1)},function(e){v.declutter(e,2)}],this.pixelScale=1,this.addEventListener("mousedown",l),this.addEventListener("touchstart",l),this.addEventListener("contextmenu",l),this.addEventListener("wheel",l);var v=this;window.PointerEvent?(this.canvas.style.setProperty("touch-action","none"),this.addEventListener("pointerdown",c,!1),window.addEventListener("pointermove",c,!1),window.addEventListener("pointercancel",c,!1),window.addEventListener("pointerup",c,!1)):(this.addEventListener("mousedown",c,!1),window.addEventListener("mousemove",c,!1),window.addEventListener("mouseup",c,!1),this.addEventListener("touchstart",c,!1),this.addEventListener("touchmove",c,!1),this.addEventListener("touchend",c,!1),this.addEventListener("touchcancel",c,!1)),this.addEventListener("wheel",(function(e){c(e)})),this.canvas.addEventListener("webglcontextlost",(function(e){v.handleContextLost(e)}),!1),this.canvas.addEventListener("webglcontextrestored",(function(e){v.handleContextRestored(e)}),!1),this.canvas.addEventListener(WorldWind.REDRAW_EVENT_TYPE,p,!1),window.addEventListener(WorldWind.REDRAW_EVENT_TYPE,p,!1),this.animationFrameLoop()};return Object.defineProperties(x.prototype,{orderedRenderingFilters:{get:function(){return this._orderedRenderingFilters}},redrawCallbacks:{get:function(){return this._redrawCallbacks}}}),x.prototype.canvasCoordinates=function(e,t){var n=this.canvas.getBoundingClientRect(),r=e-(n.left+this.canvas.clientLeft),i=t-(n.top+this.canvas.clientTop);return new _(r,i)},x.prototype.onGestureEvent=function(e){this.worldWindowController.onGestureEvent(e)},x.prototype.addEventListener=function(t,n){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","addEventListener","missingType"));if(!n)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","addEventListener","missingListener"));var r=this,i=this.eventListeners[t];i||(i={listeners:[],callback:function(e){e.worldWindow=r;for(var t=0,n=i.listeners.length;t<n;t++)i.listeners[t](e)}},this.eventListeners[t]=i),-1==i.listeners.indexOf(n)&&(i.listeners.splice(0,0,n),1==i.listeners.length&&this.canvas.addEventListener(t,i.callback,!1))},x.prototype.removeEventListener=function(t,n){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","removeEventListener","missingType"));if(!n)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","removeEventListener","missingListener"));var r=this.eventListeners[t];if(r){var i=r.listeners.indexOf(n);-1!=i&&(r.listeners.splice(i,1),0==r.listeners.length&&this.canvas.removeEventListener(t,r.callback,!1))}},x.prototype.redraw=function(){this.redrawRequested=!0},x.prototype.pick=function(t){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","pick","missingPoint"));return this.drawContext.currentGlContext.isContextLost()?new p:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.pickPoint=t,this.drawContext.pickRay=this.rayThroughScreenPoint(t),this.drawFrame(),this.drawContext.objectsAtPickPoint)},x.prototype.pickTerrain=function(t){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","pickTerrain","missingPoint"));return this.drawContext.currentGlContext.isContextLost()?new p:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.pickTerrainOnly=!0,this.drawContext.pickPoint=t,this.drawContext.pickRay=this.rayThroughScreenPoint(t),this.drawFrame(),this.drawContext.objectsAtPickPoint)},x.prototype.pickShapesInRegion=function(t){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","pickShapesInRegion","missingRectangle"));return this.drawContext.currentGlContext.isContextLost()?new p:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.regionPicking=!0,this.drawContext.pickRectangle=new g(t.x,this.canvas.height-t.y,t.width,t.height),this.drawFrame(),this.drawContext.objectsAtPickPoint)},x.prototype.createContext=function(e){var t={antialias:!1,stencil:!0},n=e.getContext("webgl",t);return n||(n=e.getContext("experimental-webgl",t)),n},x.prototype.handleContextLost=function(e){h.log(h.LEVEL_INFO,"WebGL context event: "+e.statusMessage),e.preventDefault(),this.drawContext.contextLost(),window.cancelAnimationFrame(this.redrawRequestId)},x.prototype.handleContextRestored=function(e){h.log(h.LEVEL_INFO,"WebGL context event: "+e.statusMessage),this.drawContext.contextRestored(),this.redraw(),this.animationFrameLoop()},x.prototype.handleRedrawEvent=function(e){this.redraw()},x.prototype.animationFrameLoop=function(){this.redrawIfNeeded();var e=this;this.redrawRequestId=window.requestAnimationFrame((function(){e.animationFrameLoop()}))},x.prototype.redrawIfNeeded=function(){if(this.resize(),this.redrawRequested)try{this.redrawRequested=!1,this.drawContext.previousRedrawTimestamp=this.drawContext.timestamp,this.callRedrawCallbacks(WorldWind.BEFORE_REDRAW),this.resetDrawContext(),this.drawFrame()}catch(e){h.logMessage(h.LEVEL_SEVERE,"WorldWindow","redrawIfNeeded","Exception occurred during redrawing.\n"+e.toString())}finally{this.callRedrawCallbacks(WorldWind.AFTER_REDRAW),this.drawContext.redrawRequested&&(this.redrawRequested=!0)}},x.prototype.resize=function(){var e=this.drawContext.currentGlContext,t=e.canvas.clientWidth*this.pixelScale,n=e.canvas.clientHeight*this.pixelScale;e.canvas.width==t&&e.canvas.height==n||(e.canvas.width=t,e.canvas.height=n,e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this.viewport=new g(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this.redrawRequested=!0)},x.prototype.computeViewingTransform=function(t,n){if(!n)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","computeViewingTransform","missingModelview"));n.setToIdentity(),this.worldWindowController.applyLimits();var r=this.globe,i=this.navigator,o=new m(i.lookAtLocation.latitude,i.lookAtLocation.longitude,0);if(n.multiplyByLookAtModelview(o,i.range,i.heading,i.tilt,i.roll,r),t){t.setToIdentity();var a=E.max(r.equatorialRadius,r.polarRadius),s=n.extractEyePoint(new w(0,0,0)),u=r.computePositionFromPoint(s[0],s[1],s[2],new m(0,0,0)),l=E.horizonDistanceForGlobeRadius(a,u.altitude),c=E.horizonDistanceForGlobeRadius(a,16e4),f=this.viewport,d=l+c;d<1e3&&(d=1e3);var p=E.perspectiveNearDistanceForFarDistance(d,10,this.depthBits),g=u.altitude-r.elevationAtLocation(u.latitude,u.longitude);if(g>0){var A=E.perspectiveNearDistance(f.width,f.height,g);p>A&&(p=A)}p<1&&(p=1),t.setToPerspectiveProjection(f.width,f.height,p,d)}},x.prototype.computePixelMetrics=function(e){var t=d.fromIdentity();t.invertMatrix(e);var n=new w(-1,-1,-1),r=new w(1,1,-1),i=new w(-1,-1,1),o=new w(1,1,1);n.multiplyByMatrix(t),r.multiplyByMatrix(t),i.multiplyByMatrix(t),o.multiplyByMatrix(t);var a=E.fabs(r[0]-n[0]),s=E.fabs(o[0]-i[0]),u=-n[2],l=(s-a)/(-i[2]-u),c=a-l*u;return{pixelSizeFactor:l/this.viewport.width,pixelSizeOffset:c/this.viewport.height}},x.prototype.pixelSizeAtDistance=function(e){this.computeViewingTransform(this.scratchProjection,this.scratchModelview);var t=this.computePixelMetrics(this.scratchProjection);return t.pixelSizeFactor*e+t.pixelSizeOffset},x.prototype.computeDrawContext=function(){var e=this.drawContext;this.computeViewingTransform(e.projection,e.modelview),e.viewport=this.viewport,e.eyePoint=e.modelview.extractEyePoint(new w(0,0,0)),e.modelviewProjection.setToIdentity(),e.modelviewProjection.setToMultiply(e.projection,e.modelview);var t=this.computePixelMetrics(e.projection);e.pixelSizeFactor=t.pixelSizeFactor,e.pixelSizeOffset=t.pixelSizeOffset;var n=d.fromIdentity();n.invertOrthonormalMatrix(e.modelview),e.modelviewNormalTransform=d.fromIdentity().setToTransposeOfMatrix(n.upper3By3());var r=d.fromIdentity();r.setToTransposeOfMatrix(e.modelview),e.frustumInModelCoordinates=o.fromProjectionMatrix(e.projection),e.frustumInModelCoordinates.transformByMatrix(r),e.frustumInModelCoordinates.normalize()},x.prototype.resetDrawContext=function(){this.globe.offset=0;var e=this.drawContext;e.reset(),e.globe=this.globe,e.navigator=this.navigator,e.layers=this.layers.slice(),e.layers.push(e.screenCreditController),this.computeDrawContext(),e.verticalExaggeration=this.verticalExaggeration,e.surfaceOpacity=this.surfaceOpacity,e.deepPicking=this.deepPicking,e.frameStatistics=this.frameStatistics,e.pixelScale=this.pixelScale,e.update()},x.prototype.drawFrame=function(){try{this.drawContext.frameStatistics.beginFrame(),this.beginFrame(),this.drawContext.globe.is2D()&&this.drawContext.globe.continuous?this.do2DContiguousRepaint():this.doNormalRepaint()}finally{this.endFrame(),this.drawContext.frameStatistics.endFrame()}},x.prototype.doNormalRepaint=function(){this.createTerrain(),this.clearFrame(),this.deferOrderedRendering=!1,this.drawContext.pickingMode?this.drawContext.makePickFrustum()&&(this.doPick(),this.resolvePick()):(this.doDraw(),this.subsurfaceMode&&this.hasStencilBuffer&&(this.redrawSurface(),this.drawScreenRenderables()))},x.prototype.do2DContiguousRepaint=function(){this.createTerrain2DContiguous(),this.clearFrame(),this.drawContext.pickingMode?this.drawContext.makePickFrustum()&&(this.pick2DContiguous(),this.resolvePick()):this.draw2DContiguous()},x.prototype.resolvePick=function(){this.drawContext.pickTerrainOnly?this.resolveTerrainPick():this.drawContext.regionPicking?this.resolveRegionPick():this.resolveTopPick()},x.prototype.beginFrame=function(){var e=this.drawContext.currentGlContext;e.enable(e.BLEND),e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.depthFunc(e.LEQUAL),this.drawContext.pickingMode&&(this.drawContext.makePickFramebuffer(),this.drawContext.bindFramebuffer(this.drawContext.pickFramebuffer))},x.prototype.endFrame=function(){var e=this.drawContext.currentGlContext;e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.blendFunc(e.ONE,e.ZERO),e.depthFunc(e.LESS),e.clearColor(0,0,0,1),this.drawContext.bindFramebuffer(null),this.drawContext.bindProgram(null)},x.prototype.clearFrame=function(){var e=this.drawContext,t=e.currentGlContext;t.clearColor(e.clearColor.red,e.clearColor.green,e.clearColor.blue,e.clearColor.alpha),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},x.prototype.doDraw=function(){this.drawContext.renderShapes=!0,this.subsurfaceMode&&this.hasStencilBuffer?(this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawContext.currentGlContext.clear(this.drawContext.currentGlContext.DEPTH_BUFFER_BIT|this.drawContext.currentGlContext.STENCIL_BUFFER_BIT),this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.ALWAYS,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE),this.drawOrderedRenderables())):(this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawOrderedRenderables(),this.drawScreenRenderables()))},x.prototype.redrawSurface=function(){this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.EQUAL,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.KEEP,this.drawContext.currentGlContext.KEEP,this.drawContext.currentGlContext.KEEP),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!1),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST)},x.prototype.doPick=function(){this.drawContext.terrain&&this.drawContext.terrain.pick(this.drawContext),this.drawContext.pickTerrainOnly||(this.subsurfaceMode&&this.hasStencilBuffer?(this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawContext.currentGlContext.clear(this.drawContext.currentGlContext.DEPTH_BUFFER_BIT|this.drawContext.currentGlContext.STENCIL_BUFFER_BIT),this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.ALWAYS,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE),this.drawOrderedRenderables(),this.drawContext.terrain.pick(this.drawContext),this.drawScreenRenderables())):(this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawOrderedRenderables(),this.drawScreenRenderables())))},x.prototype.createTerrain=function(){var e=this.drawContext;e.terrain=this.globe.tessellator.tessellate(e),e.frameStatistics.setTerrainTileCount(e.terrain?e.terrain.surfaceGeometry.length:0)},x.prototype.makeCurrent=function(e){var t=this.drawContext;switch(t.globe.offset=e,t.globeStateKey=t.globe.stateKey,e){case-1:t.terrain=this.terrainLeft;break;case 0:t.terrain=this.terrainCenter;break;case 1:t.terrain=this.terrainRight}},x.prototype.createTerrain2DContiguous=function(){var e=this.drawContext;this.terrainCenter=null,e.globe.offset=0,e.globeStateKey=e.globe.stateKey,e.globe.intersectsFrustum(e.frustumInModelCoordinates)&&(this.terrainCenter=e.globe.tessellator.tessellate(e)),this.terrainRight=null,e.globe.offset=1,e.globeStateKey=e.globe.stateKey,e.globe.intersectsFrustum(e.frustumInModelCoordinates)&&(this.terrainRight=e.globe.tessellator.tessellate(e)),this.terrainLeft=null,e.globe.offset=-1,e.globeStateKey=e.globe.stateKey,e.globe.intersectsFrustum(e.frustumInModelCoordinates)&&(this.terrainLeft=e.globe.tessellator.tessellate(e))},x.prototype.draw2DContiguous=function(){this.terrainCenter&&(this.makeCurrent(0),this.deferOrderedRendering=this.terrainLeft||this.terrainRight,this.doDraw()),this.terrainRight&&(this.makeCurrent(1),this.deferOrderedRendering=this.terrainLeft||this.terrainLeft,this.doDraw()),this.deferOrderedRendering=!1,this.terrainLeft&&(this.makeCurrent(-1),this.doDraw()),this.subsurfaceMode&&this.hasStencilBuffer&&(this.deferOrderedRendering=!0,this.terrainCenter&&(this.makeCurrent(0),this.redrawSurface()),this.terrainRight&&(this.makeCurrent(1),this.redrawSurface()),this.terrainLeft&&(this.makeCurrent(-1),this.redrawSurface())),this.drawScreenRenderables()},x.prototype.pick2DContiguous=function(){this.terrainCenter&&(this.makeCurrent(0),this.deferOrderedRendering=this.terrainLeft||this.terrainRight,this.doPick()),this.terrainRight&&(this.makeCurrent(1),this.deferOrderedRendering=this.terrainLeft||this.terrainLeft,this.doPick()),this.deferOrderedRendering=!1,this.terrainLeft&&(this.makeCurrent(-1),this.doPick())},x.prototype.drawLayers=function(e){var t,n=Date.now(),r=this.drawContext,i=r.layers;r.accumulateOrderedRenderables=e;for(var o=0,a=i.length;o<a;o++)if(t=i[o]){r.currentLayer=t;try{t.render(r)}catch(e){h.log(h.LEVEL_SEVERE,"Error while rendering layer "+t.displayName+".\n"+e.toString())}}r.currentLayer=null;var s=Date.now();r.frameStatistics.layerRenderingTime=s-n},x.prototype.addLayer=function(e){e&&this.layers.push(e)},x.prototype.removeLayer=function(e){var t=this.indexOfLayer(e);t>=0&&this.layers.splice(t,1)},x.prototype.insertLayer=function(e,t){t&&this.layers.splice(e,0,t)},x.prototype.indexOfLayer=function(e){return this.layers.indexOf(e)},x.prototype.drawSurfaceRenderables=function(){var e,t=this.drawContext;for(t.reverseSurfaceRenderables();e=t.popSurfaceRenderable();)try{e.renderSurface(t)}catch(e){h.logMessage(h.LEVEL_WARNING,"WorldWindow","drawSurfaceRenderables","Error while rendering a surface renderable.\n"+e.message)}},x.prototype.drawOrderedRenderables=function(){var e,t=Date.now(),n=this.drawContext;if(n.sortOrderedRenderables(),this._orderedRenderingFilters)for(var r=0;r<this._orderedRenderingFilters.length;r++)this._orderedRenderingFilters[r](this.drawContext);for(n.orderedRenderingMode=!0;e=n.popOrderedRenderable();)try{e.renderOrdered(n)}catch(e){h.logMessage(h.LEVEL_WARNING,"WorldWindow","drawOrderedRenderables","Error while rendering an ordered renderable.\n"+e.message)}n.orderedRenderingMode=!1,n.frameStatistics.orderedRenderingTime=Date.now()-t},x.prototype.drawScreenRenderables=function(){for(var e,t=this.drawContext;e=t.nextScreenRenderable();)try{e.renderOrdered(t)}catch(e){h.logMessage(h.LEVEL_WARNING,"WorldWindow","drawOrderedRenderables","Error while rendering a screen renderable.\n"+e.message)}},x.prototype.resolveTopPick=function(){if(0!=this.drawContext.objectsAtPickPoint.objects.length){var e=this.drawContext.objectsAtPickPoint,t=this.drawContext.readPickColor(this.drawContext.pickPoint),n=null,r=null;if(t){for(var i=0,o=e.objects.length;i<o;i++){var a=e.objects[i];if(a.isTerrain&&(r=a),a.color.equals(t)&&(a.isOnTop=!0,n=a,r))break}this.drawContext.deepPicking||(e.clear(),n&&e.add(n),r&&r!=n&&e.add(r))}else e.clear()}},x.prototype.resolveTerrainPick=function(){for(var e,t=this.drawContext.objectsAtPickPoint,n=0,r=t.objects.length;n<r;n++)if((e=t.objects[n]).isTerrain){e.isOnTop=!0;break}},x.prototype.resolveRegionPick=function(){if(0!=this.drawContext.objectsAtPickPoint.objects.length)for(var e,t=this.drawContext.objectsAtPickPoint,n=this.drawContext.readPickColors(this.drawContext.pickRectangle),r=0,i=t.objects.length;r<i;r++)(e=t.objects[r])&&(n[e.color.toByteString()]?e.isOnTop=!0:e.userObject instanceof v&&(t.objects.splice(r,1),r-=1))},x.prototype.callRedrawCallbacks=function(e){for(var t=0,n=this._redrawCallbacks.length;t<n;t++)try{this._redrawCallbacks[t](this,e)}catch(e){h.log(h.LEVEL_SEVERE,"Exception calling redraw callback.\n"+e.toString())}},x.prototype.goTo=function(e,t){this.goToAnimator.goTo(e,t)},x.prototype.declutter=function(t,n){if(!n)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","declutter","Group ID is null, undefined or 0."));for(var r=[],i=0;i<t.orderedRenderables.length;i++){var o=t.orderedRenderables[i].orderedRenderable;o.declutterGroup===n&&r.push(o)}for(var a=[],s=0;s<r.length;s++){var u=r[s],l=u.screenBounds;l&&l.intersectsRectangles(a)?u.targetVisibility=0:(u.targetVisibility=1,l&&a.push(l))}},x.prototype.rayThroughScreenPoint=function(t){if(!t)throw new e(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","rayThroughScreenPoint","missingPoint"));var n=new w(t[0],this.viewport.height-t[1],0),r=new w(0,0,0),i=new w(0,0,0);this.computeViewingTransform(this.scratchProjection,this.scratchModelview);var o=d.fromIdentity();o.setToMultiply(this.scratchProjection,this.scratchModelview);var a=d.fromIdentity();if(a.invertMatrix(o),!a.unProject(n,this.viewport,r))return null;if(n[2]=1,!a.unProject(n,this.viewport,i))return null;var s=this.scratchModelview.extractEyePoint(new w(0,0,0)),u=new w(s[0],s[1],s[2]),l=new w(i[0],i[1],i[2]);return l.subtract(r),l.normalize(),new c(u,l)},x})),i("util/WWMessage",[],(function(){"use strict";return function(e,t){this.type=e,this.source=t}})),i("WorldWind",["./formats/aaigrid/AAIGridConstants","./formats/aaigrid/AAIGridMetadata","./formats/aaigrid/AAIGridReader","./error/AbstractError","./geom/Angle","./shapes/Annotation","./shapes/AnnotationAttributes","./util/measure/AreaMeasurer","./error/ArgumentError","./globe/AsterV2ElevationCoverage","./layer/AtmosphereLayer","./shaders/AtmosphereProgram","./shaders/BasicProgram","./shaders/BasicTextureProgram","./util/BasicTimeSequence","./BasicWorldWindowController","./layer/BingAerialLayer","./layer/BingAerialWithLabelsLayer","./layer/BingRoadsLayer","./layer/BingWMSLayer","./layer/BMNGLandsatLayer","./layer/BMNGLayer","./layer/BMNGOneImageLayer","./layer/BMNGRestLayer","./geom/BoundingBox","./gesture/ClickRecognizer","./formats/collada/ColladaLoader","./util/Color","./shapes/Compass","./layer/CompassLayer","./layer/CoordinatesDisplayLayer","./util/Date","./layer/DigitalGlobeTiledImageLayer","./gesture/DragRecognizer","./render/DrawContext","./globe/EarthElevationModel","./globe/EarthRestElevationCoverage","./globe/ElevationCoverage","./globe/ElevationModel","./util/Font","./util/FrameStatistics","./layer/FrameStatisticsLayer","./render/FramebufferTexture","./render/FramebufferTile","./render/FramebufferTileController","./geom/Frustum","./globe/GebcoElevationCoverage","./shapes/GeographicMesh","./projections/GeographicProjection","./shapes/GeographicText","./formats/geojson/GeoJSONExporter","./formats/geojson/GeoJSONGeometry","./formats/geojson/GeoJSONGeometryCollection","./formats/geojson/GeoJSONGeometryLineString","./formats/geojson/GeoJSONGeometryMultiLineString","./formats/geojson/GeoJSONGeometryMultiPoint","./formats/geojson/GeoJSONGeometryMultiPolygon","./formats/geojson/GeoJSONGeometryPoint","./formats/geojson/GeoJSONGeometryPolygon","./formats/geojson/GeoJSONParser","./formats/geotiff/GeoTiffReader","./gesture/GestureRecognizer","./globe/Globe","./globe/Globe2D","./util/GoToAnimator","./shaders/GpuProgram","./cache/GpuResourceCache","./shaders/GpuShader","./shaders/GroundProgram","./util/HashMap","./layer/heatmap/HeatMapColoredTile","./layer/heatmap/HeatMapIntervalType","./layer/heatmap/HeatMapLayer","./layer/heatmap/HeatMapTile","./util/HighlightController","./util/ImageSource","./render/ImageTile","./util/Insets","./formats/kml/KmlAbstractView","./formats/kml/util/KmlAttribute","./formats/kml/styles/KmlBalloonStyle","./formats/kml/KmlCamera","./formats/kml/util/KmlChange","./formats/kml/styles/KmlColorStyle","./formats/kml/features/KmlContainer","./formats/kml/controls/KmlControls","./formats/kml/util/KmlCreate","./formats/kml/util/KmlDelete","./formats/kml/features/KmlDocument","./formats/kml/KmlElements","./formats/kml/util/KmlElementsFactory","./formats/kml/util/KmlElementsFactoryCached","./formats/kml/features/KmlFeature","./formats/kml/KmlFile","./formats/kml/KmlFileCache","./formats/kml/features/KmlFolder","./formats/kml/geom/KmlGeometry","./formats/kml/features/KmlGroundOverlay","./formats/kml/util/KmlHrefResolver","./formats/kml/KmlIcon","./formats/kml/styles/KmlIconStyle","./formats/kml/util/KmlImagePyramid","./formats/kml/util/KmlItemIcon","./formats/kml/styles/KmlLabelStyle","./formats/kml/KmlLatLonAltBox","./formats/kml/KmlLatLonBox","./formats/kml/KmlLatLonQuad","./formats/kml/geom/KmlLinearRing","./formats/kml/geom/KmlLineString","./formats/kml/styles/KmlLineStyle","./formats/kml/KmlLink","./formats/kml/styles/KmlListStyle","./formats/kml/KmlLocation","./formats/kml/KmlLod","./formats/kml/KmlLookAt","./formats/kml/geom/KmlMultiGeometry","./formats/kml/geom/KmlMultiTrack","./formats/kml/features/KmlNetworkLink","./formats/kml/util/KmlNetworkLinkControl","./formats/kml/util/KmlNodeTransformers","./formats/kml/KmlObject","./formats/kml/KmlOrientation","./formats/kml/features/KmlOverlay","./formats/kml/util/KmlPair","./formats/kml/features/KmlPhotoOverlay","./formats/kml/features/KmlPlacemark","./formats/kml/geom/KmlPoint","./formats/kml/geom/KmlPolygon","./formats/kml/styles/KmlPolyStyle","./formats/kml/util/KmlRefreshListener","./formats/kml/KmlRegion","./formats/kml/util/KmlRemoteFile","./formats/kml/util/KmlScale","./formats/kml/util/KmlSchema","./formats/kml/features/KmlScreenOverlay","./formats/kml/styles/KmlStyle","./formats/kml/styles/KmlStyleMap","./formats/kml/util/KmlStyleResolver","./formats/kml/styles/KmlStyleSelector","./formats/kml/styles/KmlSubStyle","./formats/kml/KmlTimePrimitive","./formats/kml/KmlTimeSpan","./formats/kml/KmlTimeStamp","./formats/kml/features/KmlTour","./formats/kml/geom/KmlTrack","./formats/kml/util/KmlTreeKeyValueCache","./formats/kml/controls/KmlTreeVisibility","./formats/kml/util/KmlUpdate","./formats/kml/util/KmlViewVolume","./formats/kml/KmzFile","./layer/LandsatRestLayer","./layer/Layer","./util/measure/LengthMeasurer","./util/Level","./util/LevelRowColumnUrlBuilder","./util/LevelSet","./geom/Line","./geom/Location","./util/Logger","./navigate/LookAtNavigator","./geom/Matrix","./geom/MeasuredLocation","./util/measure/MeasurerUtils","./cache/MemoryCache","./cache/MemoryCacheListener","./layer/MercatorTiledImageLayer","./navigate/Navigator","./util/NominatimGeocoder","./error/NotYetImplementedError","./util/Offset","./layer/OpenStreetMapImageLayer","./gesture/PanRecognizer","./shapes/Path","./util/PeriodicTimeSequence","./pick/PickedObject","./pick/PickedObjectList","./gesture/PinchRecognizer","./shapes/Placemark","./shapes/PlacemarkAttributes","./geom/Plane","./shapes/Polygon","./util/PolygonSplitter","./geom/Position","./projections/ProjectionEquirectangular","./projections/ProjectionGnomonic","./projections/ProjectionMercator","./projections/ProjectionPolarEquidistant","./projections/ProjectionUPS","./projections/ProjectionWgs84","./geom/Rectangle","./render/Renderable","./layer/RenderableLayer","./layer/RestTiledImageLayer","./gesture/RotationRecognizer","./shapes/ScreenImage","./shapes/ScreenText","./geom/Sector","./shapes/ShapeAttributes","./formats/shapefile/Shapefile","./layer/ShowTessellationLayer","./shaders/SkyProgram","./layer/StarFieldLayer","./shaders/StarFieldProgram","./util/SunPosition","./shapes/SurfaceImage","./shapes/SurfaceCircle","./shapes/SurfaceEllipse","./shapes/SurfacePolygon","./shapes/SurfacePolyline","./shapes/SurfaceRectangle","./render/SurfaceRenderable","./shapes/SurfaceSector","./shapes/SurfaceShape","./shapes/SurfaceShapeTile","./shapes/SurfaceShapeTileBuilder","./render/SurfaceTile","./render/SurfaceTileRenderer","./shaders/SurfaceTileRendererProgram","./gesture/TapRecognizer","./layer/TectonicPlatesLayer","./globe/Terrain","./globe/TerrainTile","./globe/TerrainTileList","./globe/Tessellator","./shapes/Text","./shapes/TextAttributes","./render/TextRenderer","./render/Texture","./render/TextureTile","./util/Tile","./globe/TiledElevationCoverage","./layer/TiledImageLayer","./util/TileFactory","./gesture/TiltRecognizer","./gesture/Touch","./shapes/TriangleMesh","./error/UnsupportedOperationError","./globe/UsgsNedElevationCoverage","./globe/UsgsNedHiElevationCoverage","./util/UrlBuilder","./geom/Vec2","./geom/Vec3","./layer/ViewControlsLayer","./ogc/wcs/WcsCapabilities","./ogc/wcs/WcsCoverage","./ogc/wcs/WcsCoverageDescriptions","./globe/WcsEarthElevationCoverage","./util/WcsTileUrlBuilder","./ogc/wcs/WebCoverageService","./ogc/WfsCapabilities","./formats/wkt/Wkt","./formats/wkt/WktElements","./formats/wkt/WktExporter","./formats/wkt/geom/WktGeometryCollection","./formats/wkt/geom/WktLineString","./formats/wkt/geom/WktMultiLineString","./formats/wkt/geom/WktMultiPoint","./formats/wkt/geom/WktMultiPolygon","./formats/wkt/geom/WktObject","./formats/wkt/geom/WktPoint","./formats/wkt/geom/WktPolygon","./formats/wkt/WktTokens","./formats/wkt/geom/WktTriangle","./formats/wkt/WktType","./ogc/wms/WmsCapabilities","./layer/WmsLayer","./ogc/wms/WmsLayerCapabilities","./layer/WmsTimeDimensionedLayer","./util/WmsUrlBuilder","./ogc/wmts/WmtsCapabilities","./layer/WmtsLayer","./ogc/wmts/WmtsLayerCapabilities","./WorldWindow","./WorldWindowController","./util/WWMath","./util/WWMessage","./util/WWUtil","./util/XmlDocument"],(function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w,E,x,S,T,M,L,C,R,O,I,P,k,N,D,F,j,B,V,G,U,q,W,z,H,K,Y,Q,X,J,Z,$,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,he,fe,de,pe,me,ge,Ae,ve,ye,be,_e,we,Ee,xe,Se,Te,Me,Le,Ce,Re,Oe,Ie,Pe,ke,Ne,De,Fe,je,Be,Ve,Ge,Ue,qe,We,ze,He,Ke,Ye,Qe,Xe,Je,Ze,$e,et,tt,nt,rt,it,ot,at,st,ut,lt,ct,ht,ft,dt,pt,mt,gt,At,vt,yt,bt,_t,wt,Et,xt,St,Tt,Mt,Lt,Ct,Rt,Ot,It,Pt,kt,Nt,Dt,Ft,jt,Bt,Vt,Gt,Ut,qt,Wt,zt,Ht,Kt,Yt,Qt,Xt,Jt,Zt,$t,en,tn,nn,rn,on,an,sn,un,ln,cn,hn,fn,dn,pn,mn,gn,An,vn,yn,bn,_n,wn,En,xn,Sn,Tn,Mn,Ln,Cn,Rn,On,In,Pn,kn,Nn,Dn,Fn,jn,Bn,Vn,Gn,Un,qn,Wn,zn,Hn,Kn,Yn,Qn,Xn,Jn,Zn,$n,er,tr,nr,rr,ir,or,ar,sr,ur,lr,cr,hr,fr,dr,pr,mr,gr,Ar,vr,yr,br,_r,wr,Er,xr,Sr,Tr,Mr,Lr,Cr,Rr,Or,Ir,Pr,kr,Nr,Dr,Fr,jr,Br,Vr,Gr,Ur,qr,Wr,zr,Hr,Kr,Yr,Qr,Xr,Jr,Zr,$r,ei,ti,ni,ri,ii,oi,ai,si,ui){"use strict";var li={VERSION:"0.9.0",ABSOLUTE:"absolute",AFTER_REDRAW:"afterRedraw",BEFORE_REDRAW:"beforeRedraw",BEGAN:"began",CANCELLED:"cancelled",CHANGED:"changed",CLAMP_TO_GROUND:"clampToGround",EARTH_RADIUS:6371e3,EAST:"east",ENDED:"ended",FAILED:"failed",FILTER_LINEAR:"filter_linear",FILTER_NEAREST:"filter_nearest",GREAT_CIRCLE:"greatCircle",LINEAR:"linear",MULTI_POINT:"multiPoint",NORTH:"north",NULL:"null",OFFSET_FRACTION:"fraction",OFFSET_INSET_PIXELS:"insetPixels",OFFSET_PIXELS:"pixels",POINT:"point",POLYLINE:"polyline",POLYGON:"polygon",POSSIBLE:"possible",RECOGNIZED:"recognized",REDRAW_EVENT_TYPE:"WorldWindRedraw",RELATIVE_TO_GLOBE:"relativeToGlobe",RELATIVE_TO_GROUND:"relativeToGround",RELATIVE_TO_SCREEN:"relativeToScreen",RHUMB_LINE:"rhumbLine",SOUTH:"south",WEST:"west",WGS84_SEMI_MAJOR_AXIS:6378137,WGS84_INVERSE_FLATTENING:298.257223563};return li.AAIGridConstants=e,li.AAIGridMetadata=t,li.AAIGridReader=n,li.AbstractError=r,li.Angle=i,li.Annotation=o,li.AnnotationAttributes=a,li.AreaMeasurer=s,li.ArgumentError=u,li.AsterV2ElevationCoverage=l,li.AtmosphereLayer=c,li.AtmosphereProgram=h,li.BasicProgram=f,li.BasicTextureProgram=d,li.BasicTimeSequence=p,li.BasicWorldWindowController=m,li.BingAerialLayer=g,li.BingAerialWithLabelsLayer=A,li.BingRoadsLayer=v,li.BingWMSLayer=y,li.BMNGLandsatLayer=b,li.BMNGLayer=_,li.BMNGOneImageLayer=w,li.BMNGRestLayer=E,li.BoundingBox=x,li.ClickRecognizer=S,li.ColladaLoader=T,li.Color=M,li.Compass=L,li.CompassLayer=C,li.CoordinatesDisplayLayer=R,li.DateWW=O,li.DigitalGlobeTiledImageLayer=I,li.DragRecognizer=P,li.DrawContext=k,li.EarthElevationModel=N,li.EarthRestElevationCoverage=D,li.ElevationCoverage=F,li.ElevationModel=j,li.Font=B,li.FrameStatistics=V,li.FrameStatisticsLayer=G,li.FramebufferTexture=U,li.FramebufferTile=q,li.FramebufferTileController=W,li.Frustum=z,li.GebcoElevationCoverage=H,li.GeographicMesh=K,li.GeographicProjection=Y,li.GeographicText=Q,li.GeoJSONExporter=X,li.GeoJSONGeometry=J,li.GeoJSONGeometryCollection=Z,li.GeoJSONGeometryLineString=$,li.GeoJSONGeometryMultiLineString=ee,li.GeoJSONGeometryMultiPoint=te,li.GeoJSONGeometryMultiPolygon=ne,li.GeoJSONGeometryPoint=re,li.GeoJSONGeometryPolygon=ie,li.GeoJSONParser=oe,li.GeoTiffReader=ae,li.GestureRecognizer=se,li.Globe=ue,li.Globe2D=le,li.GoToAnimator=ce,li.GpuProgram=he,li.GpuResourceCache=fe,li.GpuShader=de,li.GroundProgram=pe,li.HashMap=me,li.HeatMapColoredTile=ge,li.HeatMapIntervalType=Ae,li.HeatMapLayer=ve,li.HeatMapTile=ye,li.HighlightController=be,li.ImageSource=_e,li.ImageTile=we,li.Insets=Ee,li.KmlAbstractView=xe,li.KmlAttribute=Se,li.KmlBalloonStyle=Te,li.KmlCamera=Me,li.KmlChange=Le,li.KmlColorStyle=Ce,li.KmlContainer=Re,li.KmlControls=Oe,li.KmlCreate=Ie,li.KmlDelete=Pe,li.KmlDocument=ke,li.KmlElements=Ne,li.KmlElementsFactory=De,li.KmlElementsFactoryCached=Fe,li.KmlFeature=je,li.KmlFile=Be,li.KmlFileCache=Ve,li.KmlFolder=Ge,li.KmlGeometry=Ue,li.KmlGroundOverlay=qe,li.KmlHrefResolver=We,li.KmlIcon=ze,li.KmlIconStyle=He,li.KmlImagePyramid=Ke,li.KmlItemIcon=Ye,li.KmlLabelStyle=Qe,li.KmlLatLonAltBox=Xe,li.KmlLatLonBox=Je,li.KmlLatLonQuad=Ze,li.KmlLinearRing=$e,li.KmlLineString=et,li.KmlLineStyle=tt,li.KmlListStyle=rt,li.KmlLink=nt,li.KmlLocation=it,li.KmlLod=ot,li.KmlLookAt=at,li.KmlMultiGeometry=st,li.KmlMultiTrack=ut,li.KmlNetworkLink=lt,li.KmlNetworkLinkControl=ct,li.KmlNodeTransformers=ht,li.KmlObject=ft,li.KmlOrientation=dt,li.KmlOverlay=pt,li.KmlPair=mt,li.KmlPhotoOverlay=gt,li.KmlPlacemark=At,li.KmlPoint=vt,li.KmlPolygon=yt,li.KmlPolyStyle=bt,li.KmlRefreshListener=_t,li.KmlRegion=wt,li.KmlRemoteFile=Et,li.KmlScale=xt,li.KmlSchema=St,li.KmlScreenOverlay=Tt,li.KmlStyle=Mt,li.KmlStyleMap=Lt,li.KmlStyleResolver=Ct,li.KmlStyleSelector=Rt,li.KmlSubStyle=Ot,li.KmlTimePrimitive=It,li.KmlTimeSpan=Pt,li.KmlTimeStamp=kt,li.KmlTour=Nt,li.KmlTrack=Dt,li.KmlTreeKeyValueCache=Ft,li.KmlTreeVisibility=jt,li.KmlUpdate=Bt,li.KmlViewVolume=Vt,li.KmzFile=Gt,li.LandsatRestLayer=Ut,li.Layer=qt,li.LengthMeasurer=Wt,li.Level=zt,li.LevelRowColumnUrlBuilder=Ht,li.LevelSet=Kt,li.Line=Yt,li.Location=Qt,li.Logger=Xt,li.LookAtNavigator=Jt,li.Matrix=Zt,li.MeasuredLocation=$t,li.MeasurerUtils=en,li.MemoryCache=tn,li.MemoryCacheListener=nn,li.MercatorTiledImageLayer=rn,li.Navigator=on,li.NominatimGeocoder=an,li.NotYetImplementedError=sn,li.Offset=un,li.OpenStreetMapImageLayer=ln,li.PanRecognizer=cn,li.Path=hn,li.PeriodicTimeSequence=fn,li.PickedObject=dn,li.PickedObjectList=pn,li.PinchRecognizer=mn,li.Placemark=gn,li.PlacemarkAttributes=An,li.Plane=vn,li.Polygon=yn,li.PolygonSplitter=bn,li.Position=_n,li.ProjectionEquirectangular=wn,li.ProjectionGnomonic=En,li.ProjectionMercator=xn,li.ProjectionPolarEquidistant=Sn,li.ProjectionUPS=Tn,li.ProjectionWgs84=Mn,li.Rectangle=Ln,li.Renderable=Cn,li.RenderableLayer=Rn,li.RestTiledImageLayer=On,li.RotationRecognizer=In,li.ScreenText=kn,li.ScreenImage=Pn,li.Sector=Nn,li.ShapeAttributes=Dn,li.Shapefile=Fn,li.ShowTessellationLayer=jn,li.SkyProgram=Bn,li.StarFieldLayer=Vn,li.StarFieldProgram=Gn,li.SunPosition=Un,li.SurfaceImage=qn,li.SurfaceCircle=Wn,li.SurfaceEllipse=zn,li.SurfacePolygon=Hn,li.SurfacePolyline=Kn,li.SurfaceRectangle=Yn,li.SurfaceRenderable=Qn,li.SurfaceSector=Xn,li.SurfaceShape=Jn,li.SurfaceShapeTile=Zn,li.SurfaceShapeTileBuilder=$n,li.SurfaceTile=er,li.SurfaceTileRenderer=tr,li.SurfaceTileRendererProgram=nr,li.TapRecognizer=rr,li.TectonicPlatesLayer=ir,li.Terrain=or,li.TerrainTile=ar,li.TerrainTileList=sr,li.Tessellator=ur,li.Text=lr,li.TextAttributes=cr,li.TextRenderer=hr,li.Texture=fr,li.TextureTile=dr,li.Tile=pr,li.TiledElevationCoverage=mr,li.TiledImageLayer=gr,li.TileFactory=Ar,li.TiltRecognizer=vr,li.Touch=yr,li.TriangleMesh=br,li.UsgsNedElevationCoverage=_r,li.UsgsNedHiElevationCoverage=wr,li.UnsupportedOperationError=Er,li.UrlBuilder=xr,li.Vec2=Sr,li.Vec3=Tr,li.ViewControlsLayer=Mr,li.WcsCapabilities=Lr,li.WcsCoverage=Cr,li.WcsCoverageDescriptions=Rr,li.WcsEarthElevationCoverage=Or,li.WcsTileUrlBuilder=Ir,li.WebCoverageService=Pr,li.WfsCapabilities=kr,li.Wkt=Nr,li.WktElements=Dr,li.WktExporter=Fr,li.WktGeometryCollection=jr,li.WktLineString=Br,li.WktMultiLineString=Vr,li.WktMultiPoint=Gr,li.WktMultiPolygon=Ur,li.WktObject=qr,li.WktPoint=Wr,li.WktPolygon=zr,li.WktTokens=Hr,li.WktTriangle=Kr,li.WktType=Yr,li.WmsCapabilities=Qr,li.WmsLayer=Xr,li.WmsLayerCapabilities=Jr,li.WmsTimeDimensionedLayer=Zr,li.WmsUrlBuilder=$r,li.WmtsCapabilities=ei,li.WmtsLayer=ti,li.WmtsLayerCapabilities=ni,li.WWMath=oi,li.WWMessage=ai,li.WWUtil=si,li.WorldWindow=ri,li.WorldWindowController=ii,li.configuration={gpuCacheSize:25e7,baseUrl:si.worldwindlibLocation()||si.currentUrlSansFilePart()+"/../",layerRetrievalQueueSize:16,coverageRetrievalQueueSize:16,bingLogoPlacement:new un(li.OFFSET_INSET_PIXELS,7,li.OFFSET_PIXELS,7),bingLogoAlignment:new un(li.OFFSET_FRACTION,1,li.OFFSET_FRACTION,0)},li.BingMapsKey=null,window.WorldWind=li,li})),r("WorldWind")}()}).call(this,n(56))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(19),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:"[DEFAULT]",optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService(o);if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(s){if(i)return null;throw s}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService("[DEFAULT]")}catch(h){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),s=a[0],u=a[1],l=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(l);u.resolve(c)}catch(h){}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(r.__spread(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})),e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()}))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return"[DEFAULT]"===e?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e}();var s=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=s,t.Provider=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function o(e){var t=r.useRef(e);return i((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=function(e){return e.scrollTop};function i(e,t){var n=e.timeout,r=e.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:i.transitionDelay}}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(2),i=n(5),o=["xs","sm","md","lg","xl"];function a(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,a=e.unit,s=void 0===a?"px":a,u=e.step,l=void 0===u?5:u,c=Object(i.a)(e,["values","unit","step"]);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(s,")")}function f(e,t){var r=o.indexOf(t);return r===o.length-1?h(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(s,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[o[r+1]]?n[o[r+1]]:t)-l/100).concat(s,")")}return Object(r.a)({keys:o,values:n,up:h,down:function(e){var t=o.indexOf(e)+1,r=n[o[t]];return t===o.length?h("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-l/100).concat(s,")")},between:f,only:function(e){return f(e,e)},width:function(e){return n[e]}},c)}},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=o.default.memo(o.default.forwardRef((function(t,n){return o.default.createElement(a.default,(0,i.default)({ref:n},t),e)})));0;return n.muiName=a.default.muiName,n};var i=r(n(155)),o=r(n(0)),a=r(n(88))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(93);var i=n(61),o=n(94);function a(e,t){return Object(r.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||Object(i.a)(e,t)||Object(o.a)()}},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(53);var i=n(92),o=n(61);function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(i.a)(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new c(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function l(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}o(l,"_index",["name","keyPath","multiEntry","unique"]),a(l,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(l,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(c,"_cursor",["direction","key","primaryKey","value"]),a(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(c.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new c(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new l(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new l(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,l].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[l,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},,function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.r(t),n.d(t,"LogLevel",(function(){return o})),n.d(t,"Logger",(function(){return h})),n.d(t,"setLogLevel",(function(){return f})),n.d(t,"setUserLogHandler",(function(){return d}));var o,a=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,l=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),c=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=l[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=c,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function f(e){a.forEach((function(t){t.setLogLevel(e)}))}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r,s,u,l,c,d,p,g=t&&t.length,A=g?t[0]*n:e.length,v=i(e,0,A,n,!0),y=[];if(!v||v.next===v.prev)return y;if(g&&(v=function(e,t,n,r){var a,s,u,l,c,d=[];for(a=0,s=t.length;a<s;a++)u=t[a]*r,l=a<s-1?t[a+1]*r:e.length,(c=i(e,u,l,r,!1))===c.next&&(c.steiner=!0),d.push(m(c));for(d.sort(h),a=0;a<d.length;a++)f(d[a],n),n=o(n,n.next);return n}(e,t,v,n)),e.length>80*n){r=u=e[0],s=l=e[1];for(var b=n;b<A;b+=n)(c=e[b])<r&&(r=c),(d=e[b+1])<s&&(s=d),c>u&&(u=c),d>l&&(l=d);p=0!==(p=Math.max(u-r,l-s))?1/p:0}return a(v,y,n,r,s,p),y}function i(e,t,n,r,i){var o,a;if(i===L(e,t,n,r)>0)for(o=t;o<n;o+=r)a=S(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=S(o,e[o],e[o+1],a);return a&&y(a,a.next)&&(T(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(T(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,h,f){if(e){!f&&h&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=p(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,h);for(var d,m,g=e;e.prev!==e.next;)if(d=e.prev,m=e.next,h?u(e,r,i,h):s(e))t.push(d.i/n),t.push(e.i/n),t.push(m.i/n),T(e),e=m.next,g=m.next;else if((e=m)===g){f?1===f?a(e=l(o(e),t,n),t,n,r,i,h,2):2===f&&c(e,t,n,r,i,h):a(o(e),t,n,r,i,h,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(v(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(g(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&v(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(v(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=p(s,u,t,n,r),f=p(l,c,t,n,r),d=e.prevZ,m=e.nextZ;d&&d.z>=h&&m&&m.z<=f;){if(d!==e.prev&&d!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,m!==e.prev&&m!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&v(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=f;){if(m!==e.prev&&m!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&v(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function l(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!y(i,a)&&b(i,r,r.next,a)&&E(i,a)&&E(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),T(r),T(r.next),r=e=a),r=r.next}while(r!==e);return o(r)}function c(e,t,n,r,i,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&A(u,l)){var c=x(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,t,n,r,i,s),void a(c,t,n,r,i,s)}l=l.next}u=u.next}while(u!==e)}function h(e,t){return e.x-t.x}function f(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&g(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),E(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&d(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(e,t)){var n=x(t,e);o(t,t.next),o(n,n.next)}}function d(e,t){return v(e.prev,e,t.prev)<0&&v(t.next,e,e.next)<0}function p(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function m(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function g(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function A(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&b(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(E(e,t)&&E(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(v(e.prev,e,t.prev)||v(e,t.prev,t))||y(e,t)&&v(e.prev,e,e.next)>0&&v(t.prev,t,t.next)>0)}function v(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,n,r){var i=w(v(e,t,n)),o=w(v(e,t,r)),a=w(v(n,r,e)),s=w(v(n,r,t));return i!==o&&a!==s||(!(0!==i||!_(e,n,t))||(!(0!==o||!_(e,r,t))||(!(0!==a||!_(n,e,r))||!(0!==s||!_(n,t,r)))))}function _(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function w(e){return e>0?1:e<0?-1:0}function E(e,t){return v(e.prev,e,e.next)<0?v(e,t,e.next)>=0&&v(e,e.prev,t)>=0:v(e,t,e.prev)<0||v(e,e.next,t)<0}function x(e,t){var n=new M(e.i,e.x,e.y),r=new M(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(e,t,n,r){var i=new M(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function M(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(L(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(L(e,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,d=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((e[f]-e[p])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[p+1]-e[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},function(e,t,n){"use strict";var r=n(23);function i(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}n(83),n(132),n(84),n(133),n(134),n(135),n(136),n(137),n(138);var o=i(r);o.default.registerVersion("firebase","7.22.0","app");console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),o.default.registerVersion("firebase","7.22.0"),e.exports=o.default},function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=this,s=function(){e.apply(a,i)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(15),i=n(5),o=n(203),a=n(32),s=n(2);function u(e,t,n){var i;return Object(s.a)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)({paddingLeft:t(2),paddingRight:t(2)},n,Object(r.a)({},e.up("sm"),Object(s.a)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(i={minHeight:56},Object(r.a)(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),Object(r.a)(i,e.up("sm"),{minHeight:64}),i)},n)}var l=n(107),c={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},f={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},d={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},A={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},v=n(17),y={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:c.white,default:h[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},b={text:{primary:c.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:h[800],default:"#303030"},action:{active:c.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function _(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Object(v.e)(e.main,i):"dark"===t&&(e.dark=Object(v.a)(e.main,o)))}function w(e){var t=e.primary,n=void 0===t?{light:f[300],main:f[500],dark:f[700]}:t,r=e.secondary,a=void 0===r?{light:d.A200,main:d.A400,dark:d.A700}:r,u=e.error,w=void 0===u?{light:p[300],main:p[500],dark:p[700]}:u,E=e.warning,x=void 0===E?{light:m[300],main:m[500],dark:m[700]}:E,S=e.info,T=void 0===S?{light:g[300],main:g[500],dark:g[700]}:S,M=e.success,L=void 0===M?{light:A[300],main:A[500],dark:A[700]}:M,C=e.type,R=void 0===C?"light":C,O=e.contrastThreshold,I=void 0===O?3:O,P=e.tonalOffset,k=void 0===P?.2:P,N=Object(i.a)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function D(e){return Object(v.d)(e,b.text.primary)>=I?b.text.primary:y.text.primary}var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=Object(s.a)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Object(l.a)(4,t));if("string"!==typeof e.main)throw new Error(Object(l.a)(5,JSON.stringify(e.main)));return _(e,"light",n,k),_(e,"dark",r,k),e.contrastText||(e.contrastText=D(e.main)),e},j={dark:b,light:y};return Object(o.a)(Object(s.a)({common:c,type:R,primary:F(n),secondary:F(a,"A400","A200","A700"),error:F(w),warning:F(x),info:F(T),success:F(L),grey:h,contrastThreshold:I,getContrastText:D,augmentColor:F,tonalOffset:k},j[R]),N)}function E(e){return Math.round(1e5*e)/1e5}var x={textTransform:"uppercase"};function S(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,a=void 0===r?'"Roboto", "Helvetica", "Arial", sans-serif':r,u=n.fontSize,l=void 0===u?14:u,c=n.fontWeightLight,h=void 0===c?300:c,f=n.fontWeightRegular,d=void 0===f?400:f,p=n.fontWeightMedium,m=void 0===p?500:p,g=n.fontWeightBold,A=void 0===g?700:g,v=n.htmlFontSize,y=void 0===v?16:v,b=n.allVariants,_=n.pxToRem,w=Object(i.a)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var S=l/14,T=_||function(e){return"".concat(e/y*S,"rem")},M=function(e,t,n,r,i){return Object(s.a)({fontFamily:a,fontWeight:e,fontSize:T(t),lineHeight:n},'"Roboto", "Helvetica", "Arial", sans-serif'===a?{letterSpacing:"".concat(E(r/t),"em")}:{},i,b)},L={h1:M(h,96,1.167,-1.5),h2:M(h,60,1.2,-.5),h3:M(d,48,1.167,0),h4:M(d,34,1.235,.25),h5:M(d,24,1.334,0),h6:M(m,20,1.6,.15),subtitle1:M(d,16,1.75,.15),subtitle2:M(m,14,1.57,.1),body1:M(d,16,1.5,.15),body2:M(d,14,1.43,.15),button:M(m,14,1.75,.4,x),caption:M(d,12,1.66,.4),overline:M(d,12,2.66,1,x)};return Object(o.a)(Object(s.a)({htmlFontSize:y,pxToRem:T,round:E,fontFamily:a,fontSize:l,fontWeightLight:h,fontWeightRegular:d,fontWeightMedium:m,fontWeightBold:A},L),w,{clone:!1})}function T(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var M=["none",T(0,2,1,-1,0,1,1,0,0,1,3,0),T(0,3,1,-2,0,2,2,0,0,1,5,0),T(0,3,3,-2,0,3,4,0,0,1,8,0),T(0,2,4,-1,0,4,5,0,0,1,10,0),T(0,3,5,-1,0,5,8,0,0,1,14,0),T(0,3,5,-1,0,6,10,0,0,1,18,0),T(0,4,5,-2,0,7,10,1,0,2,16,1),T(0,5,5,-3,0,8,10,1,0,3,14,2),T(0,5,6,-3,0,9,12,1,0,3,16,2),T(0,6,6,-3,0,10,14,1,0,4,18,3),T(0,6,7,-4,0,11,15,1,0,4,20,3),T(0,7,8,-4,0,12,17,2,0,5,22,4),T(0,7,8,-4,0,13,19,2,0,5,24,4),T(0,7,9,-4,0,14,21,2,0,5,26,4),T(0,8,9,-5,0,15,22,2,0,6,28,5),T(0,8,10,-5,0,16,24,2,0,6,30,5),T(0,8,11,-5,0,17,26,2,0,6,32,5),T(0,9,11,-5,0,18,28,2,0,7,34,6),T(0,9,12,-6,0,19,29,2,0,7,36,6),T(0,10,13,-6,0,20,31,3,0,8,38,7),T(0,10,13,-6,0,21,33,3,0,8,40,7),T(0,10,14,-6,0,22,35,3,0,8,42,7),T(0,11,14,-7,0,23,36,3,0,9,44,8),T(0,11,15,-7,0,24,38,3,0,9,46,8)],L={borderRadius:4},C=n(34),R=(n(37),n(41));n(1);var O=function(e,t){return t?Object(o.a)(e,t,{clone:!1}):e},I={xs:0,sm:600,md:960,lg:1280,xl:1920},P={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(I[e],"px)")}};var k={m:"margin",p:"padding"},N={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},D={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},F=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!D[e])return[e];e=D[e]}var t=e.split(""),n=Object(C.a)(t,2),r=n[0],i=n[1],o=k[r],a=N[i]||"";return Array.isArray(a)?a.map((function(e){return o+e})):[o+a]})),j=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function B(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function V(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function G(e){var t=B(e.theme);return Object.keys(e).map((function(n){if(-1===j.indexOf(n))return null;var r=V(F(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||P;return t.reduce((function(e,i,o){return e[r.up(r.keys[o])]=n(t[o]),e}),{})}if("object"===Object(R.a)(t)){var i=e.theme.breakpoints||P;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(O,{})}G.propTypes={},G.filterProps=j;function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=B({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var q=n(24),W=n(62);var z=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,s=void 0===r?{}:r,l=e.palette,c=void 0===l?{}:l,h=e.spacing,f=e.typography,d=void 0===f?{}:f,p=Object(i.a)(e,["breakpoints","mixins","palette","spacing","typography"]),m=w(c),g=Object(a.a)(n),A=U(h),v=Object(o.a)({breakpoints:g,direction:"ltr",mixins:u(g,A,s),overrides:{},palette:m,props:{},shadows:M,typography:S(m,d),spacing:A,shape:L,transitions:q.a,zIndex:W.a},p),y=arguments.length,b=new Array(y>1?y-1:0),_=1;_<y;_++)b[_-1]=arguments[_];return v=b.reduce((function(e,t){return Object(o.a)(e,t)}),v)}();t.a=z},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";t.parse=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var n={},i=t||{},a=e.split(o),u=i.decode||r,l=0;l<a.length;l++){var c=a[l],h=c.indexOf("=");if(!(h<0)){var f=c.substr(0,h).trim(),d=c.substr(++h,c.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==n[f]&&(n[f]=s(d,u))}}return n},t.serialize=function(e,t,n){var r=n||{},o=r.encode||i;if("function"!==typeof o)throw new TypeError("option encode is invalid");if(!a.test(e))throw new TypeError("argument name is invalid");var s=o(t);if(s&&!a.test(s))throw new TypeError("argument val is invalid");var u=e+"="+s;if(null!=r.maxAge){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");u+="; Max-Age="+Math.floor(l)}if(r.domain){if(!a.test(r.domain))throw new TypeError("option domain is invalid");u+="; Domain="+r.domain}if(r.path){if(!a.test(r.path))throw new TypeError("option path is invalid");u+="; Path="+r.path}if(r.expires){if("function"!==typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+r.expires.toUTCString()}r.httpOnly&&(u+="; HttpOnly");r.secure&&(u+="; Secure");if(r.sameSite){switch("string"===typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return u};var r=decodeURIComponent,i=encodeURIComponent,o=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function s(e,t){try{return t(e)}catch(n){return e}}},function(e,t,n){"use strict";var r=n(0),i=n.n(r);t.a=i.a.createContext(null)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},function(e,t,n){"use strict";var r=n(0),i=r.createContext({});t.a=i},function(e,t,n){"use strict";e.exports=n(154)},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var e=s(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++h<t;)u&&u[h].run();h=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t),n.d(t,"registerInstallations",(function(){return Y}));var r,i=n(23),o=n.n(i),a=n(26),s=n(4),u=n(19),l=n(38),c=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),h=new u.ErrorFactory("installations","Installations",c);function f(e){return e instanceof u.FirebaseError&&e.code.includes("request-failed")}function d(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function p(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function m(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,h.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function g(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function A(e,t){var n=t.refreshToken,r=g(e);return r.append("Authorization",function(e){return"FIS_v2 "+e}(n)),r}function v(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function y(e,t){var n=t.fid;return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,r,i,o,a,u;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return t=d(e),r=g(e),i={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:"w:0.4.17"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,v((function(){return fetch(t,o)}))];case 1:return(a=s.sent()).ok?[4,a.json()]:[3,3];case 2:return u=s.sent(),[2,{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:p(u.authToken)}];case 3:return[4,m("Create Installation",a)];case 4:throw s.sent()}}))}))}function b(e){return new Promise((function(t){setTimeout(t,e)}))}var _=/^[cdef][\w-]{21}$/;function w(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Object(s.__spread)(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return _.test(t)?t:""}catch(r){return""}}function E(e){return e.appName+"!"+e.appId}var x=new Map;function S(e,t){var n=E(e);T(n,t),function(e,t){var n=L();n&&n.postMessage({key:e,fid:t});C()}(n,t)}function T(e,t){var n,r,i=x.get(e);if(i)try{for(var o=Object(s.__values)(i),a=o.next();!a.done;a=o.next()){(0,a.value)(t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var M=null;function L(){return!M&&"BroadcastChannel"in self&&((M=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){T(e.data.key,e.data.fid)}),M}function C(){0===x.size&&M&&(M.close(),M=null)}var R="firebase-installations-store",O=null;function I(){return O||(O=Object(l.openDb)("firebase-installations-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(R)}}))),O}function P(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return n=E(e),[4,I()];case 1:return r=s.sent(),i=r.transaction(R,"readwrite"),[4,(o=i.objectStore(R)).get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||S(e,t.fid),[2,t]}}))}))}function k(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return t=E(e),[4,I()];case 1:return n=i.sent(),[4,(r=n.transaction(R,"readwrite")).objectStore(R).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function N(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,u;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return n=E(e),[4,I()];case 1:return r=s.sent(),i=r.transaction(R,"readwrite"),[4,(o=i.objectStore(R)).get(n)];case 2:return a=s.sent(),void 0!==(u=t(a))?[3,4]:[4,o.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,o.put(u,n)];case 5:s.sent(),s.label=6;case 6:return[4,i.complete];case 7:return s.sent(),!u||a&&a.fid===u.fid||S(e,u.fid),[2,u]}}))}))}function D(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,N(e,(function(n){var r=function(e){return B(e||{fid:w(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(h.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,y(e,t)];case 1:return n=i.sent(),[2,P(e,n)];case 2:return f(r=i.sent())&&409===r.serverCode?[4,k(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,P(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:F(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function F(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return[4,j(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,b(100)];case 3:return o.sent(),[4,j(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,D(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function j(e){return N(e,(function(e){if(!e)throw h.create("installation-not-found");return B(e)}))}function B(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function V(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,i,o,a,u,l,c;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return e=function(e,t){var n=t.fid;return d(e)+"/"+n+"/authTokens:generate"}(n,t),i=A(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:"w:0.4.17"}},u={method:"POST",headers:i,body:JSON.stringify(a)},[4,v((function(){return fetch(e,u)}))];case 1:return(l=s.sent()).ok?[4,l.json()]:[3,3];case 2:return c=s.sent(),[2,p(c)];case 3:return[4,m("Generate Auth Token",l)];case 4:throw s.sent()}}))}))}function G(e,t){return void 0===t&&(t=!1),Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return[4,N(e.appConfig,(function(r){if(!q(r))throw h.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,U(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,b(100)];case 3:return i.sent(),[4,U(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,G(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw h.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return Object(s.__assign)(Object(s.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,V(e,t)];case 1:return n=o.sent(),i=Object(s.__assign)(Object(s.__assign)({},t),{authToken:n}),[4,P(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!f(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,k(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(s.__assign)(Object(s.__assign)({},t),{authToken:{requestStatus:0}}),[4,P(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function U(e){return N(e,(function(e){if(!q(e))throw h.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+1e4<Date.now()?Object(s.__assign)(Object(s.__assign)({},e),{authToken:{requestStatus:0}}):e}))}function q(e){return void 0!==e&&2===e.registrationStatus}function W(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,D(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function z(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(s.__generator)(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return d(e)+"/"+n}(e,t),r=A(e,t),i={method:"DELETE",headers:r},[4,v((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,m("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function H(e,t){var n=e.appConfig;return function(e,t){L();var n=E(e),r=x.get(n);r||(r=new Set,x.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=E(e),r=x.get(n);r&&(r.delete(t),0===r.size&&x.delete(n),C())}(n,t)}}function K(e){return h.create("missing-app-config-values",{valueName:e})}function Y(e){e.INTERNAL.registerComponent(new a.Component("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw K("App Configuration");if(!e.name)throw K("App Name");try{for(var r=Object(s.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw K(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){return function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,D(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):G(e).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,W(e.appConfig)];case 1:return n.sent(),[4,G(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return[4,N(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw h.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw h.create("app-offline");case 3:return[4,z(t,n)];case 4:return r.sent(),[4,k(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(e){return H(n,e)}}}),"PUBLIC")),e.registerVersion("@firebase/installations","0.4.17")}Y(o.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(74);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){e.exports=n(140)},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(53);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";t.a={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),i=n(16),o=!0,a=!1,s=null,u={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function c(){o=!1}function h(){"hidden"===this.visibilityState&&a&&(o=!0)}function f(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!u[t]||e.readOnly)||("TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable)}(t)}function d(){a=!0,window.clearTimeout(s),s=window.setTimeout((function(){a=!1}),100)}function p(){return{isFocusVisible:f,onBlurVisible:d,ref:r.useCallback((function(e){var t,n=i.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",h,!0))}),[])}}},function(e,t,n){"use strict";var r=n(52),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var s=u(t),m=u(n),g=0;g<a.length;++g){var A=a[g];if(!o[A]&&(!r||!r[A])&&(!m||!m[A])&&(!s||!s[A])){var v=f(n,A);try{l(t,A,v)}catch(y){}}}}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e){var t=e.controlled,n=e.default,i=(e.name,e.state,r.useRef(void 0!==t).current),o=r.useState(n),a=o[0],s=o[1];return[i?t:a,r.useCallback((function(e){i||s(e)}),[])]}},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=n(10),l=o.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,c=e.color,h=void 0===c?"inherit":c,f=e.component,d=void 0===f?"svg":f,p=e.fontSize,m=void 0===p?"default":p,g=e.htmlColor,A=e.titleAccess,v=e.viewBox,y=void 0===v?"0 0 24 24":v,b=Object(i.a)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return o.createElement(d,Object(r.a)({className:Object(a.a)(s.root,l,"inherit"!==h&&s["color".concat(Object(u.a)(h))],"default"!==m&&s["fontSize".concat(Object(u.a)(m))]),focusable:"false",viewBox:y,color:g,"aria-hidden":!A||void 0,role:A?"img":void 0,ref:t},b),n,A?o.createElement("title",null,A):null)}));l.muiName="SvgIcon",t.a=Object(s.a)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n(0),o=n.n(i),a=n(66);function s(e,t){var n=function(t,n){return o.a.createElement(a.a,Object(r.a)({ref:n},t),e)};return n.muiName=a.a.muiName,o.a.memo(o.a.forwardRef(n))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(22);function i(e){return Object(r.a)(e).defaultView||window}},function(e,t,n){"use strict";function r(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}n.d(t,"a",(function(){return r}))},function(e,t,n){var r;!function(i){var o=/^\s+/,a=/\s+$/,s=0,u=i.round,l=i.min,c=i.max,h=i.random;function f(e,t){if(t=t||{},(e=e||"")instanceof f)return e;if(!(this instanceof f))return new f(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,s=null,u=null,h=!1,f=!1;"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(a,"").toLowerCase();var t,n=!1;if(R[e])e=R[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=V.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=V.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=V.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=V.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=V.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=V.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=V.hex8.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),a:B(t[4]),format:n?"name":"hex8"};if(t=V.hex6.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),format:n?"name":"hex"};if(t=V.hex4.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),a:B(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=V.hex3.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(G(e.r)&&G(e.g)&&G(e.b)?(d=e.r,p=e.g,m=e.b,t={r:255*P(d,255),g:255*P(p,255),b:255*P(m,255)},h=!0,f="%"===String(e.r).substr(-1)?"prgb":"rgb"):G(e.h)&&G(e.s)&&G(e.v)?(r=F(e.s),s=F(e.v),t=function(e,t,n){e=6*P(e,360),t=P(t,100),n=P(n,100);var r=i.floor(e),o=e-r,a=n*(1-t),s=n*(1-o*t),u=n*(1-(1-o)*t),l=r%6;return{r:255*[n,s,a,a,u,n][l],g:255*[u,n,n,s,a,a][l],b:255*[a,a,u,n,n,s][l]}}(e.h,r,s),h=!0,f="hsv"):G(e.h)&&G(e.s)&&G(e.l)&&(r=F(e.s),u=F(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=P(e,360),t=P(t,100),n=P(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,u=2*n-s;r=a(u,s,e+1/3),i=a(u,s,e),o=a(u,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,u),h=!0,f="hsl"),e.hasOwnProperty("a")&&(n=e.a));var d,p,m;return n=I(n),{ok:h,format:e.format||f,r:l(255,c(t.r,0)),g:l(255,c(t.g,0)),b:l(255,c(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=u(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=n.ok,this._tc_id=s++}function d(e,t,n){e=P(e,255),t=P(t,255),n=P(n,255);var r,i,o=c(e,t,n),a=l(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var u=o-a;switch(i=s>.5?u/(2-o-a):u/(o+a),o){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,l:s}}function p(e,t,n){e=P(e,255),t=P(t,255),n=P(n,255);var r,i,o=c(e,t,n),a=l(e,t,n),s=o,u=o-a;if(i=0===o?0:u/o,o==a)r=0;else{switch(o){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,v:s}}function m(e,t,n,r){var i=[D(u(e).toString(16)),D(u(t).toString(16)),D(u(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function g(e,t,n,r){return[D(j(r)),D(u(e).toString(16)),D(u(t).toString(16)),D(u(n).toString(16))].join("")}function A(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.s-=t/100,n.s=k(n.s),f(n)}function v(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.s+=t/100,n.s=k(n.s),f(n)}function y(e){return f(e).desaturate(100)}function b(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.l+=t/100,n.l=k(n.l),f(n)}function _(e,t){t=0===t?0:t||10;var n=f(e).toRgb();return n.r=c(0,l(255,n.r-u(-t/100*255))),n.g=c(0,l(255,n.g-u(-t/100*255))),n.b=c(0,l(255,n.b-u(-t/100*255))),f(n)}function w(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.l-=t/100,n.l=k(n.l),f(n)}function E(e,t){var n=f(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,f(n)}function x(e){var t=f(e).toHsl();return t.h=(t.h+180)%360,f(t)}function S(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+120)%360,s:t.s,l:t.l}),f({h:(n+240)%360,s:t.s,l:t.l})]}function T(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+90)%360,s:t.s,l:t.l}),f({h:(n+180)%360,s:t.s,l:t.l}),f({h:(n+270)%360,s:t.s,l:t.l})]}function M(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+72)%360,s:t.s,l:t.l}),f({h:(n+216)%360,s:t.s,l:t.l})]}function L(e,t,n){t=t||6,n=n||30;var r=f(e).toHsl(),i=360/n,o=[f(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(f(r));return o}function C(e,t){t=t||6;for(var n=f(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(f({h:r,s:i,v:o})),o=(o+s)%1;return a}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=I(e),this._roundA=u(100*this._a)/100,this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b),t=u(360*e.h),n=u(100*e.s),r=u(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=d(this._r,this._g,this._b),t=u(360*e.h),n=u(100*e.s),r=u(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return m(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[D(u(e).toString(16)),D(u(t).toString(16)),D(u(n).toString(16)),D(j(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*P(this._r,255))+"%",g:u(100*P(this._g,255))+"%",b:u(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*P(this._r,255))+"%, "+u(100*P(this._g,255))+"%, "+u(100*P(this._b,255))+"%)":"rgba("+u(100*P(this._r,255))+"%, "+u(100*P(this._g,255))+"%, "+u(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(O[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=f(e);n="#"+g(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(E,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},f.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:F(e[r]));e=n}return f(e,t)},f.equals=function(e,t){return!(!e||!t)&&f(e).toRgbString()==f(t).toRgbString()},f.random=function(){return f.fromRatio({r:h(),g:h(),b:h()})},f.mix=function(e,t,n){n=0===n?0:n||50;var r=f(e).toRgb(),i=f(t).toRgb(),o=n/100;return f({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},f.readability=function(e,t){var n=f(e),r=f(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},f.isReadable=function(e,t,n){var r,i,o=f.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},f.mostReadable=function(e,t,n){var r,i,o,a,s=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var l=0;l<t.length;l++)(r=f.readability(e,t[l]))>u&&(u=r,s=f(t[l]));return f.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,f.mostReadable(e,["#fff","#000"],n))};var R=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=f.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(R);function I(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function P(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!=e.indexOf("%")}(e);return e=l(t,c(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function k(e){return l(1,c(0,e))}function N(e){return parseInt(e,16)}function D(e){return 1==e.length?"0"+e:""+e}function F(e){return e<=1&&(e=100*e+"%"),e}function j(e){return i.round(255*parseFloat(e)).toString(16)}function B(e){return N(e)/255}var V=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function G(e){return!!V.CSS_UNIT.exec(e)}e.exports?e.exports=f:void 0===(r=function(){return f}.call(t,n,t,e))||(e.exports=r)}(Math)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=n.n(o),s=(n(1),n(16)),u=n(6),l=n(11),c=n(27),h=n(8),f=n(63),d=n(37),p=n(36),m=n(42),g=n(35),A=n(49);function v(e,t){var n=Object.create(null);return e&&o.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(o.isValidElement)(e)?t(e):e}(e)})),n}function y(e,t,n){return null!=n[t]?n[t]:e.props[t]}function b(e,t,n){var r=v(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var l=i[u][r];s[i[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(i).forEach((function(a){var s=i[a];if(Object(o.isValidElement)(s)){var u=a in t,l=a in r,c=t[a],h=Object(o.isValidElement)(c)&&!c.props.in;!l||u&&!h?l||!u||h?l&&u&&Object(o.isValidElement)(c)&&(i[a]=Object(o.cloneElement)(s,{onExited:n.bind(null,s),in:c.props.in,exit:y(s,"exit",e),enter:y(s,"enter",e)})):i[a]=Object(o.cloneElement)(s,{in:!1}):i[a]=Object(o.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:y(s,"exit",e),enter:y(s,"enter",e)})}})),i}var _=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},w=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(Object(m.a)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Object(g.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,r=a,v(n.children,(function(e){return Object(o.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:y(e,"appear",n),enter:y(e,"enter",n),exit:y(e,"exit",n)})}))):b(e,i,a),firstRender:!1}},n.handleExited=function(e,t){var n=v(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Object(r.a)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Object(p.a)(e,["component","childFactory"]),i=this.state.contextValue,o=_(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?a.a.createElement(A.a.Provider,{value:i},o):a.a.createElement(A.a.Provider,{value:i},a.a.createElement(t,r,o))},t}(a.a.Component);w.propTypes={},w.defaultProps={component:"div",childFactory:function(e){return e}};var E=w,x="undefined"===typeof window?o.useEffect:o.useLayoutEffect;var S=function(e){var t=e.classes,n=e.pulsate,r=void 0!==n&&n,i=e.rippleX,a=e.rippleY,s=e.rippleSize,l=e.in,h=e.onExited,f=void 0===h?function(){}:h,d=e.timeout,p=o.useState(!1),m=p[0],g=p[1],A=Object(u.a)(t.ripple,t.rippleVisible,r&&t.ripplePulsate),v={width:s,height:s,top:-s/2+a,left:-s/2+i},y=Object(u.a)(t.child,m&&t.childLeaving,r&&t.childPulsate),b=Object(c.a)(f);return x((function(){if(!l){g(!0);var e=setTimeout(b,d);return function(){clearTimeout(e)}}}),[b,l,d]),o.createElement("span",{className:A,style:v},o.createElement("span",{className:y}))},T=o.forwardRef((function(e,t){var n=e.center,a=void 0!==n&&n,s=e.classes,l=e.className,c=Object(i.a)(e,["center","classes","className"]),h=o.useState([]),f=h[0],p=h[1],m=o.useRef(0),g=o.useRef(null);o.useEffect((function(){g.current&&(g.current(),g.current=null)}),[f]);var A=o.useRef(!1),v=o.useRef(null),y=o.useRef(null),b=o.useRef(null);o.useEffect((function(){return function(){clearTimeout(v.current)}}),[]);var _=o.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,a=e.cb;p((function(e){return[].concat(Object(d.a)(e),[o.createElement(S,{key:m.current,classes:s,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i})])})),m.current+=1,g.current=a}),[s]),w=o.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,o=t.center,s=void 0===o?a||t.pulsate:o,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===e.type&&A.current)A.current=!1;else{"touchstart"===e.type&&(A.current=!0);var c,h,f,d=l?null:b.current,p=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(p.width/2),h=Math.round(p.height/2);else{var m=e.touches?e.touches[0]:e,g=m.clientX,w=m.clientY;c=Math.round(g-p.left),h=Math.round(w-p.top)}if(s)(f=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(f+=1);else{var E=2*Math.max(Math.abs((d?d.clientWidth:0)-c),c)+2,x=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(E,2)+Math.pow(x,2))}e.touches?null===y.current&&(y.current=function(){_({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})},v.current=setTimeout((function(){y.current&&(y.current(),y.current=null)}),80)):_({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})}}),[a,_]),x=o.useCallback((function(){w({},{pulsate:!0})}),[w]),T=o.useCallback((function(e,t){if(clearTimeout(v.current),"touchend"===e.type&&y.current)return e.persist(),y.current(),y.current=null,void(v.current=setTimeout((function(){T(e,t)})));y.current=null,p((function(e){return e.length>0?e.slice(1):e})),g.current=t}),[]);return o.useImperativeHandle(t,(function(){return{pulsate:x,start:w,stop:T}}),[x,w,T]),o.createElement("span",Object(r.a)({className:Object(u.a)(s.root,l),ref:b},c),o.createElement(E,{component:null,exit:!0},f))})),M=Object(h.a)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(o.memo(T)),L=o.forwardRef((function(e,t){var n=e.action,a=e.buttonRef,h=e.centerRipple,d=void 0!==h&&h,p=e.children,m=e.classes,g=e.className,A=e.component,v=void 0===A?"button":A,y=e.disabled,b=void 0!==y&&y,_=e.disableRipple,w=void 0!==_&&_,E=e.disableTouchRipple,x=void 0!==E&&E,S=e.focusRipple,T=void 0!==S&&S,L=e.focusVisibleClassName,C=e.onBlur,R=e.onClick,O=e.onFocus,I=e.onFocusVisible,P=e.onKeyDown,k=e.onKeyUp,N=e.onMouseDown,D=e.onMouseLeave,F=e.onMouseUp,j=e.onTouchEnd,B=e.onTouchMove,V=e.onTouchStart,G=e.onDragLeave,U=e.tabIndex,q=void 0===U?0:U,W=e.TouchRippleProps,z=e.type,H=void 0===z?"button":z,K=Object(i.a)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),Y=o.useRef(null);var Q=o.useRef(null),X=o.useState(!1),J=X[0],Z=X[1];b&&J&&Z(!1);var $=Object(f.a)(),ee=$.isFocusVisible,te=$.onBlurVisible,ne=$.ref;function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x;return Object(c.a)((function(r){return t&&t(r),!n&&Q.current&&Q.current[e](r),!0}))}o.useImperativeHandle(n,(function(){return{focusVisible:function(){Z(!0),Y.current.focus()}}}),[]),o.useEffect((function(){J&&T&&!w&&Q.current.pulsate()}),[w,T,J]);var ie=re("start",N),oe=re("stop",G),ae=re("stop",F),se=re("stop",(function(e){J&&e.preventDefault(),D&&D(e)})),ue=re("start",V),le=re("stop",j),ce=re("stop",B),he=re("stop",(function(e){J&&(te(e),Z(!1)),C&&C(e)}),!1),fe=Object(c.a)((function(e){Y.current||(Y.current=e.currentTarget),ee(e)&&(Z(!0),I&&I(e)),O&&O(e)})),de=function(){var e=s.findDOMNode(Y.current);return v&&"button"!==v&&!("A"===e.tagName&&e.href)},pe=o.useRef(!1),me=Object(c.a)((function(e){T&&!pe.current&&J&&Q.current&&" "===e.key&&(pe.current=!0,e.persist(),Q.current.stop(e,(function(){Q.current.start(e)}))),e.target===e.currentTarget&&de()&&" "===e.key&&e.preventDefault(),P&&P(e),e.target===e.currentTarget&&de()&&"Enter"===e.key&&!b&&(e.preventDefault(),R&&R(e))})),ge=Object(c.a)((function(e){T&&" "===e.key&&Q.current&&J&&!e.defaultPrevented&&(pe.current=!1,e.persist(),Q.current.stop(e,(function(){Q.current.pulsate(e)}))),k&&k(e),R&&e.target===e.currentTarget&&de()&&" "===e.key&&!e.defaultPrevented&&R(e)})),Ae=v;"button"===Ae&&K.href&&(Ae="a");var ve={};"button"===Ae?(ve.type=H,ve.disabled=b):("a"===Ae&&K.href||(ve.role="button"),ve["aria-disabled"]=b);var ye=Object(l.a)(a,t),be=Object(l.a)(ne,Y),_e=Object(l.a)(ye,be),we=o.useState(!1),Ee=we[0],xe=we[1];o.useEffect((function(){xe(!0)}),[]);var Se=Ee&&!w&&!b;return o.createElement(Ae,Object(r.a)({className:Object(u.a)(m.root,g,J&&[m.focusVisible,L],b&&m.disabled),onBlur:he,onClick:R,onFocus:fe,onKeyDown:me,onKeyUp:ge,onMouseDown:ie,onMouseLeave:se,onMouseUp:ae,onDragLeave:oe,onTouchEnd:le,onTouchMove:ce,onTouchStart:ue,ref:_e,tabIndex:b?-1:q},ve,K),p,Se?o.createElement(M,Object(r.a)({ref:Q,center:d},W)):null)}));t.a=Object(h.a)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(L)},,,function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){var r=n(85),i=n(145);e.exports=function(e){return i(e).reduce((function(e,t){var n=r(t,2),i=n[0],o=n[1];return e[i]=o,e}),{})}},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),i=function(){function e(e,t,n){void 0===e&&(e=NaN),void 0===t&&(t=NaN),void 0===n&&(n=!1),this._minFPS=t,this._maxFPS=e,this._timeScale=1,this._currentTick=0,this._currentTime=0,this._tickDeltaTime=0,this._isRunning=!1,this._maxInterval=isNaN(this._minFPS)?NaN:1e3/this._minFPS,this._minInterval=isNaN(this._maxFPS)?NaN:1e3/this._maxFPS,this._onResume=new r.default,this._onPause=new r.default,this._onTick=new r.default,this._onTickOncePerFrame=new r.default,n||this.resume()}return e.prototype.updateOnce=function(e){e(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},e.prototype.resume=function(){this._isRunning||(this._isRunning=!0,this._lastTimeUpdated=this.getTimer(),this._onResume.dispatch(),this.animateOnce())},e.prototype.pause=function(){this._isRunning&&(this._isRunning=!1,this._onPause.dispatch(),window.cancelAnimationFrame(this._animationFrameHandle))},e.prototype.dispose=function(){this.pause(),this._onResume.removeAll(),this._onPause.removeAll(),this._onTick.removeAll()},Object.defineProperty(e.prototype,"currentTick",{get:function(){return this._currentTick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTimeSeconds",{get:function(){return this._currentTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tickDeltaTimeSeconds",{get:function(){return this._tickDeltaTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._timeScale},set:function(e){this._timeScale!==e&&(this._timeScale=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onResume",{get:function(){return this._onResume},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onPause",{get:function(){return this._onPause},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTickOncePerFrame",{get:function(){return this._onTickOncePerFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),e.prototype.animateOnce=function(){var e=this;this._animationFrameHandle=window.requestAnimationFrame((function(){return e.onFrame()}))},e.prototype.onFrame=function(){if(this._now=this.getTimer(),this._frameDeltaTime=this._now-this._lastTimeUpdated,isNaN(this._minInterval)||this._frameDeltaTime>=this._minInterval)if(isNaN(this._maxInterval))this.update(this._frameDeltaTime*this._timeScale,!0),this._lastTimeUpdated=this._now;else for(this._interval=Math.min(this._frameDeltaTime,this._maxInterval);this._now>=this._lastTimeUpdated+this._interval;)this.update(this._interval*this._timeScale,this._now<=this._lastTimeUpdated+2*this._maxInterval),this._lastTimeUpdated+=this._interval;this._isRunning&&this.animateOnce()},e.prototype.update=function(e,t){void 0===t&&(t=!0),this._currentTick++,this._currentTime+=e,this._tickDeltaTime=e,this._onTick.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick),t&&this._onTickOncePerFrame.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},e.prototype.getTimer=function(){return Date.now()},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";var n=function(){function e(){this.functions=[]}return e.prototype.add=function(e){return-1===this.functions.indexOf(e)&&(this.functions.push(e),!0)},e.prototype.remove=function(e){var t=this.functions.indexOf(e);return t>-1&&(this.functions.splice(t,1),!0)},e.prototype.removeAll=function(){return this.functions.length>0&&(this.functions.length=0,!0)},e.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.functions.concat();n.forEach((function(t){t.apply(void 0,e)}))},Object.defineProperty(e.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}])}])},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(0,r(n(33)).default)(i.default.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.default=o},,,,,function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t,n){(function(e){(function(){var t,r=n(23).default,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var o=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}(this);function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function s(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:a(e)}}!function(e,t){if(t){var n=o;e=e.split(".");for(var r=0;r<e.length-1;r++){var a=e[r];a in n||(n[a]={}),n=n[a]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var i=o.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.w(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.s=function(e){var t=this.f();e.Oa(t.resolve,t.reject)},t.prototype.w=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Oa(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Oa=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=s(e),o=i.next();!o.done;o=i.next())r(o.value).Oa(t,n)}))},t.all=function(e){var n=s(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Oa(o(a.length-1),t),i=n.next()}while(!i.done)}))},t}));var u=u||{},l=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(){}function d(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function p(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function m(e){return"function"==d(e)}function g(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function A(e){return Object.prototype.hasOwnProperty.call(e,v)&&e[v]||(e[v]=++y)}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(e,t,n){return e.call.apply(e.bind,arguments)}function _(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:_).apply(null,arguments)}function E(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var x=Date.now||function(){return+new Date};function S(e,t){function n(){}n.prototype=t.prototype,e.Za=t.prototype,e.prototype=new n,e.prototype.constructor=e}function T(e,t,n){this.code=C+e,this.message=t||R[e]||"",this.a=n||null}function M(e){var t=e&&e.code;return t?new T(t.substring(C.length),e.message,e.serverResponse):null}S(T,Error),T.prototype.v=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},T.prototype.toJSON=function(){return this.v()};var L,C="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function I(e){for(var t in O)if(O[t].id===e)return{firebaseEndpoint:(e=O[t]).Ra,secureTokenEndpoint:e.Xa,identityPlatformEndpoint:e.Ua};return null}function P(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function k(e){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function N(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");k.call(this,n+e[r])}function D(e,t){throw new N("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function F(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function j(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function B(){this.b=this.a=null}L=I("__EID__")?"__EID__":void 0,S(k,Error),k.prototype.name="CustomError",S(N,k),N.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var V=new F((function(){return new U}),(function(e){e.reset()}));function G(){var e=vt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function U(){this.next=this.b=this.a=null}B.prototype.add=function(e,t){var n=V.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},W=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var z=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},H=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"===typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},K=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function Y(e,t){return 0<=q(e,t)}function Q(e,t){var n;return(n=0<=(t=q(e,t)))&&Array.prototype.splice.call(e,t,1),n}function X(e,t){!function(e,t){for(var n="string"===typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function J(e){return Array.prototype.concat.apply([],arguments)}function Z(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var $,ee=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},te=/&/g,ne=/</g,re=/>/g,ie=/"/g,oe=/'/g,ae=/\x00/g,se=/[\x00&<>"']/;function ue(e,t){return-1!=e.indexOf(t)}function le(e,t){return e<t?-1:e>t?1:0}e:{var ce=l.navigator;if(ce){var he=ce.userAgent;if(he){$=he;break e}}$=""}function fe(e){return ue($,e)}function de(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function pe(e){for(var t in e)return!1;return!0}function me(e){var t,n={};for(t in e)n[t]=e[t];return n}var ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ge.length;o++)n=ge[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ve(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||l).Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(g(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function ye(e,t){this.a=e===we&&t||"",this.b=_e}function be(e){return e instanceof ye&&e.constructor===ye&&e.b===_e?e.a:(D("expected object of type Const, got '"+e+"'"),"type_error:Const")}ye.prototype.ra=!0,ye.prototype.qa=function(){return this.a},ye.prototype.toString=function(){return"Const{"+this.a+"}"};var _e={},we={},Ee=new ye(we,"");function xe(e,t){this.a=e===Re&&t||"",this.b=Ce}function Se(e){return e instanceof xe&&e.constructor===xe&&e.b===Ce?e.a:(D("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function Te(e,t){var n=be(e);if(!Le.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(Me,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof ye?be(e):encodeURIComponent(String(e))})),new xe(Re,e)}xe.prototype.ra=!0,xe.prototype.qa=function(){return this.a.toString()},xe.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Me=/%{(\w+)}/g,Le=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ce={},Re={};function Oe(e,t){this.a=e===De&&t||"",this.b=Ne}function Ie(e){return e instanceof Oe&&e.constructor===Oe&&e.b===Ne?e.a:(D("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}Oe.prototype.ra=!0,Oe.prototype.qa=function(){return this.a.toString()},Oe.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pe=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function ke(e){return e instanceof Oe?e:(e="object"==typeof e&&e.ra?e.qa():String(e),Pe.test(e)||(e="about:invalid#zClosurez"),new Oe(De,e))}var Ne={},De={};function Fe(){this.a="",this.b=Be}function je(e){return e instanceof Fe&&e.constructor===Fe&&e.b===Be?e.a:(D("expected object of type SafeHtml, got '"+e+"' of type "+d(e)),"type_error:SafeHtml")}Fe.prototype.ra=!0,Fe.prototype.qa=function(){return this.a.toString()},Fe.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Be={};function Ve(e){var t=new Fe;return t.a=e,t}Ve("<!DOCTYPE html>");var Ge=Ve("");function Ue(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function qe(e){return se.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(te,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(ne,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(re,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ie,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(oe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ae,"&#0;"))),e}function We(e){return We[" "](e),e}Ve("<br>"),We[" "]=f;var ze,He=fe("Opera"),Ke=fe("Trident")||fe("MSIE"),Ye=fe("Edge"),Qe=Ye||Ke,Xe=fe("Gecko")&&!(ue($.toLowerCase(),"webkit")&&!fe("Edge"))&&!(fe("Trident")||fe("MSIE"))&&!fe("Edge"),Je=ue($.toLowerCase(),"webkit")&&!fe("Edge");function Ze(){var e=l.document;return e?e.documentMode:void 0}e:{var $e="",et=function(){var e=$;return Xe?/rv:([^\);]+)(\)|;)/.exec(e):Ye?/Edge\/([\d\.]+)/.exec(e):Ke?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Je?/WebKit\/(\S+)/.exec(e):He?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(et&&($e=et?et[1]:""),Ke){var tt=Ze();if(null!=tt&&tt>parseFloat($e)){ze=String(tt);break e}}ze=$e}var nt,rt={};function it(e){return function(e,t){var n=rt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=ee(String(ze)).split("."),r=ee(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=le(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||le(0==a[2].length,0==s[2].length)||le(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}nt=l.document&&Ke?Ze():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(aa){}var ot=!Ke||9<=Number(nt);function at(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function st(e,t){de(t,(function(t,n){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:ct.hasOwnProperty(n)?e.setAttribute(ct[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var ut,lt,ct={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ht(e,t,n){function r(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!p(o)||g(o)&&0<o.nodeType?r(o):W(dt(o)?Z(o):o,r)}}function ft(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function dt(e){if(e&&"number"==typeof e.length){if(g(e))return"function"==typeof e.item||"string"==typeof e.item;if(m(e))return"function"==typeof e.item}return!1}function pt(e){l.setTimeout((function(){throw e}),0)}function mt(){var e=l.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!fe("Presto")&&(e=function(){var e=ft(document,"IFRAME");e.style.display="none",function(e){var t=new xe(Re,be(Ee));ve(e,"HTMLIFrameElement"),e.src=Se(t).toString()}(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(je(Ge)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=w((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!fe("Trident")&&!fe("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Db;n.Db=null,e()}},function(e){r.next={Db:e},r=r.next,t.port2.postMessage(0)}}return function(e){l.setTimeout(e,0)}}function gt(e,t){lt||function(){if(l.Promise&&l.Promise.resolve){var e=l.Promise.resolve(void 0);lt=function(){e.then(yt)}}else lt=function(){var e=yt;!m(l.setImmediate)||l.Window&&l.Window.prototype&&!fe("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ut||(ut=mt()),ut(e)):l.setImmediate(e)}}(),At||(lt(),At=!0),vt.add(e,t)}var At=!1,vt=new B;function yt(){for(var e;e=G();){try{e.a.call(e.b)}catch(t){pt(t)}j(V,e)}At=!1}function bt(e,t){if(this.a=_t,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=f)try{var n=this;e.call(t,(function(e){Pt(n,wt,e)}),(function(e){if(!(e instanceof Vt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Pt(n,Et,e)}))}catch(r){Pt(this,Et,r)}}var _t=0,wt=2,Et=3;function xt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}xt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var St=new F((function(){return new xt}),(function(e){e.reset()}));function Tt(e,t,n){var r=St.get();return r.g=e,r.b=t,r.f=n,r}function Mt(e){if(e instanceof bt)return e;var t=new bt(f);return Pt(t,wt,e),t}function Lt(e){return new bt((function(t,n){n(e)}))}function Ct(e,t,n){kt(e,t,n,null)||gt(E(t,e))}function Rt(e){return new bt((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Mb:!0,value:o}:{Mb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)Ct(e[o],E(i,o,!0),E(i,o,!1));else t(r)}))}function Ot(e,t){e.b||e.a!=wt&&e.a!=Et||Nt(e),e.f?e.f.next=t:e.b=t,e.f=t}function It(e,t,n,r){var i=Tt(null,null,null);return i.a=new bt((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){o(a)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof Vt?o(t):e(i)}catch(a){o(a)}}:o})),i.a.c=e,Ot(e,i),i.a}function Pt(e,t,n){e.a==_t&&(e===n&&(t=Et,n=new TypeError("Promise cannot resolve to itself")),e.a=1,kt(n,e.Yc,e.Zc,e)||(e.i=n,e.a=t,e.c=null,Nt(e),t!=Et||n instanceof Vt||function(e,t){e.g=!0,gt((function(){e.g&&Bt.call(null,t)}))}(e,n)))}function kt(e,t,n,r){if(e instanceof bt)return Ot(e,Tt(t||f,n||null,r)),!0;if(P(e))return e.then(t,n,r),!0;if(g(e))try{var i=e.then;if(m(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,n.call(i,e))}),o)}catch(s){o(s)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Nt(e){e.h||(e.h=!0,gt(e.ec,e))}function Dt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Ft(e,t,n,r){if(n==Et&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,jt(t,n,r);else try{t.c?t.g.call(t.f):jt(t,n,r)}catch(i){Bt.call(null,i)}j(St,t)}function jt(e,t,n){t==wt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}bt.prototype.then=function(e,t,n){return It(this,m(e)?e:null,m(t)?t:null,n)},bt.prototype.$goog_Thenable=!0,(t=bt.prototype).ma=function(e,t){return(e=Tt(e,e,t)).c=!0,Ot(this,e),this},t.o=function(e,t){return It(this,null,e,t)},t.cancel=function(e){if(this.a==_t){var t=new Vt(e);gt((function(){!function e(t,n){if(t.a==_t)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==_t&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Dt(r),Ft(r,o,Et,n)))}t.c=null}else Pt(t,Et,n)}(this,t)}),this)}},t.Yc=function(e){this.a=_t,Pt(this,wt,e)},t.Zc=function(e){this.a=_t,Pt(this,Et,e)},t.ec=function(){for(var e;e=Dt(this);)Ft(this,e,this.a,this.i);this.h=!1};var Bt=pt;function Vt(e){k.call(this,e)}function Gt(){0!=Ut&&(qt[A(this)]=this),this.wa=this.wa,this.na=this.na}S(Vt,k),Vt.prototype.name="cancel";var Ut=0,qt={};function Wt(e){if(!e.wa&&(e.wa=!0,e.Ba(),0!=Ut)){var t=A(e);if(0!=Ut&&e.na&&0<e.na.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete qt[t]}}Gt.prototype.wa=!1,Gt.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var zt=Object.freeze||function(e){return e},Ht=!Ke||9<=Number(nt),Kt=Ke&&!it("9"),Yt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{l.addEventListener("test",f,t),l.removeEventListener("test",f,t)}catch(n){}return e}();function Qt(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Xt(e,t){if(Qt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Xe){e:{try{We(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Jt[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Qt.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Xt,Qt);var Jt=zt({2:"touch",3:"pen",4:"mouse"});Xt.prototype.preventDefault=function(){Xt.Za.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Kt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Xt.prototype.f=function(){return this.a};var Zt="closure_listenable_"+(1e6*Math.random()|0),$t=0;function en(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Ta=i,this.key=++$t,this.ua=this.Na=!1}function tn(e){e.ua=!0,e.listener=null,e.proxy=null,e.src=null,e.Ta=null}function nn(e){this.src=e,this.a={},this.b=0}function rn(e,t){var n=t.type;n in e.a&&Q(e.a[n],t)&&(tn(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function on(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ua&&o.listener==t&&o.capture==!!n&&o.Ta==r)return i}return-1}nn.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=on(e,t,r,i);return-1<a?(t=e[a],n||(t.Na=!1)):((t=new en(t,this.src,o,!!r,i)).Na=n,e.push(t)),t};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function un(e,t,n,r,i){if(r&&r.once)cn(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)un(e,t[o],n,r,i);else n=yn(n),e&&e[Zt]?_n(e,t,n,g(r)?!!r.capture:!!r,i):ln(e,t,n,!1,r,i)}function ln(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=g(i)?!!i.capture:!!i,s=An(e);if(s||(e[an]=s=new nn(e)),!(n=s.add(t,n,r,a,o)).proxy){if(r=function(){var e=gn,t=Ht?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Yt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(dn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function cn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)cn(e,t[o],n,r,i);else n=yn(n),e&&e[Zt]?wn(e,t,n,g(r)?!!r.capture:!!r,i):ln(e,t,n,!0,r,i)}function hn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)hn(e,t[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=yn(n),e&&e[Zt]?(e=e.u,(t=String(t).toString())in e.a&&(-1<(n=on(o=e.a[t],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=An(e))&&(t=e.a[t.toString()],e=-1,t&&(e=on(t,n,r,i)),(n=-1<e?t[e]:null)&&fn(n))}function fn(e){if("number"!==typeof e&&e&&!e.ua){var t=e.src;if(t&&t[Zt])rn(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(dn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=An(t))?(rn(n,e),0==n.b&&(n.src=null,t[an]=null)):tn(e)}}}function dn(e){return e in sn?sn[e]:sn[e]="on"+e}function pn(e,t,n,r){var i=!0;if((e=An(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ua&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(e,t){var n=e.listener,r=e.Ta||e.src;return e.Na&&fn(e),n.call(r,t)}function gn(e,t){if(e.ua)return!0;if(!Ht){if(!t)e:{t=["window","event"];for(var n=l,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Xt(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=pn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=pn(r[i],e,!1,t),n=n&&o}return n}return mn(e,new Xt(t,this))}function An(e){return(e=e[an])instanceof nn?e:null}var vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(e){return m(e)?e:(e[vn]||(e[vn]=function(t){return e.handleEvent(t)}),e[vn])}function bn(){Gt.call(this),this.u=new nn(this),this.Yb=this,this.eb=null}function _n(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function wn(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function En(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ua&&a.capture==n){var s=a.listener,u=a.Ta||a.src;a.Na&&rn(e.u,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function xn(e,t,n){if(m(e))n&&(e=w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(t)?-1:l.setTimeout(e,t||0)}function Sn(e){var t=null;return new bt((function(n,r){-1==(t=xn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw l.clearTimeout(t),e}))}function Tn(e){if(e.V&&"function"==typeof e.V)return e.V();if("string"===typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Mn(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.V||"function"!=typeof e.V){if(p(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Ln(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ln)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Cn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Rn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Rn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Rn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}S(bn,Gt),bn.prototype[Zt]=!0,bn.prototype.addEventListener=function(e,t,n,r){un(this,e,t,n,r)},bn.prototype.removeEventListener=function(e,t,n,r){hn(this,e,t,n,r)},bn.prototype.dispatchEvent=function(e){var t,n=this.eb;if(n)for(t=[];n;n=n.eb)t.push(n);n=this.Yb;var r=e.type||e;if("string"===typeof e)e=new Qt(e,n);else if(e instanceof Qt)e.target=e.target||n;else{var i=e;Ae(e=new Qt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=En(a,r,!0,e)&&i}if(i=En(a=e.b=n,r,!0,e)&&i,i=En(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=En(a=e.b=t[o],r,!1,e)&&i;return i},bn.prototype.Ba=function(){if(bn.Za.Ba.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)tn(n[r]);delete t.a[e],t.b--}}this.eb=null},(t=Ln.prototype).V=function(){Cn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},t.X=function(){return Cn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(e,t){return Rn(this.b,e)?this.b[e]:t},t.set=function(e,t){Rn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},t.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function In(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof In?(this.h=void 0!==t?t:e.h,Pn(this,e.f),this.i=e.i,this.b=e.b,kn(this,e.l),this.c=e.c,Nn(this,er(e.a)),this.g=e.g):e&&(n=String(e).match(On))?(this.h=!!t,Pn(this,n[1]||"",!0),this.i=Vn(n[2]||""),this.b=Vn(n[3]||"",!0),kn(this,n[4]),this.c=Vn(n[5]||"",!0),Nn(this,n[6]||"",!0),this.g=Vn(n[7]||"")):(this.h=!!t,this.a=new Yn(null,this.h))}function Pn(e,t,n){e.f=n?Vn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function kn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.l=t}else e.l=null}function Nn(e,t,n){t instanceof Yn?(e.a=t,function(e,t){t&&!e.f&&(Qn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Jn(this,t),$n(this,n,e))}),e)),e.f=t}(e.a,e.h)):(n||(t=Gn(t,Hn)),e.a=new Yn(t,e.h))}function Dn(e,t,n){e.a.set(t,n)}function Fn(e,t){return e.a.get(t)}function jn(e){return e instanceof In?new In(e):new In(e,void 0)}function Bn(e,t){var n=new In(null,void 0);return Pn(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function Vn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Un),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Un(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}In.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Gn(t,qn,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(Gn(t,qn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Gn(n,"/"==n.charAt(0)?zn:Wn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Gn(n,Kn)),e.join("")},In.prototype.resolve=function(e){var t=new In(this),n=!!e.f;n?Pn(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)kn(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ue(i,"./")||ue(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?Nn(t,er(e.a)):n=!!e.g,n&&(t.g=e.g),t};var qn=/[#\/\?@]/g,Wn=/[#\?:]/g,zn=/[#\?]/g,Hn=/[#\?@]/g,Kn=/#/g;function Yn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Qn(e){e.a||(e.a=new Ln,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Xn(e){var t=Mn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new Yn(null,void 0);e=Tn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?$n(n,i,o):n.add(i,o)}return n}function Jn(e,t){Qn(e),t=tr(e,t),Rn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Rn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Cn(e)))}function Zn(e,t){return Qn(e),t=tr(e,t),Rn(e.a.b,t)}function $n(e,t,n){Jn(e,t),0<n.length&&(e.c=null,e.a.set(tr(e,t),Z(n)),e.b+=n.length)}function er(e){var t=new Yn;return t.c=e.c,e.a&&(t.a=new Ln(e.a),t.b=e.b),t}function tr(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function nr(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),ar(i,r),r.push(":"),e(t,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":ar(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new rr,e,t),t.join("")}function rr(){}(t=Yn.prototype).add=function(e,t){Qn(this),this.c=null,e=tr(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(e,t){Qn(this),this.a.forEach((function(n,r){W(n,(function(n){e.call(t,n,r,this)}),this)}),this)},t.X=function(){Qn(this);for(var e=this.a.V(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},t.V=function(e){Qn(this);var t=[];if("string"===typeof e)Zn(this,e)&&(t=J(t,this.a.get(tr(this,e))));else{e=this.a.V();for(var n=0;n<e.length;n++)t=J(t,e[n])}return t},t.set=function(e,t){return Qn(this),this.c=null,Zn(this,e=tr(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},t.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(e,t){t.push('"',e.replace(or,(function(e){var t=ir[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ir[e]=t),t})),'"')}function sr(){var e=Tr();return Ke&&!!nt&&11==nt||/Edge\/\d+/.test(e)}function ur(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function lr(e,t){t=t||l.window;var n="about:blank";e&&(n=Ie(ke(e))),t.location.href=n}function cr(e){return!!((e=(e||Tr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function hr(e){e=e||l.window;try{e.close()}catch(t){}}function fr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Tr().toLowerCase(),r&&(t.target=r,ue(n,"crios/")&&(t.target="_blank")),Er(Tr())==_r&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Oe?n:ke("undefined"!=typeof n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((fe("iPhone")&&!fe("iPod")&&!fe("iPad")||fe("iPad")||fe("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ve(a=ft(document,"A"),"HTMLAnchorElement"),t instanceof Oe||t instanceof Oe||(t="object"==typeof t&&t.ra?t.qa():String(t),Pe.test(t)||(t="about:invalid#zClosurez"),t=new Oe(De,t)),a.href=Ie(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=Ie(t),a&&(Qe&&ue(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=Ve('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qe(e)+'">'),r=a.document)&&(r.write(je(e)),r.close())):(a=r.open(Ie(t),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pr=/^[^@]+@[^@]+$/;function mr(){var e=null;return new bt((function(t){"complete"==l.document.readyState?t():(e=function(){t()},cn(window,"load",e))})).o((function(t){throw hn(window,"load",e),t}))}function gr(e){return e=e||Tr(),!("file:"!==Or()&&"ionic:"!==Or()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ar(){var e=l.window;try{return!(!e||e==e.top)}catch(t){return!1}}function vr(){return"undefined"!==typeof l.WorkerGlobalScope&&"function"===typeof l.importScripts}function yr(){return r.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.INTERNAL.hasOwnProperty("node")?"Node":vr()?"Worker":"Browser"}function br(){var e=yr();return"ReactNative"===e||"Node"===e}var _r="Firefox",wr="Chrome";function Er(e){var t=e.toLowerCase();return ue(t,"opera/")||ue(t,"opr/")||ue(t,"opios/")?"Opera":ue(t,"iemobile")?"IEMobile":ue(t,"msie")||ue(t,"trident/")?"IE":ue(t,"edge/")?"Edge":ue(t,"firefox/")?_r:ue(t,"silk/")?"Silk":ue(t,"blackberry")?"Blackberry":ue(t,"webos")?"Webos":!ue(t,"safari/")||ue(t,"chrome/")||ue(t,"crios/")||ue(t,"android")?!ue(t,"chrome/")&&!ue(t,"crios/")||ue(t,"edge/")?ue(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":wr:"Safari"}var xr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function Sr(e,t){t=t||[];var n,r=[],i={};for(n in xr)i[xr[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=yr())?r=Er(i=Tr()):"Worker"===r&&(r=Er(i=Tr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Tr(){return l.navigator&&l.navigator.userAgent||""}function Mr(e,t){e=e.split("."),t=t||l;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Lr(){try{var e=l.localStorage,t=Dr();if(e)return e.setItem(t,"1"),e.removeItem(t),!sr()||!!l.indexedDB}catch(n){return vr()&&!!l.indexedDB}return!1}function Cr(){return(Rr()||"chrome-extension:"===Or()||gr())&&!br()&&Lr()&&!vr()}function Rr(){return"http:"===Or()||"https:"===Or()}function Or(){return l.location&&l.location.protocol||null}function Ir(e){return!cr(e=e||Tr())&&Er(e)!=_r}function Pr(e){return"undefined"===typeof e?null:nr(e)}function kr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Nr(e){if(null!==e)return JSON.parse(e)}function Dr(e){return e||Math.floor(1e9*Math.random()).toString()}function Fr(e){return"Safari"!=Er(e=e||Tr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function jr(){var e=l.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Br(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Tr(),t=yr(),this.b=cr(e)||"ReactNative"===t}function Vr(){var e=l.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function Gr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Ur(){return!(!Mr("fireauth.oauthhelper",l)&&!Mr("fireauth.iframe",l))}Br.prototype.get=function(){var e=l.navigator;return!e||"boolean"!==typeof e.onLine||!Rr()&&"chrome-extension:"!==Or()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var qr,Wr={};function zr(e){Wr[e]||(Wr[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var Hr={};Object.defineProperty(Hr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Hr,"abcd",{configurable:!0,enumerable:!0,value:2}),qr=2==Hr.abcd}catch(aa){qr=!1}function Kr(e,t,n){qr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Yr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Kr(e,n,t[n])}function Qr(e){var t={};return Yr(t,e),t}function Xr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Kr(t,n,Xr(e[n]));return t}function Jr(e){var t=e&&(e[ni]?"phone":null);if(!(t&&e&&e[ti]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Kr(this,"uid",e[ti]),Kr(this,"displayName",e[$r]||null);var n=null;e[ei]&&(n=new Date(e[ei]).toUTCString()),Kr(this,"enrollmentTime",n),Kr(this,"factorId",t)}function Zr(e){try{var t=new ri(e)}catch(n){t=null}return t}Jr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var $r="displayName",ei="enrolledAt",ti="mfaEnrollmentId",ni="phoneInfo";function ri(e){Jr.call(this,e),Kr(this,"phoneNumber",e[ni])}function ii(e){var t={},n=e[ui],r=e[ci],i=e[hi];if(e=Zr(e[li]),!i||i!=ai&&i!=si&&!n||i==si&&!r||i==oi&&!e)throw Error("Invalid checkActionCode response!");i==si?(t[di]=n||null,t[mi]=n||null,t[fi]=r):(t[di]=r||null,t[mi]=r||null,t[fi]=n||null),t[pi]=e||null,Kr(this,Ai,i),Kr(this,gi,Xr(t))}S(ri,Jr),ri.prototype.v=function(){var e=ri.Za.v.call(this);return e.phoneNumber=this.phoneNumber,e};var oi="REVERT_SECOND_FACTOR_ADDITION",ai="EMAIL_SIGNIN",si="VERIFY_AND_CHANGE_EMAIL",ui="email",li="mfaInfo",ci="newEmail",hi="requestType",fi="email",di="fromEmail",pi="multiFactorInfo",mi="previousEmail",gi="data",Ai="operation";function vi(e){var t=Fn(e=jn(e),yi)||null,n=Fn(e,bi)||null,r=Fn(e,Ei)||null;if(r=r&&Si[r]||null,!t||!n||!r)throw new T("argument-error",yi+", "+bi+"and "+Ei+" are required in a valid action code URL.");Yr(this,{apiKey:t,operation:r,code:n,continueUrl:Fn(e,_i)||null,languageCode:Fn(e,wi)||null,tenantId:Fn(e,xi)||null})}var yi="apiKey",bi="oobCode",_i="continueUrl",wi="languageCode",Ei="mode",xi="tenantId",Si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:oi,signIn:ai,verifyAndChangeEmail:si,verifyEmail:"VERIFY_EMAIL"};function Ti(e){try{return new vi(e)}catch(t){return null}}function Mi(e){var t=e[Ii];if("undefined"===typeof t)throw new T("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new T("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Li];if(n&&"object"===typeof n){t=n[Ni];var r=n[Pi];if(n=n[ki],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new T("argument-error",Pi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new T("argument-error",ki+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new T("argument-error",Ni+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new T("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new T("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(t=e[Oi])&&"object"===typeof t){if("string"===typeof(t=t[Di])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new T("argument-error",Di+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new T("argument-error",Oi+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[Ri])&&"boolean"!==typeof t)throw new T("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[Ci])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new T("argument-error",Ci+" property must be a non empty string when specified.");this.i=e||null}var Li="android",Ci="dynamicLinkDomain",Ri="handleCodeInApp",Oi="iOS",Ii="url",Pi="installApp",ki="minimumVersion",Ni="packageName",Di="bundleId";function Fi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var ji=null;function Bi(e){var t="";return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=ji[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!ji){ji={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===ji[o]&&(ji[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t+=String.fromCharCode(e)})),t}function Vi(e){var t=Ui(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.g=e,this.c=t.exp,this.h=t.sub,x(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Gi(e){try{return new Vi(e)}catch(t){return null}}function Ui(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(Bi(e))}catch(r){}return null}Vi.prototype.S=function(){return this.f},Vi.prototype.i=function(){return this.b},Vi.prototype.toString=function(){return this.g};var qi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Wi=["client_id","response_type","scope","redirect_uri","state"],zi={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Wi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Wi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Wi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:qi},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function Hi(e){for(var t in zi)if(zi[t].ea==e)return zi[t];return null}function Ki(e){var t={};t["facebook.com"]=Zi,t["google.com"]=eo,t["github.com"]=$i,t["twitter.com"]=to;var n=e&&e[Qi];try{if(n)return t[n]?new t[n](e):new Ji(e);if("undefined"!==typeof e[Yi])return new Xi(e)}catch(r){}return null}var Yi="idToken",Qi="providerId";function Xi(e){var t=e[Qi];if(!t&&e[Yi]){var n=Gi(e[Yi]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Kr(this,"providerId",t),Kr(this,"isNewUser",n)}function Ji(e){Xi.call(this,e),Kr(this,"profile",Xr((e=Nr(e.rawUserInfo||"{}"))||{}))}function Zi(e){if(Ji.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function $i(e){if(Ji.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Kr(this,"username",this.profile&&this.profile.login||null)}function eo(e){if(Ji.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(e){if(Ji.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Kr(this,"username",e.screenName||null)}function no(e){var t=jn(e),n=Fn(t,"link"),r=Fn(jn(n),"link");return t=Fn(t,"deep_link_id"),Fn(jn(t),"link")||t||r||n||e}function ro(e,t){if(!e&&!t)throw new T("internal-error","Internal assert: no raw session string available");if(e&&t)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?io:oo}S(Ji,Xi),S(Zi,Ji),S($i,Ji),S(eo,Ji),S(to,Ji);var io="enroll",oo="signin";function ao(){}function so(e,t){return e.then((function(e){if(e[Xa]){var n=Gi(e[Xa]);if(!n||t!=n.h)throw new T("user-mismatch");return e}throw new T("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==C+"user-not-found"?new T("user-mismatch"):e}))}function uo(e,t){if(!t)throw new T("internal-error","failed to construct a credential");this.a=t,Kr(this,"providerId",e),Kr(this,"signInMethod",e)}function lo(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function co(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new uo(e.providerId,e.pendingToken)}catch(t){}return null}function ho(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Kr(this,"idToken",t.idToken),t.accessToken&&Kr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Kr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Kr(this,"accessToken",t.oauthToken),Kr(this,"secret",t.oauthTokenSecret)}Kr(this,"providerId",e),Kr(this,"signInMethod",n)}function fo(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Xn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function po(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new ho(e.providerId,t,e.signInMethod)}catch(n){}}return null}function mo(e,t){this.Oc=t||[],Yr(this,{providerId:e,isOAuthProvider:!0}),this.Fb={},this.lb=(Hi(e)||{}).Ha||null,this.kb=null}function go(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,e,[])}function Ao(e){mo.call(this,e,Wi),this.a=[]}function vo(){Ao.call(this,"facebook.com")}function yo(e){if(!e)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return g(e)&&(t=e.accessToken),(new vo).credential({accessToken:t})}function bo(){Ao.call(this,"github.com")}function _o(e){if(!e)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return g(e)&&(t=e.accessToken),(new bo).credential({accessToken:t})}function wo(){Ao.call(this,"google.com"),this.Aa("profile")}function Eo(e,t){var n=e;return g(e)&&(n=e.idToken,t=e.accessToken),(new wo).credential({idToken:n,accessToken:t})}function xo(){mo.call(this,"twitter.com",qi)}function So(e,t){var n=e;if(g(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ho("twitter.com",n,"twitter.com")}function To(e,t,n){this.a=e,this.f=t,Kr(this,"providerId","password"),Kr(this,"signInMethod",n===Lo.EMAIL_LINK_SIGN_IN_METHOD?Lo.EMAIL_LINK_SIGN_IN_METHOD:Lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Mo(e){return e&&e.email&&e.password?new To(e.email,e.password,e.signInMethod):null}function Lo(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function Co(e,t){if(!(t=Ro(t)))throw new T("argument-error","Invalid email link!");return new To(e,t.code,Lo.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(e){return(e=Ti(e=no(e)))&&e.operation===ai?e:null}function Oo(e){if(!(e.bb&&e.ab||e.Ja&&e.da))throw new T("internal-error");this.a=e,Kr(this,"providerId","phone"),this.ea="phone",Kr(this,"signInMethod","phone")}function Io(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return W(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new Oo(t)}return null}function Po(e){return e.a.Ja&&e.a.da?{temporaryProof:e.a.Ja,phoneNumber:e.a.da}:{sessionInfo:e.a.bb,code:e.a.ab}}function ko(e){try{this.a=e||r.auth()}catch(t){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function No(e,t){if(!e)throw new T("missing-verification-id");if(!t)throw new T("missing-verification-code");return new Oo({bb:e,ab:t})}function Do(e){if(e.temporaryProof&&e.phoneNumber)return new Oo({Ja:e.temporaryProof,da:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return Eo(o,n);case"facebook.com":return yo(n);case"github.com":return _o(n);case"twitter.com":return So(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new uo(t,a):new ho(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Ao(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Fo(e){if(!e.isOAuthProvider)throw new T("invalid-oauth-provider")}function jo(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function Bo(e){return(e=e||{}).type?new jo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&M(e.error),e.postBody,e.tenantId):null}function Vo(){this.b=null,this.a=[]}ro.prototype.Fa=function(){return this.a?Mt(this.a):Mt(this.b)},ro.prototype.v=function(){return this.type==io?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ia=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.v=function(){},uo.prototype.ia=function(e){return gs(e,lo(this))},uo.prototype.b=function(e,t){var n=lo(this);return n.idToken=t,As(e,n)},uo.prototype.c=function(e,t){return so(vs(e,lo(this)),t)},uo.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ho.prototype.ia=function(e){return gs(e,fo(this))},ho.prototype.b=function(e,t){var n=fo(this);return n.idToken=t,As(e,n)},ho.prototype.c=function(e,t){return so(vs(e,fo(this)),t)},ho.prototype.v=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},mo.prototype.Ia=function(e){return this.Fb=me(e),this},S(go,mo),S(Ao,mo),Ao.prototype.Aa=function(e){return Y(this.a,e)||this.a.push(e),this},Ao.prototype.Nb=function(){return Z(this.a)},Ao.prototype.credential=function(e,t){var n;if(!(n=g(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new ho(this.providerId,n,this.providerId)},S(vo,Ao),Kr(vo,"PROVIDER_ID","facebook.com"),Kr(vo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(bo,Ao),Kr(bo,"PROVIDER_ID","github.com"),Kr(bo,"GITHUB_SIGN_IN_METHOD","github.com"),S(wo,Ao),Kr(wo,"PROVIDER_ID","google.com"),Kr(wo,"GOOGLE_SIGN_IN_METHOD","google.com"),S(xo,mo),Kr(xo,"PROVIDER_ID","twitter.com"),Kr(xo,"TWITTER_SIGN_IN_METHOD","twitter.com"),To.prototype.ia=function(e){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?$s(e,Ts,{email:this.a,oobCode:this.f}):$s(e,Ys,{email:this.a,password:this.f})},To.prototype.b=function(e,t){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?$s(e,Ms,{idToken:t,email:this.a,oobCode:this.f}):$s(e,Vs,{idToken:t,email:this.a,password:this.f})},To.prototype.c=function(e,t){return so(this.ia(e),t)},To.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Lo,{PROVIDER_ID:"password"}),Yr(Lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Oo.prototype.ia=function(e){return e.cb(Po(this))},Oo.prototype.b=function(e,t){var n=Po(this);return n.idToken=t,$s(e,Xs,n)},Oo.prototype.c=function(e,t){var n=Po(this);return n.operation="REAUTH",so(e=$s(e,Js,n),t)},Oo.prototype.v=function(){var e={providerId:"phone"};return this.a.bb&&(e.verificationId=this.a.bb),this.a.ab&&(e.verificationCode=this.a.ab),this.a.Ja&&(e.temporaryProof=this.a.Ja),this.a.da&&(e.phoneNumber=this.a.da),e},ko.prototype.cb=function(e,t){var n=this.a.b;return Mt(t.verify()).then((function(r){if("string"!==typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i=g(e)?e.session:null,o=g(e)?e.phoneNumber:e;return(i&&i.type==io?i.Fa().then((function(e){return function(e,t){return $s(e,Us,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==oo?i.Fa().then((function(t){return function(e,t){return $s(e,qs,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return $s(e,js,t)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yr(ko,{PROVIDER_ID:"phone"}),Yr(ko,{PHONE_SIGN_IN_METHOD:"phone"}),jo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},jo.prototype.S=function(){return this.h},jo.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Go,Uo=null;function qo(e){var t="unauthorized-domain",n=void 0,r=jn(e);e=r.b,"chrome-extension"==(r=r.f)?n=Ue("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Ue("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",T.call(this,t,n)}function Wo(e,t,n){T.call(this,e,n),(e=t||{}).Gb&&Kr(this,"email",e.Gb),e.da&&Kr(this,"phoneNumber",e.da),e.credential&&Kr(this,"credential",e.credential),e.Wb&&Kr(this,"tenantId",e.Wb)}function zo(e){if(e.code){var t=e.code||"";0==t.indexOf(C)&&(t=t.substring(C.length));var n={credential:Do(e),Wb:e.tenantId};if(e.email)n.Gb=e.email;else if(e.phoneNumber)n.da=e.phoneNumber;else if(!n.credential)return new T(t,e.message||void 0);return new Wo(t,n,e.message)}return null}function Ho(){}function Ko(e){return e.c||(e.c=e.b())}function Yo(){}function Qo(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Xo(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.oc,this),this.a.onerror=w(this.Pb,this),this.a.onprogress=w(this.pc,this),this.a.ontimeout=w(this.tc,this)}function Zo(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function $o(e,t,n){this.reset(e,t,n,void 0,void 0)}S(qo,T),S(Wo,T),Wo.prototype.v=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.v();return t&&Ae(e,t),e},Wo.prototype.toJSON=function(){return this.v()},Ho.prototype.c=null,S(Yo,Ho),Yo.prototype.a=function(){var e=Qo(this);return e?new ActiveXObject(e):new XMLHttpRequest},Yo.prototype.b=function(){var e={};return Qo(this)&&(e[0]=!0,e[1]=!0),e},Go=new Yo,S(Xo,Ho),Xo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},Xo.prototype.b=function(){return{}},(t=Jo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},t.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Zo(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Zo(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Zo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},$o.prototype.a=null;function ea(e){this.f=e,this.b=this.c=this.a=null}function ta(e,t){this.name=e,this.value=t}$o.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||x(),delete this.a},ta.prototype.toString=function(){return this.name};var na=new ta("SEVERE",1e3),ra=new ta("WARNING",900),ia=new ta("CONFIG",700),oa=new ta("FINE",500);ea.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(D("Root logger has no level set."),null)}(this).value)for(m(t)&&(t=t()),e=new $o(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var aa,sa={},ua=null;function la(e){var t;if(ua||(ua=new ea(""),sa[""]=ua,ua.c=ia),!(t=sa[e])){t=new ea(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=la(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,sa[e]=t}return t}function ca(e,t){e&&e.log(oa,t,void 0)}function ha(e){this.f=e}function fa(e){bn.call(this),this.s=e,this.readyState=da,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=la("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}S(ha,Ho),ha.prototype.a=function(){return new fa(this.f)},ha.prototype.b=(aa={},function(){return aa}),S(fa,bn);var da=0;function pa(e){e.c.read().then(e.nc.bind(e)).catch(e.Sa.bind(e))}function ma(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,ga(e)}function ga(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Aa(e){bn.call(this),this.headers=new Ln,this.D=e||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=va,this.w=this.R=!1}(t=fa.prototype).open=function(e,t){if(this.readyState!=da)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,ga(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.s.fetch(new Request(this.g,t)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ma(this,!1)),this.readyState=da},t.sc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,ga(this)),this.a&&(this.readyState=3,ga(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):"undefined"!==typeof l.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,pa(this)):e.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?ma(this,!0):ga(this),3==this.readyState&&pa(this)}},t.rc=function(e){this.a&&(this.response=this.responseText=e,ma(this,!0))},t.qc=function(e){this.a&&(this.response=e,ma(this,!0))},t.Sa=function(e){var t=this.h;t&&t.log(ra,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&ma(this,!0)},t.setRequestHeader=function(e,t){this.i.append(e,t)},t.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(ra,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(ra,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},S(Aa,bn);var va="";Aa.prototype.b=la("goog.net.XhrIo");var ya=/^https?$/i,ba=["POST","PUT"];function _a(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.N=!1,e.c=!0,e.a=e.D?e.D.a():Go.a(),e.B=e.D?Ko(e.D):Ko(Go),e.a.onreadystatechange=w(e.Sb,e);try{ca(e.b,Ra(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(a){return ca(e.b,Ra(e,"Error opening Xhr: "+a.message)),void Ea(e,a)}t=r||"";var o=new Ln(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"===typeof e)W(e,t,void 0);else for(var n=Mn(e),r=Tn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=wa,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(o.X()),r=l.FormData&&t instanceof l.FormData,!Y(ba,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{Ma(e),0<e.g&&(e.w=function(e){return Ke&&it(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(e.a),ca(e.b,Ra(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.w)),e.w?(e.a.timeout=e.g,e.a.ontimeout=w(e.Ka,e)):e.s=xn(e.Ka,e.g,e)),ca(e.b,Ra(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(a){ca(e.b,Ra(e,"Send error: "+a.message)),Ea(e,a)}}function wa(e){return"content-type"==e.toLowerCase()}function Ea(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,xa(e),Ta(e)}function xa(e){e.N||(e.N=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Sa(e){if(e.c&&"undefined"!=typeof u)if(e.B[1]&&4==La(e)&&2==Ca(e))ca(e.b,Ra(e,"Local request error detected and ignored"));else if(e.i&&4==La(e))xn(e.Sb,0,e);else if(e.dispatchEvent("readystatechange"),4==La(e)){ca(e.b,Ra(e,"Request complete")),e.c=!1;try{var t,n=Ca(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(On)[1]||null;if(!o&&l.self&&l.self.location){var a=l.self.location.protocol;o=a.substr(0,a.length-1)}i=!ya.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<La(e)?e.a.statusText:""}catch(c){ca(e.b,"Can not get status: "+c.message),s=""}e.h=s+" ["+Ca(e)+"]",xa(e)}}finally{Ta(e)}}}function Ta(e,t){if(e.a){Ma(e);var n=e.a,r=e.B[0]?f:null;e.a=null,e.B=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(na,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Ma(e){e.a&&e.w&&(e.a.ontimeout=null),e.s&&(l.clearTimeout(e.s),e.s=null)}function La(e){return e.a?e.a.readyState:0}function Ca(e){try{return 2<La(e)?e.a.status:-1}catch(t){return-1}}function Ra(e,t){return t+" ["+e.P+" "+e.l+" "+Ca(e)+"]"}function Oa(e){var t=Ua;this.g=[],this.w=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Ia(e,t,n){e.a=!0,e.c=n,e.f=!t,Da(e)}function Pa(e){if(e.a){if(!e.u)throw new Fa(e);e.u=!1}}function ka(e,t,n,r){e.g.push([t,n,r]),e.a&&Da(e)}function Na(e){return K(e.g,(function(e){return m(e[1])}))}function Da(e){if(e.h&&e.a&&Na(e)){var t=e.h,n=Va[t];n&&(l.clearTimeout(n.a),delete Va[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.s,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(P(t)||"function"===typeof l.Promise&&t instanceof l.Promise)&&(r=!0,e.i=!0)}catch(u){t=u,e.f=!0,Na(e)||(n=!0)}}e.c=t,r&&(s=w(e.m,e,!0),r=w(e.m,e,!1),t instanceof Oa?(ka(t,s,r),t.B=!0):t.then(s,r)),n&&(t=new Ba(t),Va[t.a]=t,e.h=t.a)}function Fa(){k.call(this)}function ja(){k.call(this)}function Ba(e){this.a=l.setTimeout(w(this.c,this),0),this.b=e}(t=Aa.prototype).Ka=function(){"undefined"!=typeof u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ca(this.b,Ra(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ca(this.b,Ra(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ta(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ta(this,!0)),Aa.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?Sa(this):this.Hc())},t.Hc=function(){Sa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case va:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(na,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ca(this.b,"Can not get response: "+t.message),null}},Oa.prototype.cancel=function(e){if(this.a)this.c instanceof Oa&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(e=new ja(this),Pa(this),Ia(this,!1,e))}},Oa.prototype.m=function(e,t){this.i=!1,Ia(this,e,t)},Oa.prototype.then=function(e,t,n){var r,i,o=new bt((function(e,t){r=e,i=t}));return ka(this,r,(function(e){e instanceof ja?o.cancel():i(e)})),o.then(e,t,n)},Oa.prototype.$goog_Thenable=!0,S(Fa,k),Fa.prototype.message="Deferred has already fired",Fa.prototype.name="AlreadyCalledError",S(ja,k),ja.prototype.message="Deferred was canceled",ja.prototype.name="CanceledError",Ba.prototype.c=function(){throw delete Va[this.a],this.b};var Va={};function Ga(e){var t={},n=t.document||document,r=Se(e).toString(),i=ft(document,"SCRIPT"),o={Tb:i,Ka:void 0},a=new Oa(o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){qa(i,!0);var e=new Ha(za,"Timeout reached for loading script "+r);Pa(a),Ia(a,!1,e)}),u),o.Ka=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(qa(i,t.ud||!1,s),Pa(a),Ia(a,!0,null))},i.onerror=function(){qa(i,!0,s);var e=new Ha(Wa,"Error while loading script "+r);Pa(a),Ia(a,!1,e)},Ae(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),st(i,o),function(e,t){ve(e,"HTMLScriptElement"),e.src=Se(t),null===h&&(h=(t=(t=l.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""),(t=h)&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function Ua(){if(this&&this.Tb){var e=this.Tb;e&&"SCRIPT"==e.tagName&&qa(e,!0,this.Ka)}}function qa(e,t,n){null!=n&&l.clearTimeout(n),e.onload=f,e.onerror=f,e.onreadystatechange=f,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Wa=0,za=1;function Ha(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),k.call(this,n),this.code=e}function Ka(e){this.f=e}function Ya(e,t,n){if(this.c=e,e=t||{},this.u=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||Ja,this.g=me(e.secureTokenHeaders||Za),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=e.firebaseTimeout||$a,this.a=me(e.firebaseHeaders||es),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==yr(),!(n=l.XMLHttpRequest||n&&r.INTERNAL.node&&r.INTERNAL.node.XMLHttpRequest)&&!vr())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,vr()?this.f=new ha(self):br()?this.f=new Ka(n):this.f=new Xo,this.b=null}S(Ha,k),S(Ka,Ho),Ka.prototype.a=function(){return new this.f},Ka.prototype.b=function(){return{}};var Qa,Xa="idToken",Ja=new Br(3e4,6e4),Za={"Content-Type":"application/x-www-form-urlencoded"},$a=new Br(3e4,6e4),es={"Content-Type":"application/json"};function ts(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function ns(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function rs(e,t,n,r,i,o,a){(function(){var e=Tr();return!((e=Er(e)!=wr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Ke||!nt||9<nt)})()||vr()?e=w(e.w,e):(Qa||(Qa=new bt((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{l[os]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){ka(e,null,t,void 0)}(Ga(Te(is,{onload:os})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=w(e.s,e)),e(t,n,r,i,o,a)}Ya.prototype.S=function(){return this.b},Ya.prototype.w=function(e,t,n,r,i,o){if(vr()&&("undefined"===typeof l.fetch||"undefined"===typeof l.Headers||"undefined"===typeof l.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Aa(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}_n(a,"complete",(function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ca(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),wn(a,"ready",(function(){s&&clearTimeout(s),Wt(this)})),wn(a,"timeout",(function(){s&&clearTimeout(s),Wt(this),t&&t(null)})),_a(a,e,n,r,i)};var is=new ye(we,"https://apis.google.com/js/client.js?onload=%{onload}"),os="__fcb"+Math.floor(1e6*Math.random()).toString();function as(e,t,n,r,i,o,a){var s=jn(t+n);Dn(s,"key",e.c),a&&Dn(s,"cb",x().toString());var u="GET"==r;if(u)for(var l in i)i.hasOwnProperty(l)&&Dn(s,l,i[l]);return new bt((function(t,n){rs(e,s.toString(),(function(e){e?e.error?n(tu(e,o||{})):t(e):n(new T("network-request-failed"))}),r,u?void 0:nr(kr(i)),e.a,e.i.get())}))}function ss(e){if("string"!==typeof(e=e.email)||!pr.test(e))throw new T("invalid-email")}function us(e){"email"in e&&ss(e)}function ls(e){if(!e[Xa]){if(e.mfaPendingCredential)throw new T("multi-factor-auth-required",null,me(e));throw new T("internal-error")}}function cs(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new T("internal-error")}else{if(!e.sessionInfo)throw new T("missing-verification-id");if(!e.code)throw new T("missing-verification-code")}}Ya.prototype.s=function(e,t,n,r,i){var o=this;Qa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Ya.prototype.vb=function(){return $s(this,Gs,{})},Ya.prototype.xb=function(e,t){return $s(this,Bs,{idToken:e,email:t})},Ya.prototype.yb=function(e,t){return $s(this,Vs,{idToken:e,password:t})};var hs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fs(e){if(!e.phoneVerificationInfo)throw new T("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ds(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new T("internal-error")}function ps(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(Zn(e=new Yn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function ms(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=zo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=zo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=zo(e)):e.errorMessage&&(t=eu(e.errorMessage)),t)throw t;ls(e)}function gs(e,t){return t.returnIdpCredential=!0,$s(e,Ws,t)}function As(e,t){return t.returnIdpCredential=!0,$s(e,Hs,t)}function vs(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,$s(e,zs,t)}function ys(e){if(!e.oobCode)throw new T("invalid-action-code")}(t=Ya.prototype).zb=function(e,t){var n={idToken:e},r=[];return de(hs,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),$s(this,Bs,n)},t.rb=function(e,t){return Ae(e={requestType:"PASSWORD_RESET",email:e},t),$s(this,ks,e)},t.sb=function(e,t){return Ae(e={requestType:"EMAIL_SIGNIN",email:e},t),$s(this,Os,e)},t.qb=function(e,t){return Ae(e={requestType:"VERIFY_EMAIL",idToken:e},t),$s(this,Is,e)},t.Ab=function(e,t,n){return Ae(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),$s(this,Ps,e)},t.cb=function(e){return $s(this,Qs,e)},t.jb=function(e,t){return $s(this,Fs,{oobCode:e,newPassword:t})},t.Pa=function(e){return $s(this,_s,{oobCode:e})},t.fb=function(e){return $s(this,bs,{oobCode:e})};var bs={endpoint:"setAccountInfo",A:ys,Y:"email",C:!0},_s={endpoint:"resetPassword",A:ys,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new T("internal-error")},C:!0},ws={endpoint:"signupNewUser",A:function(e){if(ss(e),!e.password)throw new T("weak-password")},G:ls,U:!0,C:!0},Es={endpoint:"createAuthUri",C:!0},xs={endpoint:"deleteAccount",M:["idToken"]},Ss={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(e){if("array"!=d(e.deleteProvider))throw new T("internal-error")}},Ts={endpoint:"emailLinkSignin",M:["email","oobCode"],A:ss,G:ls,U:!0,C:!0},Ms={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:ss,G:ls,U:!0},Ls={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:fs,G:ls,C:!0,La:!0},Cs={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:fs,G:ls,C:!0,La:!0},Rs={endpoint:"getAccountInfo"},Os={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new T("internal-error");ss(e)},Y:"email",C:!0},Is={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new T("internal-error")},Y:"email",C:!0},Ps={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new T("internal-error")},Y:"email",C:!0},ks={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new T("internal-error");ss(e)},Y:"email",C:!0},Ns={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Ds={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new T("internal-error")}},Fs={endpoint:"resetPassword",A:ys,Y:"email",C:!0},js={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Bs={endpoint:"setAccountInfo",M:["idToken"],A:us,U:!0},Vs={endpoint:"setAccountInfo",M:["idToken"],A:function(e){if(us(e),!e.password)throw new T("weak-password")},G:ls,U:!0},Gs={endpoint:"signupNewUser",G:ls,U:!0,C:!0},Us={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new T("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new T("internal-error")},C:!0,La:!0},qs={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new T("internal-error")},C:!0,La:!0},Ws={endpoint:"verifyAssertion",A:ds,Wa:ps,G:ms,U:!0,C:!0},zs={endpoint:"verifyAssertion",A:ds,Wa:ps,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new T("user-not-found");if(e.errorMessage)throw eu(e.errorMessage);ls(e)},U:!0,C:!0},Hs={endpoint:"verifyAssertion",A:function(e){if(ds(e),!e.idToken)throw new T("internal-error")},Wa:ps,G:ms,U:!0},Ks={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new T("invalid-custom-token")},G:ls,U:!0,C:!0},Ys={endpoint:"verifyPassword",A:function(e){if(ss(e),!e.password)throw new T("wrong-password")},G:ls,U:!0,C:!0},Qs={endpoint:"verifyPhoneNumber",A:cs,G:ls,C:!0},Xs={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new T("internal-error");cs(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",zo(e);ls(e)}},Js={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:cs,G:ls,C:!0},Zs={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[Xa]^!!e.refreshToken)throw new T("internal-error")},C:!0,La:!0};function $s(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,t.M))return Lt(new T("internal-error"));var r,i=!!t.La,o=t.Rb||"POST";return Mt(n).then(t.A).then((function(){return t.U&&(n.returnSecureToken=!0),t.C&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),as(e,i?e.l:e.h,t.endpoint,o,n,t.Eb,t.hb||!1)})).then((function(e){return r=e,t.Wa?t.Wa(n,r):r})).then(t.G).then((function(){if(!t.Y)return r;if(!(t.Y in r))throw new T("internal-error");return r[t.Y]}))}function eu(e){return tu({error:{errors:[{message:e}],code:400,message:e}})}function tu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",Ae(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],t);return!t&&e&&(t=Pr(e)),new T("internal-error",t)}function nu(e){this.b=e,this.a=null,this.nb=function(e){return(au||(au=new bt((function(e,t){function n(){jr(),Mr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){jr(),t(Error("Network Error"))},timeout:iu.get()})}if(Mr("gapi.iframes.Iframe"))e();else if(Mr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){Mr("gapi.load")?n():t(Error("Network Error"))},Mt(Ga(r=Te(ru,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw au=null,e})))).then((function(){return new bt((function(t,n){Mr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ou.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var ru=new ye(we,"https://apis.google.com/js/api.js?onload=%{onload}"),iu=new Br(3e4,6e4),ou=new Br(5e3,15e3),au=null;function su(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Bn(this.i,"/__/auth/iframe"),Dn(this.a,"apiKey",this.g),Dn(this.a,"appName",this.h),this.b=null,this.c=[]}function uu(e,t,n,r,i){this.s=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function lu(e){try{return r.app(e).auth().Ea()}catch(t){return[]}}function cu(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function hu(e){var t=ur();return function(e){return $s(e,Ns,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=jn(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=jn(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:dr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new qo(ur())}))}function fu(e){return e.l||(e.l=mr().then((function(){if(!e.s){var t=e.c,n=e.h,r=lu(e.b),i=new su(e.u,e.f,e.b);i.f=t,i.b=n,i.c=Z(r||[]),e.s=i.toString()}e.i=new nu(e.s),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.nb.then((function(){e.a.register("authEvent",t,Mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.i,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Bo(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Mt(n)}return n.status="ERROR",Mt(n)}))}(e)}))),e.l}function du(e){return e.m||(e.w=e.c?Sr(e.c,lu(e.b)):null,e.m=new Ya(e.f,I(e.h),e.w)),e.m}function pu(e,t,n,r,i,o,a,s,u,l,c){return(e=new uu(e,t,n,r,i)).l=o,e.g=a,e.i=s,e.b=me(u||null),e.f=l,e.ub(c).toString()}function mu(e){if(this.a=e||r.INTERNAL.reactNative&&r.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function gu(e){this.b=e,this.a={},this.f=w(this.c,this)}su.prototype.toString=function(){return this.f?Dn(this.a,"v",this.f):Jn(this.a.a,"v"),this.b?Dn(this.a,"eid",this.b):Jn(this.a.a,"eid"),this.c.length?Dn(this.a,"fw",this.c.join(",")):Jn(this.a.a,"fw"),this.a.toString()},uu.prototype.ub=function(e){return this.h=e,this},uu.prototype.toString=function(){var e=Bn(this.s,"/__/auth/handler");if(Dn(e,"apiKey",this.m),Dn(e,"appName",this.c),Dn(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var n=r.app(this.c).auth().ja()}catch(u){n=null}for(var i in t.kb=n,Dn(e,"providerId",this.a.providerId),n=kr((t=this.a).Fb))n[i]=n[i].toString();i=t.Oc,n=me(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}t.lb&&t.kb&&!n[t.lb]&&(n[t.lb]=t.kb),pe(n)||Dn(e,"customParameters",Pr(n))}if("function"===typeof this.a.Nb&&((t=this.a.Nb()).length&&Dn(e,"scopes",t.join(","))),this.l?Dn(e,"redirectUrl",this.l):Jn(e.a,"redirectUrl"),this.g?Dn(e,"eventId",this.g):Jn(e.a,"eventId"),this.i?Dn(e,"v",this.i):Jn(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Fn(e,s)&&Dn(e,s,this.b[s]);return this.h?Dn(e,"tid",this.h):Jn(e.a,"tid"),this.f?Dn(e,"eid",this.f):Jn(e.a,"eid"),(s=lu(this.c)).length&&Dn(e,"fw",s.join(",")),e.toString()},(t=cu.prototype).Lb=function(e,t,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,a=!1;return this.ka().then((function(){(function(e){var t={type:"webStorageSupport"};return fu(e).then((function(){return function(e,t){return e.nb.then((function(){return new bt((function(n){e.a.send(t.type,t,n,Mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.i,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&hr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(e){return new bt((function(t){return function n(){Sn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return Sn(n).then((function(){t(r)}))}))},t.Ub=function(){var e=Tr();return!Ir(e)&&!Fr(e)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,a,s){if(!e)return Lt(new T("popup-blocked"));if(a&&!Ir())return this.ka().o((function(t){hr(e),i(t)})),r(),Mt();this.a||(this.a=hu(du(this)));var u=this;return this.a.then((function(){var t=u.ka().o((function(t){throw hr(e),i(t),t}));return r(),t})).then((function(){(Fo(n),a)||lr(pu(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,s),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},t.Kb=function(e,t,n,r){this.a||(this.a=hu(du(this)));var i=this;return this.a.then((function(){Fo(t),lr(pu(i.u,i.f,i.b,e,t,ur(),n,i.c,void 0,i.h,r))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},t.ka=function(){var e=this;return fu(this).then((function(){return e.i.nb})).o((function(){throw e.a=null,new T("network-request-failed")}))},t.Xb=function(){return!0},t.Ca=function(e){this.g.push(e)},t.Qa=function(e){X(this.g,(function(t){return t==e}))},(t=mu.prototype).get=function(e){return Mt(this.a.getItem(e)).then((function(e){return e&&Nr(e)}))},t.set=function(e,t){return Mt(this.a.setItem(e,Pr(t)))},t.T=function(e){return Mt(this.a.removeItem(e))},t.ba=function(){},t.ha=function(){};var Au,vu=[];function yu(e,t,n){pe(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function bu(e){this.a=e}function _u(e){this.c=e,this.b=!1,this.a=[]}function wu(e,t,n,r){var i,o,a,s,u=n||{},l=null;if(e.b)return Lt(Error("connection_unavailable"));var c=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new bt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),c),l={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(l),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Eu(e,l),t})).o((function(t){throw Eu(e,l),t}))}function Eu(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),X(e.a,(function(e){return e==t}))}}function xu(){if(!Mu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var e=this;vr()&&self?(this.l=function(){var e=vr()?self:null;if(W(vu,(function(n){n.b==e&&(t=n)})),!t){var t=new gu(e);vu.push(t)}return t}(),yu(this.l,"keyChanged",(function(t,n){return Iu(e).then((function(t){return 0<t.length&&W(e.a,(function(e){e(t)})),{keyProcessed:Y(t,n.key)}}))})),yu(this.l,"ping",(function(){return Mt(["keyChanged"])}))):function(){var e=l.navigator;return e&&e.serviceWorker?Mt().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):Mt(null)}().then((function(t){(e.h=t)&&(e.g=new _u(new bu(t)),wu(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&Y(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Su(e){return new bt((function(t,n){var r=e.u.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new bt((function(t,n){var r=e.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Su(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Tu(e){return e.m||(e.m=Su(e)),e.m}function Mu(){try{return!!l.indexedDB}catch(aa){return!1}}function Lu(e){return e.objectStore("firebaseLocalStorage")}function Cu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Ru(e){return new bt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Ou(e,t){return e.g&&e.h&&function(){var e=l.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?wu(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):Mt()}function Iu(e){return Tu(e).then((function(e){var t=Lu(Cu(e,!1));return t.getAll?Ru(t.getAll()):new bt((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function Pu(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function ku(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Mt().then((function(){if(Mu()){var e=Dr(),r="__sak"+e;return Au||(Au=new xu),(n=Au).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ba((function(e){W(t.a,(function(t){t(e)}))})),e}))}function Nu(){this.a={},this.type="inMemory"}function Du(){if(!function(){var e="Node"==yr();if(!(e=Fu()||e&&r.INTERNAL.node&&r.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==yr())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Fu()||r.INTERNAL.node.localStorage,this.type="localStorage"}function Fu(){try{var e=l.localStorage,t=Dr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function ju(){this.type="nullStorage"}function Bu(){if(!function(){var e="Node"==yr();if(!(e=Vu()||e&&r.INTERNAL.node&&r.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==yr())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Vu()||r.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Vu(){try{var e=l.sessionStorage,t=Dr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Gu(){var e={};e.Browser=Wu,e.Node=zu,e.ReactNative=Hu,e.Worker=Ku,this.a=e[yr()]}gu.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];W(r,(function(t){i.push(Mt().then((function(){return t(e.origin,e.data.data)})))})),Rt(i).then((function(r){var i=[];W(r,(function(e){i.push({fulfilled:e.Mb,value:e.value,reason:e.reason?e.reason.message:void 0})})),W(i,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},bu.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},_u.prototype.close=function(){for(;0<this.a.length;)Eu(this,this.a[0]);this.b=!0},(t=xu.prototype).set=function(e,t){var n,r=!1,i=this;return Tu(this).then((function(t){return Ru((t=Lu(Cu(n=t,!0))).get(e))})).then((function(o){var a=Lu(Cu(n,!0));return o?(o.value=t,Ru(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,Ru(a.add(o)))})).then((function(){return i.c[e]=t,Ou(i,e)})).ma((function(){r&&i.b--}))},t.get=function(e){return Tu(this).then((function(t){return Ru(Lu(Cu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},t.T=function(e){var t=!1,n=this;return Tu(this).then((function(r){return t=!0,n.b++,Ru(Lu(Cu(r,!0)).delete(e))})).then((function(){return delete n.c[e],Ou(n,e)})).ma((function(){t&&n.b--}))},t.ba=function(e){0==this.a.length&&function(e){Pu(e),function t(){e.f=setTimeout((function(){e.i=Iu(e).then((function(t){0<t.length&&W(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()}(this),this.a.push(e)},t.ha=function(e){X(this.a,(function(t){return t==e})),0==this.a.length&&Pu(this)},(t=ku.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},t.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},t.T=function(e){return this.b.then((function(t){return t.T(e)}))},t.ba=function(e){this.a.push(e)},t.ha=function(e){X(this.a,(function(t){return t==e}))},(t=Nu.prototype).get=function(e){return Mt(this.a[e])},t.set=function(e,t){return this.a[e]=t,Mt()},t.T=function(e){return delete this.a[e],Mt()},t.ba=function(){},t.ha=function(){},(t=Du.prototype).get=function(e){var t=this;return Mt().then((function(){return Nr(t.a.getItem(e))}))},t.set=function(e,t){var n=this;return Mt().then((function(){var r=Pr(t);null===r?n.T(e):n.a.setItem(e,r)}))},t.T=function(e){var t=this;return Mt().then((function(){t.a.removeItem(e)}))},t.ba=function(e){l.window&&un(l.window,"storage",e)},t.ha=function(e){l.window&&hn(l.window,"storage",e)},(t=ju.prototype).get=function(){return Mt(null)},t.set=function(){return Mt()},t.T=function(){return Mt()},t.ba=function(){},t.ha=function(){},(t=Bu.prototype).get=function(e){var t=this;return Mt().then((function(){return Nr(t.a.getItem(e))}))},t.set=function(e,t){var n=this;return Mt().then((function(){var r=Pr(t);null===r?n.T(e):n.a.setItem(e,r)}))},t.T=function(e){var t=this;return Mt().then((function(){t.a.removeItem(e)}))},t.ba=function(){},t.ha=function(){};var Uu,qu,Wu={F:Du,$a:Bu},zu={F:Du,$a:Bu},Hu={F:mu,$a:ju},Ku={F:Du,$a:ju},Yu={od:"local",NONE:"none",qd:"session"};function Qu(){var e=!(Fr(Tr())||!Ar()),t=Ir(),n=Lr();this.m=e,this.h=t,this.l=n,this.a={},Uu||(Uu=new Gu),e=Uu;try{this.g=!sr()&&Ur()||!l.indexedDB?new e.a.F:new ku(vr()?new Nu:new e.a.F)}catch(r){this.g=new Nu,this.h=!0}try{this.i=new e.a.$a}catch(r){this.i=new Nu}this.u=new Nu,this.f=w(this.Vb,this),this.b={}}function Xu(){return qu||(qu=new Qu),qu}function Ju(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function Zu(e,t){return"firebase:"+e.name+(t?":"+t:"")}function $u(e,t,n){return n=Zu(t,n),"local"==t.F&&(e.b[n]=null),Ju(e,t.F).T(n)}function el(e){e.c&&(clearInterval(e.c),e.c=null)}function tl(e){this.a=e,this.b=Xu()}(t=Qu.prototype).get=function(e,t){return Ju(this,e.F).get(Zu(e,t))},t.set=function(e,t,n){var r=Zu(e,n),i=this,o=Ju(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},t.addListener=function(e,t,n){e=Zu(e,t),this.l&&(this.b[e]=l.localStorage.getItem(e)),pe(this.a)&&(Ju(this,"local").ba(this.f),this.h||(sr()||!Ur())&&l.indexedDB||!this.l||function(e){el(e),e.c=setInterval((function(){for(var t in e.a){var n=l.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Xt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Vb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},t.removeListener=function(e,t,n){e=Zu(e,t),this.a[e]&&(X(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),pe(this.a)&&(Ju(this,"local").ha(this.f),el(this))},t.Vb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?Ju(this,"local").ha(this.f):el(this),this.m)if(n=l.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?l.localStorage.setItem(t,r):l.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===l.localStorage.getItem(t)||(o.b[t]=l.localStorage.getItem(t),o.ib(t))},Ke&&nt&&10==nt&&l.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else W(e,w(this.ib,this))},t.ib=function(e){this.a[e]&&W(this.a[e],(function(e){e()}))};var nl,rl={name:"authEvent",F:"local"};function il(){this.a=Xu()}function ol(e,t){this.b=al,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===nl&&(nl=l.Int32Array?new Int32Array(dl):dl),this.reset()}S(ol,(function(){this.b=-1}));for(var al=64,sl=al-1,ul=[],ll=0;ll<sl;ll++)ul[ll]=0;var cl=J(128,ul);function hl(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],l=0|e.a[4],c=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((a=(a=l&c^~l&h)+(0|nl[t])|0)+(0|n[t])|0)|0,o=h,h=c,c=l,l=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+l|0,e.a[5]=e.a[5]+c|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function fl(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"===typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(hl(e),i=0);else{if(!p(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(hl(e),i=0)}}e.c=i,e.g+=n}ol.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Z(this.h)};var dl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function pl(){ol.call(this,8,ml)}S(pl,ol);var ml=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function gl(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.s=i||null,this.h=t+":"+n,this.w=new il,this.g=new tl(this.h),this.f=null,this.b=[],this.a=this.c=null}function Al(e){return new T("invalid-cordova-configuration",e)}function vl(e){var t=new pl;fl(t,e),e=[];var n=8*t.g;56>t.c?fl(t,cl,56-t.c):fl(t,cl,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(hl(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return H(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function yl(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function bl(e){return e.f||(e.f=e.ka().then((function(){return new bt((function(t){e.Ca((function n(r){return t(r),e.Qa(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),_l(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=no(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Nr(Fn(o=jn(i),"firebaseError")||null))?M(o):null)?new jo(r.c,r.b,null,null,o,null,r.S()):new jo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}yl(e,i)}))}var n=new jo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Sn(500).then((function(){return _l(e).then((function(){r||yl(e,n)}))})),o=l.handleOpenURL;l.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Mr("BuildInfo.packageName",l).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(n){console.error(n)}},Uo||(Uo=new Vo),function(e){var t=Uo;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=Mr("universalLinks.subscribe",l))&&e(null,t.b))}(t)}(e)}))}))),e.f}function _l(e){var t=null;return function(e){return e.b.get(rl,e.a).then((function(e){return Bo(e)}))}(e.g).then((function(n){return t=n,$u((n=e.g).b,rl,n.a)})).then((function(){return t}))}function wl(e){this.a=e,this.b=Xu()}(t=gl.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(gr(void 0)?mr().then((function(){return new bt((function(e,t){var n=l.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Lt(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Mr("universalLinks.subscribe",l))throw Al("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Mr("BuildInfo.packageName",l))throw Al("cordova-plugin-buildinfo is not installed");if("function"!==typeof Mr("cordova.plugins.browsertab.openUrl",l))throw Al("cordova-plugin-browsertab is not installed");if("function"!==typeof Mr("cordova.InAppBrowser.open",l))throw Al("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Lb=function(e,t){return t(new T("operation-not-supported-in-this-environment")),Mt()},t.Jb=function(){return Lt(new T("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(e,t,n,r){if(this.c)return Lt(new T("redirect-operation-pending"));var i=this,o=l.document,a=null,s=null,u=null,c=null;return this.c=Mt().then((function(){return Fo(t),bl(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new jo(t,r,null,o,new T("no-auth-event"),null,i),s=Mr("BuildInfo.packageName",l);if("string"!==typeof s)throw new T("invalid-cordova-configuration");var u=Mr("BuildInfo.displayName",l),c={};if(Tr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!Tr().toLowerCase().match(/android/))return Lt(new T("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=vl(o),c.sessionId=o;var h=pu(e.u,e.i,e.l,t,n,null,r,e.m,c,e.s,i);return e.ka().then((function(){var t=e.h;return e.w.a.set(rl,a.v(),t)})).then((function(){var t=Mr("cordova.plugins.browsertab.isAvailable",l);if("function"!==typeof t)throw new T("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!==typeof(n=Mr("cordova.plugins.browsertab.openUrl",l)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!==typeof(n=Mr("cordova.InAppBrowser.open",l)))throw new T("invalid-cordova-configuration");t=Tr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new bt((function(e,t){s=function(){var t=Mr("cordova.plugins.browsertab.close",l);return e(),"function"===typeof t&&t(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(s),u=function(){a||(a=Sn(2e3).then((function(){t(new T("redirect-cancelled-by-user"))})))},c=function(){Vr()&&u()},o.addEventListener("resume",u,!1),Tr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(e){return _l(i).then((function(){throw e}))}))})).ma((function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Qa(s),i.c=null}))},t.Ca=function(e){this.b.push(e),bl(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new jo("unknown",null,null,null,new T("no-auth-event")),e(t))}))},t.Qa=function(e){X(this.b,(function(t){return t==e}))};var El={name:"pendingRedirect",F:"session"};function xl(e){return $u(e.b,El,e.a)}function Sl(e,t,n){this.i={},this.w=0,this.D=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Bl,this.B=new Wl,this.g=new wl(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=Tl(this.D,this.u,this.m,L)}function Tl(e,t,n,i){var o=r.SDK_VERSION||null;return gr()?new gl(e,t,n,o,i):new cu(e,t,n,o,i)}function Ml(e){e.f||(e.f=!0,e.a.Ca(e.l));var t=e.a;return e.a.ka().o((function(n){throw e.a==t&&e.reset(),n}))}function Ll(e){e.a.Ub()&&Ml(e).o((function(t){var n=new jo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));kl(t)&&e.s(n)})),e.a.Qb()||Vl(e.b)}function Cl(e,t){Y(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(El,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?xl(e.g).then((function(){Ml(e).o((function(t){var n=new jo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));kl(t)&&e.s(n)}))})):Ll(e)})).o((function(){Ll(e)}))}function Rl(e,t){X(e.h,(function(e){return e==t}))}Sl.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=Tl(this.D,this.u,this.m),this.i={}},Sl.prototype.s=function(e){if(!e)throw new T("invalid-auth-event");if(6e5<=x()-this.w&&(this.i={},this.w=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.w=x())),t=!0;break}}return Vl(this.b),t};var Ol=new Br(2e3,1e4),Il=new Br(3e4,6e4);function Pl(e,t,n,r,i,o,a){return e.a.Jb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ca(e.l))}),(function(){e.reset()}),i,o,a)}function kl(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Nl(e,t,n,r,i){var o;return function(e){return e.b.set(El,"pending",e.a)}(e.g).then((function(){return e.a.Kb(t,n,r,i).o((function(t){if(kl(t))throw new T("operation-not-supported-in-this-environment");return o=t,xl(e.g).then((function(){throw o}))})).then((function(){return e.a.Xb()?new bt((function(){})):xl(e.g).then((function(){return e.pa()})).then((function(){})).o((function(){}))}))}))}function Dl(e,t,n,r,i){return e.a.Lb(r,(function(e){t.la(n,null,e,i)}),Ol.get())}Sl.prototype.pa=function(){return this.b.pa()};var Fl={};function jl(e,t,n){var r=t+":"+n;return Fl[r]||(Fl[r]=new Sl(e,t,n)),Fl[r]}function Bl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Vl(e){e.g||(e.g=!0,ql(e,!1,null,null))}function Gl(e){e.g&&!e.i&&ql(e,!1,null,null)}function Ul(e,t){if(e.b=function(){return Mt(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function ql(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Lt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):Ul(e,n):Ul(e,{user:null}),e.f=[],e.c=[]}function Wl(){}function zl(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(e){this.Bb=e},enumerable:!1})}function Hl(e,t){this.a=t,Kr(this,"verificationId",e)}function Kl(e,t,n,r){return new ko(e).cb(t,n).then((function(e){return new Hl(e,r)}))}function Yl(e){var t=Ui(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:e,expirationTime:Gr(1e3*t.exp),authTime:Gr(1e3*t.auth_time),issuedAtTime:Gr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function Ql(e,t,n){var r=t&&t[Jl];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=me(t),this.g=n,this.c=new ro(null,r),this.b=[];var i=this;W(t[Xl]||[],(function(e){(e=Zr(e))&&i.b.push(e)})),Kr(this,"auth",this.a),Kr(this,"session",this.c),Kr(this,"hints",this.b)}Bl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Bl.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(ql(this,!0,null,e.a),Mt()):t.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.S(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){ql(e,s,t,null)})).o((function(t){ql(e,s,null,t)}))}(this,e,t):Lt(new T("invalid-auth-event")):(ql(this,!1,null,null),Mt())}else Lt(new T("invalid-auth-event"))},Bl.prototype.pa=function(){var e=this;return new bt((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new T("timeout");e.a&&e.a.cancel(),e.a=Sn(Il.get()).then((function(){e.b||(e.g=!0,ql(e,!0,null,t))}))}(e))}))},Wl.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.la(e.c,null,e.a,e.b),Mt()):t.Da(n,r)?function(e,t){var n=e.b,r=e.c;t.Da(r,n)(e.g,e.f,e.S(),e.i).then((function(e){t.la(r,e,null,n)})).o((function(e){t.la(r,null,e,n)}))}(e,t):Lt(new T("invalid-auth-event"))}else Lt(new T("invalid-auth-event"))},Hl.prototype.confirm=function(e){return e=No(this.verificationId,e),this.a(e)};var Xl="mfaInfo",Jl="mfaPendingCredential";function Zl(e,t,n,r){T.call(this,"multi-factor-auth-required",r,t),this.b=new Ql(e,t,n),Kr(this,"resolver",this.b)}function $l(e,t,n){if(e&&g(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new Zl(t,e.serverResponse,n,e.message)}catch(r){}return null}function ec(){}function tc(e){Kr(this,"factorId",e.ea),this.a=e}function nc(e){if(tc.call(this,e),this.a.ea!=ko.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function rc(e,t){for(var n in Qt.call(this,e),t)this[n]=t[n]}function ic(e,t){this.a=e,this.b=[],this.c=w(this.wc,this),un(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&W(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[ti]=e.uid),e.displayName&&(r[$r]=e.displayName),e.enrollmentTime&&(r[ei]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[ni]=e.phoneNumber);try{t=new ri(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),oc(this,n)}function oc(e,t){e.b=t,Kr(e,"enrolledFactors",t)}function ac(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function sc(e){this.c=e,this.b=this.a=null}function uc(e){return e.b&&1e3*e.b.c||0}function lc(e,t){var n=t.refreshToken;e.b=Gi(t[Xa]||""),e.a=n}function cc(e,t){return function(e,t){return new bt((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?rs(e,e.u+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(tu(e)):e.access_token&&e.refresh_token?n(e):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Xn(t).toString(),e.g,e.m.get()):r(new T("internal-error"))}))}(e.c,t).then((function(t){return e.b=Gi(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function hc(e,t){this.a=e||null,this.b=t||null,Yr(this,{lastSignInTime:Gr(t||null),creationTime:Gr(e||null)})}function fc(e,t,n,r,i,o){Yr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function dc(e,t,n){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null,e=r.SDK_VERSION?Sr(r.SDK_VERSION):null,this.a=new Ya(this.l,I(L),e),this.b=new sc(this.a),bc(this,t[Xa]),lc(this.b,t),Kr(this,"refreshToken",this.b.a),Ec(this,n||{}),bn.call(this),this.P=!1,this.s&&Cr()&&(this.i=jl(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(e){return new ac((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=uc(e.b)-x()-3e5;return 0<t?t:0}))}(this),this.Z=w(this.Ma,this);var i=this;this.oa=null,this.za=function(e){i.va(e.g)},this.aa=null,this.W=[],this.ya=function(e){mc(i,e.c)},this.$=null,this.O=new ic(this,n),Kr(this,"multiFactor",this.O)}function pc(e,t){e.aa&&hn(e.aa,"languageCodeChanged",e.za),(e.aa=t)&&un(t,"languageCodeChanged",e.za)}function mc(e,t){e.W=t,ns(e.a,r.SDK_VERSION?Sr(r.SDK_VERSION,e.W):null)}function gc(e,t){e.$&&hn(e.$,"frameworkChanged",e.ya),(e.$=t)&&un(t,"frameworkChanged",e.ya)}function Ac(e){try{return r.app(e.m).auth()}catch(t){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function vc(e){e.D||e.B.b||(e.B.start(),hn(e,"tokenChanged",e.Z),un(e,"tokenChanged",e.Z))}function yc(e){hn(e,"tokenChanged",e.Z),e.B.stop()}function bc(e,t){e.xa=t,Kr(e,"_lat",t)}function _c(e){for(var t=[],n=0;n<e.R.length;n++)t.push(e.R[n](e));return Rt(t).then((function(){return e}))}function wc(e){e.i&&!e.P&&(e.P=!0,Cl(e.i,e))}function Ec(e,t){Yr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new hc(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function xc(){}function Sc(e){return Mt().then((function(){if(e.D)throw new T("app-deleted")}))}function Tc(e){return H(e.providerData,(function(e){return e.providerId}))}function Mc(e,t){t&&(Lc(e,t.providerId),e.providerData.push(t))}function Lc(e,t){X(e.providerData,(function(e){return e.providerId==t}))}function Cc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Kr(e,t,n)}function Rc(e,t){e!=t&&(Yr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Kr(e,"metadata",function(e){return new hc(e.a,e.b)}(t.metadata)):Kr(e,"metadata",new hc),W(t.providerData,(function(t){Mc(e,t)})),function(e,t){e.b=t.b,e.a=t.a}(e.b,t.b),Kr(e,"refreshToken",e.b.a),oc(e.O,t.O.b))}function Oc(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return $s(e.a,Rs,{idToken:t}).then(w(e.Ic,e))}(e,t).then((function(){return n||Cc(e,"isAnonymous",!1),t}))}))}function Ic(e,t){t[Xa]&&e.xa!=t[Xa]&&(lc(e.b,t),e.dispatchEvent(new rc("tokenChanged")),bc(e,t[Xa]),Cc(e,"refreshToken",e.b.a))}function Pc(e,t){return Oc(e).then((function(){if(Y(Tc(e),t))return _c(e).then((function(){throw new T("provider-already-linked")}))}))}function kc(e,t,n){return Qr({user:e,credential:Do(t),additionalUserInfo:t=Ki(t),operationType:n})}function Nc(e,t){return Ic(e,t),e.reload().then((function(){return e}))}function Dc(e,t,n,i,o){if(!Cr())return Lt(new T("operation-not-supported-in-this-environment"));if(e.h&&!o)return Lt(e.h);var a=Hi(n.providerId),s=Dr(e.uid+":::"),u=null;(!Ir()||Ar())&&e.s&&n.isOAuthProvider&&(u=pu(e.s,e.l,e.m,t,n,null,s,r.SDK_VERSION||null,null,null,e.tenantId));var l=fr(u,a&&a.ta,a&&a.sa);return i=i().then((function(){if(jc(e),!o)return e.I().then((function(){}))})).then((function(){return Pl(e.i,l,t,n,s,!!u,e.tenantId)})).then((function(){return new bt((function(n,r){e.la(t,null,new T("cancelled-popup-request"),e.g||null),e.f=n,e.w=r,e.g=s,e.c=Dl(e.i,e,t,l,s)}))})).then((function(e){return l&&hr(l),e?Qr(e):null})).o((function(e){throw l&&hr(l),e})),Bc(e,i,o)}function Fc(e,t,n,r,i){if(!Cr())return Lt(new T("operation-not-supported-in-this-environment"));if(e.h&&!i)return Lt(e.h);var o=null,a=Dr(e.uid+":::");return r=r().then((function(){if(jc(e),!i)return e.I().then((function(){}))})).then((function(){return e.fa=a,_c(e)})).then((function(t){return e.ga&&(t=(t=e.ga).b.set(Uc,e.v(),t.a)),t})).then((function(){return Nl(e.i,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ga)return qc(e.ga);throw o})).then((function(){if(o)throw o})),Bc(e,r,i)}function jc(e){if(!e.i||!e.P){if(e.i&&!e.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Bc(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),Lt(e.h)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new rc("userInvalidated")),e.h=t),t}))}(e,t,n);return e.N.push(r),r.ma((function(){Q(e.N,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=$l(t.v(),Ac(e),w(e.hc,e))),n||t}))}function Vc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Xa]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=new dc(t,n,e);return e.providerData&&W(e.providerData,(function(e){e&&Mc(r,Qr(e))})),e.redirectEventId&&(r.fa=e.redirectEventId),r}function Gc(e){this.a=e,this.b=Xu()}Ql.prototype.Pc=function(e){var t=this;return e.ob(this.a.b,this.c).then((function(e){var n=me(t.f);return delete n[Xl],delete n[Jl],Ae(n,e),t.g(n)}))},S(Zl,T),ec.prototype.ob=function(e,t,n){return t.type==io?function(e,t,n,r){return n.Fa().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),Ae(n,{phoneVerificationInfo:Po(e.a)}),$s(t,Ls,n)}))}(this,e,t,n):function(e,t,n){return n.Fa().then((function(n){return Ae(n={mfaPendingCredential:n},{phoneVerificationInfo:Po(e.a)}),$s(t,Cs,n)}))}(this,e,t)},S(tc,ec),S(nc,tc),S(rc,Qt),(t=ic.prototype).wc=function(e){oc(this,function(e){var t=[];return W(e.mfaInfo||[],(function(e){(e=Zr(e))&&t.push(e)})),t}(e.ed))},t.Ob=function(){return this.a.I().then((function(e){return new ro(e,null)}))},t.dc=function(e,t){var n=this,r=this.a.a;return this.Ob().then((function(n){return e.ob(r,n,t)})).then((function(e){return Ic(n.a,e),n.a.reload()}))},t.$c=function(e){var t=this,n="string"===typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return $s(r,Zs,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=z(t.b,(function(e){return e.uid!=n}));return oc(t,r),Ic(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},t.v=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(e){return e.v()}))}}},ac.prototype.start=function(){this.a=this.c,function e(t,n){t.stop(),t.b=Sn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,n)).then((function(){return function(){var e=l.document,t=null;return Vr()||!e?Mt():new bt((function(n){t=function(){Vr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return t.h()})).then((function(){e(t,!0)})).o((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},ac.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},sc.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:uc(this)}},sc.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Lt(new T("user-token-expired")):e||!this.b||x()>uc(this)-3e4?this.a?cc(this,{grant_type:"refresh_token",refresh_token:this.a}):Mt(null):Mt({accessToken:this.b.toString(),refreshToken:this.a})},hc.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(dc,bn),dc.prototype.va=function(e){this.oa=e,ts(this.a,e)},dc.prototype.ja=function(){return this.oa},dc.prototype.Ea=function(){return Z(this.W)},dc.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Kr(dc.prototype,"providerId","firebase"),(t=dc.prototype).reload=function(){var e=this;return Bc(this,Sc(this).then((function(){return Oc(e).then((function(){return _c(e)})).then(xc)})))},t.mc=function(e){return this.I(e).then((function(e){return new Yl(e)}))},t.I=function(e){var t=this;return Bc(this,Sc(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new T("internal-error");return e.accessToken!=t.xa&&(bc(t,e.accessToken),t.dispatchEvent(new rc("tokenChanged"))),Cc(t,"refreshToken",e.refreshToken),e.accessToken})))},t.Ic=function(e){if(!(e=e.users)||!e.length)throw new T("internal-error");Ec(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?H(e,(function(e){return new fc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Mc(this,t[n]);Cc(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new rc("userReloaded",{ed:e}))},t.Jc=function(e){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(e)},t.pb=function(e){var t=this,n=null;return Bc(this,e.c(this.a,this.uid).then((function(e){return Ic(t,e),n=kc(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},t.Ac=function(e){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(e)},t.mb=function(e){var t=this,n=null;return Bc(this,Pc(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=kc(t,e,"link"),Nc(t,e)})).then((function(){return n})))},t.Bc=function(e,t){var n=this;return Bc(this,Pc(this,"phone").then((function(){return Kl(Ac(n),e,t,w(n.mb,n))})))},t.Kc=function(e,t){var n=this;return Bc(this,Mt().then((function(){return Kl(Ac(n),e,t,w(n.pb,n))})),!0)},t.xb=function(e){var t=this;return Bc(this,this.I().then((function(n){return t.a.xb(n,e)})).then((function(e){return Ic(t,e),t.reload()})))},t.cd=function(e){var t=this;return Bc(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return Ic(t,e),t.reload()})))},t.yb=function(e){var t=this;return Bc(this,this.I().then((function(n){return t.a.yb(n,e)})).then((function(e){return Ic(t,e),t.reload()})))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Sc(this);var t=this;return Bc(this,this.I().then((function(n){return t.a.zb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Ic(t,e),Cc(t,"displayName",e.displayName||null),Cc(t,"photoURL",e.photoUrl||null),W(t.providerData,(function(e){"password"===e.providerId&&(Kr(e,"displayName",t.displayName),Kr(e,"photoURL",t.photoURL))})),_c(t)})).then(xc))},t.ad=function(e){var t=this;return Bc(this,Oc(this).then((function(n){return Y(Tc(t),e)?function(e,t,n){return $s(e,Ss,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return W(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),W(Tc(t),(function(e){n[e]||Lc(t,e)})),n[ko.PROVIDER_ID]||Kr(t,"phoneNumber",null),_c(t)})):_c(t).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var e=this;return Bc(this,this.I().then((function(t){return $s(e.a,xs,{idToken:t})})).then((function(){e.dispatchEvent(new rc("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");pc(e,null),gc(e,null),e.N=[],e.D=!0,yc(e),Kr(e,"refreshToken",null),e.i&&Rl(e.i,e)}))},t.Cb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.fa||null)==t||"reauthViaRedirect"==e&&(this.fa||null)==t)},t.la=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.w?this.w(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?w(this.Hb,this):"reauthViaPopup"==e&&t==(this.g||null)?w(this.Ib,this):"linkViaRedirect"==e&&(this.fa||null)==t?w(this.Hb,this):"reauthViaRedirect"==e&&(this.fa||null)==t?w(this.Ib,this):null},t.Cc=function(e){var t=this;return Dc(this,"linkViaPopup",e,(function(){return Pc(t,e.providerId).then((function(){return _c(t)}))}),!1)},t.Lc=function(e){return Dc(this,"reauthViaPopup",e,(function(){return Mt()}),!0)},t.Dc=function(e){var t=this;return Fc(this,"linkViaRedirect",e,(function(){return Pc(t,e.providerId)}),!1)},t.Mc=function(e){return Fc(this,"reauthViaRedirect",e,(function(){return Mt()}),!0)},t.Hb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bc(this,this.I().then((function(n){return As(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=kc(i,e,"link"),Nc(i,e)})).then((function(){return o})))},t.Ib=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bc(this,Mt().then((function(){return so(vs(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=kc(i,e,"reauthenticate"),Ic(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},t.qb=function(e){var t=this,n=null;return Bc(this,this.I().then((function(t){return n=t,"undefined"===typeof e||pe(e)?{}:Fi(new Mi(e))})).then((function(e){return t.a.qb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},t.Ab=function(e,t){var n=this,r=null;return Bc(this,this.I().then((function(e){return r=e,"undefined"===typeof t||pe(t)?{}:Fi(new Mi(t))})).then((function(t){return n.a.Ab(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},t.hc=function(e){var t=null,n=this;return Bc(this,e=so(Mt(e),n.uid).then((function(e){return t=kc(n,e,"reauthenticate"),Ic(n,e),n.h=null,n.reload()})).then((function(){return t})),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&Ae(e,this.metadata.v()),W(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),Ae(e,this.O.v()),e};var Uc={name:"redirectUser",F:"session"};function qc(e){return $u(e.b,Uc,e.a)}function Wc(e){this.a=e,this.b=Xu(),this.c=null,this.f=function(e){var t=Kc("local"),n=Kc("session"),r=Kc("none");return function(e,t,n){var r=Zu(t,n),i=Ju(e,t.F);return e.get(t,n).then((function(o){var a=null;try{a=Nr(l.localStorage.getItem(r))}catch(s){}if(a&&!o)return l.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&l.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(Hc,e.a).then((function(e){return e?Kc(e):t}))}))}))})).then((function(t){return e.c=t,zc(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(Kc("local"),this.a,w(this.g,this))}function zc(e,t){var n,r=[];for(n in Yu)Yu[n]!==t&&r.push($u(e.b,Kc(Yu[n]),e.a));return r.push($u(e.b,Hc,e.a)),function(e){return new bt((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)Ct(e[s],E(o,s),a);else t(i)}))}(r)}Wc.prototype.g=function(){var e=this,t=Kc("local");Jc(this,(function(){return Mt().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return zc(e,"local").then((function(){e.c=t}))}))}))};var Hc={name:"persistence",F:"session"};function Kc(e){return{name:"authUser",F:e}}function Yc(e,t){return Jc(e,(function(){return e.b.set(e.c,t.v(),e.a)}))}function Qc(e){return Jc(e,(function(){return $u(e.b,e.c,e.a)}))}function Xc(e,t){return Jc(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Vc(e||{})}))}))}function Jc(e,t){return e.f=e.f.then(t,t),e.f}function Zc(e){if(this.l=!1,Kr(this,"settings",new zl),Kr(this,"app",e),!ah(this).options||!ah(this).options.apiKey)throw new T("invalid-api-key");e=r.SDK_VERSION?Sr(r.SDK_VERSION):null,this.b=new Ya(ah(this).options&&ah(this).options.apiKey,I(L),e),this.P=[],this.m=[],this.O=[],this.$b=r.INTERNAL.createSubscribe(w(this.xc,this)),this.W=void 0,this.ac=r.INTERNAL.createSubscribe(w(this.yc,this)),ih(this,null),this.i=new Wc(ah(this).options.apiKey+":"+ah(this).name),this.B=new Gc(ah(this).options.apiKey+":"+ah(this).name),this.Z=ch(this,function(e){var t=ah(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(Uc,e.a).then((function(e){return e&&t&&(e.authDomain=t),Vc(e||{})}))}(e.B,ah(e).options.authDomain).then((function(t){return(e.D=t)&&(t.ga=e.B),qc(e.B)}));return ch(e,t)}(e).then((function(){return Xc(e.i,t)})).then((function(t){return t?(t.ga=e.B,e.D&&(e.D.fa||null)==(t.fa||null)?t:t.reload().then((function(){return Yc(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:Qc(e.i)}))):null})).then((function(t){ih(e,t||null)}));return ch(e,n)}(this)),this.h=ch(this,function(e){return e.Z.then((function(){return nh(e)})).o((function(){})).then((function(){if(!e.l)return e.oa()})).o((function(){})).then((function(){if(!e.l){e.aa=!0;var t=e.i;t.b.addListener(Kc("local"),t.a,e.oa)}}))}(this)),this.aa=!1,this.oa=w(this.Xc,this),this.Ma=w(this.ca,this),this.xa=w(this.jc,this),this.ya=w(this.uc,this),this.za=w(this.vc,this),this.a=null,function(e){var t=ah(e).options.authDomain,n=ah(e).options.apiKey;t&&Cr()&&(e.Zb=e.Z.then((function(){if(!e.l){if(e.a=jl(t,n,ah(e).name),Cl(e.a,e),sh(e)&&wc(sh(e)),e.D){wc(e.D);var r=e.D;r.va(e.ja()),pc(r,e),mc(r=e.D,e.N),gc(r,e),e.D=null}return e.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Ec,this),this.s=0,bn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ja()},set:function(e){this.va(e)},enumerable:!1}),e.$=null,Object.defineProperty(e,"ti",{get:function(){return this.S()},set:function(e){this.ub(e)},enumerable:!1}),e.R=null}(this),this.N=[]}function $c(e){Qt.call(this,"languageCodeChanged"),this.g=e}function eh(e){Qt.call(this,"frameworkChanged"),this.c=e}function th(e){return e.Zb||Lt(new T("auth-domain-config-required"))}function nh(e){if(!Cr())return Lt(new T("operation-not-supported-in-this-environment"));var t=th(e).then((function(){return e.a.pa()})).then((function(e){return e?Qr(e):null}));return ch(e,t)}function rh(e,t){var n={};return n.apiKey=ah(e).options.apiKey,n.authDomain=ah(e).options.authDomain,n.appName=ah(e).name,e.Z.then((function(){return function(e,t,n,r){var i=new dc(e,t);return n&&(i.ga=n),r&&mc(i,r),i.reload().then((function(){return i}))}(n,t,e.B,e.Ea())})).then((function(t){return sh(e)&&t.uid==sh(e).uid?(Rc(sh(e),t),e.ca(t)):(ih(e,t),wc(t),e.ca(t))})).then((function(){lh(e)}))}function ih(e,t){sh(e)&&(function(e,t){X(e.R,(function(e){return e==t}))}(sh(e),e.Ma),hn(sh(e),"tokenChanged",e.xa),hn(sh(e),"userDeleted",e.ya),hn(sh(e),"userInvalidated",e.za),yc(sh(e))),t&&(t.R.push(e.Ma),un(t,"tokenChanged",e.xa),un(t,"userDeleted",e.ya),un(t,"userInvalidated",e.za),0<e.s&&vc(t)),Kr(e,"currentUser",t),t&&(t.va(e.ja()),pc(t,e),mc(t,e.N),gc(t,e))}function oh(e,t){var n=null,r=null;return ch(e,t.then((function(t){return n=Do(t),r=Ki(t),rh(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=$l(t.v(),e,w(e.ic,e))),n||t})).then((function(){return Qr({user:sh(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ah(e){return e.app}function sh(e){return e.currentUser}function uh(e){return sh(e)&&sh(e)._lat||null}function lh(e){if(e.aa){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](uh(e));if(e.W!==e.getUid()&&e.O.length)for(e.W=e.getUid(),t=0;t<e.O.length;t++)e.O[t]&&e.O[t](uh(e))}}function ch(e,t){return e.P.push(t),t.ma((function(){Q(e.P,t)})),t}function hh(){}function fh(){this.a={},this.b=1e12}Wc.prototype.tb=function(e){var t=null,n=this;return function(e){var t=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");e:{for(r in Yu)if(Yu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(yr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Mu()&&"none"!==e)throw n;break;default:if(!Lr()&&"none"!==e)throw n}}(e),Jc(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,zc(n,e)})).then((function(){if(n.c=Kc(e),t)return n.b.set(n.c,t,n.a)})):Mt()}))},S(Zc,bn),S($c,Qt),S(eh,Qt),(t=Zc.prototype).tb=function(e){return ch(this,e=this.i.tb(e))},t.va=function(e){this.$===e||this.l||(this.$=e,ts(this.b,this.$),this.dispatchEvent(new $c(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var e=l.navigator;this.va(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},t.Ec=function(e){this.N.push(e),ns(this.b,r.SDK_VERSION?Sr(r.SDK_VERSION,this.N):null),this.dispatchEvent(new eh(this.N))},t.Ea=function(){return Z(this.N)},t.ub=function(e){this.R===e||this.l||(this.R=e,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:ah(this).options.apiKey,authDomain:ah(this).options.authDomain,appName:ah(this).name,currentUser:sh(this)&&sh(this).v()}},t.Cb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},t.la=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.w?this.w(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?w(this.gc,this):null},t.gc=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then((function(){return oh(i,gs(i.b,o))}))},t.Vc=function(e){if(!Cr())return Lt(new T("operation-not-supported-in-this-environment"));var t=this,n=Hi(e.providerId),i=Dr(),o=null;(!Ir()||Ar())&&ah(this).options.authDomain&&e.isOAuthProvider&&(o=pu(ah(this).options.authDomain,ah(this).options.apiKey,ah(this).name,"signInViaPopup",e,null,i,r.SDK_VERSION||null,null,null,this.S()));var a=fr(o,n&&n.ta,n&&n.sa);return ch(this,n=th(this).then((function(n){return Pl(n,a,"signInViaPopup",e,i,!!o,t.S())})).then((function(){return new bt((function(e,n){t.la("signInViaPopup",null,new T("cancelled-popup-request"),t.g),t.f=e,t.w=n,t.g=i,t.c=Dl(t.a,t,"signInViaPopup",a,i)}))})).then((function(e){return a&&hr(a),e?Qr(e):null})).o((function(e){throw a&&hr(a),e})))},t.Wc=function(e){if(!Cr())return Lt(new T("operation-not-supported-in-this-environment"));var t=this;return ch(this,th(this).then((function(){return function(e){return Jc(e,(function(){return e.b.set(Hc,e.c.F,e.a)}))}(t.i)})).then((function(){return Nl(t.a,"signInViaRedirect",e,void 0,t.S())})))},t.pa=function(){var e=this;return nh(this).then((function(t){return e.a&&Gl(e.a.b),t})).o((function(t){throw e.a&&Gl(e.a.b),t}))},t.bd=function(e){if(!e)return Lt(new T("null-user"));if(this.R!=e.tenantId)return Lt(new T("tenant-id-mismatch"));var t=this,n={};n.apiKey=ah(this).options.apiKey,n.authDomain=ah(this).options.authDomain,n.appName=ah(this).name;var r=function(e,t,n,r){var i=e.b,o={};return o[Xa]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new dc(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ga=n),r&&mc(t,r),Rc(t,e),t}(e,n,t.B,t.Ea());return ch(this,this.h.then((function(){if(ah(t).options.apiKey!=e.l)return r.reload()})).then((function(){return sh(t)&&e.uid==sh(t).uid?(Rc(sh(t),e),t.ca(e)):(ih(t,r),wc(r),t.ca(r))})).then((function(){lh(t)})))},t.wb=function(){var e=this;return ch(this,this.h.then((function(){return e.a&&Gl(e.a.b),sh(e)?(ih(e,null),Qc(e.i).then((function(){lh(e)}))):Mt()})))},t.Xc=function(){var e=this;return Xc(this.i,ah(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=sh(e)&&t){n=sh(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Rc(sh(e),t),sh(e).I();(sh(e)||t)&&(ih(e,t),t&&(wc(t),t.ga=e.B),e.a&&Cl(e.a,e),lh(e))}}))},t.ca=function(e){return Yc(this.i,e)},t.jc=function(){lh(this),this.ca(sh(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(e){var t=this;return this.h.then((function(){return oh(t,Mt(e))}))},t.xc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(sh(t))}))},t.yc=function(e){var t=this;!function(e,t){e.O.push(t),ch(e,e.h.then((function(){!e.l&&Y(e.O,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(uh(e)))})))}(this,(function(){e.next(sh(t))}))},t.Gc=function(e,t,n){var r=this;return this.aa&&Promise.resolve().then((function(){"function"===typeof e?e(sh(r)):"function"===typeof e.next&&e.next(sh(r))})),this.$b(e,t,n)},t.Fc=function(e,t,n){var r=this;return this.aa&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof e?e(sh(r)):"function"===typeof e.next&&e.next(sh(r))})),this.ac(e,t,n)},t.kc=function(e){var t=this;return ch(this,this.h.then((function(){return sh(t)?sh(t).I(e).then((function(e){return{accessToken:e}})):null})))},t.Rc=function(e){var t=this;return this.h.then((function(){return oh(t,$s(t.b,Ks,{token:e}))})).then((function(e){var n=e.user;return Cc(n,"isAnonymous",!1),t.ca(n),e}))},t.Sc=function(e,t){var n=this;return this.h.then((function(){return oh(n,$s(n.b,Ys,{email:e,password:t}))}))},t.cc=function(e,t){var n=this;return this.h.then((function(){return oh(n,$s(n.b,ws,{email:e,password:t}))}))},t.Ya=function(e){var t=this;return this.h.then((function(){return oh(t,e.ia(t.b))}))},t.Qc=function(e){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(e)},t.vb=function(){var e=this;return this.h.then((function(){var t=sh(e);if(t&&t.isAnonymous){var n=Qr({providerId:null,isNewUser:!1});return Qr({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return oh(e,e.b.vb()).then((function(t){var n=t.user;return Cc(n,"isAnonymous",!0),e.ca(n),t}))}))},t.getUid=function(){return sh(this)&&sh(this).uid||null},t.bc=function(e){this.addAuthTokenListener(e),this.s++,0<this.s&&sh(this)&&vc(sh(this))},t.Nc=function(e){var t=this;W(this.m,(function(n){n==e&&t.s--})),0>this.s&&(this.s=0),0==this.s&&sh(this)&&yc(sh(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(e){var t=this;this.m.push(e),ch(this,this.h.then((function(){t.l||Y(t.m,e)&&e(uh(t))})))},t.removeAuthTokenListener=function(e){X(this.m,(function(t){return t==e}))},t.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(Kc("local"),e.a,this.oa),this.a&&(Rl(this.a,this),Gl(this.a.b)),Promise.resolve()},t.fc=function(e){return ch(this,function(e,t){return $s(e,Es,{identifier:t,continueUri:Rr()?ur():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.b,e))},t.zc=function(e){return!!Ro(e)},t.sb=function(e,t){var n=this;return ch(this,Mt().then((function(){var e=new Mi(t);if(!e.c)throw new T("argument-error",Ri+" must be true when sending sign in link to email");return Fi(e)})).then((function(t){return n.b.sb(e,t)})).then((function(){})))},t.fd=function(e){return this.Pa(e).then((function(e){return e.data.email}))},t.jb=function(e,t){return ch(this,this.b.jb(e,t).then((function(){})))},t.Pa=function(e){return ch(this,this.b.Pa(e).then((function(e){return new ii(e)})))},t.fb=function(e){return ch(this,this.b.fb(e).then((function(){})))},t.rb=function(e,t){var n=this;return ch(this,Mt().then((function(){return"undefined"===typeof t||pe(t)?{}:Fi(new Mi(t))})).then((function(t){return n.b.rb(e,t)})).then((function(){})))},t.Uc=function(e,t){return ch(this,Kl(this,e,t,w(this.Ya,this)))},t.Tc=function(e,t){var n=this;return ch(this,Mt().then((function(){var r=t||ur(),i=Co(e,r);if(!(r=Ro(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new T("tenant-id-mismatch");return n.Ya(i)})))},hh.prototype.render=function(){},hh.prototype.reset=function(){},hh.prototype.getResponse=function(){},hh.prototype.execute=function(){};var dh=null;function ph(e,t){return(t=mh(t))&&e.a[t]||null}function mh(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function gh(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=at(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function Ah(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function vh(){}function yh(){}fh.prototype.render=function(e,t){return this.a[this.b.toString()]=new gh(e,t),this.b++},fh.prototype.reset=function(e){var t=ph(this,e);e=mh(e),t&&e&&(t.delete(),delete this.a[e])},fh.prototype.getResponse=function(e){return(e=ph(this,e))?e.getResponse():null},fh.prototype.execute=function(e){(e=ph(this,e))&&e.execute()},gh.prototype.getResponse=function(){return Ah(this),this.b},gh.prototype.execute=function(){Ah(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},gh.prototype.delete=function(){Ah(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Kr(vh,"FACTOR_ID","phone"),yh.prototype.g=function(){return dh||(dh=new fh),Mt(dh)},yh.prototype.c=function(){};var bh=null;function _h(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var wh=new ye(we,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Eh=new Br(3e4,6e4);_h.prototype.g=function(e){var t=this;return new bt((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Eh.get());!l.grecaptcha||e!==t.f&&!t.b?(l[t.a]=function(){if(l.grecaptcha){t.f=e;var o=l.grecaptcha.render;l.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(l.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete l[t.a]},Mt(Ga(Te(wh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(l.grecaptcha))}))},_h.prototype.c=function(){this.b--};var xh=null;function Sh(e,t,n,r,i,o,a){if(Kr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=t,this.g=null,a?(bh||(bh=new yh),a=bh):(xh||(xh=new _h),a=xh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Lh])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ch],!l.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!at(t)||!this.i&&at(t).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ya(e,o||null,i||null),this.w=r||function(){return null};var s=this;this.l=[];var u=this.a[Th];this.a[Th]=function(e){if(Rh(s,e),"function"===typeof u)u(e);else if("string"===typeof u){var t=Mr(u,l);"function"===typeof t&&t(e)}};var c=this.a[Mh];this.a[Mh]=function(){if(Rh(s,null),"function"===typeof c)c();else if("string"===typeof c){var e=Mr(c,l);"function"===typeof e&&e()}}}var Th="callback",Mh="expired-callback",Lh="sitekey",Ch="size";function Rh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Oh(e,t){return e.h.push(t),t.ma((function(){Q(e.h,t)})),t}function Ih(e){if(e.D)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Ph(e,t,n){var i=!1;try{this.b=n||r.app()}catch(s){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ea()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=r.SDK_VERSION?Sr(r.SDK_VERSION,a):null,Sh.call(this,n,e,t,(function(){try{var e=o.b.auth().ja()}catch(t){e=null}return e}),a,I(L),i)}function kh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].K(n[i])&&!o){if(t=t[i],0>i||i>=Nh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Nh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.J+".";break e}r=null}}if(r)throw new T("argument-error",e+" failed: "+r)}(t=Sh.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=Oh(this,Mt().then((function(){if(Rr()&&!vr())return mr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.w())})).then((function(t){return e.g=t,$s(e.s,Ds,{})})).then((function(t){e.a[Lh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},t.render=function(){Ih(this);var e=this;return Oh(this,this.Ga().then((function(){if(null===e.c){var t=e.u;if(!e.i){var n=at(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ot&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',qe(a.name),'"'),a.type){o.push(' type="',qe(a.type),'"');var s={};Ae(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ft(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):st(o,a)),2<r.length&&ht(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},t.verify=function(){Ih(this);var e=this;return Oh(this,this.render().then((function(t){return new bt((function(n){var r=e.g.getResponse(t);if(r)n(r);else{e.l.push((function t(r){r&&(function(e,t){X(e.l,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c)}}))})))},t.reset=function(){Ih(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ih(this),this.D=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=at(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},S(Ph,Sh);var Nh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Dh(e,t){return{name:e||"",J:"a valid string",optional:!!t,K:function(e){return"string"===typeof e}}}function Fh(e,t){return{name:e||"",J:"a boolean",optional:!!t,K:function(e){return"boolean"===typeof e}}}function jh(e,t){return{name:e||"",J:"a valid object",optional:!!t,K:g}}function Bh(e,t){return{name:e||"",J:"a function",optional:!!t,K:function(e){return"function"===typeof e}}}function Vh(e,t){return{name:e||"",J:"null",optional:!!t,K:function(e){return null===e}}}function Gh(e){return{name:e?e+"Credential":"credential",J:e?"a valid "+e+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ia||!n)}}}function Uh(e,t){return g(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Fa}function qh(e){return g(e)&&"string"===typeof e.uid}function Wh(e,t,n,r){return{name:n||"",J:e.J+" or "+t.J,optional:!!r,K:function(n){return e.K(n)||t.K(n)}}}function zh(e,t){for(var n in t){var r=t[n].name;e[r]=Yh(r,e[n],t[n].j)}}function Hh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:E((function(e){return this[e]}),n),set:E((function(e,t,n,r){kh(e,[n],[r],!0),this[t]=r}),r,n,t[n].gb),enumerable:!0})}}function Kh(e,t,n,r){e[t]=Yh(t,n,r)}function Yh(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return kh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}zh(Zc.prototype,{fb:{name:"applyActionCode",j:[Dh("code")]},Pa:{name:"checkActionCode",j:[Dh("code")]},jb:{name:"confirmPasswordReset",j:[Dh("code"),Dh("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Dh("email"),Dh("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Dh("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Dh("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Wh(jh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Wh(jh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Dh("email"),Wh(jh("opt_actionCodeSettings",!0),Vh(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Dh("email"),jh("actionCodeSettings")]},tb:{name:"setPersistence",j:[Dh("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Gh()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Gh()]},Rc:{name:"signInWithCustomToken",j:[Dh("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Dh("email"),Dh("password")]},Tc:{name:"signInWithEmailLink",j:[Dh("email"),Dh("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Dh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[Wh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(e){return!!(e&&e instanceof dc)}},Vh(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Dh(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Dh("code")]}}),Hh(Zc.prototype,{lc:{name:"languageCode",gb:Wh(Dh(),Vh(),"languageCode")},ti:{name:"tenantId",gb:Wh(Dh(),Vh(),"tenantId")}}),Zc.Persistence=Yu,Zc.Persistence.LOCAL="local",Zc.Persistence.SESSION="session",Zc.Persistence.NONE="none",zh(dc.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Fh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Fh("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Gh()]},mb:{name:"linkWithCredential",j:[Gh()]},Bc:{name:"linkWithPhoneNumber",j:[Dh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Gh()]},pb:{name:"reauthenticateWithCredential",j:[Gh()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Dh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Wh(jh("opt_actionCodeSettings",!0),Vh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Dh(null,!0)]},ad:{name:"unlink",j:[Dh("provider")]},xb:{name:"updateEmail",j:[Dh("email")]},yb:{name:"updatePassword",j:[Dh("password")]},cd:{name:"updatePhoneNumber",j:[Gh("phone")]},zb:{name:"updateProfile",j:[jh("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Dh("email"),Wh(jh("opt_actionCodeSettings",!0),Vh(null,!0),"opt_actionCodeSettings",!0)]}}),zh(fh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zh(hh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zh(bt.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Hh(zl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Fh("appVerificationDisabledForTesting")}}),zh(Hl.prototype,{confirm:{name:"confirm",j:[Dh("verificationCode")]}}),Kh(ao,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[po,Mo,Io,co],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[Wh(Dh(),jh(),"json")]),Kh(Lo,"credential",(function(e,t){return new To(e,t)}),[Dh("email"),Dh("password")]),zh(To.prototype,{v:{name:"toJSON",j:[Dh(null,!0)]}}),zh(vo.prototype,{Aa:{name:"addScope",j:[Dh("scope")]},Ia:{name:"setCustomParameters",j:[jh("customOAuthParameters")]}}),Kh(vo,"credential",yo,[Wh(Dh(),jh(),"token")]),Kh(Lo,"credentialWithLink",Co,[Dh("email"),Dh("emailLink")]),zh(bo.prototype,{Aa:{name:"addScope",j:[Dh("scope")]},Ia:{name:"setCustomParameters",j:[jh("customOAuthParameters")]}}),Kh(bo,"credential",_o,[Wh(Dh(),jh(),"token")]),zh(wo.prototype,{Aa:{name:"addScope",j:[Dh("scope")]},Ia:{name:"setCustomParameters",j:[jh("customOAuthParameters")]}}),Kh(wo,"credential",Eo,[Wh(Dh(),Wh(jh(),Vh()),"idToken"),Wh(Dh(),Vh(),"accessToken",!0)]),zh(xo.prototype,{Ia:{name:"setCustomParameters",j:[jh("customOAuthParameters")]}}),Kh(xo,"credential",So,[Wh(Dh(),jh(),"token"),Dh("secret",!0)]),zh(Ao.prototype,{Aa:{name:"addScope",j:[Dh("scope")]},credential:{name:"credential",j:[Wh(Dh(),Wh(jh(),Vh()),"optionsOrIdToken"),Wh(Dh(),Vh(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[jh("customOAuthParameters")]}}),zh(ho.prototype,{v:{name:"toJSON",j:[Dh(null,!0)]}}),zh(uo.prototype,{v:{name:"toJSON",j:[Dh(null,!0)]}}),Kh(ko,"credential",No,[Dh("verificationId"),Dh("verificationCode")]),zh(ko.prototype,{cb:{name:"verifyPhoneNumber",j:[Wh(Dh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(e){return!!e&&(e.session&&e.phoneNumber?Uh(e.session,io)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?Uh(e.session,oo)&&qh(e.multiFactorHint):e.session&&e.multiFactorUid?Uh(e.session,oo)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]}}),zh(Oo.prototype,{v:{name:"toJSON",j:[Dh(null,!0)]}}),zh(T.prototype,{toJSON:{name:"toJSON",j:[Dh(null,!0)]}}),zh(Wo.prototype,{toJSON:{name:"toJSON",j:[Dh(null,!0)]}}),zh(qo.prototype,{toJSON:{name:"toJSON",j:[Dh(null,!0)]}}),zh(Zl.prototype,{toJSON:{name:"toJSON",j:[Dh(null,!0)]}}),zh(Ql.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(e){return!!e&&!!e.ob}}]}}),zh(ic.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(e){return!!e&&!!e.ob}},Dh("displayName",!0)]},$c:{name:"unenroll",j:[Wh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:qh},Dh(),"multiFactorInfoIdentifier")]}}),zh(Ph.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Kh(vi,"parseLink",Ti,[Dh("link")]),Kh(vh,"assertion",(function(e){return new nc(e)}),[Gh("phone")]),function(){if("undefined"===typeof r||!r.INTERNAL||!r.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ai,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:oi,VERIFY_AND_CHANGE_EMAIL:si,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Zc,AuthCredential:ao,Error:T};Kh(e,"EmailAuthProvider",Lo,[]),Kh(e,"FacebookAuthProvider",vo,[]),Kh(e,"GithubAuthProvider",bo,[]),Kh(e,"GoogleAuthProvider",wo,[]),Kh(e,"TwitterAuthProvider",xo,[]),Kh(e,"OAuthProvider",Ao,[Dh("providerId")]),Kh(e,"SAMLAuthProvider",go,[Dh("providerId")]),Kh(e,"PhoneAuthProvider",ko,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(e){return!!(e&&e instanceof Zc)}}]),Kh(e,"RecaptchaVerifier",Ph,[Wh(Dh(),{name:"",J:"an HTML element",optional:!1,K:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),jh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(e){return!!(e&&e instanceof r.app.App)}}]),Kh(e,"ActionCodeURL",vi,[]),Kh(e,"PhoneMultiFactorGenerator",vh,[]),r.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new Zc(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),r.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:w((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:w(e.kc,e),addAuthTokenListener:w(e.bc,e),removeAuthTokenListener:w(e.Nc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.registerVersion("@firebase/auth","0.14.9"),r.INTERNAL.extendNamespace({User:dc})}()}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n(55))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(23),o=n(40),a=n(19),s=n(131),u=n(26);var l=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i),c={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},h=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return r.__extends(t,e),t}(Error),f=new o.Logger("@firebase/firestore");function d(){return f.logLevel}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.DEBUG){var i=t.map(A);f.debug.apply(f,r.__spreadArrays(["Firestore (7.22.0): "+e],i))}}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.ERROR){var i=t.map(A);f.error.apply(f,r.__spreadArrays(["Firestore (7.22.0): "+e],i))}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.WARN){var i=t.map(A);f.warn.apply(f,r.__spreadArrays(["Firestore (7.22.0): "+e],i))}}function A(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function v(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (7.22.0) INTERNAL ASSERTION FAILED: "+e;throw m(t),new Error(t)}function y(e,t){e||v()}function b(e,t){return e}function _(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function w(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function E(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var x=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&v(),void 0===n?n=e.length-t:n>e.length-t&&v(),this.segments=e,this.offset=t,this.t=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.i(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.o(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.u=function(e){return e=void 0===e?1:e,this.o(this.segments,this.offset+e,this.length-e)},e.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},e.prototype.l=function(){return this.segments[this.offset]},e.prototype._=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.m=function(){return 0===this.length},e.prototype.T=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.I=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},e.i=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.o=function(e,n,r){return new t(e,n,r)},t.prototype.R=function(){return this.A().join("/")},t.prototype.toString=function(){return this.R()},t.P=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new h(c.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.g=function(){return new t([])},t}(x),T=/^[_a-zA-Z][_a-zA-Z0-9]*$/,M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.o=function(e,n,r){return new t(e,n,r)},t.V=function(e){return T.test(e)},t.prototype.R=function(){return this.A().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.V(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.R()},t.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},t.v=function(){return new t(["__name__"])},t.S=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new h(c.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new h(c.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new h(c.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new h(c.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.g=function(){return new t([])},t}(x),L=function(){function e(e){this.path=e}return e.D=function(t){return new e(S.P(t))},e.C=function(t){return new e(S.P(t).u(5))},e.prototype.N=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===S.i(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.i=function(e,t){return S.i(e.path,t.path)},e.F=function(e){return e.length%2==0},e.$=function(t){return new e(new S(t.slice()))},e}();function C(e,t){if(0!==t.length)throw new h(c.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+K(t.length,"argument")+".")}function R(e,t,n){if(t.length!==n)throw new h(c.INVALID_ARGUMENT,"Function "+e+"() requires "+K(n,"argument")+", but was called with "+K(t.length,"argument")+".")}function O(e,t,n){if(t.length<n)throw new h(c.INVALID_ARGUMENT,"Function "+e+"() requires at least "+K(n,"argument")+", but was called with "+K(t.length,"argument")+".")}function I(e,t,n,r){if(t.length<n||t.length>r)throw new h(c.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+K(t.length,"argument")+".")}function P(e,t,n,r){B(e,t,H(n)+" argument",r)}function k(e,t,n,r){void 0!==r&&P(e,t,n,r)}function N(e,t,n,r){B(e,t,n+" option",r)}function D(e,t,n,r){void 0!==r&&N(e,t,n,r)}function F(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(G(u))}var l=G(r);throw new h(c.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function j(e,t,n,r){if(!t.some((function(e){return e===r})))throw new h(c.INVALID_ARGUMENT,"Invalid value "+G(r)+" provided to function "+e+"() for its "+H(n)+" argument. Acceptable values: "+t.join(", "));return r}function B(e,t,n,r){if(!("object"===t?V(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=G(r);throw new h(c.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function V(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function G(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":v()}function U(e,t,n){if(void 0===n)throw new h(c.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+H(t)+" argument, but it was undefined.")}function q(e,t,n){w(t,(function(t,r){if(n.indexOf(t)<0)throw new h(c.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function W(e,t,n,r){var i=G(r);return new h(c.INVALID_ARGUMENT,"Function "+e+"() requires its "+H(n)+" argument to be a "+t+", but it was: "+i)}function z(e,t,n){if(n<=0)throw new h(c.INVALID_ARGUMENT,"Function "+e+"() requires its "+H(t)+" argument to be a positive number, but it was: "+n+".")}function H(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function K(e,t){return e+" "+t+(1===e?"":"s")}function Y(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Q=function(){function e(){}return e.k=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Y(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function X(e,t){return e<t?-1:e>t?1:0}function J(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Z(e){return e+"\0"}var $=function(){function e(e){this.M=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.M,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.M)},e.prototype.O=function(){return 2*this.M.length},e.prototype.L=function(e){return X(this.M,e.M)},e.prototype.isEqual=function(e){return this.M===e.M},e}();$.B=new $("");var ee=function(){function e(e){this.q=e}return e.fromBase64String=function(t){try{return new e($.fromBase64String(t))}catch(t){throw new h(c.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e($.fromUint8Array(t))},e.prototype.toBase64=function(){return this.q.toBase64()},e.prototype.toUint8Array=function(){return this.q.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this.q.isEqual(e.q)},e}();function te(){if("undefined"==typeof Uint8Array)throw new h(c.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ne(){if("undefined"==typeof atob)throw new h(c.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.fromBase64String=function(e){R("Blob.fromBase64String",arguments,1),P("Blob.fromBase64String","string",1,e),ne();try{return new t($.fromBase64String(e))}catch(e){throw new h(c.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(R("Blob.fromUint8Array",arguments,1),te(),!(e instanceof Uint8Array))throw W("Blob.fromUint8Array","Uint8Array",1,e);return new t($.fromUint8Array(e))},t.prototype.toBase64=function(){return R("Blob.toBase64",arguments,0),ne(),e.prototype.toBase64.call(this)},t.prototype.toUint8Array=function(){return R("Blob.toUint8Array",arguments,0),te(),e.prototype.toUint8Array.call(this)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(ee),ie=function(e,t,n,r,i){this.U=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},oe=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"W",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.L=function(e){return X(this.projectId,e.projectId)||X(this.database,e.database)},e}(),ae=function(){function e(e,t){this.j=e,this.K=t,this.G={}}return e.prototype.get=function(e){var t=this.j(e),n=this.G[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.K(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.j(e),r=this.G[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.K(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.G[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.j(e),n=this.G[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.K(n[r][0],e))return 1===n.length?delete this.G[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){w(this.G,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.m=function(){return E(this.G)},e}(),se=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new h(c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new h(c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new h(c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new h(c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype.H=function(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),ue=function(){function e(e){this.timestamp=e}return e.Y=function(t){return new e(t)},e.min=function(){return new e(new se(0,0))},e.prototype.L=function(e){return this.timestamp.H(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.J=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.X=function(){return this.timestamp},e}();function le(e){return null==e}function ce(e){return 0===e&&1/e==-1/0}function he(e){return"number"==typeof e&&Number.isInteger(e)&&!ce(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var fe=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Z=null};function de(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new fe(e,t,n,r,i,o,a)}function pe(e){var t=b(e);if(null===t.Z){var n=t.path.R();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.R()+e.op.toString()+it(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.R()+t.dir;var t})).join(","),le(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=ar(t.startAt)),t.endAt&&(n+="|ub:",n+=ar(t.endAt)),t.Z=n}return t.Z}function me(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!hr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!et(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ur(e.startAt,t.startAt)&&ur(e.endAt,t.endAt)}function ge(e){return L.F(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Ae,ve,ye=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=ue.min()),void 0===o&&(o=ue.min()),void 0===a&&(a=$.B),this.target=e,this.targetId=t,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.nt=function(t){return new e(this.target,this.targetId,this.tt,t,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.st=function(t,n){return new e(this.target,this.targetId,this.tt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.it=function(t){return new e(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,t,this.resumeToken)},e}(),be=function(e){this.count=e};function _e(e){switch(e){case c.OK:return v();case c.CANCELLED:case c.UNKNOWN:case c.DEADLINE_EXCEEDED:case c.RESOURCE_EXHAUSTED:case c.INTERNAL:case c.UNAVAILABLE:case c.UNAUTHENTICATED:return!1;case c.INVALID_ARGUMENT:case c.NOT_FOUND:case c.ALREADY_EXISTS:case c.PERMISSION_DENIED:case c.FAILED_PRECONDITION:case c.ABORTED:case c.OUT_OF_RANGE:case c.UNIMPLEMENTED:case c.DATA_LOSS:return!0;default:return v()}}function we(e){if(void 0===e)return m("GRPC error has no .code"),c.UNKNOWN;switch(e){case Ae.OK:return c.OK;case Ae.CANCELLED:return c.CANCELLED;case Ae.UNKNOWN:return c.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return c.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return c.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return c.INTERNAL;case Ae.UNAVAILABLE:return c.UNAVAILABLE;case Ae.UNAUTHENTICATED:return c.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return c.INVALID_ARGUMENT;case Ae.NOT_FOUND:return c.NOT_FOUND;case Ae.ALREADY_EXISTS:return c.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return c.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return c.FAILED_PRECONDITION;case Ae.ABORTED:return c.ABORTED;case Ae.OUT_OF_RANGE:return c.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return c.UNIMPLEMENTED;case Ae.DATA_LOSS:return c.DATA_LOSS;default:return v()}}(ve=Ae||(Ae={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var Ee=function(){function e(e,t){this.i=e,this.root=t||Se.EMPTY}return e.prototype.rt=function(t,n){return new e(this.i,this.root.rt(t,n,this.i).copy(null,null,Se.ot,null,null))},e.prototype.remove=function(t){return new e(this.i,this.root.remove(t,this.i).copy(null,null,Se.ot,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.m();){var n=this.i(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.m();){var r=this.i(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.m=function(){return this.root.m()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.at=function(){return this.root.at()},e.prototype.ct=function(){return this.root.ct()},e.prototype.ut=function(e){return this.root.ut(e)},e.prototype.forEach=function(e){this.ut((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.ut((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.ht=function(e){return this.root.ht(e)},e.prototype.lt=function(){return new xe(this.root,null,this.i,!1)},e.prototype._t=function(e){return new xe(this.root,e,this.i,!1)},e.prototype.ft=function(){return new xe(this.root,null,this.i,!0)},e.prototype.dt=function(e){return new xe(this.root,e,this.i,!0)},e}(),xe=function(){function e(e,t,n,r){this.wt=r,this.Tt=[];for(var i=1;!e.m();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.wt?e.left:e.right;else{if(0===i){this.Tt.push(e);break}this.Tt.push(e),e=this.wt?e.right:e.left}}return e.prototype.Et=function(){var e=this.Tt.pop(),t={key:e.key,value:e.value};if(this.wt)for(e=e.left;!e.m();)this.Tt.push(e),e=e.right;else for(e=e.right;!e.m();)this.Tt.push(e),e=e.left;return t},e.prototype.It=function(){return this.Tt.length>0},e.prototype.At=function(){if(0===this.Tt.length)return null;var e=this.Tt[this.Tt.length-1];return{key:e.key,value:e.value}},e}(),Se=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.m=function(){return!1},e.prototype.ut=function(e){return this.left.ut(e)||e(this.key,this.value)||this.right.ut(e)},e.prototype.ht=function(e){return this.right.ht(e)||e(this.key,this.value)||this.left.ht(e)},e.prototype.min=function(){return this.left.m()?this:this.left.min()},e.prototype.at=function(){return this.min().key},e.prototype.ct=function(){return this.right.m()?this.key:this.right.ct()},e.prototype.rt=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.rt(e,t,n))).Rt()},e.prototype.Pt=function(){if(this.left.m())return e.EMPTY;var t=this;return t.left.gt()||t.left.left.gt()||(t=t.yt()),(t=t.copy(null,null,null,t.left.Pt(),null)).Rt()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.m()||i.left.gt()||i.left.left.gt()||(i=i.yt()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.gt()&&(i=i.Vt()),i.right.m()||i.right.gt()||i.right.left.gt()||(i=i.bt()),0===n(t,i.key)){if(i.right.m())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.Rt()},e.prototype.gt=function(){return this.color},e.prototype.Rt=function(){var e=this;return e.right.gt()&&!e.left.gt()&&(e=e.vt()),e.left.gt()&&e.left.left.gt()&&(e=e.Vt()),e.left.gt()&&e.right.gt()&&(e=e.St()),e},e.prototype.yt=function(){var e=this.St();return e.right.left.gt()&&(e=(e=(e=e.copy(null,null,null,null,e.right.Vt())).vt()).St()),e},e.prototype.bt=function(){var e=this.St();return e.left.left.gt()&&(e=(e=e.Vt()).St()),e},e.prototype.vt=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.Vt=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.St=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.Dt=function(){var e=this.Ct();return Math.pow(2,e)<=this.size+1},e.prototype.Ct=function(){if(this.gt()&&this.left.gt())throw v();if(this.right.gt())throw v();var e=this.left.Ct();if(e!==this.right.Ct())throw v();return e+(this.gt()?0:1)},e}();Se.EMPTY=null,Se.RED=!0,Se.ot=!1,Se.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw v()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.rt=function(e,t,n){return new Se(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.m=function(){return!0},e.prototype.ut=function(e){return!1},e.prototype.ht=function(e){return!1},e.prototype.at=function(){return null},e.prototype.ct=function(){return null},e.prototype.gt=function(){return!1},e.prototype.Dt=function(){return!0},e.prototype.Ct=function(){return 0},e}());var Te=function(){function e(e){this.i=e,this.data=new Ee(this.i)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.at()},e.prototype.last=function(){return this.data.ct()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.ut((function(t,n){return e(t),!1}))},e.prototype.Nt=function(e,t){for(var n=this.data._t(e[0]);n.It();){var r=n.Et();if(this.i(r.key,e[1])>=0)return;t(r.key)}},e.prototype.Ft=function(e,t){var n;for(n=void 0!==t?this.data._t(t):this.data.lt();n.It();)if(!e(n.Et().key))return},e.prototype.$t=function(e){var t=this.data._t(e);return t.It()?t.Et().key:null},e.prototype.lt=function(){return new Me(this.data.lt())},e.prototype._t=function(e){return new Me(this.data._t(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).rt(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.m=function(){return this.data.m()},e.prototype.xt=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.lt(),r=t.data.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(0!==this.i(i,o))return!1}return!0},e.prototype.A=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.i);return n.data=t,n},e}(),Me=function(){function e(e){this.kt=e}return e.prototype.Et=function(){return this.kt.Et().key},e.prototype.It=function(){return this.kt.It()},e}(),Le=new Ee(L.i);function Ce(){return Le}function Re(){return Ce()}var Oe=new Ee(L.i);function Ie(){return Oe}var Pe=new Ee(L.i),ke=new Te(L.i);function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=ke,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var De=new Te(X);function Fe(){return De}var je=function(){function e(e){this.i=e?function(t,n){return e(t,n)||L.i(t.key,n.key)}:function(e,t){return L.i(e.key,t.key)},this.Mt=Ie(),this.Ot=new Ee(this.i)}return e.Lt=function(t){return new e(t.i)},e.prototype.has=function(e){return null!=this.Mt.get(e)},e.prototype.get=function(e){return this.Mt.get(e)},e.prototype.first=function(){return this.Ot.at()},e.prototype.last=function(){return this.Ot.ct()},e.prototype.m=function(){return this.Ot.m()},e.prototype.indexOf=function(e){var t=this.Mt.get(e);return t?this.Ot.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.Ot.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.Ot.ut((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.Mt.rt(e.key,e),t.Ot.rt(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.Mt.remove(e),this.Ot.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.Ot.lt(),r=t.Ot.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.i=this.i,r.Mt=t,r.Ot=n,r},e}(),Be=function(){function e(){this.Bt=new Ee(L.i)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Bt.get(t);n?0!==e.type&&3===n.type?this.Bt=this.Bt.rt(t,e):3===e.type&&1!==n.type?this.Bt=this.Bt.rt(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Bt=this.Bt.rt(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Bt=this.Bt.rt(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Bt=this.Bt.remove(t):1===e.type&&2===n.type?this.Bt=this.Bt.rt(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Bt=this.Bt.rt(t,{type:2,doc:e.doc}):v():this.Bt=this.Bt.rt(t,e)},e.prototype.qt=function(){var e=[];return this.Bt.ut((function(t,n){e.push(n)})),e},e}(),Ve=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.Ut=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=a,this.jt=s}return e.Kt=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,je.Lt(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.Qt.m()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.Wt===e.Wt&&this.Qt.isEqual(e.Qt)&&zn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.Ut.isEqual(e.Ut)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Ge=function(){function e(e,t,n,r,i){this.et=e,this.Gt=t,this.zt=n,this.Ht=r,this.Yt=i}return e.Jt=function(t,n){var r=new Map;return r.set(t,Ue.Xt(t,n)),new e(ue.min(),r,Fe(),Ce(),Ne())},e}(),Ue=function(){function e(e,t,n,r,i){this.resumeToken=e,this.Zt=t,this.te=n,this.ee=r,this.ne=i}return e.Xt=function(t,n){return new e($.B,n,Ne(),Ne(),Ne())},e}(),qe=function(e,t,n,r){this.se=e,this.removedTargetIds=t,this.key=n,this.ie=r},We=function(e,t){this.targetId=e,this.re=t},ze=function(e,t,n,r){void 0===n&&(n=$.B),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},He=function(){function e(){this.oe=0,this.ae=Qe(),this.ce=$.B,this.ue=!1,this.he=!0}return Object.defineProperty(e.prototype,"Zt",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),e.prototype.fe=function(e){e.O()>0&&(this.he=!0,this.ce=e)},e.prototype.de=function(){var e=Ne(),t=Ne(),n=Ne();return this.ae.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:v()}})),new Ue(this.ce,this.ue,e,t,n)},e.prototype.we=function(){this.he=!1,this.ae=Qe()},e.prototype.me=function(e,t){this.he=!0,this.ae=this.ae.rt(e,t)},e.prototype.Te=function(e){this.he=!0,this.ae=this.ae.remove(e)},e.prototype.Ee=function(){this.oe+=1},e.prototype.Ie=function(){this.oe-=1},e.prototype.Ae=function(){this.he=!0,this.ue=!0},e}(),Ke=function(){function e(e){this.Re=e,this.Pe=new Map,this.ge=Ce(),this.ye=Ye(),this.Ve=new Te(X)}return e.prototype.pe=function(e){for(var t=0,n=e.se;t<n.length;t++){var r=n[t];e.ie instanceof Cn?this.be(r,e.ie):e.ie instanceof Rn&&this.ve(r,e.key,e.ie)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){var a=o[i];this.ve(a,e.key,e.ie)}},e.prototype.Se=function(e){var t=this;this.De(e,(function(n){var r=t.Ce(n);switch(e.state){case 0:t.Ne(n)&&r.fe(e.resumeToken);break;case 1:r.Ie(),r.le||r.we(),r.fe(e.resumeToken);break;case 2:r.Ie(),r.le||t.removeTarget(n);break;case 3:t.Ne(n)&&(r.Ae(),r.fe(e.resumeToken));break;case 4:t.Ne(n)&&(t.Fe(n),r.fe(e.resumeToken));break;default:v()}}))},e.prototype.De=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Pe.forEach((function(e,r){n.Ne(r)&&t(r)}))},e.prototype.$e=function(e){var t=e.targetId,n=e.re.count,r=this.xe(t);if(r){var i=r.target;if(ge(i))if(0===n){var o=new L(i.path);this.ve(t,o,new Rn(o,ue.min()))}else y(1===n);else this.ke(t)!==n&&(this.Fe(t),this.Ve=this.Ve.add(t))}},e.prototype.Me=function(e){var t=this,n=new Map;this.Pe.forEach((function(r,i){var o=t.xe(i);if(o){if(r.Zt&&ge(o.target)){var a=new L(o.target.path);null!==t.ge.get(a)||t.Oe(i,a)||t.ve(i,a,new Rn(a,e))}r._e&&(n.set(i,r.de()),r.we())}}));var r=Ne();this.ye.forEach((function(e,n){var i=!0;n.Ft((function(e){var n=t.xe(e);return!n||2===n.tt||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Ge(e,n,this.Ve,this.ge,r);return this.ge=Ce(),this.ye=Ye(),this.Ve=new Te(X),i},e.prototype.be=function(e,t){if(this.Ne(e)){var n=this.Oe(e,t.key)?2:0;this.Ce(e).me(t.key,n),this.ge=this.ge.rt(t.key,t),this.ye=this.ye.rt(t.key,this.Le(t.key).add(e))}},e.prototype.ve=function(e,t,n){if(this.Ne(e)){var r=this.Ce(e);this.Oe(e,t)?r.me(t,1):r.Te(t),this.ye=this.ye.rt(t,this.Le(t).delete(e)),n&&(this.ge=this.ge.rt(t,n))}},e.prototype.removeTarget=function(e){this.Pe.delete(e)},e.prototype.ke=function(e){var t=this.Ce(e).de();return this.Re.Be(e).size+t.te.size-t.ne.size},e.prototype.Ee=function(e){this.Ce(e).Ee()},e.prototype.Ce=function(e){var t=this.Pe.get(e);return t||(t=new He,this.Pe.set(e,t)),t},e.prototype.Le=function(e){var t=this.ye.get(e);return t||(t=new Te(X),this.ye=this.ye.rt(e,t)),t},e.prototype.Ne=function(e){var t=null!==this.xe(e);return t||p("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.xe=function(e){var t=this.Pe.get(e);return t&&t.le?null:this.Re.qe(e)},e.prototype.Fe=function(e){var t=this;this.Pe.set(e,new He),this.Re.Be(e).forEach((function(n){t.ve(e,n,null)}))},e.prototype.Oe=function(e,t){return this.Re.Be(e).has(t)},e}();function Ye(){return new Ee(L.i)}function Qe(){return new Ee(L.i)}function Xe(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Je(e){var t=ot(e.mapValue.fields.__local_write_time__.timestampValue);return new se(t.seconds,t.nanos)}var Ze=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $e(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xe(e)?4:10:v()}function et(e,t){var n=$e(e);if(n!==$e(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Je(e).isEqual(Je(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=ot(e.timestampValue),r=ot(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return st(e.bytesValue).isEqual(st(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return at(e.geoPointValue.latitude)===at(t.geoPointValue.latitude)&&at(e.geoPointValue.longitude)===at(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return at(e.integerValue)===at(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=at(e.doubleValue),r=at(t.doubleValue);return n===r?ce(n)===ce(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return J(e.arrayValue.values||[],t.arrayValue.values||[],et);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(_(n)!==_(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!et(n[i],r[i])))return!1;return!0}(e,t);default:return v()}}function tt(e,t){return void 0!==(e.values||[]).find((function(e){return et(e,t)}))}function nt(e,t){var n=$e(e),r=$e(t);if(n!==r)return X(n,r);switch(n){case 0:return 0;case 1:return X(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=at(e.integerValue||e.doubleValue),r=at(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return rt(e.timestampValue,t.timestampValue);case 4:return rt(Je(e),Je(t));case 5:return X(e.stringValue,t.stringValue);case 6:return function(e,t){var n=st(e),r=st(t);return n.L(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=X(n[i],r[i]);if(0!==o)return o}return X(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=X(at(e.latitude),at(t.latitude));return 0!==n?n:X(at(e.longitude),at(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=nt(n[i],r[i]);if(o)return o}return X(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=X(r[a],o[a]);if(0!==s)return s;var u=nt(n[r[a]],i[o[a]]);if(0!==u)return u}return X(r.length,o.length)}(e.mapValue,t.mapValue);default:throw v()}}function rt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return X(e,t);var n=ot(e),r=ot(t),i=X(n.seconds,r.seconds);return 0!==i?i:X(n.nanos,r.nanos)}function it(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){var t=ot(e);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?st(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,L.C(r).toString()):"geoPointValue"in t?"geo("+(n=t.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in t?function(t){for(var n="[",r=!0,i=0,o=t.values||[];i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=e(a)}return n+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var n="{",r=!0,i=0,o=Object.keys(t.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+e(t.fields[a])}return n+"}"}(t.mapValue):v();var n,r}(e)}function ot(e){if(y(!!e),"string"==typeof e){var t=0,n=Ze.exec(e);if(y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:at(e.seconds),nanos:at(e.nanos)}}function at(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function st(e){return"string"==typeof e?$.fromBase64String(e):$.fromUint8Array(e)}function ut(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.R()}}function lt(e){return!!e&&"integerValue"in e}function ct(e){return!!e&&"arrayValue"in e}function ht(e){return!!e&&"nullValue"in e}function ft(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function dt(e){return!!e&&"mapValue"in e}var pt={asc:"ASCENDING",desc:"DESCENDING"},mt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gt=function(e,t){this.U=e,this.Ue=t};function At(e){return{integerValue:""+e}}function vt(e,t){if(e.Ue){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ce(t)?"-0":t}}function yt(e,t){return he(t)?At(t):vt(e,t)}function bt(e,t){return e.Ue?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function _t(e,t){return e.Ue?t.toBase64():t.toUint8Array()}function wt(e,t){return bt(e,t.X())}function Et(e){return y(!!e),ue.Y(function(e){var t=ot(e);return new se(t.seconds,t.nanos)}(e))}function xt(e,t){return function(e){return new S(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).R()}function St(e){var t=S.P(e);return y(Ht(t)),t}function Tt(e,t){return xt(e.U,t.path)}function Mt(e,t){var n=St(t);return y(n.get(1)===e.U.projectId),y(!n.get(3)&&!e.U.database||n.get(3)===e.U.database),new L(Ot(n))}function Lt(e,t){return xt(e.U,t)}function Ct(e){var t=St(e);return 4===t.length?S.g():Ot(t)}function Rt(e){return new S(["projects",e.U.projectId,"databases",e.U.database]).R()}function Ot(e){return y(e.length>4&&"documents"===e.get(4)),e.u(5)}function It(e,t,n){return{name:Tt(e,t),fields:n.proto.mapValue.fields}}function Pt(e,t){var n;if(t instanceof An)n={update:It(e,t.key,t.value)};else if(t instanceof En)n={delete:Tt(e,t.key)};else if(t instanceof vn)n={update:It(e,t.key,t.data),updateMask:zt(t.Qe)};else if(t instanceof bn)n={transform:{document:Tt(e,t.key),fieldTransforms:t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Jt)return{fieldPath:t.field.R(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zt)return{fieldPath:t.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof en)return{fieldPath:t.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof nn)return{fieldPath:t.field.R(),increment:n.We};throw v()}(0,e)}))}};else{if(!(t instanceof xn))return v();n={verify:Tt(e,t.key)}}return t.Ke.je||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:wt(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:v()}(e,t.Ke)),n}function kt(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ln.updateTime(Et(e.updateTime)):void 0!==e.exists?ln.exists(e.exists):ln.Ge()}(t.currentDocument):ln.Ge();if(t.update){t.update.name;var r=Mt(e,t.update.name),i=new Sn({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new an(t.map((function(e){return M.S(e)})))}(t.updateMask);return new vn(r,i,o,n)}return new An(r,i,n)}if(t.delete){var a=Mt(e,t.delete);return new En(a,n)}if(t.transform){var s=Mt(e,t.transform.document),u=t.transform.fieldTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)y("REQUEST_TIME"===t.setToServerValue),n=new Jt;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Zt(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new en(i)}else"increment"in t?n=new nn(e,t.increment):v();var o=M.S(t.fieldPath);return new sn(o,n)}(e,t)}));return y(!0===n.exists),new bn(s,u)}if(t.verify){var l=Mt(e,t.verify);return new xn(l,n)}return v()}function Nt(e,t){return{documents:[Lt(e,t.path)]}}function Dt(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Lt(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Lt(e,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ft(e.value))return{unaryFilter:{field:Gt(e.field),op:"IS_NAN"}};if(ht(e.value))return{unaryFilter:{field:Gt(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ft(e.value))return{unaryFilter:{field:Gt(e.field),op:"IS_NOT_NAN"}};if(ht(e.value))return{unaryFilter:{field:Gt(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gt(e.field),op:Vt(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Gt(e.field),direction:Bt(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.Ue||le(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=Ft(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Ft(t.endAt)),n}function Ft(e){return{before:e.before,values:e.position}}function jt(e){var t=!!e.before,n=e.values||[];return new or(n,t)}function Bt(e){return pt[e]}function Vt(e){return mt[e]}function Gt(e){return{fieldPath:e.R()}}function Ut(e){return M.S(e.fieldPath)}function qt(e){return Xn.create(Ut(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return v()}}(e.fieldFilter.op),e.fieldFilter.value)}function Wt(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ut(e.unaryFilter.field);return Xn.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ut(e.unaryFilter.field);return Xn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ut(e.unaryFilter.field);return Xn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ut(e.unaryFilter.field);return Xn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return v()}}function zt(e){var t=[];return e.fields.forEach((function(e){return t.push(e.R())})),{fieldPaths:t}}function Ht(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Kt=function(){this.ze=void 0};function Yt(e,t,n){return e instanceof Jt?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Zt?$t(e,t):e instanceof en?tn(e,t):function(e,t){var n=Xt(e,t),r=rn(n)+rn(e.We);return lt(n)&&lt(e.We)?At(r):vt(e.serializer,r)}(e,t)}function Qt(e,t,n){return e instanceof Zt?$t(e,t):e instanceof en?tn(e,t):n}function Xt(e,t){return e instanceof nn?lt(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(Kt),Zt=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return r.__extends(t,e),t}(Kt);function $t(e,t){for(var n=on(t),r=function(e){n.some((function(t){return et(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var en=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return r.__extends(t,e),t}(Kt);function tn(e,t){for(var n=on(t),r=function(e){n=n.filter((function(t){return!et(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var nn=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).serializer=t,r.We=n,r}return r.__extends(t,e),t}(Kt);function rn(e){return at(e.integerValue||e.doubleValue)}function on(e){return ct(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var an=function(){function e(e){this.fields=e,e.sort(M.i)}return e.prototype.He=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].T(e))return!0;return!1},e.prototype.isEqual=function(e){return J(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),sn=function(e,t){this.field=e,this.transform=t},un=function(e,t){this.version=e,this.transformResults=t},ln=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.Ge=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function cn(e,t){return void 0!==e.updateTime?t instanceof Cn&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t instanceof Cn}var hn=function(){};function fn(e,t,n){return e instanceof An?function(e,t,n){return new Cn(e.key,n.version,e.value,{hasCommittedMutations:!0})}(e,0,n):e instanceof vn?function(e,t,n){if(!cn(e.Ke,t))return new On(e.key,n.version);var r=yn(e,t);return new Cn(e.key,n.version,r,{hasCommittedMutations:!0})}(e,t,n):e instanceof bn?function(e,t,n){if(y(null!=n.transformResults),!cn(e.Ke,t))return new On(e.key,n.version);var r=_n(e,t),i=function(e,t,n){var r=[];y(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=null;t instanceof Cn&&(s=t.field(o.field)),r.push(Qt(a,s,n[i]))}return r}(e.fieldTransforms,t,n.transformResults),o=n.version,a=wn(e,r.data(),i);return new Cn(e.key,o,a,{hasCommittedMutations:!0})}(e,t,n):function(e,t,n){return new Rn(e.key,n.version,{hasCommittedMutations:!0})}(e,0,n)}function dn(e,t,n,r){return e instanceof An?function(e,t){if(!cn(e.Ke,t))return t;var n=gn(t);return new Cn(e.key,n,e.value,{Ye:!0})}(e,t):e instanceof vn?function(e,t){if(!cn(e.Ke,t))return t;var n=gn(t),r=yn(e,t);return new Cn(e.key,n,r,{Ye:!0})}(e,t):e instanceof bn?function(e,t,n,r){if(!cn(e.Ke,t))return t;var i=_n(e,t),o=function(e,t,n,r){for(var i=[],o=0,a=e;o<a.length;o++){var s=a[o],u=s.transform,l=null;n instanceof Cn&&(l=n.field(s.field)),null===l&&r instanceof Cn&&(l=r.field(s.field)),i.push(Yt(u,l,t))}return i}(e.fieldTransforms,n,t,r),a=wn(e,i.data(),o);return new Cn(e.key,i.version,a,{Ye:!0})}(e,t,r,n):function(e,t){return cn(e.Ke,t)?new Rn(e.key,ue.min()):t}(e,t)}function pn(e,t){return e instanceof bn?function(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t instanceof Cn?t.field(o.field):void 0,s=Xt(o.transform,a||null);null!=s&&(n=null==n?(new Tn).set(o.field,s):n.set(o.field,s))}return n?n.Je():null}(e,t):null}function mn(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.Ke.isEqual(t.Ke)&&(0===e.type?e.value.isEqual(t.value):1===e.type?e.data.isEqual(t.data)&&e.Qe.isEqual(t.Qe):2!==e.type||J(e.fieldTransforms,e.fieldTransforms,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Zt&&t instanceof Zt||e instanceof en&&t instanceof en?J(e.elements,t.elements,et):e instanceof nn&&t instanceof nn?et(e.We,t.We):e instanceof Jt&&t instanceof Jt}(e.transform,t.transform)}(e,t)})))}function gn(e){return e instanceof Cn?e.version:ue.min()}var An=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).key=t,i.value=n,i.Ke=r,i.type=0,i}return r.__extends(t,e),t}(hn),vn=function(e){function t(t,n,r,i){var o=this;return(o=e.call(this)||this).key=t,o.data=n,o.Qe=r,o.Ke=i,o.type=1,o}return r.__extends(t,e),t}(hn);function yn(e,t){return function(e,t){var n=new Tn(t);return e.Qe.fields.forEach((function(t){if(!t.m()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.Je()}(e,t instanceof Cn?t.data():Sn.empty())}var bn=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.fieldTransforms=n,r.type=2,r.Ke=ln.exists(!0),r}return r.__extends(t,e),t}(hn);function _n(e,t){return t}function wn(e,t,n){for(var r=new Tn(t),i=0;i<e.fieldTransforms.length;i++){var o=e.fieldTransforms[i];r.set(o.field,n[i])}return r.Je()}var En=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.Ke=n,r.type=3,r}return r.__extends(t,e),t}(hn),xn=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.Ke=n,r.type=4,r}return r.__extends(t,e),t}(hn),Sn=function(){function e(e){this.proto=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.m())return this.proto;for(var t=this.proto,n=0;n<e.length-1;++n){if(!t.mapValue.fields)return null;if(!dt(t=t.mapValue.fields[e.get(n)]))return null}return(t=(t.mapValue.fields||{})[e._()])||null},e.prototype.isEqual=function(e){return et(this.proto,e.proto)},e}(),Tn=function(){function e(e){void 0===e&&(e=Sn.empty()),this.Xe=e,this.Ze=new Map}return e.prototype.set=function(e,t){return this.tn(e,t),this},e.prototype.delete=function(e){return this.tn(e,null),this},e.prototype.tn=function(e,t){for(var n=this.Ze,r=0;r<e.length-1;++r){var i=e.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===$e(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(e._(),t)},e.prototype.Je=function(){var e=this.en(M.g(),this.Ze);return null!=e?new Sn(e):this.Xe},e.prototype.en=function(e,t){var n=this,r=!1,i=this.Xe.field(e),o=dt(i)?Object.assign({},i.mapValue.fields):{};return t.forEach((function(t,i){if(t instanceof Map){var a=n.en(e.child(i),t);null!=a&&(o[i]=a,r=!0)}else null!==t?(o[i]=t,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},e}();function Mn(e){var t=[];return w(e.fields||{},(function(e,n){var r=new M([e]);if(dt(n)){var i=Mn(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new an(t)}var Ln=function(e,t){this.key=e,this.version=t},Cn=function(e){function t(t,n,r,i){var o=this;return(o=e.call(this,t,n)||this).nn=r,o.Ye=!!i.Ye,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return r.__extends(t,e),t.prototype.field=function(e){return this.nn.field(e)},t.prototype.data=function(){return this.nn},t.prototype.sn=function(){return this.nn.proto},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.Ye===e.Ye&&this.hasCommittedMutations===e.hasCommittedMutations&&this.nn.isEqual(e.nn)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Ye+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.Ye||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t}(Ln),Rn=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return r.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Ln),On=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Ln),In=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.rn=n,this.filters=r,this.limit=i,this.on=o,this.startAt=a,this.endAt=s,this.an=null,this.cn=null,this.startAt,this.endAt};function Pn(e,t,n,r,i,o,a,s){return new In(e,t,n,r,i,o,a,s)}function kn(e){return new In(e)}function Nn(e){return!le(e.limit)&&"F"===e.on}function Dn(e){return!le(e.limit)&&"L"===e.on}function Fn(e){return e.rn.length>0?e.rn[0].field:null}function jn(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.un())return r.field}return null}function Bn(e){return null!==e.collectionGroup}function Vn(e){var t=b(e);if(null===t.an){t.an=[];var n=jn(t),r=Fn(t);if(null!==n&&null===r)n.p()||t.an.push(new lr(n)),t.an.push(new lr(M.v(),"asc"));else{for(var i=!1,o=0,a=t.rn;o<a.length;o++){var s=a[o];t.an.push(s),s.field.p()&&(i=!0)}if(!i){var u=t.rn.length>0?t.rn[t.rn.length-1].dir:"asc";t.an.push(new lr(M.v(),u))}}}return t.an}function Gn(e){var t=b(e);if(!t.cn)if("F"===t.on)t.cn=de(t.path,t.collectionGroup,Vn(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Vn(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new lr(o.field,a))}var s=t.endAt?new or(t.endAt.position,!t.endAt.before):null,u=t.startAt?new or(t.startAt.position,!t.startAt.before):null;t.cn=de(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.cn}function Un(e,t,n){return new In(e.path,e.collectionGroup,e.rn.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qn(e,t){return new In(e.path,e.collectionGroup,e.rn.slice(),e.filters.slice(),e.limit,e.on,t,e.endAt)}function Wn(e,t){return new In(e.path,e.collectionGroup,e.rn.slice(),e.filters.slice(),e.limit,e.on,e.startAt,t)}function zn(e,t){return me(Gn(e),Gn(t))&&e.on===t.on}function Hn(e){return pe(Gn(e))+"|lt:"+e.on}function Kn(e){return"Query(target="+function(e){var t=e.path.R();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.R()+" "+t.op+" "+it(t.value);var t})).join(", ")+"]"),le(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return(t=e).field.R()+" ("+t.dir+")";var t})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+ar(e.startAt)),e.endAt&&(t+=", endAt: "+ar(e.endAt)),"Target("+t+")"}(Gn(e))+"; limitType="+e.on+")"}function Yn(e,t){return function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.N(e.collectionGroup)&&e.path.T(n):L.F(e.path)?e.path.isEqual(n):e.path.I(n)}(e,t)&&function(e,t){for(var n=0,r=e.rn;n<r.length;n++){var i=r[n];if(!i.field.p()&&null===t.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!sr(e.startAt,Vn(e),t))&&(!e.endAt||!sr(e.endAt,Vn(e),t))}(e,t)}function Qn(e){return function(t,n){for(var r=!1,i=0,o=Vn(e);i<o.length;i++){var a=o[i],s=cr(a,t,n);if(0!==s)return s;r=r||a.field.p()}return 0}}var Xn=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return r.__extends(t,e),t.create=function(e,n,r){if(e.p())return"in"===n||"not-in"===n?this.hn(e,n,r):new Jn(e,n,r);if(ht(r)){if("=="!==n&&"!="!==n)throw new h(c.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new t(e,n,r)}if(ft(r)){if("=="!==n&&"!="!==n)throw new h(c.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new t(e,n,r)}return"array-contains"===n?new tr(e,r):"in"===n?new nr(e,r):"not-in"===n?new rr(e,r):"array-contains-any"===n?new ir(e,r):new t(e,n,r)},t.hn=function(e,t,n){return"in"===t?new Zn(e,n):new $n(e,n)},t.prototype.matches=function(e){var t=e.field(this.field);return"!="===this.op?null!==t&&this.ln(nt(t,this.value)):null!==t&&$e(this.value)===$e(t)&&this.ln(nt(t,this.value))},t.prototype.ln=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return v()}},t.prototype.un=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),Jn=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=L.C(r.referenceValue),i}return r.__extends(t,e),t.prototype.matches=function(e){var t=L.i(e.key,this.key);return this.ln(t)},t}(Xn),Zn=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=er("in",n),r}return r.__extends(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Xn),$n=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=er("not-in",n),r}return r.__extends(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Xn);function er(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return L.C(e.referenceValue)}))}var tr=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return r.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return ct(t)&&tt(t.arrayValue,this.value)},t}(Xn),nr=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return r.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&tt(this.value.arrayValue,t)},t}(Xn),rr=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return r.__extends(t,e),t.prototype.matches=function(e){if(tt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.field(this.field);return null!==t&&!tt(this.value.arrayValue,t)},t}(Xn),ir=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return r.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return!(!ct(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return tt(t.value.arrayValue,e)}))},t}(Xn),or=function(e,t){this.position=e,this.before=t};function ar(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return it(e)})).join(",")}function sr(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.p()?L.i(L.C(a.referenceValue),n.key):nt(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function ur(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!et(e.position[n],t.position[n]))return!1;return!0}var lr=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function cr(e,t,n){var r=e.field.p()?L.i(t.key,n.key):function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?nt(r,i):v()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return v()}}function hr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var fr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},dr=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this._n=e,this.fn=t,this.dn=n,this.wn=r,this.mn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}return e.prototype.reset=function(){this.Tn=0},e.prototype.An=function(){this.Tn=this.mn},e.prototype.Rn=function(e){var t=this;this.cancel();var n=Math.floor(this.Tn+this.Pn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);i>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this._n.gn(this.fn,i,(function(){return t.In=Date.now(),e()})),this.Tn*=this.wn,this.Tn<this.dn&&(this.Tn=this.dn),this.Tn>this.mn&&(this.Tn=this.mn)},e.prototype.yn=function(){null!==this.En&&(this.En.Vn(),this.En=null)},e.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},e.prototype.Pn=function(){return(Math.random()-.5)*this.Tn},e}(),pr=function(){function e(e){var t=this;this.pn=null,this.bn=null,this.result=void 0,this.error=void 0,this.vn=!1,this.Sn=!1,e((function(e){t.vn=!0,t.result=e,t.pn&&t.pn(e)}),(function(e){t.vn=!0,t.error=e,t.bn&&t.bn(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.Sn&&v(),this.Sn=!0,this.vn?this.error?this.Dn(n,this.error):this.Cn(t,this.result):new e((function(e,i){r.pn=function(n){r.Cn(t,n).next(e,i)},r.bn=function(t){r.Dn(n,t).next(e,i)}}))},e.prototype.Nn=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.Fn=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.Cn=function(t,n){return t?this.Fn((function(){return t(n)})):e.resolve(n)},e.prototype.Dn=function(t,n){return t?this.Fn((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.$n=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.xn=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.$n(r)},e}(),mr=function(){function t(e,n,r){this.name=e,this.version=n,this.kn=r,12.2===t.Mn(a.getUA())&&m("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return p("SimpleDb","Removing database:",e),_r(window.indexedDB.deleteDatabase(e)).Nn()},t.On=function(){if("undefined"==typeof indexedDB)return!1;if(t.Ln())return!0;var e=a.getUA(),n=t.Mn(e),r=0<n&&n<10,i=t.Bn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Ln=function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===t?void 0:t.qn)},t.Un=function(e,t){return e.store(t)},t.Mn=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Bn=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){switch(n.label){case 0:return this.db?[3,2]:(p("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,n){var r=indexedDB.open(t.name,t.version);r.onsuccess=function(t){var n=t.target.result;e(n)},r.onblocked=function(){n(new Ar("Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(e){var t=e.target.error;"VersionError"===t.name?n(new h(c.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new Ar(t))},r.onupgradeneeded=function(e){p("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion);var n=e.target.result;t.kn.createOrUpgrade(n,r.transaction,e.oldVersion,t.version).next((function(){p("SimpleDb","Database upgrade to version "+t.version+" complete")}))}}))]);case 1:e.db=n.sent(),n.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(e){return t.Wn(e)}),this.db)]}}))}))},t.prototype.jn=function(e){this.Wn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},t.prototype.runTransaction=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u;return r.__generator(this,(function(l){switch(l.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,l,c;return r.__generator(this,(function(r){switch(r.label){case 0:++o,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,s.Qn()];case 2:return s.db=r.sent(),e=yr.open(s.db,i?"readonly":"readwrite",t),a=n(e).catch((function(t){return e.abort(t),pr.reject(t)})).Nn(),u={},a.catch((function(){})),[4,e.Kn];case 3:return[2,(u.value=(r.sent(),a),u)];case 4:return l=r.sent(),c="FirebaseError"!==l.name&&o<3,p("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),s.close(),c?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},s=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=l.sent()))return[2,u.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),gr=function(){function e(e){this.Gn=e,this.zn=!1,this.Hn=null}return Object.defineProperty(e.prototype,"vn",{get:function(){return this.zn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Yn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Gn=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.zn=!0},e.prototype.Jn=function(e){this.Hn=e},e.prototype.delete=function(){return _r(this.Gn.delete())},e}(),Ar=function(e){function t(t){var n=this;return(n=e.call(this,c.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",n}return r.__extends(t,e),t}(h);function vr(e){return"IndexedDbTransactionError"===e.name}var yr=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.Xn=new fr,this.transaction.oncomplete=function(){t.Xn.resolve()},this.transaction.onabort=function(){e.error?t.Xn.reject(new Ar(e.error)):t.Xn.resolve()},this.transaction.onerror=function(e){var n=Er(e.target.error);t.Xn.reject(new Ar(n))}}return e.open=function(t,n,r){try{return new e(t.transaction(r,n))}catch(t){throw new Ar(t)}},Object.defineProperty(e.prototype,"Kn",{get:function(){return this.Xn.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.Xn.reject(e),this.aborted||(p("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new br(t)},e}(),br=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(p("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),_r(n)},e.prototype.add=function(e){return p("SimpleDb","ADD",this.store.name,e,e),_r(this.store.add(e))},e.prototype.get=function(e){var t=this;return _r(this.store.get(e)).next((function(n){return void 0===n&&(n=null),p("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return p("SimpleDb","DELETE",this.store.name,e),_r(this.store.delete(e))},e.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),_r(this.store.count())},e.prototype.Zn=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.ts(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.es=function(e,t){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.ns=!1;var r=this.cursor(n);return this.ts(r,(function(e,t,n){return n.delete()}))},e.prototype.ss=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.ts(r,t)},e.prototype.rs=function(e){var t=this.cursor({});return new pr((function(n,r){t.onerror=function(e){var t=Er(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.ts=function(e,t){var n=[];return new pr((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new gr(i),a=t(i.primaryKey,i.value,o);if(a instanceof pr){var s=a.catch((function(e){return o.done(),pr.reject(e)}));n.push(s)}o.vn?r():null===o.Yn?i.continue():i.continue(o.Yn)}else r()}})).next((function(){return pr.$n(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.ns?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function _r(e){return new pr((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Er(e.target.error);n(t)}}))}var wr=!1;function Er(e){var t=mr.Mn(a.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new h("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return wr||(wr=!0,setTimeout((function(){throw r}),0)),r}}return e}function xr(){return"undefined"!=typeof window?window:null}function Sr(){return"undefined"!=typeof document?document:null}var Tr=function(){function e(e,t,n,r,i){this.os=e,this.fn=t,this.cs=n,this.op=r,this.us=i,this.hs=new fr,this.then=this.hs.promise.then.bind(this.hs.promise),this.hs.promise.catch((function(e){}))}return e.ls=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this._s=setTimeout((function(){return t.fs()}),e)},e.prototype.Vn=function(){return this.fs()},e.prototype.cancel=function(e){null!==this._s&&(this.clearTimeout(),this.hs.reject(new h(c.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.fs=function(){var e=this;this.os.ds((function(){return null!==e._s?(e.clearTimeout(),e.op().then((function(t){return e.hs.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this._s&&(this.us(this),clearTimeout(this._s),this._s=null)},e}(),Mr=function(){function e(){var e=this;this.ws=Promise.resolve(),this.Ts=[],this.Es=!1,this.Is=[],this.As=null,this.Rs=!1,this.Ps=[],this.gs=new dr(this,"async_queue_retry"),this.ys=function(){var t=Sr();t&&p("AsyncQueue","Visibility state changed to  ",t.visibilityState),e.gs.yn()};var t=Sr();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ys)}return Object.defineProperty(e.prototype,"Vs",{get:function(){return this.Es},enumerable:!1,configurable:!0}),e.prototype.ds=function(e){this.enqueue(e)},e.prototype.ps=function(e){this.bs(),this.vs(e)},e.prototype.Ss=function(){if(!this.Es){this.Es=!0;var e=Sr();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.ys)}},e.prototype.enqueue=function(e){return this.bs(),this.Es?new Promise((function(e){})):this.vs(e)},e.prototype.Ds=function(e){var t=this;this.Ts.push(e),this.ds((function(){return t.Cs()}))},e.prototype.Cs=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.gs.reset(),[3,4];case 3:if(!vr(e=n.sent()))throw e;return p("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.Ts.length>0&&this.gs.Rn((function(){return t.Cs()})),n.label=5;case 5:return[2]}}))}))},e.prototype.vs=function(e){var t=this,n=this.ws.then((function(){return t.Rs=!0,e().catch((function(e){throw t.As=e,t.Rs=!1,m("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.Rs=!1,e}))}));return this.ws=n,n},e.prototype.gn=function(e,t,n){var r=this;this.bs(),this.Ps.indexOf(e)>-1&&(t=0);var i=Tr.ls(this,e,t,n,(function(e){return r.Ns(e)}));return this.Is.push(i),i},e.prototype.bs=function(){this.As&&v()},e.prototype.Fs=function(){},e.prototype.$s=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,e=this.ws];case 1:t.sent(),t.label=2;case 2:if(e!==this.ws)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.xs=function(e){for(var t=0,n=this.Is;t<n.length;t++)if(n[t].fn===e)return!0;return!1},e.prototype.ks=function(e){var t=this;return this.$s().then((function(){t.Is.sort((function(e,t){return e.cs-t.cs}));for(var n=0,r=t.Is;n<r.length;n++){var i=r[n];if(i.Vn(),"all"!==e&&i.fn===e)break}return t.$s()}))},e.prototype.Ms=function(e){this.Ps.push(e)},e.prototype.Ns=function(e){var t=this.Is.indexOf(e);this.Is.splice(t,1)},e}();function Lr(e,t){if(m("AsyncQueue",t+": "+e),vr(e))return new h(c.UNAVAILABLE,t+": "+e);throw e}var Cr=function(){this.Os=void 0,this.listeners=[]},Rr=function(){this.Ls=new ae((function(e){return Hn(e)}),zn),this.onlineState="Unknown",this.Bs=new Set};function Or(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l;return r.__generator(this,(function(r){switch(r.label){case 0:if(n=b(e),i=t.query,o=!1,(a=n.Ls.get(i))||(o=!0,a=new Cr),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),s=a,[4,n.qs(i)];case 2:return s.Os=r.sent(),[3,4];case 3:return u=r.sent(),l=Lr(u,"Initialization of query '"+Kn(t.query)+"' failed"),[2,void t.onError(l)];case 4:return n.Ls.set(i,a),a.listeners.push(t),t.Us(n.onlineState),a.Os&&t.Qs(a.Os)&&Nr(n),[2]}}))}))}function Ir(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return r.__generator(this,(function(r){return n=b(e),i=t.query,o=!1,(a=n.Ls.get(i))&&(s=a.listeners.indexOf(t))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.Ls.delete(i),n.Ws(i))]:[2]}))}))}function Pr(e,t){for(var n=b(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.Ls.get(s);if(u){for(var l=0,c=u.listeners;l<c.length;l++)c[l].Qs(a)&&(r=!0);u.Os=a}}r&&Nr(n)}function kr(e,t,n){var r=b(e),i=r.Ls.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.Ls.delete(t)}function Nr(e){e.Bs.forEach((function(e){e.next()}))}var Dr=function(){function e(e,t,n){this.query=e,this.js=t,this.Ks=!1,this.Gs=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Qs=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new Ve(e.query,e.docs,e.Ut,t,e.Qt,e.fromCache,e.Wt,!0)}var o=!1;return this.Ks?this.zs(e)&&(this.js.next(e),o=!0):this.Hs(e,this.onlineState)&&(this.Ys(e),o=!0),this.Gs=e,o},e.prototype.onError=function(e){this.js.error(e)},e.prototype.Us=function(e){this.onlineState=e;var t=!1;return this.Gs&&!this.Ks&&this.Hs(this.Gs,e)&&(this.Ys(this.Gs),t=!0),t},e.prototype.Hs=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.Js&&n||e.docs.m()&&"Offline"!==t)},e.prototype.zs=function(e){if(e.docChanges.length>0)return!0;var t=this.Gs&&this.Gs.hasPendingWrites!==e.hasPendingWrites;return!(!e.Wt&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.Ys=function(e){e=Ve.Kt(e.query,e.docs,e.Qt,e.fromCache),this.Ks=!0,this.js.next(e)},e}(),Fr=function(){function e(e){this.uid=e}return e.prototype.Xs=function(){return null!=this.uid},e.prototype.Zs=function(){return this.Xs()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();Fr.UNAUTHENTICATED=new Fr(null),Fr.ti=new Fr("google-credentials-uid"),Fr.ei=new Fr("first-party-uid");var jr=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.ni=function(e){return n.si(e)},this.ii=function(e){return t.ri(e)})}return e.prototype.si=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.ii&&this.ii(e),e},e}();function Br(e,t){return"firestore_clients_"+e+"_"+t}function Vr(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.Xs()&&(r+="_"+t.uid),r}function Gr(e,t){return"firestore_targets_"+e+"_"+t}jr.oi=-1;var Ur=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.ai=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new h(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(m("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.ci=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),qr=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.ai=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new h(r.error.code,r.error.message)),i?new e(t,r.state,o):(m("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.ci=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Wr=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.ai=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Fe(),a=0;i&&a<r.activeTargetIds.length;++a)i=he(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(m("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),zr=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.ai=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(m("SharedClientState","Failed to parse online state: "+t),null)},e}(),Hr=function(){function e(){this.activeTargetIds=Fe()}return e.prototype.ui=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.hi=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.ci=function(){var e={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Kr=function(){function e(e,t,n,r,i){this.window=e,this._n=t,this.persistenceKey=n,this.li=r,this._i=null,this.fi=null,this.ni=null,this.di=this.wi.bind(this),this.mi=new Ee(X),this.Ti=!1,this.Ei=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ii=Br(this.persistenceKey,this.li),this.Ai=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.mi=this.mi.rt(this.li,new Hr),this.Ri=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.gi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.yi=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.di)}return e.On=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,a,s,u,l,c,h,f=this;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._i.Vi()];case 1:for(e=r.sent(),t=0,n=e;t<n.length;t++)(i=n[t])!==this.li&&(o=this.getItem(Br(this.persistenceKey,i)))&&(a=Wr.ai(i,o))&&(this.mi=this.mi.rt(a.clientId,a));for(this.pi(),(s=this.storage.getItem(this.yi))&&(u=this.bi(s))&&this.vi(u),l=0,c=this.Ei;l<c.length;l++)h=c[l],this.wi(h);return this.Ei=[],this.window.addEventListener("unload",(function(){return f.Si()})),this.Ti=!0,[2]}}))}))},e.prototype.ri=function(e){this.setItem(this.Ai,JSON.stringify(e))},e.prototype.Di=function(){return this.Ci(this.mi)},e.prototype.Ni=function(e){var t=!1;return this.mi.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.Fi=function(e){this.$i(e,"pending")},e.prototype.xi=function(e,t,n){this.$i(e,t,n),this.ki(e)},e.prototype.Mi=function(e){var t="not-current";if(this.Ni(e)){var n=this.storage.getItem(Gr(this.persistenceKey,e));if(n){var r=qr.ai(e,n);r&&(t=r.state)}}return this.Oi.ui(e),this.pi(),t},e.prototype.Li=function(e){this.Oi.hi(e),this.pi()},e.prototype.Bi=function(e){return this.Oi.activeTargetIds.has(e)},e.prototype.qi=function(e){this.removeItem(Gr(this.persistenceKey,e))},e.prototype.Ui=function(e,t,n){this.Qi(e,t,n)},e.prototype.Wi=function(e,t,n){var r=this;t.forEach((function(e){r.ki(e)})),this.currentUser=e,n.forEach((function(e){r.Fi(e)}))},e.prototype.ji=function(e){this.Ki(e)},e.prototype.Si=function(){this.Ti&&(this.window.removeEventListener("storage",this.di),this.removeItem(this.Ii),this.Ti=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return p("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){p("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){p("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.wi=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(p("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ii)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._n.Ds((function(){return r.__awaiter(t,void 0,void 0,(function(){var e,t,i,o,a,s;return r.__generator(this,(function(r){if(this.Ti){if(null!==n.key)if(this.Ri.test(n.key)){if(null==n.newValue)return e=this.Gi(n.key),[2,this.zi(e,null)];if(t=this.Hi(n.key,n.newValue))return[2,this.zi(t.clientId,t)]}else if(this.Pi.test(n.key)){if(null!==n.newValue&&(i=this.Yi(n.key,n.newValue)))return[2,this.Ji(i)]}else if(this.gi.test(n.key)){if(null!==n.newValue&&(o=this.Xi(n.key,n.newValue)))return[2,this.Zi(o)]}else if(n.key===this.yi){if(null!==n.newValue&&(a=this.bi(n.newValue)))return[2,this.vi(a)]}else n.key===this.Ai&&(s=function(e){var t=jr.oi;if(null!=e)try{var n=JSON.parse(e);y("number"==typeof n),t=n}catch(e){m("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==jr.oi&&this.ni(s)}else this.Ei.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Oi",{get:function(){return this.mi.get(this.li)},enumerable:!1,configurable:!0}),e.prototype.pi=function(){this.setItem(this.Ii,this.Oi.ci())},e.prototype.$i=function(e,t,n){var r=new Ur(this.currentUser,e,t,n),i=Vr(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ci())},e.prototype.ki=function(e){var t=Vr(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Ki=function(e){var t={clientId:this.li,onlineState:e};this.storage.setItem(this.yi,JSON.stringify(t))},e.prototype.Qi=function(e,t,n){var r=Gr(this.persistenceKey,e),i=new qr(e,t,n);this.setItem(r,i.ci())},e.prototype.Gi=function(e){var t=this.Ri.exec(e);return t?t[1]:null},e.prototype.Hi=function(e,t){var n=this.Gi(e);return Wr.ai(n,t)},e.prototype.Yi=function(e,t){var n=this.Pi.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ur.ai(new Fr(i),r,t)},e.prototype.Xi=function(e,t){var n=this.gi.exec(e),r=Number(n[1]);return qr.ai(r,t)},e.prototype.bi=function(e){return zr.ai(e)},e.prototype.Ji=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this._i.tr(e.batchId,e.state,e.error)]:(p("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.Zi=function(e){return this._i.er(e.targetId,e.state,e.error)},e.prototype.zi=function(e,t){var n=this,r=t?this.mi.rt(e,t):this.mi.remove(e),i=this.Ci(this.mi),o=this.Ci(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this._i.nr(a,s).then((function(){n.mi=r}))},e.prototype.vi=function(e){this.mi.get(e.clientId)&&this.fi(e.onlineState)},e.prototype.Ci=function(e){var t=Fe();return e.forEach((function(e,n){t=t.xt(n.activeTargetIds)})),t},e}(),Yr=function(){function e(){this.sr=new Hr,this.ir={},this.fi=null,this.ni=null}return e.prototype.Fi=function(e){},e.prototype.xi=function(e,t,n){},e.prototype.Mi=function(e){return this.sr.ui(e),this.ir[e]||"not-current"},e.prototype.Ui=function(e,t,n){this.ir[e]=t},e.prototype.Li=function(e){this.sr.hi(e)},e.prototype.Bi=function(e){return this.sr.activeTargetIds.has(e)},e.prototype.qi=function(e){delete this.ir[e]},e.prototype.Di=function(){return this.sr.activeTargetIds},e.prototype.Ni=function(e){return this.sr.activeTargetIds.has(e)},e.prototype.start=function(){return this.sr=new Hr,Promise.resolve()},e.prototype.Wi=function(e,t,n){},e.prototype.ji=function(e){},e.prototype.Si=function(){},e.prototype.ri=function(e){},e}(),Qr=function(){function e(e,t,n,r){this.batchId=e,this.rr=t,this.baseMutations=n,this.mutations=r}return e.prototype.ar=function(e,t,n){for(var r=n.cr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e)&&(t=fn(o,t,r[i]))}return t},e.prototype.ur=function(e,t){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(e)&&(t=dn(i,t,t,this.rr))}for(var o=t,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(e)&&(t=dn(u,t,o,this.rr))}return t},e.prototype.hr=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.ur(r.key,e.get(r.key));i&&(n=n.rt(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ne())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&J(this.mutations,e.mutations,(function(e,t){return mn(e,t)}))&&J(this.baseMutations,e.baseMutations,(function(e,t){return mn(e,t)}))},e}(),Xr=function(){function e(e,t,n,r){this.batch=e,this.lr=t,this.cr=n,this._r=r}return e.from=function(t,n,r){y(t.mutations.length===r.length);for(var i=Pe,o=t.mutations,a=0;a<o.length;a++)i=i.rt(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),Jr=function(){function e(){this.dr=new ae((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.wr=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return this.mr},set:function(e){this.mr=e},enumerable:!1,configurable:!0}),e.prototype.Tr=function(e,t){this.Er(),this.readTime=t,this.dr.set(e.key,e)},e.prototype.Ir=function(e,t){this.Er(),t&&(this.readTime=t),this.dr.set(e,null)},e.prototype.Ar=function(e,t){this.Er();var n=this.dr.get(t);return void 0!==n?pr.resolve(n):this.Rr(e,t)},e.prototype.getEntries=function(e,t){return this.Pr(e,t)},e.prototype.apply=function(e){return this.Er(),this.wr=!0,this.gr(e)},e.prototype.Er=function(){},e}(),Zr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$r=function(){function e(){this.yr=[]}return e.prototype.Vr=function(e){this.yr.push(e)},e.prototype.pr=function(){this.yr.forEach((function(e){return e()}))},e}(),ei=function(){function e(e,t,n){this.br=e,this.vr=t,this.Sr=n}return e.prototype.Dr=function(e,t){var n=this;return this.vr.Cr(e,t).next((function(r){return n.Nr(e,t,r)}))},e.prototype.Nr=function(e,t,n){return this.br.Ar(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].ur(t,e);return e}))},e.prototype.Fr=function(e,t,n){var r=Re();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].ur(e,t);r=r.rt(e,t)})),r},e.prototype.$r=function(e,t){var n=this;return this.br.getEntries(e,t).next((function(t){return n.kr(e,t)}))},e.prototype.kr=function(e,t){var n=this;return this.vr.Mr(e,t).next((function(r){var i=n.Fr(e,t,r),o=Ce();return i.forEach((function(e,t){t||(t=new Rn(e,ue.min())),o=o.rt(e,t)})),o}))},e.prototype.Or=function(e,t,n){return function(e){return L.F(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Lr(e,t.path):Bn(t)?this.Br(e,t,n):this.qr(e,t,n)},e.prototype.Lr=function(e,t){return this.Dr(e,new L(t)).next((function(e){var t=Ie();return e instanceof Cn&&(t=t.rt(e.key,e)),t}))},e.prototype.Br=function(e,t,n){var r=this,i=t.collectionGroup,o=Ie();return this.Sr.Ur(e,i).next((function(a){return pr.forEach(a,(function(a){var s=function(e,t){return new In(t,null,e.rn.slice(),e.filters.slice(),e.limit,e.on,e.startAt,e.endAt)}(t,a.child(i));return r.qr(e,s,n).next((function(e){e.forEach((function(e,t){o=o.rt(e,t)}))}))})).next((function(){return o}))}))},e.prototype.qr=function(e,t,n){var r,i,o=this;return this.br.Or(e,t,n).next((function(n){return r=n,o.vr.Qr(e,t)})).next((function(t){return i=t,o.Wr(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],l=u.key,c=r.get(l),h=dn(u,c,c,o.rr);r=h instanceof Cn?r.rt(l,h):r.remove(l)}}))})).next((function(){return r.forEach((function(e,n){Yn(t,n)||(r=r.remove(e))})),r}))},e.prototype.Wr=function(e,t,n){for(var r=Ne(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof vn&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.br.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Cn&&(l=l.rt(e,t))})),l}))},e}(),ti=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.jr=n,this.Kr=r}return e.Gr=function(t,n){for(var r=Ne(),i=Ne(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}();function ni(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=X(n,i);return 0===a?X(r,o):a}var ri=function(){function e(e){this.zr=e,this.buffer=new Te(ni),this.Hr=0}return e.prototype.Yr=function(){return++this.Hr},e.prototype.Jr=function(e){var t=[e,this.Yr()];if(this.buffer.size<this.zr)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ni(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),ii={Xr:!1,Zr:0,eo:0,no:0},oi=function(){function e(e,t,n){this.so=e,this.io=t,this.ro=n}return e.oo=function(t){return new e(t,e.ao,e.co)},e}();oi.uo=-1,oi.ho=1048576,oi.lo=41943040,oi.ao=10,oi.co=1e3,oi._o=new oi(oi.lo,oi.ao,oi.co),oi.fo=new oi(oi.uo,0,0);var ai=function(){function e(e,t){this.do=e,this.os=t,this.wo=!1,this.mo=null}return e.prototype.start=function(e){this.do.params.so!==oi.uo&&this.To(e)},e.prototype.stop=function(){this.mo&&(this.mo.cancel(),this.mo=null)},Object.defineProperty(e.prototype,"Ti",{get:function(){return null!==this.mo},enumerable:!1,configurable:!0}),e.prototype.To=function(e){var t=this,n=this.wo?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.mo=this.os.gn("lru_garbage_collection",n,(function(){return r.__awaiter(t,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:this.mo=null,this.wo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.Eo(this.do)];case 2:return n.sent(),[3,7];case 3:return vr(t=n.sent())?(p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,Eo(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.To(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),si=function(){function e(e,t){this.Io=e,this.params=t}return e.prototype.Ao=function(e,t){return this.Io.Ro(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.Po=function(e,t){var n=this;if(0===t)return pr.resolve(jr.oi);var r=new ri(t);return this.Io.De(e,(function(e){return r.Jr(e.sequenceNumber)})).next((function(){return n.Io.yo(e,(function(e){return r.Jr(e)}))})).next((function(){return r.maxValue}))},e.prototype.Vo=function(e,t,n){return this.Io.Vo(e,t,n)},e.prototype.po=function(e,t){return this.Io.po(e,t)},e.prototype.bo=function(e,t){var n=this;return this.params.so===oi.uo?(p("LruGarbageCollector","Garbage collection skipped; disabled"),pr.resolve(ii)):this.vo(e).next((function(r){return r<n.params.so?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.so),ii):n.So(e,t)}))},e.prototype.vo=function(e){return this.Io.vo(e)},e.prototype.So=function(e,t){var n,r,i,a,s,u,l,c=this,h=Date.now();return this.Ao(e,this.params.io).next((function(t){return t>c.params.ro?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.ro+" from "+t),r=c.params.ro):r=t,a=Date.now(),c.Po(e,r)})).next((function(r){return n=r,s=Date.now(),c.Vo(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.po(e,n)})).next((function(e){return l=Date.now(),d()<=o.LogLevel.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(l-u)+"ms\nTotal Duration: "+(l-h)+"ms"),pr.resolve({Xr:!0,Zr:r,eo:i,no:e})}))},e}();function ui(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ci(t)),t=li(e.get(n),t);return ci(t)}function li(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ci(e){return e+"\x01\x01"}function hi(e){var t=e.length;if(y(t>=2),2===t)return y("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),S.g();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&v(),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:v()}o=a+2}return new S(r)}var fi=function(e){this.Do=e};function di(e,t){if(t.document)return function(e,t,n){var r=Mt(e,t.name),i=Et(t.updateTime),o=new Sn({mapValue:{fields:t.fields}});return new Cn(r,i,o,{hasCommittedMutations:!!n})}(e.Do,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=L.$(t.noDocument.path),r=vi(t.noDocument.readTime);return new Rn(n,r,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var i=L.$(t.unknownDocument.path),o=vi(t.unknownDocument.version);return new On(i,o)}return v()}function pi(e,t,n){var r=mi(n),i=t.key.path.h().A();if(t instanceof Cn){var o=function(e,t){return{name:Tt(e,t.key),fields:t.sn().mapValue.fields,updateTime:bt(e,t.version.X())}}(e.Do,t),a=t.hasCommittedMutations;return new qi(null,null,o,a,r,i)}if(t instanceof Rn){var s=t.key.path.A(),u=Ai(t.version),l=t.hasCommittedMutations;return new qi(null,new Gi(s,u),null,l,r,i)}if(t instanceof On){var c=t.key.path.A(),h=Ai(t.version);return new qi(new Ui(c,h),null,null,!0,r,i)}return v()}function mi(e){var t=e.X();return[t.seconds,t.nanoseconds]}function gi(e){var t=new se(e[0],e[1]);return ue.Y(t)}function Ai(e){var t=e.X();return new Di(t.seconds,t.nanoseconds)}function vi(e){var t=new se(e.seconds,e.nanoseconds);return ue.Y(t)}function yi(e,t){var n=(t.baseMutations||[]).map((function(t){return kt(e.Do,t)})),r=t.mutations.map((function(t){return kt(e.Do,t)})),i=se.fromMillis(t.localWriteTimeMs);return new Qr(t.batchId,i,n,r)}function bi(e){var t,n,r=vi(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?vi(e.lastLimboFreeSnapshotVersion):ue.min();return void 0!==e.query.documents?(y(1===(n=e.query).documents.length),t=Gn(kn(Ct(n.documents[0])))):t=function(e){var t=Ct(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){y(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=function e(t){return t?void 0!==t.unaryFilter?[Wt(t)]:void 0!==t.fieldFilter?[qt(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e(t)})).reduce((function(e,t){return e.concat(t)})):v():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new lr(Ut(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return le(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=jt(n.startAt));var c=null;return n.endAt&&(c=jt(n.endAt)),Gn(Pn(t,i,s,a,u,"F",l,c))}(e.query),new ye(t,e.targetId,0,e.lastListenSequenceNumber,r,i,$.fromBase64String(e.resumeToken))}function _i(e,t){var n,r=Ai(t.et),i=Ai(t.lastLimboFreeSnapshotVersion);n=ge(t.target)?Nt(e.Do,t.target):Dt(e.Do,t.target);var o=t.resumeToken.toBase64();return new zi(t.targetId,pe(t.target),r,o,t.sequenceNumber,i,n)}var wi=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.Sr=n,this.Co=r,this.No={}}return e.Fo=function(t,n,r,i){return y(""!==t.uid),new e(t.Xs()?t.uid:"",n,r,i)},e.prototype.$o=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Si(e).ss({index:Bi.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.xo=function(e,t,n,r){var i=this,o=Ti(e),a=Si(e);return a.add({}).next((function(s){y("number"==typeof s);for(var u=new Qr(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Pt(e.Do,t)})),i=n.mutations.map((function(t){return Pt(e.Do,t)}));return new Bi(t,n.batchId,n.rr.toMillis(),r,i)}(i.serializer,i.userId,u),c=[],h=new Te((function(e,t){return X(e.R(),t.R())})),f=0,d=r;f<d.length;f++){var p=d[f],m=Vi.key(i.userId,p.key.path,s);h=h.add(p.key.path.h()),c.push(a.put(l)),c.push(o.put(m,Vi.PLACEHOLDER))}return h.forEach((function(t){c.push(i.Sr.ko(e,t))})),e.Vr((function(){i.No[s]=u.keys()})),pr.$n(c).next((function(){return u}))}))},e.prototype.Mo=function(e,t){var n=this;return Si(e).get(t).next((function(e){return e?(y(e.userId===n.userId),yi(n.serializer,e)):null}))},e.prototype.Oo=function(e,t){var n=this;return this.No[t]?pr.resolve(this.No[t]):this.Mo(e,t).next((function(e){if(e){var r=e.keys();return n.No[t]=r,r}return null}))},e.prototype.Lo=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Si(e).ss({index:Bi.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(y(t.batchId>=r),o=yi(n.serializer,t)),i.done()})).next((function(){return o}))},e.prototype.Bo=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Si(e).ss({index:Bi.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.qo=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Si(e).Zn(Bi.userMutationsIndex,n).next((function(e){return e.map((function(e){return yi(t.serializer,e)}))}))},e.prototype.Cr=function(e,t){var n=this,r=Vi.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ti(e).ss({range:i},(function(r,i,a){var s=r[0],u=r[1],l=r[2],c=hi(u);if(s===n.userId&&t.path.isEqual(c))return Si(e).get(l).next((function(e){if(!e)throw v();y(e.userId===n.userId),o.push(yi(n.serializer,e))}));a.done()})).next((function(){return o}))},e.prototype.Mr=function(e,t){var n=this,r=new Te(X),i=[];return t.forEach((function(t){var o=Vi.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Ti(e).ss({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],l=hi(s);a===n.userId&&t.path.isEqual(l)?r=r.add(u):o.done()}));i.push(s)})),pr.$n(i).next((function(){return n.Uo(e,r)}))},e.prototype.Qr=function(e,t){var n=this,r=t.path,i=r.length+1,o=Vi.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Te(X);return Ti(e).ss({range:a},(function(e,t,o){var a=e[0],u=e[1],l=e[2],c=hi(u);a===n.userId&&r.T(c)?c.length===i&&(s=s.add(l)):o.done()})).next((function(){return n.Uo(e,s)}))},e.prototype.Uo=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Si(e).get(t).next((function(e){if(null===e)throw v();y(e.userId===n.userId),r.push(yi(n.serializer,e))})))})),pr.$n(i).next((function(){return r}))},e.prototype.Qo=function(e,t){var n=this;return xi(e.Wo,this.userId,t).next((function(r){return e.Vr((function(){n.jo(t.batchId)})),pr.forEach(r,(function(t){return n.Co.Ko(e,t)}))}))},e.prototype.jo=function(e){delete this.No[e]},e.prototype.Go=function(e){var t=this;return this.$o(e).next((function(n){if(!n)return pr.resolve();var r=IDBKeyRange.lowerBound(Vi.prefixForUser(t.userId)),i=[];return Ti(e).ss({range:r},(function(e,n,r){if(e[0]===t.userId){var o=hi(e[1]);i.push(o)}else r.done()})).next((function(){y(0===i.length)}))}))},e.prototype.zo=function(e,t){return Ei(e,this.userId,t)},e.prototype.Ho=function(e){var t=this;return Mi(e).get(this.userId).next((function(e){return e||new ji(t.userId,-1,"")}))},e}();function Ei(e,t,n){var r=Vi.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Ti(e).ss({range:o,ns:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function xi(e,t,n){var r=e.store(Bi.store),i=e.store(Vi.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.ss({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){y(1===s)})));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var f=h[c],d=Vi.key(t,f.key.path,n.batchId);o.push(i.delete(d)),l.push(f.key)}return pr.$n(o).next((function(){return l}))}function Si(e){return so.Un(e,Bi.store)}function Ti(e){return so.Un(e,Vi.store)}function Mi(e){return so.Un(e,ji.store)}var Li=function(){function e(e,t){this.serializer=e,this.Sr=t}return e.prototype.Tr=function(e,t,n){return Ri(e).put(Oi(t),n)},e.prototype.Ir=function(e,t){var n=Ri(e),r=Oi(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Yo(e,r)}))},e.prototype.Ar=function(e,t){var n=this;return Ri(e).get(Oi(t)).next((function(e){return n.Jo(e)}))},e.prototype.Xo=function(e,t){var n=this;return Ri(e).get(Oi(t)).next((function(e){var t=n.Jo(e);return t?{Zo:t,size:Ii(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Re();return this.ta(e,t,(function(e,t){var i=n.Jo(t);r=r.rt(e,i)})).next((function(){return r}))},e.prototype.ea=function(e,t){var n=this,r=Re(),i=new Ee(L.i);return this.ta(e,t,(function(e,t){var o=n.Jo(t);o?(r=r.rt(e,o),i=i.rt(e,Ii(t))):(r=r.rt(e,null),i=i.rt(e,0))})).next((function(){return{na:r,sa:i}}))},e.prototype.ta=function(e,t,n){if(t.m())return pr.resolve();var r=IDBKeyRange.bound(t.first().path.A(),t.last().path.A()),i=t.lt(),o=i.Et();return Ri(e).ss({range:r},(function(e,t,r){for(var a=L.$(e);o&&L.i(o,a)<0;)n(o,null),o=i.Et();o&&o.isEqual(a)&&(n(o,t),o=i.It()?i.Et():null),o?r.Jn(o.path.A()):r.done()})).next((function(){for(;o;)n(o,null),o=i.It()?i.Et():null}))},e.prototype.Or=function(e,t,n){var r=this,i=Ie(),o=t.path.length+1,a={};if(n.isEqual(ue.min())){var s=t.path.A();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.A(),l=mi(n);a.range=IDBKeyRange.lowerBound([u,l],!0),a.index=qi.collectionReadTimeIndex}return Ri(e).ss(a,(function(e,n,a){if(e.length===o){var s=di(r.serializer,n);t.path.T(s.key.path)?s instanceof Cn&&Yn(t,s)&&(i=i.rt(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.ia=function(e,t){var n=this,r=Ce(),i=mi(t),o=Ri(e),a=IDBKeyRange.lowerBound(i,!0);return o.ss({index:qi.readTimeIndex,range:a},(function(e,t){var o=di(n.serializer,t);r=r.rt(o.key,o),i=t.readTime})).next((function(){return{ra:r,readTime:gi(i)}}))},e.prototype.oa=function(e){var t=Ri(e),n=ue.min();return t.ss({index:qi.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=gi(t.readTime)),r.done()})).next((function(){return n}))},e.prototype.aa=function(t){return new e.ca(this,!!t&&t.ua)},e.prototype.ha=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Ci(e).get(Wi.key).next((function(e){return y(!!e),e}))},e.prototype.Yo=function(e,t){return Ci(e).put(Wi.key,t)},e.prototype.Jo=function(e){if(e){var t=di(this.serializer,e);return t instanceof Rn&&t.version.isEqual(ue.min())?null:t}return null},e}();function Ci(e){return so.Un(e,Wi.store)}function Ri(e){return so.Un(e,qi.store)}function Oi(e){return e.path.A()}function Ii(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v();t=e.noDocument}return JSON.stringify(t).length}Li.ca=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).la=t,r.ua=n,r._a=new ae((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return r.__extends(t,e),t.prototype.gr=function(e){var t=this,n=[],r=0,i=new Te((function(e,t){return X(e.R(),t.R())}));return this.dr.forEach((function(o,a){var s=t._a.get(o);if(a){var u=pi(t.la.serializer,a,t.readTime);i=i.add(o.path.h());var l=Ii(u);r+=l-s,n.push(t.la.Tr(e,o,u))}else if(r-=s,t.ua){var c=pi(t.la.serializer,new Rn(o,ue.min()),t.readTime);n.push(t.la.Tr(e,o,c))}else n.push(t.la.Ir(e,o))})),i.forEach((function(r){n.push(t.la.Sr.ko(e,r))})),n.push(this.la.updateMetadata(e,r)),pr.$n(n)},t.prototype.Rr=function(e,t){var n=this;return this.la.Xo(e,t).next((function(e){return null===e?(n._a.set(t,0),null):(n._a.set(t,e.size),e.Zo)}))},t.prototype.Pr=function(e,t){var n=this;return this.la.ea(e,t).next((function(e){var t=e.na;return e.sa.forEach((function(e,t){n._a.set(e,t)})),t}))},t}(Jr);var Pi=function(){function e(){this.fa=new ki}return e.prototype.ko=function(e,t){return this.fa.add(t),pr.resolve()},e.prototype.Ur=function(e,t){return pr.resolve(this.fa.getEntries(t))},e}(),ki=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e._(),n=e.h(),r=this.index[t]||new Te(S.i),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e._(),n=e.h(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Te(S.i)).A()},e}(),Ni=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;y(n<r&&n>=0&&r<=10);var o=new yr(t);n<1&&r>=1&&(function(e){e.createObjectStore(Fi.store)}(e),function(e){e.createObjectStore(ji.store,{keyPath:ji.keyPath}),e.createObjectStore(Bi.store,{keyPath:Bi.keyPath,autoIncrement:!0}).createIndex(Bi.userMutationsIndex,Bi.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Vi.store)}(e),Qi(e),function(e){e.createObjectStore(qi.store)}(e));var a=pr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Hi.store),e.deleteObjectStore(zi.store),e.deleteObjectStore(Ki.store)}(e),Qi(e)),a=a.next((function(){return function(e){var t=e.store(Ki.store),n=new Ki(0,0,ue.min().X(),0);return t.put(Ki.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(Bi.store).Zn().next((function(n){e.deleteObjectStore(Bi.store),e.createObjectStore(Bi.store,{keyPath:Bi.keyPath,autoIncrement:!0}).createIndex(Bi.userMutationsIndex,Bi.userMutationsKeyPath,{unique:!0});var r=t.store(Bi.store),i=n.map((function(e){return r.put(e)}));return pr.$n(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(Xi.store,{keyPath:Xi.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(Wi.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(qi.store);t.createIndex(qi.readTimeIndex,qi.readTimeIndexPath,{unique:!1}),t.createIndex(qi.collectionReadTimeIndex,qi.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(qi.store).ss((function(e,n){t+=Ii(n)})).next((function(){var n=new Wi(t);return e.store(Wi.store).put(Wi.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(ji.store),r=e.store(Bi.store);return n.Zn().next((function(n){return pr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Zn(Bi.userMutationsIndex,i).next((function(r){return pr.forEach(r,(function(r){y(r.userId===n.userId);var i=yi(t.serializer,r);return xi(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(Hi.store),n=e.store(qi.store);return e.store(Ki.store).get(Ki.key).next((function(e){var r=[];return n.ss((function(n,i){var o=new S(n),a=function(e){return[0,ui(e)]}(o);r.push(t.get(a).next((function(n){return n?pr.resolve():function(n){return t.put(new Hi(0,ui(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return pr.$n(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(Yi.store,{keyPath:Yi.keyPath});var n=t.store(Yi.store),r=new ki,i=function(e){if(r.add(e)){var t=e._(),i=e.h();return n.put({collectionId:t,parent:ui(i)})}};return t.store(qi.store).ss({ns:!0},(function(e,t){var n=new S(e);return i(n.h())})).next((function(){return t.store(Vi.store).ss({ns:!0},(function(e,t){e[0];var n=e[1],r=(e[2],hi(n));return i(r.h())}))}))},e.prototype.rewriteCanonicalIds=function(e){var t=this,n=e.store(zi.store);return n.ss((function(e,r){var i=bi(r),o=_i(t.serializer,i);return n.put(o)}))},e}(),Di=function(e,t){this.seconds=e,this.nanoseconds=t},Fi=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Fi.store="owner",Fi.key="owner";var ji=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};ji.store="mutationQueues",ji.keyPath="userId";var Bi=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Bi.store="mutations",Bi.keyPath="batchId",Bi.userMutationsIndex="userMutationsIndex",Bi.userMutationsKeyPath=["userId","batchId"];var Vi=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,ui(t)]},e.key=function(e,t,n){return[e,ui(t),n]},e}();Vi.store="documentMutations",Vi.PLACEHOLDER=new Vi;var Gi=function(e,t){this.path=e,this.readTime=t},Ui=function(e,t){this.path=e,this.version=t},qi=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};qi.store="remoteDocuments",qi.readTimeIndex="readTimeIndex",qi.readTimeIndexPath="readTime",qi.collectionReadTimeIndex="collectionReadTimeIndex",qi.collectionReadTimeIndexPath=["parentPath","readTime"];var Wi=function(e){this.byteSize=e};Wi.store="remoteDocumentGlobal",Wi.key="remoteDocumentGlobalKey";var zi=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};zi.store="targets",zi.keyPath="targetId",zi.queryTargetsIndexName="queryTargetsIndex",zi.queryTargetsKeyPath=["canonicalId","targetId"];var Hi=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Hi.store="targetDocuments",Hi.keyPath=["targetId","path"],Hi.documentTargetsIndex="documentTargetsIndex",Hi.documentTargetsKeyPath=["path","targetId"];var Ki=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ki.key="targetGlobalKey",Ki.store="targetGlobal";var Yi=function(e,t){this.collectionId=e,this.parent=t};function Qi(e){e.createObjectStore(Hi.store,{keyPath:Hi.keyPath}).createIndex(Hi.documentTargetsIndex,Hi.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(zi.store,{keyPath:zi.keyPath}).createIndex(zi.queryTargetsIndexName,zi.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ki.store)}Yi.store="collectionParents",Yi.keyPath=["collectionId","parent"];var Xi=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Xi.store="clientMetadata",Xi.keyPath="clientId";var Ji=r.__spreadArrays(r.__spreadArrays(r.__spreadArrays([ji.store,Bi.store,Vi.store,qi.store,zi.store,Fi.store,Ki.store,Hi.store],[Xi.store]),[Wi.store]),[Yi.store]),Zi=function(){function e(){this.da=new ki}return e.prototype.ko=function(e,t){var n=this;if(!this.da.has(t)){var r=t._(),i=t.h();e.Vr((function(){n.da.add(t)}));var o={collectionId:r,parent:ui(i)};return $i(e).put(o)}return pr.resolve()},e.prototype.Ur=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Z(t),""],!1,!0);return $i(e).Zn(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(hi(o.parent))}return n}))},e}();function $i(e){return so.Un(e,Yi.store)}var eo=function(){function e(e){this.wa=e}return e.prototype.next=function(){return this.wa+=2,this.wa},e.ma=function(){return new e(0)},e.Ta=function(){return new e(-1)},e}(),to=function(){function e(e,t){this.Co=e,this.serializer=t}return e.prototype.Ea=function(e){var t=this;return this.Ia(e).next((function(n){var r=new eo(n.highestTargetId);return n.highestTargetId=r.next(),t.Aa(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.Ra=function(e){return this.Ia(e).next((function(e){return ue.Y(new se(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.Pa=function(e){return this.Ia(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.ga=function(e,t,n){var r=this;return this.Ia(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.X()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Aa(e,i)}))},e.prototype.ya=function(e,t){var n=this;return this.Va(e,t).next((function(){return n.Ia(e).next((function(r){return r.targetCount+=1,n.pa(t,r),n.Aa(e,r)}))}))},e.prototype.ba=function(e,t){return this.Va(e,t)},e.prototype.va=function(e,t){var n=this;return this.Sa(e,t.targetId).next((function(){return no(e).delete(t.targetId)})).next((function(){return n.Ia(e)})).next((function(t){return y(t.targetCount>0),t.targetCount-=1,n.Aa(e,t)}))},e.prototype.Vo=function(e,t,n){var r=this,i=0,o=[];return no(e).ss((function(a,s){var u=bi(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.va(e,u)))})).next((function(){return pr.$n(o)})).next((function(){return i}))},e.prototype.De=function(e,t){return no(e).ss((function(e,n){var r=bi(n);t(r)}))},e.prototype.Ia=function(e){return ro(e).get(Ki.key).next((function(e){return y(null!==e),e}))},e.prototype.Aa=function(e,t){return ro(e).put(Ki.key,t)},e.prototype.Va=function(e,t){return no(e).put(_i(this.serializer,t))},e.prototype.pa=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.Da=function(e){return this.Ia(e).next((function(e){return e.targetCount}))},e.prototype.Ca=function(e,t){var n=pe(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return no(e).ss({range:r,index:zi.queryTargetsIndexName},(function(e,n,r){var o=bi(n);me(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.Na=function(e,t,n){var r=this,i=[],o=io(e);return t.forEach((function(t){var a=ui(t.path);i.push(o.put(new Hi(n,a))),i.push(r.Co.Fa(e,n,t))})),pr.$n(i)},e.prototype.$a=function(e,t,n){var r=this,i=io(e);return pr.forEach(t,(function(t){var o=ui(t.path);return pr.$n([i.delete([n,o]),r.Co.xa(e,n,t)])}))},e.prototype.Sa=function(e,t){var n=io(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.ka=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=io(e),i=Ne();return r.ss({range:n,ns:!0},(function(e,t,n){var r=hi(e[1]),o=new L(r);i=i.add(o)})).next((function(){return i}))},e.prototype.zo=function(e,t){var n=ui(t.path),r=IDBKeyRange.bound([n],[Z(n)],!1,!0),i=0;return io(e).ss({index:Hi.documentTargetsIndex,ns:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.qe=function(e,t){return no(e).get(t).next((function(e){return e?bi(e):null}))},e}();function no(e){return so.Un(e,zi.store)}function ro(e){return so.Un(e,Ki.store)}function io(e){return so.Un(e,Hi.store)}var oo="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ao=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Wo=t,r.Ma=n,r}return r.__extends(t,e),t}($r),so=function(){function e(t,n,r,i,o,a,s,u,l,f){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this._n=o,this.window=a,this.document=s,this.Oa=l,this.La=f,this.Ba=null,this.qa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ua=null,this.inForeground=!1,this.Qa=null,this.Wa=null,this.ja=Number.NEGATIVE_INFINITY,this.Ka=function(e){return Promise.resolve()},!e.On())throw new h(c.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Co=new co(this,i),this.Ga=n+"main",this.serializer=new fi(u),this.za=new mr(this.Ga,10,new Ni(this.serializer)),this.Ha=new to(this.Co,this.serializer),this.Sr=new Zi,this.br=new Li(this.serializer,this.Sr),this.window&&this.window.localStorage?this.Ya=this.window.localStorage:(this.Ya=null,!1===f&&m("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.Un=function(e,t){if(e instanceof ao)return mr.Un(e.Wo,t);throw v()},e.prototype.start=function(){var e=this;return this.Ja().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new h(c.FAILED_PRECONDITION,oo);return e.Xa(),e.Za(),e.tc(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ha.Pa(t)}))})).then((function(t){e.Ba=new jr(t,e.Oa)})).then((function(){e.qa=!0})).catch((function(t){return e.za&&e.za.close(),Promise.reject(t)}))},e.prototype.ec=function(e){var t=this;return this.Ka=function(n){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.Ti?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.nc=function(e){var t=this;this.za.jn((function(n){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.sc=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this._n.ds((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.Ti?[4,this.Ja()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.Ja=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return lo(t).put(new Xi(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.ic(t).next((function(t){t||(e.isPrimary=!1,e._n.Ds((function(){return e.Ka(!1)})))}))})).next((function(){return e.rc(t)})).next((function(n){return e.isPrimary&&!n?e.oc(t).next((function(){return!1})):!!n&&e.ac(t).next((function(){return!0}))}))})).catch((function(t){if(vr(t))return p("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e._n.Ds((function(){return e.Ka(t)})),e.isPrimary=t}))},e.prototype.ic=function(e){var t=this;return uo(e).get(Fi.key).next((function(e){return pr.resolve(t.cc(e))}))},e.prototype.uc=function(e){return lo(e).delete(this.clientId)},e.prototype.hc=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,a=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.lc(this.ja,18e5)?[3,2]:(this.ja=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var n=e.Un(t,Xi.store);return n.Zn().next((function(e){var t=a._c(e,18e5),r=e.filter((function(e){return-1===t.indexOf(e)}));return pr.forEach(r,(function(e){return n.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=r.sent(),this.Ya)for(n=0,i=t;n<i.length;n++)o=i[n],this.Ya.removeItem(this.fc(o.clientId));r.label=2;case 2:return[2]}}))}))},e.prototype.tc=function(){var e=this;this.Wa=this._n.gn("client_metadata_refresh",4e3,(function(){return e.Ja().then((function(){return e.hc()})).then((function(){return e.tc()}))}))},e.prototype.cc=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.rc=function(e){var t=this;return this.La?pr.resolve(!0):uo(e).get(Fi.key).next((function(n){if(null!==n&&t.lc(n.leaseTimestampMs,5e3)&&!t.dc(n.ownerId)){if(t.cc(n)&&t.networkEnabled)return!0;if(!t.cc(n)){if(!n.allowTabSynchronization)throw new h(c.FAILED_PRECONDITION,oo);return!1}}return!(!t.networkEnabled||!t.inForeground)||lo(e).Zn().next((function(e){return void 0===t._c(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&p("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.Si=function(){return r.__awaiter(this,void 0,void 0,(function(){var e=this;return r.__generator(this,(function(t){switch(t.label){case 0:return this.qa=!1,this.wc(),this.Wa&&(this.Wa.cancel(),this.Wa=null),this.mc(),this.Tc(),[4,this.za.runTransaction("readwrite",[Fi.store,Xi.store],(function(t){var n=new ao(t,jr.oi);return e.oc(n).next((function(){return e.uc(n)}))}))];case 1:return t.sent(),this.za.close(),this.Ec(),[2]}}))}))},e.prototype._c=function(e,t){var n=this;return e.filter((function(e){return n.lc(e.updateTimeMs,t)&&!n.dc(e.clientId)}))},e.prototype.Vi=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return lo(t).Zn().next((function(t){return e._c(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"Ti",{get:function(){return this.qa},enumerable:!1,configurable:!0}),e.prototype.Ic=function(e){return wi.Fo(e,this.serializer,this.Sr,this.Co)},e.prototype.Ac=function(){return this.Ha},e.prototype.Rc=function(){return this.br},e.prototype.Pc=function(){return this.Sr},e.prototype.runTransaction=function(e,t,n){var r=this;p("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.za.runTransaction(o,Ji,(function(o){return i=new ao(o,r.Ba?r.Ba.next():jr.oi),"readwrite-primary"===t?r.ic(i).next((function(e){return!!e||r.rc(i)})).next((function(t){if(!t)throw m("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r._n.Ds((function(){return r.Ka(!1)})),new h(c.FAILED_PRECONDITION,Zr);return n(i)})).next((function(e){return r.ac(i).next((function(){return e}))})):r.gc(i).next((function(){return n(i)}))})).then((function(e){return i.pr(),e}))},e.prototype.gc=function(e){var t=this;return uo(e).get(Fi.key).next((function(e){if(null!==e&&t.lc(e.leaseTimestampMs,5e3)&&!t.dc(e.ownerId)&&!t.cc(e)&&!(t.La||t.allowTabSynchronization&&e.allowTabSynchronization))throw new h(c.FAILED_PRECONDITION,oo)}))},e.prototype.ac=function(e){var t=new Fi(this.clientId,this.allowTabSynchronization,Date.now());return uo(e).put(Fi.key,t)},e.On=function(){return mr.On()},e.prototype.oc=function(e){var t=this,n=uo(e);return n.get(Fi.key).next((function(e){return t.cc(e)?(p("IndexedDbPersistence","Releasing primary lease."),n.delete(Fi.key)):pr.resolve()}))},e.prototype.lc=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(m("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.Xa=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Qa=function(){e._n.ds((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ja()}))},this.document.addEventListener("visibilitychange",this.Qa),this.inForeground="visible"===this.document.visibilityState)},e.prototype.mc=function(){this.Qa&&(this.document.removeEventListener("visibilitychange",this.Qa),this.Qa=null)},e.prototype.Za=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ua=function(){t.wc(),t._n.ds((function(){return t.Si()}))},this.window.addEventListener("unload",this.Ua))},e.prototype.Tc=function(){this.Ua&&(this.window.removeEventListener("unload",this.Ua),this.Ua=null)},e.prototype.dc=function(e){var t;try{var n=null!==(null===(t=this.Ya)||void 0===t?void 0:t.getItem(this.fc(e)));return p("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return m("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.wc=function(){if(this.Ya)try{this.Ya.setItem(this.fc(this.clientId),String(Date.now()))}catch(r){m("Failed to set zombie client id.",r)}},e.prototype.Ec=function(){if(this.Ya)try{this.Ya.removeItem(this.fc(this.clientId))}catch(r){}},e.prototype.fc=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function uo(e){return so.Un(e,Fi.store)}function lo(e){return so.Un(e,Xi.store)}var co=function(){function e(e,t){this.db=e,this.do=new si(this,t)}return e.prototype.Ro=function(e){var t=this.yc(e);return this.db.Ac().Da(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.yc=function(e){var t=0;return this.yo(e,(function(e){t++})).next((function(){return t}))},e.prototype.De=function(e,t){return this.db.Ac().De(e,t)},e.prototype.yo=function(e,t){return this.Vc(e,(function(e,n){return t(n)}))},e.prototype.Fa=function(e,t,n){return ho(e,n)},e.prototype.xa=function(e,t,n){return ho(e,n)},e.prototype.Vo=function(e,t,n){return this.db.Ac().Vo(e,t,n)},e.prototype.Ko=function(e,t){return ho(e,t)},e.prototype.bc=function(e,t){return function(e,t){var n=!1;return Mi(e).rs((function(r){return Ei(e,r,t).next((function(e){return e&&(n=!0),pr.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.po=function(e,t){var n=this,r=this.db.Rc().aa(),i=[],o=0;return this.Vc(e,(function(a,s){if(s<=t){var u=n.bc(e,a).next((function(t){if(!t)return o++,r.Ar(e,a).next((function(){return r.Ir(a),io(e).delete([0,ui(a.path)])}))}));i.push(u)}})).next((function(){return pr.$n(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.nt(e.Ma);return this.db.Ac().ba(e,n)},e.prototype.vc=function(e,t){return ho(e,t)},e.prototype.Vc=function(e,t){var n,r=io(e),i=jr.oi;return r.ss({index:Hi.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==jr.oi&&t(new L(hi(n)),i),i=s,n=a):i=jr.oi})).next((function(){i!==jr.oi&&t(new L(hi(n)),i)}))},e.prototype.vo=function(e){return this.db.Rc().ha(e)},e}();function ho(e,t){return io(e).put(function(e,t){return new Hi(0,ui(e.path),t)}(t,e.Ma))}function fo(e,t){var n=e.projectId;return e.W||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var po=function(){function e(e,t,n){this.persistence=e,this.Sc=t,this.Dc=new Ee(X),this.Cc=new ae((function(e){return pe(e)}),me),this.Nc=ue.min(),this.vr=e.Ic(n),this.Fc=e.Rc(),this.Ha=e.Ac(),this.$c=new ei(this.Fc,this.vr,this.persistence.Pc()),this.Sc.xc(this.$c)}return e.prototype.Eo=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.bo(n,t.Dc)}))},e}();function mo(e,t){var n=b(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Fc.aa({ua:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=pr.resolve();return o.forEach((function(e){a=a.next((function(){return r.Ar(t,e)})).next((function(t){var o=t,a=n._r.get(e);y(null!==a),(!o||o.version.L(a)<0)&&(o=i.ar(e,o,n))&&r.Tr(o,n.lr)}))})),a.next((function(){return e.vr.Qo(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.vr.Go(e)})).next((function(){return n.$c.$r(e,r)}))}))}function go(e){var t=b(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ha.Ra(e)}))}function Ao(e,t){var n=b(e),r=t.et,i=n.Dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.Fc.aa({ua:!0});i=n.Dc;var a=[];t.Gt.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.Ha.$a(e,t.ne,o).next((function(){return n.Ha.Na(e,t.te,o)})));var u=t.resumeToken;if(u.O()>0){var l=s.st(u,r).nt(e.Ma);i=i.rt(o,l),function(e,t,n){return y(t.resumeToken.O()>0),0===e.resumeToken.O()||t.et.J()-e.et.J()>=3e8||n.te.size+n.ee.size+n.ne.size>0}(s,l,t)&&a.push(n.Ha.ba(e,l))}}}));var s=Ce(),u=Ne();if(t.Ht.forEach((function(e,t){u=u.add(e)})),a.push(o.getEntries(e,u).next((function(i){t.Ht.forEach((function(u,l){var c=i.get(u);l instanceof Rn&&l.version.isEqual(ue.min())?(o.Ir(u,r),s=s.rt(u,l)):null==c||l.version.L(c.version)>0||0===l.version.L(c.version)&&c.hasPendingWrites?(o.Tr(l,r),s=s.rt(u,l)):p("LocalStore","Ignoring outdated watch update for ",u,". Current version:",c.version," Watch version:",l.version),t.Yt.has(u)&&a.push(n.persistence.Co.vc(e,u))}))}))),!r.isEqual(ue.min())){var l=n.Ha.Ra(e).next((function(t){return n.Ha.ga(e,e.Ma,r)}));a.push(l)}return pr.$n(a).next((function(){return o.apply(e)})).next((function(){return n.$c.kr(e,s)}))})).then((function(e){return n.Dc=i,e}))}function vo(e,t){var n=b(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.vr.Lo(e,t)}))}function yo(e,t){var n=b(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ha.Ca(e,t).next((function(i){return i?(r=i,pr.resolve(r)):n.Ha.Ea(e).next((function(i){return r=new ye(t,i,0,e.Ma),n.Ha.ya(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Dc.get(e.targetId);return(null===r||e.et.L(r.et)>0)&&(n.Dc=n.Dc.rt(e.targetId,e),n.Cc.set(t,e.targetId)),e}))}function bo(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:i=b(e),o=i.Dc.get(t),a=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",a,(function(e){return i.persistence.Co.removeTarget(e,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!vr(s=r.sent()))throw s;return p("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return i.Dc=i.Dc.remove(t),i.Cc.delete(o.target),[2]}}))}))}function _o(e,t,n){var r=b(e),i=ue.min(),o=Ne();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=b(e),i=r.Cc.get(n);return void 0!==i?pr.resolve(r.Dc.get(i)):r.Ha.Ca(t,n)}(r,e,Gn(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ha.ka(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.Sc.Or(e,t,n?i:ue.min(),n?o:Ne())})).next((function(e){return{documents:e,kc:o}}))}))}function wo(e,t){var n=b(e),r=b(n.Ha),i=n.Dc.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.qe(e,t).next((function(e){return e?e.target:null}))}))}function Eo(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){if(e.code!==c.FAILED_PRECONDITION||e.message!==Zr)throw e;return p("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var xo=function(){function e(){this.Mc=new Te(So.Oc),this.Lc=new Te(So.Bc)}return e.prototype.m=function(){return this.Mc.m()},e.prototype.Fa=function(e,t){var n=new So(e,t);this.Mc=this.Mc.add(n),this.Lc=this.Lc.add(n)},e.prototype.qc=function(e,t){var n=this;e.forEach((function(e){return n.Fa(e,t)}))},e.prototype.xa=function(e,t){this.Uc(new So(e,t))},e.prototype.Qc=function(e,t){var n=this;e.forEach((function(e){return n.xa(e,t)}))},e.prototype.Wc=function(e){var t=this,n=new L(new S([])),r=new So(n,e),i=new So(n,e+1),o=[];return this.Lc.Nt([r,i],(function(e){t.Uc(e),o.push(e.key)})),o},e.prototype.jc=function(){var e=this;this.Mc.forEach((function(t){return e.Uc(t)}))},e.prototype.Uc=function(e){this.Mc=this.Mc.delete(e),this.Lc=this.Lc.delete(e)},e.prototype.Kc=function(e){var t=new L(new S([])),n=new So(t,e),r=new So(t,e+1),i=Ne();return this.Lc.Nt([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.zo=function(e){var t=new So(e,0),n=this.Mc.$t(t);return null!==n&&e.isEqual(n.key)},e}(),So=function(){function e(e,t){this.key=e,this.Gc=t}return e.Oc=function(e,t){return L.i(e.key,t.key)||X(e.Gc,t.Gc)},e.Bc=function(e,t){return X(e.Gc,t.Gc)||L.i(e.key,t.key)},e}(),To=function(e,t){this.user=t,this.type="OAuth",this.zc={},this.zc.Authorization="Bearer "+e},Mo=function(){function e(){this.Hc=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.Yc=function(){},e.prototype.Jc=function(e){this.Hc=e,e(Fr.UNAUTHENTICATED)},e.prototype.Xc=function(){this.Hc=null},e}(),Lo=function(){function e(e){var t=this;this.Zc=null,this.currentUser=Fr.UNAUTHENTICATED,this.tu=!1,this.eu=0,this.Hc=null,this.forceRefresh=!1,this.Zc=function(){t.eu++,t.currentUser=t.nu(),t.tu=!0,t.Hc&&t.Hc(t.currentUser)},this.eu=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Zc):(this.Zc(null),e.get().then((function(e){t.auth=e,t.Zc&&t.auth.addAuthTokenListener(t.Zc)}),(function(){})))}return e.prototype.getToken=function(){var e=this,t=this.eu,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.eu!==t?(p("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(y("string"==typeof n.accessToken),new To(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.Yc=function(){this.forceRefresh=!0},e.prototype.Jc=function(e){this.Hc=e,this.tu&&e(this.currentUser)},e.prototype.Xc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Zc),this.Zc=null,this.Hc=null},e.prototype.nu=function(){var e=this.auth&&this.auth.getUid();return y(null===e||"string"==typeof e),new Fr(e)},e}(),Co=function(){function e(e,t){this.su=e,this.iu=t,this.type="FirstParty",this.user=Fr.ei}return Object.defineProperty(e.prototype,"zc",{get:function(){var e={"X-Goog-AuthUser":this.iu},t=this.su.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!1,configurable:!0}),e}(),Ro=function(){function e(e,t){this.su=e,this.iu=t}return e.prototype.getToken=function(){return Promise.resolve(new Co(this.su,this.iu))},e.prototype.Jc=function(e){e(Fr.ei)},e.prototype.Xc=function(){},e.prototype.Yc=function(){},e}(),Oo=function(){function e(e,t,n,r,i,o){this._n=e,this.ru=n,this.ou=r,this.au=i,this.listener=o,this.state=0,this.cu=0,this.uu=null,this.stream=null,this.gs=new dr(e,t)}return e.prototype.hu=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.lu=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this._u()},e.prototype.stop=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.hu()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.fu=function(){this.state=0,this.gs.reset()},e.prototype.du=function(){var e=this;this.lu()&&null===this.uu&&(this.uu=this._n.gn(this.ru,6e4,(function(){return e.wu()})))},e.prototype.mu=function(e){this.Tu(),this.stream.send(e)},e.prototype.wu=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.lu()?[2,this.close(0)]:[2]}))}))},e.prototype.Tu=function(){this.uu&&(this.uu.cancel(),this.uu=null)},e.prototype.close=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return this.Tu(),this.gs.cancel(),this.cu++,3!==e?this.gs.reset():t&&t.code===c.RESOURCE_EXHAUSTED?(m(t.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.gs.An()):t&&t.code===c.UNAUTHENTICATED&&this.au.Yc(),null!==this.stream&&(this.Eu(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Iu(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.Eu=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.Au(this.cu),n=this.cu;this.au.getToken().then((function(t){e.cu===n&&e.Ru(t)}),(function(n){t((function(){var t=new h(c.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Pu(t)}))}))},e.prototype.Ru=function(e){var t=this,n=this.Au(this.cu);this.stream=this.gu(e),this.stream.yu((function(){n((function(){return t.state=2,t.listener.yu()}))})),this.stream.Iu((function(e){n((function(){return t.Pu(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype._u=function(){var e=this;this.state=4,this.gs.Rn((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.Pu=function(e){return p("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.Au=function(e){var t=this;return function(n){t._n.ds((function(){return t.cu===e?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Io=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return r.__extends(t,e),t.prototype.gu=function(e){return this.ou.Vu("Listen",e)},t.prototype.onMessage=function(e){this.gs.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:v()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.Ue?(y(void 0===t||"string"==typeof t),$.fromBase64String(t||"")):(y(void 0===t||t instanceof Uint8Array),$.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){var t=void 0===e.code?c.UNKNOWN:we(e.code);return new h(t,e.message||"")}(a);n=new ze(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=Mt(e,u.document.name),f=Et(u.document.updateTime),d=new Sn({mapValue:{fields:u.document.fields}}),p=new Cn(l,f,d,{}),m=u.targetIds||[],g=u.removedTargetIds||[];n=new qe(m,g,p.key,p)}else if("documentDelete"in t){t.documentDelete;var A=t.documentDelete;A.document;var b=Mt(e,A.document),_=A.readTime?Et(A.readTime):ue.min(),w=new Rn(b,_),E=A.removedTargetIds||[];n=new qe([],E,w.key,w)}else if("documentRemove"in t){t.documentRemove;var x=t.documentRemove;x.document;var S=Mt(e,x.document),T=x.removedTargetIds||[];n=new qe([],T,S,null)}else{if(!("filter"in t))return v();t.filter;var M=t.filter;M.targetId;var L=M.count||0,C=new be(L),R=M.targetId;n=new We(R,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ue.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ue.min():t.readTime?Et(t.readTime):ue.min()}(e);return this.listener.pu(t,n)},t.prototype.bu=function(e){var t={};t.database=Rt(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=ge(r)?{documents:Nt(e,r)}:{query:Dt(e,r)}).targetId=t.targetId,t.resumeToken.O()>0&&(n.resumeToken=_t(e,t.resumeToken)),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return v()}}(0,t.tt);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.mu(t)},t.prototype.vu=function(e){var t={};t.database=Rt(this.serializer),t.removeTarget=e,this.mu(t)},t}(Oo),Po=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.Su=!1,a}return r.__extends(t,e),Object.defineProperty(t.prototype,"Du",{get:function(){return this.Su},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.Su=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.Eu=function(){this.Su&&this.Cu([])},t.prototype.gu=function(e){return this.ou.Vu("Write",e)},t.prototype.onMessage=function(e){if(y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Su){this.gs.reset();var t=function(e,t){return e&&e.length>0?(y(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Et(e.updateTime):Et(t);n.isEqual(ue.min())&&(n=Et(t));var r=null;return e.transformResults&&e.transformResults.length>0&&(r=e.transformResults),new un(n,r)}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Et(e.commitTime);return this.listener.Nu(n,t)}return y(!e.writeResults||0===e.writeResults.length),this.Su=!0,this.listener.Fu()},t.prototype.$u=function(){var e={};e.database=Rt(this.serializer),this.mu(e)},t.prototype.Cu=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Pt(t.serializer,e)}))};this.mu(n)},t}(Oo),ko=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.ou=n,i.serializer=r,i.xu=!1,i}return r.__extends(t,e),t.prototype.ku=function(){if(this.xu)throw new h(c.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Mu=function(e,t,n){var r=this;return this.ku(),this.credentials.getToken().then((function(i){return r.ou.Mu(e,t,n,i)})).catch((function(e){throw e.code===c.UNAUTHENTICATED&&r.credentials.Yc(),e}))},t.prototype.Ou=function(e,t,n){var r=this;return this.ku(),this.credentials.getToken().then((function(i){return r.ou.Ou(e,t,n,i)})).catch((function(e){throw e.code===c.UNAUTHENTICATED&&r.credentials.Yc(),e}))},t.prototype.terminate=function(){this.xu=!1},t}((function(){})),No=function(){function e(e,t){this.os=e,this.fi=t,this.state="Unknown",this.Lu=0,this.Bu=null,this.qu=!0}return e.prototype.Uu=function(){var e=this;0===this.Lu&&(this.Qu("Unknown"),this.Bu=this.os.gn("online_state_timeout",1e4,(function(){return e.Bu=null,e.Wu("Backend didn't respond within 10 seconds."),e.Qu("Offline"),Promise.resolve()})))},e.prototype.ju=function(e){"Online"===this.state?this.Qu("Unknown"):(this.Lu++,this.Lu>=1&&(this.Ku(),this.Wu("Connection failed 1 times. Most recent error: "+e.toString()),this.Qu("Offline")))},e.prototype.set=function(e){this.Ku(),this.Lu=0,"Online"===e&&(this.qu=!1),this.Qu(e)},e.prototype.Qu=function(e){e!==this.state&&(this.state=e,this.fi(e))},e.prototype.Wu=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.qu?(m(t),this.qu=!1):p("OnlineStateTracker",t)},e.prototype.Ku=function(){null!==this.Bu&&(this.Bu.cancel(),this.Bu=null)},e}(),Do=function(e,t,n,i,o){var a=this;this.Gu=e,this.zu=t,this.os=n,this.Hu={},this.Yu=[],this.Ju=new Map,this.Xu=new Set,this.Zu=[],this.th=o,this.th.eh((function(e){n.ds((function(){return r.__awaiter(a,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return Ho(this)?(p("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return(t=b(e)).Xu.add(4),[4,jo(t)];case 1:return n.sent(),t.nh.set("Unknown"),t.Xu.delete(4),[4,Fo(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.nh=new No(n,i)};function Fo(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:if(!Ho(e))return[3,4];t=0,n=e.Zu,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function jo(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:t=0,n=e.Zu,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Bo(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return t=b(e),p("RemoteStore","RemoteStore shutting down."),t.Xu.add(5),[4,jo(t)];case 1:return n.sent(),t.th.Si(),t.nh.set("Unknown"),[2]}}))}))}function Vo(e,t){var n=b(e);n.Ju.has(t.targetId)||(n.Ju.set(t.targetId,t),zo(n)?Wo(n):sa(n).lu()&&Uo(n,t))}function Go(e,t){var n=b(e),r=sa(n);n.Ju.delete(t),r.lu()&&qo(n,t),0===n.Ju.size&&(r.lu()?r.du():Ho(n)&&n.nh.set("Unknown"))}function Uo(e,t){e.sh.Ee(t.targetId),sa(e).bu(t)}function qo(e,t){e.sh.Ee(t),sa(e).vu(t)}function Wo(e){e.sh=new Ke({Be:function(t){return e.Hu.Be(t)},qe:function(t){return e.Ju.get(t)||null}}),sa(e).start(),e.nh.Uu()}function zo(e){return Ho(e)&&!sa(e).hu()&&e.Ju.size>0}function Ho(e){return 0===b(e).Xu.size}function Ko(e){e.sh=void 0}function Yo(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return e.Ju.forEach((function(t,n){Uo(e,t)})),[2]}))}))}function Qo(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){return Ko(e),zo(e)?(e.nh.ju(t),Wo(e)):e.nh.set("Unknown"),[2]}))}))}function Xo(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a;return r.__generator(this,(function(s){switch(s.label){case 0:if(e.nh.set("Online"),!(t instanceof ze&&2===t.state&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:n=t.cause,i=0,o=t.targetIds,r.label=1;case 1:return i<o.length?(a=o[i],e.Ju.has(a)?[4,e.Hu.ih(a,n)]:[3,3]):[3,5];case 2:r.sent(),e.Ju.delete(a),e.sh.removeTarget(a),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return s.sent(),[3,5];case 3:return i=s.sent(),p("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),[4,Jo(e,i)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof qe?e.sh.pe(t):t instanceof We?e.sh.$e(t):e.sh.Se(t),n.isEqual(ue.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,go(e.Gu)];case 8:return o=s.sent(),n.L(o)>=0?[4,function(e,t){var n=e.sh.Me(t);return n.Gt.forEach((function(n,r){if(n.resumeToken.O()>0){var i=e.Ju.get(r);i&&e.Ju.set(r,i.st(n.resumeToken,t))}})),n.zt.forEach((function(t){var n=e.Ju.get(t);if(n){e.Ju.set(t,n.st($.B,n.et)),qo(e,t);var r=new ye(n.target,t,1,n.sequenceNumber);Uo(e,r)}})),e.Hu.rh(n)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return p("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,Jo(e,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Jo(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i=this;return r.__generator(this,(function(o){switch(o.label){case 0:if(!vr(t))throw t;return e.Xu.add(1),[4,jo(e)];case 1:return o.sent(),e.nh.set("Offline"),n||(n=function(){return go(e.Gu)}),e.os.Ds((function(){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return p("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Xu.delete(1),[4,Fo(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function Zo(e,t){return t().catch((function(n){return Jo(e,n,t)}))}function $o(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:t=b(e),n=ua(t),i=t.Yu.length>0?t.Yu[t.Yu.length-1].batchId:-1,r.label=1;case 1:if(!function(e){return Ho(e)&&e.Yu.length<10}(t))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,vo(t.Gu,i)];case 3:return null===(o=r.sent())?(0===t.Yu.length&&n.du(),[3,7]):(i=o.batchId,function(e,t){e.Yu.push(t);var n=ua(e);n.lu()&&n.Du&&n.Cu(t.mutations)}(t,o),[3,6]);case 4:return a=r.sent(),[4,Jo(t,a)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return ea(t)&&ta(t),[2]}}))}))}function ea(e){return Ho(e)&&!ua(e).hu()&&e.Yu.length>0}function ta(e){ua(e).start()}function na(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return ua(e).$u(),[2]}))}))}function ra(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o;return r.__generator(this,(function(r){for(t=ua(e),n=0,i=e.Yu;n<i.length;n++)o=i[n],t.Cu(o.mutations);return[2]}))}))}function ia(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return i=e.Yu.shift(),o=Xr.from(i,t,n),[4,Zo(e,(function(){return e.Hu.oh(o)}))];case 1:return r.sent(),[4,$o(e)];case 2:return r.sent(),[2]}}))}))}function oa(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return t&&ua(e).Du?[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return _e(i=t.code)&&i!==c.ABORTED?(n=e.Yu.shift(),ua(e).fu(),[4,Zo(e,(function(){return e.Hu.ah(n.batchId,t)}))]):[3,3];case 1:return r.sent(),[4,$o(e)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ea(e)&&ta(e),[2]}}))}))}function aa(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n=b(e),t?(n.Xu.delete(2),[4,Fo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Xu.add(2),[4,jo(n)]);case 3:r.sent(),n.nh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function sa(e){var t=this;return e.uh||(e.uh=function(e,t,n){var r=b(e);return r.ku(),new Io(t,r.ou,r.credentials,r.serializer,n)}(e.zu,e.os,{yu:Yo.bind(null,e),Iu:Qo.bind(null,e),pu:Xo.bind(null,e)}),e.Zu.push((function(n){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return n?(e.uh.fu(),zo(e)?Wo(e):e.nh.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.uh.stop()];case 2:t.sent(),Ko(e),t.label=3;case 3:return[2]}}))}))}))),e.uh}function ua(e){var t=this;return e.hh||(e.hh=function(e,t,n){var r=b(e);return r.ku(),new Po(t,r.ou,r.credentials,r.serializer,n)}(e.zu,e.os,{yu:na.bind(null,e),Iu:oa.bind(null,e),Fu:ra.bind(null,e),Nu:ia.bind(null,e)}),e.Zu.push((function(n){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return n?(e.hh.fu(),[4,$o(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.hh.stop()];case 3:t.sent(),e.Yu.length>0&&(p("RemoteStore","Stopping write stream with "+e.Yu.length+" pending writes"),e.Yu=[]),t.label=4;case 4:return[2]}}))}))}))),e.hh}var la=function(e){this.key=e},ca=function(e){this.key=e},ha=function(){function e(e,t){this.query=e,this.lh=t,this._h=null,this.Zt=!1,this.fh=Ne(),this.Qt=Ne(),this.dh=Qn(e),this.wh=new je(this.dh)}return Object.defineProperty(e.prototype,"mh",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.Th=function(e,t){var n=this,r=t?t.Eh:new Be,i=t?t.wh:this.wh,o=t?t.Qt:this.Qt,a=i,s=!1,u=Nn(this.query)&&i.size===this.query.limit?i.last():null,l=Dn(this.query)&&i.size===this.query.limit?i.first():null;if(e.ut((function(e,t){var c=i.get(e),h=t instanceof Cn?t:null;h&&(h=Yn(n.query,h)?h:null);var f=!!c&&n.Qt.has(c.key),d=!!h&&(h.Ye||n.Qt.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ih(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.dh(h,u)>0||l&&n.dh(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),Nn(this.query)||Dn(this.query))for(;a.size>this.query.limit;){var c=Nn(this.query)?a.last():a.first();a=a.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{wh:a,Eh:r,Ah:s,Qt:o}},e.prototype.Ih=function(e,t){return e.Ye&&t.hasCommittedMutations&&!t.Ye},e.prototype.gr=function(e,t,n){var r=this,i=this.wh;this.wh=e.wh,this.Qt=e.Qt;var o=e.Eh.qt();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v()}};return n(e)-n(t)}(e.type,t.type)||r.dh(e.doc,t.doc)})),this.Rh(n);var a=t?this.Ph():[],s=0===this.fh.size&&this.Zt?1:0,u=s!==this._h;return this._h=s,0!==o.length||u?{snapshot:new Ve(this.query,e.wh,i,o,e.Qt,0===s,u,!1),gh:a}:{gh:a}},e.prototype.Us=function(e){return this.Zt&&"Offline"===e?(this.Zt=!1,this.gr({wh:this.wh,Eh:new Be,Qt:this.Qt,Ah:!1},!1)):{gh:[]}},e.prototype.yh=function(e){return!this.lh.has(e)&&!!this.wh.has(e)&&!this.wh.get(e).Ye},e.prototype.Rh=function(e){var t=this;e&&(e.te.forEach((function(e){return t.lh=t.lh.add(e)})),e.ee.forEach((function(e){})),e.ne.forEach((function(e){return t.lh=t.lh.delete(e)})),this.Zt=e.Zt)},e.prototype.Ph=function(){var e=this;if(!this.Zt)return[];var t=this.fh;this.fh=Ne(),this.wh.forEach((function(t){e.yh(t.key)&&(e.fh=e.fh.add(t.key))}));var n=[];return t.forEach((function(t){e.fh.has(t)||n.push(new ca(t))})),this.fh.forEach((function(e){t.has(e)||n.push(new la(e))})),n},e.prototype.Vh=function(e){this.lh=e.kc,this.fh=Ne();var t=this.Th(e.documents);return this.gr(t,!0)},e.prototype.ph=function(){return Ve.Kt(this.query,this.wh,this.Qt,0===this._h)},e}(),fa=function(e,t,n){this.query=e,this.targetId=t,this.view=n},da=function(e){this.key=e,this.bh=!1},pa=function(){function e(e,t,n,r,i,o){this.Gu=e,this.Sh=t,this.Dh=n,this.Ch=r,this.currentUser=i,this.Nh=o,this.Fh={},this.$h=new ae((function(e){return Hn(e)}),zn),this.xh=new Map,this.kh=[],this.Mh=new Ee(L.i),this.Oh=new Map,this.Lh=new xo,this.Bh={},this.qh=new Map,this.Uh=eo.Ta(),this.onlineState="Unknown",this.Qh=void 0}return Object.defineProperty(e.prototype,"Wh",{get:function(){return!0===this.Qh},enumerable:!1,configurable:!0}),e}();function ma(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return n=Ga(e),(a=n.$h.get(t))?(i=a.targetId,n.Ch.Mi(i),o=a.view.ph(),[3,4]):[3,1];case 1:return[4,yo(n.Gu,Gn(t))];case 2:return s=r.sent(),u=n.Ch.Mi(s.targetId),i=s.targetId,[4,ga(n,t,i,"current"===u)];case 3:o=r.sent(),n.Wh&&Vo(n.Sh,s),r.label=4;case 4:return[2,o]}}))}))}function ga(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s,u,l,c;return r.__generator(this,(function(h){switch(h.label){case 0:return e.jh=function(t,n,i){return function(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=t.view.Th(n)).Ah?[4,_o(e.Gu,t.query,!1).then((function(e){var n=e.documents;return t.view.Th(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return a=i&&i.Gt.get(t.targetId),s=t.view.gr(o,e.Wh,a),[2,(Ma(e,t.targetId,s.gh),s.snapshot)]}}))}))}(e,t,n,i)},[4,_o(e.Gu,t,!0)];case 1:return o=h.sent(),a=new ha(t,o.kc),s=a.Th(o.documents),u=Ue.Xt(n,i&&"Offline"!==e.onlineState),l=a.gr(s,e.Wh,u),Ma(e,n,l.gh),c=new fa(t,n,a),[2,(e.$h.set(t,c),e.xh.has(n)?e.xh.get(n).push(t):e.xh.set(n,[t]),l.snapshot)]}}))}))}function Aa(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=b(e),i=n.$h.get(t),(o=n.xh.get(i.targetId)).length>1?[2,(n.xh.set(i.targetId,o.filter((function(e){return!zn(e,t)}))),void n.$h.delete(t))]:n.Wh?(n.Ch.Li(i.targetId),n.Ch.Ni(i.targetId)?[3,2]:[4,bo(n.Gu,i.targetId,!1).then((function(){n.Ch.qi(i.targetId),Go(n.Sh,i.targetId),Sa(n,i.targetId)})).catch(Eo)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Sa(n,i.targetId),[4,bo(n.Gu,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function va(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:n=b(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ao(n.Gu,t)];case 2:return i=r.sent(),t.Gt.forEach((function(e,t){var r=n.Oh.get(t);r&&(y(e.te.size+e.ee.size+e.ne.size<=1),e.te.size>0?r.bh=!0:e.ee.size>0?y(r.bh):e.ne.size>0&&(y(r.bh),r.bh=!1))})),[4,Ra(n,i,t)];case 3:return r.sent(),[3,6];case 4:return[4,Eo(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function ya(e,t,n){var r=b(e);if(r.Wh&&0===n||!r.Wh&&1===n){var i=[];r.$h.forEach((function(e,n){var r=n.view.Us(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=b(e);n.onlineState=t;var r=!1;n.Ls.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Us(t)&&(r=!0)})),r&&Nr(n)}(r.Dh,t),i.length&&r.Fh.pu(i),r.onlineState=t,r.Wh&&r.Ch.ji(t)}}function ba(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u,l;return r.__generator(this,(function(r){switch(r.label){case 0:return(i=b(e)).Ch.Ui(t,"rejected",n),o=i.Oh.get(t),(a=o&&o.key)?(s=(s=new Ee(L.i)).rt(a,new Rn(a,ue.min())),u=Ne().add(a),l=new Ge(ue.min(),new Map,new Te(X),s,u),[4,va(i,l)]):[3,2];case 1:return r.sent(),i.Mh=i.Mh.remove(a),i.Oh.delete(t),Ca(i),[3,4];case 2:return[4,bo(i.Gu,t,!1).then((function(){return Sa(i,t,n)})).catch(Eo)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function _a(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:n=b(e),i=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,mo(n.Gu,t)];case 2:return o=r.sent(),xa(n,i,null),Ea(n,i),n.Ch.xi(i,"acknowledged"),[4,Ra(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Eo(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function wa(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:i=b(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(e,t){var n=b(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.vr.Mo(e,t).next((function(t){return y(null!==t),r=t.keys(),n.vr.Qo(e,t)})).next((function(){return n.vr.Go(e)})).next((function(){return n.$c.$r(e,r)}))}))}(i.Gu,t)];case 2:return o=r.sent(),xa(i,t,n),Ea(i,t),i.Ch.xi(t,"rejected",n),[4,Ra(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Eo(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ea(e,t){(e.qh.get(t)||[]).forEach((function(e){e.resolve()})),e.qh.delete(t)}function xa(e,t,n){var r=b(e),i=r.Bh[r.currentUser.Zs()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.Bh[r.currentUser.Zs()]=i}}function Sa(e,t,n){void 0===n&&(n=null),e.Ch.Li(t);for(var r=0,i=e.xh.get(t);r<i.length;r++){var o=i[r];e.$h.delete(o),n&&e.Fh.Kh(o,n)}e.xh.delete(t),e.Wh&&e.Lh.Wc(t).forEach((function(t){e.Lh.zo(t)||Ta(e,t)}))}function Ta(e,t){var n=e.Mh.get(t);null!==n&&(Go(e.Sh,n),e.Mh=e.Mh.remove(t),e.Oh.delete(n),Ca(e))}function Ma(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof la?(e.Lh.Fa(o.key,t),La(e,o)):o instanceof ca?(p("SyncEngine","Document no longer in limbo: "+o.key),e.Lh.xa(o.key,t),e.Lh.zo(o.key)||Ta(e,o.key)):v()}}function La(e,t){var n=t.key;e.Mh.get(n)||(p("SyncEngine","New document in limbo: "+n),e.kh.push(n),Ca(e))}function Ca(e){for(;e.kh.length>0&&e.Mh.size<e.Nh;){var t=e.kh.shift(),n=e.Uh.next();e.Oh.set(n,new da(t)),e.Mh=e.Mh.rt(t,n),Vo(e.Sh,new ye(Gn(kn(t.path)),n,2,jr.oi))}}function Ra(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(u){switch(u.label){case 0:return i=b(e),o=[],a=[],s=[],i.$h.m()?[3,3]:(i.$h.forEach((function(e,r){s.push(i.jh(r,t,n).then((function(e){if(e){i.Wh&&i.Ch.Ui(r.targetId,e.fromCache?"not-current":"current"),o.push(e);var t=ti.Gr(r.targetId,e);a.push(t)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),i.Fh.pu(o),[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l,c,h;return r.__generator(this,(function(r){switch(r.label){case 0:n=b(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return pr.forEach(t,(function(t){return pr.forEach(t.jr,(function(r){return n.persistence.Co.Fa(e,t.targetId,r)})).next((function(){return pr.forEach(t.Kr,(function(r){return n.persistence.Co.xa(e,t.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!vr(i=r.sent()))throw i;return p("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,a=t;o<a.length;o++)s=a[o],u=s.targetId,s.fromCache||(l=n.Dc.get(u),c=l.et,h=l.it(c),n.Dc=n.Dc.rt(u,h));return[2]}}))}))}(i.Gu,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Oa(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(o){switch(o.label){case 0:return(n=b(e)).currentUser.isEqual(t)?[3,3]:(p("SyncEngine","User change. New user:",t.Zs()),[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return n=b(e),i=n.vr,o=n.$c,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var r;return n.vr.qo(e).next((function(a){return r=a,i=n.persistence.Ic(t),o=new ei(n.Fc,i,n.persistence.Pc()),i.qo(e)})).next((function(t){for(var n=[],i=[],a=Ne(),s=0,u=r;s<u.length;s++){var l=u[s];n.push(l.batchId);for(var c=0,h=l.mutations;c<h.length;c++){var f=h[c];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var m=p[d];i.push(m.batchId);for(var g=0,A=m.mutations;g<A.length;g++){var v=A[g];a=a.add(v.key)}}return o.$r(e,a).next((function(e){return{Gh:e,zh:n,Hh:i}}))}))}))];case 1:return a=r.sent(),[2,(n.vr=i,n.$c=o,n.Sc.xc(n.$c),a)]}}))}))}(n.Gu,t)]);case 1:return i=o.sent(),n.currentUser=t,function(e,t){e.qh.forEach((function(e){e.forEach((function(e){e.reject(new h(c.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.qh.clear()}(n),n.Ch.Wi(t,i.zh,i.Hh),[4,Ra(n,i.Gh)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function Ia(e,t){var n=b(e),r=n.Oh.get(t);if(r&&r.bh)return Ne().add(r.key);var i=Ne(),o=n.xh.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],l=n.$h.get(u);i=i.xt(l.view.mh)}return i}function Pa(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,_o((n=b(e)).Gu,t.query,!0)];case 1:return i=r.sent(),o=t.view.Vh(i),[2,(n.Wh&&Ma(n,t.targetId,o.gh),o)]}}))}))}function ka(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,function(e,t){var n=b(e),r=b(n.vr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Oo(e,t).next((function(t){return t?n.$c.$r(e,t):pr.resolve(null)}))}))}((o=b(e)).Gu,t)];case 1:return null===(a=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,$o(o.Sh)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(xa(o,t,i||null),Ea(o,t),function(e,t){b(b(e).vr).jo(t)}(o.Gu,t)):v(),r.label=4;case 4:return[4,Ra(o,a)];case 5:return r.sent(),[3,7];case 6:p("SyncEngine","Cannot apply mutation batch with id: "+t),r.label=7;case 7:return[2]}}))}))}function Na(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l,c;return r.__generator(this,(function(r){switch(r.label){case 0:return Ga(n=b(e)),Ua(n),!0!==t||!0===n.Qh?[3,3]:(i=n.Ch.Di(),[4,Da(n,i.A())]);case 1:return o=r.sent(),n.Qh=!0,[4,aa(n.Sh,!0)];case 2:for(r.sent(),a=0,s=o;a<s.length;a++)u=s[a],Vo(n.Sh,u);return[3,7];case 3:return!1!==t||!1===n.Qh?[3,7]:(l=[],c=Promise.resolve(),n.xh.forEach((function(e,t){n.Ch.Bi(t)?l.push(t):c=c.then((function(){return Sa(n,t),bo(n.Gu,t,!0)})),Go(n.Sh,t)})),[4,c]);case 4:return r.sent(),[4,Da(n,l)];case 5:return r.sent(),function(e){var t=b(e);t.Oh.forEach((function(e,n){Go(t.Sh,n)})),t.Lh.jc(),t.Oh=new Map,t.Mh=new Ee(L.i)}(n),n.Qh=!1,[4,aa(n.Sh,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function Da(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l,c,h,f,d,p,m,g;return r.__generator(this,(function(r){switch(r.label){case 0:n=b(e),i=[],o=[],a=0,s=t,r.label=1;case 1:return a<s.length?(u=s[a],l=void 0,(c=n.xh.get(u))&&0!==c.length?[4,yo(n.Gu,Gn(c[0]))]:[3,7]):[3,13];case 2:l=r.sent(),h=0,f=c,r.label=3;case 3:return h<f.length?(d=f[h],p=n.$h.get(d),[4,Pa(n,p)]):[3,6];case 4:(m=r.sent()).snapshot&&o.push(m.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,wo(n.Gu,u)];case 8:return g=r.sent(),[4,yo(n.Gu,g)];case 9:return l=r.sent(),[4,ga(n,Fa(g),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(l),r.label=12;case 12:return a++,[3,1];case 13:return[2,(n.Fh.pu(o),i)]}}))}))}function Fa(e){return Pn(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ja(e){var t=b(e);return b(b(t.Gu).persistence).Vi()}function Ba(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=b(e)).Qh?(p("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.xh.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,function(e){var t=b(e),n=b(t.Fc);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ia(e,t.Nc)})).then((function(e){var n=e.ra,r=e.readTime;return t.Nc=r,n}))}(o.Gu)];case 3:return a=r.sent(),s=Ge.Jt(t,"current"===n),[4,Ra(o,a,s)];case 4:return r.sent(),[3,8];case 5:return[4,bo(o.Gu,t,!0)];case 6:return r.sent(),Sa(o,t,i),[3,8];case 7:v(),r.label=8;case 8:return[2]}}))}))}function Va(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u,l,c,h,f,d;return r.__generator(this,(function(m){switch(m.label){case 0:if(!(i=Ga(e)).Qh)return[3,10];o=0,a=t,m.label=1;case 1:return o<a.length?(s=a[o],i.xh.has(s)?(p("SyncEngine","Adding an already active target "+s),[3,5]):[4,wo(i.Gu,s)]):[3,6];case 2:return u=m.sent(),[4,yo(i.Gu,u)];case 3:return l=m.sent(),[4,ga(i,Fa(u),l.targetId,!1)];case 4:m.sent(),Vo(i.Sh,l),m.label=5;case 5:return o++,[3,1];case 6:c=function(e){return r.__generator(this,(function(t){switch(t.label){case 0:return i.xh.has(e)?[4,bo(i.Gu,e,!1).then((function(){Go(i.Sh,e),Sa(i,e)})).catch(Eo)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},h=0,f=n,m.label=7;case 7:return h<f.length?(d=f[h],[5,c(d)]):[3,10];case 8:m.sent(),m.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ga(e){var t=b(e);return t.Sh.Hu.rh=va.bind(null,t),t.Sh.Hu.Be=Ia.bind(null,t),t.Sh.Hu.ih=ba.bind(null,t),t.Fh.pu=Pr.bind(null,t.Dh),t.Fh.Kh=kr.bind(null,t.Dh),t}function Ua(e){var t=b(e);return t.Sh.Hu.oh=_a.bind(null,t),t.Sh.Hu.ah=wa.bind(null,t),t}var qa=function(){function e(){}return e.prototype.xc=function(e){this.Yh=e},e.prototype.Or=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.rn.length||1===e.rn.length&&e.rn[0].field.p())}(t)||n.isEqual(ue.min())?this.Jh(e,t):this.Yh.$r(e,r).next((function(a){var s=i.Xh(t,a);return(Nn(t)||Dn(t))&&i.Ah(t.on,s,r,n)?i.Jh(e,t):(d()<=o.LogLevel.DEBUG&&p("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Kn(t)),i.Yh.Or(e,t,n).next((function(e){return s.forEach((function(t){e=e.rt(t.key,t)})),e})))}))},e.prototype.Xh=function(e,t){var n=new Te(Qn(e));return t.forEach((function(t,r){r instanceof Cn&&Yn(e,r)&&(n=n.add(r))})),n},e.prototype.Ah=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.L(r)>0)},e.prototype.Jh=function(e,t){return d()<=o.LogLevel.DEBUG&&p("IndexFreeQueryEngine","Using full collection scan to execute query:",Kn(t)),this.Yh.Or(e,t,ue.min())},e}(),Wa=function(){function e(e,t){this.Sr=e,this.Co=t,this.vr=[],this.Zh=1,this.tl=new Te(So.Oc)}return e.prototype.$o=function(e){return pr.resolve(0===this.vr.length)},e.prototype.xo=function(e,t,n,r){var i=this.Zh;this.Zh++,this.vr.length>0&&this.vr[this.vr.length-1];var o=new Qr(i,t,n,r);this.vr.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.tl=this.tl.add(new So(u.key,i)),this.Sr.ko(e,u.key.path.h())}return pr.resolve(o)},e.prototype.Mo=function(e,t){return pr.resolve(this.el(t))},e.prototype.Lo=function(e,t){var n=t+1,r=this.nl(n),i=r<0?0:r;return pr.resolve(this.vr.length>i?this.vr[i]:null)},e.prototype.Bo=function(){return pr.resolve(0===this.vr.length?-1:this.Zh-1)},e.prototype.qo=function(e){return pr.resolve(this.vr.slice())},e.prototype.Cr=function(e,t){var n=this,r=new So(t,0),i=new So(t,Number.POSITIVE_INFINITY),o=[];return this.tl.Nt([r,i],(function(e){var t=n.el(e.Gc);o.push(t)})),pr.resolve(o)},e.prototype.Mr=function(e,t){var n=this,r=new Te(X);return t.forEach((function(e){var t=new So(e,0),i=new So(e,Number.POSITIVE_INFINITY);n.tl.Nt([t,i],(function(e){r=r.add(e.Gc)}))})),pr.resolve(this.sl(r))},e.prototype.Qr=function(e,t){var n=t.path,r=n.length+1,i=n;L.F(i)||(i=i.child(""));var o=new So(new L(i),0),a=new Te(X);return this.tl.Ft((function(e){var t=e.key.path;return!!n.T(t)&&(t.length===r&&(a=a.add(e.Gc)),!0)}),o),pr.resolve(this.sl(a))},e.prototype.sl=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.el(e);null!==r&&n.push(r)})),n},e.prototype.Qo=function(e,t){var n=this;y(0===this.il(t.batchId,"removed")),this.vr.shift();var r=this.tl;return pr.forEach(t.mutations,(function(i){var o=new So(i.key,t.batchId);return r=r.delete(o),n.Co.Ko(e,i.key)})).next((function(){n.tl=r}))},e.prototype.jo=function(e){},e.prototype.zo=function(e,t){var n=new So(t,0),r=this.tl.$t(n);return pr.resolve(t.isEqual(r&&r.key))},e.prototype.Go=function(e){return this.vr.length,pr.resolve()},e.prototype.il=function(e,t){return this.nl(e)},e.prototype.nl=function(e){return 0===this.vr.length?0:e-this.vr[0].batchId},e.prototype.el=function(e){var t=this.nl(e);return t<0||t>=this.vr.length?null:this.vr[t]},e}(),za=function(){function e(e,t){this.Sr=e,this.rl=t,this.docs=new Ee(L.i),this.size=0}return e.prototype.Tr=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.rl(t);return this.docs=this.docs.rt(r,{Zo:t,size:a,readTime:n}),this.size+=a-o,this.Sr.ko(e,r.path.h())},e.prototype.Ir=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.Ar=function(e,t){var n=this.docs.get(t);return pr.resolve(n?n.Zo:null)},e.prototype.getEntries=function(e,t){var n=this,r=Re();return t.forEach((function(e){var t=n.docs.get(e);r=r.rt(e,t?t.Zo:null)})),pr.resolve(r)},e.prototype.Or=function(e,t,n){for(var r=Ie(),i=new L(t.path.child("")),o=this.docs._t(i);o.It();){var a=o.Et(),s=a.key,u=a.value,l=u.Zo,c=u.readTime;if(!t.path.T(s.path))break;c.L(n)<=0||l instanceof Cn&&Yn(t,l)&&(r=r.rt(l.key,l))}return pr.resolve(r)},e.prototype.ol=function(e,t){return pr.forEach(this.docs,(function(e){return t(e)}))},e.prototype.aa=function(t){return new e.ca(this)},e.prototype.ha=function(e){return pr.resolve(this.size)},e}();za.ca=function(e){function t(t){var n=this;return(n=e.call(this)||this).la=t,n}return r.__extends(t,e),t.prototype.gr=function(e){var t=this,n=[];return this.dr.forEach((function(r,i){i?n.push(t.la.Tr(e,i,t.readTime)):t.la.Ir(r)})),pr.$n(n)},t.prototype.Rr=function(e,t){return this.la.Ar(e,t)},t.prototype.Pr=function(e,t){return this.la.getEntries(e,t)},t}(Jr);var Ha=function(){function e(e){this.persistence=e,this.al=new ae((function(e){return pe(e)}),me),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.cl=0,this.ul=new xo,this.targetCount=0,this.hl=eo.ma()}return e.prototype.De=function(e,t){return this.al.forEach((function(e,n){return t(n)})),pr.resolve()},e.prototype.Ra=function(e){return pr.resolve(this.lastRemoteSnapshotVersion)},e.prototype.Pa=function(e){return pr.resolve(this.cl)},e.prototype.Ea=function(e){return this.highestTargetId=this.hl.next(),pr.resolve(this.highestTargetId)},e.prototype.ga=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.cl&&(this.cl=t),pr.resolve()},e.prototype.Va=function(e){this.al.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.hl=new eo(t),this.highestTargetId=t),e.sequenceNumber>this.cl&&(this.cl=e.sequenceNumber)},e.prototype.ya=function(e,t){return this.Va(t),this.targetCount+=1,pr.resolve()},e.prototype.ba=function(e,t){return this.Va(t),pr.resolve()},e.prototype.va=function(e,t){return this.al.delete(t.target),this.ul.Wc(t.targetId),this.targetCount-=1,pr.resolve()},e.prototype.Vo=function(e,t,n){var r=this,i=0,o=[];return this.al.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.al.delete(a),o.push(r.Sa(e,s.targetId)),i++)})),pr.$n(o).next((function(){return i}))},e.prototype.Da=function(e){return pr.resolve(this.targetCount)},e.prototype.Ca=function(e,t){var n=this.al.get(t)||null;return pr.resolve(n)},e.prototype.Na=function(e,t,n){return this.ul.qc(t,n),pr.resolve()},e.prototype.$a=function(e,t,n){this.ul.Qc(t,n);var r=this.persistence.Co,i=[];return r&&t.forEach((function(t){i.push(r.Ko(e,t))})),pr.$n(i)},e.prototype.Sa=function(e,t){return this.ul.Wc(t),pr.resolve()},e.prototype.ka=function(e,t){var n=this.ul.Kc(t);return pr.resolve(n)},e.prototype.zo=function(e,t){return pr.resolve(this.ul.zo(t))},e}(),Ka=function(){function e(e){var t=this;this.ll={},this.Ba=new jr(0),this.qa=!1,this.qa=!0,this.Co=e(this),this.Ha=new Ha(this),this.Sr=new Pi,this.br=new za(this.Sr,(function(e){return t.Co._l(e)}))}return e.prototype.start=function(){return Promise.resolve()},e.prototype.Si=function(){return this.qa=!1,Promise.resolve()},Object.defineProperty(e.prototype,"Ti",{get:function(){return this.qa},enumerable:!1,configurable:!0}),e.prototype.nc=function(){},e.prototype.sc=function(){},e.prototype.Pc=function(){return this.Sr},e.prototype.Ic=function(e){var t=this.ll[e.Zs()];return t||(t=new Wa(this.Sr,this.Co),this.ll[e.Zs()]=t),t},e.prototype.Ac=function(){return this.Ha},e.prototype.Rc=function(){return this.br},e.prototype.runTransaction=function(e,t,n){var r=this;p("MemoryPersistence","Starting transaction:",e);var i=new Ya(this.Ba.next());return this.Co.fl(),n(i).next((function(e){return r.Co.dl(i).next((function(){return e}))})).Nn().then((function(e){return i.pr(),e}))},e.prototype.wl=function(e,t){return pr.xn(Object.values(this.ll).map((function(n){return function(){return n.zo(e,t)}})))},e}(),Ya=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ma=t,n}return r.__extends(t,e),t}($r),Qa=function(){function e(e){this.persistence=e,this.ml=new xo,this.Tl=null}return e.El=function(t){return new e(t)},Object.defineProperty(e.prototype,"Il",{get:function(){if(this.Tl)return this.Tl;throw v()},enumerable:!1,configurable:!0}),e.prototype.Fa=function(e,t,n){return this.ml.Fa(n,t),this.Il.delete(n.toString()),pr.resolve()},e.prototype.xa=function(e,t,n){return this.ml.xa(n,t),this.Il.add(n.toString()),pr.resolve()},e.prototype.Ko=function(e,t){return this.Il.add(t.toString()),pr.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.ml.Wc(t.targetId).forEach((function(e){return n.Il.add(e.toString())}));var r=this.persistence.Ac();return r.ka(e,t.targetId).next((function(e){e.forEach((function(e){return n.Il.add(e.toString())}))})).next((function(){return r.va(e,t)}))},e.prototype.fl=function(){this.Tl=new Set},e.prototype.dl=function(e){var t=this,n=this.persistence.Rc().aa();return pr.forEach(this.Il,(function(r){var i=L.D(r);return t.Al(e,i).next((function(e){e||n.Ir(i)}))})).next((function(){return t.Tl=null,n.apply(e)}))},e.prototype.vc=function(e,t){var n=this;return this.Al(e,t).next((function(e){e?n.Il.delete(t.toString()):n.Il.add(t.toString())}))},e.prototype._l=function(e){return 0},e.prototype.Al=function(e,t){var n=this;return pr.xn([function(){return pr.resolve(n.ml.zo(t))},function(){return n.persistence.Ac().zo(e,t)},function(){return n.persistence.wl(e,t)}])},e}(),Xa=function(){function e(e){this.Rl=e.Rl,this.Pl=e.Pl}return e.prototype.yu=function(e){this.gl=e},e.prototype.Iu=function(e){this.yl=e},e.prototype.onMessage=function(e){this.Vl=e},e.prototype.close=function(){this.Pl()},e.prototype.send=function(e){this.Rl(e)},e.prototype.pl=function(){this.gl()},e.prototype.bl=function(e){this.yl(e)},e.prototype.vl=function(e){this.Vl(e)},e}(),Ja={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Za=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n}return r.__extends(t,e),t.prototype.$l=function(e,t,n,r){return new Promise((function(i,o){var a=new s.XhrIo;a.listenOnce(s.EventType.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case s.ErrorCode.NO_ERROR:var t=a.getResponseJson();p("Connection","XHR received:",JSON.stringify(t)),i(t);break;case s.ErrorCode.TIMEOUT:p("Connection",'RPC "'+e+'" timed out'),o(new h(c.DEADLINE_EXCEEDED,"Request time out"));break;case s.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(p("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace("_","-");return Object.values(c).indexOf(t)>=0?t:c.UNKNOWN}(r.status);o(new h(u,r.message))}else o(new h(c.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new h(c.UNAVAILABLE,"Connection failed."));break;default:v()}}finally{p("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);a.send(t,"POST",u,n,15)}))},t.prototype.Vu=function(e,t){var n=[this.Dl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=s.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Fl(i.initMessageHeaders,t),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");p("Connection","Creating WebChannel: "+o,i);var u=r.createWebChannel(o,i),l=!1,f=!1,d=new Xa({Rl:function(e){f?p("Connection","Not sending because WebChannel is closed:",e):(l||(p("Connection","Opening WebChannel transport."),u.open(),l=!0),p("Connection","WebChannel sending:",e),u.send(e))},Pl:function(){return u.close()}}),m=function(e,t){u.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return m(s.WebChannel.EventType.OPEN,(function(){f||p("Connection","WebChannel transport opened.")})),m(s.WebChannel.EventType.CLOSE,(function(){f||(f=!0,p("Connection","WebChannel transport closed"),d.bl())})),m(s.WebChannel.EventType.ERROR,(function(e){f||(f=!0,g("Connection","WebChannel transport errored:",e),d.bl(new h(c.UNAVAILABLE,"The operation could not be completed")))})),m(s.WebChannel.EventType.MESSAGE,(function(e){var t;if(!f){var n=e.data[0];y(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){p("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=Ae[e];if(void 0!==t)return we(t)}(o),s=i.message;void 0===a&&(a=c.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),f=!0,d.bl(new h(a,s)),u.close()}else p("Connection","WebChannel received:",n),d.vl(n)}})),setTimeout((function(){d.pl()}),0),d},t}(function(){function e(e){this.Sl=e,this.U=e.U;var t=e.ssl?"https":"http";this.Dl=t+"://"+e.host,this.Cl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return e.prototype.Mu=function(e,t,n,r){var i=this.Nl(e,t);p("RestConnection","Sending: ",i,n);var o={};return this.Fl(o,r),this.$l(e,i,o,n).then((function(e){return p("RestConnection","Received: ",e),e}),(function(t){throw g("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.Ou=function(e,t,n,r){return this.Mu(e,t,n,r)},e.prototype.Fl=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/7.22.0",e["Content-Type"]="text/plain",t)for(var n in t.zc)t.zc.hasOwnProperty(n)&&(e[n]=t.zc[n])},e.prototype.Nl=function(e,t){var n=Ja[e];return this.Dl+"/v1/"+t+":"+n},e}()),$a=function(){function e(){var e=this;this.xl=function(){return e.kl()},this.Ml=function(){return e.Ol()},this.Ll=[],this.Bl()}return e.prototype.eh=function(e){this.Ll.push(e)},e.prototype.Si=function(){window.removeEventListener("online",this.xl),window.removeEventListener("offline",this.Ml)},e.prototype.Bl=function(){window.addEventListener("online",this.xl),window.addEventListener("offline",this.Ml)},e.prototype.kl=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.Ll;e<t.length;e++)(0,t[e])(0)},e.prototype.Ol=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.Ll;e<t.length;e++)(0,t[e])(1)},e.On=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),es=function(){function e(){}return e.prototype.eh=function(e){},e.prototype.Si=function(){},e}();function ts(e){return new gt(e,!0)}var ns="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",rs=function(){function e(){}return e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.Ch=this.ql(e),this.persistence=this.Ul(e),[4,this.persistence.start()];case 1:return t.sent(),this.Ql=this.Wl(e),this.Gu=this.jl(e),[2]}}))}))},e.prototype.Wl=function(e){return null},e.prototype.jl=function(e){return t=this.persistence,n=new qa,r=e.Kl,new po(t,n,r);var t,n,r},e.prototype.Ul=function(e){if(e.persistenceSettings.Gl)throw new h(c.FAILED_PRECONDITION,ns);return new Ka(Qa.El)},e.prototype.ql=function(e){return new Yr},e.prototype.terminate=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.Ql&&this.Ql.stop(),[4,this.Ch.Si()];case 1:return e.sent(),[4,this.persistence.Si()];case 2:return e.sent(),[2]}}))}))},e.prototype.clearPersistence=function(e,t){throw new h(c.FAILED_PRECONDITION,ns)},e}(),is=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.initialize=function(t){return r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return o.sent(),n=this.zl._i,this.Ch instanceof Kr?(this.Ch._i={tr:ka.bind(null,n),er:Ba.bind(null,n),nr:Va.bind(null,n),Vi:ja.bind(null,n)},[4,this.Ch.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.ec((function(e){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,Na(this.zl._i,e)];case 1:return t.sent(),this.Ql&&(e&&!this.Ql.Ti?this.Ql.start(this.Gu):e||this.Ql.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},t.prototype.ql=function(e){if(e.persistenceSettings.Gl&&e.persistenceSettings.synchronizeTabs){var t=xr();if(!Kr.On(t))throw new h(c.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fo(e.Sl.U,e.Sl.persistenceKey);return new Kr(t,e.os,n,e.clientId,e.Kl)}return new Yr},t}(function(e){function t(t){var n=this;return(n=e.call(this)||this).zl=t,n}return r.__extends(t,e),t.prototype.initialize=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){return t=b(e),n=b(t.Fc),[2,t.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return n.oa(e)})).then((function(e){t.Nc=e}))]}))}))}(this.Gu)];case 2:return n.sent(),[4,this.zl.initialize(this,t)];case 3:return n.sent(),[4,Ua(this.zl._i)];case 4:return n.sent(),[4,$o(this.zl.Sh)];case 5:return n.sent(),[2]}}))}))},t.prototype.Wl=function(e){var t=this.persistence.Co.do;return new ai(t,e.os)},t.prototype.Ul=function(e){var t=fo(e.Sl.U,e.Sl.persistenceKey),n=ts(e.Sl.U);return new so(e.persistenceSettings.synchronizeTabs,t,e.clientId,oi.oo(e.persistenceSettings.cacheSizeBytes),e.os,xr(),Sr(),n,this.Ch,e.persistenceSettings.La)},t.prototype.ql=function(e){return new Yr},t.prototype.clearPersistence=function(e,t){return function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return mr.On()?(t=e+"main",[4,mr.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(fo(e,t))},t}(rs)),os=function(){function e(){}return e.prototype.initialize=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.Gu?[3,2]:(this.Gu=e.Gu,this.Ch=e.Ch,this.zu=this.Hl(t),this.Sh=this.Yl(t),this.Dh=this.Jl(t),this._i=this.Xl(t),this.Ch.fi=function(e){return ya(n._i,e,1)},this.Sh.Hu.Zl=Oa.bind(null,this._i),[4,aa(this.Sh,this._i.Wh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.Jl=function(e){return new Rr},e.prototype.Hl=function(e){var t,n=ts(e.Sl.U),r=(t=e.Sl,new Za(t));return function(e,t,n){return new ko(e,t,n)}(e.credentials,r,n)},e.prototype.Yl=function(e){var t,n,r,i,o,a=this;return t=this.Gu,n=this.zu,r=e.os,i=function(e){return ya(a._i,e,0)},o=$a.On()?new $a:new es,new Do(t,n,r,i,o)},e.prototype.Xl=function(e){return function(e,t,n,r,i,o,a){var s=new pa(e,t,n,r,i,o);return a&&(s.Qh=!0),s}(this.Gu,this.Sh,this.Dh,this.Ch,e.Kl,e.Nh,!e.persistenceSettings.Gl||!e.persistenceSettings.synchronizeTabs)},e.prototype.terminate=function(){return Bo(this.Sh)},e}(),as=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.t_(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.t_(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.e_=function(){this.muted=!0},e.prototype.t_=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),ss=function(e){!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new h(c.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+K(1,"element")+".")}(0,e);for(var t=0;t<e.length;++t)if(P("FieldPath","string",t,e[t]),0===e[t].length)throw new h(c.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.n_=new M(e)},us=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.call(this,t)||this}return r.__extends(t,e),t.documentId=function(){return new t(M.v().R())},t.prototype.isEqual=function(e){if(!(e instanceof t))throw W("isEqual","FieldPath",1,e);return this.n_.isEqual(e.n_)},t}(ss),ls=new RegExp("[~\\*/\\[\\]]"),cs=function(e){this.s_=e},hs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.i_=function(e){if(2!==e.r_)throw 1===e.r_?e.o_(this.s_+"() can only appear at the top level of your update data"):e.o_(this.s_+"() cannot be used with set() unless you pass {merge:true}");return e.Qe.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(cs);function fs(e,t,n){return new xs({r_:3,a_:t.settings.a_,methodName:e.s_,c_:n},t.U,t.serializer,t.ignoreUndefinedProperties)}var ds=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.i_=function(e){return new sn(e.path,new Jt)},t.prototype.isEqual=function(e){return e instanceof t},t}(cs),ps=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).u_=n,r}return r.__extends(t,e),t.prototype.i_=function(e){var t=fs(this,e,!0),n=this.u_.map((function(e){return Rs(e,t)})),r=new Zt(n);return new sn(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(cs),ms=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).u_=n,r}return r.__extends(t,e),t.prototype.i_=function(e){var t=fs(this,e,!0),n=this.u_.map((function(e){return Rs(e,t)})),r=new en(n);return new sn(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(cs),gs=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).h_=n,r}return r.__extends(t,e),t.prototype.i_=function(e){var t=new nn(e.serializer,yt(e.serializer,this.h_));return new sn(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(cs),As=function(){function e(e,t){if(R("GeoPoint",arguments,2),P("GeoPoint","number",1,e),P("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new h(c.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new h(c.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this.l_=e,this.__=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this.l_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.__},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.l_===e.l_&&this.__===e.__},e.prototype.toJSON=function(){return{latitude:this.l_,longitude:this.__}},e.prototype.H=function(e){return X(this.l_,e.l_)||X(this.__,e.__)},e}(),vs=function(e){this.f_=e},ys=/^__.*__$/,bs=function(e,t,n){this.d_=e,this.w_=t,this.m_=n},_s=function(){function e(e,t,n){this.data=e,this.Qe=t,this.fieldTransforms=n}return e.prototype.T_=function(e,t){var n=[];return null!==this.Qe?n.push(new vn(e,this.data,this.Qe,t)):n.push(new An(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new bn(e,this.fieldTransforms)),n},e}(),ws=function(){function e(e,t,n){this.data=e,this.Qe=t,this.fieldTransforms=n}return e.prototype.T_=function(e,t){var n=[new vn(e,this.data,this.Qe,t)];return this.fieldTransforms.length>0&&n.push(new bn(e,this.fieldTransforms)),n},e}();function Es(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v()}}var xs=function(){function e(e,t,n,r,i,o){this.settings=e,this.U=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.E_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r_",{get:function(){return this.settings.r_},enumerable:!1,configurable:!0}),e.prototype.I_=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},e.prototype.A_=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.I_({path:n,c_:!1});return r.R_(e),r},e.prototype.P_=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.I_({path:n,c_:!1});return r.E_(),r},e.prototype.g_=function(e){return this.I_({path:void 0,c_:!0})},e.prototype.o_=function(e){return Ds(e,this.settings.methodName,this.settings.y_||!1,this.path,this.settings.a_)},e.prototype.contains=function(e){return void 0!==this.Qe.find((function(t){return e.T(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.T(t.field)}))},e.prototype.E_=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.R_(this.path.get(e))},e.prototype.R_=function(e){if(0===e.length)throw this.o_("Document fields must not be empty");if(Es(this.r_)&&ys.test(e))throw this.o_('Document fields cannot begin and end with "__"')},e}(),Ss=function(){function e(e,t,n){this.U=e,this.ignoreUndefinedProperties=t,this.serializer=n||ts(e)}return e.prototype.V_=function(e,t,n,r){return void 0===r&&(r=!1),new xs({r_:e,methodName:t,a_:n,path:M.g(),c_:!1,y_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},e}();function Ts(e,t,n,r,i,o){void 0===o&&(o={});var a=e.V_(o.merge||o.mergeFields?2:0,t,n,i);Ps("Data must be an object, but it was:",a,r);var s,u,l=Os(r,a);if(o.merge)s=new an(a.Qe),u=a.fieldTransforms;else if(o.mergeFields){for(var f=[],d=0,p=o.mergeFields;d<p.length;d++){var m=p[d],g=void 0;if(m instanceof ss)g=m.n_;else{if("string"!=typeof m)throw v();g=Ns(t,m,n)}if(!a.contains(g))throw new h(c.INVALID_ARGUMENT,"Field '"+g+"' is specified in your field mask but missing from your input data.");Fs(f,g)||f.push(g)}s=new an(f),u=a.fieldTransforms.filter((function(e){return s.He(e.field)}))}else s=null,u=a.fieldTransforms;return new _s(new Sn(l),s,u)}function Ms(e,t,n,r){var i=e.V_(1,t,n);Ps("Data must be an object, but it was:",i,r);var o=[],a=new Tn;w(r,(function(e,r){var s=Ns(t,e,n),u=i.P_(s);if(r instanceof hs||r instanceof vs&&r.f_ instanceof hs)o.push(s);else{var l=Rs(r,u);null!=l&&(o.push(s),a.set(s,l))}}));var s=new an(o);return new ws(a.Je(),s,i.fieldTransforms)}function Ls(e,t,n,r,i,o){var a=e.V_(1,t,n),s=[ks(t,r,n)],u=[i];if(o.length%2!=0)throw new h(c.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<o.length;l+=2)s.push(ks(t,o[l])),u.push(o[l+1]);for(var f=[],d=new Tn,p=s.length-1;p>=0;--p)if(!Fs(f,s[p])){var m=s[p],g=u[p],A=a.P_(m);if(g instanceof hs||g instanceof vs&&g.f_ instanceof hs)f.push(m);else{var v=Rs(g,A);null!=v&&(f.push(m),d.set(m,v))}}var y=new an(f);return new ws(d.Je(),y,a.fieldTransforms)}function Cs(e,t,n,r){return void 0===r&&(r=!1),Rs(n,e.V_(r?4:3,t))}function Rs(e,t){if(e instanceof vs&&(e=e.f_),Is(e))return Ps("Unsupported field value:",t,e),Os(e,t);if(e instanceof cs)return function(e,t){if(!Es(t.r_))throw t.o_(e.s_+"() can only be used with update() and set()");if(!t.path)throw t.o_(e.s_+"() is not currently supported inside arrays");var n=e.i_(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(t.path&&t.Qe.push(t.path),e instanceof Array){if(t.settings.c_&&4!==t.r_)throw t.o_("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=Rs(o[i],t.g_(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===e)return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yt(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=se.fromDate(e);return{timestampValue:bt(t.serializer,n)}}if(e instanceof se){var r=new se(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bt(t.serializer,r)}}if(e instanceof As)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ee)return{bytesValue:_t(t.serializer,e.q)};if(e instanceof bs){var i=t.U,o=e.d_;if(!o.isEqual(i))throw t.o_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:xt(e.d_||t.U,e.w_.path)}}if(void 0===e&&t.ignoreUndefinedProperties)return null;throw t.o_("Unsupported field value: "+G(e))}(e,t)}function Os(e,t){var n={};return E(e)?t.path&&t.path.length>0&&t.Qe.push(t.path):w(e,(function(e,r){var i=Rs(r,t.A_(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Is(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof se||e instanceof As||e instanceof ee||e instanceof bs||e instanceof cs)}function Ps(e,t,n){if(!Is(n)||!V(n)){var r=G(n);throw"an object"===r?t.o_(e+" a custom object"):t.o_(e+" "+r)}}function ks(e,t,n){if(t instanceof ss)return t.n_;if("string"==typeof t)return Ns(e,t);throw Ds("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}function Ns(e,t,n){try{return function(e){if(e.search(ls)>=0)throw new h(c.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(us.bind.apply(us,r.__spreadArrays([void 0],e.split("."))))}catch(r){throw new h(c.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t).n_}catch(t){throw Ds((i=t)instanceof Error?i.message:i.toString(),e,!1,void 0,n)}var i}function Ds(e,t,n,r,i){var o=r&&!r.m(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new h(c.INVALID_ARGUMENT,(s+=". ")+e+u)}function Fs(e,t){return e.some((function(e){return e.isEqual(t)}))}var js=function(){function e(e){this.zu=e,this.p_=new Map,this.mutations=[],this.b_=!1,this.v_=null,this.S_=new Set}return e.prototype.D_=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:if(this.C_(),this.mutations.length>0)throw new h(c.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return n=b(e),i=Rt(n.serializer)+"/documents",o={documents:t.map((function(e){return Tt(n.serializer,e)}))},[4,n.Ou("BatchGetDocuments",i,o)];case 1:return a=r.sent(),s=new Map,a.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){y(!!t.found),t.found.name,t.found.updateTime;var n=Mt(e,t.found.name),r=Et(t.found.updateTime),i=new Sn({mapValue:{fields:t.found.fields}});return new Cn(n,r,i,{})}(e,t):"missing"in t?function(e,t){y(!!t.missing),y(!!t.readTime);var n=Mt(e,t.missing),r=Et(t.readTime);return new Rn(n,r)}(e,t):v()}(n.serializer,e);s.set(t.key.toString(),t)})),u=[],[2,(t.forEach((function(e){var t=s.get(e.toString());y(!!t),u.push(t)})),u)]}}))}))}(this.zu,e)];case 1:return[2,((t=i.sent()).forEach((function(e){e instanceof Rn||e instanceof Cn?n.N_(e):v()})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.T_(e,this.Ke(e))),this.S_.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.T_(e,this.F_(e)))}catch(e){this.v_=e}this.S_.add(e.toString())},e.prototype.delete=function(e){this.write([new En(e,this.Ke(e))]),this.S_.add(e.toString())},e.prototype.commit=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(this.C_(),this.v_)throw this.v_;return e=this.p_,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=L.D(n);t.mutations.push(new xn(r,t.Ke(r)))})),[4,function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=b(e),i=Rt(n.serializer)+"/documents",o={writes:t.map((function(e){return Pt(n.serializer,e)}))},[4,n.Mu("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.zu,this.mutations)];case 1:return n.sent(),this.b_=!0,[2]}}))}))},e.prototype.N_=function(e){var t;if(e instanceof Cn)t=e.version;else{if(!(e instanceof Rn))throw v();t=ue.min()}var n=this.p_.get(e.key.toString());if(n){if(!t.isEqual(n))throw new h(c.ABORTED,"Document version changed between two reads.")}else this.p_.set(e.key.toString(),t)},e.prototype.Ke=function(e){var t=this.p_.get(e.toString());return!this.S_.has(e.toString())&&t?ln.updateTime(t):ln.Ge()},e.prototype.F_=function(e){var t=this.p_.get(e.toString());if(!this.S_.has(e.toString())&&t){if(t.isEqual(ue.min()))throw new h(c.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ln.updateTime(t)}return ln.exists(!0)},e.prototype.write=function(e){this.C_(),this.mutations=this.mutations.concat(e)},e.prototype.C_=function(){},e}(),Bs=function(){function e(e,t,n,r){this.os=e,this.zu=t,this.updateFunction=n,this.hs=r,this.x_=5,this.gs=new dr(this.os,"transaction_retry")}return e.prototype.run=function(){this.k_()},e.prototype.k_=function(){var e=this;this.gs.Rn((function(){return r.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return r.__generator(this,(function(r){return e=new js(this.zu),(t=this.M_(e))&&t.then((function(t){n.os.ds((function(){return e.commit().then((function(){n.hs.resolve(t)})).catch((function(e){n.O_(e)}))}))})).catch((function(e){n.O_(e)})),[2]}))}))}))},e.prototype.M_=function(e){try{var t=this.updateFunction(e);return!le(t)&&t.catch&&t.then?t:(this.hs.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.hs.reject(e),null}},e.prototype.O_=function(e){var t=this;this.x_>0&&this.L_(e)?(this.x_-=1,this.os.ds((function(){return t.k_(),Promise.resolve()}))):this.hs.reject(e)},e.prototype.L_=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!_e(t)}return!1},e}(),Vs=function(){function e(e,t){this.credentials=e,this.os=t,this.clientId=Q.k(),this.B_=new fr}return e.prototype.start=function(e,t,n,i){var o=this;this.q_(),this.Sl=e;var a=new fr,s=!1;return this.credentials.Jc((function(e){if(!s)return s=!0,p("FirestoreClient","Initializing. user=",e.uid),o.U_(t,n,i,e,a).then(o.B_.resolve,o.B_.reject);o.os.Ds((function(){return function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=b(e)).os.Fs(),p("RemoteStore","RemoteStore received new credentials"),i=Ho(n),n.Xu.add(3),[4,jo(n)];case 1:return r.sent(),i&&n.nh.set("Unknown"),[4,n.Hu.Zl(t)];case 2:return r.sent(),n.Xu.delete(3),[4,Fo(n)];case 3:return r.sent(),[2]}}))}))}(o.Sh,e)}))})),this.os.ds((function(){return o.B_.promise})),a.promise},e.prototype.enableNetwork=function(){var e=this;return this.q_(),this.os.enqueue((function(){return e.persistence.sc(!0),function(e){var t=b(e);return t.Xu.delete(0),Fo(t)}(e.Sh)}))},e.prototype.U_=function(e,t,n,i,o){return r.__awaiter(this,void 0,void 0,(function(){var a,s,u=this;return r.__generator(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),a={os:this.os,Sl:this.Sl,clientId:this.clientId,credentials:this.credentials,Kl:i,Nh:100,persistenceSettings:n},[4,e.initialize(a)];case 1:return l.sent(),[4,t.initialize(e,a)];case 2:return l.sent(),this.persistence=e.persistence,this.Ch=e.Ch,this.Gu=e.Gu,this.Ql=e.Ql,this.zu=t.zu,this.Sh=t.Sh,this._i=t._i,this.Q_=t.Dh,this.Q_.qs=ma.bind(null,this._i),this.Q_.Ws=Aa.bind(null,this._i),this.persistence.nc((function(){return r.__awaiter(u,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))})),o.resolve(),[3,4];case 3:if(s=l.sent(),o.reject(s),!this.W_(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.U_(new rs,new os,{Gl:!1},i,o))];case 4:return[2]}}))}))},e.prototype.W_=function(e){return"FirebaseError"===e.name?e.code===c.FAILED_PRECONDITION||e.code===c.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},e.prototype.q_=function(){if(this.os.Vs)throw new h(c.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.disableNetwork=function(){var e=this;return this.q_(),this.os.enqueue((function(){return e.persistence.sc(!1),function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return(t=b(e)).Xu.add(0),[4,jo(t)];case 1:return n.sent(),t.nh.set("Offline"),[2]}}))}))}(e.Sh)}))},e.prototype.terminate=function(){var e=this;this.os.Ss();var t=new fr;return this.os.ps((function(){return r.__awaiter(e,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.Ql&&this.Ql.stop(),[4,Bo(this.Sh)];case 1:return r.sent(),[4,this.Ch.Si()];case 2:return r.sent(),[4,this.persistence.Si()];case 3:return r.sent(),this.credentials.Xc(),t.resolve(),[3,5];case 4:return e=r.sent(),n=Lr(e,"Failed to shutdown persistence"),t.reject(n),[3,5];case 5:return[2]}}))}))})),t.promise},e.prototype.waitForPendingWrites=function(){var e=this;this.q_();var t=new fr;return this.os.ds((function(){return function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:Ho((n=b(e)).Sh)||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(e){var t=b(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.vr.Bo(e)}))}(n.Gu)];case 2:return-1===(i=r.sent())?[2,void t.resolve()]:((o=n.qh.get(i)||[]).push(t),n.qh.set(i,o),[3,4]);case 3:return a=r.sent(),s=Lr(a,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}}))}))}(e._i,t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.q_();var i=new as(n),o=new Dr(e,i,t);return this.os.ds((function(){return Or(r.Q_,o)})),function(){i.e_(),r.os.ds((function(){return Ir(r.Q_,o)}))}},e.prototype.j_=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.q_(),[4,this.B_.promise];case 1:return i.sent(),t=new fr,[2,(this.os.ds((function(){return function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e,t){var n=b(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.$c.Dr(e,t)}))}(e,t)];case 1:return(i=r.sent())instanceof Cn?n.resolve(i):i instanceof Rn?n.resolve(null):n.reject(new h(c.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),a=Lr(o,"Failed to get document '"+t+" from cache"),n.reject(a),[3,3];case 3:return[2]}}))}))}(n.Gu,e,t)})),t.promise)]}}))}))},e.prototype.K_=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.q_(),[4,this.B_.promise];case 1:return r.sent(),n=new fr,[2,(this.os.ds((function(){return function(e,t,n,r,i){var o=new as({next:function(o){t.ds((function(){return Ir(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new h(c.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new h(c.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new Dr(kn(n.path),o,{includeMetadataChanges:!0,Js:!0});return Or(e,a)}(i.Q_,i.os,e,t,n)})),n.promise)]}}))}))},e.prototype.G_=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.q_(),[4,this.B_.promise];case 1:return i.sent(),t=new fr,[2,(this.os.ds((function(){return function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u,l;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,_o(e,t,!0)];case 1:return i=r.sent(),o=new ha(t,i.kc),a=o.Th(i.documents),s=o.gr(a,!1),n.resolve(s.snapshot),[3,3];case 2:return u=r.sent(),l=Lr(u,"Failed to execute query '"+t+" against cache"),n.reject(l),[3,3];case 3:return[2]}}))}))}(n.Gu,e,t)})),t.promise)]}}))}))},e.prototype.z_=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.q_(),[4,this.B_.promise];case 1:return r.sent(),n=new fr,[2,(this.os.ds((function(){return function(e,t,n,r,i){var o=new as({next:function(n){t.ds((function(){return Ir(e,a)})),n.fromCache&&"server"===r.source?i.reject(new h(c.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new Dr(n,o,{includeMetadataChanges:!0,Js:!0});return Or(e,a)}(i.Q_,i.os,e,t,n)})),n.promise)]}}))}))},e.prototype.write=function(e){var t=this;this.q_();var n=new fr;return this.os.ds((function(){return function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:i=Ua(e),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(e,t){var n,r=b(e),i=se.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Ne());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.$c.$r(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var l=u[s],c=pn(l,n.get(l.key));null!=c&&a.push(new vn(l.key,c,Mn(c.proto.mapValue),ln.exists(!0)))}return r.vr.xo(e,i,a,t)}))})).then((function(e){var t=e.hr(n);return{batchId:e.batchId,dr:t}}))}(i.Gu,t)];case 2:return o=r.sent(),i.Ch.Fi(o.batchId),function(e,t,n){var r=e.Bh[e.currentUser.Zs()];r||(r=new Ee(X)),r=r.rt(t,n),e.Bh[e.currentUser.Zs()]=r}(i,o.batchId,n),[4,Ra(i,o.dr)];case 3:return r.sent(),[4,$o(i.Sh)];case 4:return r.sent(),[3,6];case 5:return a=r.sent(),s=Lr(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}(t._i,e,n)})),n.promise},e.prototype.U=function(){return this.Sl.U},e.prototype.H_=function(e){var t=this;this.q_();var n=new as(e);return this.os.ds((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,function(e,t){b(e).Bs.add(t),t.next()}(this.Q_,n)]}))}))})),function(){n.e_(),t.os.ds((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,function(e,t){b(e).Bs.delete(t)}(this.Q_,n)]}))}))}))}},Object.defineProperty(e.prototype,"Y_",{get:function(){return this.os.Vs},enumerable:!1,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.q_();var n=new fr;return this.os.ds((function(){return new Bs(t.os,t.zu,e,n).run(),Promise.resolve()})),n.promise},e}();function Gs(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var Us=function(){function e(e,t,n,r,i){this.U=e,this.timestampsInSnapshots=t,this.J_=n,this.X_=r,this.Z_=i}return e.prototype.tf=function(e){switch($e(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.ef(e.timestampValue);case 4:return this.nf(e);case 5:return e.stringValue;case 6:return this.Z_(st(e.bytesValue));case 7:return this.sf(e.referenceValue);case 8:return this.if(e.geoPointValue);case 9:return this.rf(e.arrayValue);case 10:return this.af(e.mapValue);default:throw v()}},e.prototype.af=function(e){var t=this,n={};return w(e.fields||{},(function(e,r){n[e]=t.tf(r)})),n},e.prototype.if=function(e){return new As(at(e.latitude),at(e.longitude))},e.prototype.rf=function(e){var t=this;return(e.values||[]).map((function(e){return t.tf(e)}))},e.prototype.nf=function(e){switch(this.J_){case"previous":var t=function e(t){var n=t.mapValue.fields.__previous_value__;return Xe(n)?e(n):n}(e);return null==t?null:this.tf(t);case"estimate":return this.ef(Je(e));default:return null}},e.prototype.ef=function(e){var t=ot(e),n=new se(t.seconds,t.nanos);return this.timestampsInSnapshots?n:n.toDate()},e.prototype.sf=function(e){var t=S.P(e);y(Ht(t));var n=new oe(t.get(1),t.get(3)),r=new L(t.u(5));return n.isEqual(this.U)||m("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.X_(r)},e}(),qs=oi.uo,Ws=function(){function e(e){var t,n,r,i;if(void 0===e.host){if(void 0!==e.ssl)throw new h(c.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else N("settings","non-empty string","host",e.host),this.host=e.host,D("settings","boolean","ssl",e.ssl),this.ssl=null===(t=e.ssl)||void 0===t||t;if(q("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),D("settings","object","credentials",e.credentials),this.credentials=e.credentials,D("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),D("settings","boolean","ignoreUndefinedProperties",e.ignoreUndefinedProperties),!0===e.timestampsInSnapshots?m("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===e.timestampsInSnapshots&&m("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=e.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=e.ignoreUndefinedProperties)&&void 0!==r&&r,D("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=oi.lo;else{if(e.cacheSizeBytes!==qs&&e.cacheSizeBytes<oi.ho)throw new h(c.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+oi.ho);this.cacheSizeBytes=e.cacheSizeBytes}D("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=e.experimentalForceLongPolling)&&void 0!==i&&i}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties},e}(),zs=function(){function e(t,n,i,o){var a=this;if(void 0===i&&(i=new rs),void 0===o&&(o=new os),this.cf=i,this.uf=o,this.hf=null,this.lf=new Mr,this.INTERNAL={delete:function(){return r.__awaiter(a,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._f(),[4,this.ff.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var s=t;this.hf=s,this.d_=e.df(s),this.wf=s.name,this.mf=new Lo(n)}else{var u=t;if(!u.projectId)throw new h(c.INVALID_ARGUMENT,"Must provide projectId");this.d_=new oe(u.projectId,u.database),this.wf="[DEFAULT]",this.mf=new Mo}this.Tf=new Ws({})}return Object.defineProperty(e.prototype,"Ef",{get:function(){return this.If||(this.If=new Ss(this.d_,this.Tf.ignoreUndefinedProperties)),this.If},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){R("Firestore.settings",arguments,1),P("Firestore.settings","object",1,e),e.merge&&delete(e=Object.assign(Object.assign({},this.Tf),e)).merge;var t=new Ws(e);if(this.ff&&!this.Tf.isEqual(t))throw new h(c.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.Tf=t,void 0!==t.credentials&&(this.mf=function(e){if(!e)return new Mo;switch(e.type){case"gapi":var t=e.client;return y(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ro(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new h(c.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.enableNetwork=function(){return this._f(),this.ff.enableNetwork()},e.prototype.disableNetwork=function(){return this._f(),this.ff.disableNetwork()},e.prototype.enablePersistence=function(e){var t,n;if(this.ff)throw new h(c.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(e&&(void 0!==e.experimentalTabSynchronization&&m("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(t=e.synchronizeTabs)&&void 0!==t?t:e.experimentalTabSynchronization)&&void 0!==n&&n,i=!!e.experimentalForceOwningTab&&e.experimentalForceOwningTab,r&&i))throw new h(c.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Af(this.cf,this.uf,{Gl:!0,cacheSizeBytes:this.Tf.cacheSizeBytes,synchronizeTabs:r,La:i})},e.prototype.clearPersistence=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){if(void 0!==this.ff&&!this.ff.Y_)throw new h(c.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return e=new fr,[2,(this.lf.ps((function(){return r.__awaiter(t,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cf.clearPersistence(this.d_,this.wf)];case 1:return n.sent(),e.resolve(),[3,3];case 2:return t=n.sent(),e.reject(t),[3,3];case 3:return[2]}}))}))})),e.promise)]}))}))},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"Rf",{get:function(){return this._f(),this.ff.Y_},enumerable:!1,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this._f(),this.ff.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){if(this._f(),Gs(e))return this.ff.H_(e);P("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.ff.H_(t)},e.prototype._f=function(){return this.ff||this.Af(new rs,new os,{Gl:!1}),this.ff},e.prototype.Pf=function(){return new ie(this.d_,this.wf,this.Tf.host,this.Tf.ssl,this.Tf.experimentalForceLongPolling)},e.prototype.Af=function(e,t,n){var r=this.Pf();return this.ff=new Vs(this.mf,this.lf),this.ff.start(r,e,t,n)},e.df=function(e){if(t=e.options,!Object.prototype.hasOwnProperty.call(t,"projectId"))throw new h(c.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var t,n=e.options.projectId;if(!n||"string"!=typeof n)throw new h(c.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new oe(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.hf)throw new h(c.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.hf},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){return R("Firestore.collection",arguments,1),P("Firestore.collection","non-empty string",1,e),this._f(),new au(S.P(e),this,null)},e.prototype.doc=function(e){return R("Firestore.doc",arguments,1),P("Firestore.doc","non-empty string",1,e),this._f(),Ys.gf(S.P(e),this,null)},e.prototype.collectionGroup=function(e){if(R("Firestore.collectionGroup",arguments,1),P("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new h(c.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this._f(),new iu(function(e){return new In(S.g(),e)}(e),this,null)},e.prototype.runTransaction=function(e){var t=this;return R("Firestore.runTransaction",arguments,1),P("Firestore.runTransaction","function",1,e),this._f().transaction((function(n){return e(new Hs(t,n))}))},e.prototype.batch=function(){return this._f(),new Ks(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(d()){case o.LogLevel.DEBUG:return"debug";case o.LogLevel.ERROR:return"error";case o.LogLevel.SILENT:return"silent";case o.LogLevel.WARN:return"warn";case o.LogLevel.INFO:return"info";case o.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),e.setLogLevel=function(e){var t;R("Firestore.setLogLevel",arguments,1),j("setLogLevel",["debug","error","silent","warn","info","verbose"],1,e),t=e,f.setLogLevel(t)},e.prototype.yf=function(){return this.Tf.timestampsInSnapshots},e.prototype.Vf=function(){return this.Tf},e}(),Hs=function(){function e(e,t){this.pf=e,this.bf=t}return e.prototype.get=function(e){var t=this;R("Transaction.get",arguments,1);var n=cu("Transaction.get",e,this.pf);return this.bf.D_([n.w_]).then((function(e){if(!e||1!==e.length)return v();var r=e[0];if(r instanceof Rn)return new Xs(t.pf,n.w_,null,!1,!1,n.m_);if(r instanceof Cn)return new Xs(t.pf,n.w_,r,!1,!1,n.m_);throw v()}))},e.prototype.set=function(e,t,n){I("Transaction.set",arguments,2,3);var r=cu("Transaction.set",e,this.pf);n=su("Transaction.set",n);var i=fu(r.m_,t,n),o=Ts(this.pf.Ef,"Transaction.set",r.w_,i,null!==r.m_,n);return this.bf.set(r.w_,o),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof t||t instanceof us?(O("Transaction.update",arguments,3),r=cu("Transaction.update",e,this.pf),i=Ls(this.pf.Ef,"Transaction.update",r.w_,t,n,o)):(R("Transaction.update",arguments,2),r=cu("Transaction.update",e,this.pf),i=Ms(this.pf.Ef,"Transaction.update",r.w_,t)),this.bf.update(r.w_,i),this},e.prototype.delete=function(e){R("Transaction.delete",arguments,1);var t=cu("Transaction.delete",e,this.pf);return this.bf.delete(t.w_),this},e}(),Ks=function(){function e(e){this.pf=e,this.vf=[],this.Sf=!1}return e.prototype.set=function(e,t,n){I("WriteBatch.set",arguments,2,3),this.Df();var r=cu("WriteBatch.set",e,this.pf);n=su("WriteBatch.set",n);var i=fu(r.m_,t,n),o=Ts(this.pf.Ef,"WriteBatch.set",r.w_,i,null!==r.m_,n);return this.vf=this.vf.concat(o.T_(r.w_,ln.Ge())),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.Df(),"string"==typeof t||t instanceof us?(O("WriteBatch.update",arguments,3),r=cu("WriteBatch.update",e,this.pf),i=Ls(this.pf.Ef,"WriteBatch.update",r.w_,t,n,o)):(R("WriteBatch.update",arguments,2),r=cu("WriteBatch.update",e,this.pf),i=Ms(this.pf.Ef,"WriteBatch.update",r.w_,t)),this.vf=this.vf.concat(i.T_(r.w_,ln.exists(!0))),this},e.prototype.delete=function(e){R("WriteBatch.delete",arguments,1),this.Df();var t=cu("WriteBatch.delete",e,this.pf);return this.vf=this.vf.concat(new En(t.w_,ln.Ge())),this},e.prototype.commit=function(){return this.Df(),this.Sf=!0,this.vf.length>0?this.pf._f().write(this.vf):Promise.resolve()},e.prototype.Df=function(){if(this.Sf)throw new h(c.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Ys=function(e){function t(t,n,r){var i=this;return(i=e.call(this,n.d_,t,r)||this).w_=t,i.firestore=n,i.m_=r,i.ff=i.firestore._f(),i}return r.__extends(t,e),t.gf=function(e,n,r){if(e.length%2!=0)throw new h(c.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.R()+" has "+e.length);return new t(new L(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.w_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new au(this.w_.path.h(),this.firestore,this.m_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.w_.path.R()},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){if(R("DocumentReference.collection",arguments,1),P("DocumentReference.collection","non-empty string",1,e),!e)throw new h(c.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=S.P(e);return new au(this.w_.path.child(t),this.firestore,null)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw W("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.w_.isEqual(e.w_)&&this.m_===e.m_},t.prototype.set=function(e,t){I("DocumentReference.set",arguments,1,2),t=su("DocumentReference.set",t);var n=fu(this.m_,e,t),r=Ts(this.firestore.Ef,"DocumentReference.set",this.w_,n,null!==this.m_,t);return this.ff.write(r.T_(this.w_,ln.Ge()))},t.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof us?(O("DocumentReference.update",arguments,2),n=Ls(this.firestore.Ef,"DocumentReference.update",this.w_,e,t,r)):(R("DocumentReference.update",arguments,1),n=Ms(this.firestore.Ef,"DocumentReference.update",this.w_,e)),this.ff.write(n.T_(this.w_,ln.exists(!0)))},t.prototype.delete=function(){return R("DocumentReference.delete",arguments,0),this.ff.write([new En(this.w_,ln.Ge())])},t.prototype.onSnapshot=function(){for(var e,t,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];I("DocumentReference.onSnapshot",arguments,1,4);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Gs(i[s])||(q("DocumentReference.onSnapshot",a=i[s],["includeMetadataChanges"]),D("DocumentReference.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++);var u={includeMetadataChanges:a.includeMetadataChanges};if(Gs(i[s])){var l=i[s];i[s]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[s+1]=null===(t=l.error)||void 0===t?void 0:t.bind(l),i[s+2]=null===(n=l.complete)||void 0===n?void 0:n.bind(l)}else P("DocumentReference.onSnapshot","function",s,i[s]),k("DocumentReference.onSnapshot","function",s+1,i[s+1]),k("DocumentReference.onSnapshot","function",s+2,i[s+2]);var c={next:function(e){i[s]&&i[s](r.Cf(e))},error:i[s+1],complete:i[s+2]};return this.ff.listen(kn(this.w_.path),u,c)},t.prototype.get=function(e){var t=this;I("DocumentReference.get",arguments,0,1),lu("DocumentReference.get",e);var n=this.firestore._f();return e&&"cache"===e.source?n.j_(this.w_).then((function(e){return new Xs(t.firestore,t.w_,e,!0,e instanceof Cn&&e.Ye,t.m_)})):n.K_(this.w_,e).then((function(e){return t.Cf(e)}))},t.prototype.withConverter=function(e){return new t(this.w_,this.firestore,e)},t.prototype.Cf=function(e){var t=e.docs.get(this.w_);return new Xs(this.firestore,this.w_,t,e.fromCache,e.hasPendingWrites,this.m_)},t}(bs),Qs=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Xs=function(){function e(e,t,n,r,i,o){this.pf=e,this.w_=t,this.Nf=n,this.Ff=r,this.$f=i,this.m_=o}return e.prototype.data=function(e){var t=this;if(I("DocumentSnapshot.data",arguments,0,1),e=uu("DocumentSnapshot.data",e),this.Nf){if(this.m_){var n=new Js(this.pf,this.w_,this.Nf,this.Ff,this.$f,null);return this.m_.fromFirestore(n,e)}return new Us(this.pf.d_,this.pf.yf(),e.serverTimestamps||"none",(function(e){return new Ys(e,t.pf,null)}),(function(e){return new re(e)})).tf(this.Nf.sn())}},e.prototype.get=function(e,t){var n=this;if(I("DocumentSnapshot.get",arguments,1,2),t=uu("DocumentSnapshot.get",t),this.Nf){var r=this.Nf.data().field(ks("DocumentSnapshot.get",e,this.w_));if(null!==r)return new Us(this.pf.d_,this.pf.yf(),t.serverTimestamps||"none",(function(e){return new Ys(e,n.pf,n.m_)}),(function(e){return new re(e)})).tf(r)}},Object.defineProperty(e.prototype,"id",{get:function(){return this.w_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ys(this.w_,this.pf,this.m_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this.Nf},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Qs(this.$f,this.Ff)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","DocumentSnapshot",1,t);return this.pf===t.pf&&this.Ff===t.Ff&&this.w_.isEqual(t.w_)&&(null===this.Nf?null===t.Nf:this.Nf.isEqual(t.Nf))&&this.m_===t.m_},e}(),Js=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.data=function(t){return e.prototype.data.call(this,t)},t}(Xs);function Zs(e,t,n,r,i,o,a){var s;if(i.p()){if("array-contains"===o||"array-contains-any"===o)throw new h(c.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){tu(a,o);for(var u=[],l=0,f=a;l<f.length;l++){var d=f[l];u.push(eu(r,e,d))}s={arrayValue:{values:u}}}else s=eu(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||tu(a,o),s=Cs(n,t,a,"in"===o||"not-in"===o);var p=Xn.create(i,o,s);return function(e,t){if(t.un()){var n=jn(e);if(null!==n&&!n.isEqual(t.field))throw new h(c.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=Fn(e);null!==r&&nu(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new h(c.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new h(c.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,p),p}function $s(e,t,n){if(null!==e.startAt)throw new h(c.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new h(c.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new lr(t,n);return function(e,t){if(null===Fn(e)){var n=jn(e);null!==n&&nu(e,n,t.field)}}(e,r),r}function eu(e,t,n){if("string"==typeof n){if(""===n)throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bn(t)&&-1!==n.indexOf("/"))throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(S.P(n));if(!L.F(r))throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ut(e,new L(r))}if(n instanceof bs)return ut(e,n.w_);throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+G(n)+".")}function tu(e,t){if(!Array.isArray(e)||0===e.length)throw new h(c.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new h(c.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===t||"array-contains-any"===t){if(e.indexOf(null)>=0)throw new h(c.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new h(c.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")}}function nu(e,t,n){if(!n.isEqual(t))throw new h(c.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function ru(e){if(Dn(e)&&0===e.rn.length)throw new h(c.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var iu=function(){function e(e,t,n){this.xf=e,this.firestore=t,this.m_=n}return e.prototype.where=function(t,n,r){R("Query.where",arguments,3),U("Query.where",3,r);var i=j("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,n),o=ks("Query.where",t),a=Zs(this.xf,"Query.where",this.firestore.Ef,this.firestore.d_,o,i,r);return new e(function(e,t){var n=e.filters.concat([t]);return new In(e.path,e.collectionGroup,e.rn.slice(),n,e.limit,e.on,e.startAt,e.endAt)}(this.xf,a),this.firestore,this.m_)},e.prototype.orderBy=function(t,n){var r;if(I("Query.orderBy",arguments,1,2),k("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new h(c.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=ks("Query.orderBy",t),o=$s(this.xf,i,r);return new e(function(e,t){var n=e.rn.concat([t]);return new In(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.on,e.startAt,e.endAt)}(this.xf,o),this.firestore,this.m_)},e.prototype.limit=function(t){return R("Query.limit",arguments,1),P("Query.limit","number",1,t),z("Query.limit",1,t),new e(Un(this.xf,t,"F"),this.firestore,this.m_)},e.prototype.limitToLast=function(t){return R("Query.limitToLast",arguments,1),P("Query.limitToLast","number",1,t),z("Query.limitToLast",1,t),new e(Un(this.xf,t,"L"),this.firestore,this.m_)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.startAt",arguments,1);var i=this.kf("Query.startAt",t,n,!0);return new e(qn(this.xf,i),this.firestore,this.m_)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.startAfter",arguments,1);var i=this.kf("Query.startAfter",t,n,!1);return new e(qn(this.xf,i),this.firestore,this.m_)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.endBefore",arguments,1);var i=this.kf("Query.endBefore",t,n,!0);return new e(Wn(this.xf,i),this.firestore,this.m_)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.endAt",arguments,1);var i=this.kf("Query.endAt",t,n,!1);return new e(Wn(this.xf,i),this.firestore,this.m_)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","Query",1,t);return this.firestore===t.firestore&&zn(this.xf,t.xf)&&this.m_===t.m_},e.prototype.withConverter=function(t){return new e(this.xf,this.firestore,t)},e.prototype.kf=function(e,t,n,i){if(U(e,1,t),t instanceof Xs)return R(e,r.__spreadArrays([t],n),1),function(e,t,n,r,i){if(!r)throw new h(c.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Vn(e);a<s.length;a++){var u=s[a];if(u.field.p())o.push(ut(t,r.key));else{var l=r.field(u.field);if(Xe(l))throw new h(c.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var f=u.field.R();throw new h(c.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(l)}}return new or(o,i)}(this.xf,this.firestore.d_,e,t.Nf,i);var o=[t].concat(n);return function(e,t,n,r,i,o){var a=e.rn;if(i.length>a.length)throw new h(c.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var l=i[u];if(a[u].field.p()){if("string"!=typeof l)throw new h(c.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof l);if(!Bn(e)&&-1!==l.indexOf("/"))throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+l+"' contains a slash.");var f=e.path.child(S.P(l));if(!L.F(f))throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new L(f);s.push(ut(t,d))}else{var p=Cs(n,r,l);s.push(p)}}return new or(s,o)}(this.xf,this.firestore.d_,this.firestore.Ef,e,o,i)},e.prototype.onSnapshot=function(){for(var e,t,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];I("Query.onSnapshot",arguments,1,4);var a={},s=0;if("object"!=typeof i[s]||Gs(i[s])||(q("Query.onSnapshot",a=i[s],["includeMetadataChanges"]),D("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++),Gs(i[s])){var u=i[s];i[s]=null===(e=u.next)||void 0===e?void 0:e.bind(u),i[s+1]=null===(t=u.error)||void 0===t?void 0:t.bind(u),i[s+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else P("Query.onSnapshot","function",s,i[s]),k("Query.onSnapshot","function",s+1,i[s+1]),k("Query.onSnapshot","function",s+2,i[s+2]);var l={next:function(e){i[s]&&i[s](new ou(r.firestore,r.xf,e,r.m_))},error:i[s+1],complete:i[s+2]};return ru(this.xf),this.firestore._f().listen(this.xf,a,l)},e.prototype.get=function(e){var t=this;I("Query.get",arguments,0,1),lu("Query.get",e),ru(this.xf);var n=this.firestore._f();return(e&&"cache"===e.source?n.G_(this.xf):n.z_(this.xf,e)).then((function(e){return new ou(t.firestore,t.xf,e,t.m_)}))},e}(),ou=function(){function e(e,t,n,r){this.pf=e,this.Mf=t,this.Of=n,this.m_=r,this.Lf=null,this.Bf=null,this.metadata=new Qs(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.Of.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.Of.docs.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;I("QuerySnapshot.forEach",arguments,1,2),P("QuerySnapshot.forEach","function",1,e),this.Of.docs.forEach((function(r){e.call(t,n.qf(r,n.metadata.fromCache,n.Of.Qt.has(r.key)))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new iu(this.Mf,this.pf,this.m_)},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){e&&(q("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),D("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this.Of.jt)throw new h(c.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Lf&&this.Bf===t||(this.Lf=function(e,t,n){if(e.Ut.m()){var r=0;return e.docChanges.map((function(t){var i=n(t.doc,e.fromCache,e.Qt.has(t.doc.key));return t.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=e.Ut;return e.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var r=n(t.doc,e.fromCache,e.Qt.has(t.doc.key)),o=-1,a=-1;return 0!==t.type&&(o=i.indexOf(t.doc.key),i=i.delete(t.doc.key)),1!==t.type&&(a=(i=i.add(t.doc)).indexOf(t.doc.key)),{type:hu(t.type),doc:r,oldIndex:o,newIndex:a}}))}(this.Of,t,this.qf.bind(this)),this.Bf=t),this.Lf},e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","QuerySnapshot",1,t);return this.pf===t.pf&&zn(this.Mf,t.Mf)&&this.Of.isEqual(t.Of)&&this.m_===t.m_},e.prototype.qf=function(e,t,n){return new Js(this.pf,e.key,e,t,n,this.m_)},e}(),au=function(e){function t(t,n,r){var i=this;if((i=e.call(this,kn(t),n,r)||this).Uf=t,t.length%2!=1)throw new h(c.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.R()+" has "+t.length);return i}return r.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.xf.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this.xf.path.h();return e.m()?null:new Ys(new L(e),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.xf.path.R()},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){I("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Q.k()),P("CollectionReference.doc","non-empty string",1,e);var t=S.P(e);return Ys.gf(this.xf.path.child(t),this.firestore,this.m_)},t.prototype.add=function(e){R("CollectionReference.add",arguments,1);var t=this.m_?this.m_.toFirestore(e):e;P("CollectionReference.add","object",1,t);var n=this.doc();return new Ys(n.w_,this.firestore,null).set(t).then((function(){return n}))},t.prototype.withConverter=function(e){return new t(this.Uf,this.firestore,e)},t}(iu);function su(e,t){if(void 0===t)return{merge:!1};if(q(e,t,["merge","mergeFields"]),D(e,"boolean","merge",t.merge),function(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new h(c.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+G(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new h(c.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+G(r[o]))}(e,"mergeFields",0,r,(function(e){return"string"==typeof e||e instanceof us}))}(e,0,0,t.mergeFields),void 0!==t.mergeFields&&void 0!==t.merge)throw new h(c.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function uu(e,t){return void 0===t?{}:(q(e,t,["serverTimestamps"]),F(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function lu(e,t){k(e,"object",1,t),t&&(q(e,t,["source"]),F(e,0,"source",t.source,["default","server","cache"]))}function cu(e,t,n){if(t instanceof bs){if(t.firestore!==n)throw new h(c.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw W(e,"DocumentReference",1,t)}function hu(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v()}}function fu(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var du=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.serverTimestamp=function(){C("FieldValue.serverTimestamp",arguments);var e=new ds("serverTimestamp");return e.s_="FieldValue.serverTimestamp",new t(e)},t.delete=function(){C("FieldValue.delete",arguments);var e=new hs("deleteField");return e.s_="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];O("FieldValue.arrayUnion",arguments,1);var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return O("arrayUnion()",arguments,1),new ps("arrayUnion",e)}.apply(void 0,e);return r.s_="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];O("FieldValue.arrayRemove",arguments,1);var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return O("arrayRemove()",arguments,1),new ms("arrayRemove",e)}.apply(void 0,e);return r.s_="FieldValue.arrayRemove",new t(r)},t.increment=function(e){P("FieldValue.increment","number",1,e),R("FieldValue.increment",arguments,1);var n=function(e){return new gs("increment",e)}(e);return n.s_="FieldValue.increment",new t(n)},t.prototype.isEqual=function(e){return this.f_.isEqual(e.f_)},t}(vs),pu={Firestore:zs,GeoPoint:As,Timestamp:se,Blob:re,Transaction:Hs,WriteBatch:Ks,DocumentReference:Ys,DocumentSnapshot:Xs,Query:iu,QueryDocumentSnapshot:Js,QuerySnapshot:ou,CollectionReference:au,FieldPath:us,FieldValue:du,setLogLevel:zs.setLogLevel,CACHE_SIZE_UNLIMITED:qs};function mu(e){!function(e,t){e.INTERNAL.registerComponent(new u.Component("firestore",(function(e){return function(e,t){var n=new os,r=new is(n);return new zs(e,t,r,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},pu)))}(e),e.registerVersion("@firebase/firestore","1.17.2")}mu(l.default),t.__PRIVATE_registerFirestore=mu}).call(this,n(56))},function(e,t,n){var r=n(141),i=n(142),o=n(86),a=n(143);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()}},function(e,t,n){var r=n(87);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";n.r(t);var r=n(66);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var i=r(n(23));i.default.registerVersion("firebase","7.22.0","app"),e.exports=i.default},function(e,t){function n(e,t,n){var r,i,o,a,s;function u(){var l=Date.now()-a;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var l=function(){o=this,i=arguments,a=Date.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(o,i),o=i=null),s};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(s=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},l}n.debounce=n,e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(149);function i(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var a=t[i][0],s=t[i][1],u=t[o][0],l=t[o][1];if(e[1]*(a-u)+s*(u-e[0])+l*(e[0]-a)===0&&(a-e[0])*(u-e[0])<=0&&(s-e[1])*(l-e[1])<=0)return!n;s>e[1]!==l>e[1]&&e[0]<(u-a)*(e[1]-s)/(l-s)+a&&(r=!r)}return r}t.default=function(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var o=r.getCoord(e),a=r.getGeom(t),s=a.type,u=t.bbox,l=a.coordinates;if(u&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(o,u))return!1;"Polygon"===s&&(l=[l]);for(var c=!1,h=0;h<l.length&&!c;h++)if(i(o,l[h][0],n.ignoreBoundary)){for(var f=!1,d=1;d<l[h].length&&!f;)i(o,l[h][d],!n.ignoreBoundary)&&(f=!0),d++;f||(c=!0)}return c}},function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e){var n="undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof navigator,r=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(n&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();var i=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),r))}};function o(e){return e&&"[object Function]"==={}.toString.call(e)}function a(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function s(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function u(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=a(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?e:u(s(e))}function l(e){return e&&e.referenceNode?e.referenceNode:e}var c=n&&!(!window.MSInputMethodContext||!document.documentMode),h=n&&/MSIE 10/.test(navigator.userAgent);function f(e){return 11===e?c:10===e?h:c||h}function d(e){if(!e)return document.documentElement;for(var t=f(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===a(n,"position")?d(n):n:e?e.ownerDocument.documentElement:document.documentElement}function p(e){return null!==e.parentNode?p(e.parentNode):e}function m(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var a=o.commonAncestorContainer;if(e!==a&&t!==a||r.contains(i))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||d(e.firstElementChild)===e)}(a)?a:d(a);var s=p(e);return s.host?m(s.host,t):m(e,p(t).host)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",r=e.nodeName;if("BODY"===r||"HTML"===r){var i=e.ownerDocument.documentElement,o=e.ownerDocument.scrollingElement||i;return o[n]}return e[n]}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(t,"top"),i=g(t,"left"),o=n?-1:1;return e.top+=r*o,e.bottom+=r*o,e.left+=i*o,e.right+=i*o,e}function v(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+r+"Width"])}function y(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],f(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function b(e){var t=e.body,n=e.documentElement,r=f(10)&&getComputedStyle(n);return{height:y("Height",t,n,r),width:y("Width",t,n,r)}}var _=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function S(e){return x({},e,{right:e.left+e.width,bottom:e.top+e.height})}function T(e){var t={};try{if(f(10)){t=e.getBoundingClientRect();var n=g(e,"top"),r=g(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(d){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},o="HTML"===e.nodeName?b(e.ownerDocument):{},s=o.width||e.clientWidth||i.width,u=o.height||e.clientHeight||i.height,l=e.offsetWidth-s,c=e.offsetHeight-u;if(l||c){var h=a(e);l-=v(h,"x"),c-=v(h,"y"),i.width-=l,i.height-=c}return S(i)}function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=f(10),i="HTML"===t.nodeName,o=T(e),s=T(t),l=u(e),c=a(t),h=parseFloat(c.borderTopWidth),d=parseFloat(c.borderLeftWidth);n&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var p=S({top:o.top-s.top-h,left:o.left-s.left-d,width:o.width,height:o.height});if(p.marginTop=0,p.marginLeft=0,!r&&i){var m=parseFloat(c.marginTop),g=parseFloat(c.marginLeft);p.top-=h-m,p.bottom-=h-m,p.left-=d-g,p.right-=d-g,p.marginTop=m,p.marginLeft=g}return(r&&!n?t.contains(l):t===l&&"BODY"!==l.nodeName)&&(p=A(p,t)),p}function L(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=M(e,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),a=t?0:g(n),s=t?0:g(n,"left"),u={top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:o};return S(u)}function C(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===a(e,"position"))return!0;var n=s(e);return!!n&&C(n)}function R(e){if(!e||!e.parentElement||f())return document.documentElement;for(var t=e.parentElement;t&&"none"===a(t,"transform");)t=t.parentElement;return t||document.documentElement}function O(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},a=i?R(e):m(e,l(t));if("viewport"===r)o=L(a,i);else{var c=void 0;"scrollParent"===r?"BODY"===(c=u(s(t))).nodeName&&(c=e.ownerDocument.documentElement):c="window"===r?e.ownerDocument.documentElement:r;var h=M(c,a,i);if("HTML"!==c.nodeName||C(a))o=h;else{var f=b(e.ownerDocument),d=f.height,p=f.width;o.top+=h.top-h.marginTop,o.bottom=d+h.top,o.left+=h.left-h.marginLeft,o.right=p+h.left}}var g="number"===typeof(n=n||0);return o.left+=g?n:n.left||0,o.top+=g?n:n.top||0,o.right-=g?n:n.right||0,o.bottom-=g?n:n.bottom||0,o}function I(e){return e.width*e.height}function P(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=O(n,r,o,i),s={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},u=Object.keys(s).map((function(e){return x({key:e},s[e],{area:I(s[e])})})).sort((function(e,t){return t.area-e.area})),l=u.filter((function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight})),c=l.length>0?l[0].key:u[0].key,h=e.split("-")[1];return c+(h?"-"+h:"")}function k(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?R(t):m(t,l(n));return M(n,i,r)}function N(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),r=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function D(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function F(e,t,n){n=n.split("-")[0];var r=N(e),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",u=o?"height":"width",l=o?"width":"height";return i[a]=t[a]+t[u]/2-r[u]/2,i[s]=n===s?t[s]-r[l]:t[D(s)],i}function j(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function B(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===n}));var r=j(e,(function(e){return e[t]===n}));return e.indexOf(r)}(e,"name",n))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&o(n)&&(t.offsets.popper=S(t.offsets.popper),t.offsets.reference=S(t.offsets.reference),t=n(t,e))})),t}function V(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=k(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=P(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=F(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=B(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function G(e,t){return e.some((function(e){var n=e.name;return e.enabled&&n===t}))}function U(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],o=i?""+i+n:e;if("undefined"!==typeof document.body.style[o])return o}return null}function q(){return this.state.isDestroyed=!0,G(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[U("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function W(e){var t=e.ownerDocument;return t?t.defaultView:window}function z(e,t,n,r){n.updateBound=r,W(e).addEventListener("resize",n.updateBound,{passive:!0});var i=u(e);return function e(t,n,r,i){var o="BODY"===t.nodeName,a=o?t.ownerDocument.defaultView:t;a.addEventListener(n,r,{passive:!0}),o||e(u(a.parentNode),n,r,i),i.push(a)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function H(){this.state.eventsEnabled||(this.state=z(this.reference,this.options,this.state,this.scheduleUpdate))}function K(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,W(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function Y(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function Q(e,t){Object.keys(t).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&Y(t[n])&&(r="px"),e.style[n]=t[n]+r}))}var X=n&&/Firefox/i.test(navigator.userAgent);function J(e,t,n){var r=j(e,(function(e){return e.name===t})),i=!!r&&e.some((function(e){return e.name===n&&e.enabled&&e.order<r.order}));if(!i){var o="`"+t+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}var Z=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],$=Z.slice(3);function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$.indexOf(e),r=$.slice(n+1).concat($.slice(0,n));return t?r.reverse():r}var te="flip",ne="clockwise",re="counterclockwise";function ie(e,t,n,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),a=e.split(/(\+|\-)/).map((function(e){return e.trim()})),s=a.indexOf(j(a,(function(e){return-1!==e.search(/,|\s/)})));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,l=-1!==s?[a.slice(0,s).concat([a[s].split(u)[0]]),[a[s].split(u)[1]].concat(a.slice(s+1))]:[a];return(l=l.map((function(e,r){var i=(1===r?!o:o)?"height":"width",a=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,a=!0,e):a?(e[e.length-1]+=t,a=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],a=i[2];if(!o)return e;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}return S(s)[t]/100*o}if("vh"===a||"vw"===a){return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}(e,i,t,n)}))}))).forEach((function(e,t){e.forEach((function(n,r){Y(n)&&(i[t]+=n*("-"===e[r-1]?-1:1))}))})),i}var oe={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,o=i.reference,a=i.popper,s=-1!==["bottom","top"].indexOf(n),u=s?"left":"top",l=s?"width":"height",c={start:E({},u,o[u]),end:E({},u,o[u]+o[l]-a[l])};e.offsets.popper=x({},a,c[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,r=e.placement,i=e.offsets,o=i.popper,a=i.reference,s=r.split("-")[0],u=void 0;return u=Y(+n)?[+n,0]:ie(n,o,a,s),"left"===s?(o.top+=u[0],o.left-=u[1]):"right"===s?(o.top+=u[0],o.left+=u[1]):"top"===s?(o.left+=u[0],o.top-=u[1]):"bottom"===s&&(o.left+=u[0],o.top+=u[1]),e.popper=o,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||d(e.instance.popper);e.instance.reference===n&&(n=d(n));var r=U("transform"),i=e.instance.popper.style,o=i.top,a=i.left,s=i[r];i.top="",i.left="",i[r]="";var u=O(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=o,i.left=a,i[r]=s,t.boundaries=u;var l=t.priority,c=e.offsets.popper,h={primary:function(e){var n=c[e];return c[e]<u[e]&&!t.escapeWithReference&&(n=Math.max(c[e],u[e])),E({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=c[n];return c[e]>u[e]&&!t.escapeWithReference&&(r=Math.min(c[n],u[e]-("right"===e?c.width:c.height))),E({},n,r)}};return l.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";c=x({},c,h[t](e))})),e.offsets.popper=c,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(i),s=a?"right":"bottom",u=a?"left":"top",l=a?"width":"height";return n[s]<o(r[u])&&(e.offsets.popper[u]=o(r[u])-n[l]),n[u]>o(r[s])&&(e.offsets.popper[u]=o(r[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!J(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"===typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],o=e.offsets,s=o.popper,u=o.reference,l=-1!==["left","right"].indexOf(i),c=l?"height":"width",h=l?"Top":"Left",f=h.toLowerCase(),d=l?"left":"top",p=l?"bottom":"right",m=N(r)[c];u[p]-m<s[f]&&(e.offsets.popper[f]-=s[f]-(u[p]-m)),u[f]+m>s[p]&&(e.offsets.popper[f]+=u[f]+m-s[p]),e.offsets.popper=S(e.offsets.popper);var g=u[f]+u[c]/2-m/2,A=a(e.instance.popper),v=parseFloat(A["margin"+h]),y=parseFloat(A["border"+h+"Width"]),b=g-e.offsets.popper[f]-v-y;return b=Math.max(Math.min(s[c]-m,b),0),e.arrowElement=r,e.offsets.arrow=(E(n={},f,Math.round(b)),E(n,d,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(G(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=O(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],i=D(r),o=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case te:a=[r,i];break;case ne:a=ee(r);break;case re:a=ee(r,!0);break;default:a=t.behavior}return a.forEach((function(s,u){if(r!==s||a.length===u+1)return e;r=e.placement.split("-")[0],i=D(r);var l=e.offsets.popper,c=e.offsets.reference,h=Math.floor,f="left"===r&&h(l.right)>h(c.left)||"right"===r&&h(l.left)<h(c.right)||"top"===r&&h(l.bottom)>h(c.top)||"bottom"===r&&h(l.top)<h(c.bottom),d=h(l.left)<h(n.left),p=h(l.right)>h(n.right),m=h(l.top)<h(n.top),g=h(l.bottom)>h(n.bottom),A="left"===r&&d||"right"===r&&p||"top"===r&&m||"bottom"===r&&g,v=-1!==["top","bottom"].indexOf(r),y=!!t.flipVariations&&(v&&"start"===o&&d||v&&"end"===o&&p||!v&&"start"===o&&m||!v&&"end"===o&&g),b=!!t.flipVariationsByContent&&(v&&"start"===o&&p||v&&"end"===o&&d||!v&&"start"===o&&g||!v&&"end"===o&&m),_=y||b;(f||A||_)&&(e.flipped=!0,(f||A)&&(r=a[u+1]),_&&(o=function(e){return"end"===e?"start":"start"===e?"end":e}(o)),e.placement=r+(o?"-"+o:""),e.offsets.popper=x({},e.offsets.popper,F(e.instance.popper,e.offsets.reference,e.placement)),e=B(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[a?"left":"top"]=o[n]-(s?i[a?"width":"height"]:0),e.placement=D(t),e.offsets.popper=S(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!J(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=j(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,i=e.offsets.popper,o=j(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:t.gpuAcceleration,s=d(e.instance.popper),u=T(s),l={position:i.position},c=function(e,t){var n=e.offsets,r=n.popper,i=n.reference,o=Math.round,a=Math.floor,s=function(e){return e},u=o(i.width),l=o(r.width),c=-1!==["left","right"].indexOf(e.placement),h=-1!==e.placement.indexOf("-"),f=t?c||h||u%2===l%2?o:a:s,d=t?o:s;return{left:f(u%2===1&&l%2===1&&!h&&t?r.left-1:r.left),top:d(r.top),bottom:d(r.bottom),right:f(r.right)}}(e,window.devicePixelRatio<2||!X),h="bottom"===n?"top":"bottom",f="right"===r?"left":"right",p=U("transform"),m=void 0,g=void 0;if(g="bottom"===h?"HTML"===s.nodeName?-s.clientHeight+c.bottom:-u.height+c.bottom:c.top,m="right"===f?"HTML"===s.nodeName?-s.clientWidth+c.right:-u.width+c.right:c.left,a&&p)l[p]="translate3d("+m+"px, "+g+"px, 0)",l[h]=0,l[f]=0,l.willChange="transform";else{var A="bottom"===h?-1:1,v="right"===f?-1:1;l[h]=g*A,l[f]=m*v,l.willChange=h+", "+f}var y={"x-placement":e.placement};return e.attributes=x({},y,e.attributes),e.styles=x({},l,e.styles),e.arrowStyles=x({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return Q(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach((function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)})),e.arrowElement&&Object.keys(e.arrowStyles).length&&Q(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,i){var o=k(i,t,e,n.positionFixed),a=P(n.placement,o,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",a),Q(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},ae=function(){function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=i(this.update.bind(this)),this.options=x({},e.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(x({},e.Defaults.modifiers,a.modifiers)).forEach((function(t){r.options.modifiers[t]=x({},e.Defaults.modifiers[t]||{},a.modifiers?a.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return x({name:e},r.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(e){e.enabled&&o(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)})),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return w(e,[{key:"update",value:function(){return V.call(this)}},{key:"destroy",value:function(){return q.call(this)}},{key:"enableEventListeners",value:function(){return H.call(this)}},{key:"disableEventListeners",value:function(){return K.call(this)}}]),e}();ae.Utils=("undefined"!==typeof window?window:e).PopperUtils,ae.placements=Z,ae.Defaults=oe,t.a=ae}).call(this,n(55))},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(0,r(n(33)).default)(i.default.createElement("path",{d:"M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm2.19 12.19L6 18l3.81-8.19L18 6l-3.81 8.19z"}),"Explore");t.default=o},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(0,r(n(33)).default)(i.default.createElement("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6z"}),"Brightness4");t.default=o},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(0,r(n(33)).default)(i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M3.81 6.28C2.67 7.9 2 9.87 2 12s.67 4.1 1.81 5.72C6.23 16.95 8 14.68 8 12S6.23 7.05 3.81 6.28zM20.19 6.28C17.77 7.05 16 9.32 16 12s1.77 4.95 4.19 5.72C21.33 16.1 22 14.13 22 12s-.67-4.1-1.81-5.72z"}),i.default.createElement("path",{d:"M14 12c0-3.28 1.97-6.09 4.79-7.33C17.01 3.02 14.63 2 12 2S6.99 3.02 5.21 4.67C8.03 5.91 10 8.72 10 12s-1.97 6.09-4.79 7.33C6.99 20.98 9.37 22 12 22s5.01-1.02 6.79-2.67C15.97 18.09 14 15.28 14 12z"})),"SportsBaseball");t.default=o},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(0,r(n(33)).default)(i.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.default=o},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(0,r(n(33)).default)(i.default.createElement("path",{d:"M22 5.7l-4.6-3.9-1.3 1.5 4.6 3.9L22 5.7zM7.9 3.4L6.6 1.9 2 5.7l1.3 1.5 4.6-3.8zM12.5 8H11v6l4.7 2.9.8-1.2-4-2.4V8zM12 4c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7z"}),"AccessAlarms");t.default=o},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(0,r(n(33)).default)(i.default.createElement("path",{d:"M19.07 4.93l-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z"}),"TrackChanges");t.default=o},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(0,r(n(33)).default)(i.default.createElement("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),"Room");t.default=o},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(0,r(n(33)).default)(i.default.createElement("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"Message");t.default=o},function(e,t,n){"use strict";var r=n(30);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(0,r(n(33)).default)(i.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.default=o},function(e,t,n){"use strict";var r=n(0),i=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=function(e,t){var n=new Set(t);return Object.assign.apply(Object,[{}].concat(s(Object.entries(e).filter((function(e){var t=a(e,1)[0];return!n.has(t)})).map((function(e){var t=a(e,2);return o({},t[0],t[1])})))))},l=n(75),c=n.n(l);function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e,t){var n="object"===h(t)?t:{wrapperElementType:t,methodNames:(arguments.length<=2?void 0:arguments[2])||void 0,initPropNames:(arguments.length<=3?void 0:arguments[3])||void 0},o=n.wrapperElementType,a=void 0===o?"div":o,s=n.nodeMapper,l=void 0===s?function(e){return e}:s,p=n.methodNames,m=void 0===p?[]:p,g=n.initPropNames,A=void 0===g?[]:g;return Object(r.forwardRef)((function(t,n){var o=Object(r.useRef)(),s=f(Object(r.useState)({}),2),h=s[0],p=s[1];Object(r.useEffect)((function(){return p(t)}));var g=Object(r.useMemo)((function(){var n=c()(A.filter((function(e){return t.hasOwnProperty(e)})).map((function(e){return[e,t[e]]})));return e(n)}),[]);Object(r.useLayoutEffect)((function(){g(l(o.current))}),[]),Object(r.useEffect)((function(){return g._destructor instanceof Function?g._destructor:void 0}),[]);var v=Object(r.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return g[e]instanceof Function?g[e].apply(g,n):void 0}),[g]),y=u(t,[].concat(d(m),d(A)));return Object.keys(y).filter((function(e){return h[e]!==t[e]})).forEach((function(e){return v(e,t[e])})),Object(r.useImperativeHandle)(n,(function(){return c()(m.map((function(e){return[e,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v.apply(void 0,[e].concat(n))}]})))})),i.a.createElement(a,{ref:o})}))},A=n(3),v=n(90),y=n.n(v);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _=function e(t,n){var r=n.default,i=void 0===r?null:r,o=n.triggerUpdate,a=void 0===o||o,s=n.onChange,u=void 0===s?function(e,t){}:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.defaultVal=i,this.triggerUpdate=a,this.onChange=u};var w=function(e){var t=e.stateInit,n=void 0===t?function(){return{}}:t,r=e.props,i=void 0===r?{}:r,o=e.methods,a=void 0===o?{}:o,s=e.aliases,u=void 0===s?{}:s,l=e.init,c=void 0===l?function(){}:l,h=e.update,f=void 0===h?function(){}:h,d=Object.keys(i).map((function(e){return new _(e,i[e])}));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},n instanceof Function?n(e):n,{initialised:!1}),r={};function i(t){return o(t,e),s(),i}var o=function(e,n){c.call(i,e,t,n),t.initialised=!0},s=y()((function(){t.initialised&&(f.call(i,t,r),r={})}),1);return d.forEach((function(e){i[e.name]=function(e){var n=e.name,o=e.triggerUpdate,a=void 0!==o&&o,u=e.onChange,l=void 0===u?function(e,t){}:u,c=e.defaultVal,h=void 0===c?null:c;return function(e){var o=t[n];if(!arguments.length)return o;var u=void 0===e?h:e;return t[n]=u,l.call(i,u,t,o),!r.hasOwnProperty(n)&&(r[n]=o),a&&s(),i}}(e)})),Object.keys(a).forEach((function(e){i[e]=function(){for(var n,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=a[e]).call.apply(n,[i,t].concat(o))}})),Object.entries(u).forEach((function(e){var t=b(e,2),n=t[0],r=t[1];return i[n]=i[r]})),i.resetProps=function(){return d.forEach((function(e){i[e.name](e.defaultVal)})),i},i.resetProps(),t._rerender=s,i}},E=n(18),x=n(43),S=n.n(x);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var M=function(e,t,n){for(var r=[],i=1;i<=n;i++)r.push(e+(t-e)*i/(n+1));return r},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=null;return e.forEach((function(e){if(r){var i=Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2));if(i>t)for(var o=Math.floor(i/t),a=M(r[0],e[0],o),s=M(r[1],e[1],o),u=0,l=a.length;u<l;u++)n.push([a[u],s[u]])}n.push(r=e)})),n},C=window.THREE?window.THREE:{BufferGeometry:A.e,Float32BufferAttribute:A.r,Geometry:A.t},R=(new C.BufferGeometry).setAttribute?"setAttribute":"addAttribute";function O(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;C.BufferGeometry.call(this),this.type="GeoJsonGeometry",this.parameters={geoJson:e,radius:n,resolution:r};var i=({Point:u,MultiPoint:l,LineString:c,MultiLineString:h,Polygon:f,MultiPolygon:d}[e.type]||function(){return[]})(e.coordinates,n),o=[],a=[],s=0;function u(e,t){return[{vertices:k(e[1],e[0],t),indices:[]}]}function l(e,t){var n={vertices:[],indices:[]};return e.map((function(e){return u(e,t)})).forEach((function(e){var t=T(e,1)[0];I(n,t)})),[n]}function c(e,t){for(var n=L(e,r).map((function(e){var n=T(e,2),r=n[0];return k(n[1],r,t)})),i=S.a.flatten([n]).vertices,o=Math.round(i.length/3),a=[],s=1;s<o;s++)a.push(s-1,s);return[{vertices:i,indices:a}]}function h(e,t){var n={vertices:[],indices:[]};return e.map((function(e){return c(e,t)})).forEach((function(e){var t=T(e,1)[0];I(n,t)})),[n]}function f(e,t){for(var n=e.map((function(e){return L(e,r).map((function(e){var n=T(e,2),r=n[0];return k(n[1],r,t)}))})),i=S.a.flatten(n),o=i.vertices,a=i.holes,s=a[0]||1/0,u=o.slice(0,s),l=o.slice(s),c=new Set(a),h=Math.round(o.length/3),f=[],d=[],p=1;p<h;p++)c.has(p)||(p<s?f.push(p-1,p):d.push(p-1-s,p-s));var m=[{indices:f,vertices:u}];return a.length&&m.push({indices:d,vertices:l}),m}function d(e,t){var n={vertices:[],indices:[]},r={vertices:[],indices:[]};e.map((function(e){return f(e,t)})).forEach((function(e){var t=T(e,2),i=t[0],o=t[1];I(n,i),o&&I(r,o)}));var i=[n];return r.vertices.length&&i.push(r),i}i.forEach((function(e){var n=o.length;I({indices:o,vertices:a},e),t.addGroup(n,o.length-n,s++)})),o.length&&this.setIndex(o),a.length&&this[R]("position",new C.Float32BufferAttribute(a,3))}function I(e,t){var n=Math.round(e.vertices.length/3);P(e.vertices,t.vertices),P(e.indices,t.indices.map((function(e){return e+n})))}function P(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push(s)}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(90-e)*Math.PI/180,i=(90-t)*Math.PI/180;return[n*Math.sin(r)*Math.cos(i),n*Math.cos(r),n*Math.sin(r)*Math.sin(i)]}O.prototype=Object.create(C.BufferGeometry.prototype),O.prototype.constructor=O;var N={backside:!0,coefficient:.5,color:"gold",size:2,power:1};function D(e,t){void 0===t&&(t=N);var n=t.backside,r=t.coefficient,i=t.color,o=t.power,a=function(e,t){var n=e.clone(),r=new Array(n.vertices.length);return n.faces.forEach((function(e){e instanceof A.p?(r[e.a]=e.vertexNormals[0],r[e.b]=e.vertexNormals[1],r[e.c]=e.vertexNormals[2]):console.error("Face needs to be an instance of THREE.Face3.")})),n.vertices.forEach((function(e,n){var i=r[n],o=i.y,a=i.z;e.x+=i.x*t,e.y+=o*t,e.z+=a*t})),n}(e,t.size),s=function(e,t,n){return new A.T({depthWrite:!1,fragmentShader:"\nuniform vec3 color;\nuniform float coefficient;\nuniform float power;\nvarying vec3 vVertexNormal;\nvarying vec3 vVertexWorldPosition;\nvoid main() {\n  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;\n  vec3 viewCameraToVertex\t= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;\n  viewCameraToVertex = normalize(viewCameraToVertex);\n  float intensity\t= pow(\n    coefficient + dot(vVertexNormal, viewCameraToVertex),\n    power\n  );\n  gl_FragColor = vec4(color, intensity);\n}",transparent:!0,uniforms:{coefficient:{value:e},color:{value:new A.h(t)},power:{value:n}},vertexShader:"\nvarying vec3 vVertexWorldPosition;\nvarying vec3 vVertexNormal;\nvoid main() {\n  vVertexNormal\t= normalize(normalMatrix * normal);\n  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  gl_Position\t= projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"})}(r,i,o);return n&&(s.side=A.c),new A.E(a,s)}var F=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};var j=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return F(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}(F),B=j.right,V=(j.left,B);var G=Array.prototype,U=(G.slice,G.map,function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}),q=Math.sqrt(50),W=Math.sqrt(10),z=Math.sqrt(2);function H(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=q?10:o>=W?5:o>=z?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=q?10:o>=W?5:o>=z?2:1)}function K(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=q?i*=10:o>=W?i*=5:o>=z&&(i*=2),t<e?-i:i}var Y=Math.PI,Q=Y/2,X=180/Y,J=Y/180,Z=Math.abs,$=(Math.atan,Math.atan2),ee=Math.cos,te=Math.ceil,ne=(Math.exp,Math.floor,Math.log,Math.pow,Math.sin),re=(Math.sign,Math.sqrt);Math.tan;function ie(e){return(e=ne(e/2))*e}function oe(e,t,n){var r=U(e,t-1e-6,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function ae(e,t,n){var r=U(e,t-1e-6,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function se(){return function(){var e,t,n,r,i,o,a,s,u,l,c,h,f=10,d=f,p=90,m=360,g=2.5;function A(){return{type:"MultiLineString",coordinates:v()}}function v(){return U(te(r/p)*p,n,p).map(c).concat(U(te(s/m)*m,a,m).map(h)).concat(U(te(t/f)*f,e,f).filter((function(e){return Z(e%p)>1e-6})).map(u)).concat(U(te(o/d)*d,i,d).filter((function(e){return Z(e%m)>1e-6})).map(l))}return A.lines=function(){return v().map((function(e){return{type:"LineString",coordinates:e}}))},A.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(h(a).slice(1),c(n).reverse().slice(1),h(s).reverse().slice(1))]}},A.extent=function(e){return arguments.length?A.extentMajor(e).extentMinor(e):A.extentMinor()},A.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),A.precision(g)):[[r,s],[n,a]]},A.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),A.precision(g)):[[t,o],[e,i]]},A.step=function(e){return arguments.length?A.stepMajor(e).stepMinor(e):A.stepMinor()},A.stepMajor=function(e){return arguments.length?(p=+e[0],m=+e[1],A):[p,m]},A.stepMinor=function(e){return arguments.length?(f=+e[0],d=+e[1],A):[f,d]},A.precision=function(f){return arguments.length?(g=+f,u=oe(o,i,90),l=ae(t,e,g),c=oe(s,a,90),h=ae(r,n,g),A):g},A.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}()()}function ue(){this.reset()}ue.prototype={constructor:ue,reset:function(){this.s=this.t=0},add:function(e){ce(le,e,this.t),ce(this,le.s,this.s),this.s?this.t+=le.t:this.s=le.t},valueOf:function(){return this.s}};var le=new ue;function ce(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}function he(){}function fe(e,t){e&&pe.hasOwnProperty(e.type)&&pe[e.type](e,t)}var de={Feature:function(e,t){fe(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)fe(n[r].geometry,t)}},pe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){me(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)me(n[r],t,0)},Polygon:function(e,t){ge(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ge(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)fe(n[r],t)}};function me(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function ge(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)me(e[n],t,1);t.polygonEnd()}var Ae,ve,ye,be=new ue,_e={sphere:he,point:he,lineStart:function(){_e.point=Ee,_e.lineEnd=we},lineEnd:he,polygonStart:he,polygonEnd:he};function we(){_e.point=_e.lineEnd=he}function Ee(e,t){Ae=e*=J,ve=ne(t*=J),ye=ee(t),_e.point=xe}function xe(e,t){e*=J;var n=ne(t*=J),r=ee(t),i=Z(e-Ae),o=ee(i),a=r*ne(i),s=ye*n-ve*r*o,u=ve*n+ye*r*o;be.add($(re(a*a+s*s),u)),Ae=e,ve=n,ye=r}var Se=function(e){return be.reset(),function(e,t){e&&de.hasOwnProperty(e.type)?de[e.type](e,t):fe(e,t)}(e,_e),+be},Te=[null,null],Me={type:"LineString",coordinates:Te},Le=function(e,t){return Te[0]=e,Te[1]=t,Se(Me)},Ce=function(e,t){var n,r=e[0]*J,i=e[1]*J,o=t[0]*J,a=t[1]*J,s=ee(i),u=ne(i),l=ee(a),c=ne(a),h=s*ee(r),f=s*ne(r),d=l*ee(o),p=l*ne(o),m=2*((n=re(ie(a-i)+s*l*ie(o-r)))>1?Q:n<-1?-Q:Math.asin(n)),g=ne(m),A=m?function(e){var t=ne(e*=m)/g,n=ne(m-e)/g,r=n*h+t*d,i=n*f+t*p,o=n*u+t*c;return[$(i,r)*X,$(o,re(r*r+i*i))*X]}:function(){return[r*X,i*X]};return A.distance=m,A},Re=function(e){return e instanceof Function?e:"string"===typeof e?function(t){return t[e]}:function(t){return e}},Oe=n(70),Ie=n.n(Oe);function Pe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ne(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function De(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(t instanceof Array?t.length?t:[void 0]:[t]).map((function(e){return{keyAccessor:e,isProp:!(e instanceof Function)}})),o=e.reduce((function(e,t){var r=e,o=t;return i.forEach((function(e,t){var a,s=e.keyAccessor;if(e.isProp){var u=o,l=u[s],c=Pe(u,[s].map(De));a=l,o=c}else a=s(o,t);t+1<i.length?(r.hasOwnProperty(a)||(r[a]={}),r=r[a]):n?(r.hasOwnProperty(a)||(r[a]=[]),r[a].push(o)):r[a]=o})),e}),{});n instanceof Function&&function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===i.length?Object.keys(t).forEach((function(e){return t[e]=n(t[e])})):Object.values(t).forEach((function(t){return e(t,r+1)}))}(o);var a=o;return r&&(a=[],function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===i.length?a.push({keys:n,vals:t}):Object.entries(t).forEach((function(t){var r=ke(t,2),i=r[0],o=r[1];return e(o,[].concat(Ne(n),[i]))}))}(o),t instanceof Array&&0===t.length&&1===a.length&&(a[0].keys=[])),a};function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ue(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qe(e,t,n){var r=n.objBindAttr,i=void 0===r?"__obj":r,o=n.dataBindAttr,a=void 0===o?"__data":o,s=n.idAccessor,u=n.purge,l=void 0!==u&&u,c=function(e){return e.hasOwnProperty(a)},h=t.filter((function(e){return!c(e)})),f=t.filter(c).map((function(e){return e[a]})),d=l?{enter:e,exit:f,update:[]}:function(e,t,n){var r={enter:[],update:[],exit:[]};if(n){var i=Fe(e,n,!1),o=Fe(t,n,!1),a=Object.assign({},i,o);Object.entries(a).forEach((function(e){var t=Ge(e,2),n=t[0],a=t[1],s=i.hasOwnProperty(n)?o.hasOwnProperty(n)?"update":"exit":"enter";r[s].push("update"===s?[i[n],o[n]]:a)}))}else{var s=new Set(e),u=new Set(t);new Set([].concat(Ue(s),Ue(u))).forEach((function(e){var t=s.has(e)?u.has(e)?"update":"exit":"enter";r[t].push("update"===t?[e,e]:e)}))}return r}(f,e,s);return d.update=d.update.map((function(e){var t=Ge(e,2),n=t[0],r=t[1];return n!==r&&(r[i]=n[i],r[i][a]=r),r})),d.exit=d.exit.concat(h.map((function(e){return je({},i,e)}))),d}var We=function(e,t,n,r,i){var o=i.createObj,a=void 0===o?function(e){return{}}:o,s=i.updateObj,u=void 0===s?function(e,t){}:s,l=i.exitObj,c=void 0===l?function(e){}:l,h=i.objBindAttr,f=void 0===h?"__obj":h,d=i.dataBindAttr,p=void 0===d?"__data":d,m=Ve(i,["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"]),g=qe(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({objBindAttr:f,dataBindAttr:p},m)),A=g.enter,v=g.update;g.exit.forEach((function(e){var t=e[f];delete e[f],c(t),r(t)}));var y=function(e){var t=[];return e.forEach((function(e){var n=a(e);n&&(n[p]=e,e[f]=n,t.push(n))})),t}(A);!function(e){e.forEach((function(e){var t=e[f];t&&(t[p]=e,u(t,e))}))}([].concat(Ue(A),Ue(v))),y.forEach(n)},ze=n(76),He=n.n(ze),Ke=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function Ye(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qe(){}var Xe="\\s*([+-]?\\d+)\\s*",Je="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ze="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$e=/^#([0-9a-f]{3,8})$/,et=new RegExp("^rgb\\("+[Xe,Xe,Xe]+"\\)$"),tt=new RegExp("^rgb\\("+[Ze,Ze,Ze]+"\\)$"),nt=new RegExp("^rgba\\("+[Xe,Xe,Xe,Je]+"\\)$"),rt=new RegExp("^rgba\\("+[Ze,Ze,Ze,Je]+"\\)$"),it=new RegExp("^hsl\\("+[Je,Ze,Ze]+"\\)$"),ot=new RegExp("^hsla\\("+[Je,Ze,Ze,Je]+"\\)$"),at={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function st(){return this.rgb().formatHex()}function ut(){return this.rgb().formatRgb()}function lt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ct(t):3===n?new pt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ht(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ht(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=et.exec(e))?new pt(t[1],t[2],t[3],1):(t=tt.exec(e))?new pt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=nt.exec(e))?ht(t[1],t[2],t[3],t[4]):(t=rt.exec(e))?ht(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=it.exec(e))?vt(t[1],t[2]/100,t[3]/100,1):(t=ot.exec(e))?vt(t[1],t[2]/100,t[3]/100,t[4]):at.hasOwnProperty(e)?ct(at[e]):"transparent"===e?new pt(NaN,NaN,NaN,0):null}function ct(e){return new pt(e>>16&255,e>>8&255,255&e,1)}function ht(e,t,n,r){return r<=0&&(e=t=n=NaN),new pt(e,t,n,r)}function ft(e){return e instanceof Qe||(e=lt(e)),e?new pt((e=e.rgb()).r,e.g,e.b,e.opacity):new pt}function dt(e,t,n,r){return 1===arguments.length?ft(e):new pt(e,t,n,null==r?1:r)}function pt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function mt(){return"#"+At(this.r)+At(this.g)+At(this.b)}function gt(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function At(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function vt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bt(e,t,n,r)}function yt(e){if(e instanceof bt)return new bt(e.h,e.s,e.l,e.opacity);if(e instanceof Qe||(e=lt(e)),!e)return new bt;if(e instanceof bt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new bt(a,s,u,e.opacity)}function bt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function _t(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function wt(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}Ke(Qe,lt,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:st,formatHex:st,formatHsl:function(){return yt(this).formatHsl()},formatRgb:ut,toString:ut}),Ke(pt,dt,Ye(Qe,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new pt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new pt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mt,formatHex:mt,formatRgb:gt,toString:gt})),Ke(bt,(function(e,t,n,r){return 1===arguments.length?yt(e):new bt(e,t,n,null==r?1:r)}),Ye(Qe,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new bt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new bt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new pt(_t(e>=240?e-240:e+120,i,r),_t(e,i,r),_t(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Et=function(e){return function(){return e}};function xt(e,t){return function(n){return e+n*t}}function St(e){return 1===(e=+e)?Tt:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Et(isNaN(t)?n:t)}}function Tt(e,t){var n=t-e;return n?xt(e,n):Et(isNaN(e)?t:e)}var Mt=function e(t){var n=St(t);function r(e,t){var r=n((e=dt(e)).r,(t=dt(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Tt(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Lt(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=dt(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}Lt((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return wt((n-r/t)*t,a,i,o,s)}})),Lt((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return wt((n-r/t)*t,i,o,a,s)}}));var Ct=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}};function Rt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var Ot=function(e,t){return(Rt(t)?Ct:It)(e,t)};function It(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Bt(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}var Pt=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},kt=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},Nt=function(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Bt(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},Dt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ft=new RegExp(Dt.source,"g");var jt=function(e,t){var n,r,i,o=Dt.lastIndex=Ft.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=Dt.exec(e))&&(r=Ft.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:kt(n,r)})),o=Ft.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})},Bt=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?Et(t):("number"===r?kt:"string"===r?(n=lt(t))?(t=n,Mt):jt:t instanceof lt?Mt:t instanceof Date?Pt:Rt(t)?Ct:Array.isArray(t)?It:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Nt:kt)(e,t)},Vt=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},Gt=function(e){return+e},Ut=[0,1];function qt(e){return e}function Wt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function zt(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Wt(i,r),o=n(a,o)):(r=Wt(r,i),o=n(o,a)),function(e){return o(r(e))}}function Ht(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Wt(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=V(e,t,1,r)-1;return o[n](i[n](t))}}function Kt(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yt(){var e,t,n,r,i,o,a=Ut,s=Ut,u=Bt,l=qt;function c(){var e=Math.min(a.length,s.length);return l!==qt&&(l=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?Ht:zt,i=o=null,h}function h(t){return isNaN(t=+t)?n:(i||(i=r(a.map(e),s,u)))(e(l(t)))}return h.invert=function(n){return l(t((o||(o=r(s,a.map(e),kt)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,Gt),c()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),u=Vt,c()},h.clamp=function(e){return arguments.length?(l=!!e||qt,c()):l!==qt},h.interpolate=function(e){return arguments.length?(u=e,c()):u},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,c()}}function Qt(){return Yt()(qt,qt)}function Xt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var Jt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zt(e){if(!(t=Jt.exec(e)))throw new Error("invalid format: "+e);var t;return new $t({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function $t(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}Zt.prototype=$t.prototype,$t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function en(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}var tn,nn,rn,on,an=function(e){return(e=en(Math.abs(e)))?e[1]:NaN},sn=function(e,t){var n=en(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},un={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return sn(100*e,t)},r:sn,s:function(e,t){var n=en(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(tn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+en(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},ln=function(e){return e},cn=Array.prototype.map,hn=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];nn=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?ln:(t=cn.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?ln:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(cn.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Zt(e)).fill,n=e.align,h=e.sign,f=e.symbol,d=e.zero,p=e.width,m=e.comma,g=e.precision,A=e.trim,v=e.type;"n"===v?(m=!0,v="g"):un[v]||(void 0===g&&(g=12),A=!0,v="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var y="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===f?o:/[%p]/.test(v)?u:"",_=un[v],w=/[defgprs%]/.test(v);function E(e){var i,o,u,f=y,E=b;if("c"===v)E=_(e)+E,e="";else{var x=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:_(Math.abs(e),g),A&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),x&&0===+e&&"+"!==h&&(x=!1),f=(x?"("===h?h:l:"-"===h||"("===h?"":h)+f,E=("s"===v?hn[8+tn/3]:"")+E+(x&&"("===h?")":""),w)for(i=-1,o=e.length;++i<o;)if(48>(u=e.charCodeAt(i))||u>57){E=(46===u?a+e.slice(i+1):e.slice(i))+E,e=e.slice(0,i);break}}m&&!d&&(e=r(e,1/0));var S=f.length+e.length+E.length,T=S<p?new Array(p-S+1).join(t):"";switch(m&&d&&(e=r(T+e,T.length?p-E.length:1/0),T=""),n){case"<":e=f+e+E+T;break;case"=":e=f+T+e+E;break;case"^":e=T.slice(0,S=T.length>>1)+f+e+E+T.slice(S);break;default:e=T+f+e+E}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return e+""},E}return{format:h,formatPrefix:function(e,t){var n=h(((e=Zt(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(an(t)/3))),i=Math.pow(10,-r),o=hn[8+r/3];return function(e){return n(i*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),rn=nn.format,on=nn.formatPrefix;var fn=function(e,t,n,r){var i,o=K(e,t,n);switch((r=Zt(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(an(t)/3)))-an(Math.abs(e)))}(o,a))||(r.precision=i),on(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,an(t)-an(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-an(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return rn(r)};function dn(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=H(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return fn(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=H(u,l,n))===r)return o[a]=u,o[s]=l,t(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function pn(){var e=Qt();return e.copy=function(){return Kt(e,pn())},Xt.apply(e,arguments),dn(e)}var mn=n(7),gn=n(9),An=Math.pow(2,-52),vn=new Uint32Array(512),yn=function(){function e(t){Object(mn.a)(this,e);var n=t.length>>1;if(n>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return Object(gn.a)(e,null,[{key:"from",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mn,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ln,i=t.length,o=new Float64Array(2*i),a=0;a<i;a++){var s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new e(o)}}]),Object(gn.a)(e,[{key:"update",value:function(){for(var e=this.coords,t=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,o=e.length>>1,a=1/0,s=1/0,u=-1/0,l=-1/0,c=0;c<o;c++){var h=e[2*c],f=e[2*c+1];h<a&&(a=h),f<s&&(s=f),h>u&&(u=h),f>l&&(l=f),this._ids[c]=c}for(var d,p,m,g=(a+u)/2,A=(s+l)/2,v=1/0,y=0;y<o;y++){var b=bn(g,A,e[2*y],e[2*y+1]);b<v&&(d=y,v=b)}var _=e[2*d],w=e[2*d+1];v=1/0;for(var E=0;E<o;E++)if(E!==d){var x=bn(_,w,e[2*E],e[2*E+1]);x<v&&x>0&&(p=E,v=x)}for(var S=e[2*p],T=e[2*p+1],M=1/0,L=0;L<o;L++)if(L!==d&&L!==p){var C=xn(_,w,S,T,e[2*L],e[2*L+1]);C<M&&(m=L,M=C)}var R=e[2*m],O=e[2*m+1];if(M===1/0){for(var I=0;I<o;I++)this._dists[I]=e[2*I]-e[0]||e[2*I+1]-e[1];Sn(this._ids,this._dists,0,o-1);for(var P=new Uint32Array(o),k=0,N=0,D=-1/0;N<o;N++){var F=this._ids[N];this._dists[F]>D&&(P[k++]=F,D=this._dists[F])}return this.hull=P.subarray(0,k),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(wn(_,w,S,T,R,O)){var j=p,B=S,V=T;p=m,S=R,T=O,m=j,R=B,O=V}var G=function(e,t,n,r,i,o){var a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,h=u*u+l*l,f=.5/(a*l-s*u);return{x:e+(l*c-s*h)*f,y:t+(a*h-u*c)*f}}(_,w,S,T,R,O);this._cx=G.x,this._cy=G.y;for(var U=0;U<o;U++)this._dists[U]=bn(e[2*U],e[2*U+1],G.x,G.y);Sn(this._ids,this._dists,0,o-1),this._hullStart=d;var q=3;n[d]=t[m]=p,n[p]=t[d]=m,n[m]=t[p]=d,r[d]=0,r[p]=1,r[m]=2,i.fill(-1),i[this._hashKey(_,w)]=d,i[this._hashKey(S,T)]=p,i[this._hashKey(R,O)]=m,this.trianglesLen=0,this._addTriangle(d,p,m,-1,-1,-1);for(var W,z,H=0;H<this._ids.length;H++){var K=this._ids[H],Y=e[2*K],Q=e[2*K+1];if(!(H>0&&Math.abs(Y-W)<=An&&Math.abs(Q-z)<=An)&&(W=Y,z=Q,K!==d&&K!==p&&K!==m)){for(var X=0,J=0,Z=this._hashKey(Y,Q);J<this._hashSize&&(-1===(X=i[(Z+J)%this._hashSize])||X===n[X]);J++);for(var $=X=t[X],ee=void 0;ee=n[$],!wn(Y,Q,e[2*$],e[2*$+1],e[2*ee],e[2*ee+1]);)if(($=ee)===X){$=-1;break}if(-1!==$){var te=this._addTriangle($,K,n[$],-1,-1,r[$]);r[K]=this._legalize(te+2),r[$]=te,q++;for(var ne=n[$];ee=n[ne],wn(Y,Q,e[2*ne],e[2*ne+1],e[2*ee],e[2*ee+1]);)te=this._addTriangle(ne,K,ee,r[K],-1,r[ne]),r[K]=this._legalize(te+2),n[ne]=ne,q--,ne=ee;if($===X)for(;wn(Y,Q,e[2*(ee=t[$])],e[2*ee+1],e[2*$],e[2*$+1]);)te=this._addTriangle(ee,K,$,-1,r[$],r[ee]),this._legalize(te+2),r[ee]=te,n[$]=$,q--,$=ee;this._hullStart=t[K]=$,n[$]=t[ne]=K,n[K]=ne,i[this._hashKey(Y,Q)]=K,i[this._hashKey(e[2*$],e[2*$+1])]=$}}}this.hull=new Uint32Array(q);for(var re=0,ie=this._hullStart;re<q;re++)this.hull[re]=ie,ie=n[ie];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(e,t){return Math.floor(function(e,t){var n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(e){for(var t=this._triangles,n=this._halfedges,r=this.coords,i=0,o=0;;){var a=n[e],s=e-e%3;if(o=s+(e+2)%3,-1!==a){var u=a-a%3,l=s+(e+1)%3,c=u+(a+2)%3,h=t[o],f=t[e],d=t[l],p=t[c];if(En(r[2*h],r[2*h+1],r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){t[e]=p,t[a]=h;var m=n[c];if(-1===m){var g=this._hullStart;do{if(this._hullTri[g]===c){this._hullTri[g]=e;break}g=this._hullPrev[g]}while(g!==this._hullStart)}this._link(e,m),this._link(a,n[o]),this._link(o,c);var A=u+(a+1)%3;i<vn.length&&(vn[i++]=A)}else{if(0===i)break;e=vn[--i]}}else{if(0===i)break;e=vn[--i]}}return o}},{key:"_link",value:function(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}},{key:"_addTriangle",value:function(e,t,n,r,i,o){var a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}]),e}();function bn(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}function _n(e,t,n,r,i,o){var a=(r-t)*(i-e),s=(n-e)*(o-t);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function wn(e,t,n,r,i,o){return(_n(i,o,e,t,n,r)||_n(e,t,n,r,i,o)||_n(n,r,i,o,e,t))<0}function En(e,t,n,r,i,o,a,s){var u=e-a,l=t-s,c=n-a,h=r-s,f=i-a,d=o-s,p=c*c+h*h,m=f*f+d*d;return u*(h*m-p*d)-l*(c*m-p*f)+(u*u+l*l)*(c*d-h*f)<0}function xn(e,t,n,r,i,o){var a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,h=u*u+l*l,f=.5/(a*l-s*u),d=(l*c-s*h)*f,p=(a*h-u*c)*f;return d*d+p*p}function Sn(e,t,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var o=e[i],a=t[o],s=i-1;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{var u=n+1,l=r;Tn(e,n+r>>1,u),t[e[n]]>t[e[r]]&&Tn(e,n,r),t[e[u]]>t[e[r]]&&Tn(e,u,r),t[e[n]]>t[e[u]]&&Tn(e,n,u);for(var c=e[u],h=t[c];;){do{u++}while(t[e[u]]<h);do{l--}while(t[e[l]]>h);if(l<u)break;Tn(e,u,l)}e[n+1]=e[l],e[l]=c,r-u+1>=l-n?(Sn(e,t,u,r),Sn(e,t,n,l-1)):(Sn(e,t,n,l-1),Sn(e,t,u,r))}}function Tn(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Mn(e){return e[0]}function Ln(e){return e[1]}var Cn=n(91),Rn=n.n(Cn),On=n(59),In=n.n(On),Pn=n(58);function kn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(Pn.a)(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}var Nn=In.a.mark(Dn);function Dn(e){var t,n,r;return In.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=kn(e),i.prev=1,t.s();case 3:if((n=t.n()).done){i.next=8;break}return r=n.value,i.delegateYield(r,"t0",6);case 6:i.next=3;break;case 8:i.next=13;break;case 10:i.prev=10,i.t1=i.catch(1),t.e(i.t1);case 13:return i.prev=13,t.f(),i.finish(13);case 16:case"end":return i.stop()}}),Nn,null,[[1,10,13,16]])}function Fn(e){return Array.from(Dn(e))}var jn=function(e,t){var n,r;if(void 0===t){var i,o=kn(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;null!=a&&(void 0===n?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}}catch(h){o.e(h)}finally{o.f()}}else{var s,u=-1,l=kn(e);try{for(l.s();!(s=l.n()).done;){var c=s.value;null!=(c=t(c,++u,e))&&(void 0===n?c>=c&&(n=r=c):(n>c&&(n=c),r<c&&(r=c)))}}catch(h){l.e(h)}finally{l.f()}}return[n,r]};function Bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Gn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e){return function(e){if(Array.isArray(e))return Un(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Gn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(e,t){if(e){if("string"===typeof e)return Un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Un(e,t):void 0}}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qn=window.THREE?window.THREE:{BufferGeometry:A.e,Float32BufferAttribute:A.r,Geometry:A.t},Wn=(new qn.BufferGeometry).setAttribute?"setAttribute":"addAttribute";function zn(e,t,n,r,i,o,a){qn.Geometry.call(this),this.type="ConicPolygonGeometry",this.parameters={polygonGeoJson:e,startHeight:t,endHeight:n,closedBottom:r,closedTop:i,includeSides:o,curvatureResolution:a},this.fromBufferGeometry(new Hn(e,t,n,r,i,o,a)),this.mergeVertices()}function Hn(e,t,n,r,i,o,a){var s=this;qn.BufferGeometry.call(this),this.type="ConicPolygonBufferGeometry",this.parameters={polygonGeoJson:e,startHeight:t,endHeight:n,closedBottom:r,closedTop:i,includeSides:o,curvatureResolution:a},t=t||0,n=n||1,r=void 0===r||r,i=void 0===i||i,o=void 0===o||o;var u=function(e,t){return e.map((function(e){var n,r=[];return e.forEach((function(e){if(n){var i=180*Le(e,n)/Math.PI;if(i>t)for(var o=Ce(n,e),a=1/Math.ceil(i/t),s=a;s<1;)r.push(o(s)),s+=a}r.push(n=e)})),r}))}(e,a=a||5),l=(i||r)&&function(){var t=Fn(u),n=function(e,t){var n=Bn(jn(e[0],(function(e){return e[0]})),2),r=n[0],i=n[1],o=Bn(jn(e[0],(function(e){return e[1]})),2),a=o[0],s=o[1];if(Math.min(i-r,s-a)<t)return[];var u,l=a+(s-a)%t/2,c=[],h={type:"Polygon",coordinates:e},f=r+(i-r)%t/2;for(;f<i;){for(u=l;u<s;){var d=[f,u];Kn(d,h)&&c.push(d),u+=t}f+=t}return c}(e,a),r=[].concat(Vn(t),Vn(n)),i=[];if(n.length)!function(){for(var n=yn.from(r),o={type:"Polygon",coordinates:e},a=function(e,a){var s,u=[2,1,0].map((function(t){return n.triangles[e+t]})),l=u.map((function(e){return r[e]}));if(u.some((function(e){return e<t.length}))&&!Kn([0,1].map((function(e){return function(e,t){var n=0,r=0;if(void 0===t){var i,o=kn(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;null!=a&&(a=+a)>=a&&(++n,r+=a)}}catch(h){o.e(h)}finally{o.f()}}else{var s,u=-1,l=kn(e);try{for(l.s();!(s=l.n()).done;){var c=s.value;null!=(c=t(c,++u,e))&&(c=+c)>=c&&(++n,r+=c)}}catch(h){l.e(h)}finally{l.f()}}if(n)return r/n}(l,(function(t){return t[e]}))})),o))return"continue";(s=i).push.apply(s,Vn(u))},s=0,u=n.triangles.length;s<u;s+=3)a(s)}();else{var o=S.a.flatten(u),s=o.vertices,l=o.holes,c=void 0===l?[]:l;i=S()(s,c,2)}return{points:r,indices:i}}(),c=[],h=[],f=0,d=function(e){var t=Math.round(c.length/3),n=h.length;c=c.concat(e.vertices),h=h.concat(t?e.indices.map((function(e){return e+t})):e.indices),s.addGroup(n,h.length-n,f++)};function p(e,t){var n=e.map((function(e){return e.map((function(e){var n=Bn(e,2),r=n[0];return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(90-e)*Math.PI/180,i=(90-t)*Math.PI/180;return[n*Math.sin(r)*Math.cos(i),n*Math.cos(r),n*Math.sin(r)*Math.sin(i)]}(n[1],r,t)}))}));return S.a.flatten(n)}function m(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{indices:t?l.indices:l.indices.slice().reverse(),vertices:p([l.points],e).vertices}}o&&d(function(){for(var e=p(u,t),r=e.vertices,i=e.holes,o=p(u,n).vertices,a=Fn([o,r]),s=Math.round(o.length/3),l=new Set(i),c=0,h=[],f=0;f<s;f++){var d=f+1;if(d===s)d=c;else if(l.has(d)){var m=d;d=c,c=m}h.push(f,f+s,d+s),h.push(d+s,d,f)}return{indices:h,vertices:a}}()),r&&d(m(t,!1)),i&&d(m(n,!0)),this.setIndex(h),this[Wn]("position",new qn.Float32BufferAttribute(c,3)),this.computeFaceNormals(),this.computeVertexNormals()}function Kn(e,t){return Rn()(e,t)}zn.prototype=Object.create(qn.Geometry.prototype),zn.prototype.constructor=zn,Hn.prototype=Object.create(qn.BufferGeometry.prototype),Hn.prototype.constructor=Hn;var Yn=function(e){var t,n="undefined"!==typeof(e=e||{})?e:{},r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);var i,o=[],a="";document.currentScript&&(a=document.currentScript.src),a=0!==a.indexOf("blob:")?a.substr(0,a.lastIndexOf("/")+1):"",i=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)t(r.response);else{var i=Q(e);i?t(i.buffer):n()}},r.onerror=n,r.send(null)};var s=n.print||console.log.bind(console),u=n.printErr||console.warn.bind(console);for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);r=null,n.arguments&&(o=n.arguments);var l=0,c=function(){return l};var h=!1;function f(e){var t=n["_"+e];return function(e,t){e||ue("Assertion failed: "+t)}(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function d(e,t,n,r,i){var o={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343){var u=e.charCodeAt(++a);s=65536+((1023&s)<<10)|1023&u}if(s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,v,t,n)})(e,t=ee(n),n)}return t},array:function(e){var t=ee(e.length);return function(e,t){A.set(e,t)}(e,t),t}};var a=f(e),s=[],u=0;if(r)for(var l=0;l<r.length;l++){var c=o[n[l]];c?(0===u&&(u=ne()),s[l]=c(r[l])):s[l]=r[l]}var h=a.apply(null,s);return h=function(e){return"string"===t?m(e):"boolean"===t?Boolean(e):e}(h),0!==u&&te(u),h}var p="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function m(e,t){return e?function(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&p)return p.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var l=a-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}(v,e,t):""}var g,A,v,y,b,_,w;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function E(e,t){return e%t>0&&(e+=t-e%t),e}function x(e){g=e,n.HEAP8=A=new Int8Array(e),n.HEAP16=y=new Int16Array(e),n.HEAP32=b=new Int32Array(e),n.HEAPU8=v=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=_=new Float32Array(e),n.HEAPF64=w=new Float64Array(e)}var S=n.TOTAL_MEMORY||33554432;function T(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"===typeof r?void 0===t.arg?n.dynCall_v(r):n.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}S=(g=n.buffer?n.buffer:new ArrayBuffer(S)).byteLength,x(g),b[5916]=5266576;var M=[],L=[],C=[],R=[];var O=Math.abs,I=Math.ceil,P=Math.floor,k=Math.min,N=0,D=null,F=null;n.preloadedImages={},n.preloadedAudios={};var j,B,V=null,G="data:application/octet-stream;base64,";function U(e){return String.prototype.startsWith?e.startsWith(G):0===e.indexOf(G)}V="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAABhbGdvcy5jAF9wb2x5ZmlsbEludGVybmFsAGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvR2VvQm91bmRhcnkAYWRqYWNlbnRGYWNlRGlyW2NlbnRlcklKSy5mYWNlXVtmYWNlMl0gPT0gS0kAX2ZhY2VJamtUb0dlb0JvdW5kYXJ5AHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAaDNUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBwZW50YWdvblJvdGF0aW9ucyA+PSAwAGRpcmVjdGlvblJvdGF0aW9ucyA+PSAwAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9IMwAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMAB3aXRoaW5QZW50YWdvblJvdGF0aW9ucyA+PSAwAGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";function q(e){return e}function W(e){return e.replace(/\b__Z[\w\d_]+/g,(function(e){return e===e?e:e+" ["+e+"]"}))}function z(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function H(){return A.length}function K(e){try{var t=new ArrayBuffer(e);if(t.byteLength!=e)return;return new Int8Array(t).set(A),$(t),x(t),1}catch(n){}}var Y="function"===typeof atob?atob:function(e){var t,n,r,i,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=s.indexOf(e.charAt(l++))<<2|(i=s.indexOf(e.charAt(l++)))>>4,n=(15&i)<<4|(o=s.indexOf(e.charAt(l++)))>>2,r=(3&o)<<6|(a=s.indexOf(e.charAt(l++))),u+=String.fromCharCode(t),64!==o&&(u+=String.fromCharCode(n)),64!==a&&(u+=String.fromCharCode(r))}while(l<e.length);return u};function Q(e){if(U(e))return function(e){try{for(var t=Y(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(i){throw new Error("Converting base64 string to bytes failed.")}}(e.slice(G.length))}var X,J,Z=function(e,t,n){var r=new e.Int8Array(n),i=new e.Int32Array(n),o=(new e.Uint8Array(n),new e.Float32Array(n),new e.Float64Array(n)),a=0|t.p,s=e.Math.floor,u=e.Math.abs,l=e.Math.sqrt,c=e.Math.pow,h=e.Math.cos,f=e.Math.sin,d=e.Math.tan,p=e.Math.acos,m=e.Math.asin,g=e.Math.atan,A=e.Math.atan2,v=e.Math.ceil,y=e.Math.imul,b=e.Math.min,_=e.Math.clz32,w=t.b,E=t.c,x=t.d,S=t.e,T=t.f,M=t.g,L=t.h,C=t.i,R=23696;function O(e,t,n,r){var i,o;0|I(e|=0,t|=0,n|=0,r|=0,0)&&(Tt(0|r,0,(o=1+(0|y(3*n|0,n+1|0))|0)<<3|0),(i=0|gt(o,4))&&(P(e,t,n,r,i,o,0),mt(i)))}function I(e,t,n,r,o){e|=0,t|=0,n|=0,o|=0;var a,s=0,u=0,l=0,c=0,h=0,f=0,d=0,p=0;if(a=R,R=R+16|0,p=a,i[(s=r|=0)>>2]=e,i[s+4>>2]=t,(s=0!=(0|o))&&(i[o>>2]=0),0|Ie(e,t))return R=a,0|(p=1);i[p>>2]=0;e:do{if((0|n)>=1)if(s)for(h=0,f=1,d=1,u=0,s=e;;){if(!(u|h)){if(0==(0|(s=0|k(s,t,4,p)))&0==(0|(t=0|E()))){s=2;break e}if(0|Ie(s,t)){s=1;break e}}if(0==(0|(s=0|k(s,t,0|i[16+(h<<2)>>2],p)))&0==(0|(t=0|E()))){s=2;break e}if(i[(e=r+(d<<3)|0)>>2]=s,i[e+4>>2]=t,i[o+(d<<2)>>2]=f,e=(0|(u=u+1|0))==(0|f),c=6==(0|(l=h+1|0)),0|Ie(s,t)){s=1;break e}if((0|(f=f+(c&e&1)|0))>(0|n)){s=0;break}h=e?c?0:l:h,d=d+1|0,u=e?0:u}else for(h=0,f=1,d=1,u=0,s=e;;){if(!(u|h)){if(0==(0|(s=0|k(s,t,4,p)))&0==(0|(t=0|E()))){s=2;break e}if(0|Ie(s,t)){s=1;break e}}if(0==(0|(s=0|k(s,t,0|i[16+(h<<2)>>2],p)))&0==(0|(t=0|E()))){s=2;break e}if(i[(e=r+(d<<3)|0)>>2]=s,i[e+4>>2]=t,e=(0|(u=u+1|0))==(0|f),c=6==(0|(l=h+1|0)),0|Ie(s,t)){s=1;break e}if((0|(f=f+(c&e&1)|0))>(0|n)){s=0;break}h=e?c?0:l:h,d=d+1|0,u=e?0:u}else s=0}while(0);return R=a,0|(p=s)}function P(e,t,n,r,o,a,s){n|=0,r|=0,o|=0,a|=0,s|=0;var u,l,c=0,h=0,f=0,d=0,p=0;if(l=R,R=R+16|0,u=l,0==(0|(e|=0))&0==(0|(t|=0)))R=l;else{if(c=0|bt(0|e,0|t,0|a,((0|a)<0)<<31>>31|0),E(),!(0==(0|(p=0|i[(d=h=r+(c<<3)|0)>>2]))&0==(0|(d=0|i[d+4>>2]))|(f=(0|p)==(0|e)&(0|d)==(0|t))))do{f=(0|(d=0|i[(p=h=r+((c=(c+1|0)%(0|a)|0)<<3)|0)>>2]))==(0|e)&(0|(p=0|i[p+4>>2]))==(0|t)}while(!(0==(0|d)&0==(0|p)|f));c=o+(c<<2)|0,f&&(0|i[c>>2])<=(0|s)||(i[(p=h)>>2]=e,i[p+4>>2]=t,i[c>>2]=s,(0|s)>=(0|n)||(p=s+1|0,i[u>>2]=0,P(d=0|k(e,t,2,u),0|E(),n,r,o,a,p),i[u>>2]=0,P(d=0|k(e,t,3,u),0|E(),n,r,o,a,p),i[u>>2]=0,P(d=0|k(e,t,1,u),0|E(),n,r,o,a,p),i[u>>2]=0,P(d=0|k(e,t,5,u),0|E(),n,r,o,a,p),i[u>>2]=0,P(d=0|k(e,t,4,u),0|E(),n,r,o,a,p),i[u>>2]=0,P(d=0|k(e,t,6,u),0|E(),n,r,o,a,p))),R=l}}function k(e,t,n,r){e|=0,t|=0,n|=0;var o,a,s=0,u=0,l=0,c=0,h=0,f=0,d=0;if((0|i[(r|=0)>>2])>0){s=0;do{n=0|ue(n),s=s+1|0}while((0|s)<(0|i[r>>2]))}o=0|_t(0|e,0|t,45),E(),a=127&o,u=0|Pe(e,t),s=0|_t(0|e,0|t,52),E(),s&=15;e:do{if(s)for(;;){if(f=0|_t(0|e,0|t,0|(h=3*(15-s|0)|0)),E(),f&=7,d=0==(0|je(s)),s=s+-1|0,c=0|wt(7,0,0|h),t&=~(0|E()),e=(h=0|wt(0|i[(d?464:48)+(28*f|0)+(n<<2)>>2],0,0|h))|e&~c,t|=0|E(),!(n=0|i[(d?672:256)+(28*f|0)+(n<<2)>>2])){n=0;break e}if(!s){l=6;break}}else l=6}while(0);6==(0|l)&&(e|=f=0|wt(0|(d=0|i[880+(28*a|0)+(n<<2)>>2]),0,45),t=0|E()|-1040385&t,n=0|i[4304+(28*a|0)+(n<<2)>>2],127==(127&d|0)&&(d=0|wt(0|i[880+(28*a|0)+20>>2],0,45),t=0|E()|-1040385&t,n=0|i[4304+(28*a|0)+20>>2],e=0|Ne(d|e,t),t=0|E(),i[r>>2]=1+(0|i[r>>2]))),l=0|_t(0|e,0|t,45),E(),l&=127;e:do{if(0|D(l)){t:do{if(1==(0|Pe(e,t))){if((0|a)!=(0|l)){if(0|V(l,0|i[7728+(28*a|0)>>2])){e=0|Fe(e,t),u=1,t=0|E();break}e=0|Ne(e,t),u=1,t=0|E();break}switch(0|u){case 5:e=0|Fe(e,t),t=0|E(),i[r>>2]=5+(0|i[r>>2]),u=0;break t;case 3:e=0|Ne(e,t),t=0|E(),i[r>>2]=1+(0|i[r>>2]),u=0;break t;default:return d=0,w(0|(f=0)),0|d}}else u=0}while(0);if((0|n)>0){s=0;do{e=0|ke(e,t),t=0|E(),s=s+1|0}while((0|s)!=(0|n))}if((0|a)!=(0|l)){if(!(0|F(l))){if(0!=(0|u)|5!=(0|Pe(e,t)))break;i[r>>2]=1+(0|i[r>>2]);break}switch(127&o){case 8:case 118:break e}3!=(0|Pe(e,t))&&(i[r>>2]=1+(0|i[r>>2]))}}else if((0|n)>0){s=0;do{e=0|Ne(e,t),t=0|E(),s=s+1|0}while((0|s)!=(0|n))}}while(0);return i[r>>2]=((0|i[r>>2])+n|0)%6|0,d=e,w(0|(f=t)),0|d}function N(e,t,n,r,a,s){t|=0,n|=0,r|=0,a|=0,s|=0;var u,l,c,h,f,d,p,m,g,A=0,v=0,y=0,b=0,_=0,w=0,x=0,S=0,T=0,M=0,L=0,C=0,O=0,I=0;if(g=R,R=R+48|0,d=g+32|0,p=g+16|0,m=g,(0|(A=0|i[(e|=0)>>2]))<=0)return R=g,0|(C=0);u=e+4|0,l=d+8|0,c=p+8|0,h=m+8|0,f=((0|t)<0)<<31>>31,L=0;e:for(;;){T=(v=0|i[u>>2])+(L<<4)|0,i[d>>2]=i[T>>2],i[d+4>>2]=i[T+4>>2],i[d+8>>2]=i[T+8>>2],i[d+12>>2]=i[T+12>>2],(0|L)==(A+-1|0)?(i[p>>2]=i[v>>2],i[p+4>>2]=i[v+4>>2],i[p+8>>2]=i[v+8>>2],i[p+12>>2]=i[v+12>>2]):(T=v+(L+1<<4)|0,i[p>>2]=i[T>>2],i[p+4>>2]=i[T+4>>2],i[p+8>>2]=i[T+8>>2],i[p+12>>2]=i[T+12>>2]),T=0|H(d,p,n);t:do{if((0|T)>0){M=+(0|T),S=0;n:for(;;){I=+(T-S|0),O=+(0|S),o[m>>3]=+o[d>>3]*I/M+ +o[p>>3]*O/M,o[h>>3]=+o[l>>3]*I/M+ +o[c>>3]*O/M,v=0|bt(0|(w=0|Be(m,n)),0|(x=0|E()),0|t,0|f),E(),b=0|i[(y=A=s+(v<<3)|0)>>2],y=0|i[y+4>>2];r:do{if(0==(0|b)&0==(0|y))C=14;else for(_=0;;){if((0|_)>(0|t)){A=1;break r}if((0|b)==(0|w)&(0|y)==(0|x)){A=7;break r}if(0==(0|(b=0|i[(y=A=s+((v=(v+1|0)%(0|t)|0)<<3)|0)>>2]))&0==(0|(y=0|i[y+4>>2]))){C=14;break}_=_+1|0}}while(0);switch(14==(0|C)&&(C=0,0==(0|w)&0==(0|x)?A=7:(i[A>>2]=w,i[A+4>>2]=x,A=0|i[r>>2],i[(_=a+(A<<3)|0)>>2]=w,i[_+4>>2]=x,i[r>>2]=A+1,A=0)),7&A){case 7:case 0:break;default:break n}if((0|T)<=(0|(S=S+1|0))){C=8;break t}}if(0|A){A=-1,C=20;break e}}else C=8}while(0);if(8==(0|C)&&(C=0),(0|(L=L+1|0))>=(0|(A=0|i[e>>2]))){A=0,C=20;break}}return 20==(0|C)?(R=g,0|A):0}function D(e){return 0|i[7728+(28*(e|=0)|0)+16>>2]}function F(e){return 4==(0|(e|=0))|117==(0|e)|0}function j(e){return 0|i[11152+(216*(0|i[(e|=0)>>2])|0)+(72*(0|i[e+4>>2])|0)+(24*(0|i[e+8>>2])|0)+(i[e+12>>2]<<3)>>2]}function B(e){return 0|i[11152+(216*(0|i[(e|=0)>>2])|0)+(72*(0|i[e+4>>2])|0)+(24*(0|i[e+8>>2])|0)+(i[e+12>>2]<<3)+4>>2]}function V(e,t){return t|=0,(0|i[7728+(28*(e|=0)|0)+20>>2])==(0|t)?0|(t=1):0|(t=(0|i[7728+(28*e|0)+24>>2])==(0|t))}function G(e,t){return 0|i[880+(28*(e|=0)|0)+((t|=0)<<2)>>2]}function U(e,t){return t|=0,(0|i[880+(28*(e|=0)|0)>>2])==(0|t)?0|(t=0):(0|i[880+(28*e|0)+4>>2])==(0|t)?0|(t=1):(0|i[880+(28*e|0)+8>>2])==(0|t)?0|(t=2):(0|i[880+(28*e|0)+12>>2])==(0|t)?0|(t=3):(0|i[880+(28*e|0)+16>>2])==(0|t)?0|(t=4):(0|i[880+(28*e|0)+20>>2])==(0|t)?0|(t=5):0|((0|i[880+(28*e|0)+24>>2])==(0|t)?6:7)}function q(e){return+o[(e|=0)+16>>3]<+o[e+24>>3]|0}function W(e,t){e|=0;var n,r,i=0;return(i=+o[(t|=0)>>3])>=+o[e+8>>3]&&i<=+o[e>>3]?(n=+o[e+16>>3],i=+o[e+24>>3],t=(r=+o[t+8>>3])>=i,e=r<=n&1,n<i?t&&(e=1):t||(e=0),0|(t=0!=(0|e))):0|(t=0)}function z(e,t){e|=0,t|=0;var n,r,a,s,l,c,h=0,f=0;s=R,R=R+288|0,n=s+264|0,r=s+96|0,f=(h=a=s)+96|0;do{i[h>>2]=0,h=h+4|0}while((0|h)<(0|f));return We(t,a),Ue(f=0|i[(h=a)>>2],h=0|i[h+4>>2],n),qe(f,h,r),l=+Le(n,r+8|0),o[n>>3]=+o[e>>3],o[(h=n+8|0)>>3]=+o[e+16>>3],o[r>>3]=+o[e+8>>3],o[(f=r+8|0)>>3]=+o[e+24>>3],c=+Le(n,r),f=~~+v(+c*c/+Et(+ +u(+(+o[h>>3]-+o[f>>3])/(+o[n>>3]-+o[r>>3])),3)/(l*(2.59807621135*l)*.8)),R=s,0|(0==(0|f)?1:f)}function H(e,t,n){e|=0,t|=0,n|=0;var r,o,a,s,u,l=0,c=0;s=R,R=R+288|0,r=s+264|0,o=s+96|0,c=(l=a=s)+96|0;do{i[l>>2]=0,l=l+4|0}while((0|l)<(0|c));return We(n,a),Ue(l=0|i[(c=a)>>2],c=0|i[c+4>>2],r),qe(l,c,o),u=+Le(r,o+8|0),c=~~+v(+ +Le(e,t)/(2*u)),R=s,0|(0==(0|c)?1:c)}function K(e,t,n,r){t|=0,n|=0,r|=0,i[(e|=0)>>2]=t,i[e+4>>2]=n,i[e+8>>2]=r}function Y(e,t){e|=0;var n,r,a,s,l=0,c=0,h=0,f=0,d=0,p=0,m=0;i[(s=(t|=0)+8|0)>>2]=0,r=+o[e>>3],f=+u(+r),a=+o[e+8>>3],f+=.5*(d=+u(+a)/.8660254037844386),f-=+(0|(l=~~f)),d-=+(0|(e=~~d));do{if(f<.5){if(f<.3333333333333333){if(i[t>>2]=l,d<.5*(f+1)){i[t+4>>2]=e;break}e=e+1|0,i[t+4>>2]=e;break}if(e=(1&!(d<(m=1-f)))+e|0,i[t+4>>2]=e,m<=d&d<2*f){l=l+1|0,i[t>>2]=l;break}i[t>>2]=l;break}if(!(f<.6666666666666666)){if(l=l+1|0,i[t>>2]=l,d<.5*f){i[t+4>>2]=e;break}e=e+1|0,i[t+4>>2]=e;break}if(d<1-f){if(i[t+4>>2]=e,2*f-1<d){i[t>>2]=l;break}}else e=e+1|0,i[t+4>>2]=e;l=l+1|0,i[t>>2]=l}while(0);do{if(r<0){if(1&e){l=~~(+(0|l)-(2*(+((p=0|At(0|l,((0|l)<0)<<31>>31|0,0|(p=(e+1|0)/2|0),((0|p)<0)<<31>>31|0))>>>0)+4294967296*+(0|E()))+1)),i[t>>2]=l;break}l=~~(+(0|l)-2*(+((p=0|At(0|l,((0|l)<0)<<31>>31|0,0|(p=(0|e)/2|0),((0|p)<0)<<31>>31|0))>>>0)+4294967296*+(0|E()))),i[t>>2]=l;break}}while(0);p=t+4|0,a<0&&(l=l-((1|e<<1)/2|0)|0,i[t>>2]=l,e=0-e|0,i[p>>2]=e),c=e-l|0,(0|l)<0?(h=0-l|0,i[p>>2]=c,i[s>>2]=h,i[t>>2]=0,e=c,l=0):h=0,(0|e)<0&&(l=l-e|0,i[t>>2]=l,h=h-e|0,i[s>>2]=h,i[p>>2]=0,e=0),n=l-h|0,c=e-h|0,(0|h)<0&&(i[t>>2]=n,i[p>>2]=c,i[s>>2]=0,e=c,l=n,h=0),(0|(c=(0|h)<(0|(c=(0|e)<(0|l)?e:l))?h:c))<=0||(i[t>>2]=l-c,i[p>>2]=e-c,i[s>>2]=h-c)}function Q(e){var t,n=0,r=0,o=0,a=0,s=0;n=0|i[(e|=0)>>2],r=0|i[(t=e+4|0)>>2],(0|n)<0&&(r=r-n|0,i[t>>2]=r,i[(s=e+8|0)>>2]=(0|i[s>>2])-n,i[e>>2]=0,n=0),(0|r)<0?(n=n-r|0,i[e>>2]=n,a=(0|i[(s=e+8|0)>>2])-r|0,i[s>>2]=a,i[t>>2]=0,r=0):(s=a=e+8|0,a=0|i[a>>2]),(0|a)<0&&(n=n-a|0,i[e>>2]=n,r=r-a|0,i[t>>2]=r,i[s>>2]=0,a=0),(0|(o=(0|a)<(0|(o=(0|r)<(0|n)?r:n))?a:o))<=0||(i[e>>2]=n-o,i[t>>2]=r-o,i[s>>2]=a-o)}function X(e,t){t|=0;var n,r;r=0|i[(e|=0)+8>>2],n=+((0|i[e+4>>2])-r|0),o[t>>3]=+((0|i[e>>2])-r|0)-.5*n,o[t+8>>3]=.8660254037844386*n}function J(e,t,n){e|=0,t|=0,i[(n|=0)>>2]=(0|i[t>>2])+(0|i[e>>2]),i[n+4>>2]=(0|i[t+4>>2])+(0|i[e+4>>2]),i[n+8>>2]=(0|i[t+8>>2])+(0|i[e+8>>2])}function Z(e,t,n){e|=0,t|=0,i[(n|=0)>>2]=(0|i[e>>2])-(0|i[t>>2]),i[n+4>>2]=(0|i[e+4>>2])-(0|i[t+4>>2]),i[n+8>>2]=(0|i[e+8>>2])-(0|i[t+8>>2])}function $(e,t){t|=0;var n,r=0;r=0|y(0|i[(e|=0)>>2],t),i[e>>2]=r,n=0|y(0|i[(r=e+4|0)>>2],t),i[r>>2]=n,t=0|y(0|i[(e=e+8|0)>>2],t),i[e>>2]=t}function ee(e){var t,n,r=0,o=0,a=0,s=0,u=0;u=(0|(n=0|i[(e|=0)>>2]))<0,e=(e=(o=(0|(s=((t=(0|(a=(0|i[e+4>>2])-(u?n:0)|0))<0)?0-a|0:0)+((0|i[e+8>>2])-(u?n:0))|0))<0)?0:s)-((a=(0|(o=(0|e)<(0|(o=(0|(r=(t?0:a)-(o?s:0)|0))<(0|(s=(u?0:n)-(t?a:0)-(o?s:0)|0))?r:s))?e:o))>0)?o:0)|0,r=r-(a?o:0)|0;e:do{switch(s-(a?o:0)|0){case 0:switch(0|r){case 0:return 0|(u=0==(0|e)?0:1==(0|e)?1:7);case 1:return 0|(u=0==(0|e)?2:1==(0|e)?3:7);default:break e}case 1:switch(0|r){case 0:return 0|(u=0==(0|e)?4:1==(0|e)?5:7);case 1:if(e)break e;return 0|(e=6);default:break e}}}while(0);return 0|(u=7)}function te(e){var t,n,r=0,o=0,a=0,s=0,u=0;o=0|i[(t=(e|=0)+8|0)>>2],a=0|dt(+((3*(r=(0|i[e>>2])-o|0)|0)-(o=(0|i[(n=e+4|0)>>2])-o|0)|0)/7),i[e>>2]=a,r=0|dt(+((o<<1)+r|0)/7),i[n>>2]=r,i[t>>2]=0,o=r-a|0,(0|a)<0?(u=0-a|0,i[n>>2]=o,i[t>>2]=u,i[e>>2]=0,r=o,a=0,o=u):o=0,(0|r)<0&&(a=a-r|0,i[e>>2]=a,o=o-r|0,i[t>>2]=o,i[n>>2]=0,r=0),u=a-o|0,s=r-o|0,(0|o)<0?(i[e>>2]=u,i[n>>2]=s,i[t>>2]=0,r=s,s=u,o=0):s=a,(0|(a=(0|o)<(0|(a=(0|r)<(0|s)?r:s))?o:a))<=0||(i[e>>2]=s-a,i[n>>2]=r-a,i[t>>2]=o-a)}function ne(e){var t,n,r=0,o=0,a=0,s=0,u=0;o=0|i[(t=(e|=0)+8|0)>>2],a=0|dt(+(((r=(0|i[e>>2])-o|0)<<1)+(o=(0|i[(n=e+4|0)>>2])-o|0)|0)/7),i[e>>2]=a,r=0|dt(+((3*o|0)-r|0)/7),i[n>>2]=r,i[t>>2]=0,o=r-a|0,(0|a)<0?(u=0-a|0,i[n>>2]=o,i[t>>2]=u,i[e>>2]=0,r=o,a=0,o=u):o=0,(0|r)<0&&(a=a-r|0,i[e>>2]=a,o=o-r|0,i[t>>2]=o,i[n>>2]=0,r=0),u=a-o|0,s=r-o|0,(0|o)<0?(i[e>>2]=u,i[n>>2]=s,i[t>>2]=0,r=s,s=u,o=0):s=a,(0|(a=(0|o)<(0|(a=(0|r)<(0|s)?r:s))?o:a))<=0||(i[e>>2]=s-a,i[n>>2]=r-a,i[t>>2]=o-a)}function re(e){var t,n,r,o=0,a=0,s=0,u=0;o=0|i[(e|=0)>>2],a=0|i[(n=e+4|0)>>2],s=0|i[(r=e+8|0)>>2],u=a+(3*o|0)|0,i[e>>2]=u,a=s+(3*a|0)|0,i[n>>2]=a,o=(3*s|0)+o|0,i[r>>2]=o,s=a-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=s,i[r>>2]=o,i[e>>2]=0,a=s,s=0):s=u,(0|a)<0&&(s=s-a|0,i[e>>2]=s,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),t=s-o|0,u=a-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=u,i[r>>2]=0,s=t,o=0):u=a,(0|(a=(0|o)<(0|(a=(0|u)<(0|s)?u:s))?o:a))<=0||(i[e>>2]=s-a,i[n>>2]=u-a,i[r>>2]=o-a)}function ie(e){var t,n,r,o=0,a=0,s=0,u=0;u=0|i[(e|=0)>>2],s=(3*(o=0|i[(n=e+4|0)>>2])|0)+u|0,u=(a=0|i[(r=e+8|0)>>2])+(3*u|0)|0,i[e>>2]=u,i[n>>2]=s,o=(3*a|0)+o|0,i[r>>2]=o,a=s-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=a,i[r>>2]=o,i[e>>2]=0,u=0):a=s,(0|a)<0&&(u=u-a|0,i[e>>2]=u,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),t=u-o|0,s=a-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=s,i[r>>2]=0,u=t,o=0):s=a,(0|(a=(0|o)<(0|(a=(0|s)<(0|u)?s:u))?o:a))<=0||(i[e>>2]=u-a,i[n>>2]=s-a,i[r>>2]=o-a)}function oe(e,t){e|=0;var n,r,o,a=0,s=0,u=0;((t|=0)+-1|0)>>>0>=6||(u=(0|i[15472+(12*t|0)>>2])+(0|i[e>>2])|0,i[e>>2]=u,o=e+4|0,s=(0|i[15472+(12*t|0)+4>>2])+(0|i[o>>2])|0,i[o>>2]=s,r=e+8|0,t=(0|i[15472+(12*t|0)+8>>2])+(0|i[r>>2])|0,i[r>>2]=t,a=s-u|0,(0|u)<0?(t=t-u|0,i[o>>2]=a,i[r>>2]=t,i[e>>2]=0,s=0):(a=s,s=u),(0|a)<0&&(s=s-a|0,i[e>>2]=s,t=t-a|0,i[r>>2]=t,i[o>>2]=0,a=0),n=s-t|0,u=a-t|0,(0|t)<0?(i[e>>2]=n,i[o>>2]=u,i[r>>2]=0,s=n,t=0):u=a,(0|(a=(0|t)<(0|(a=(0|u)<(0|s)?u:s))?t:a))<=0||(i[e>>2]=s-a,i[o>>2]=u-a,i[r>>2]=t-a))}function ae(e){var t,n,r,o=0,a=0,s=0,u=0;u=0|i[(e|=0)>>2],s=(o=0|i[(n=e+4|0)>>2])+u|0,u=(a=0|i[(r=e+8|0)>>2])+u|0,i[e>>2]=u,i[n>>2]=s,o=a+o|0,i[r>>2]=o,a=s-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=a,i[r>>2]=o,i[e>>2]=0,s=0):(a=s,s=u),(0|a)<0&&(s=s-a|0,i[e>>2]=s,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),t=s-o|0,u=a-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=u,i[r>>2]=0,s=t,o=0):u=a,(0|(a=(0|o)<(0|(a=(0|u)<(0|s)?u:s))?o:a))<=0||(i[e>>2]=s-a,i[n>>2]=u-a,i[r>>2]=o-a)}function se(e){var t,n,r,o=0,a=0,s=0,u=0;o=0|i[(e|=0)>>2],s=0|i[(n=e+4|0)>>2],a=0|i[(r=e+8|0)>>2],u=s+o|0,i[e>>2]=u,s=a+s|0,i[n>>2]=s,o=a+o|0,i[r>>2]=o,a=s-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=a,i[r>>2]=o,i[e>>2]=0,s=0):(a=s,s=u),(0|a)<0&&(s=s-a|0,i[e>>2]=s,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),t=s-o|0,u=a-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=u,i[r>>2]=0,s=t,o=0):u=a,(0|(a=(0|o)<(0|(a=(0|u)<(0|s)?u:s))?o:a))<=0||(i[e>>2]=s-a,i[n>>2]=u-a,i[r>>2]=o-a)}function ue(e){switch(0|(e|=0)){case 1:e=5;break;case 5:e=4;break;case 4:e=6;break;case 6:e=2;break;case 2:e=3;break;case 3:e=1}return 0|e}function le(e){switch(0|(e|=0)){case 1:e=3;break;case 3:e=2;break;case 2:e=6;break;case 6:e=4;break;case 4:e=5;break;case 5:e=1}return 0|e}function ce(e){var t,n,r,o=0,a=0,s=0,u=0;o=0|i[(e|=0)>>2],a=0|i[(n=e+4|0)>>2],s=0|i[(r=e+8|0)>>2],u=a+(o<<1)|0,i[e>>2]=u,a=s+(a<<1)|0,i[n>>2]=a,o=(s<<1)+o|0,i[r>>2]=o,s=a-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=s,i[r>>2]=o,i[e>>2]=0,a=s,s=0):s=u,(0|a)<0&&(s=s-a|0,i[e>>2]=s,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),t=s-o|0,u=a-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=u,i[r>>2]=0,s=t,o=0):u=a,(0|(a=(0|o)<(0|(a=(0|u)<(0|s)?u:s))?o:a))<=0||(i[e>>2]=s-a,i[n>>2]=u-a,i[r>>2]=o-a)}function he(e){var t,n,r,o=0,a=0,s=0,u=0;u=0|i[(e|=0)>>2],s=((o=0|i[(n=e+4|0)>>2])<<1)+u|0,u=(a=0|i[(r=e+8|0)>>2])+(u<<1)|0,i[e>>2]=u,i[n>>2]=s,o=(a<<1)+o|0,i[r>>2]=o,a=s-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=a,i[r>>2]=o,i[e>>2]=0,u=0):a=s,(0|a)<0&&(u=u-a|0,i[e>>2]=u,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),t=u-o|0,s=a-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=s,i[r>>2]=0,u=t,o=0):s=a,(0|(a=(0|o)<(0|(a=(0|s)<(0|u)?s:u))?o:a))<=0||(i[e>>2]=u-a,i[n>>2]=s-a,i[r>>2]=o-a)}function fe(e,t){t|=0;var n,r,o,a=0,s=0,u=0;return o=(0|(r=(0|i[(e|=0)>>2])-(0|i[t>>2])|0))<0,n=(0|(s=(0|i[e+4>>2])-(0|i[t+4>>2])-(o?r:0)|0))<0,t=(t=(e=(0|(u=(o?0-r|0:0)+(0|i[e+8>>2])-(0|i[t+8>>2])+(n?0-s|0:0)|0))<0)?0:u)-((s=(0|(e=(0|t)<(0|(e=(0|(a=(n?0:s)-(e?u:0)|0))<(0|(u=(o?0:r)-(n?s:0)-(e?u:0)|0))?a:u))?t:e))>0)?e:0)|0,a=a-(s?e:0)|0,0|((0|(e=(0|(e=u-(s?e:0)|0))>-1?e:0-e|0))>(0|(t=(0|(a=(0|a)>-1?a:0-a|0))>(0|(t=(0|t)>-1?t:0-t|0))?a:t))?e:t)}function de(e,t){t|=0;var n;n=0|i[(e|=0)+8>>2],i[t>>2]=(0|i[e>>2])-n,i[t+4>>2]=(0|i[e+4>>2])-n}function pe(e,t){t|=0;var n,r,o,a=0,s=0,u=0;s=0|i[(e|=0)>>2],i[t>>2]=s,e=0|i[e+4>>2],i[(r=t+4|0)>>2]=e,i[(o=t+8|0)>>2]=0,a=e-s|0,(0|s)<0?(e=0-s|0,i[r>>2]=a,i[o>>2]=e,i[t>>2]=0,s=0):(a=e,e=0),(0|a)<0&&(s=s-a|0,i[t>>2]=s,e=e-a|0,i[o>>2]=e,i[r>>2]=0,a=0),n=s-e|0,u=a-e|0,(0|e)<0?(i[t>>2]=n,i[r>>2]=u,i[o>>2]=0,a=u,u=n,e=0):u=s,(0|(s=(0|e)<(0|(s=(0|a)<(0|u)?a:u))?e:s))<=0||(i[t>>2]=u-s,i[r>>2]=a-s,i[o>>2]=e-s)}function me(e){var t,n,r,o;n=(o=0|i[(t=(e|=0)+8|0)>>2])-(0|i[e>>2])|0,i[e>>2]=n,e=(0|i[(r=e+4|0)>>2])-o|0,i[r>>2]=e,i[t>>2]=0-(e+n)}function ge(e){var t,n,r=0,o=0,a=0,s=0,u=0;r=0-(o=0|i[(e|=0)>>2])|0,i[e>>2]=r,i[(t=e+8|0)>>2]=0,s=(a=0|i[(n=e+4|0)>>2])+o|0,(0|o)>0?(i[n>>2]=s,i[t>>2]=o,i[e>>2]=0,r=0,a=s):o=0,(0|a)<0?(u=r-a|0,i[e>>2]=u,o=o-a|0,i[t>>2]=o,i[n>>2]=0,s=u-o|0,r=0-o|0,(0|o)<0?(i[e>>2]=s,i[n>>2]=r,i[t>>2]=0,a=r,o=0):(a=0,s=u)):s=r,(0|(r=(0|o)<(0|(r=(0|a)<(0|s)?a:s))?o:r))<=0||(i[e>>2]=s-r,i[n>>2]=a-r,i[t>>2]=o-r)}function Ae(e,t,n,r){t|=0,n|=0,r|=0;var a,s=0,u=0,l=0,c=0;if(a=R,R=R+32|0,function(e,t){t|=0;var n,r,i=0;i=+o[(e=e|0)>>3],n=+h(+i),i=+f(+i),o[t+16>>3]=i,i=+o[e+8>>3],r=n*+h(+i),o[t>>3]=r,i=n*+f(+i),o[t+8>>3]=i}(e|=0,u=a),i[n>>2]=0,s=+ot(15888,u),(l=+ot(15912,u))<s&&(i[n>>2]=1,s=l),(l=+ot(15936,u))<s&&(i[n>>2]=2,s=l),(l=+ot(15960,u))<s&&(i[n>>2]=3,s=l),(l=+ot(15984,u))<s&&(i[n>>2]=4,s=l),(l=+ot(16008,u))<s&&(i[n>>2]=5,s=l),(l=+ot(16032,u))<s&&(i[n>>2]=6,s=l),(l=+ot(16056,u))<s&&(i[n>>2]=7,s=l),(l=+ot(16080,u))<s&&(i[n>>2]=8,s=l),(l=+ot(16104,u))<s&&(i[n>>2]=9,s=l),(l=+ot(16128,u))<s&&(i[n>>2]=10,s=l),(l=+ot(16152,u))<s&&(i[n>>2]=11,s=l),(l=+ot(16176,u))<s&&(i[n>>2]=12,s=l),(l=+ot(16200,u))<s&&(i[n>>2]=13,s=l),(l=+ot(16224,u))<s&&(i[n>>2]=14,s=l),(l=+ot(16248,u))<s&&(i[n>>2]=15,s=l),(l=+ot(16272,u))<s&&(i[n>>2]=16,s=l),(l=+ot(16296,u))<s&&(i[n>>2]=17,s=l),(l=+ot(16320,u))<s&&(i[n>>2]=18,s=l),(l=+ot(16344,u))<s&&(i[n>>2]=19,s=l),(l=+p(+(1-.5*s)))<1e-16)return i[r>>2]=0,i[r+4>>2]=0,i[r+8>>2]=0,i[r+12>>2]=0,void(R=a);if(n=0|i[n>>2],s=+Se((s=+o[16368+(24*n|0)>>3])-+Se(+function(e,t){e|=0;var n,r,i,a,s;return a=+o[(t=t|0)>>3],r=+h(+a),i=+o[t+8>>3]-+o[e+8>>3],s=r*+f(+i),n=+o[e>>3],+ +A(+s,+(+f(+a)*+h(+n)-+h(+i)*(r*+f(+n))))}(15568+(n<<4)|0,e))),c=0|je(t)?+Se(s+-.3334731722518321):s,s=+d(+l)/.381966011250105,(0|t)>0){u=0;do{s*=2.6457513110645907,u=u+1|0}while((0|u)!=(0|t))}l=+h(+c)*s,o[r>>3]=l,c=+f(+c)*s,o[r+8>>3]=c,R=a}function ve(e,t,n,r,a){t|=0,n|=0,r|=0,a|=0;var s=0,c=0;if((s=+function(e){var t,n;return n=+o[(e=e|0)>>3],t=+o[e+8>>3],+ +l(+(n*n+t*t))}(e|=0))<1e-16)return t=15568+(t<<4)|0,i[a>>2]=i[t>>2],i[a+4>>2]=i[t+4>>2],i[a+8>>2]=i[t+8>>2],void(i[a+12>>2]=i[t+12>>2]);if(c=+A(+ +o[e+8>>3],+ +o[e>>3]),(0|n)>0){e=0;do{s/=2.6457513110645907,e=e+1|0}while((0|e)!=(0|n))}r?(s/=3,n=0==(0|je(n)),s=+g(.381966011250105*(n?s:s/2.6457513110645907))):(s=+g(.381966011250105*s),0|je(n)&&(c=+Se(c+.3334731722518321))),function(e,t,n,r){e|=0,t=+t,r|=0;var a=0,s=0,l=0,c=0;if((n=+n)<1e-16)return i[r>>2]=i[e>>2],i[r+4>>2]=i[e+4>>2],i[r+8>>2]=i[e+8>>2],void(i[r+12>>2]=i[e+12>>2]);s=t<0?t+6.283185307179586:t,s=t>=6.283185307179586?s+-6.283185307179586:s;do{if(!(s<1e-16)){if(a=+u(+(s+-3.141592653589793))<1e-16,t=+o[e>>3],a){t-=n,o[r>>3]=t,a=r;break}if(l=+h(+n),n=+f(+n),t=l*+f(+t)+ +h(+s)*(n*+h(+t)),t=+m(+((t=t>1?1:t)<-1?-1:t)),o[r>>3]=t,+u(+(t+-1.5707963267948966))<1e-16)return o[r>>3]=1.5707963267948966,void(o[r+8>>3]=0);if(+u(+(t+1.5707963267948966))<1e-16)return o[r>>3]=-1.5707963267948966,void(o[r+8>>3]=0);if(c=+h(+t),s=n*+f(+s)/c,n=+o[e>>3],t=(l-+f(+t)*+f(+n))/+h(+n)/c,l=s>1?1:s,t=t>1?1:t,(t=+o[e+8>>3]+ +A(+(l<-1?-1:l),+(t<-1?-1:t)))>3.141592653589793)do{t+=-6.283185307179586}while(t>3.141592653589793);if(t<-3.141592653589793)do{t+=6.283185307179586}while(t<-3.141592653589793);return void(o[r+8>>3]=t)}t=+o[e>>3]+n,o[r>>3]=t,a=r}while(0);if(+u(+(t+-1.5707963267948966))<1e-16)return o[a>>3]=1.5707963267948966,void(o[r+8>>3]=0);if(+u(+(t+1.5707963267948966))<1e-16)return o[a>>3]=-1.5707963267948966,void(o[r+8>>3]=0);if((t=+o[e+8>>3])>3.141592653589793)do{t+=-6.283185307179586}while(t>3.141592653589793);if(t<-3.141592653589793)do{t+=6.283185307179586}while(t<-3.141592653589793);o[r+8>>3]=t}(15568+(t<<4)|0,+Se(+o[16368+(24*t|0)>>3]-c),s,a)}function ye(e,t,n){t|=0,n|=0;var r,o;r=R,R=R+16|0,X((e|=0)+4|0,o=r),ve(o,0|i[e>>2],t,0,n),R=r}function be(e,t,n){e|=0,t|=0,n|=0;var r,o=0,a=0,s=0,u=0,l=0;r=R,R=R+128|0,a=r,u=20208,l=(s=o=r+64|0)+60|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|l));u=20272,l=(s=a)+60|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|l));o=(l=0==(0|je(0|i[t>>2])))?o:a,ce(a=e+4|0),he(a),0|je(0|i[t>>2])&&(ie(a),i[t>>2]=1+(0|i[t>>2])),i[n>>2]=i[e>>2],J(a,o,t=n+4|0),Q(t),i[n+16>>2]=i[e>>2],J(a,o+12|0,t=n+20|0),Q(t),i[n+32>>2]=i[e>>2],J(a,o+24|0,t=n+36|0),Q(t),i[n+48>>2]=i[e>>2],J(a,o+36|0,t=n+52|0),Q(t),i[n+64>>2]=i[e>>2],J(a,o+48|0,n=n+68|0),Q(n),R=r}function _e(e,t,n,r){n|=0,r|=0;var o,a,s,u,l,c,h=0,f=0,d=0,p=0,m=0;if(c=R,R=R+32|0,l=c+12|0,a=c,m=(e|=0)+4|0,p=0|i[16928+((t|=0)<<2)>>2],p=(u=0!=(0|r))?3*p|0:p,h=0|i[m>>2],o=0|i[(s=e+8|0)>>2],u){if((0|(h=o+h+(r=0|i[(f=e+12|0)>>2])|0))==(0|p))return R=c,0|(m=1);d=f}else h=o+h+(r=0|i[(d=e+12|0)>>2])|0;if((0|h)<=(0|p))return R=c,0|(m=0);do{if((0|r)>0){if(r=0|i[e>>2],(0|o)>0){f=18608+(80*r|0)+60|0,r=e;break}r=18608+(80*r|0)+40|0,n?(K(l,p,0,0),Z(m,l,a),se(a),J(a,l,m),f=r,r=e):(f=r,r=e)}else f=18608+(80*(0|i[e>>2])|0)+20|0,r=e}while(0);if(i[r>>2]=i[f>>2],(0|i[(h=f+16|0)>>2])>0){r=0;do{ae(m),r=r+1|0}while((0|r)<(0|i[h>>2]))}return e=f+4|0,i[l>>2]=i[e>>2],i[l+4>>2]=i[e+4>>2],i[l+8>>2]=i[e+8>>2],t=0|i[16848+(t<<2)>>2],$(l,u?3*t|0:t),J(m,l,m),Q(m),r=u&&((0|i[s>>2])+(0|i[m>>2])+(0|i[d>>2])|0)==(0|p)?1:2,R=c,0|(m=r)}function we(e,t){e|=0,t|=0;var n=0;do{n=0|_e(e,t,0,1)}while(2==(0|n));return 0|n}function Ee(e,t,n,r){e|=0,t|=0,r|=0;var a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w=0,E=0,S=0,T=0,M=0,L=0;if(_=R,R=R+240|0,w=_+224|0,g=_+208|0,A=_,v=_+192|0,y=_+176|0,b=_+160|0,f=_+144|0,d=_+128|0,p=_+112|0,m=_+96|0,0|(n|=0))return function(e,t,n){e|=0,t|=0,n|=0;var r,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w,E,S=0,T=0,M=0,L=0,C=0,O=0,I=0,P=0;E=R,R=R+272|0,O=E+240|0,v=E,y=E+224|0,b=E+208|0,_=E+176|0,w=E+160|0,f=E+192|0,d=E+144|0,p=E+128|0,m=E+112|0,g=E+96|0,A=E+80|0,i[(C=E+256|0)>>2]=t,i[O>>2]=i[e>>2],i[O+4>>2]=i[e+4>>2],i[O+8>>2]=i[e+8>>2],i[O+12>>2]=i[e+12>>2],be(O,C,v),i[n>>2]=0,O=y+4|0,r=_+4|0,a=16848+((C=0|i[C>>2])<<2)|0,s=16928+(C<<2)|0,u=p+8|0,l=m+8|0,c=g+8|0,h=b+4|0,L=0;e:for(;;){M=v+(((L>>>0)%5|0)<<4)|0,i[b>>2]=i[M>>2],i[b+4>>2]=i[M+4>>2],i[b+8>>2]=i[M+8>>2],i[b+12>>2]=i[M+12>>2];do{}while(2==(0|_e(b,C,0,1)));if(0!=(0|L)&0!=(0|je(t))){if(i[_>>2]=i[b>>2],i[_+4>>2]=i[b+4>>2],i[_+8>>2]=i[b+8>>2],i[_+12>>2]=i[b+12>>2],X(O,w),S=0|i[_>>2],T=0|i[17008+(80*S|0)+(i[y>>2]<<2)>>2],i[_>>2]=i[18608+(80*S|0)+(20*T|0)>>2],(0|(M=0|i[18608+(80*S|0)+(20*T|0)+16>>2]))>0){e=0;do{ae(r),e=e+1|0}while((0|e)<(0|M))}switch(M=18608+(80*S|0)+(20*T|0)+4|0,i[f>>2]=i[M>>2],i[f+4>>2]=i[M+4>>2],i[f+8>>2]=i[M+8>>2],$(f,3*(0|i[a>>2])|0),J(r,f,r),Q(r),X(r,d),I=+(0|i[s>>2]),o[p>>3]=3*I,o[u>>3]=0,P=-1.5*I,o[m>>3]=P,o[l>>3]=2.598076211353316*I,o[g>>3]=P,o[c>>3]=-2.598076211353316*I,0|i[17008+(80*(0|i[_>>2])|0)+(i[b>>2]<<2)>>2]){case 1:e=m,S=p;break;case 3:e=g,S=m;break;case 2:e=p,S=g;break;default:e=11;break e}rt(w,d,S,e,A),ve(A,0|i[_>>2],C,1,n+8+(i[n>>2]<<4)|0),i[n>>2]=1+(0|i[n>>2])}if(L>>>0<5&&(X(h,_),ve(_,0|i[b>>2],C,1,n+8+(i[n>>2]<<4)|0),i[n>>2]=1+(0|i[n>>2])),i[y>>2]=i[b>>2],i[y+4>>2]=i[b+4>>2],i[y+8>>2]=i[b+8>>2],i[y+12>>2]=i[b+12>>2],(L=L+1|0)>>>0>=6){e=2;break}}2!=(0|e)?11==(0|e)&&x(22122,22169,573,22179):R=E}(e,t,r),void(R=_);i[w>>2]=t,i[g>>2]=i[e>>2],i[g+4>>2]=i[e+4>>2],i[g+8>>2]=i[e+8>>2],i[g+12>>2]=i[e+12>>2],xe(g,w,A),i[r>>2]=0,s=16928+((a=0|i[w>>2])<<2)|0,u=f+8|0,l=d+8|0,c=p+8|0,h=v+4|0,E=0,S=0,n=-1;e:for(;;){if(e=A+((w=(S>>>0)%6|0)<<4)|0,i[v>>2]=i[e>>2],i[v+4>>2]=i[e+4>>2],i[v+8>>2]=i[e+8>>2],i[v+12>>2]=i[e+12>>2],e=E,E=0|_e(v,a,0,1),0!=(0|S)&0!=(0|je(t))&&(1!=(0|e)&&(0|i[v>>2])!=(0|n))){switch(X(A+((((w+5|0)>>>0)%6|0)<<4)+4|0,y),X(A+(w<<4)+4|0,b),M=+(0|i[s>>2]),o[f>>3]=3*M,o[u>>3]=0,L=-1.5*M,o[d>>3]=L,o[l>>3]=2.598076211353316*M,o[p>>3]=L,o[c>>3]=-2.598076211353316*M,w=0|i[g>>2],0|i[17008+(80*w|0)+(((0|n)==(0|w)?0|i[v>>2]:n)<<2)>>2]){case 1:e=d,n=f;break;case 3:e=p,n=d;break;case 2:e=f,n=p;break;default:T=9;break e}rt(y,b,n,e,m),0|it(y,m)||0|it(b,m)||(ve(m,0|i[g>>2],a,1,r+8+(i[r>>2]<<4)|0),i[r>>2]=1+(0|i[r>>2]))}if(S>>>0<6&&(X(h,y),ve(y,0|i[v>>2],a,1,r+8+(i[r>>2]<<4)|0),i[r>>2]=1+(0|i[r>>2])),(S=S+1|0)>>>0>=7)break;n=0|i[v>>2]}9==(0|T)&&x(22205,22169,737,22250),R=_}function xe(e,t,n){e|=0,t|=0,n|=0;var r,o=0,a=0,s=0,u=0,l=0;r=R,R=R+160|0,a=r,u=20336,l=(s=o=r+80|0)+72|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|l));u=20416,l=(s=a)+72|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|l));o=(l=0==(0|je(0|i[t>>2])))?o:a,ce(a=e+4|0),he(a),0|je(0|i[t>>2])&&(ie(a),i[t>>2]=1+(0|i[t>>2])),i[n>>2]=i[e>>2],J(a,o,t=n+4|0),Q(t),i[n+16>>2]=i[e>>2],J(a,o+12|0,t=n+20|0),Q(t),i[n+32>>2]=i[e>>2],J(a,o+24|0,t=n+36|0),Q(t),i[n+48>>2]=i[e>>2],J(a,o+36|0,t=n+52|0),Q(t),i[n+64>>2]=i[e>>2],J(a,o+48|0,t=n+68|0),Q(t),i[n+80>>2]=i[e>>2],J(a,o+60|0,n=n+84|0),Q(n),R=r}function Se(e){var t;return t=(e=+e)<0?e+6.283185307179586:e,+(e>=6.283185307179586?t+-6.283185307179586:t)}function Te(e,t,n){return t|=0,n=+n,+u(+(+o[(e|=0)>>3]-+o[t>>3]))<n?0|(t=+u(+(+o[e+8>>3]-+o[t+8>>3]))<n):0|(t=0)}function Me(e,t){return t|=0,+u(+(+o[(e|=0)>>3]-+o[t>>3]))<17453292519943298e-27?0|(t=+u(+(+o[e+8>>3]-+o[t+8>>3]))<17453292519943298e-27):0|(t=0)}function Le(e,t){e|=0;var n=0,r=0,i=0;return r=+o[(t|=0)+8>>3],i=+o[e+8>>3],(n=+u(+(r-i)))>3.141592653589793&&(n=+u(+((r<0?r+6.283185307179586:r)-(i<0?i+6.283185307179586:i)))),r=1.5707963267948966-+o[e>>3],i=1.5707963267948966-+o[t>>3],i=+h(+r)*+h(+i)+ +h(+n)*(+f(+r)*+f(+i)),6371.007180918475*+p(+((i=i>1?1:i)<-1?-1:i))}function Ce(e,t){var n=0,r=0,i=0,o=0,a=0,s=0;if(!(!0&134217728==(-16777216&(t|=0)|0)))return 0|(t=0);if(a=0|_t(0|(e|=0),0|t,45),E(),(a&=127)>>>0>121)return 0|(t=0);n=0|_t(0|e,0|t,52),E(),n&=15;do{if(0|n){for(i=1,r=0;;){if(o=0|_t(0|e,0|t,3*(15-i|0)|0),E(),0!=(0|(o&=7))&(1^r)){if(1==(0|o)&0!=(0|D(a))){s=0,r=13;break}r=1}if(7==(0|o)){s=0,r=13;break}if(!(i>>>0<n>>>0)){r=9;break}i=i+1|0}if(9==(0|r)){if(15!=(0|n))break;return 0|(s=1)}if(13==(0|r))return 0|s}}while(0);for(;;){if(s=0|_t(0|e,0|t,3*(14-n|0)|0),E(),!(7==(7&s|0)&!0)){s=0,r=13;break}if(!(n>>>0<14)){s=1,r=13;break}n=n+1|0}return 13==(0|r)?0|s:0}function Re(e,t,n){n|=0;var r=0,i=0;if(r=0|_t(0|(e|=0),0|(t|=0),52),E(),(0|(r&=15))>=(0|n)){if((0|r)!=(0|n))if(n>>>0<=15){if(e|=i=0|wt(0|n,0,52),t=0|E()|-15728641&t,(0|r)>(0|n))do{i=0|wt(7,0,3*(14-n|0)|0),n=n+1|0,e|=i,t=0|E()|t}while((0|n)<(0|r))}else t=0,e=0}else t=0,e=0;return w(0|t),0|e}function Oe(e,t,n,r){n|=0,r|=0;var o,a=0,s=0,u=0,l=0,c=0,h=0;if(u=0|_t(0|(e|=0),0|(t|=0),52),E(),(0|n)<16&(0|(u&=15))<=(0|n)){if((0|u)==(0|n))return i[(n=r)>>2]=e,void(i[n+4>>2]=t);if(o=(0|(c=0|Ze(7,n-u|0)))/7|0,l=0|_t(0|e,0|t,45),E(),0|D(127&l)){e:do{if(u)for(s=1;;){if(a=0|_t(0|e,0|t,3*(15-s|0)|0),E(),0|(a&=7))break e;if(!(s>>>0<u>>>0)){a=0;break}s=s+1|0}else a=0}while(0);s=0==(0|a)}else s=0;if(h=0|wt(u+1|0,0,52),a=0|E()|-15728641&t,Oe(t=(h|e)&~(t=0|wt(7,0,0|(l=3*(14-u|0)|0))),u=a&~(0|E()),n,r),a=r+(o<<3)|0,!s)return Oe((h=0|wt(1,0,0|l))|t,0|E()|u,n,a),h=a+(o<<3)|0,Oe((c=0|wt(2,0,0|l))|t,0|E()|u,n,h),h=h+(o<<3)|0,Oe((c=0|wt(3,0,0|l))|t,0|E()|u,n,h),h=h+(o<<3)|0,Oe((c=0|wt(4,0,0|l))|t,0|E()|u,n,h),h=h+(o<<3)|0,Oe((c=0|wt(5,0,0|l))|t,0|E()|u,n,h),void Oe((c=0|wt(6,0,0|l))|t,0|E()|u,n,h+(o<<3)|0);s=a+(o<<3)|0,(0|c)>6&&(Tt(0|a,0,(h=(s>>>0>(c=a+8|0)>>>0?s:c)+-1+(0-a)|0)+8&-8|0),a=c+(h>>>3<<3)|0),Oe((h=0|wt(2,0,0|l))|t,0|E()|u,n,a),h=a+(o<<3)|0,Oe((c=0|wt(3,0,0|l))|t,0|E()|u,n,h),h=h+(o<<3)|0,Oe((c=0|wt(4,0,0|l))|t,0|E()|u,n,h),h=h+(o<<3)|0,Oe((c=0|wt(5,0,0|l))|t,0|E()|u,n,h),Oe((c=0|wt(6,0,0|l))|t,0|E()|u,n,h+(o<<3)|0)}}function Ie(e,t){var n=0,r=0,i=0;if(i=0|_t(0|(e|=0),0|(t|=0),45),E(),!(0|D(127&i)))return 0|(i=0);i=0|_t(0|e,0|t,52),E(),i&=15;e:do{if(i)for(r=1;;){if(n=0|_t(0|e,0|t,3*(15-r|0)|0),E(),0|(n&=7))break e;if(!(r>>>0<i>>>0)){n=0;break}r=r+1|0}else n=0}while(0);return 0|(i=0==(0|n)&1)}function Pe(e,t){var n=0,r=0,i=0;if(i=0|_t(0|(e|=0),0|(t|=0),52),E(),!(i&=15))return 0|(i=0);for(r=1;;){if(n=0|_t(0|e,0|t,3*(15-r|0)|0),E(),0|(n&=7)){r=5;break}if(!(r>>>0<i>>>0)){n=0,r=5;break}r=r+1|0}return 5==(0|r)?0|n:0}function ke(e,t){var n=0,r=0,i=0,o=0,a=0,s=0,u=0;if(u=0|_t(0|(e|=0),0|(t|=0),52),E(),!(u&=15))return u=e,w(0|(s=t)),0|u;for(s=1,n=0;;){r=0|wt(7,0,0|(o=3*(15-s|0)|0)),i=0|E(),a=0|_t(0|e,0|t,0|o),E(),e=(o=0|wt(0|ue(7&a),0,0|o))|e&~r,t=(a=0|E())|t&~i;e:do{if(!n)if(0==(o&r|0)&0==(a&i|0))n=0;else if(r=0|_t(0|e,0|t,52),E(),r&=15){n=1;t:for(;;){switch(a=0|_t(0|e,0|t,3*(15-n|0)|0),E(),7&a){case 1:break t;case 0:break;default:n=1;break e}if(!(n>>>0<r>>>0)){n=1;break e}n=n+1|0}for(n=1;;){if(i=0|_t(0|e,0|t,0|(a=3*(15-n|0)|0)),E(),o=0|wt(7,0,0|a),t&=~(0|E()),e=e&~o|(a=0|wt(0|ue(7&i),0,0|a)),t=0|t|E(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(s>>>0<u>>>0))break;s=s+1|0}return w(0|t),0|e}function Ne(e,t){var n=0,r=0,i=0,o=0,a=0;if(r=0|_t(0|(e|=0),0|(t|=0),52),E(),!(r&=15))return r=e,w(0|(n=t)),0|r;for(n=1;a=0|_t(0|e,0|t,0|(o=3*(15-n|0)|0)),E(),i=0|wt(7,0,0|o),t&=~(0|E()),e=(o=0|wt(0|ue(7&a),0,0|o))|e&~i,t=0|E()|t,n>>>0<r>>>0;)n=n+1|0;return w(0|t),0|e}function De(e,t){var n=0,r=0,i=0,o=0,a=0,s=0,u=0;if(u=0|_t(0|(e|=0),0|(t|=0),52),E(),!(u&=15))return u=e,w(0|(s=t)),0|u;for(s=1,n=0;;){r=0|wt(7,0,0|(o=3*(15-s|0)|0)),i=0|E(),a=0|_t(0|e,0|t,0|o),E(),e=(o=0|wt(0|le(7&a),0,0|o))|e&~r,t=(a=0|E())|t&~i;e:do{if(!n)if(0==(o&r|0)&0==(a&i|0))n=0;else if(r=0|_t(0|e,0|t,52),E(),r&=15){n=1;t:for(;;){switch(a=0|_t(0|e,0|t,3*(15-n|0)|0),E(),7&a){case 1:break t;case 0:break;default:n=1;break e}if(!(n>>>0<r>>>0)){n=1;break e}n=n+1|0}for(n=1;;){if(o=0|wt(7,0,0|(i=3*(15-n|0)|0)),a=t&~(0|E()),t=0|_t(0|e,0|t,0|i),E(),e=e&~o|(t=0|wt(0|le(7&t),0,0|i)),t=0|a|E(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(s>>>0<u>>>0))break;s=s+1|0}return w(0|t),0|e}function Fe(e,t){var n=0,r=0,i=0,o=0,a=0;if(r=0|_t(0|(e|=0),0|(t|=0),52),E(),!(r&=15))return r=e,w(0|(n=t)),0|r;for(n=1;o=0|wt(7,0,0|(a=3*(15-n|0)|0)),i=t&~(0|E()),t=0|_t(0|e,0|t,0|a),E(),e=(t=0|wt(0|le(7&t),0,0|a))|e&~o,t=0|E()|i,n>>>0<r>>>0;)n=n+1|0;return w(0|t),0|e}function je(e){return 0|(0|(e|=0))%2}function Be(e,t){e|=0;var n,r;return r=R,R=R+16|0,n=r,(t|=0)>>>0<=15&&2146435072!=(2146435072&i[e+4>>2]|0)&&2146435072!=(2146435072&i[e+8+4>>2]|0)?(!function(e,t,n){var r,i;r=R,R=R+16|0,Ae(e|=0,t|=0,n|=0,i=r),Y(i,n+4|0),R=r}(e,t,n),t=0|function(e,t){e|=0;var n,r=0,o=0,a=0,s=0,u=0,l=0,c=0,h=0;if(n=R,R=R+64|0,l=n+40|0,o=n+24|0,a=n+12|0,s=n,wt(0|(t|=0),0,52),r=134225919|E(),!t)return(0|i[e+4>>2])>2||(0|i[e+8>>2])>2||(0|i[e+12>>2])>2?(l=0,w(0|(u=0)),R=n,0|l):(wt(0|j(e),0,45),u=0|E()|r,l=-1,w(0|u),R=n,0|l);if(i[l>>2]=i[e>>2],i[l+4>>2]=i[e+4>>2],i[l+8>>2]=i[e+8>>2],i[l+12>>2]=i[e+12>>2],u=l+4|0,(0|t)>0)for(e=-1;i[o>>2]=i[u>>2],i[o+4>>2]=i[u+4>>2],i[o+8>>2]=i[u+8>>2],1&t?(te(u),i[a>>2]=i[u>>2],i[a+4>>2]=i[u+4>>2],i[a+8>>2]=i[u+8>>2],re(a)):(ne(u),i[a>>2]=i[u>>2],i[a+4>>2]=i[u+4>>2],i[a+8>>2]=i[u+8>>2],ie(a)),Z(o,a,s),Q(s),c=0|wt(7,0,0|(h=3*(15-t|0)|0)),r&=~(0|E()),e=(h=0|wt(0|ee(s),0,0|h))|e&~c,r=0|E()|r,(0|t)>1;)t=t+-1|0;else e=-1;e:do{if((0|i[u>>2])<=2&&(0|i[l+8>>2])<=2&&(0|i[l+12>>2])<=2){if(t=0|wt(0|(o=0|j(l)),0,45),t|=e,e=0|E()|-1040385&r,s=0|B(l),!(0|D(o))){if((0|s)<=0)break;for(a=0;;){if(o=0|_t(0|t,0|e,52),E(),o&=15)for(r=1;l=0|_t(0|t,0|e,0|(h=3*(15-r|0)|0)),E(),c=0|wt(7,0,0|h),e&=~(0|E()),t=t&~c|(h=0|wt(0|ue(7&l),0,0|h)),e=0|e|E(),r>>>0<o>>>0;)r=r+1|0;if((0|(a=a+1|0))==(0|s))break e}}a=0|_t(0|t,0|e,52),E(),a&=15;t:do{if(a){r=1;n:for(;;){switch(h=0|_t(0|t,0|e,3*(15-r|0)|0),E(),7&h){case 1:break n;case 0:break;default:break t}if(!(r>>>0<a>>>0))break t;r=r+1|0}if(0|V(o,0|i[l>>2]))for(r=1;c=0|wt(7,0,0|(l=3*(15-r|0)|0)),h=e&~(0|E()),e=0|_t(0|t,0|e,0|l),E(),t=t&~c|(e=0|wt(0|le(7&e),0,0|l)),e=0|h|E(),r>>>0<a>>>0;)r=r+1|0;else for(r=1;l=0|_t(0|t,0|e,0|(h=3*(15-r|0)|0)),E(),c=0|wt(7,0,0|h),e&=~(0|E()),t=t&~c|(h=0|wt(0|ue(7&l),0,0|h)),e=0|e|E(),r>>>0<a>>>0;)r=r+1|0}}while(0);if((0|s)>0){r=0;do{t=0|ke(t,e),e=0|E(),r=r+1|0}while((0|r)!=(0|s))}}else t=0,e=0}while(0);return h=t,w(0|(c=e)),R=n,0|h}(n,t),e=0|E()):(e=0,t=0),w(0|e),R=r,0|t}function Ve(e,t,n){var r,o=0,a=0,s=0;if(r=(n|=0)+4|0,a=0|_t(0|(e|=0),0|(t|=0),52),E(),a&=15,s=0|_t(0|e,0|t,45),E(),o=0==(0|a),0|D(127&s)){if(o)return 0|(s=1);o=1}else{if(o)return 0|(s=0);o=0==(0|i[r>>2])&&0==(0|i[n+8>>2])?0!=(0|i[n+12>>2])&1:1}for(n=1;1&n?re(r):ie(r),s=0|_t(0|e,0|t,3*(15-n|0)|0),E(),oe(r,7&s),n>>>0<a>>>0;)n=n+1|0;return 0|o}function Ge(e,t,n){n|=0;var r,o,a=0,s=0,u=0,l=0,c=0,h=0;o=R,R=R+16|0,r=o,h=0|_t(0|(e|=0),0|(t|=0),45),E(),h&=127;e:do{if(0!=(0|D(h))&&(u=0|_t(0|e,0|t,52),E(),0!=(0|(u&=15)))){a=1;t:for(;;){switch(c=0|_t(0|e,0|t,3*(15-a|0)|0),E(),7&c){case 5:break t;case 0:break;default:a=t;break e}if(!(a>>>0<u>>>0)){a=t;break e}a=a+1|0}for(s=1,a=t;l=0|wt(7,0,0|(t=3*(15-s|0)|0)),c=a&~(0|E()),a=0|_t(0|e,0|a,0|t),E(),e=e&~l|(a=0|wt(0|le(7&a),0,0|t)),a=0|c|E(),s>>>0<u>>>0;)s=s+1|0}else a=t}while(0);if(c=7728+(28*h|0)|0,i[n>>2]=i[c>>2],i[n+4>>2]=i[c+4>>2],i[n+8>>2]=i[c+8>>2],i[n+12>>2]=i[c+12>>2],0|Ve(e,a,n)){if(l=n+4|0,i[r>>2]=i[l>>2],i[r+4>>2]=i[l+4>>2],i[r+8>>2]=i[l+8>>2],u=0|_t(0|e,0|a,52),E(),c=15&u,1&u?(ie(l),u=c+1|0):u=c,0|D(h)){e:do{if(c)for(t=1;;){if(s=0|_t(0|e,0|a,3*(15-t|0)|0),E(),0|(s&=7)){a=s;break e}if(!(t>>>0<c>>>0)){a=0;break}t=t+1|0}else a=0}while(0);a=4==(0|a)&1}else a=0;if(0|_e(n,u,a,0)){if(0|D(h))do{}while(0!=(0|_e(n,u,0,0)));(0|u)!=(0|c)&&ne(l)}else(0|u)!=(0|c)&&(i[l>>2]=i[r>>2],i[l+4>>2]=i[r+4>>2],i[l+8>>2]=i[r+8>>2]);R=o}else R=o}function Ue(e,t,n){n|=0;var r,i;r=R,R=R+16|0,Ge(e|=0,t|=0,i=r),t=0|_t(0|e,0|t,52),E(),ye(i,15&t,n),R=r}function qe(e,t,n){n|=0;var r,i,o=0,a=0,s=0;if(i=R,R=R+16|0,Ge(e|=0,t|=0,r=i),s=0|_t(0|e,0|t,52),E(),s&=15,a=0|_t(0|e,0|t,45),E(),!(0|D(127&a)))return Ee(r,s,t=0,n),void(R=i);e:do{if(s)for(a=1;;){if(o=0|_t(0|e,0|t,3*(15-a|0)|0),E(),0|(o&=7))break e;if(!(a>>>0<s>>>0)){o=0;break}a=a+1|0}else o=0}while(0);Ee(r,s,t=0==(0|o)&1,n),R=i}function We(e,t){t|=0;var n,r=0,o=0,a=0,s=0,u=0,l=0;if(wt(0|(e|=0),0,52),n=134225919|E(),(0|e)<1){o=0,r=0;do{0|D(o)&&(wt(0|o,0,45),u=0|n|E(),i[(e=t+(r<<3)|0)>>2]=-1,i[e+4>>2]=u,r=r+1|0),o=o+1|0}while(122!=(0|o))}else{u=0,r=0;do{if(0|D(u)){for(wt(0|u,0,45),o=1,a=-1,s=0|n|E();a&=~(l=0|wt(7,0,3*(15-o|0)|0)),s&=~(0|E()),(0|o)!=(0|e);)o=o+1|0;i[(l=t+(r<<3)|0)>>2]=a,i[l+4>>2]=s,r=r+1|0}u=u+1|0}while(122!=(0|u))}}function ze(e,t,n,r){var o,a=0,s=0,u=0,l=0,c=0;if(o=R,R=R+64|0,u=o,(0|(e|=0))==(0|(n|=0))&(0|(t|=0))==(0|(r|=0))|!1|134217728!=(2013265920&t|0)|!1|134217728!=(2013265920&r|0))return R=o,0|(u=0);if(a=0|_t(0|e,0|t,52),E(),a&=15,s=0|_t(0|n,0|r,52),E(),(0|a)!=(15&s|0))return R=o,0|(u=0);if(s=a+-1|0,a>>>0>1&&(c=0|Re(e,t,s),l=0|E(),(0|c)==(0|(s=0|Re(n,r,s)))&(0|l)==(0|E()))){if(a=0|_t(0|e,0|t,0|(s=3*(15^a)|0)),E(),a&=7,s=0|_t(0|n,0|r,0|s),E(),0==(0|a)|0==(0|(s&=7)))return R=o,0|(c=1);if((0|i[21136+(a<<2)>>2])==(0|s))return R=o,0|(c=1);if((0|i[21168+(a<<2)>>2])==(0|s))return R=o,0|(c=1)}s=(a=u)+56|0;do{i[a>>2]=0,a=a+4|0}while((0|a)<(0|s));return O(e,t,1,u),a=(0|i[(c=u)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)||(0|i[(c=u+8|0)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)||(0|i[(c=u+16|0)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)||(0|i[(c=u+24|0)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)||(0|i[(c=u+32|0)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)||(0|i[(c=u+40|0)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)?1:1&((0|i[(a=u+48|0)>>2])==(0|n)?(0|i[a+4>>2])==(0|r):0),R=o,0|(c=a)}function He(e){e|=0;var t,n,r=0;return(t=0|gt(1,12))||x(22339,22294,49,22352),0|(r=0|i[(n=e+4|0)>>2])?(i[(r=r+8|0)>>2]=t,i[n>>2]=t,0|t):(0|i[e>>2]&&x(22369,22294,61,22392),i[(r=e)>>2]=t,i[n>>2]=t,0|t)}function Ke(e,t){e|=0,t|=0;var n,r;return(r=0|pt(24))||x(22406,22294,78,22420),i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],i[r+12>>2]=i[t+12>>2],i[r+16>>2]=0,0|(n=0|i[(t=e+4|0)>>2])?(i[n+16>>2]=r,i[t>>2]=r,0|r):(0|i[e>>2]&&x(22435,22294,82,22420),i[e>>2]=r,i[t>>2]=r,0|r)}function Ye(e){var t,n,r=0,a=0,s=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0,A=0,v=0,y=0,b=0,_=0,w=0,E=0,S=0,T=0,M=0,L=0,C=0,R=0,O=0,I=0,P=0,k=0,N=0,D=0;if(0|i[(l=(e|=0)+8|0)>>2])return 0|(D=1);if(!(s=0|i[e>>2]))return 0|(D=0);r=s,a=0;do{a=a+1|0,r=0|i[r+8>>2]}while(0!=(0|r));if(a>>>0<2)return 0|(D=0);(n=0|pt(a<<2))||x(22455,22294,317,22474),(t=0|pt(a<<5))||x(22496,22294,321,22474),i[e>>2]=0,i[(L=e+4|0)>>2]=0,i[l>>2]=0,a=0,k=0,M=0,g=0;e:for(;;){if(m=0|i[s>>2]){c=0,h=m;do{if(d=+o[h+8>>3],r=h,h=0|i[h+16>>2],f=+o[(l=(p=0==(0|h))?m:h)+8>>3],+u(+(d-f))>3.141592653589793){D=14;break}c+=(f-d)*(+o[r>>3]+ +o[l>>3])}while(!p);if(14==(0|D)){D=0,c=0,r=m;do{T=+o[r+8>>3],I=0|i[(P=r+16|0)>>2],S=+o[(I=0==(0|I)?m:I)+8>>3],c+=(+o[r>>3]+ +o[I>>3])*((S<0?S+6.283185307179586:S)-(T<0?T+6.283185307179586:T)),r=0|i[(0==(0|r)?s:P)>>2]}while(0!=(0|r))}c>0?(i[n+(k<<2)>>2]=s,k=k+1|0,l=M,r=g):D=19}else D=19;if(19==(0|D)){D=0;do{if(!a){if(g){l=L,h=g+8|0,r=s,a=e;break}if(0|i[e>>2]){D=27;break e}l=L,h=e,r=s,a=e;break}if(0|i[(r=a+8|0)>>2]){D=21;break e}if(!(a=0|gt(1,12))){D=23;break e}i[r>>2]=a,l=a+4|0,h=a,r=g}while(0);if(i[h>>2]=s,i[l>>2]=s,h=t+(M<<5)|0,p=0|i[s>>2]){for(o[(m=t+(M<<5)+8|0)>>3]=17976931348623157e292,o[(g=t+(M<<5)+24|0)>>3]=17976931348623157e292,o[h>>3]=-17976931348623157e292,o[(A=t+(M<<5)+16|0)>>3]=-17976931348623157e292,w=17976931348623157e292,E=-17976931348623157e292,l=0,v=p,d=17976931348623157e292,b=17976931348623157e292,_=-17976931348623157e292,f=-17976931348623157e292;c=+o[v>>3],T=+o[v+8>>3],v=0|i[v+16>>2],S=+o[((y=0==(0|v))?p:v)+8>>3],c<d&&(o[m>>3]=c,d=c),T<b&&(o[g>>3]=T,b=T),c>_?o[h>>3]=c:c=_,T>f&&(o[A>>3]=T,f=T),w=T>0&T<w?T:w,E=T<0&T>E?T:E,l|=+u(+(T-S))>3.141592653589793,!y;)_=c;l&&(o[A>>3]=E,o[g>>3]=w)}else i[h>>2]=0,i[h+4>>2]=0,i[h+8>>2]=0,i[h+12>>2]=0,i[h+16>>2]=0,i[h+20>>2]=0,i[h+24>>2]=0,i[h+28>>2]=0;l=M+1|0}if(s=0|i[(P=s+8|0)>>2],i[P>>2]=0,!s){D=45;break}M=l,g=r}if(21==(0|D))x(22272,22294,35,22306);else if(23==(0|D))x(22326,22294,37,22306);else if(27==(0|D))x(22369,22294,61,22392);else if(45==(0|D)){e:do{if((0|k)>0){for(P=0==(0|l),O=l<<2,I=0==(0|e),R=0,r=0;;){if(C=0|i[n+(R<<2)>>2],P)D=73;else{if(!(M=0|pt(O))){D=50;break}if(!(L=0|pt(O))){D=52;break}t:do{if(I)a=0;else{for(l=0,a=0,h=e;s=t+(l<<5)|0,0|Qe(0|i[h>>2],s,0|i[C>>2])?(i[M+(a<<2)>>2]=h,i[L+(a<<2)>>2]=s,y=a+1|0):y=a,h=0|i[h+8>>2];)l=l+1|0,a=y;if((0|y)>0)if(s=0|i[M>>2],1==(0|y))a=s;else for(A=0,v=-1,a=s,g=s;;){for(p=0|i[g>>2],s=0,h=0;m=(0|(l=0|i[i[M+(h<<2)>>2]>>2]))==(0|p)?s:s+(1&(0|Qe(l,0|i[L+(h<<2)>>2],0|i[p>>2])))|0,(0|(h=h+1|0))!=(0|y);)s=m;if(a=(l=(0|m)>(0|v))?g:a,(0|(s=A+1|0))==(0|y))break t;A=s,v=l?m:v,g=0|i[M+(s<<2)>>2]}else a=0}}while(0);if(mt(M),mt(L),a){if(s=0|i[(l=a+4|0)>>2])a=s+8|0;else if(0|i[a>>2]){D=70;break}i[a>>2]=C,i[l>>2]=C}else D=73}if(73==(0|D)){if(D=0,0|(r=0|i[C>>2]))do{L=r,r=0|i[r+16>>2],mt(L)}while(0!=(0|r));mt(C),r=2}if((0|(R=R+1|0))>=(0|k)){N=r;break e}}50==(0|D)?x(22511,22294,249,22530):52==(0|D)?x(22549,22294,252,22530):70==(0|D)&&x(22369,22294,61,22392)}else N=0}while(0);return mt(n),mt(t),0|(D=N)}return 0}function Qe(e,t,n){e|=0;var r,a=0,s=0,u=0,l=0,c=0,h=0,f=0;if(!(0|W(t|=0,n|=0)))return 0|(e=0);if(t=0|q(t),r=+o[n>>3],a=t&(a=+o[n+8>>3])<0?a+6.283185307179586:a,!(e=0|i[e>>2]))return 0|(e=0);if(t){t=0,n=e;e:for(;;){for(;l=+o[n>>3],h=+o[n+8>>3],f=0|i[(n=n+16|0)>>2],u=+o[(f=0==(0|f)?e:f)>>3],s=+o[f+8>>3],l>u?(c=l,l=h):(c=u,u=l,l=s,s=h),r<u|r>c;)if(!(n=0|i[n>>2])){n=22;break e}if(a=(l=l<0?l+6.283185307179586:l)==a|(h=s<0?s+6.283185307179586:s)==a?a+-2220446049250313e-31:a,((h+=(r-u)/(c-u)*(l-h))<0?h+6.283185307179586:h)>a&&(t^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|t}else{t=0,n=e;e:for(;;){for(;l=+o[n>>3],h=+o[n+8>>3],f=0|i[(n=n+16|0)>>2],u=+o[(f=0==(0|f)?e:f)>>3],s=+o[f+8>>3],l>u?(c=l,l=h):(c=u,u=l,l=s,s=h),r<u|r>c;)if(!(n=0|i[n>>2])){n=22;break e}if(s+(r-u)/(c-u)*(l-s)>(a=l==a|s==a?a+-2220446049250313e-31:a)&&(t^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|t}return 0}function Xe(e,t,n,o,a){n|=0,o|=0,a|=0;var s,u,l,c,h=0,f=0,d=0,p=0,m=0,g=0,A=0,v=0,y=0,b=0;if(c=R,R=R+32|0,b=c+16|0,l=c,h=0|_t(0|(e|=0),0|(t|=0),52),E(),h&=15,A=0|_t(0|n,0|o,52),E(),(0|h)!=(15&A|0))return R=c,0|(b=1);if(m=0|_t(0|e,0|t,45),E(),m&=127,g=0|_t(0|n,0|o,45),E(),A=(0|m)!=(0|(g&=127))){if(7==(0|(d=0|U(m,g))))return R=c,0|(b=2);7==(0|(p=0|U(g,m)))?x(22573,22597,151,22607):(v=d,f=p)}else v=0,f=0;s=0|D(m),u=0|D(g),i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0;do{if(v){if(d=(0|(g=0|i[4304+(28*m|0)+(v<<2)>>2]))>0,u)if(d){m=0,p=n,d=o;do{p=0|De(p,d),d=0|E(),1==(0|(f=0|le(f)))&&(f=0|le(1)),m=m+1|0}while((0|m)!=(0|g));g=f,m=p,p=d}else g=f,m=n,p=o;else if(d){m=0,p=n,d=o;do{p=0|Fe(p,d),d=0|E(),f=0|le(f),m=m+1|0}while((0|m)!=(0|g));g=f,m=p,p=d}else g=f,m=n,p=o;if(Ve(m,p,b),A||x(22620,22597,181,22607),(d=0!=(0|s))&(f=0!=(0|u))&&x(22647,22597,182,22607),d){if(f=0|Pe(e,t),0|r[22032+(7*f|0)+v>>0]){h=3;break}m=p=0|i[21200+(28*f|0)+(v<<2)>>2],y=26}else if(f){if(f=0|Pe(m,p),0|r[22032+(7*f|0)+g>>0]){h=4;break}m=0,p=0|i[21200+(28*g|0)+(f<<2)>>2],y=26}else f=0;if(26==(0|y))if((0|p)<=-1&&x(22678,22597,212,22607),(0|m)<=-1&&x(22701,22597,213,22607),(0|p)>0){d=b+4|0,f=0;do{se(d),f=f+1|0}while((0|f)!=(0|p));f=m}else f=m;if(i[l>>2]=0,i[l+4>>2]=0,i[l+8>>2]=0,oe(l,v),0|h)for(;0|je(h)?re(l):ie(l),(0|h)>1;)h=h+-1|0;if((0|f)>0){h=0;do{se(l),h=h+1|0}while((0|h)!=(0|f))}J(y=b+4|0,l,y),Q(y),y=50}else if(Ve(n,o,b),0!=(0|s)&0!=(0|u))if((0|g)!=(0|m)&&x(22725,22597,243,22607),f=0|Pe(e,t),h=0|Pe(n,o),0|r[22032+(7*f|0)+h>>0])h=5;else if((0|(f=0|i[21200+(28*f|0)+(h<<2)>>2]))>0){d=b+4|0,h=0;do{se(d),h=h+1|0}while((0|h)!=(0|f));y=50}else y=50;else y=50}while(0);return 50==(0|y)&&(h=b+4|0,i[a>>2]=i[h>>2],i[a+4>>2]=i[h+4>>2],i[a+8>>2]=i[h+8>>2],h=0),R=c,0|(b=h)}function Je(e,t,n,r){n|=0,r|=0;var o,a,s=0,u=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0,A=0,v=0,y=0;if(a=R,R=R+48|0,l=a+36|0,c=a+24|0,h=a+12|0,f=a,u=0|_t(0|(e|=0),0|(t|=0),52),E(),u&=15,p=0|_t(0|e,0|t,45),E(),o=0|D(p&=127),wt(0|u,0,52),A=134225919|E(),i[(g=r)>>2]=-1,i[g+4>>2]=A,!u)return(0|i[n>>2])>1||(0|i[n+4>>2])>1||(0|i[n+8>>2])>1||127==(0|(s=0|G(p,0|ee(n))))?(R=a,0|(A=1)):(m=0|wt(0|s,0,45),g=0|E(),g=-1040385&i[(p=r)+4>>2]|g,i[(A=r)>>2]=i[p>>2]|m,i[A+4>>2]=g,R=a,0|(A=0));for(i[l>>2]=i[n>>2],i[l+4>>2]=i[n+4>>2],i[l+8>>2]=i[n+8>>2];i[c>>2]=i[l>>2],i[c+4>>2]=i[l+4>>2],i[c+8>>2]=i[l+8>>2],0|je(u)?(te(l),i[h>>2]=i[l>>2],i[h+4>>2]=i[l+4>>2],i[h+8>>2]=i[l+8>>2],re(h)):(ne(l),i[h>>2]=i[l>>2],i[h+4>>2]=i[l+4>>2],i[h+8>>2]=i[l+8>>2],ie(h)),Z(c,h,f),Q(f),v=0|i[(g=r)>>2],g=0|i[g+4>>2],n=0|wt(7,0,0|(y=3*(15-u|0)|0)),g&=~(0|E()),y=0|wt(0|ee(f),0,0|y),g=0|E()|g,i[(A=r)>>2]=y|v&~n,i[A+4>>2]=g,(0|u)>1;)u=u+-1|0;e:do{if((0|i[l>>2])<=1&&(0|i[l+4>>2])<=1&&(0|i[l+8>>2])<=1){f=127==(0|(c=0|G(p,u=0|ee(l))))?0:0|D(c);t:do{if(u){if(o){if(l=21408+(28*(0|Pe(e,t))|0)+(u<<2)|0,(0|(l=0|i[l>>2]))>0){n=0;do{u=0|ue(u),n=n+1|0}while((0|n)!=(0|l))}if(1==(0|u)){s=3;break e}127==(0|(n=0|G(p,u)))&&x(22752,22597,376,22782),0|D(n)?x(22795,22597,377,22782):(m=l,d=u,s=n)}else m=0,d=u,s=c;if((0|(h=0|i[4304+(28*p|0)+(d<<2)>>2]))<=-1&&x(22826,22597,384,22782),!f){if((0|m)<=-1&&x(22678,22597,417,22782),0|m){u=0,n=0|i[(l=r)>>2],l=0|i[l+4>>2];do{n=0|Ne(n,l),l=0|E(),i[(y=r)>>2]=n,i[y+4>>2]=l,u=u+1|0}while((0|u)<(0|m))}if((0|h)<=0){u=54;break}for(u=0,n=0|i[(l=r)>>2],l=0|i[l+4>>2];;)if(n=0|Ne(n,l),l=0|E(),i[(y=r)>>2]=n,i[y+4>>2]=l,(0|(u=u+1|0))==(0|h)){u=54;break t}}if(7==(0|(c=0|U(s,p)))&&x(22573,22597,393,22782),n=0|i[(u=r)>>2],u=0|i[u+4>>2],(0|h)>0){l=0;do{n=0|Ne(n,u),u=0|E(),i[(y=r)>>2]=n,i[y+4>>2]=u,l=l+1|0}while((0|l)!=(0|h))}if(n=0|Pe(n,u),y=0|F(s),(0|(n=0|i[(y?21824:21616)+(28*c|0)+(n<<2)>>2]))<=-1&&x(22678,22597,412,22782),n){u=0,l=0|i[(c=r)>>2],c=0|i[c+4>>2];do{l=0|ke(l,c),c=0|E(),i[(y=r)>>2]=l,i[y+4>>2]=c,u=u+1|0}while((0|u)<(0|n));u=54}else u=54}else if(0!=(0|o)&0!=(0|f))if(u=21408+(28*(y=0|Pe(e,t))|0)+((0|Pe(0|i[(u=r)>>2],0|i[u+4>>2]))<<2)|0,(0|(u=0|i[u>>2]))<=-1&&x(22849,22597,433,22782),u){s=0,n=0|i[(l=r)>>2],l=0|i[l+4>>2];do{n=0|Ne(n,l),l=0|E(),i[(y=r)>>2]=n,i[y+4>>2]=l,s=s+1|0}while((0|s)<(0|u));s=c,u=54}else s=c,u=55;else s=c,u=54}while(0);if(54==(0|u)&&f&&(u=55),55==(0|u)&&1==(0|Pe(0|i[(y=r)>>2],0|i[y+4>>2]))){s=4;break}A=0|i[(y=r)>>2],y=-1040385&i[y+4>>2],v=0|wt(0|s,0,45),y=0|y|E(),i[(s=r)>>2]=A|v,i[s+4>>2]=y,s=0}else s=2}while(0);return R=a,0|(y=s)}function Ze(e,t){var n=0;if(!(t|=0))return 0|(n=1);n=e|=0,e=1;do{e=0|y(0==(1&t|0)?1:n,e),t>>=1,n=0|y(n,n)}while(0!=(0|t));return 0|e}function $e(e,t,n){e|=0;var r,a,s=0,u=0,l=0,c=0,h=0,f=0,d=0,p=0;if(!(0|W(t|=0,n|=0)))return 0|(p=0);if(t=0|q(t),a=+o[n>>3],s=t&(s=+o[n+8>>3])<0?s+6.283185307179586:s,(0|(p=0|i[e>>2]))<=0)return 0|(p=0);if(r=0|i[e+4>>2],t){t=0,n=-1,e=0;e:for(;;){for(d=e;c=+o[r+(d<<4)>>3],f=+o[r+(d<<4)+8>>3],l=+o[r+((e=(n+2|0)%(0|p)|0)<<4)>>3],u=+o[r+(e<<4)+8>>3],c>l?(h=c,c=f):(h=l,l=c,c=u,u=f),a<l|a>h;){if(!((0|(n=d+1|0))<(0|p))){n=22;break e}e=d,d=n,n=e}if(s=(c=c<0?c+6.283185307179586:c)==s|(f=u<0?u+6.283185307179586:u)==s?s+-2220446049250313e-31:s,((f+=(a-l)/(h-l)*(c-f))<0?f+6.283185307179586:f)>s&&(t^=1),(0|(e=d+1|0))>=(0|p)){n=22;break}n=d}if(22==(0|n))return 0|t}else{t=0,n=-1,e=0;e:for(;;){for(d=e;c=+o[r+(d<<4)>>3],f=+o[r+(d<<4)+8>>3],l=+o[r+((e=(n+2|0)%(0|p)|0)<<4)>>3],u=+o[r+(e<<4)+8>>3],c>l?(h=c,c=f):(h=l,l=c,c=u,u=f),a<l|a>h;){if(!((0|(n=d+1|0))<(0|p))){n=22;break e}e=d,d=n,n=e}if(u+(a-l)/(h-l)*(c-u)>(s=c==s|u==s?s+-2220446049250313e-31:s)&&(t^=1),(0|(e=d+1|0))>=(0|p)){n=22;break}n=d}if(22==(0|n))return 0|t}return 0}function et(e,t){t|=0;var n,r,a,s,l,c=0,h=0,f=0,d=0,p=0,m=0,g=0,A=0,v=0,y=0,b=0,_=0;if(!(r=0|i[(e|=0)>>2]))return i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,i[t+16>>2]=0,i[t+20>>2]=0,i[t+24>>2]=0,void(i[t+28>>2]=0);if(o[(a=t+8|0)>>3]=17976931348623157e292,o[(s=t+24|0)>>3]=17976931348623157e292,o[t>>3]=-17976931348623157e292,o[(l=t+16|0)>>3]=-17976931348623157e292,!((0|r)<=0)){for(n=0|i[e+4>>2],A=17976931348623157e292,v=-17976931348623157e292,y=0,e=-1,d=17976931348623157e292,p=17976931348623157e292,g=-17976931348623157e292,h=-17976931348623157e292,b=0;c=+o[n+(b<<4)>>3],m=+o[n+(b<<4)+8>>3],f=+o[n+(((0|(e=e+2|0))==(0|r)?0:e)<<4)+8>>3],c<d&&(o[a>>3]=c,d=c),m<p&&(o[s>>3]=m,p=m),c>g?o[t>>3]=c:c=g,m>h&&(o[l>>3]=m,h=m),A=m>0&m<A?m:A,v=m<0&m>v?m:v,y|=+u(+(m-f))>3.141592653589793,(0|(e=b+1|0))!=(0|r);)_=b,g=c,b=e,e=_;y&&(o[l>>3]=v,o[s>>3]=A)}}function tt(e,t){t|=0;var n,r=0,a=0,s=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0,A=0,v=0,y=0,b=0,_=0,w=0,E=0,x=0,S=0,T=0;if(v=0|i[(e|=0)>>2]){if(o[(y=t+8|0)>>3]=17976931348623157e292,o[(b=t+24|0)>>3]=17976931348623157e292,o[t>>3]=-17976931348623157e292,o[(_=t+16|0)>>3]=-17976931348623157e292,(0|v)>0){for(s=0|i[e+4>>2],g=17976931348623157e292,A=-17976931348623157e292,a=0,r=-1,f=17976931348623157e292,d=17976931348623157e292,m=-17976931348623157e292,c=-17976931348623157e292,w=0;l=+o[s+(w<<4)>>3],p=+o[s+(w<<4)+8>>3],h=+o[s+(((0|(S=r+2|0))==(0|v)?0:S)<<4)+8>>3],l<f&&(o[y>>3]=l,f=l),p<d&&(o[b>>3]=p,d=p),l>m?o[t>>3]=l:l=m,p>c&&(o[_>>3]=p,c=p),g=p>0&p<g?p:g,A=p<0&p>A?p:A,a|=+u(+(p-h))>3.141592653589793,(0|(r=w+1|0))!=(0|v);)S=w,m=l,w=r,r=S;a&&(o[_>>3]=A,o[b>>3]=g)}}else i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,i[t+16>>2]=0,i[t+20>>2]=0,i[t+24>>2]=0,i[t+28>>2]=0;if(!((0|(r=0|i[(S=e+8|0)>>2]))<=0)){n=e+12|0,x=0;do{if(s=0|i[n>>2],a=x,b=t+((x=x+1|0)<<5)|0,_=0|i[s+(a<<3)>>2]){if(o[(w=t+(x<<5)+8|0)>>3]=17976931348623157e292,o[(e=t+(x<<5)+24|0)>>3]=17976931348623157e292,o[b>>3]=-17976931348623157e292,o[(E=t+(x<<5)+16|0)>>3]=-17976931348623157e292,(0|_)>0){for(v=0|i[s+(a<<3)+4>>2],g=17976931348623157e292,A=-17976931348623157e292,s=0,a=-1,y=0,f=17976931348623157e292,d=17976931348623157e292,p=-17976931348623157e292,c=-17976931348623157e292;l=+o[v+(y<<4)>>3],m=+o[v+(y<<4)+8>>3],h=+o[v+(((0|(a=a+2|0))==(0|_)?0:a)<<4)+8>>3],l<f&&(o[w>>3]=l,f=l),m<d&&(o[e>>3]=m,d=m),l>p?o[b>>3]=l:l=p,m>c&&(o[E>>3]=m,c=m),g=m>0&m<g?m:g,A=m<0&m>A?m:A,s|=+u(+(m-h))>3.141592653589793,(0|(a=y+1|0))!=(0|_);)T=y,y=a,p=l,a=T;s&&(o[E>>3]=A,o[e>>3]=g)}}else i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0,i[b+16>>2]=0,i[b+20>>2]=0,i[b+24>>2]=0,i[b+28>>2]=0,r=0|i[S>>2]}while((0|x)<(0|r))}}function nt(e,t,n){var r=0,o=0,a=0;if(!(0|$e(e|=0,t|=0,n|=0)))return 0|(o=0);if((0|i[(o=e+8|0)>>2])<=0)return 0|(o=1);for(r=e+12|0,e=0;;){if(a=e,e=e+1|0,0|$e((0|i[r>>2])+(a<<3)|0,t+(e<<5)|0,n)){e=0,r=6;break}if((0|e)>=(0|i[o>>2])){e=1,r=6;break}}return 6==(0|r)?0|e:0}function rt(e,t,n,r,i){t|=0,n|=0,r|=0,i|=0;var a,s,u,l,c,h,f,d=0;l=+o[(e|=0)>>3],u=+o[t>>3]-l,s=+o[e+8>>3],a=+o[t+8>>3]-s,h=+o[n>>3],d=((d=+o[r>>3]-h)*(s-(f=+o[n+8>>3]))-(l-h)*(c=+o[r+8>>3]-f))/(u*c-a*d),o[i>>3]=l+u*d,o[i+8>>3]=s+a*d}function it(e,t){return t|=0,+o[(e|=0)>>3]!=+o[t>>3]?0|(t=0):0|(t=+o[e+8>>3]==+o[t+8>>3])}function ot(e,t){t|=0;var n,r,i;return+((i=+o[(e|=0)>>3]-+o[t>>3])*i+(r=+o[e+8>>3]-+o[t+8>>3])*r+(n=+o[e+16>>3]-+o[t+16>>3])*n)}function at(e,t,n){e|=0,n|=0;var r=0;(0|(t|=0))>0?(r=0|gt(t,4),i[e>>2]=r,r||x(22878,22901,40,22915)):i[e>>2]=0,i[e+4>>2]=t,i[e+8>>2]=0,i[e+12>>2]=n}function st(e){var t,n,r,a=0,s=0,l=0,h=0;t=(e|=0)+4|0,n=e+12|0,r=e+8|0;e:for(;;){for(s=0|i[t>>2],a=0;;){if((0|a)>=(0|s))break e;if(l=0|i[e>>2],h=0|i[l+(a<<2)>>2])break;a=a+1|0}a=l+(~~(+u(+ +c(10,+ +(15-(0|i[n>>2])|0))*(+o[h>>3]+ +o[h+8>>3]))%+(0|s))>>>0<<2)|0,s=0|i[a>>2];t:do{if(0|s){if(l=h+32|0,(0|s)==(0|h))i[a>>2]=i[l>>2];else{if(!(a=0|i[(s=s+32|0)>>2]))break;for(;(0|a)!=(0|h);)if(!(a=0|i[(s=a+32|0)>>2]))break t;i[s>>2]=i[l>>2]}mt(h),i[r>>2]=(0|i[r>>2])-1}}while(0)}mt(0|i[e>>2])}function ut(e){var t,n=0,r=0;for(t=0|i[(e|=0)+4>>2],r=0;;){if((0|r)>=(0|t)){n=0,r=4;break}if(n=0|i[(0|i[e>>2])+(r<<2)>>2]){r=4;break}r=r+1|0}return 4==(0|r)?0|n:0}function lt(e,t){t|=0;var n=0,r=0,a=0,s=0;if(n=~~(+u(+ +c(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,n=(0|i[e>>2])+(n<<2)|0,!(r=0|i[n>>2]))return 0|(s=1);s=t+32|0;do{if((0|r)!=(0|t)){if(!(n=0|i[r+32>>2]))return 0|(s=1);for(a=n;;){if((0|a)==(0|t)){a=8;break}if(!(n=0|i[a+32>>2])){n=1,a=10;break}r=a,a=n}if(8==(0|a)){i[r+32>>2]=i[s>>2];break}if(10==(0|a))return 0|n}else i[n>>2]=i[s>>2]}while(0);return mt(t),i[(s=e+8|0)>>2]=(0|i[s>>2])-1,0|(s=0)}function ct(e,t,n){e|=0,t|=0,n|=0;var r,a=0,s=0,l=0;(r=0|pt(40))||x(22931,22901,98,22944),i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],i[r+12>>2]=i[t+12>>2],i[(s=r+16|0)>>2]=i[n>>2],i[s+4>>2]=i[n+4>>2],i[s+8>>2]=i[n+8>>2],i[s+12>>2]=i[n+12>>2],i[r+32>>2]=0,s=~~(+u(+ +c(10,+ +(15-(0|i[e+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,s=(0|i[e>>2])+(s<<2)|0,a=0|i[s>>2];do{if(a){for(;!(0|Me(a,t)&&0|Me(a+16|0,n));)if(s=0|i[a+32>>2],!(0|i[(a=0==(0|s)?a:s)+32>>2])){l=10;break}if(10==(0|l)){i[a+32>>2]=r;break}return mt(r),0|(l=a)}i[s>>2]=r}while(0);return i[(l=e+8|0)>>2]=1+(0|i[l>>2]),0|(l=r)}function ht(e,t,n){t|=0,n|=0;var r=0,a=0;if(a=~~(+u(+ +c(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,!(a=0|i[(0|i[e>>2])+(a<<2)>>2]))return 0|(n=0);if(!n){for(e=a;;){if(0|Me(e,t)){r=10;break}if(!(e=0|i[e+32>>2])){e=0,r=10;break}}if(10==(0|r))return 0|e}for(e=a;;){if(0|Me(e,t)&&0|Me(e+16|0,n)){r=10;break}if(!(e=0|i[e+32>>2])){e=0,r=10;break}}return 10==(0|r)?0|e:0}function ft(e,t){t|=0;var n=0;if(n=~~(+u(+ +c(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,!(e=0|i[(0|i[e>>2])+(n<<2)>>2]))return 0|(n=0);for(;;){if(0|Me(e,t)){t=5;break}if(!(e=0|i[e+32>>2])){e=0,t=5;break}}return 5==(0|t)?0|e:0}function dt(e){return 0|~~+function(e){return+ +Mt(+(e=+e))}(e=+e)}function pt(e){e|=0;var t,n=0,r=0,o=0,a=0,s=0,u=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0,A=0,v=0,y=0,b=0,_=0,w=0;t=R,R=R+16|0,p=t;do{if(e>>>0<245){if(e=(h=e>>>0<11?16:e+11&-8)>>>3,3&(r=(d=0|i[5741])>>>e)|0)return o=0|i[(r=(e=23004+((n=(1&r^1)+e|0)<<1<<2)|0)+8|0)>>2],(0|(s=0|i[(a=o+8|0)>>2]))==(0|e)?i[5741]=d&~(1<<n):(i[s+12>>2]=e,i[r>>2]=s),w=n<<3,i[o+4>>2]=3|w,i[(w=o+w+4|0)>>2]=1|i[w>>2],R=t,0|(w=a);if(h>>>0>(f=0|i[5743])>>>0){if(0|r)return n=((n=r<<e&((n=2<<e)|0-n))&0-n)-1|0,s=0|i[(e=(n=23004+((o=((r=(n>>>=l=n>>>12&16)>>>5&8)|l|(s=(n>>>=r)>>>2&4)|(e=(n>>>=s)>>>1&2)|(o=(n>>>=e)>>>1&1))+(n>>>o)|0)<<1<<2)|0)+8|0)>>2],(0|(r=0|i[(l=s+8|0)>>2]))==(0|n)?(e=d&~(1<<o),i[5741]=e):(i[r+12>>2]=n,i[e>>2]=r,e=d),u=(w=o<<3)-h|0,i[s+4>>2]=3|h,i[(a=s+h|0)+4>>2]=1|u,i[s+w>>2]=u,0|f&&(o=0|i[5746],r=23004+((n=f>>>3)<<1<<2)|0,e&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5741]=e|n,n=r,e=r+8|0),i[e>>2]=o,i[n+12>>2]=o,i[o+8>>2]=n,i[o+12>>2]=r),i[5743]=u,i[5746]=a,R=t,0|(w=l);if(s=0|i[5742]){for(r=(s&0-s)-1|0,r=c=0|i[23268+(((o=(r>>>=a=r>>>12&16)>>>5&8)|a|(u=(r>>>=o)>>>2&4)|(l=(r>>>=u)>>>1&2)|(c=(r>>>=l)>>>1&1))+(r>>>c)<<2)>>2],l=c,c=(-8&i[c+4>>2])-h|0;(e=0|i[r+16>>2])||(e=0|i[r+20>>2]);)r=e,l=(a=(u=(-8&i[e+4>>2])-h|0)>>>0<c>>>0)?e:l,c=a?u:c;if((u=l+h|0)>>>0>l>>>0){a=0|i[l+24>>2],n=0|i[l+12>>2];do{if((0|n)==(0|l)){if(!(n=0|i[(e=l+20|0)>>2])&&!(n=0|i[(e=l+16|0)>>2])){r=0;break}for(;;)if(r=0|i[(o=n+20|0)>>2])n=r,e=o;else{if(!(r=0|i[(o=n+16|0)>>2]))break;n=r,e=o}i[e>>2]=0,r=n}else r=0|i[l+8>>2],i[r+12>>2]=n,i[n+8>>2]=r,r=n}while(0);do{if(0|a){if(n=0|i[l+28>>2],(0|l)==(0|i[(e=23268+(n<<2)|0)>>2])){if(i[e>>2]=r,!r){i[5742]=s&~(1<<n);break}}else if(i[((0|i[(w=a+16|0)>>2])==(0|l)?w:a+20|0)>>2]=r,!r)break;i[r+24>>2]=a,0|(n=0|i[l+16>>2])&&(i[r+16>>2]=n,i[n+24>>2]=r),0|(n=0|i[l+20>>2])&&(i[r+20>>2]=n,i[n+24>>2]=r)}}while(0);return c>>>0<16?(w=c+h|0,i[l+4>>2]=3|w,i[(w=l+w+4|0)>>2]=1|i[w>>2]):(i[l+4>>2]=3|h,i[u+4>>2]=1|c,i[u+c>>2]=c,0|f&&(o=0|i[5746],r=23004+((n=f>>>3)<<1<<2)|0,(n=1<<n)&d?n=0|i[(e=r+8|0)>>2]:(i[5741]=n|d,n=r,e=r+8|0),i[e>>2]=o,i[n+12>>2]=o,i[o+8>>2]=n,i[o+12>>2]=r),i[5743]=c,i[5746]=u),R=t,0|(w=l+8|0)}d=h}else d=h}else d=h}else if(e>>>0<=4294967231)if(h=-8&(e=e+11|0),o=0|i[5742]){a=0-h|0,c=(e>>>=8)?h>>>0>16777215?31:h>>>((c=14-((l=((A=e<<(d=(e+1048320|0)>>>16&8))+520192|0)>>>16&4)|d|(c=((A<<=l)+245760|0)>>>16&2))+(A<<c>>>15)|0)+7|0)&1|c<<1:0,r=0|i[23268+(c<<2)>>2];e:do{if(r)for(e=0,l=h<<(31==(0|c)?0:25-(c>>>1)|0),s=0;;){if((u=(-8&i[r+4>>2])-h|0)>>>0<a>>>0){if(!u){e=r,a=0,A=65;break e}e=r,a=u}if(s=0==(0|(A=0|i[r+20>>2]))|(0|A)==(0|(r=0|i[r+16+(l>>>31<<2)>>2]))?s:A,!r){r=s,A=61;break}l<<=1}else r=0,e=0,A=61}while(0);if(61==(0|A)){if(0==(0|r)&0==(0|e)){if(!(e=((e=2<<c)|0-e)&o)){d=h;break}d=(e&0-e)-1|0,e=0,r=0|i[23268+(((s=(d>>>=u=d>>>12&16)>>>5&8)|u|(l=(d>>>=s)>>>2&4)|(c=(d>>>=l)>>>1&2)|(r=(d>>>=c)>>>1&1))+(d>>>r)<<2)>>2]}r?A=65:(l=e,u=a)}if(65==(0|A))for(s=r;;){if(a=(r=(d=(-8&i[s+4>>2])-h|0)>>>0<a>>>0)?d:a,e=r?s:e,(r=0|i[s+16>>2])||(r=0|i[s+20>>2]),!r){l=e,u=a;break}s=r}if(0!=(0|l)&&u>>>0<((0|i[5743])-h|0)>>>0&&(f=l+h|0)>>>0>l>>>0){s=0|i[l+24>>2],n=0|i[l+12>>2];do{if((0|n)==(0|l)){if(!(n=0|i[(e=l+20|0)>>2])&&!(n=0|i[(e=l+16|0)>>2])){n=0;break}for(;;)if(r=0|i[(a=n+20|0)>>2])n=r,e=a;else{if(!(r=0|i[(a=n+16|0)>>2]))break;n=r,e=a}i[e>>2]=0}else w=0|i[l+8>>2],i[w+12>>2]=n,i[n+8>>2]=w}while(0);do{if(s){if(e=0|i[l+28>>2],(0|l)==(0|i[(r=23268+(e<<2)|0)>>2])){if(i[r>>2]=n,!n){o&=~(1<<e),i[5742]=o;break}}else if(i[((0|i[(w=s+16|0)>>2])==(0|l)?w:s+20|0)>>2]=n,!n)break;i[n+24>>2]=s,0|(e=0|i[l+16>>2])&&(i[n+16>>2]=e,i[e+24>>2]=n),(e=0|i[l+20>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}while(0);e:do{if(u>>>0<16)w=u+h|0,i[l+4>>2]=3|w,i[(w=l+w+4|0)>>2]=1|i[w>>2];else{if(i[l+4>>2]=3|h,i[f+4>>2]=1|u,i[f+u>>2]=u,n=u>>>3,u>>>0<256){r=23004+(n<<1<<2)|0,(e=0|i[5741])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5741]=e|n,n=r,e=r+8|0),i[e>>2]=f,i[n+12>>2]=f,i[f+8>>2]=n,i[f+12>>2]=r;break}if(n=23268+((r=(n=u>>>8)?u>>>0>16777215?31:u>>>((r=14-((b=((w=n<<(_=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|_|(r=((w<<=b)+245760|0)>>>16&2))+(w<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[f+28>>2]=r,i[(e=f+16|0)+4>>2]=0,i[e>>2]=0,!(o&(e=1<<r))){i[5742]=o|e,i[n>>2]=f,i[f+24>>2]=n,i[f+12>>2]=f,i[f+8>>2]=f;break}n=0|i[n>>2];t:do{if((-8&i[n+4>>2]|0)!=(0|u)){for(o=u<<(31==(0|r)?0:25-(r>>>1)|0);e=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|u)){n=e;break t}o<<=1,n=e}i[r>>2]=f,i[f+24>>2]=n,i[f+12>>2]=f,i[f+8>>2]=f;break e}}while(0);w=0|i[(_=n+8|0)>>2],i[w+12>>2]=f,i[_>>2]=f,i[f+8>>2]=w,i[f+12>>2]=n,i[f+24>>2]=0}}while(0);return R=t,0|(w=l+8|0)}d=h}else d=h;else d=-1}while(0);if((r=0|i[5743])>>>0>=d>>>0)return n=r-d|0,e=0|i[5746],n>>>0>15?(w=e+d|0,i[5746]=w,i[5743]=n,i[w+4>>2]=1|n,i[e+r>>2]=n,i[e+4>>2]=3|d):(i[5743]=0,i[5746]=0,i[e+4>>2]=3|r,i[(w=e+r+4|0)>>2]=1|i[w>>2]),R=t,0|(w=e+8|0);if((u=0|i[5744])>>>0>d>>>0)return b=u-d|0,i[5744]=b,_=(w=0|i[5747])+d|0,i[5747]=_,i[_+4>>2]=1|b,i[w+4>>2]=3|d,R=t,0|(w=w+8|0);if(0|i[5859]?e=0|i[5861]:(i[5861]=4096,i[5860]=4096,i[5862]=-1,i[5863]=-1,i[5864]=0,i[5852]=0,i[5859]=-16&p^1431655768,e=4096),l=d+48|0,(h=(s=e+(c=d+47|0)|0)&(a=0-e|0))>>>0<=d>>>0)return R=t,0|(w=0);if(0|(e=0|i[5851])&&(p=(f=0|i[5849])+h|0)>>>0<=f>>>0|p>>>0>e>>>0)return R=t,0|(w=0);e:do{if(4&i[5852])n=0,A=143;else{r=0|i[5747];t:do{if(r){for(o=23412;!((p=0|i[o>>2])>>>0<=r>>>0&&(p+(0|i[o+4>>2])|0)>>>0>r>>>0);){if(!(e=0|i[o+8>>2])){A=128;break t}o=e}if((n=s-u&a)>>>0<2147483647)if((0|(e=0|Lt(0|n)))==((0|i[o>>2])+(0|i[o+4>>2])|0)){if(-1!=(0|e)){u=n,s=e,A=145;break e}}else o=e,A=136;else n=0}else A=128}while(0);do{if(128==(0|A))if(-1!=(0|(r=0|Lt(0)))&&(n=r,g=(n=(0==((g=(m=0|i[5860])+-1|0)&n|0)?0:(g+n&0-m)-n|0)+h|0)+(m=0|i[5849])|0,n>>>0>d>>>0&n>>>0<2147483647)){if(0|(p=0|i[5851])&&g>>>0<=m>>>0|g>>>0>p>>>0){n=0;break}if((0|(e=0|Lt(0|n)))==(0|r)){u=n,s=r,A=145;break e}o=e,A=136}else n=0}while(0);do{if(136==(0|A)){if(r=0-n|0,!(l>>>0>n>>>0&n>>>0<2147483647&-1!=(0|o))){if(-1==(0|o)){n=0;break}u=n,s=o,A=145;break e}if((e=c-n+(e=0|i[5861])&0-e)>>>0>=2147483647){u=n,s=o,A=145;break e}if(-1==(0|Lt(0|e))){Lt(0|r),n=0;break}u=e+n|0,s=o,A=145;break e}}while(0);i[5852]=4|i[5852],A=143}}while(0);if(143==(0|A)&&h>>>0<2147483647&&!(-1==(0|(b=0|Lt(0|h)))|1^(y=(v=(g=0|Lt(0))-b|0)>>>0>(d+40|0)>>>0)|b>>>0<g>>>0&-1!=(0|b)&-1!=(0|g)^1)&&(u=y?v:n,s=b,A=145),145==(0|A)){n=(0|i[5849])+u|0,i[5849]=n,n>>>0>(0|i[5850])>>>0&&(i[5850]=n),c=0|i[5747];e:do{if(c){for(n=23412;;){if((0|s)==((e=0|i[n>>2])+(r=0|i[n+4>>2])|0)){A=154;break}if(!(o=0|i[n+8>>2]))break;n=o}if(154==(0|A)&&(_=n+4|0,0==(8&i[n+12>>2]|0))&&s>>>0>c>>>0&e>>>0<=c>>>0){i[_>>2]=r+u,_=c+(b=0==(7&(b=c+8|0)|0)?0:0-b&7)|0,b=(w=(0|i[5744])+u|0)-b|0,i[5747]=_,i[5744]=b,i[_+4>>2]=1|b,i[c+w+4>>2]=40,i[5748]=i[5863];break}for(s>>>0<(0|i[5745])>>>0&&(i[5745]=s),r=s+u|0,n=23412;;){if((0|i[n>>2])==(0|r)){A=162;break}if(!(e=0|i[n+8>>2]))break;n=e}if(162==(0|A)&&0==(8&i[n+12>>2]|0)){i[n>>2]=s,i[(f=n+4|0)>>2]=(0|i[f>>2])+u,h=(f=s+(0==(7&(f=s+8|0)|0)?0:0-f&7)|0)+d|0,l=(n=r+(0==(7&(n=r+8|0)|0)?0:0-n&7)|0)-f-d|0,i[f+4>>2]=3|d;t:do{if((0|c)==(0|n))w=(0|i[5744])+l|0,i[5744]=w,i[5747]=h,i[h+4>>2]=1|w;else{if((0|i[5746])==(0|n)){w=(0|i[5743])+l|0,i[5743]=w,i[5746]=h,i[h+4>>2]=1|w,i[h+w>>2]=w;break}if(1==(3&(e=0|i[n+4>>2])|0)){u=-8&e,o=e>>>3;n:do{if(e>>>0<256){if(e=0|i[n+8>>2],(0|(r=0|i[n+12>>2]))==(0|e)){i[5741]=i[5741]&~(1<<o);break}i[e+12>>2]=r,i[r+8>>2]=e;break}s=0|i[n+24>>2],e=0|i[n+12>>2];do{if((0|e)==(0|n)){if(e=0|i[(o=(r=n+16|0)+4|0)>>2])r=o;else if(!(e=0|i[r>>2])){e=0;break}for(;;)if(o=0|i[(a=e+20|0)>>2])e=o,r=a;else{if(!(o=0|i[(a=e+16|0)>>2]))break;e=o,r=a}i[r>>2]=0}else w=0|i[n+8>>2],i[w+12>>2]=e,i[e+8>>2]=w}while(0);if(!s)break;o=23268+((r=0|i[n+28>>2])<<2)|0;do{if((0|i[o>>2])==(0|n)){if(i[o>>2]=e,0|e)break;i[5742]=i[5742]&~(1<<r);break n}if(i[((0|i[(w=s+16|0)>>2])==(0|n)?w:s+20|0)>>2]=e,!e)break n}while(0);if(i[e+24>>2]=s,0|(o=0|i[(r=n+16|0)>>2])&&(i[e+16>>2]=o,i[o+24>>2]=e),!(r=0|i[r+4>>2]))break;i[e+20>>2]=r,i[r+24>>2]=e}while(0);n=n+u|0,a=u+l|0}else a=l;if(i[(n=n+4|0)>>2]=-2&i[n>>2],i[h+4>>2]=1|a,i[h+a>>2]=a,n=a>>>3,a>>>0<256){r=23004+(n<<1<<2)|0,(e=0|i[5741])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5741]=e|n,n=r,e=r+8|0),i[e>>2]=h,i[n+12>>2]=h,i[h+8>>2]=n,i[h+12>>2]=r;break}n=a>>>8;do{if(n){if(a>>>0>16777215){o=31;break}o=a>>>((o=14-((b=((w=n<<(_=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|_|(o=((w<<=b)+245760|0)>>>16&2))+(w<<o>>>15)|0)+7|0)&1|o<<1}else o=0}while(0);if(n=23268+(o<<2)|0,i[h+28>>2]=o,i[(e=h+16|0)+4>>2]=0,i[e>>2]=0,!((e=0|i[5742])&(r=1<<o))){i[5742]=e|r,i[n>>2]=h,i[h+24>>2]=n,i[h+12>>2]=h,i[h+8>>2]=h;break}n=0|i[n>>2];n:do{if((-8&i[n+4>>2]|0)!=(0|a)){for(o=a<<(31==(0|o)?0:25-(o>>>1)|0);e=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|a)){n=e;break n}o<<=1,n=e}i[r>>2]=h,i[h+24>>2]=n,i[h+12>>2]=h,i[h+8>>2]=h;break t}}while(0);w=0|i[(_=n+8|0)>>2],i[w+12>>2]=h,i[_>>2]=h,i[h+8>>2]=w,i[h+12>>2]=n,i[h+24>>2]=0}}while(0);return R=t,0|(w=f+8|0)}for(n=23412;!((e=0|i[n>>2])>>>0<=c>>>0&&(w=e+(0|i[n+4>>2])|0)>>>0>c>>>0);)n=0|i[n+8>>2];n=(e=(e=(a=w+-47|0)+(0==(7&(e=a+8|0)|0)?0:0-e&7)|0)>>>0<(a=c+16|0)>>>0?c:e)+8|0,_=s+(b=0==(7&(b=s+8|0)|0)?0:0-b&7)|0,b=(r=u+-40|0)-b|0,i[5747]=_,i[5744]=b,i[_+4>>2]=1|b,i[s+r+4>>2]=40,i[5748]=i[5863],i[(r=e+4|0)>>2]=27,i[n>>2]=i[5853],i[n+4>>2]=i[5854],i[n+8>>2]=i[5855],i[n+12>>2]=i[5856],i[5853]=s,i[5854]=u,i[5856]=0,i[5855]=n,n=e+24|0;do{_=n,i[(n=n+4|0)>>2]=7}while((_+8|0)>>>0<w>>>0);if((0|e)!=(0|c)){if(s=e-c|0,i[r>>2]=-2&i[r>>2],i[c+4>>2]=1|s,i[e>>2]=s,n=s>>>3,s>>>0<256){r=23004+(n<<1<<2)|0,(e=0|i[5741])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5741]=e|n,n=r,e=r+8|0),i[e>>2]=c,i[n+12>>2]=c,i[c+8>>2]=n,i[c+12>>2]=r;break}if(r=23268+((o=(n=s>>>8)?s>>>0>16777215?31:s>>>((o=14-((b=((w=n<<(_=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|_|(o=((w<<=b)+245760|0)>>>16&2))+(w<<o>>>15)|0)+7|0)&1|o<<1:0)<<2)|0,i[c+28>>2]=o,i[c+20>>2]=0,i[a>>2]=0,!((n=0|i[5742])&(e=1<<o))){i[5742]=n|e,i[r>>2]=c,i[c+24>>2]=r,i[c+12>>2]=c,i[c+8>>2]=c;break}n=0|i[r>>2];t:do{if((-8&i[n+4>>2]|0)!=(0|s)){for(o=s<<(31==(0|o)?0:25-(o>>>1)|0);e=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|s)){n=e;break t}o<<=1,n=e}i[r>>2]=c,i[c+24>>2]=n,i[c+12>>2]=c,i[c+8>>2]=c;break e}}while(0);w=0|i[(_=n+8|0)>>2],i[w+12>>2]=c,i[_>>2]=c,i[c+8>>2]=w,i[c+12>>2]=n,i[c+24>>2]=0}}else 0==(0|(w=0|i[5745]))|s>>>0<w>>>0&&(i[5745]=s),i[5853]=s,i[5854]=u,i[5856]=0,i[5750]=i[5859],i[5749]=-1,i[5754]=23004,i[5753]=23004,i[5756]=23012,i[5755]=23012,i[5758]=23020,i[5757]=23020,i[5760]=23028,i[5759]=23028,i[5762]=23036,i[5761]=23036,i[5764]=23044,i[5763]=23044,i[5766]=23052,i[5765]=23052,i[5768]=23060,i[5767]=23060,i[5770]=23068,i[5769]=23068,i[5772]=23076,i[5771]=23076,i[5774]=23084,i[5773]=23084,i[5776]=23092,i[5775]=23092,i[5778]=23100,i[5777]=23100,i[5780]=23108,i[5779]=23108,i[5782]=23116,i[5781]=23116,i[5784]=23124,i[5783]=23124,i[5786]=23132,i[5785]=23132,i[5788]=23140,i[5787]=23140,i[5790]=23148,i[5789]=23148,i[5792]=23156,i[5791]=23156,i[5794]=23164,i[5793]=23164,i[5796]=23172,i[5795]=23172,i[5798]=23180,i[5797]=23180,i[5800]=23188,i[5799]=23188,i[5802]=23196,i[5801]=23196,i[5804]=23204,i[5803]=23204,i[5806]=23212,i[5805]=23212,i[5808]=23220,i[5807]=23220,i[5810]=23228,i[5809]=23228,i[5812]=23236,i[5811]=23236,i[5814]=23244,i[5813]=23244,i[5816]=23252,i[5815]=23252,_=s+(b=0==(7&(b=s+8|0)|0)?0:0-b&7)|0,b=(w=u+-40|0)-b|0,i[5747]=_,i[5744]=b,i[_+4>>2]=1|b,i[s+w+4>>2]=40,i[5748]=i[5863]}while(0);if((n=0|i[5744])>>>0>d>>>0)return b=n-d|0,i[5744]=b,_=(w=0|i[5747])+d|0,i[5747]=_,i[_+4>>2]=1|b,i[w+4>>2]=3|d,R=t,0|(w=w+8|0)}return i[(w=22960)>>2]=12,R=t,0|(w=0)}function mt(e){var t=0,n=0,r=0,o=0,a=0,s=0,u=0,l=0;if(e|=0){n=e+-8|0,o=0|i[5745],l=n+(t=-8&(e=0|i[e+-4>>2]))|0;do{if(1&e)u=n,s=n;else{if(r=0|i[n>>2],!(3&e))return;if(a=r+t|0,(s=n+(0-r)|0)>>>0<o>>>0)return;if((0|i[5746])==(0|s)){if(3!=(3&(t=0|i[(e=l+4|0)>>2])|0)){u=s,t=a;break}return i[5743]=a,i[e>>2]=-2&t,i[s+4>>2]=1|a,void(i[s+a>>2]=a)}if(n=r>>>3,r>>>0<256){if(e=0|i[s+8>>2],(0|(t=0|i[s+12>>2]))==(0|e)){i[5741]=i[5741]&~(1<<n),u=s,t=a;break}i[e+12>>2]=t,i[t+8>>2]=e,u=s,t=a;break}o=0|i[s+24>>2],e=0|i[s+12>>2];do{if((0|e)==(0|s)){if(e=0|i[(n=(t=s+16|0)+4|0)>>2])t=n;else if(!(e=0|i[t>>2])){e=0;break}for(;;)if(n=0|i[(r=e+20|0)>>2])e=n,t=r;else{if(!(n=0|i[(r=e+16|0)>>2]))break;e=n,t=r}i[t>>2]=0}else u=0|i[s+8>>2],i[u+12>>2]=e,i[e+8>>2]=u}while(0);if(o){if(t=0|i[s+28>>2],(0|i[(n=23268+(t<<2)|0)>>2])==(0|s)){if(i[n>>2]=e,!e){i[5742]=i[5742]&~(1<<t),u=s,t=a;break}}else if(i[((0|i[(u=o+16|0)>>2])==(0|s)?u:o+20|0)>>2]=e,!e){u=s,t=a;break}i[e+24>>2]=o,0|(n=0|i[(t=s+16|0)>>2])&&(i[e+16>>2]=n,i[n+24>>2]=e),(t=0|i[t+4>>2])?(i[e+20>>2]=t,i[t+24>>2]=e,u=s,t=a):(u=s,t=a)}else u=s,t=a}}while(0);if(!(s>>>0>=l>>>0)&&1&(r=0|i[(e=l+4|0)>>2])){if(2&r)i[e>>2]=-2&r,i[u+4>>2]=1|t,i[s+t>>2]=t,o=t;else{if((0|i[5747])==(0|l)){if(l=(0|i[5744])+t|0,i[5744]=l,i[5747]=u,i[u+4>>2]=1|l,(0|u)!=(0|i[5746]))return;return i[5746]=0,void(i[5743]=0)}if((0|i[5746])==(0|l))return l=(0|i[5743])+t|0,i[5743]=l,i[5746]=s,i[u+4>>2]=1|l,void(i[s+l>>2]=l);o=(-8&r)+t|0,n=r>>>3;do{if(r>>>0<256){if(t=0|i[l+8>>2],(0|(e=0|i[l+12>>2]))==(0|t)){i[5741]=i[5741]&~(1<<n);break}i[t+12>>2]=e,i[e+8>>2]=t;break}a=0|i[l+24>>2],e=0|i[l+12>>2];do{if((0|e)==(0|l)){if(e=0|i[(n=(t=l+16|0)+4|0)>>2])t=n;else if(!(e=0|i[t>>2])){n=0;break}for(;;)if(n=0|i[(r=e+20|0)>>2])e=n,t=r;else{if(!(n=0|i[(r=e+16|0)>>2]))break;e=n,t=r}i[t>>2]=0,n=e}else n=0|i[l+8>>2],i[n+12>>2]=e,i[e+8>>2]=n,n=e}while(0);if(0|a){if(e=0|i[l+28>>2],(0|i[(t=23268+(e<<2)|0)>>2])==(0|l)){if(i[t>>2]=n,!n){i[5742]=i[5742]&~(1<<e);break}}else if(i[((0|i[(r=a+16|0)>>2])==(0|l)?r:a+20|0)>>2]=n,!n)break;i[n+24>>2]=a,0|(t=0|i[(e=l+16|0)>>2])&&(i[n+16>>2]=t,i[t+24>>2]=n),0|(e=0|i[e+4>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}while(0);if(i[u+4>>2]=1|o,i[s+o>>2]=o,(0|u)==(0|i[5746]))return void(i[5743]=o)}if(e=o>>>3,o>>>0<256)return n=23004+(e<<1<<2)|0,(t=0|i[5741])&(e=1<<e)?e=0|i[(t=n+8|0)>>2]:(i[5741]=t|e,e=n,t=n+8|0),i[t>>2]=u,i[e+12>>2]=u,i[u+8>>2]=e,void(i[u+12>>2]=n);e=23268+((r=(e=o>>>8)?o>>>0>16777215?31:o>>>((r=14-((a=((l=e<<(s=(e+1048320|0)>>>16&8))+520192|0)>>>16&4)|s|(r=((l<<=a)+245760|0)>>>16&2))+(l<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[u+28>>2]=r,i[u+20>>2]=0,i[u+16>>2]=0,t=0|i[5742],n=1<<r;e:do{if(t&n){e=0|i[e>>2];t:do{if((-8&i[e+4>>2]|0)!=(0|o)){for(r=o<<(31==(0|r)?0:25-(r>>>1)|0);t=0|i[(n=e+16+(r>>>31<<2)|0)>>2];){if((-8&i[t+4>>2]|0)==(0|o)){e=t;break t}r<<=1,e=t}i[n>>2]=u,i[u+24>>2]=e,i[u+12>>2]=u,i[u+8>>2]=u;break e}}while(0);l=0|i[(s=e+8|0)>>2],i[l+12>>2]=u,i[s>>2]=u,i[u+8>>2]=l,i[u+12>>2]=e,i[u+24>>2]=0}else i[5742]=t|n,i[e>>2]=u,i[u+24>>2]=e,i[u+12>>2]=u,i[u+8>>2]=u}while(0);if(l=(0|i[5749])-1|0,i[5749]=l,!(0|l)){for(e=23420;e=0|i[e>>2];)e=e+8|0;i[5749]=-1}}}}function gt(e,t){t|=0;var n=0;return(e|=0)?(n=0|y(t,e),(t|e)>>>0>65535&&(n=(0|(n>>>0)/(e>>>0))==(0|t)?n:-1)):n=0,(e=0|pt(n))&&3&i[e+-4>>2]?(Tt(0|e,0,0|n),0|e):0|e}function At(e,t,n,r){return 0|(w(0|(r=(t|=0)-(r|=0)-((n|=0)>>>0>(e|=0)>>>0|0)>>>0)),e-n>>>0|0)}function vt(e){return 0|((e|=0)?31-(0|_(e^e-1))|0:32)}function yt(e,t,n,r,o){o|=0;var a=0,s=0,u=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0;if(h=e|=0,s=n|=0,u=d=r|=0,!(c=l=t|=0))return a=0!=(0|o),u?a?(i[o>>2]=0|e,i[o+4>>2]=0&t,o=0,0|(w(0|(d=0)),o)):(o=0,0|(w(0|(d=0)),o)):(a&&(i[o>>2]=(h>>>0)%(s>>>0),i[o+4>>2]=0),o=(h>>>0)/(s>>>0)>>>0,0|(w(0|(d=0)),o));a=0==(0|u);do{if(s){if(!a){if((a=(0|_(0|u))-(0|_(0|c))|0)>>>0<=31){s=f=a+1|0,e=h>>>(f>>>0)&(t=a-31>>31)|c<<(u=31-a|0),t&=c>>>(f>>>0),a=0,u=h<<u;break}return o?(i[o>>2]=0|e,i[o+4>>2]=l|0&t,o=0,0|(w(0|(d=0)),o)):(o=0,0|(w(0|(d=0)),o))}if((a=s-1|0)&s|0){s=u=33+(0|_(0|s))-(0|_(0|c))|0,e=(f=32-u|0)-1>>31&c>>>((p=u-32|0)>>>0)|(c<<f|h>>>(u>>>0))&(t=p>>31),t&=c>>>(u>>>0),a=h<<(m=64-u|0)&(l=f>>31),u=(c<<m|h>>>(p>>>0))&l|h<<f&u-33>>31;break}return 0|o&&(i[o>>2]=a&h,i[o+4>>2]=0),1==(0|s)?(m=0|e,0|(w(0|(p=l|0&t)),m)):(p=c>>>((m=0|vt(0|s))>>>0)|0,m=c<<32-m|h>>>(m>>>0)|0,0|(w(0|p),m))}if(a)return 0|o&&(i[o>>2]=(c>>>0)%(s>>>0),i[o+4>>2]=0),m=(c>>>0)/(s>>>0)>>>0,0|(w(0|(p=0)),m);if(!h)return 0|o&&(i[o>>2]=0,i[o+4>>2]=(c>>>0)%(u>>>0)),m=(c>>>0)/(u>>>0)>>>0,0|(w(0|(p=0)),m);if(!((a=u-1|0)&u))return 0|o&&(i[o>>2]=0|e,i[o+4>>2]=a&c|0&t),p=0,m=c>>>((0|vt(0|u))>>>0),0|(w(0|p),m);if((a=(0|_(0|u))-(0|_(0|c))|0)>>>0<=30){s=t=a+1|0,e=c<<(u=31-a|0)|h>>>(t>>>0),t=c>>>(t>>>0),a=0,u=h<<u;break}return o?(i[o>>2]=0|e,i[o+4>>2]=l|0&t,m=0,0|(w(0|(p=0)),m)):(m=0,0|(w(0|(p=0)),m))}while(0);if(s){c=0|function(e,t,n,r){return 0|(w((t|=0)+(r|=0)+((n=(e|=0)+(n|=0)>>>0)>>>0<e>>>0|0)>>>0|0),0|n)}(0|(f=0|n),0|(h=d|0&r),-1,-1),n=0|E(),l=u,u=0;do{r=l,l=a>>>31|l<<1,a=u|a<<1,At(0|c,0|n,0|(r=e<<1|r>>>31|0),0|(d=e>>>31|t<<1|0)),u=1&(p=(m=0|E())>>31|((0|m)<0?-1:0)<<1),e=0|At(0|r,0|d,p&f|0,(((0|m)<0?-1:0)>>31|((0|m)<0?-1:0)<<1)&h|0),t=0|E(),s=s-1|0}while(0!=(0|s));c=l,l=0}else c=u,l=0,u=0;return s=0,0|o&&(i[o>>2]=e,i[o+4>>2]=t),m=-2&(a<<1|0)|u,0|(w(0|(p=(0|a)>>>31|(c|s)<<1|0&(s<<1|a>>>31)|l)),m)}function bt(e,t,n,r){var o,a;return a=R,R=R+16|0,yt(e|=0,t|=0,n|=0,r|=0,o=0|a),R=a,0|(w(0|i[o+4>>2]),0|i[o>>2])}function _t(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(w(t>>>n|0),e>>>n|(t&(1<<n)-1)<<32-n):(w(0),t>>>n-32|0)}function wt(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(w(t<<n|(e&(1<<n)-1<<32-n)>>>32-n|0),e<<n):(w(e<<n-32|0),0)}function Et(e,t){return t=+t,(e=+e)!=e?+t:t!=t?+e:+b(+e,+t)}function xt(e){return(e=+e)>=0?+s(e+.5):+v(e-.5)}function St(e,t,n){e|=0,t|=0;var o,a,s=0;if((0|(n|=0))>=8192)return M(0|e,0|t,0|n),0|e;if(a=0|e,o=e+n|0,(3&e)==(3&t)){for(;3&e;){if(!n)return 0|a;r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0,n=n-1|0}for(s=(n=-4&o|0)-64|0;(0|e)<=(0|s);)i[e>>2]=i[t>>2],i[e+4>>2]=i[t+4>>2],i[e+8>>2]=i[t+8>>2],i[e+12>>2]=i[t+12>>2],i[e+16>>2]=i[t+16>>2],i[e+20>>2]=i[t+20>>2],i[e+24>>2]=i[t+24>>2],i[e+28>>2]=i[t+28>>2],i[e+32>>2]=i[t+32>>2],i[e+36>>2]=i[t+36>>2],i[e+40>>2]=i[t+40>>2],i[e+44>>2]=i[t+44>>2],i[e+48>>2]=i[t+48>>2],i[e+52>>2]=i[t+52>>2],i[e+56>>2]=i[t+56>>2],i[e+60>>2]=i[t+60>>2],e=e+64|0,t=t+64|0;for(;(0|e)<(0|n);)i[e>>2]=i[t>>2],e=e+4|0,t=t+4|0}else for(n=o-4|0;(0|e)<(0|n);)r[e>>0]=0|r[t>>0],r[e+1>>0]=0|r[t+1>>0],r[e+2>>0]=0|r[t+2>>0],r[e+3>>0]=0|r[t+3>>0],e=e+4|0,t=t+4|0;for(;(0|e)<(0|o);)r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0;return 0|a}function Tt(e,t,n){t|=0;var o,a=0,s=0,u=0;if(o=(e|=0)+(n|=0)|0,t&=255,(0|n)>=67){for(;3&e;)r[e>>0]=t,e=e+1|0;for(u=t|t<<8|t<<16|t<<24,s=(a=-4&o|0)-64|0;(0|e)<=(0|s);)i[e>>2]=u,i[e+4>>2]=u,i[e+8>>2]=u,i[e+12>>2]=u,i[e+16>>2]=u,i[e+20>>2]=u,i[e+24>>2]=u,i[e+28>>2]=u,i[e+32>>2]=u,i[e+36>>2]=u,i[e+40>>2]=u,i[e+44>>2]=u,i[e+48>>2]=u,i[e+52>>2]=u,i[e+56>>2]=u,i[e+60>>2]=u,e=e+64|0;for(;(0|e)<(0|a);)i[e>>2]=u,e=e+4|0}for(;(0|e)<(0|o);)r[e>>0]=t,e=e+1|0;return o-n|0}function Mt(e){return(e=+e)>=0?+s(e+.5):+v(e-.5)}function Lt(e){e|=0;var t,n,r;return r=0|T(),(0|e)>0&(0|(t=(n=0|i[a>>2])+e|0))<(0|n)|(0|t)<0?(C(0|t),S(12),-1):(0|t)>(0|r)&&!(0|L(0|t))?(S(12),-1):(i[a>>2]=t,0|n)}return{___uremdi3:bt,_bitshift64Lshr:_t,_bitshift64Shl:wt,_calloc:gt,_compact:function(e,t,n){t|=0;var r,o=0,a=0,s=0,u=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0,A=0,v=0,y=0,b=0,_=0,w=0,x=0,S=0,T=0;if(!(n|=0))return 0|(S=0);if(o=0|i[(a=e|=0)>>2],!0&0==(15728640&(a=0|i[a+4>>2])|0)){if((0|n)<=0)return 0|(S=0);if(i[(S=t)>>2]=o,i[S+4>>2]=a,1==(0|n))return 0|(S=0);o=1;do{x=0|i[(w=e+(o<<3)|0)+4>>2],i[(S=t+(o<<3)|0)>>2]=i[w>>2],i[S+4>>2]=x,o=o+1|0}while((0|o)!=(0|n));return 0|(o=0)}if(!(x=0|pt(w=n<<3)))return 0|(S=-3);if(St(0|x,0|e,0|w),!(r=0|gt(n,8)))return mt(x),0|(S=-3);o=n;e:for(;;){b=0|_t(0|(f=0|i[(u=x)>>2]),0|(u=0|i[u+4>>2]),52),E(),_=(b&=15)+-1|0,y=(0|o)>0;t:do{if(y){if(v=((0|o)<0)<<31>>31,g=0|wt(0|_,0,52),A=0|E(),_>>>0>15)for(a=0,e=f,n=u;;){if(!(0==(0|e)&0==(0|n))){if(s=0|_t(0|e,0|n,52),E(),l=(0|(s&=15))<(0|_),s=(0|s)==(0|_),n=0|bt(0|(h=l?0:s?e:0),0|(e=l?0:s?n:0),0|o,0|v),E(),0==(0|(c=0|i[(l=s=r+(n<<3)|0)>>2]))&0==(0|(l=0|i[l+4>>2])))n=h;else for(g=0,m=n,p=l,n=h;;){if((0|g)>(0|o)){S=41;break e}if((0|c)==(0|n)&(-117440513&p|0)==(0|e)){h=0|_t(0|c,0|p,56),E(),d=(h&=7)+1|0,A=0|_t(0|c,0|p,45),E();n:do{if(0|D(127&A)){if(c=0|_t(0|c,0|p,52),E(),!(c&=15)){l=6;break}for(l=1;;){if(!(0==((A=0|wt(7,0,3*(15-l|0)|0))&n|0)&0==((0|E())&e|0))){l=7;break n}if(!(l>>>0<c>>>0)){l=6;break}l=l+1|0}}else l=7}while(0);if((h+2|0)>>>0>l>>>0){S=51;break e}A=0|wt(0|d,0,56),e=0|E()|-117440513&e,i[(l=s)>>2]=0,i[l+4>>2]=0,l=m,n|=A}else l=(m+1|0)%(0|o)|0;if(0==(0|(c=0|i[(p=s=r+(l<<3)|0)>>2]))&0==(0|(p=0|i[p+4>>2])))break;g=g+1|0,m=l}i[(A=s)>>2]=n,i[A+4>>2]=e}if((0|(a=a+1|0))>=(0|o))break t;e=0|i[(n=x+(a<<3)|0)>>2],n=0|i[n+4>>2]}for(a=0,e=f,n=u;;){if(!(0==(0|e)&0==(0|n))){if(l=0|_t(0|e,0|n,52),E(),(0|(l&=15))>=(0|_)){if((0|l)!=(0|_)&&(e|=g,n=-15728641&n|A,l>>>0>=b>>>0)){s=_;do{m=0|wt(7,0,3*(14-s|0)|0),s=s+1|0,e|=m,n=0|E()|n}while(s>>>0<l>>>0)}}else e=0,n=0;if(l=0|bt(0|e,0|n,0|o,0|v),E(),!(0==(0|(h=0|i[(c=s=r+(l<<3)|0)>>2]))&0==(0|(c=0|i[c+4>>2]))))for(m=0;;){if((0|m)>(0|o)){S=41;break e}if((0|h)==(0|e)&(-117440513&c|0)==(0|n)){d=0|_t(0|h,0|c,56),E(),p=(d&=7)+1|0,T=0|_t(0|h,0|c,45),E();n:do{if(0|D(127&T)){if(h=0|_t(0|h,0|c,52),E(),!(h&=15)){c=6;break}for(c=1;;){if(!(0==((T=0|wt(7,0,3*(15-c|0)|0))&e|0)&0==((0|E())&n|0))){c=7;break n}if(!(c>>>0<h>>>0)){c=6;break}c=c+1|0}}else c=7}while(0);if((d+2|0)>>>0>c>>>0){S=51;break e}T=0|wt(0|p,0,56),n=0|E()|-117440513&n,i[(p=s)>>2]=0,i[p+4>>2]=0,e|=T}else l=(l+1|0)%(0|o)|0;if(0==(0|(h=0|i[(c=s=r+(l<<3)|0)>>2]))&0==(0|(c=0|i[c+4>>2])))break;m=m+1|0}i[(T=s)>>2]=e,i[T+4>>2]=n}if((0|(a=a+1|0))>=(0|o))break t;e=0|i[(n=x+(a<<3)|0)>>2],n=0|i[n+4>>2]}}}while(0);if((o+5|0)>>>0<11){S=99;break}if(!(A=0|gt((0|o)/6|0,8))){S=58;break}t:do{if(y){m=0,p=0;do{if(!(0==(0|(a=0|i[(e=l=r+(m<<3)|0)>>2]))&0==(0|(e=0|i[e+4>>2])))){c=0|_t(0|a,0|e,56),E(),n=(c&=7)+1|0,h=-117440513&e,T=0|_t(0|a,0|e,45),E();n:do{if(0|D(127&T)){if(d=0|_t(0|a,0|e,52),E(),0|(d&=15))for(s=1;;){if(!(0==(a&(T=0|wt(7,0,3*(15-s|0)|0))|0)&0==(h&(0|E())|0)))break n;if(!(s>>>0<d>>>0))break;s=s+1|0}a|=e=0|wt(0|n,0,56),e=0|E()|h,i[(n=l)>>2]=a,i[n+4>>2]=e,n=c+2|0}}while(0);7==(0|n)&&(i[(T=A+(p<<3)|0)>>2]=a,i[T+4>>2]=-117440513&e,p=p+1|0)}m=m+1|0}while((0|m)!=(0|o));if(y){if(g=((0|o)<0)<<31>>31,d=0|wt(0|_,0,52),m=0|E(),_>>>0>15)for(e=0,a=0;;){do{if(!(0==(0|f)&0==(0|u))){for(c=0|_t(0|f,0|u,52),E(),s=(0|(c&=15))<(0|_),c=(0|c)==(0|_),s=0|bt(0|(l=s?0:c?f:0),0|(c=s?0:c?u:0),0|o,0|g),E(),n=0;;){if((0|n)>(0|o)){S=98;break e}if((-117440513&(h=0|i[(T=r+(s<<3)|0)+4>>2])|0)==(0|c)&&(0|i[T>>2])==(0|l)){S=70;break}if((0|i[(T=r+((s=(s+1|0)%(0|o)|0)<<3)|0)>>2])==(0|l)&&(0|i[T+4>>2])==(0|c))break;n=n+1|0}if(70==(0|S)&&(S=0,!0&100663296==(117440512&h|0)))break;i[(T=t+(a<<3)|0)>>2]=f,i[T+4>>2]=u,a=a+1|0}}while(0);if((0|(e=e+1|0))>=(0|o)){o=p;break t}f=0|i[(u=x+(e<<3)|0)>>2],u=0|i[u+4>>2]}for(e=0,a=0;;){do{if(!(0==(0|f)&0==(0|u))){if(c=0|_t(0|f,0|u,52),E(),(0|(c&=15))>=(0|_))if((0|c)!=(0|_))if(n=f|d,s=-15728641&u|m,c>>>0<b>>>0)c=s;else{l=_;do{T=0|wt(7,0,3*(14-l|0)|0),l=l+1|0,n|=T,s=0|E()|s}while(l>>>0<c>>>0);c=s}else n=f,c=u;else n=0,c=0;for(l=0|bt(0|n,0|c,0|o,0|g),E(),s=0;;){if((0|s)>(0|o)){S=98;break e}if((-117440513&(h=0|i[(T=r+(l<<3)|0)+4>>2])|0)==(0|c)&&(0|i[T>>2])==(0|n)){S=93;break}if((0|i[(T=r+((l=(l+1|0)%(0|o)|0)<<3)|0)>>2])==(0|n)&&(0|i[T+4>>2])==(0|c))break;s=s+1|0}if(93==(0|S)&&(S=0,!0&100663296==(117440512&h|0)))break;i[(T=t+(a<<3)|0)>>2]=f,i[T+4>>2]=u,a=a+1|0}}while(0);if((0|(e=e+1|0))>=(0|o)){o=p;break t}f=0|i[(u=x+(e<<3)|0)>>2],u=0|i[u+4>>2]}}else a=0,o=p}else a=0,o=0}while(0);if(Tt(0|r,0,0|w),St(0|x,0|A,o<<3|0),mt(A),!o)break;t=t+(a<<3)|0}return 41==(0|S)?(mt(x),mt(r),0|(T=-1)):51==(0|S)?(mt(x),mt(r),0|(T=-2)):58==(0|S)?(mt(x),mt(r),0|(T=-3)):98==(0|S)?(mt(A),mt(x),mt(r),0|(T=-1)):(99==(0|S)&&St(0|t,0|x,o<<3|0),mt(x),mt(r),0|(T=0))},_destroyLinkedPolygon:function(e){var t=0,n=0,r=0,o=0;if(e|=0)for(r=1;;){if(0|(t=0|i[e>>2]))do{if(0|(n=0|i[t>>2]))do{o=n,n=0|i[n+16>>2],mt(o)}while(0!=(0|n));o=t,t=0|i[t+8>>2],mt(o)}while(0!=(0|t));if(t=e,e=0|i[e+8>>2],r||mt(t),!e)break;r=0}},_edgeLengthKm:function(e){return+ +o[20752+((e|=0)<<3)>>3]},_edgeLengthM:function(e){return+ +o[20880+((e|=0)<<3)>>3]},_emscripten_replace_memory:function(e){return r=new Int8Array(e),new Uint8Array(e),i=new Int32Array(e),new Float32Array(e),o=new Float64Array(e),n=e,!0},_experimentalH3ToLocalIj:function(e,t,n,r,i){var o,a;return i|=0,a=R,R=R+16|0,(e=0|Xe(e|=0,t|=0,n|=0,r|=0,o=a))||(de(o,i),e=0),R=a,0|e},_experimentalLocalIjToH3:function(e,t,n,r){var i,o;return e|=0,t|=0,r|=0,i=R,R=R+16|0,pe(n|=0,o=i),r=0|Je(e,t,o,r),R=i,0|r},_free:mt,_geoToH3:Be,_getDestinationH3IndexFromUnidirectionalEdge:function(e,t){e|=0;var n,r,o=0;return n=R,R=R+16|0,o=n,!0&268435456==(2013265920&(t|=0)|0)?(r=0|_t(0|e,0|t,56),E(),i[o>>2]=0,o=0|k(e,-2130706433&t|134217728,7&r,o),t=0|E(),w(0|t),R=n,0|o):(o=0,w(0|(t=0)),R=n,0|o)},_getH3IndexesFromUnidirectionalEdge:function(e,t,n){e|=0;var r,o,a,s,u=0;a=R,R=R+16|0,r=a,s=!0&268435456==(2013265920&(t|=0)|0),o=-2130706433&t|134217728,i[(u=n|=0)>>2]=s?e:0,i[u+4>>2]=s?o:0,s?(t=0|_t(0|e,0|t,56),E(),i[r>>2]=0,e=0|k(e,o,7&t,r),t=0|E()):(e=0,t=0),i[(u=n+8|0)>>2]=e,i[u+4>>2]=t,R=a},_getH3UnidirectionalEdge:function(e,t,n,r){var o,a,s=0,u=0;if(a=R,R=R+16|0,o=a,!(0|ze(e|=0,t|=0,n|=0,r|=0)))return s=0,w(0|(e=0)),R=a,0|s;if(s=-2130706433&t,i[o>>2]=0,(0|(u=0|k(e,t,1,o)))==(0|n)&(0|E())==(0|r))t=0,n=16777216;else if(i[o>>2]=0,(0|(u=0|k(e,t,2,o)))==(0|n)&(0|E())==(0|r))t=0,n=33554432;else if(i[o>>2]=0,(0|(u=0|k(e,t,3,o)))==(0|n)&(0|E())==(0|r))t=0,n=50331648;else if(i[o>>2]=0,(0|(u=0|k(e,t,4,o)))==(0|n)&(0|E())==(0|r))t=0,n=67108864;else if(i[o>>2]=0,(0|(u=0|k(e,t,5,o)))==(0|n)&(0|E())==(0|r))t=0,n=83886080;else{if(i[o>>2]=0,!((0|(u=0|k(e,t,6,o)))==(0|n)&(0|E())==(0|r)))return u=0,w(0|(s=0)),R=a,0|u;t=0,n=100663296}return u=e|t,w(0|(s=s|n|268435456)),R=a,0|u},_getH3UnidirectionalEdgeBoundary:function(e,t,n){e|=0,t|=0,n|=0;var r,o,a=0,s=0,u=0,l=0,c=0,h=0;if(o=R,R=R+368|0,s=o+352|0,c=o+16|0,h=o,Tt(0|(r=o+184|0),0,168),Tt(0|c,0,168),i[h>>2]=0,i[h+4>>2]=0,i[h+8>>2]=0,i[h+12>>2]=0,a=-2130706433&t|134217728,qe((l=!0&268435456==(2013265920&t|0))?e:0,l?a:0,r),l?(t=0|_t(0|e,0|t,56),E(),i[s>>2]=0,e=0|k(e,a,7&t,s),t=0|E()):(e=0,t=0),qe(e,t,c),(0|i[r>>2])<=0)return h=0,i[n>>2]=h,void(R=o);l=r+24|0,e=0,t=0,u=0;do{s=r+8+(u<<4)|0;e:do{if((0|i[c>>2])>0){for(a=0;!(0|Te(s,c+8+(a<<4)|0,1e-6));)if((0|(a=a+1|0))>=(0|i[c>>2]))break e;t:do{if(!u){if((0|i[c>>2])>0){a=0;do{if(0|Te(l,c+8+(a<<4)|0,1e-6))break t;a=a+1|0}while((0|a)<(0|i[c>>2]))}i[h>>2]=i[s>>2],i[h+4>>2]=i[s+4>>2],i[h+8>>2]=i[s+8>>2],i[h+12>>2]=i[s+12>>2],t=1;break e}}while(0);i[(a=n+8+(e<<4)|0)>>2]=i[s>>2],i[a+4>>2]=i[s+4>>2],i[a+8>>2]=i[s+8>>2],i[a+12>>2]=i[s+12>>2],e=e+1|0}}while(0);u=u+1|0}while((0|u)<(0|i[r>>2]));if(!t)return h=e,i[n>>2]=h,void(R=o);i[(c=n+8+(e<<4)|0)>>2]=i[h>>2],i[c+4>>2]=i[h+4>>2],i[c+8>>2]=i[h+8>>2],i[c+12>>2]=i[h+12>>2],h=e+1|0,i[n>>2]=h,R=o},_getH3UnidirectionalEdgesFromHexagon:function(e,t,n){n|=0;var r,o=0;r=0==(0|Ie(e|=0,t|=0)),t&=-2130706433,i[(o=n)>>2]=r?e:0,i[o+4>>2]=r?285212672|t:0,i[(o=n+8|0)>>2]=e,i[o+4>>2]=301989888|t,i[(o=n+16|0)>>2]=e,i[o+4>>2]=318767104|t,i[(o=n+24|0)>>2]=e,i[o+4>>2]=335544320|t,i[(o=n+32|0)>>2]=e,i[o+4>>2]=352321536|t,i[(n=n+40|0)>>2]=e,i[n+4>>2]=369098752|t},_getOriginH3IndexFromUnidirectionalEdge:function(e,t){var n;return e|=0,w(0|((n=!0&268435456==(2013265920&(t|=0)|0))?-2130706433&t|134217728:0)),0|(n?e:0)},_getPentagonIndexes:We,_getRes0Indexes:function(e){e|=0;var t=0,n=0,r=0;t=0;do{wt(0|t,0,45),r=134225919|E(),i[(n=e+(t<<3)|0)>>2]=-1,i[n+4>>2]=r,t=t+1|0}while(122!=(0|t))},_h3Distance:function(e,t,n,r){var i,o,a;return n|=0,r|=0,a=R,R=R+32|0,o=a,e=0==(0|Xe(e|=0,t|=0,e,t,i=a+12|0))&&0==(0|Xe(e,t,n,r,o))?0|fe(i,o):-1,R=a,0|e},_h3GetBaseCell:function(e,t){return t=0|_t(0|(e|=0),0|(t|=0),45),E(),127&t|0},_h3GetFaces:function e(t,n,r){r|=0;var o,a=0,s=0,u=0,l=0,c=0,h=0,f=0,d=0;o=R,R=R+128|0,f=o+112|0,u=o+96|0,d=o,s=0|_t(0|(t|=0),0|(n|=0),52),E(),c=15&s,i[f>>2]=c,l=0|_t(0|t,0|n,45),E(),l&=127;e:do{if(0|D(l)){if(0|c)for(a=1;;){if(!(0==((h=0|wt(7,0,3*(15-a|0)|0))&t|0)&0==((0|E())&n|0))){s=0;break e}if(!(a>>>0<c>>>0))break;a=a+1|0}if(!(1&s))return h=0|wt(c+1|0,0,52),d=0|E()|-15728641&n,e((h|t)&~(f=0|wt(7,0,3*(14-c|0)|0)),d&~(0|E()),r),void(R=o);s=1}else s=0}while(0);Ge(t,n,u),s?(be(u,f,d),h=5):(xe(u,f,d),h=6);e:do{if(0|D(l))if(c)for(a=1;;){if(!(0==((l=0|wt(7,0,3*(15-a|0)|0))&t|0)&0==((0|E())&n|0))){a=8;break e}if(!(a>>>0<c>>>0)){a=20;break}a=a+1|0}else a=20;else a=8}while(0);if(Tt(0|r,-1,0|a),s){s=0;do{for(we(u=d+(s<<4)|0,0|i[f>>2]),u=0|i[u>>2],a=0;!(-1==(0|(c=0|i[(l=r+(a<<2)|0)>>2]))|(0|c)==(0|u));)a=a+1|0;i[l>>2]=u,s=s+1|0}while((0|s)!=(0|h))}else{s=0;do{for(_e(u=d+(s<<4)|0,0|i[f>>2],0,1),u=0|i[u>>2],a=0;!(-1==(0|(c=0|i[(l=r+(a<<2)|0)>>2]))|(0|c)==(0|u));)a=a+1|0;i[l>>2]=u,s=s+1|0}while((0|s)!=(0|h))}R=o},_h3IndexesAreNeighbors:ze,_h3IsPentagon:Ie,_h3IsResClassIII:function(e,t){return t=0|_t(0|(e|=0),0|(t|=0),52),E(),1&t|0},_h3IsValid:Ce,_h3Line:function(e,t,n,r,o){n|=0,r|=0,o|=0;var a,s=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0,A=0,v=0,y=0,b=0,_=0,w=0,E=0,x=0;if(a=R,R=R+48|0,l=a+12|0,E=a,0==(0|Xe(e|=0,t|=0,e,t,s=a+24|0))&&0==(0|Xe(e,t,n,r,l))){if((0|(w=0|fe(s,l)))<0)return R=a,0|(E=w);for(i[s>>2]=0,i[s+4>>2]=0,i[s+8>>2]=0,i[l>>2]=0,i[l+4>>2]=0,i[l+8>>2]=0,Xe(e,t,e,t,s),Xe(e,t,n,r,l),me(s),me(l),w?(g=+(0|w),_=s,n=d=0|i[s>>2],r=p=0|i[(y=s+4|0)>>2],s=m=0|i[(b=s+8|0)>>2],A=+((0|i[l>>2])-d|0)/g,v=+((0|i[l+4>>2])-p|0)/g,g=+((0|i[l+8>>2])-m|0)/g):(y=r=s+4|0,b=m=s+8|0,_=s,n=0|i[s>>2],r=0|i[r>>2],s=0|i[m>>2],A=0,v=0,g=0),i[E>>2]=n,i[(m=E+4|0)>>2]=r,i[(p=E+8|0)>>2]=s,d=0;;){x=A*(h=+(0|d))+ +(0|n),c=v*h+ +(0|i[y>>2]),h=g*h+ +(0|i[b>>2]),r=~~+xt(+x),l=~~+xt(+c),n=~~+xt(+h),x=+u(+(+(0|r)-x)),c=+u(+(+(0|l)-c)),h=+u(+(+(0|n)-h));do{if(!(x>c&x>h)){if(f=0-r|0,c>h){s=f-n|0;break}s=l,n=f-l|0;break}r=0-(l+n)|0,s=l}while(0);if(i[E>>2]=r,i[m>>2]=s,i[p>>2]=n,ge(E),Je(e,t,E,o+(d<<3)|0),(0|d)==(0|w))break;d=d+1|0,n=0|i[_>>2]}return R=a,0|(E=0)}return R=a,0|(E=-1)},_h3LineSize:function(e,t,n,r){var i,o,a;return n|=0,r|=0,a=R,R=R+32|0,o=a,e=0==(0|Xe(e|=0,t|=0,e,t,i=a+12|0))&&0==(0|Xe(e,t,n,r,o))?0|fe(i,o):-1,R=a,(e>>>31^1)+e|0},_h3SetToLinkedGeo:function(e,t,n){n|=0;var r,o,a,s=0;if(a=R,R=R+32|0,r=a,function(e,t,n){e|=0,n|=0;var r,o,a=0,s=0,u=0,l=0,c=0;if(o=R,R=R+176|0,r=o,(0|(t|=0))<1)return at(n,0,0),void(R=o);l=0|_t(0|i[(l=e)>>2],0|i[l+4>>2],52),E(),at(n,(0|t)>6?t:6,15&l),l=0;do{if(qe(0|i[(a=e+(l<<3)|0)>>2],0|i[a+4>>2],r),(0|(a=0|i[r>>2]))>0){c=0;do{u=r+8+(c<<4)|0,(s=0|ht(n,a=r+8+(((0|(c=c+1|0))%(0|a)|0)<<4)|0,u))?lt(n,s):ct(n,u,a),a=0|i[r>>2]}while((0|c)<(0|a))}l=l+1|0}while((0|l)!=(0|t));R=o}(e|=0,t|=0,o=a+16|0),i[n>>2]=0,i[n+4>>2]=0,i[n+8>>2]=0,!(e=0|ut(o)))return Ye(n),st(o),void(R=a);do{t=0|He(n);do{Ke(t,e),s=e+16|0,i[r>>2]=i[s>>2],i[r+4>>2]=i[s+4>>2],i[r+8>>2]=i[s+8>>2],i[r+12>>2]=i[s+12>>2],lt(o,e),e=0|ft(o,r)}while(0!=(0|e));e=0|ut(o)}while(0!=(0|e));Ye(n),st(o),R=a},_h3ToCenterChild:function(e,t,n){n|=0;var r=0,i=0;if(r=0|_t(0|(e|=0),0|(t|=0),52),E(),(0|n)<16&(0|(r&=15))<=(0|n)){if((0|r)!=(0|n)&&(e|=i=0|wt(0|n,0,52),t=0|E()|-15728641&t,(0|r)<(0|n)))do{i=0|wt(7,0,3*(14-r|0)|0),r=r+1|0,e&=~i,t&=~(0|E())}while((0|r)<(0|n))}else t=0,e=0;return w(0|t),0|e},_h3ToChildren:Oe,_h3ToGeo:Ue,_h3ToGeoBoundary:qe,_h3ToParent:Re,_h3UnidirectionalEdgeIsValid:function(e,t){var n=0;if(!(!0&268435456==(2013265920&(t|=0)|0)))return 0|(n=0);switch(n=0|_t(0|(e|=0),0|t,56),E(),7&n){case 0:case 7:return 0|(n=0)}return!0&16777216==(117440512&t|0)&0!=(0|Ie(e,n=-2130706433&t|134217728))?0|(n=0):0|(n=0|Ce(e,n))},_hexAreaKm2:function(e){return+ +o[20496+((e|=0)<<3)>>3]},_hexAreaM2:function(e){return+ +o[20624+((e|=0)<<3)>>3]},_hexRing:function(e,t,n,r){e|=0,t|=0,r|=0;var o,a=0,s=0,u=0,l=0,c=0,h=0,f=0;if(o=R,R=R+16|0,f=o,!(n|=0))return i[(f=r)>>2]=e,i[f+4>>2]=t,R=o,0|(f=0);i[f>>2]=0;e:do{if(0|Ie(e,t))e=1;else{if(s=(0|n)>0){a=0,h=e;do{if(0==(0|(h=0|k(h,t,4,f)))&0==(0|(t=0|E()))){e=2;break e}if(a=a+1|0,0|Ie(h,t)){e=1;break e}}while((0|a)<(0|n));if(i[(c=r)>>2]=h,i[c+4>>2]=t,c=n+-1|0,s){s=0,u=1,a=h,e=t;do{if(0==(0|(a=0|k(a,e,2,f)))&0==(0|(e=0|E()))){e=2;break e}if(i[(l=r+(u<<3)|0)>>2]=a,i[l+4>>2]=e,u=u+1|0,0|Ie(a,e)){e=1;break e}s=s+1|0}while((0|s)<(0|n));l=0,s=u;do{if(0==(0|(a=0|k(a,e,3,f)))&0==(0|(e=0|E()))){e=2;break e}if(i[(u=r+(s<<3)|0)>>2]=a,i[u+4>>2]=e,s=s+1|0,0|Ie(a,e)){e=1;break e}l=l+1|0}while((0|l)<(0|n));u=0;do{if(0==(0|(a=0|k(a,e,1,f)))&0==(0|(e=0|E()))){e=2;break e}if(i[(l=r+(s<<3)|0)>>2]=a,i[l+4>>2]=e,s=s+1|0,0|Ie(a,e)){e=1;break e}u=u+1|0}while((0|u)<(0|n));u=0;do{if(0==(0|(a=0|k(a,e,5,f)))&0==(0|(e=0|E()))){e=2;break e}if(i[(l=r+(s<<3)|0)>>2]=a,i[l+4>>2]=e,s=s+1|0,0|Ie(a,e)){e=1;break e}u=u+1|0}while((0|u)<(0|n));u=0;do{if(0==(0|(a=0|k(a,e,4,f)))&0==(0|(e=0|E()))){e=2;break e}if(i[(l=r+(s<<3)|0)>>2]=a,i[l+4>>2]=e,s=s+1|0,0|Ie(a,e)){e=1;break e}u=u+1|0}while((0|u)<(0|n));for(u=0;;){if(0==(0|(a=0|k(a,e,6,f)))&0==(0|(e=0|E()))){e=2;break e}if((0|u)!=(0|c)){if(i[(l=r+(s<<3)|0)>>2]=a,i[l+4>>2]=e,0|Ie(a,e)){e=1;break e}s=s+1|0}if((0|(u=u+1|0))>=(0|n)){u=h,s=t;break}}}else u=h,a=h,s=t,e=t}else i[(u=r)>>2]=e,i[u+4>>2]=t,u=e,a=e,s=t,e=t;e=1&((0|u)!=(0|a)|(0|s)!=(0|e))}}while(0);return R=o,0|(f=e)},_i64Subtract:At,_kRing:O,_kRingDistances:function(e,t,n,r,i){var o;if(0|I(e|=0,t|=0,n|=0,r|=0,i|=0)){if(Tt(0|r,0,(o=1+(0|y(3*n|0,n+1|0))|0)<<3|0),0|i)return Tt(0|i,0,o<<2|0),void P(e,t,n,r,i,o,0);(i=0|gt(o,4))&&(P(e,t,n,r,i,o,0),mt(i))}},_llvm_minnum_f64:Et,_llvm_round_f64:xt,_malloc:pt,_maxFaceCount:function(e,t){var n=0,r=0;if(r=0|_t(0|(e|=0),0|(t|=0),45),E(),!(0|D(127&r)))return 0|(r=2);if(r=0|_t(0|e,0|t,52),E(),!(r&=15))return 0|(r=5);for(n=1;;){if(!(0==((0|wt(7,0,3*(15-n|0)|0))&e|0)&0==((0|E())&t|0))){n=2,e=6;break}if(!(n>>>0<r>>>0)){n=5,e=6;break}n=n+1|0}return 6==(0|e)?0|n:0},_maxH3ToChildrenSize:function(e,t,n){return n|=0,e=0|_t(0|(e|=0),0|(t|=0),52),E(),(0|n)<16&(0|(e&=15))<=(0|n)?0|(n=0|Ze(7,n-e|0)):0|(n=0)},_maxKringSize:function(e){return 1+(0|y(3*(e|=0)|0,e+1|0))|0},_maxPolyfillSize:function(e,t){t|=0;var n,r=0,o=0,a=0,s=0,u=0;if(n=R,R=R+48|0,a=n+8|0,o=n,s=0|i[(u=e|=0)+4>>2],i[(r=o)>>2]=i[u>>2],i[r+4>>2]=s,et(o,a),a=0|z(a,t),t=0|i[o>>2],(0|(o=0|i[e+8>>2]))<=0)return R=n,0|(u=(u=(s=(0|a)<(0|(u=t)))?u:a)+12|0);r=0|i[e+12>>2],e=0;do{t=(0|i[r+(e<<3)>>2])+t|0,e=e+1|0}while((0|e)<(0|o));return R=n,0|(u=(u=(u=(0|a)<(0|t))?t:a)+12|0)},_maxUncompactSize:function(e,t,n){e|=0,n|=0;var r=0,o=0,a=0,s=0;if((0|(t|=0))<=0)return 0|(n=0);if((0|n)>=16){for(r=0;;){if(!(0==(0|i[(s=e+(r<<3)|0)>>2])&0==(0|i[s+4>>2]))){r=-1,o=13;break}if((0|(r=r+1|0))>=(0|t)){r=0,o=13;break}}if(13==(0|o))return 0|r}r=0,s=0;e:for(;;){a=0|i[(o=e+(s<<3)|0)>>2],o=0|i[o+4>>2];do{if(!(0==(0|a)&0==(0|o))){if(o=0|_t(0|a,0|o,52),E(),(0|(o&=15))>(0|n)){r=-1,o=13;break e}if((0|o)==(0|n)){r=r+1|0;break}r=(0|Ze(7,n-o|0))+r|0;break}}while(0);if((0|(s=s+1|0))>=(0|t)){o=13;break}}return 13==(0|o)?0|r:0},_memcpy:St,_memset:Tt,_numHexagons:function(e){var t;return e=0|i[(t=21008+((e|=0)<<3)|0)>>2],w(0|i[t+4>>2]),0|e},_pentagonIndexCount:function(){return 12},_polyfill:function(e,t,n){var r,o=0,a=0,s=0,u=0,l=0;if(r=R,R=R+48|0,o=r+8|0,a=r,0|function(e,t,n){t|=0,n|=0;var r,o,a,s,u,l=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0,A=0,v=0,y=0,b=0,_=0,w=0,S=0,T=0,M=0,L=0,C=0,O=0,k=0,D=0,F=0,j=0,B=0;u=R,R=R+112|0,o=u+80|0,p=u+72|0,a=u,s=u+56|0,(B=0|pt(32+(i[(m=(e=e|0)+8|0)>>2]<<5)|0))||x(22496,22096,800,22104);if(tt(e,B),l=0|i[(h=e)+4>>2],i[(d=p)>>2]=i[h>>2],i[d+4>>2]=l,et(p,o),d=0|z(o,t),l=0|i[p>>2],(0|(h=0|i[m>>2]))>0){f=0|i[e+12>>2],c=0;do{l=(0|i[f+(c<<3)>>2])+l|0,c=c+1|0}while((0|c)!=(0|h))}if(c=0|gt(r=(d=(0|d)<(0|l)?l:d)+12|0,8),g=0|gt(r,8),i[o>>2]=0,j=0|i[(F=e)+4>>2],i[(l=p)>>2]=i[F>>2],i[l+4>>2]=j,0|(l=0|N(p,r,t,o,c,g)))return mt(c),mt(g),mt(B),R=u,0|(B=l);e:do{if((0|i[m>>2])>0){for(h=e+12|0,l=0;f=0|N((0|i[h>>2])+(l<<3)|0,r,t,o,c,g),l=l+1|0,!(0|f);)if((0|l)>=(0|i[m>>2]))break e;return mt(c),mt(g),mt(B),R=u,0|(B=f)}}while(0);(0|d)>-12&&Tt(0|g,0,((0|r)>1?r:1)<<3|0);e:do{if((0|i[o>>2])>0){j=((0|r)<0)<<31>>31,L=c,C=g,O=c,k=c,D=g,F=c,l=c,w=c,S=g,T=g,M=g,c=g;t:for(;;){for(_=0|i[o>>2],y=0,b=0,h=0;;){d=(f=a)+56|0;do{i[f>>2]=0,f=f+4|0}while((0|f)<(0|d));if(p=0|i[(t=L+(y<<3)|0)>>2],t=0|i[t+4>>2],0|I(p,t,1,a,0)){d=(f=a)+56|0;do{i[f>>2]=0,f=f+4|0}while((0|f)<(0|d));0|(f=0|gt(7,4))&&(P(p,t,1,a,f,7,0),mt(f))}v=0;do{g=0|i[(A=a+(v<<3)|0)>>2],A=0|i[A+4>>2];n:do{if(!(0==(0|g)&0==(0|A))){if(p=0|bt(0|g,0|A,0|r,0|j),E(),t=0|i[(d=f=n+(p<<3)|0)>>2],d=0|i[d+4>>2],!(0==(0|t)&0==(0|d)))for(m=0;;){if((0|m)>(0|r))break t;if((0|t)==(0|g)&(0|d)==(0|A))break n;if(t=0|i[(d=f=n+((p=(p+1|0)%(0|r)|0)<<3)|0)>>2],d=0|i[d+4>>2],0==(0|t)&0==(0|d))break;m=m+1|0}0==(0|g)&0==(0|A)||(Ue(g,A,s),0|nt(e,B,s)&&(i[(m=f)>>2]=g,i[m+4>>2]=A,i[(m=C+(h<<3)|0)>>2]=g,i[m+4>>2]=A,h=h+1|0))}}while(0);v=v+1|0}while(v>>>0<7);if((0|(b=b+1|0))>=(0|_))break;y=y+1|0}if((0|_)>0&&Tt(0|O,0,_<<3|0),i[o>>2]=h,!((0|h)>0))break e;g=c,A=M,v=F,y=T,b=S,_=C,c=w,M=l,T=k,S=O,w=g,l=A,F=D,D=v,k=y,O=b,C=L,L=_}return mt(k),mt(D),mt(B),R=u,0|(B=-1)}l=g}while(0);return mt(B),mt(c),mt(l),R=u,0|(B=0)}(e|=0,t|=0,n|=0)){if(s=0|i[(l=e)+4>>2],i[(u=a)>>2]=i[l>>2],i[u+4>>2]=s,et(a,o),u=0|z(o,t),t=0|i[a>>2],(0|(s=0|i[e+8>>2]))>0){a=0|i[e+12>>2],o=0;do{t=(0|i[a+(o<<3)>>2])+t|0,o=o+1|0}while((0|o)!=(0|s))}(0|(t=(0|u)<(0|t)?t:u))<=-12||Tt(0|n,0,8+(((0|(l=t+11|0))>0?l:0)<<3)|0),R=r}else R=r},_res0IndexCount:function(){return 122},_round:Mt,_sbrk:Lt,_sizeOfCoordIJ:function(){return 8},_sizeOfGeoBoundary:function(){return 168},_sizeOfGeoCoord:function(){return 16},_sizeOfGeoPolygon:function(){return 16},_sizeOfGeofence:function(){return 8},_sizeOfH3Index:function(){return 8},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompact:function(e,t,n,r,o){e|=0,n|=0,r|=0,o|=0;var a=0,s=0,u=0,l=0,c=0,h=0;if((0|(t|=0))<=0)return 0|(o=0);if((0|o)>=16){for(a=0;;){if(!(0==(0|i[(h=e+(a<<3)|0)>>2])&0==(0|i[h+4>>2]))){a=14;break}if((0|(a=a+1|0))>=(0|t)){s=0,a=16;break}}if(14==(0|a))return 0|((0|r)>0?-2:-1);if(16==(0|a))return 0|s}a=0,h=0;e:for(;;){s=0|i[(u=c=e+(h<<3)|0)>>2],u=0|i[u+4>>2];do{if(!(0==(0|s)&0==(0|u))){if((0|a)>=(0|r)){s=-1,a=16;break e}if(l=0|_t(0|s,0|u,52),E(),(0|(l&=15))>(0|o)){s=-2,a=16;break e}if((0|l)==(0|o)){i[(c=n+(a<<3)|0)>>2]=s,i[c+4>>2]=u,a=a+1|0;break}if((0|(s=(0|Ze(7,o-l|0))+a|0))>(0|r)){s=-1,a=16;break e}Oe(0|i[c>>2],0|i[c+4>>2],o,n+(a<<3)|0),a=s}}while(0);if((0|(h=h+1|0))>=(0|t)){s=0,a=16;break}}return 16==(0|a)?0|s:0},establishStackSpace:function(e,t){R=e|=0},stackAlloc:function(e){var t;return t=R,R=(R=R+(e|=0)|0)+15&-16,0|t},stackRestore:function(e){R=e|=0},stackSave:function(){return 0|R}}}({Math:Math,Int8Array:Int8Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Float32Array:Float32Array,Float64Array:Float64Array},{a:ue,b:function(e){l=e},c:c,d:function(e,t,n,r){ue("Assertion failed: "+m(e)+", at: "+[t?m(t):"unknown filename",n,r?m(r):"unknown function"])},e:function(e){return n.___errno_location&&(b[n.___errno_location()>>2]=e),e},f:H,g:function(e,t,n){v.set(v.subarray(t,t+n),e)},h:function(e){var t=H();if(e>2130706432)return!1;for(var n=Math.max(t,16777216);n<e;)n=n<=536870912?E(2*n,16777216):Math.min(E((3*n+2147483648)/4,16777216),2130706432);return!!K(n)},i:function(e){ue("OOM")},j:q,k:W,l:K,m:z,n:function(){var e=z();return n.extraStackTrace&&(e+="\n"+n.extraStackTrace()),W(e)},o:23680,p:23664},g),$=(n.___uremdi3=Z.___uremdi3,n._bitshift64Lshr=Z._bitshift64Lshr,n._bitshift64Shl=Z._bitshift64Shl,n._calloc=Z._calloc,n._compact=Z._compact,n._destroyLinkedPolygon=Z._destroyLinkedPolygon,n._edgeLengthKm=Z._edgeLengthKm,n._edgeLengthM=Z._edgeLengthM,n._emscripten_replace_memory=Z._emscripten_replace_memory),ee=(n._experimentalH3ToLocalIj=Z._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=Z._experimentalLocalIjToH3,n._free=Z._free,n._geoToH3=Z._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=Z._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=Z._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=Z._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=Z._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=Z._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=Z._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=Z._getPentagonIndexes,n._getRes0Indexes=Z._getRes0Indexes,n._h3Distance=Z._h3Distance,n._h3GetBaseCell=Z._h3GetBaseCell,n._h3GetFaces=Z._h3GetFaces,n._h3IndexesAreNeighbors=Z._h3IndexesAreNeighbors,n._h3IsPentagon=Z._h3IsPentagon,n._h3IsResClassIII=Z._h3IsResClassIII,n._h3IsValid=Z._h3IsValid,n._h3Line=Z._h3Line,n._h3LineSize=Z._h3LineSize,n._h3SetToLinkedGeo=Z._h3SetToLinkedGeo,n._h3ToCenterChild=Z._h3ToCenterChild,n._h3ToChildren=Z._h3ToChildren,n._h3ToGeo=Z._h3ToGeo,n._h3ToGeoBoundary=Z._h3ToGeoBoundary,n._h3ToParent=Z._h3ToParent,n._h3UnidirectionalEdgeIsValid=Z._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=Z._hexAreaKm2,n._hexAreaM2=Z._hexAreaM2,n._hexRing=Z._hexRing,n._i64Subtract=Z._i64Subtract,n._kRing=Z._kRing,n._kRingDistances=Z._kRingDistances,n._llvm_minnum_f64=Z._llvm_minnum_f64,n._llvm_round_f64=Z._llvm_round_f64,n._malloc=Z._malloc,n._maxFaceCount=Z._maxFaceCount,n._maxH3ToChildrenSize=Z._maxH3ToChildrenSize,n._maxKringSize=Z._maxKringSize,n._maxPolyfillSize=Z._maxPolyfillSize,n._maxUncompactSize=Z._maxUncompactSize,n._memcpy=Z._memcpy,n._memset=Z._memset,n._numHexagons=Z._numHexagons,n._pentagonIndexCount=Z._pentagonIndexCount,n._polyfill=Z._polyfill,n._res0IndexCount=Z._res0IndexCount,n._round=Z._round,n._sbrk=Z._sbrk,n._sizeOfCoordIJ=Z._sizeOfCoordIJ,n._sizeOfGeoBoundary=Z._sizeOfGeoBoundary,n._sizeOfGeoCoord=Z._sizeOfGeoCoord,n._sizeOfGeoPolygon=Z._sizeOfGeoPolygon,n._sizeOfGeofence=Z._sizeOfGeofence,n._sizeOfH3Index=Z._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=Z._sizeOfLinkedGeoPolygon,n._uncompact=Z._uncompact,n.establishStackSpace=Z.establishStackSpace,n.stackAlloc=Z.stackAlloc),te=n.stackRestore=Z.stackRestore,ne=n.stackSave=Z.stackSave;if(n.asm=Z,n.cwrap=function(e,t,n,r){var i=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&i&&!r?f(e):function(){return d(e,t,n,arguments)}},n.setValue=function(e,t,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":A[e>>0]=t;break;case"i16":y[e>>1]=t;break;case"i32":b[e>>2]=t;break;case"i64":B=[t>>>0,(j=t,+O(j)>=1?j>0?(0|k(+P(j/4294967296),4294967295))>>>0:~~+I((j-+(~~j>>>0))/4294967296)>>>0:0)],b[e>>2]=B[0],b[e+4>>2]=B[1];break;case"float":_[e>>2]=t;break;case"double":w[e>>3]=t;break;default:ue("invalid type for setValue: "+n)}},n.getValue=function(e,t,n){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return A[e>>0];case"i16":return y[e>>1];case"i32":case"i64":return b[e>>2];case"float":return _[e>>2];case"double":return w[e>>3];default:ue("invalid type for getValue: "+t)}return null},n.getTempRet0=c,V){U(V)||(X=V,V=n.locateFile?n.locateFile(X,a):a+X),N++,n.monitorRunDependencies&&n.monitorRunDependencies(N);var re=function(e){e.byteLength&&(e=new Uint8Array(e)),v.set(e,8),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,function(e){if(N--,n.monitorRunDependencies&&n.monitorRunDependencies(N),0==N&&(null!==D&&(clearInterval(D),D=null),F)){var t=F;F=null,t()}}()},ie=function(){i(V,re,(function(){throw"could not load memory initializer "+V}))},oe=Q(V);if(oe)re(oe.buffer);else if(n.memoryInitializerRequest){var ae=function(){var e=n.memoryInitializerRequest,t=e.response;if(200!==e.status&&0!==e.status){var r=Q(n.memoryInitializerRequestURL);if(!r)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+e.status+", retrying "+V),void ie();t=r.buffer}re(t)};n.memoryInitializerRequest.response?setTimeout(ae,0):n.memoryInitializerRequest.addEventListener("load",ae)}else ie()}function se(e){function t(){J||(J=!0,h||(T(L),T(C),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),R.unshift(e);var e;T(R)}()))}e=e||o,N>0||(!function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),M.unshift(e);var e;T(M)}(),N>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),t()}),1)):t()))}function ue(e){throw n.onAbort&&n.onAbort(e),s(e+=""),u(e),h=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(F=function e(){J||se(),J||(F=e)},n.run=se,n.abort=ue,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return se(),e}("object"===typeof Yn?Yn:{}),Qn="number",Xn={};[["sizeOfH3Index",Qn],["sizeOfGeoCoord",Qn],["sizeOfGeoBoundary",Qn],["sizeOfGeoPolygon",Qn],["sizeOfGeofence",Qn],["sizeOfLinkedGeoPolygon",Qn],["sizeOfCoordIJ",Qn],["h3IsValid","number",["number","number"]],["geoToH3","number",[Qn,Qn,"number"]],["h3ToGeo",null,["number","number",Qn]],["h3ToGeoBoundary",null,["number","number",Qn]],["maxKringSize",Qn,[Qn]],["kRing",null,["number","number",Qn,Qn]],["kRingDistances",null,["number","number",Qn,Qn,Qn]],["hexRing",null,["number","number",Qn,Qn]],["maxPolyfillSize",Qn,[Qn,"number"]],["polyfill",null,[Qn,"number",Qn]],["h3SetToLinkedGeo",null,[Qn,Qn,Qn]],["destroyLinkedPolygon",null,[Qn]],["compact",Qn,[Qn,Qn,Qn]],["uncompact",Qn,[Qn,Qn,Qn,Qn,"number"]],["maxUncompactSize",Qn,[Qn,Qn,"number"]],["h3IsPentagon","number",["number","number"]],["h3IsResClassIII","number",["number","number"]],["h3GetBaseCell",Qn,["number","number"]],["maxFaceCount",Qn,["number","number"]],["h3GetFaces",null,["number","number",Qn]],["h3ToParent","number",["number","number","number"]],["h3ToChildren",null,["number","number","number",Qn]],["h3ToCenterChild","number",["number","number","number"]],["maxH3ToChildrenSize",Qn,["number","number","number"]],["h3IndexesAreNeighbors","number",["number","number","number","number"]],["getH3UnidirectionalEdge","number",["number","number","number","number"]],["getOriginH3IndexFromUnidirectionalEdge","number",["number","number"]],["getDestinationH3IndexFromUnidirectionalEdge","number",["number","number"]],["h3UnidirectionalEdgeIsValid","number",["number","number"]],["getH3IndexesFromUnidirectionalEdge",null,["number","number",Qn]],["getH3UnidirectionalEdgesFromHexagon",null,["number","number",Qn]],["getH3UnidirectionalEdgeBoundary",null,["number","number",Qn]],["h3Distance",Qn,["number","number","number","number"]],["h3Line",Qn,["number","number","number","number",Qn]],["h3LineSize",Qn,["number","number","number","number"]],["experimentalH3ToLocalIj",Qn,["number","number","number","number",Qn]],["experimentalLocalIjToH3",Qn,["number","number",Qn,Qn]],["hexAreaM2",Qn,["number"]],["hexAreaKm2",Qn,["number"]],["edgeLengthM",Qn,["number"]],["edgeLengthKm",Qn,["number"]],["numHexagons",Qn,["number"]],["getRes0Indexes",null,[Qn]],["res0IndexCount",Qn],["getPentagonIndexes",null,[Qn,Qn]],["pentagonIndexCount",Qn]].forEach((function(e){Xn[e[0]]=Yn.cwrap.apply(Yn,e)}));var Jn=Xn.sizeOfH3Index(),Zn=Xn.sizeOfGeoCoord(),$n=Xn.sizeOfGeoBoundary(),er=Xn.sizeOfGeoPolygon(),tr=Xn.sizeOfGeofence();Xn.sizeOfLinkedGeoPolygon(),Xn.sizeOfCoordIJ();function nr(e){if("number"!==typeof e||e<0||e>15||Math.floor(e)!==e)throw new Error("Invalid resolution: "+e)}var rr=/[^0-9a-fA-F]/;function ir(e){if("string"!==typeof e||rr.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),16);return[parseInt(e.substring(e.length-8),16),t]}function or(e){if(e>=0)return e.toString(16);var t=sr(8,(e&=2147483647).toString(16));return t=(parseInt(t[0],16)+8).toString(16)+t.substring(1)}function ar(e,t){return or(t)+sr(8,or(e))}function sr(e,t){for(var n=e-t.length,r="",i=0;i<n;i++)r+="0";return r+=t}function ur(e,t,n){for(var r=e.length,i=Yn._calloc(r,Zn),o=n?1:0,a=n?0:1,s=0;s<2*r;s+=2)Yn.HEAPF64.set([e[s/2][o],e[s/2][a]].map(_r),i/8+s);return Yn.HEAPU32.set([r,i],t/4),t}function lr(e){return[e,Yn.getTempRet0()]}function cr(e){var t=lr(e),n=t[0],r=t[1];return r?ar(n,r):null}function hr(e,t){void 0===t&&(t=0);var n=Yn.getValue(e+4*t*2,"i32"),r=Yn.getValue(e+4*(2*t+1),"i32");return r?ar(n,r):null}function fr(e,t){for(var n=[],r=0;r<t;r++){var i=hr(e,r);null!==i&&n.push(i)}return n}function dr(e){return 180*Yn.getValue(e,"double")/Math.PI}function pr(e){return[dr(e),dr(e+8)]}function mr(e){return[dr(e+8),dr(e)]}function gr(e,t,n){for(var r=Yn.getValue(e,"i32"),i=e+8,o=[],a=t?mr:pr,s=0;s<2*r;s+=2)o.push(a(i+8*s));return n&&o.push(o[0]),o}function Ar(e,t,n){var r=Yn._malloc(Zn);Yn.HEAPF64.set([e,t].map(_r),r/8);var i=cr(Xn.geoToH3(r,n));return Yn._free(r),i}function vr(e){var t=Yn._malloc(Zn),n=ir(e),r=n[0],i=n[1];Xn.h3ToGeo(r,i,t);var o=pr(t);return Yn._free(t),o}function yr(e,t){var n=Yn._malloc($n),r=ir(e),i=r[0],o=r[1];Xn.h3ToGeoBoundary(i,o,n);var a=gr(n,t,t);return Yn._free(n),a}function br(e,t,n){if(nr(t),n=Boolean(n),0===e.length||0===e[0].length)return[];"number"===typeof e[0][0]&&(e=[e]);var r=function(e,t){var n,r=e.length-1,i=Yn._calloc(er),o=0+tr,a=o+4;if(ur(e[0],i+0,t),r>0){n=Yn._calloc(r,tr);for(var s=0;s<r;s++)ur(e[s+1],n+tr*s,t)}return Yn.setValue(i+o,r,"i32"),Yn.setValue(i+a,n,"i32"),i}(e,n),i=Xn.maxPolyfillSize(r,t),o=Yn._calloc(i,Jn);Xn.polyfill(r,t,o);var a=fr(o,i);return Yn._free(o),function(e){var t=0+tr,n=t+4;Yn._free(Yn.getValue(e+0,"i8*"));for(var r=Yn.getValue(e+t,"i32"),i=0;i<r;i++)Yn._free(Yn.getValue(e+n+tr*i,"i8*"));Yn._free(e)}(r),a}function _r(e){return e*Math.PI/180}var wr=window.THREE?window.THREE:{Box3:A.d,BufferGeometry:A.e,Float32BufferAttribute:A.r,InstancedBufferGeometry:A.v,InstancedInterleavedBuffer:A.w,InterleavedBufferAttribute:A.x,Sphere:A.U,Vector3:A.fb,WireframeGeometry:A.jb},Er=(new wr.BufferGeometry).setAttribute?"setAttribute":"addAttribute",xr=function(){wr.InstancedBufferGeometry.call(this),this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this[Er]("position",new wr.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this[Er]("uv",new wr.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))};xr.prototype=Object.assign(Object.create(wr.InstancedBufferGeometry.prototype),{constructor:xr,isLineSegmentsGeometry:!0,applyMatrix:function(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)},applyMatrix4:function(e){var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(e.applyToBufferAttribute(t),e.applyToBufferAttribute(n),t.data.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},setPositions:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new wr.InstancedInterleavedBuffer(t,6,1);return this[Er]("instanceStart",new wr.InterleavedBufferAttribute(n,3,0)),this[Er]("instanceEnd",new wr.InterleavedBufferAttribute(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},setColors:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new wr.InstancedInterleavedBuffer(t,6,1);return this[Er]("instanceColorStart",new wr.InterleavedBufferAttribute(n,3,0)),this[Er]("instanceColorEnd",new wr.InterleavedBufferAttribute(n,3,3)),this},fromWireframeGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromEdgesGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromMesh:function(e){return this.fromWireframeGeometry(new wr.WireframeGeometry(e.geometry)),this},fromLineSegements:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.position.array),this},computeBoundingBox:function(){var e=new wr.Box3;return function(){null===this.boundingBox&&(this.boundingBox=new wr.Box3);var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;void 0!==t&&void 0!==n&&(this.boundingBox.setFromBufferAttribute(t),e.setFromBufferAttribute(n),this.boundingBox.union(e))}}(),computeBoundingSphere:function(){var e=new wr.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new wr.Sphere),null===this.boundingBox&&this.computeBoundingBox();var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(void 0!==t&&void 0!==n){var r=this.boundingSphere.center;this.boundingBox.getCenter(r);for(var i=0,o=0,a=t.count;o<a;o++)e.fromBufferAttribute(t,o),i=Math.max(i,r.distanceToSquared(e)),e.fromBufferAttribute(n,o),i=Math.max(i,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}}(),toJSON:function(){},clone:function(){},copy:function(){return this}});var Sr=window.THREE?window.THREE:{ShaderLib:A.S,ShaderMaterial:A.T,UniformsLib:A.cb,UniformsUtils:A.db,Vector2:A.eb};Sr.UniformsLib.line={linewidth:{value:1},resolution:{value:new A.eb(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},Sr.ShaderLib.line={uniforms:Sr.UniformsUtils.merge([Sr.UniformsLib.common,Sr.UniformsLib.fog,Sr.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n\t\t\t#include <premultiplied_alpha_fragment>\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}\n\t\t"};var Tr=function(e){Sr.ShaderMaterial.call(this,{type:"LineMaterial",uniforms:Sr.UniformsUtils.clone(Sr.ShaderLib.line.uniforms),vertexShader:Sr.ShaderLib.line.vertexShader,fragmentShader:Sr.ShaderLib.line.fragmentShader}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),this.setValues(e)};(Tr.prototype=Object.create(Sr.ShaderMaterial.prototype)).constructor=Tr,Tr.prototype.isLineMaterial=!0,Tr.prototype.copy=function(e){return Sr.ShaderMaterial.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.resolution=e.resolution,this};var Mr=window.THREE?window.THREE:{BufferGeometry:A.e,InstancedInterleavedBuffer:A.w,InterleavedBufferAttribute:A.x,Mesh:A.E,Vector3:A.fb},Lr=(new Mr.BufferGeometry).setAttribute?"setAttribute":"addAttribute",Cr=function(e,t){Mr.Mesh.call(this),this.type="LineSegments2",this.geometry=void 0!==e?e:new xr,this.material=void 0!==t?t:new Tr({color:16777215*Math.random()})};Cr.prototype=Object.assign(Object.create(Mr.Mesh.prototype),{constructor:Cr,isLineSegments2:!0,computeLineDistances:function(){var e=new Mr.Vector3,t=new Mr.Vector3;return function(){for(var n=this.geometry,r=n.attributes.instanceStart,i=n.attributes.instanceEnd,o=new Float32Array(2*r.data.count),a=0,s=0,u=r.data.count;a<u;a++,s+=2)e.fromBufferAttribute(r,a),t.fromBufferAttribute(i,a),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+e.distanceTo(t);var l=new Mr.InstancedInterleavedBuffer(o,2,1);return n[Lr]("instanceDistanceStart",new Mr.InterleavedBufferAttribute(l,1,0)),n[Lr]("instanceDistanceEnd",new Mr.InterleavedBufferAttribute(l,1,1)),this}}(),copy:function(){return this}});var Rr=function(){xr.call(this),this.type="LineGeometry"};Rr.prototype=Object.assign(Object.create(xr.prototype),{constructor:Rr,isLineGeometry:!0,setPositions:function(e){for(var t=e.length-3,n=new Float32Array(2*t),r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return xr.prototype.setPositions.call(this,n),this},setColors:function(e){for(var t=e.length-3,n=new Float32Array(2*t),r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return xr.prototype.setColors.call(this,n),this},fromLine:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.position.array),this},copy:function(){return this}});var Or=function(e,t){Cr.call(this),this.type="Line2",this.geometry=void 0!==e?e:new Rr,this.material=void 0!==t?t:new Tr({color:16777215*Math.random()})};function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){Pr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jr(e,t)}function Fr(e){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jr(e,t){return(jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Br(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Vr(e,t,n){return(Vr=Br()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&jr(i,n.prototype),i}).apply(null,arguments)}function Gr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qr(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?Ur(e):t}function Wr(e){var t=Br();return function(){var n,r=Fr(e);if(t){var i=Fr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qr(this,n)}}function zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Kr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e){return function(e){if(Array.isArray(e))return Yr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Kr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kr(e,t){if(e){if("string"===typeof e)return Yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yr(e,t):void 0}}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Or.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Or,isLine2:!0,copy:function(){return this}});var Qr=function e(t){t.geometry&&t.geometry.dispose(),t.material&&function e(t){t instanceof Array?t.forEach(e):(t.map&&t.map.dispose(),t.dispose())}(t.material),t.texture&&t.texture.dispose(),t.children&&t.children.forEach(e)},Xr=function(e){for(;e.children.length;){var t=e.children[0];e.remove(t),Qr(t)}};function Jr(e,t){var n=new t;return{linkProp:function(t){return{default:n[t](),onChange:function(n,r){r[e][t](n)},triggerUpdate:!1}},linkMethod:function(t){return function(n){for(var r=n[e],i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=r[t].apply(r,o);return s===r?this:s}}}}function Zr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(90-e)*Math.PI/180,i=(90-t)*Math.PI/180,o=100*(1+n);return{x:o*Math.sin(r)*Math.cos(i),y:o*Math.cos(r),z:o*Math.sin(r)*Math.sin(i)}}function $r(e){var t=e.x,n=e.y,r=e.z,i=Math.sqrt(t*t+n*n+r*r),o=Math.acos(n/i),a=Math.atan2(r,t);return{lat:90-180*o/Math.PI,lng:90-180*a/Math.PI-(a<-Math.PI/2?360:0),altitude:i/100-1}}var ei=window.THREE?Nr(Nr({},window.THREE),{},{SphereGeometry:A.W}):{Color:A.h,LineBasicMaterial:A.z,LineSegments:A.A,Mesh:A.E,MeshPhongMaterial:A.H,SphereGeometry:A.W,TextureLoader:A.ab},ti=w({props:{globeImageUrl:{},bumpImageUrl:{},showAtmosphere:{default:!0,onChange:function(e,t){t.atmosphereObj.visible=!!e},triggerUpdate:!1},showGraticules:{default:!1,onChange:function(e,t){t.graticulesObj.visible=!!e},triggerUpdate:!1},onReady:{default:function(){},triggerUpdate:!1}},methods:{globeMaterial:function(e){return e.globeObj.material}},stateInit:function(){var e=new ei.SphereGeometry(100,75,75),t=new ei.Mesh(e,new ei.MeshPhongMaterial({color:0,transparent:!0}));t.rotation.y=-Math.PI/2,t.__globeObjType="globe";var n=D(t.geometry,{backside:!0,color:"lightskyblue",size:15,power:3.5,coefficient:.1});return n.__globeObjType="atmosphere",{globeObj:t,atmosphereObj:n,graticulesObj:new ei.LineSegments(new O(se(),100,2),new ei.LineBasicMaterial({color:"lightgrey",transparent:!0,opacity:.1}))}},init:function(e,t){Xr(e),t.scene=e,t.scene.add(t.globeObj),t.scene.add(t.atmosphereObj),t.scene.add(t.graticulesObj),t.ready=!1},update:function(e,t){var n=e.globeObj.material;t.hasOwnProperty("globeImageUrl")&&(e.globeImageUrl?(new ei.TextureLoader).load(e.globeImageUrl,(function(t){n.map=t,n.color=null,n.needsUpdate=!0,!e.ready&&(e.ready=!0)&&setTimeout(e.onReady)})):!n.color&&(n.color=new ei.Color(0))),t.hasOwnProperty("bumpImageUrl")&&(e.bumpImageUrl?e.bumpImageUrl&&(new ei.TextureLoader).load(e.bumpImageUrl,(function(e){n.bumpMap=e,n.needsUpdate=!0})):(n.bumpMap=null,n.needsUpdate=!0)),e.ready||e.globeImageUrl||(e.ready=!0,e.onReady())}}),ni=function(e){return isNaN(e)?parseInt(Ie()(e).toHex(),16):e},ri=function(e){return isNaN(e)?Ie()(e).getAlpha():1},ii=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Ie()(e).toRgb(),r=["r","g","b"].map((function(e){return n[e]/255}));return t?[].concat(Hr(r),[n.a]):r};function oi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return We(e,t.children,(function(e){return t.add(e)}),(function(e){t.remove(e),Xr(e)}),Nr({objBindAttr:"__threeObj"},n))}var ai=window.THREE?window.THREE:{BufferGeometry:A.e,Color:A.h,CylinderGeometry:A.l,CylinderBufferGeometry:A.k,FaceColors:A.q,Geometry:A.t,Matrix4:A.D,Mesh:A.E,MeshBasicMaterial:A.F,MeshLambertMaterial:A.G,Object3D:A.J,Vector3:A.fb},si=(new ai.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix",ui=w({props:{pointsData:{default:[]},pointLat:{default:"lat"},pointLng:{default:"lng"},pointColor:{default:function(){return"#ffffaa"}},pointAltitude:{default:.1},pointRadius:{default:.25},pointResolution:{default:12,triggerUpdate:!1},pointsMerge:{default:!1},pointsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t){Xr(e),t.scene=e},update:function(e){var t=Re(e.pointLat),n=Re(e.pointLng),r=Re(e.pointAltitude),i=Re(e.pointRadius),o=Re(e.pointColor),a=new ai[e.pointsMerge?"CylinderGeometry":"CylinderBufferGeometry"](1,1,1,e.pointResolution);a[si]((new ai.Matrix4).makeRotationX(Math.PI/2)),a[si]((new ai.Matrix4).makeTranslation(0,0,-.5));var s=2*Math.PI*100/360,u={},l=e.pointsMerge?new ai.Object3D:e.scene;if(oi(e.pointsData,l,{createObj:function(){var e=new ai.Mesh(a);return e.__globeObjType="point",e},updateObj:function(a,l){var c=function(t){var n=a.__currentTargetD=t,r=n.r,i=n.alt,o=n.lat,u=n.lng;Object.assign(a.position,Zr(o,u));var l=e.pointsMerge?new ai.Vector3(0,0,0):e.scene.localToWorld(new ai.Vector3(0,0,0));a.lookAt(l),a.scale.x=a.scale.y=Math.min(30,r)*s,a.scale.z=Math.max(100*i,.1)},h={alt:+r(l),r:+i(l),lat:+t(l),lng:+n(l)},f=a.__currentTargetD||Object.assign({},h,{alt:-.001});Object.keys(h).some((function(e){return f[e]!==h[e]}))&&(e.pointsMerge||!e.pointsTransitionDuration||e.pointsTransitionDuration<0?c(h):new E.a.Tween(f).to(h,e.pointsTransitionDuration).easing(E.a.Easing.Quadratic.InOut).onUpdate(c).start());if(!e.pointsMerge){var d=o(l),p=ri(d);u.hasOwnProperty(d)||(u[d]=new ai.MeshLambertMaterial({color:ni(d),transparent:p<1,opacity:p})),a.material=u[d]}}}),e.pointsMerge){var c=new ai.Geometry;e.pointsData.forEach((function(e){var t=e.__threeObj;e.__threeObj=void 0;var n=new ai.Color(o(e));t.geometry.faces.forEach((function(e){return e.color=n})),t.updateMatrix(),c.merge(t.geometry,t.matrix)}));var h=new ai.Mesh(c,new ai.MeshBasicMaterial({color:16777215,vertexColors:ai.FaceColors,morphTargets:!1}));h.__globeObjType="points",h.__data=e.pointsData,Xr(e.scene),e.scene.add(h)}}}),li=window.THREE?window.THREE:{AdditiveBlending:A.a,BufferGeometry:A.e,CubicBezierCurve3:A.i,Curve:A.j,Float32BufferAttribute:A.r,Group:A.u,Line:A.y,Mesh:A.E,QuadraticBezierCurve3:A.N,ShaderMaterial:A.T,TubeBufferGeometry:A.bb,Vector3:A.fb},ci=(new li.BufferGeometry).setAttribute?"setAttribute":"addAttribute",hi={uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:"\n    uniform float dashTranslate; \n\n    attribute vec4 vertexColor;\n    varying vec4 vColor;\n    \n    attribute float vertexRelDistance;\n    varying float vRelDistance;\n\n    void main() {\n      // pass through colors and distances\n      vColor = vertexColor;\n      vRelDistance = vertexRelDistance + dashTranslate;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ",fragmentShader:"\n    uniform float dashOffset; \n    uniform float dashSize;\n    uniform float gapSize; \n    \n    varying vec4 vColor;\n    varying float vRelDistance;\n    \n    void main() {\n      // ignore pixels in the gap\n      if (vRelDistance < dashOffset) discard;\n      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;\n    \n      // set px color: [r, g, b, a], interpolated between vertices \n      gl_FragColor = vColor; \n    }\n  "},fi=w({props:{arcsData:{default:[]},arcStartLat:{default:"startLat"},arcStartLng:{default:"startLng"},arcEndLat:{default:"endLat"},arcEndLng:{default:"endLng"},arcColor:{default:function(){return"#ffffaa"}},arcAltitude:{},arcAltitudeAutoScale:{default:.5},arcStroke:{},arcCurveResolution:{default:64,triggerUpdate:!1},arcCircularResolution:{default:6,triggerUpdate:!1},arcDashLength:{default:1},arcDashGap:{default:0},arcDashInitialGap:{default:0},arcDashAnimateTime:{default:0},arcsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t){Xr(e),t.scene=e,(new He.a).onTick.add((function(e,n){t.arcsData.filter((function(e){return e.__threeObj&&e.__threeObj.children.length&&e.__threeObj.children[0].material&&e.__threeObj.children[0].__dashAnimateStep})).forEach((function(e){var t=e.__threeObj.children[0],r=t.__dashAnimateStep*n,i=t.material.uniforms.dashTranslate.value%1e9;t.material.uniforms.dashTranslate.value=i+r}))}))},update:function(e){var t=Re(e.arcStartLat),n=Re(e.arcStartLng),r=Re(e.arcEndLat),i=Re(e.arcEndLng),o=Re(e.arcAltitude),a=Re(e.arcAltitudeAutoScale),s=Re(e.arcStroke),u=Re(e.arcColor),l=Re(e.arcDashLength),c=Re(e.arcDashGap),h=Re(e.arcDashInitialGap),f=Re(e.arcDashAnimateTime),d=new li.ShaderMaterial(Nr(Nr({},hi),{},{transparent:!0,blending:li.AdditiveBlending}));oi(e.arcsData,e.scene,{createObj:function(){var e=new li.Group;return e.__globeObjType="arc",e},updateObj:function(p,m){var g=s(m),A=null!==g&&void 0!==g;if(!p.children.length||A!==("Mesh"===p.children[0].type)){Xr(p);var v=A?new li.Mesh:new li.Line(new li.BufferGeometry);v.material=d.clone(),p.add(v)}var y=p.children[0];Object.assign(y.material.uniforms,{dashSize:{value:l(m)},gapSize:{value:c(m)},dashOffset:{value:h(m)}});var b=f(m);y.__dashAnimateStep=b>0?1e3/b:0;var _=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t+1;if(e instanceof Array){var o=pn().domain(e.map((function(t,n){return n/(e.length-1)}))).range(e);n=function(e){return ii(o(e))}}else{var a=ii(e);n=function(){return a}}for(var s=new li.Float32BufferAttribute(4*i*r,4),u=0,l=i;u<l;u++)for(var c=n(u/(l-1)),h=0;h<r;h++)s.set(c,4*(u*r+h));return s}(u(m),e.arcCurveResolution,A?e.arcCircularResolution+1:1),w=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e+1,i=r*t,o=new li.Float32BufferAttribute(i,1),a=0,s=r;a<s;a++)for(var u=a/(s-1),l=0;l<t;l++){var c=a*t+l,h=n?i-1-c:c;o.setX(h,u)}return o}(e.arcCurveResolution,A?e.arcCircularResolution+1:1,!0);y.geometry[ci]("vertexColor",_),y.geometry[ci]("vertexRelDistance",w);var x=function(t){var n=m.__currentTargetD=t,r=n.stroke,i=function(e){var t=e.alt,n=e.altAutoScale,r=e.startLat,i=e.startLng,o=e.endLat,a=e.endLng,s=function(e){var t=zr(e,3),n=t[0],r=Zr(t[1],n,t[2]),i=r.x,o=r.y,a=r.z;return new li.Vector3(i,o,a)},u=[i,r],l=[a,o],c=t;if((null===c||void 0===c)&&(c=Le(u,l)/2*n),c){var h=Ce(u,l),f=zr([.25,.75].map((function(e){return[].concat(Hr(h(e)),[1.5*c])})),2),d=f[0],p=f[1];return Vr(li.CubicBezierCurve3,Hr([u,d,p,l].map(s)))}return function(e,t){var n=e.angleTo(t),r=new li.Curve;return r.getPoint=function(r){return(new li.Vector3).addVectors(e.clone().multiplyScalar(Math.sin((1-r)*n)),t.clone().multiplyScalar(Math.sin(r*n))).divideScalar(Math.sin(n))},r}.apply(void 0,Hr([[].concat(u,[.001]),[].concat(l,[.001])].map(s)))}(Gr(n,["stroke"]));A?(y.geometry&&y.geometry.dispose(),y.geometry=new li.TubeBufferGeometry(i,e.arcCurveResolution,r/2,e.arcCircularResolution),y.geometry[ci]("vertexColor",_),y.geometry[ci]("vertexRelDistance",w)):y.geometry.setFromPoints(i.getPoints(e.arcCurveResolution))},S={stroke:g,alt:o(m),altAutoScale:+a(m),startLat:+t(m),startLng:+n(m),endLat:+r(m),endLng:+i(m)},T=m.__currentTargetD||Object.assign({},S,{altAutoScale:-.001});Object.keys(S).some((function(e){return T[e]!==S[e]}))&&(!e.arcsTransitionDuration||e.arcsTransitionDuration<0?x(S):new E.a.Tween(T).to(S,e.arcsTransitionDuration).easing(E.a.Easing.Quadratic.InOut).onUpdate(x).start())}})}}),di=window.THREE?window.THREE:{Color:A.h,FaceColors:A.q,Geometry:A.t,Mesh:A.E,MeshBasicMaterial:A.F,MeshLambertMaterial:A.G,Object3D:A.J},pi=w({props:{hexBinPointsData:{default:[]},hexBinPointLat:{default:"lat"},hexBinPointLng:{default:"lng"},hexBinPointWeight:{default:1},hexBinResolution:{default:4},hexMargin:{default:.2},hexTopCurvatureResolution:{default:5},hexTopColor:{default:function(){return"#ffffaa"}},hexSideColor:{default:function(){return"#ffffaa"}},hexAltitude:{default:function(e){return.01*e.sumWeight}},hexBinMerge:{default:!1},hexTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t){Xr(e),t.scene=e},update:function(e){var t=Re(e.hexBinPointLat),n=Re(e.hexBinPointLng),r=Re(e.hexBinPointWeight),i=Re(e.hexAltitude),o=Re(e.hexTopColor),a=Re(e.hexSideColor),s=Re(e.hexMargin),u=Fe(e.hexBinPointsData.map((function(r){return Nr(Nr({},r),{},{h3Idx:Ar(t(r),n(r),e.hexBinResolution)})})),"h3Idx"),l=Object.entries(u).map((function(e){var t=zr(e,2),n=t[0],i=t[1];return{h3Idx:n,points:i,sumWeight:i.reduce((function(e,t){return e+ +r(t)}),0)}})),c={};if(oi(l,e.hexBinMerge?new di.Object3D:e.scene,{createObj:function(e){var t=new di.Mesh;t.__hexCenter=vr(e.h3Idx),t.__hexGeoJson=yr(e.h3Idx,!0);var n=t.__hexCenter[1];return t.__hexGeoJson.forEach((function(e){var t=e[0];Math.abs(n-t)>170&&(e[0]+=n>t?360:-360)})),t.__globeObjType="hexbin",t},updateObj:function(t,n){var r=(e.hexBinMerge,zn),u={alt:+i(n),margin:Math.max(0,Math.min(1,+s(n))),hexTopCurvatureResolution:e.hexTopCurvatureResolution},l=function(e){var n=t.__currentTargetD=e,i=n.alt,o=n.margin,a=n.hexTopCurvatureResolution,s=Math.abs(i-u.alt)<1e-9&&Math.abs(o-u.margin)<1e-9?a:180,l=zr(t.__hexCenter,2),c=l[0],h=l[1],f=0===o?t.__hexGeoJson:t.__hexGeoJson.map((function(e){var t=zr(e,2),n=t[0],r=t[1];return[[n,h],[r,c]].map((function(e){var t=zr(e,2);return function(e,t,n){return e-(e-t)*n}(t[0],t[1],o)}))}));t.geometry=new r([f],100,100*(1+i),!1,!0,!0,s)},h=t.__currentTargetD||Object.assign({},u,{alt:-.001});Object.keys(u).some((function(e){return h[e]!==u[e]}))&&(e.hexBinMerge||!e.hexTransitionDuration||e.hexTransitionDuration<0?l(u):new E.a.Tween(h).to(u,e.hexTransitionDuration).easing(E.a.Easing.Quadratic.InOut).onUpdate(l).start());if(!e.hexBinMerge){var f=a(n),d=o(n);[f,d].forEach((function(e){if(!c.hasOwnProperty(e)){var t=ri(e);c[e]=new di.MeshLambertMaterial({color:ni(e),transparent:t<1,opacity:t})}})),t.material=[f,d].map((function(e){return c[e]}))}},idAccessor:function(e){return e.h3Idx}}),e.hexBinMerge){var h=new di.Geometry;l.forEach((function(e){var t=e.__threeObj;e.__threeObj=void 0;var n=new di.Color(o(e)),r=new di.Color(a(e)),i=t.geometry.faces.length-4;t.geometry.faces.forEach((function(e,t){return e.color=t>=i?n:r})),t.updateMatrix(),h.merge(t.geometry,t.matrix)}));var f=new di.Mesh(h,new di.MeshBasicMaterial({color:16777215,vertexColors:di.FaceColors,morphTargets:!1}));f.__globeObjType="hexBinPoints",f.__data=l,Xr(e.scene),e.scene.add(f)}}}),mi=window.THREE?window.THREE:{DoubleSide:A.n,Group:A.u,Line:A.y,LineBasicMaterial:A.z,Mesh:A.E,MeshBasicMaterial:A.F},gi=w({props:{polygonsData:{default:[]},polygonGeoJsonGeometry:{default:"geometry"},polygonSideColor:{default:function(){return"#ffffaa"}},polygonCapColor:{default:function(){return"#ffffaa"}},polygonStrokeColor:{},polygonAltitude:{default:.01},polygonCapCurvatureResolution:{default:5},polygonsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t){Xr(e),t.scene=e},update:function(e){var t=Re(e.polygonGeoJsonGeometry),n=Re(e.polygonAltitude),r=Re(e.polygonCapCurvatureResolution),i=Re(e.polygonCapColor),o=Re(e.polygonSideColor),a=Re(e.polygonStrokeColor),s=[];e.polygonsData.forEach((function(e){var u={data:e,capColor:i(e),sideColor:o(e),strokeColor:a(e),altitude:+n(e),capCurvatureResolution:+r(e)},l=t(e),c=e.__id||"".concat(Math.round(1e9*Math.random()));e.__id=c,"Polygon"===l.type?s.push(Nr({id:"".concat(c,"_0"),coords:l.coordinates},u)):"MultiPolygon"===l.type?s.push.apply(s,Hr(l.coordinates.map((function(e,t){return Nr({id:"".concat(c,"_").concat(t),coords:e},u)})))):console.warn("Unsupported GeoJson geometry type: ".concat(l.type,". Skipping geometry..."))})),oi(s,e.scene,{idAccessor:function(e){return e.id},createObj:function(){var e=new mi.Group;return e.add(new mi.Mesh(void 0,[new mi.MeshBasicMaterial({side:mi.DoubleSide,depthWrite:!0}),new mi.MeshBasicMaterial({side:mi.DoubleSide,depthWrite:!0})])),e.add(new mi.Line(void 0,new mi.LineBasicMaterial)),e.__globeObjType="polygon",e},updateObj:function(t,n){var r=n.coords,i=n.capColor,o=n.sideColor,a=n.strokeColor,s=n.altitude,u=n.capCurvatureResolution,l=zr(t.children,2),c=l[0],h=l[1],f=!!a;if(h.visible=f,[o,i].forEach((function(e,t){var n=c.material[t],r=ri(e);n.color.set(ni(e)),n.transparent=r<1,n.opacity=r})),f){var d=h.material,p=ri(a);d.color.set(ni(a)),d.transparent=p<1,d.opacity=p}var m={type:"Polygon",coordinates:r},g={alt:s,capCurvatureResolution:u},A=function(e){var n=t.__currentTargetD=e,i=n.alt,o=n.capCurvatureResolution,a=Math.abs(i-g.alt)<1e-9?o:180;c.geometry=new Hn(r,100,100*(1+i),!1,!0,!0,a),f&&(h.geometry=new O(m,100*(1+i+1e-4),a))},v=t.__currentTargetD||Object.assign({},g,{alt:-.001});Object.keys(g).some((function(e){return v[e]!==g[e]}))&&(!e.polygonsTransitionDuration||e.polygonsTransitionDuration<0||v.alt===g.alt?A(g):new E.a.Tween(v).to(g,e.polygonsTransitionDuration).easing(E.a.Easing.Quadratic.InOut).onUpdate(A).start())}})}}),Ai=window.THREE?window.THREE:{Geometry:A.t,Mesh:A.E,MeshLambertMaterial:A.G},vi=w({props:{hexPolygonsData:{default:[]},hexPolygonGeoJsonGeometry:{default:"geometry"},hexPolygonColor:{default:function(){return"#ffffaa"}},hexPolygonAltitude:{default:.001},hexPolygonResolution:{default:3},hexPolygonMargin:{default:.2},hexPolygonCurvatureResolution:{default:5},hexPolygonsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t){Xr(e),t.scene=e},update:function(e){var t=Re(e.hexPolygonGeoJsonGeometry),n=Re(e.hexPolygonColor),r=Re(e.hexPolygonAltitude),i=Re(e.hexPolygonResolution),o=Re(e.hexPolygonMargin),a=Re(e.hexPolygonCurvatureResolution);oi(e.hexPolygonsData,e.scene,{createObj:function(e){var t=new Ai.Mesh(void 0,new Ai.MeshLambertMaterial);return t.__globeObjType="hexPolygon",t},updateObj:function(s,u){var l=t(u),c=i(u),h=r(u),f=Math.max(0,Math.min(1,+o(u))),d=a(u),p=n(u),m=ri(p);s.material.color.set(ni(p)),s.material.transparent=m<1,s.material.opacity=m;var g=[];"Polygon"===l.type?g.push.apply(g,Hr(br(l.coordinates,c,!0))):"MultiPolygon"===l.type?l.coordinates.forEach((function(e){return g.push.apply(g,Hr(br(e,c,!0)))})):console.warn("Unsupported GeoJson geometry type: ".concat(l.type,". Skipping geometry..."));var A=g.map((function(e){var t=vr(e),n=yr(e,!0),r=t[1];return n.forEach((function(e){var t=e[0];Math.abs(r-t)>170&&(e[0]+=r>t?360:-360)})),{h3Idx:e,hexCenter:t,hexGeoJson:n}})),v={alt:h,margin:f,curvatureResolution:d},y=function(e){var t=s.__currentTargetD=e,n=t.alt,r=t.margin,i=t.curvatureResolution;s.geometry=new Ai.Geometry,A.forEach((function(e){var t=zr(e.hexCenter,2),o=t[0],a=t[1],u=new zn([0===r?e.hexGeoJson:e.hexGeoJson.map((function(e){var t=zr(e,2),n=t[0],i=t[1];return[[n,a],[i,o]].map((function(e){var t=zr(e,2);return function(e,t,n){return e-(e-t)*n}(t[0],t[1],r)}))}))],100,100*(1+n),!1,!0,!1,i);s.geometry.merge(u)}))},b=s.__currentTargetD||Object.assign({},v,{alt:-.001});Object.keys(v).some((function(e){return b[e]!==v[e]}))&&(!e.hexPolygonsTransitionDuration||e.hexPolygonsTransitionDuration<0?y(v):new E.a.Tween(b).to(v,e.hexPolygonsTransitionDuration).easing(E.a.Easing.Quadratic.InOut).onUpdate(y).start())}})}}),yi=window.THREE?window.THREE:{Vector3:A.fb};function bi(e,t){var n=Math.max(e.length,t.length),r=Ot.apply(void 0,Hr([e,t].map((function(e){return e.map((function(e){return[e.x,e.y,e.z]}))})).map((function(e){return function(e,t){var n=e[e.length-1];return[].concat(Hr(e),Hr(Hr(new Array(t-e.length)).map((function(){return n}))))}(e,n)}))));return function(n){return 0===n?e:1===n?t:r(n).map((function(e){var t=zr(e,3),n=t[0],r=t[1],i=t[2];return new yi.Vector3(n,r,i)}))}}var _i=window.THREE?window.THREE:{AdditiveBlending:A.a,BufferGeometry:A.e,Color:A.h,Float32BufferAttribute:A.r,Group:A.u,Line:A.y,NoColors:A.I,ShaderMaterial:A.T,Vector3:A.fb,VertexColors:A.gb},wi=(new _i.BufferGeometry).setAttribute?"setAttribute":"addAttribute",Ei={uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:"\n    uniform float dashTranslate;\n\n    attribute vec4 vertexColor;\n    varying vec4 vColor;\n\n    attribute float vertexRelDistance;\n    varying float vRelDistance;\n\n    void main() {\n      // pass through colors and distances\n      vColor = vertexColor;\n      vRelDistance = vertexRelDistance + dashTranslate;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ",fragmentShader:"\n    uniform float dashOffset;\n    uniform float dashSize;\n    uniform float gapSize;\n\n    varying vec4 vColor;\n    varying float vRelDistance;\n\n    void main() {\n      // ignore pixels in the gap\n      if (vRelDistance < dashOffset) discard;\n      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;\n\n      // set px color: [r, g, b, a], interpolated between vertices\n      gl_FragColor = vColor;\n    }\n  "},xi=w({props:{pathsData:{default:[]},pathPoints:{default:function(e){return e}},pathPointLat:{default:function(e){return e[0]}},pathPointLng:{default:function(e){return e[1]}},pathPointAlt:{default:.001},pathResolution:{default:2},pathColor:{default:function(){return"#ffffaa"}},pathStroke:{},pathDashLength:{default:1},pathDashGap:{default:0},pathDashInitialGap:{default:0},pathDashAnimateTime:{default:0},pathTransitionDuration:{default:1e3,triggerUpdate:!1},rendererSize:{}},init:function(e,t){Xr(e),t.scene=e,(new He.a).onTick.add((function(e,n){t.pathsData.filter((function(e){return e.__threeObj&&e.__threeObj.children.length&&e.__threeObj.children[0].material&&e.__threeObj.children[0].__dashAnimateStep})).forEach((function(e){var t=e.__threeObj.children[0],r=t.__dashAnimateStep*n,i=t.material.uniforms.dashTranslate.value%1e9;t.material.uniforms.dashTranslate.value=i+r}))}))},update:function(e){var t=Re(e.pathPoints),n=Re(e.pathPointLat),r=Re(e.pathPointLng),i=Re(e.pathPointAlt),o=Re(e.pathStroke),a=Re(e.pathColor),s=Re(e.pathDashLength),u=Re(e.pathDashGap),l=Re(e.pathDashInitialGap),c=Re(e.pathDashAnimateTime),h=new _i.ShaderMaterial(Nr(Nr({},Ei),{},{transparent:!0,blending:_i.AdditiveBlending}));function f(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t+1;if(e instanceof Array){var a=pn().domain(e.map((function(t,n){return n/(e.length-1)}))).range(e);n=function(e){return ii(a(e),i)}}else{var s=ii(e,i);n=function(){return s}}for(var u=i?4:3,l=new _i.Float32BufferAttribute(o*u*r,u),c=0,h=o;c<h;c++)for(var f=n(c/(h-1)),d=0;d<r;d++)l.set(f,(c*r+d)*u);return l}oi(e.pathsData,e.scene,{createObj:function(){var e=new _i.Group;return e.__globeObjType="path",e},updateObj:function(d,p){var m=o(p),g=null!==m&&void 0!==m;if(!d.children.length||g===("Line"===d.children[0].type)){Xr(d);var A=g?new Or(new Rr,new Tr):new _i.Line(new _i.BufferGeometry,h.clone());d.add(A)}var v=d.children[0],y=function(e,t,n,r,i){var o=function(e,t,n){for(var r=[],i=1;i<=n;i++)r.push(e+(t-e)*i/(n+1));return r};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=null;return e.forEach((function(e){if(r){var i=Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2));if(i>t)for(var a=Math.floor(i/t),s=o(r[0],e[0],a),u=o(r[1],e[1],a),l=o(r[2],e[2],a),c=0,h=s.length;c<h;c++)n.push([s[c],u[c],l[c]])}n.push(r=e)})),n}(e.map((function(e){return[t(e),n(e),r(e)]})),i).map((function(e){var t=zr(e,3),n=Zr(t[0],t[1],t[2]),r=n.x,i=n.y,o=n.z;return new _i.Vector3(r,i,o)}))}(t(p),n,r,i,e.pathResolution);if(g){v.material.resolution=e.rendererSize,v.__dashAnimateStep=0;var b=s(p),_=u(p);v.material.dashed=_>0,v.material.dashed?v.material.defines.USE_DASH="":delete v.material.defines.USE_DASH,v.material.dashed&&(v.material.dashScale=1/function(e){var t,n=0;return e.forEach((function(e){t&&(n+=t.distanceTo(e)),t=e})),n}(y),v.material.dashSize=b,v.material.gapSize=_);var w=a(p);if(w instanceof Array){var x=f(a(p),y.length-1,1,!1);v.geometry.setColors(x.array),v.material.vertexColors=_i.VertexColors}else{var S=w,T=ri(S);v.material.color=new _i.Color(ni(S)),v.material.transparent=T<1,v.material.opacity=T,v.material.vertexColors=_i.NoColors}v.material.needsUpdate=!0}else{var M=c(p);v.__dashAnimateStep=M>0?1e3/M:0,Object.assign(v.material.uniforms,{dashSize:{value:s(p)},gapSize:{value:u(p)},dashOffset:{value:l(p)}});var L=f(a(p),y.length),C=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e+1,i=r*t,o=new _i.Float32BufferAttribute(i,1),a=0,s=r;a<s;a++)for(var u=a/(s-1),l=0;l<t;l++){var c=a*t+l,h=n?i-1-c:c;o.setX(h,u)}return o}(y.length,1,!0);v.geometry[wi]("vertexColor",L),v.geometry[wi]("vertexRelDistance",C)}var R=bi(p.__currentTargetD&&p.__currentTargetD.points||[y[0]],y),O=function(e){var t,n=p.__currentTargetD=e,r=n.stroke,i=n.interpolK,o=p.__currentTargetD.points=R(i);g?(v.geometry.setPositions((t=[]).concat.apply(t,Hr(o.map((function(e){return[e.x,e.y,e.z]}))))),v.material.linewidth=r,v.material.dashed&&v.computeLineDistances()):(v.geometry.setFromPoints(o),v.geometry.computeBoundingSphere())},I={stroke:m,interpolK:1},P=Object.assign({},p.__currentTargetD||I,{interpolK:0});Object.keys(I).some((function(e){return P[e]!==I[e]}))&&(!e.pathTransitionDuration||e.pathTransitionDuration<0?O(I):new E.a.Tween(P).to(I,e.pathTransitionDuration).easing(E.a.Easing.Quadratic.InOut).onUpdate(O).start())}})}}),Si={glyphs:{0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},"\u03bf":{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"\xa6":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},"\u03a4":{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},"\u03a0":{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},"\u0390":{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"\xb2":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"\u2013":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},"\u039a":{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},"\u0192":{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},"\u03cc":{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"\xbb":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"\xa9":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},"\u03ce":{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"\xab":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"\u2219":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},"\xff":{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},"\xb5":{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},"\u0399":{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},"\u038e":{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u2019":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},"\u039d":{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},"\u03c2":{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},"\u03a8":{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},"\u03b9":{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},"\u0386":{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},"\u03b5":{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},"\u0394":{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"\u2030":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"\u2014":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},"\u03c1":{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"\xaf":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},"\u0397":{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},"\u0391":{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"\u2026":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},"\u03bd":{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"\xb6":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},"\u03b2":{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},"\u039c":{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},"\u038c":{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u0389":{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u2022":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"\xa5":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},"\u03b3":{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},"\u03b1":{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"\xad":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},"\u03a7":{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"\u2020":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"\xb0":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},"\u039e":{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "},"\xa0":{x_min:0,x_max:0,ha:853},"\u03ab":{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"\u201d":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},"\u038a":{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},"\u0392":{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},"\u03c5":{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},"\u03c7":{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},"\u03af":{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},"\u0396":{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"\xa8":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"\u2039":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"\u201e":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},"\u03b4":{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},"\u03ad":{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},"\u03c9":{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"\xb4":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"\xb1":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"\u03cb":{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"\xa7":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},"\u03a9":{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},"\u03cd":{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"\u2122":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},"\u03ae":{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},"\u0398":{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"\xae":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},"\u0395":{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"\xb3":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},"\u03c3":{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},"\u03b6":{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},"\u03b8":{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},"\u039f":{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},"\u0393":{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},"\u0388":{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u038f":{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},"\u03aa":{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"\xbd":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},"\u03a1":{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},"\xaa":{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"\u0385":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},"\u03a6":{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"\u204b":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},"\u03a3":{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"\u203a":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"\xa3":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"\xac":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},"\u03bb":{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},"\u03c4":{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},"\u03be":{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},"\u039b":{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},"\u03b0":{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"\xb7":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},"\u03a5":{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},"\u03bc":{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},"\u03c6":{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"\u201c":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"\u2018":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},"\u03ca":{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},"\u03c0":{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},"\u03ac":{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"\xa4":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},"\u03ba":{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"\u2021":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},"\u03c8":{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},"\u03b7":{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},cssFontWeight:"normal",ascender:1189,underlinePosition:-100,cssFontStyle:"normal",boundingBox:{yMin:-334,xMin:-111,yMax:1189,xMax:1672},resolution:1e3,original_font_information:{postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) \u039cagenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"\u039cagenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:'Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r\n\r\nThe above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r\n\r\nThe Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r\n\r\nThis License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r\n\r\nThe Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r\n\r\nTHE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.',manufacturer_name:"\u039cagenta ltd",font_sub_family_name:"Regular"},descender:-334,familyName:"Helvetiker",lineHeight:1522,underlineThickness:50},Ti=window.THREE?window.THREE:{CircleBufferGeometry:A.f,Font:A.s,Group:A.u,Mesh:A.E,MeshLambertMaterial:A.G,TextBufferGeometry:A.Z,Vector3:A.fb},Mi=w({props:{labelsData:{default:[]},labelLat:{default:"lat"},labelLng:{default:"lng"},labelAltitude:{default:0},labelText:{default:"text"},labelSize:{default:.5},labelTypeFace:{default:Si,onChange:function(e,t){t.font=new A.s(e)}},labelColor:{default:function(){return"lightgrey"}},labelRotation:{default:0},labelResolution:{default:3},labelIncludeDot:{default:!0},labelDotRadius:{default:.1},labelDotOrientation:{default:function(){return"bottom"}},labelsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t){Xr(e),t.scene=e},update:function(e){var t=Re(e.labelLat),n=Re(e.labelLng),r=Re(e.labelAltitude),i=Re(e.labelText),o=Re(e.labelSize),a=Re(e.labelRotation),s=Re(e.labelColor),u=Re(e.labelIncludeDot),l=Re(e.labelDotRadius),c=Re(e.labelDotOrientation),h=new Set(["right","top","bottom"]),f=2*Math.PI*100/360,d=new A.f(1,16);oi(e.labelsData,e.scene,{createObj:function(){var e=new A.G,t=new Ti.Group;return t.add(new A.E(d,e)),t.add(new A.E(void 0,e)),t.__globeObjType="label",t},updateObj:function(d,p){var m=zr(d.children,2),g=m[0],v=m[1],y=s(p),b=ri(y);v.material.color.set(ni(y)),v.material.transparent=b<1,v.material.opacity=b;var _=u(p),w=c(p);!_||!h.has(w)&&(w="bottom");var x=_?+l(p)*f:1e-12;g.scale.x=g.scale.y=x;var S=+o(p)*f;if(v.geometry=new A.Z(i(p),{font:e.font,size:S,height:0,curveSegments:e.labelResolution}),"right"!==w&&v.geometry.center(),_){var T=x+S/2;"right"===w&&(v.position.x=T),v.position.y={right:-S/2,top:T+S/2,bottom:-T-S/2}[w]}var M=function(t){var n=d.__currentTargetD=t,r=n.lat,i=n.lng,o=n.alt,a=n.rot,s=n.scale;Object.assign(d.position,Zr(r,i,o)),d.lookAt(e.scene.localToWorld(new Ti.Vector3(0,0,0))),d.rotateY(Math.PI),d.rotateZ(-a*Math.PI/180),d.scale.x=d.scale.y=d.scale.z=s},L={lat:+t(p),lng:+n(p),alt:+r(p),rot:+a(p),scale:1},C=d.__currentTargetD||Object.assign({},L,{scale:1e-12});Object.keys(L).some((function(e){return C[e]!==L[e]}))&&(!e.labelsTransitionDuration||e.labelsTransitionDuration<0?M(L):new E.a.Tween(C).to(L,e.labelsTransitionDuration).easing(E.a.Easing.Quadratic.InOut).onUpdate(M).start())}})}}),Li=w({props:{customLayerData:{default:[]},customThreeObject:{},customThreeObjectUpdate:{triggerUpdate:!1}},init:function(e,t){Xr(e),t.scene=e},update:function(e){e.customThreeObjectUpdate||Xr(e.scene);var t=Re(e.customThreeObject),n=Re(e.customThreeObjectUpdate);oi(e.customLayerData,e.scene,{createObj:function(n){var r=t(n,100);return r&&(e.customThreeObject===r&&(r=r.clone()),r.__globeObjType="custom"),r},updateObj:function(e,t){return n(e,t,100)}})}}),Ci=window.THREE?window.THREE:{Group:A.u,Vector2:A.eb,Vector3:A.fb},Ri=["globeLayer","pointsLayer","arcsLayer","hexBinLayer","polygonsLayer","hexedPolygonsLayer","pathsLayer","labelsLayer","customLayer"],Oi=Jr("globeLayer",ti),Ii=Object.assign.apply(Object,Hr(["globeImageUrl","bumpImageUrl","showAtmosphere","showGraticules"].map((function(e){return Pr({},e,Oi.linkProp(e))})))),Pi=Object.assign.apply(Object,Hr(["globeMaterial"].map((function(e){return Pr({},e,Oi.linkMethod(e))})))),ki=Jr("pointsLayer",ui),Ni=Object.assign.apply(Object,Hr(["pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration"].map((function(e){return Pr({},e,ki.linkProp(e))})))),Di=Jr("arcsLayer",fi),Fi=Object.assign.apply(Object,Hr(["arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration"].map((function(e){return Pr({},e,Di.linkProp(e))})))),ji=Jr("hexBinLayer",pi),Bi=Object.assign.apply(Object,Hr(["hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration"].map((function(e){return Pr({},e,ji.linkProp(e))})))),Vi=Jr("hexedPolygonsLayer",vi),Gi=Object.assign.apply(Object,Hr(["hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonCurvatureResolution","hexPolygonsTransitionDuration"].map((function(e){return Pr({},e,Vi.linkProp(e))})))),Ui=Jr("polygonsLayer",gi),qi=Object.assign.apply(Object,Hr(["polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonSideColor","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration"].map((function(e){return Pr({},e,Ui.linkProp(e))})))),Wi=Jr("pathsLayer",xi),zi=Object.assign.apply(Object,Hr(["pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration"].map((function(e){return Pr({},e,Wi.linkProp(e))})))),Hi=Jr("labelsLayer",Mi),Ki=Object.assign.apply(Object,Hr(["labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration"].map((function(e){return Pr({},e,Hi.linkProp(e))})))),Yi=Jr("customLayer",Li),Qi=Object.assign.apply(Object,Hr(["customLayerData","customThreeObject","customThreeObjectUpdate"].map((function(e){return Pr({},e,Yi.linkProp(e))}))));var Xi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(t){Dr(i,t);var r=Wr(i);function i(){var t;Ir(this,i);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(t=r.call.apply(r,[this].concat(a))).__kapsuleInstance=e.apply(void 0,a).apply(void 0,[].concat(Hr(n?[Ur(t)]:[]),a)),t}return i}(t);return Object.keys(e()).forEach((function(e){return r.prototype[e]=function(){var t,n=(t=this.__kapsuleInstance)[e].apply(t,arguments);return n===this.__kapsuleInstance?this:n}})),r}(w({props:Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr({rendererSize:{default:new Ci.Vector2(window.innerWidth,window.innerHeight),onChange:function(e,t){t.pathsLayer.rendererSize(e)},triggerUpdate:!1}},Ii),Ni),Fi),Bi),qi),Gi),zi),Ki),Qi),methods:Nr({getCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zr.apply(void 0,n)},toGeoCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $r.apply(void 0,n)}},Pi),stateInit:function(){return{globeLayer:ti(),pointsLayer:ui(),arcsLayer:fi(),hexBinLayer:pi(),polygonsLayer:gi(),hexedPolygonsLayer:vi(),pathsLayer:xi(),labelsLayer:Mi(),customLayer:Li()}},init:function(e,t,n){var r=n.animateIn,i=void 0===r||r,o=n.waitForGlobeReady,a=void 0===o||o;Xr(e),e.add(t.scene=new Ci.Group),t.scene.visible=!1,Ri.forEach((function(e){var n=new Ci.Group;t.scene.add(n),t[e](n)}));var s=function(){if(i){t.scene.scale.set(1e-6,1e-6,1e-6),new E.a.Tween({k:1e-6}).to({k:1},600).easing(E.a.Easing.Quadratic.Out).onUpdate((function(e){var n=e.k;return t.scene.scale.set(n,n,n)})).start();var e=new Ci.Vector3(0,1,0);new E.a.Tween({rot:2*Math.PI}).to({rot:0},1200).easing(E.a.Easing.Quintic.Out).onUpdate((function(n){var r=n.rot;return t.scene.setRotationFromAxisAngle(e,r)})).start()}t.scene.visible=!0};a?t.globeLayer.onReady(s):s(),function e(){requestAnimationFrame(e),E.a.update()}()},update:function(e){}}),A.u,!0),Ji=function(e,t){void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var n=this,r=-1,i=0,o=1,a=2,s=3,u=4;this.object=e,this.domElement=t,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:A.C.ROTATE,MIDDLE:A.C.ZOOM,RIGHT:A.C.PAN},this.target=new A.fb;var l=new A.fb,c=1,h=r,f=r,d=new A.fb,p=new A.eb,m=new A.eb,g=new A.fb,v=0,y=new A.eb,b=new A.eb,_=0,w=0,E=new A.eb,x=new A.eb;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var S={type:"change"},T={type:"start"},M={type:"end"};this.handleResize=function(){var e=n.domElement.getBoundingClientRect(),t=n.domElement.ownerDocument.documentElement;n.screen.left=e.left+window.pageXOffset-t.clientLeft,n.screen.top=e.top+window.pageYOffset-t.clientTop,n.screen.width=e.width,n.screen.height=e.height};var L=function(){var e=new A.eb;return function(t,r){return e.set((t-n.screen.left)/n.screen.width,(r-n.screen.top)/n.screen.height),e}}(),C=function(){var e=new A.eb;return function(t,r){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-r))/n.screen.width),e}}();function R(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":!function(e){if(e.preventDefault(),e.stopPropagation(),h===r)switch(e.button){case n.mouseButtons.LEFT:h=i;break;case n.mouseButtons.MIDDLE:h=o;break;case n.mouseButtons.RIGHT:h=a;break;default:h=r}var t=f!==r?f:h;t!==i||n.noRotate?t!==o||n.noZoom?t!==a||n.noPan||(E.copy(L(e.pageX,e.pageY)),x.copy(E)):(y.copy(L(e.pageX,e.pageY)),b.copy(y)):(m.copy(C(e.pageX,e.pageY)),p.copy(m));n.domElement.ownerDocument.addEventListener("pointermove",O,!1),n.domElement.ownerDocument.addEventListener("pointerup",I,!1),n.dispatchEvent(T)}(e)}}function O(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":!function(e){if(!1===n.enabled)return;e.preventDefault(),e.stopPropagation();var t=f!==r?f:h;t!==i||n.noRotate?t!==o||n.noZoom?t!==a||n.noPan||x.copy(L(e.pageX,e.pageY)):b.copy(L(e.pageX,e.pageY)):(p.copy(m),m.copy(C(e.pageX,e.pageY)))}(e)}}function I(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":!function(e){if(!1===n.enabled)return;e.preventDefault(),e.stopPropagation(),h=r,n.domElement.ownerDocument.removeEventListener("pointermove",O),n.domElement.ownerDocument.removeEventListener("pointerup",I),n.dispatchEvent(M)}(e)}}function P(e){!1!==n.enabled&&(window.removeEventListener("keydown",P),f===r&&(e.keyCode!==n.keys[i]||n.noRotate?e.keyCode!==n.keys[o]||n.noZoom?e.keyCode!==n.keys[a]||n.noPan||(f=a):f=o:f=i))}function k(){!1!==n.enabled&&(f=r,window.addEventListener("keydown",P,!1))}function N(e){if(!1!==n.enabled&&!0!==n.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:y.y-=.025*e.deltaY;break;case 1:y.y-=.01*e.deltaY;break;default:y.y-=25e-5*e.deltaY}n.dispatchEvent(T),n.dispatchEvent(M)}}function D(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:h=s,m.copy(C(e.touches[0].pageX,e.touches[0].pageY)),p.copy(m);break;default:h=u;var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY;w=_=Math.sqrt(t*t+r*r);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;E.copy(L(i,o)),x.copy(E)}n.dispatchEvent(T)}}function F(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:p.copy(m),m.copy(C(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY;w=Math.sqrt(t*t+r*r);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;x.copy(L(i,o))}}function j(e){if(!1!==n.enabled){switch(e.touches.length){case 0:h=r;break;case 1:h=s,m.copy(C(e.touches[0].pageX,e.touches[0].pageY)),p.copy(m)}n.dispatchEvent(M)}}function B(e){!1!==n.enabled&&e.preventDefault()}this.rotateCamera=function(){var e,t=new A.fb,r=new A.O,i=new A.fb,o=new A.fb,a=new A.fb,s=new A.fb;return function(){s.set(m.x-p.x,m.y-p.y,0),(e=s.length())?(d.copy(n.object.position).sub(n.target),i.copy(d).normalize(),o.copy(n.object.up).normalize(),a.crossVectors(o,i).normalize(),o.setLength(m.y-p.y),a.setLength(m.x-p.x),s.copy(o.add(a)),t.crossVectors(s,d).normalize(),e*=n.rotateSpeed,r.setFromAxisAngle(t,e),d.applyQuaternion(r),n.object.up.applyQuaternion(r),g.copy(t),v=e):!n.staticMoving&&v&&(v*=Math.sqrt(1-n.dynamicDampingFactor),d.copy(n.object.position).sub(n.target),r.setFromAxisAngle(g,v),d.applyQuaternion(r),n.object.up.applyQuaternion(r)),p.copy(m)}}(),this.zoomCamera=function(){var e;h===u?(e=_/w,_=w,n.object.isPerspectiveCamera?d.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom*=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(b.y-y.y)*n.zoomSpeed)&&e>0&&(n.object.isPerspectiveCamera?d.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom/=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?y.copy(b):y.y+=(b.y-y.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new A.eb,t=new A.fb,r=new A.fb;return function(){if(e.copy(x).sub(E),e.lengthSq()){if(n.object.isOrthographicCamera){var i=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,o=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;e.x*=i,e.y*=o}e.multiplyScalar(d.length()*n.panSpeed),r.copy(d).cross(n.object.up).setLength(e.x),r.add(t.copy(n.object.up).setLength(e.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?E.copy(x):E.add(e.subVectors(x,E).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(d.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,d.setLength(n.maxDistance)),y.copy(b)),d.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,d.setLength(n.minDistance)),y.copy(b)))},this.update=function(){d.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,d),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),l.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(S),l.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(l.distanceToSquared(n.object.position)>1e-6||c!==n.object.zoom)&&(n.dispatchEvent(S),l.copy(n.object.position),c=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){h=r,f=r,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),d.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(S),l.copy(n.object.position),c=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",B,!1),n.domElement.removeEventListener("pointerdown",R,!1),n.domElement.removeEventListener("wheel",N,!1),n.domElement.removeEventListener("touchstart",D,!1),n.domElement.removeEventListener("touchend",j,!1),n.domElement.removeEventListener("touchmove",F,!1),n.domElement.ownerDocument.removeEventListener("pointermove",O,!1),n.domElement.ownerDocument.removeEventListener("pointerup",I,!1),window.removeEventListener("keydown",P,!1),window.removeEventListener("keyup",k,!1)},this.domElement.addEventListener("contextmenu",B,!1),this.domElement.addEventListener("pointerdown",R,!1),this.domElement.addEventListener("wheel",N,!1),this.domElement.addEventListener("touchstart",D,!1),this.domElement.addEventListener("touchend",j,!1),this.domElement.addEventListener("touchmove",F,!1),this.domElement.ownerDocument.addEventListener("pointermove",O,!1),this.domElement.ownerDocument.addEventListener("pointerup",I,!1),window.addEventListener("keydown",P,!1),window.addEventListener("keyup",k,!1),this.handleResize(),this.update()};Ji.prototype=Object.create(A.o.prototype),Ji.prototype.constructor=Ji;var Zi=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new A.fb,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:A.C.ROTATE,MIDDLE:A.C.DOLLY,RIGHT:A.C.PAN},this.touches={ONE:A.Y.ROTATE,TWO:A.Y.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=a.NONE},this.update=function(){var t=new A.fb,i=(new A.O).setFromUnitVectors(e.up,new A.fb(0,1,0)),o=i.clone().inverse(),p=new A.fb,m=new A.O,g=2*Math.PI;return function(){var e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),l.setFromVector3(t),n.autoRotate&&s===a.NONE&&S(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(l.theta+=c.theta*n.dampingFactor,l.phi+=c.phi*n.dampingFactor):(l.theta+=c.theta,l.phi+=c.phi);var A=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(A)&&isFinite(v)&&(A<-Math.PI?A+=g:A>Math.PI&&(A-=g),v<-Math.PI?v+=g:v>Math.PI&&(v-=g),l.theta=A<v?Math.max(A,Math.min(v,l.theta)):l.theta>(A+v)/2?Math.max(A,l.theta):Math.min(v,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=h,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),t.setFromSpherical(l),t.applyQuaternion(o),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),f.set(0,0,0)),h=1,!!(d||p.distanceToSquared(n.object.position)>u||8*(1-m.dot(n.object.quaternion))>u)&&(n.dispatchEvent(r),p.copy(n.object.position),m.copy(n.object.quaternion),d=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Y,!1),n.domElement.removeEventListener("pointerdown",V,!1),n.domElement.removeEventListener("wheel",q,!1),n.domElement.removeEventListener("touchstart",z,!1),n.domElement.removeEventListener("touchend",K,!1),n.domElement.removeEventListener("touchmove",H,!1),n.domElement.ownerDocument.removeEventListener("pointermove",G,!1),n.domElement.ownerDocument.removeEventListener("pointerup",U,!1),n.domElement.removeEventListener("keydown",W,!1)};var n=this,r={type:"change"},i={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=a.NONE,u=1e-6,l=new A.X,c=new A.X,h=1,f=new A.fb,d=!1,p=new A.eb,m=new A.eb,g=new A.eb,v=new A.eb,y=new A.eb,b=new A.eb,_=new A.eb,w=new A.eb,E=new A.eb;function x(){return Math.pow(.95,n.zoomSpeed)}function S(e){c.theta-=e}function T(e){c.phi-=e}var M=function(){var e=new A.fb;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),f.add(e)}}(),L=function(){var e=new A.fb;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),f.add(e)}}(),C=function(){var e=new A.fb;return function(t,r){var i=n.domElement;if(n.object.isPerspectiveCamera){var o=n.object.position;e.copy(o).sub(n.target);var a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),M(2*t*a/i.clientHeight,n.object.matrix),L(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(M(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),L(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function R(e){n.object.isPerspectiveCamera?h/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){n.object.isPerspectiveCamera?h*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(e){p.set(e.clientX,e.clientY)}function P(e){v.set(e.clientX,e.clientY)}function k(e){if(1==e.touches.length)p.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);p.set(t,n)}}function N(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,n)}}function D(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);_.set(0,r)}function F(e){if(1==e.touches.length)m.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);m.set(t,r)}g.subVectors(m,p).multiplyScalar(n.rotateSpeed);var i=n.domElement;S(2*Math.PI*g.x/i.clientHeight),T(2*Math.PI*g.y/i.clientHeight),p.copy(m)}function j(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,r)}b.subVectors(y,v).multiplyScalar(n.panSpeed),C(b.x,b.y),v.copy(y)}function B(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);w.set(0,i),E.set(0,Math.pow(w.y/_.y,n.zoomSpeed)),R(E.y),_.copy(w)}function V(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":!function(e){var t;switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case A.C.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY)}(e),s=a.DOLLY;break;case A.C.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;P(e),s=a.PAN}else{if(!1===n.enableRotate)return;I(e),s=a.ROTATE}break;case A.C.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;I(e),s=a.ROTATE}else{if(!1===n.enablePan)return;P(e),s=a.PAN}break;default:s=a.NONE}s!==a.NONE&&(n.domElement.ownerDocument.addEventListener("pointermove",G,!1),n.domElement.ownerDocument.addEventListener("pointerup",U,!1),n.dispatchEvent(i))}(e)}}function G(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":!function(e){if(!1===n.enabled)return;switch(e.preventDefault(),s){case a.ROTATE:if(!1===n.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),g.subVectors(m,p).multiplyScalar(n.rotateSpeed);var t=n.domElement;S(2*Math.PI*g.x/t.clientHeight),T(2*Math.PI*g.y/t.clientHeight),p.copy(m),n.update()}(e);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),E.subVectors(w,_),E.y>0?R(x()):E.y<0&&O(x()),_.copy(w),n.update()}(e);break;case a.PAN:if(!1===n.enablePan)return;!function(e){y.set(e.clientX,e.clientY),b.subVectors(y,v).multiplyScalar(n.panSpeed),C(b.x,b.y),v.copy(y),n.update()}(e)}}(e)}}function U(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":!function(e){if(!1===n.enabled)return;n.domElement.ownerDocument.removeEventListener("pointermove",G,!1),n.domElement.ownerDocument.removeEventListener("pointerup",U,!1),n.dispatchEvent(o),s=a.NONE}()}}function q(e){!1===n.enabled||!1===n.enableZoom||s!==a.NONE&&s!==a.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(i),function(e){e.deltaY<0?O(x()):e.deltaY>0&&R(x()),n.update()}(e),n.dispatchEvent(o))}function W(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){var t=!1;switch(e.keyCode){case n.keys.UP:C(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:C(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:C(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:C(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function z(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case A.Y.ROTATE:if(!1===n.enableRotate)return;k(e),s=a.TOUCH_ROTATE;break;case A.Y.PAN:if(!1===n.enablePan)return;N(e),s=a.TOUCH_PAN;break;default:s=a.NONE}break;case 2:switch(n.touches.TWO){case A.Y.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&D(e),n.enablePan&&N(e)}(e),s=a.TOUCH_DOLLY_PAN;break;case A.Y.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&D(e),n.enableRotate&&k(e)}(e),s=a.TOUCH_DOLLY_ROTATE;break;default:s=a.NONE}break;default:s=a.NONE}s!==a.NONE&&n.dispatchEvent(i)}}function H(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),s){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;F(e),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;j(e),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&B(e),n.enablePan&&j(e)}(e),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&B(e),n.enableRotate&&F(e)}(e),n.update();break;default:s=a.NONE}}function K(e){!1!==n.enabled&&(n.dispatchEvent(o),s=a.NONE)}function Y(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",Y,!1),n.domElement.addEventListener("pointerdown",V,!1),n.domElement.addEventListener("wheel",q,!1),n.domElement.addEventListener("touchstart",z,!1),n.domElement.addEventListener("touchend",K,!1),n.domElement.addEventListener("touchmove",H,!1),n.domElement.addEventListener("keydown",W,!1),-1===n.domElement.tabIndex&&(n.domElement.tabIndex=0),this.update()};Zi.prototype=Object.create(A.o.prototype),Zi.prototype.constructor=Zi;var $i=function(e,t){Zi.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=A.C.PAN,this.mouseButtons.RIGHT=A.C.ROTATE,this.touches.ONE=A.Y.PAN,this.touches.TWO=A.Y.DOLLY_ROTATE};($i.prototype=Object.create(A.o.prototype)).constructor=$i;var eo=function(e,t){void 0===t&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,t&&this.domElement.setAttribute("tabindex",-1),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;var n=this,r={type:"change"};function i(e,t){return function(){t.apply(e,arguments)}}function o(e){e.preventDefault()}this.tmpQuaternion=new A.O,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new A.fb(0,0,0),this.rotationVector=new A.fb(0,0,0),this.keydown=function(e){if(!e.altKey){switch(e.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(e){switch(e.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(e){if(!this.dragToLook||this.mouseStatus>0){var t=this.getContainerDimensions(),n=t.size[0]/2,r=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-n)/n,this.moveState.pitchDown=(e.pageY-t.offset[1]-r)/r,this.updateRotationVector()}},this.mouseup=function(e){if(e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(){var e=new A.O,t=new A.fb;return function(i){var o=i*n.movementSpeed,a=i*n.rollSpeed;n.object.translateX(n.moveVector.x*o),n.object.translateY(n.moveVector.y*o),n.object.translateZ(n.moveVector.z*o),n.tmpQuaternion.set(n.rotationVector.x*a,n.rotationVector.y*a,n.rotationVector.z*a,1).normalize(),n.object.quaternion.multiply(n.tmpQuaternion),(t.distanceToSquared(n.object.position)>1e-6||8*(1-e.dot(n.object.quaternion))>1e-6)&&(n.dispatchEvent(r),e.copy(n.object.quaternion),t.copy(n.object.position))}}(),this.updateMovementVector=function(){var e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",o,!1),this.domElement.removeEventListener("mousedown",s,!1),this.domElement.removeEventListener("mousemove",a,!1),this.domElement.removeEventListener("mouseup",u,!1),window.removeEventListener("keydown",l,!1),window.removeEventListener("keyup",c,!1)};var a=i(this,this.mousemove),s=i(this,this.mousedown),u=i(this,this.mouseup),l=i(this,this.keydown),c=i(this,this.keyup);this.domElement.addEventListener("contextmenu",o,!1),this.domElement.addEventListener("mousemove",a,!1),this.domElement.addEventListener("mousedown",s,!1),this.domElement.addEventListener("mouseup",u,!1),window.addEventListener("keydown",l,!1),window.addEventListener("keyup",c,!1),this.updateMovementVector(),this.updateRotationVector()};eo.prototype=Object.create(A.o.prototype),eo.prototype.constructor=eo;var to={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")};function no(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(no.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),no.FullScreenQuad=function(){var e=new A.K(-1,1,1,-1,0,1),t=new A.M(2,2),n=function(e){this._mesh=new A.E(t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),n}();var ro=function(e,t){no.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof A.T?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=A.db.clone(e.uniforms),this.material=new A.T({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new no.FullScreenQuad(this.material)};ro.prototype=Object.assign(Object.create(no.prototype),{constructor:ro,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var io=function(e,t){no.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};io.prototype=Object.assign(Object.create(no.prototype),{constructor:io,render:function(e,t,n){var r,i,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var oo=function(){no.call(this),this.needsSwap=!1};oo.prototype=Object.create(no.prototype),Object.assign(oo.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var ao=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:A.B,magFilter:A.B,format:A.P},r=e.getSize(new A.eb);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,(t=new A.hb(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===to&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===ro&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new ro(to),this.clock=new A.g};Object.assign(ao.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var a=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==io&&(t instanceof io?i=!0:t instanceof oo&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new A.eb);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var so=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(so.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),so.FullScreenQuad=function(){var e=new A.K(-1,1,1,-1,0,1),t=new A.M(2,2),n=function(e){this._mesh=new A.E(t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),n}();var uo=function(e,t,n,r,i){no.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};uo.prototype=Object.assign(Object.create(no.prototype),{constructor:uo,render:function(e,t,n){var r,i,o,a=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(r=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(r,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=a}});var lo=n(2),co=n(42),ho=n(35);function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var po=n(60);function mo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function go(e,t,n){return(go=mo()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Object(po.a)(i,n.prototype),i}).apply(null,arguments)}function Ao(e){var t="function"===typeof Map?new Map:void 0;return(Ao=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return go(e,arguments,fo(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(po.a)(r,e)})(e)}var vo=function(e){function t(t){var n;return n=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,Object(co.a)(n)}return Object(ho.a)(t,e),t}(Ao(Error));function yo(e){return Math.round(255*e)}function bo(e,t,n){return yo(e)+","+yo(t)+","+yo(n)}function _o(e,t,n,r){if(void 0===r&&(r=bo),0===t)return r(n,n,n);var i=(e%360+360)%360/60,o=(1-Math.abs(2*n-1))*t,a=o*(1-Math.abs(i%2-1)),s=0,u=0,l=0;i>=0&&i<1?(s=o,u=a):i>=1&&i<2?(s=a,u=o):i>=2&&i<3?(u=o,l=a):i>=3&&i<4?(u=a,l=o):i>=4&&i<5?(s=a,l=o):i>=5&&i<6&&(s=o,l=a);var c=n-o/2;return r(s+c,u+c,l+c)}var wo={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var Eo=/^#[a-fA-F0-9]{6}$/,xo=/^#[a-fA-F0-9]{8}$/,So=/^#[a-fA-F0-9]{3}$/,To=/^#[a-fA-F0-9]{4}$/,Mo=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,Lo=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,Co=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Ro=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function Oo(e){if("string"!==typeof e)throw new vo(3);var t=function(e){if("string"!==typeof e)return e;var t=e.toLowerCase();return wo[t]?"#"+wo[t]:e}(e);if(t.match(Eo))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(xo)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(So))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(To)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var i=Mo.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var o=Lo.exec(t);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10),alpha:parseFloat(""+o[4])};var a=Co.exec(t);if(a){var s="rgb("+_o(parseInt(""+a[1],10),parseInt(""+a[2],10)/100,parseInt(""+a[3],10)/100)+")",u=Mo.exec(s);if(!u)throw new vo(4,t,s);return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10)}}var l=Ro.exec(t);if(l){var c="rgb("+_o(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",h=Mo.exec(c);if(!h)throw new vo(4,t,c);return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10),alpha:parseFloat(""+l[4])}}throw new vo(5)}var Io=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function Po(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function ko(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Io("#"+Po(e)+Po(t)+Po(n));if("object"===typeof e&&void 0===t&&void 0===n)return Io("#"+Po(e.red)+Po(e.green)+Po(e.blue));throw new vo(6)}function No(e,t,n,r){if("string"===typeof e&&"number"===typeof t){var i=Oo(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r)return r>=1?ko(e,t,n):"rgba("+e+","+t+","+n+","+r+")";if("object"===typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?ko(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new vo(7)}function Do(e){return function e(t,n,r){return function(){var i=r.concat(Array.prototype.slice.call(arguments));return i.length>=n?t.apply(this,i):e(t,n,i)}}(e,e.length,[])}function Fo(e,t,n){return Math.max(e,Math.min(t,n))}function jo(e,t){if("transparent"===t)return t;var n=Oo(t),r="number"===typeof n.alpha?n.alpha:1;return No(Object(lo.a)({},n,{alpha:Fo(0,1,(100*r+100*parseFloat(e))/100)}))}var Bo=Do(jo);function Vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||qo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uo(e){return function(e){if(Array.isArray(e))return Wo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||qo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qo(e,t){if(e){if("string"===typeof e)return Wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wo(e,t):void 0}}function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}");var zo=window.THREE?window.THREE:{WebGLRenderer:A.ib,Scene:A.R,PerspectiveCamera:A.L,Raycaster:A.Q,TextureLoader:A.ab,Vector2:A.eb,Vector3:A.fb,Box3:A.d,Color:A.h,Mesh:A.E,SphereGeometry:A.W,MeshBasicMaterial:A.F,BackSide:A.c,EventDispatcher:A.o,MOUSE:A.C,Quaternion:A.O,Spherical:A.X,Clock:A.g},Ho=w({props:{width:{default:window.innerWidth,onChange:function(e,t,n){isNaN(e)&&(t.width=n)}},height:{default:window.innerHeight,onChange:function(e,t,n){isNaN(e)&&(t.height=n)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.toolTipElem&&(t.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(e.clock.getDelta()),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.enablePointerInteraction){var t=null;if(e.hoverDuringDrag||!e.isPointerDragging){var n=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter((function(t){return e.hoverFilter(t.object)})).sort((function(t,n){return e.hoverOrderComparator(t.object,n.object)})),r=n.length?n[0]:null;t=r?r.object:null,e.intersectionPoint=r?r.point:null}t!==e.hoverObj&&(e.onHover(t,e.hoverObj),e.toolTipElem.innerHTML=t&&Re(e.tooltipContent)(t)||"",e.hoverObj=t)}E.a.update()}return this},getPointerPos:function(e){var t=e.pointerPos;return{x:t.x,y:t.y}},cameraPosition:function(e,t,n,r){var i=e.camera;if(t&&e.initialised){var o=t,a=n||{x:0,y:0,z:0};if(r){var s=Object.assign({},i.position),u=h();new E.a.Tween(s).to(o,r).easing(E.a.Easing.Quadratic.Out).onUpdate(l).start(),new E.a.Tween(u).to(a,r/3).easing(E.a.Easing.Quadratic.Out).onUpdate(c).start()}else l(o),c(a);return this}return Object.assign({},i.position,{lookAt:h()});function l(e){var t=e.x,n=e.y,r=e.z;void 0!==t&&(i.position.x=t),void 0!==n&&(i.position.y=n),void 0!==r&&(i.position.z=r)}function c(t){e.controls.target=new zo.Vector3(t.x,t.y,t.z)}function h(){return Object.assign(new zo.Vector3(0,0,-1e3).applyQuaternion(i.quaternion).add(i.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,i),t,n)},fitToBbox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=e.camera;if(t){var o=new zo.Vector3(0,0,0),a=2*Math.max.apply(Math,Uo(Object.entries(t).map((function(e){var t=Go(e,2),n=t[0],r=t[1];return Math.max.apply(Math,Uo(r.map((function(e){return Math.abs(o[n]-e)}))))})))),s=(1-2*r/e.height)*i.fov,u=a/Math.atan(s*Math.PI/180),l=u/i.aspect,c=Math.max(u,l);if(c>0){var h=o.clone().sub(i.position).normalize().multiplyScalar(-c);this.cameraPosition(h,o,n)}}return this},getBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=new zo.Box3(new zo.Vector3(0,0,0),new zo.Vector3(0,0,0)),r=e.objects.filter(t);return r.length?(r.forEach((function(e){return n.expandByObject(e)})),Object.assign.apply(Object,Uo(["x","y","z"].map((function(e){return Vo({},e,[n.min[e],n.max[e]])}))))):null},getScreenCoords:function(e,t,n,r){var i=new zo.Vector3(t,n,r);return i.project(this.camera()),{x:(i.x+1)*e.width/2,y:-(i.y-1)*e.height/2}},intersectingObjects:function(e,t,n){var r=new zo.Vector2(t/e.width*2-1,-n/e.height*2+1),i=new zo.Raycaster;return i.params.Line.threshold=e.lineHoverPrecision,i.setFromCamera(r,e.camera),i.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new zo.Scene,camera:new zo.PerspectiveCamera,clock:new zo.Clock}},init:function(e,t,n){var r=n.controlType,i=void 0===r?"trackball":r,o=n.rendererConfig,a=void 0===o?{}:o,s=n.waitForLoadComplete,u=void 0===s||s;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[i]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.toolTipElem=document.createElement("div"),t.toolTipElem.classList.add("scene-tooltip"),t.container.appendChild(t.toolTipElem),t.pointerPos=new zo.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach((function(e){return t.container.addEventListener(e,(function(e){if(!t.isPointerDragging&&"pointermove"===e.type&&e.pressure>0&&[e.movementX,e.movementY].some((function(t){return Math.abs(t)>("touch"===e.pointerType?1:0)}))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var n=function(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+r,left:t.left+n}}(t.container);t.pointerPos.x=e.pageX-n.left,t.pointerPos.y=e.pageY-n.top,t.toolTipElem.style.top="".concat(t.pointerPos.y,"px"),t.toolTipElem.style.left="".concat(t.pointerPos.x,"px"),t.toolTipElem.style.transform="translate(-".concat(t.pointerPos.x/t.width*100,"%, 21px)")}}),{passive:!0})})),t.container.addEventListener("pointerup",(function(e){t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag)||requestAnimationFrame((function(){0===e.button&&t.onClick(t.hoverObj||null,e,t.intersectionPoint),2===e.button&&t.onRightClick&&t.onRightClick(t.hoverObj||null,e,t.intersectionPoint)}))}),{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",(function(e){t.onRightClick&&e.preventDefault()})),t.renderer=new zo.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},a)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.postProcessingComposer=new ao(t.renderer),t.postProcessingComposer.addPass(new uo(t.scene,t.camera)),t.controls=new{trackball:Ji,orbit:Zi,fly:eo}[i](t.camera,t.renderer.domElement),"fly"===i&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),"trackball"!==i&&"orbit"!==i||(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",(function(){return t.controlsEngaged=!0})),t.controls.addEventListener("change",(function(){t.controlsEngaged&&(t.controlsDragging=!0)})),t.controls.addEventListener("end",(function(){t.controlsEngaged=!1,t.controlsDragging=!1}))),t.renderer.setSize(t.width,t.height),t.postProcessingComposer.setSize(t.width,t.height),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new zo.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!u,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))&&(e.container.style.width=e.width,e.container.style.height=e.height,e.renderer.setSize(e.width,e.height),e.postProcessingComposer.setSize(e.width,e.height),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=e.skyRadius),e.camera.far=2.5*e.skyRadius,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new zo.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var n=Oo(e.backgroundColor).alpha;void 0===n&&(n=1),e.renderer.setClearColor(new zo.Color(Bo(1,e.backgroundColor)),n)}function r(){e.loadComplete=e.scene.visible=!0}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?(new zo.TextureLoader).load(e.backgroundImageUrl,(function(t){e.skysphere.material=new zo.MeshBasicMaterial({map:t,side:zo.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&r()})):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&r())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("objects")&&((t.objects||[]).forEach((function(t){return e.scene.remove(t)})),e.objects.forEach((function(t){return e.scene.add(t)})))}});function Ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(n),!0).forEach((function(t){Ko(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xo(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Jo(e){return function(e){if(Array.isArray(e))return Zo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Zo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $o(e,t){var n=new t;return{linkProp:function(t){return{default:n[t](),onChange:function(n,r){r[e][t](n)},triggerUpdate:!1}},linkMethod:function(t){return function(n){for(var r=n[e],i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=r[t].apply(r,o);return s===r?this:s}}}}var ea=window.THREE?window.THREE:{AmbientLight:A.b,DirectionalLight:A.m,Vector2:A.eb},ta=$o("globe",Xi),na=Object.assign.apply(Object,Jo(["globeImageUrl","bumpImageUrl","showAtmosphere","showGraticules","pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration","arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration","polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonSideColor","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration","pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration","hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration","hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonCurvatureResolution","hexPolygonsTransitionDuration","labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration","customLayerData","customThreeObject","customThreeObjectUpdate"].map((function(e){return Ko({},e,ta.linkProp(e))})))),ra=Object.assign.apply(Object,Jo(["globeMaterial","getCoords","toGeoCoords"].map((function(e){return Ko({},e,ta.linkMethod(e))})))),ia=$o("renderObjs",Ho),oa=Object.assign.apply(Object,Jo(["width","height","backgroundColor","backgroundImageUrl","enablePointerInteraction"].map((function(e){return Ko({},e,ia.linkProp(e))})))),aa=Object.assign.apply(Object,Jo(["postProcessingComposer"].map((function(e){return Ko({},e,ia.linkMethod(e))})))),sa=w({props:Qo(Qo({onZoom:{triggerUpdate:!1},onGlobeClick:{default:function(){},triggerUpdate:!1},onGlobeRightClick:{default:function(){},triggerUpdate:!1},pointLabel:{default:"name",triggerUpdate:!1},onPointClick:{default:function(){},triggerUpdate:!1},onPointRightClick:{default:function(){},triggerUpdate:!1},onPointHover:{default:function(){},triggerUpdate:!1},arcLabel:{default:"name",triggerUpdate:!1},onArcClick:{default:function(){},triggerUpdate:!1},onArcRightClick:{default:function(){},triggerUpdate:!1},onArcHover:{default:function(){},triggerUpdate:!1},polygonLabel:{default:"name",triggerUpdate:!1},onPolygonClick:{default:function(){},triggerUpdate:!1},onPolygonRightClick:{default:function(){},triggerUpdate:!1},onPolygonHover:{default:function(){},triggerUpdate:!1},pathLabel:{default:"name",triggerUpdate:!1},onPathClick:{default:function(){},triggerUpdate:!1},onPathRightClick:{default:function(){},triggerUpdate:!1},onPathHover:{default:function(){},triggerUpdate:!1},hexLabel:{triggerUpdate:!1},onHexClick:{default:function(){},triggerUpdate:!1},onHexRightClick:{default:function(){},triggerUpdate:!1},onHexHover:{default:function(){},triggerUpdate:!1},hexPolygonLabel:{triggerUpdate:!1},onHexPolygonClick:{default:function(){},triggerUpdate:!1},onHexPolygonRightClick:{default:function(){},triggerUpdate:!1},onHexPolygonHover:{default:function(){},triggerUpdate:!1},labelLabel:{triggerUpdate:!1},onLabelClick:{default:function(){},triggerUpdate:!1},onLabelRightClick:{default:function(){},triggerUpdate:!1},onLabelHover:{default:function(){},triggerUpdate:!1},customLayerLabel:{default:"name",triggerUpdate:!1},onCustomLayerClick:{default:function(){},triggerUpdate:!1},onCustomLayerRightClick:{default:function(){},triggerUpdate:!1},onCustomLayerHover:{default:function(){},triggerUpdate:!1},pointerEventsFilter:{default:function(){return!0},triggerUpdate:!1,onChange:function(e,t){return t.renderObjs.hoverFilter((function(t){return e(t,t.__data)}))}}},na),oa),methods:Qo(Qo({pauseAnimation:function(e){return null!==e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return null===e.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(e){e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},pointOfView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=o();if(void 0===t.lat&&void 0===t.lng&&void 0===t.altitude)return r;var i=Object.assign({},r,t);if(n){for(;r.lng-i.lng>180;)r.lng-=360;for(;r.lng-i.lng<-180;)r.lng+=360;new E.a.Tween(r).to(i,n).easing(E.a.Easing.Cubic.InOut).onUpdate(a).start()}else a(i);return this;function o(){return e.globe.toGeoCoords(e.renderObjs.cameraPosition())}function a(t){var n=t.lat,r=t.lng,i=t.altitude;e.renderObjs.cameraPosition(e.globe.getCoords(n,r,i))}},getScreenCoords:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=(t=e.globe).getCoords.apply(t,r);return e.renderObjs.getScreenCoords(o.x,o.y,o.z)},toGlobeCoords:function(e,t,n){var r=e.renderObjs.intersectingObjects(t,n).find((function(e){return"globe"===e.object.__globeObjType}));if(!r)return null;var i=e.globe.toGeoCoords(r.point);return{lat:i.lat,lng:i.lng}},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},_destructor:function(){this.pauseAnimation(),this.pointsData([]),this.arcsData([]),this.polygonsData([]),this.pathsData([]),this.hexBinPointsData([]),this.hexPolygonsData([]),this.labelsData([]),this.customLayerData([])}},ra),aa),stateInit:function(e){var t=e.rendererConfig,n=e.waitForGlobeReady,r=void 0===n||n,i=Xo(e,["rendererConfig","waitForGlobeReady"]);return{globe:new Xi(Qo({waitForGlobeReady:r},i)),renderObjs:Ho({controlType:"orbit",rendererConfig:t,waitForLoadComplete:r}).skyRadius(5e4).showNavInfo(!1)}},init:function(e,t){var n=this;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var r=document.createElement("div");t.container.appendChild(r),t.renderObjs(r),t.globe.rendererSize(t.renderObjs.renderer().getSize(new ea.Vector2)),this.pointOfView({altitude:2.5});var i=t.renderObjs.controls();i.minDistance=101,setTimeout((function(){return i.maxDistance=1e4})),i.enablePan=!1,i.enableDamping=!0,i.dampingFactor=.1,i.rotateSpeed=.3,i.zoomSpeed=.3,i.addEventListener("change",(function(){var e=n.pointOfView();i.rotateSpeed=.2*e.altitude,i.zoomSpeed=.1*(e.altitude+1),t.onZoom&&t.onZoom(e)}));var o=function(e){for(var t=e;t&&!t.hasOwnProperty("__globeObjType");)t=t.parent;return t},a={point:function(e){return e},arc:function(e){return e},polygon:function(e){return e.data},path:function(e){return e},hexbin:function(e){return e},hexPolygon:function(e){return e},label:function(e){return e},custom:function(e){return e}};t.renderObjs.objects([new ea.AmbientLight(12303291),new ea.DirectionalLight(16777215,.6),t.globe]).hoverOrderComparator((function(e,t){var n=o(e),r=o(t),i=function(e){return!e};return i(n)-i(r)})).lineHoverPrecision(.2).tooltipContent((function(e){var n={point:t.pointLabel,arc:t.arcLabel,polygon:t.polygonLabel,path:t.pathLabel,hexbin:t.hexLabel,hexPolygon:t.hexPolygonLabel,label:t.labelLabel,custom:t.customLayerLabel},r=o(e),i=r.__globeObjType;return r&&n.hasOwnProperty(i)&&a.hasOwnProperty(i)&&Re(n[i])(a[i](r.__data))||""})).onHover((function(e){var n={point:t.onPointHover,arc:t.onArcHover,polygon:t.onPolygonHover,path:t.onPathHover,hexbin:t.onHexHover,hexPolygon:t.onHexPolygonHover,label:t.onLabelHover,custom:t.onCustomLayerHover},r=o(e);if(r&&!n.hasOwnProperty(r.__globeObjType)&&(r=null),r!==t.hoverObj){var i=t.hoverObj?t.hoverObj.__globeObjType:null,s=t.hoverObj?a[i](t.hoverObj.__data):null,u=r?r.__globeObjType:null,l=r?a[u](r.__data):null;i&&i!==u&&n[i](null,s),u&&n[u](l,i===u?s:null),t.hoverObj=r}})).onClick((function(e,r,i){if(e){var s={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,label:t.onLabelClick,custom:t.onCustomLayerClick},u=o(e),l=u.__globeObjType;if(u&&s.hasOwnProperty(l)){var c=[r];if("globe"===l){var h=n.toGeoCoords(i),f=h.lat,d=h.lng;c.unshift({lat:f,lng:d})}a.hasOwnProperty(l)&&c.unshift(a[l](u.__data)),s[l].apply(s,c)}}})).onRightClick((function(e,r,i){if(e){var s={globe:t.onGlobeRightClick,point:t.onPointRightClick,arc:t.onArcRightClick,polygon:t.onPolygonRightClick,path:t.onPathRightClick,hexbin:t.onHexRightClick,hexPolygon:t.onHexPolygonRightClick,label:t.onLabelRightClick,custom:t.onCustomLayerRightClick},u=o(e),l=u.__globeObjType;if(u&&s.hasOwnProperty(l)){var c=[r];if("globe"===l){var h=n.toGeoCoords(i),f=h.lat,d=h.lng;c.unshift({lat:f,lng:d})}a.hasOwnProperty(l)&&c.unshift(a[l](u.__data)),s[l].apply(s,c)}}})),this._animationCycle()}}),ua=n(1),la=n.n(ua),ca={width:la.a.number,height:la.a.number,backgroundColor:la.a.string,backgroundImageUrl:la.a.string,globeImageUrl:la.a.string,bumpImageUrl:la.a.string,showAtmosphere:la.a.bool,showGraticules:la.a.bool,onGlobeClick:la.a.func,onGlobeRightClick:la.a.func,pointsData:la.a.arrayOf(la.a.object),pointLat:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pointLng:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pointColor:la.a.oneOfType([la.a.string,la.a.func]),pointAltitude:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pointRadius:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pointResolution:la.a.number,pointsMerge:la.a.bool,pointsTransitionDuration:la.a.number,pointLabel:la.a.oneOfType([la.a.string,la.a.func]),onPointClick:la.a.func,onPointRightClick:la.a.func,onPointHover:la.a.func,arcsData:la.a.arrayOf(la.a.object),arcStartLat:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcStartLng:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcEndLat:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcEndLng:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcColor:la.a.oneOfType([la.a.string,la.a.arrayOf(la.a.string),la.a.func]),arcAltitude:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcAltitudeAutoScale:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcStroke:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcCurveResolution:la.a.number,arcCircularResolution:la.a.number,arcDashLength:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcDashGap:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcDashInitialGap:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcDashAnimateTime:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),arcsTransitionDuration:la.a.number,arcLabel:la.a.oneOfType([la.a.string,la.a.func]),onArcClick:la.a.func,onArcRightClick:la.a.func,onArcHover:la.a.func,polygonsData:la.a.arrayOf(la.a.object),polygonGeoJsonGeometry:la.a.oneOfType([la.a.string,la.a.func]),polygonCapColor:la.a.oneOfType([la.a.string,la.a.func]),polygonSideColor:la.a.oneOfType([la.a.string,la.a.func]),polygonStrokeColor:la.a.oneOfType([la.a.string,la.a.func]),polygonAltitude:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),polygonCapCurvatureResolution:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),polygonsTransitionDuration:la.a.number,polygonLabel:la.a.oneOfType([la.a.string,la.a.func]),onPolygonClick:la.a.func,onPolygonRightClick:la.a.func,onPolygonHover:la.a.func,pathsData:la.a.array,pathPoints:la.a.oneOfType([la.a.array,la.a.string,la.a.func]),pathPointLat:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pathPointLng:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pathPointAlt:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pathResolution:la.a.number,pathColor:la.a.oneOfType([la.a.string,la.a.arrayOf(la.a.string),la.a.func]),pathStroke:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pathDashLength:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pathDashGap:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pathDashInitialGap:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pathDashAnimateTime:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),pathTransitionDuration:la.a.number,pathLabel:la.a.oneOfType([la.a.string,la.a.func]),onPathClick:la.a.func,onPathRightClick:la.a.func,onPathHover:la.a.func,hexBinPointsData:la.a.arrayOf(la.a.object),hexBinPointLat:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),hexBinPointLng:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),hexBinPointWeight:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),hexBinResolution:la.a.number,hexMargin:la.a.oneOfType([la.a.number,la.a.func]),hexTopColor:la.a.func,hexSideColor:la.a.func,hexAltitude:la.a.oneOfType([la.a.number,la.a.func]),hexTopCurvatureResolution:la.a.number,hexBinMerge:la.a.bool,hexTransitionDuration:la.a.number,hexLabel:la.a.oneOfType([la.a.string,la.a.func]),onHexClick:la.a.func,onHexRightClick:la.a.func,onHexHover:la.a.func,hexPolygonsData:la.a.arrayOf(la.a.object),hexPolygonGeoJsonGeometry:la.a.oneOfType([la.a.string,la.a.func]),hexPolygonColor:la.a.oneOfType([la.a.string,la.a.func]),hexPolygonAltitude:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),hexPolygonResolution:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),hexPolygonMargin:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),hexPolygonCurvatureResolution:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),hexPolygonsTransitionDuration:la.a.number,hexPolygonLabel:la.a.oneOfType([la.a.string,la.a.func]),onHexPolygonClick:la.a.func,onHexPolygonRightClick:la.a.func,onHexPolygonHover:la.a.func,labelsData:la.a.arrayOf(la.a.object),labelLat:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),labelLng:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),labelAltitude:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),labelRotation:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),labelText:la.a.oneOfType([la.a.string,la.a.func]),labelSize:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),labelTypeFace:la.a.object,labelColor:la.a.oneOfType([la.a.string,la.a.func]),labelResolution:la.a.number,labelIncludeDot:la.a.oneOfType([la.a.bool,la.a.string,la.a.func]),labelDotRadius:la.a.oneOfType([la.a.number,la.a.string,la.a.func]),labelDotOrientation:la.a.oneOfType([la.a.string,la.a.func]),labelsTransitionDuration:la.a.number,labelLabel:la.a.oneOfType([la.a.string,la.a.func]),onLabelClick:la.a.func,onLabelRightClick:la.a.func,onLabelHover:la.a.func,customLayerData:la.a.arrayOf(la.a.object),customThreeObject:la.a.oneOfType([la.a.object,la.a.string,la.a.func]),customThreeObjectUpdate:la.a.oneOfType([la.a.string,la.a.func]),customLayerLabel:la.a.oneOfType([la.a.string,la.a.func]),onCustomLayerClick:la.a.func,onCustomLayerRightClick:la.a.func,onCustomLayerHover:la.a.func,enablePointerInteraction:la.a.bool,pointerEventsFilter:la.a.func,onZoom:la.a.func},ha=g(sa,{methodNames:["globeMaterial","pauseAnimation","resumeAnimation","pointOfView","scene","camera","renderer","postProcessingComposer","controls","getCoords","getScreenCoords","toGeoCoords","toGlobeCoords"],initPropNames:["animateIn","waitForGlobeReady","rendererConfig"]});ha.displayName="Globe",ha.propTypes=ca;t.a=ha},function(e,t,n){"use strict";var r=n(48);function i(e,t){void 0===t&&(t={});var n=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,t){return"undefined"===typeof t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(r){}return e}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"===typeof e?r.parse(e,t):"object"===typeof e&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"===typeof document&&"string"===typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=r.parse(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),i(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var r in this.cookies)n[r]=i(this.cookies[r],e);return n},e.prototype.set=function(e,t,n){var i;"object"===typeof t&&(t=JSON.stringify(t)),this.cookies=o(o({},this.cookies),((i={})[e]=t,i)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=r.serialize(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=o(o({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=o({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=r.serialize(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}();t.a=a},function(e,t,n){"use strict";function r(e){for(var t="https://material-ui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(5),i=n(2),o=n(0),a=(n(1),n(6)),s=n(8),u=o.forwardRef((function(e,t){var n=e.classes,s=e.className,u=e.component,l=void 0===u?"div":u,c=e.square,h=void 0!==c&&c,f=e.elevation,d=void 0===f?1:f,p=e.variant,m=void 0===p?"elevation":p,g=Object(r.a)(e,["classes","className","component","square","elevation","variant"]);return o.createElement(l,Object(i.a)({className:Object(a.a)(n.root,s,"outlined"===m?n.outlined:n["elevation".concat(d)],!h&&n.rounded),ref:t},g))}));t.a=Object(s.a)((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),Object(i.a)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(u)},function(e,t,n){"use strict";var r=n(2),i=n(34),o=n(5),a=n(0),s=(n(1),n(110)),u=n(24),l=n(21),c=n(29),h=n(11),f={entering:{opacity:1},entered:{opacity:1}},d={enter:u.b.enteringScreen,exit:u.b.leavingScreen},p=a.forwardRef((function(e,t){var n=e.children,u=e.disableStrictModeCompat,p=void 0!==u&&u,m=e.in,g=e.onEnter,A=e.onEntered,v=e.onEntering,y=e.onExit,b=e.onExited,_=e.onExiting,w=e.style,E=e.TransitionComponent,x=void 0===E?s.a:E,S=e.timeout,T=void 0===S?d:S,M=Object(o.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),L=Object(l.a)(),C=L.unstable_strictMode&&!p,R=a.useRef(null),O=Object(h.a)(n.ref,t),I=Object(h.a)(C?R:void 0,O),P=function(e){return function(t,n){if(e){var r=C?[R.current,t]:[t,n],o=Object(i.a)(r,2),a=o[0],s=o[1];void 0===s?e(a):e(a,s)}}},k=P(v),N=P((function(e,t){Object(c.b)(e);var n=Object(c.a)({style:w,timeout:T},{mode:"enter"});e.style.webkitTransition=L.transitions.create("opacity",n),e.style.transition=L.transitions.create("opacity",n),g&&g(e,t)})),D=P(A),F=P(_),j=P((function(e){var t=Object(c.a)({style:w,timeout:T},{mode:"exit"});e.style.webkitTransition=L.transitions.create("opacity",t),e.style.transition=L.transitions.create("opacity",t),y&&y(e)})),B=P(b);return a.createElement(x,Object(r.a)({appear:!0,in:m,nodeRef:C?R:void 0,onEnter:N,onEntered:D,onEntering:k,onExit:j,onExited:B,onExiting:F,timeout:T},M),(function(e,t){return a.cloneElement(n,Object(r.a)({style:Object(r.a)({opacity:0,visibility:"exited"!==e||m?void 0:"hidden"},f[e],w,n.props.style),ref:I},t))}))}));t.a=p},function(e,t,n){"use strict";var r=n(36),i=n(35),o=(n(1),n(0)),a=n.n(o),s=n(16),u=n.n(s),l=!1,c=n(49),h=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i="exited",r.appearStatus="entering"):i="entered":i=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:i},r.nextCallback=null,r}Object(i.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[u.a.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),c=r?s.appear:s.enter;!e&&!n||l?this.safeSetState({status:"entered"},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:"entering"},(function(){t.props.onEntering(o,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:u.a.findDOMNode(this);t&&!l?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:u.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(r.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.a.createElement(c.a.Provider,{value:null},"function"===typeof n?n(e,i):a.a.cloneElement(a.a.Children.only(n),i))},t}(a.a.Component);function f(){}h.contextType=c.a,h.propTypes={},h.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},h.UNMOUNTED="unmounted",h.EXITED="exited",h.ENTERING="entering",h.ENTERED="entered",h.EXITING="exiting";t.a=h},,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(82),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function _(){}function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(A(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=b.prototype;var E=w.prototype=new _;E.constructor=w,r(E,b.prototype),E.isPureReactComponent=!0;var x={current:null},S=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,r)&&!T.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:x.current}}function L(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var C=/\/+/g,R=[];function O(e,t,n,r){if(R.length){var i=R.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function I(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function P(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+k(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var l=0;l<t.length;l++){var c=n+k(s=t[l],l);u+=e(s,c,r,i)}else if(null===t||"object"!==typeof t?c=null:c="function"===typeof(c=g&&t[g]||t["@@iterator"])?c:null,"function"===typeof c)for(t=c.call(t),l=0;!(s=t.next()).done;)u+=e(s=s.value,c=n+k(s,l++),r,i);else if("object"===s)throw r=""+t,Error(A(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return u}(e,"",t,n)}function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function N(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(L(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(C,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(C,"$&/")+"/"),P(e,D,t=O(t,o,r,i)),I(t)}var j={current:null};function B(){var e=j.current;if(null===e)throw Error(A(321));return e}var V={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;P(e,N,t=O(null,null,t,n)),I(t)},count:function(e){return P(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!L(e))throw Error(A(143));return e}},t.Component=b,t.Fragment=s,t.Profiler=l,t.PureComponent=w,t.StrictMode=u,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(A(267,e));var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=L,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return B().useCallback(e,t)},t.useContext=function(e,t){return B().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return B().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return B().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return B().useLayoutEffect(e,t)},t.useMemo=function(e,t){return B().useMemo(e,t)},t.useReducer=function(e,t,n){return B().useReducer(e,t,n)},t.useRef=function(e){return B().useRef(e)},t.useState=function(e){return B().useState(e)},t.version="16.13.1"},function(e,t,n){"use strict";var r=n(0),i=n(82),o=n(125);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var u=!1,l=null,c=!1,h=null,f={onError:function(e){u=!0,l=e}};function d(e,t,n,r,i,o,a,c,h){u=!1,l=null,s.apply(f,arguments)}var p=null,m=null,g=null;function A(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,o,s,f,p){if(d.apply(this,arguments),u){if(!u)throw Error(a(198));var m=l;u=!1,l=null,c||(c=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var v=null,y={};function b(){if(v)for(var e in y){var t=y[e],n=v.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!w[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in w[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,u=r;if(E.hasOwnProperty(u))throw Error(a(99,u));E[u]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&_(l[i],s,u);i=!0}else o.registrationName?(_(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function _(e,t,n){if(x[e])throw Error(a(100,e));x[e]=t,S[e]=t.eventTypes[n].dependencies}var w=[],E={},x={},S={};function T(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!y.hasOwnProperty(t)||y[t]!==r){if(y[t])throw Error(a(102,t));y[t]=r,n=!0}}n&&b()}var M=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),L=null,C=null,R=null;function O(e){if(e=m(e)){if("function"!==typeof L)throw Error(a(280));var t=e.stateNode;t&&(t=p(t),L(e.stateNode,e.type,t))}}function I(e){C?R?R.push(e):R=[e]:C=e}function P(){if(C){var e=C,t=R;if(R=C=null,O(e),t)for(e=0;e<t.length;e++)O(t[e])}}function k(e,t){return e(t)}function N(e,t,n,r,i){return e(t,n,r,i)}function D(){}var F=k,j=!1,B=!1;function V(){null===C&&null===R||(D(),P())}function G(e,t,n){if(B)return e(t,n);B=!0;try{return F(e,t,n)}finally{B=!1,V()}}var U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,W={},z={};function H(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){K[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];K[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){K[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){K[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){K[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){K[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){K[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){K[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){K[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var Y=/[\-:]([a-z])/g;function Q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Y,Q);K[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Y,Q);K[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Y,Q);K[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){K[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),K.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){K[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,n,r){var i=K.hasOwnProperty(t)?K[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!q.call(z,e)||!q.call(W,e)&&(U.test(e)?z[e]=!0:(W[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}X.hasOwnProperty("ReactCurrentDispatcher")||(X.ReactCurrentDispatcher={current:null}),X.hasOwnProperty("ReactCurrentBatchConfig")||(X.ReactCurrentBatchConfig={suspense:null});var Z=/^(.*)[\\\/]/,$="function"===typeof Symbol&&Symbol.for,ee=$?Symbol.for("react.element"):60103,te=$?Symbol.for("react.portal"):60106,ne=$?Symbol.for("react.fragment"):60107,re=$?Symbol.for("react.strict_mode"):60108,ie=$?Symbol.for("react.profiler"):60114,oe=$?Symbol.for("react.provider"):60109,ae=$?Symbol.for("react.context"):60110,se=$?Symbol.for("react.concurrent_mode"):60111,ue=$?Symbol.for("react.forward_ref"):60112,le=$?Symbol.for("react.suspense"):60113,ce=$?Symbol.for("react.suspense_list"):60120,he=$?Symbol.for("react.memo"):60115,fe=$?Symbol.for("react.lazy"):60116,de=$?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case le:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case ae:return"Context.Consumer";case oe:return"Context.Provider";case ue:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case de:return ge(e.render);case fe:if(e=1===e._status?e._result:null)return ge(e)}return null}function Ae(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ge(e.type);n=null,r&&(n=ge(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Z,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ye(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=ye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function _e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ye(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function we(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function xe(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function Se(e,t){xe(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Me(e,t.type,n):t.hasOwnProperty("defaultValue")&&Me(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Te(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Me(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Le(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ce(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Ie(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Pe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var ke="http://www.w3.org/1999/xhtml",Ne="http://www.w3.org/2000/svg";function De(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?De(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var je,Be=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Ne||"innerHTML"in e)e.innerHTML=t;else{for((je=je||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=je.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ge(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ue={animationend:Ge("Animation","AnimationEnd"),animationiteration:Ge("Animation","AnimationIteration"),animationstart:Ge("Animation","AnimationStart"),transitionend:Ge("Transition","TransitionEnd")},qe={},We={};function ze(e){if(qe[e])return qe[e];if(!Ue[e])return e;var t,n=Ue[e];for(t in n)if(n.hasOwnProperty(t)&&t in We)return qe[e]=n[t];return e}M&&(We=document.createElement("div").style,"AnimationEvent"in window||(delete Ue.animationend.animation,delete Ue.animationiteration.animation,delete Ue.animationstart.animation),"TransitionEvent"in window||delete Ue.transitionend.transition);var He=ze("animationend"),Ke=ze("animationiteration"),Ye=ze("animationstart"),Qe=ze("transitionend"),Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if($e(e)!==e)throw Error(a(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return tt(i),e;if(o===r)return tt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)A(e,t[r],n[r]);else t&&A(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=rt(ot,e)),e=ot,ot=null,e){if(it(e,at),ot)throw Error(a(95));if(c)throw e=h,c=!1,h=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function lt(e){if(!M)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ct=[];function ht(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ct.length&&ct.push(e)}function ft(e,t,n,r){if(ct.length){var i=ct.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function dt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Mn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ut(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<w.length;u++){var l=w[u];l&&(l=l.extractEvents(r,t,o,i,a))&&(s=rt(s,l))}st(s)}}function pt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":lt(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Xe.indexOf(e)&&Kt(e,t)}n.set(e,null)}}var mt,gt,At,vt=!1,yt=[],bt=null,_t=null,wt=null,Et=new Map,xt=new Map,St=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Mt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Lt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Ct(e,t){switch(e){case"focus":case"blur":bt=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":wt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xt.delete(t.pointerId)}}function Rt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=Lt(t,n,r,i,o),null!==t&&(null!==(t=Ln(t))&&gt(t)),e):(e.eventSystemFlags|=r,e)}function Ot(e){var t=Mn(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){At(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function It(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Ln(t);return null!==n&&gt(n),e.blockedOn=t,!1}return!0}function Pt(e,t,n){It(e)&&n.delete(t)}function kt(){for(vt=!1;0<yt.length;){var e=yt[0];if(null!==e.blockedOn){null!==(e=Ln(e.blockedOn))&&mt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:yt.shift()}null!==bt&&It(bt)&&(bt=null),null!==_t&&It(_t)&&(_t=null),null!==wt&&It(wt)&&(wt=null),Et.forEach(Pt),xt.forEach(Pt)}function Nt(e,t){e.blockedOn===t&&(e.blockedOn=null,vt||(vt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,kt)))}function Dt(e){function t(t){return Nt(t,e)}if(0<yt.length){Nt(yt[0],e);for(var n=1;n<yt.length;n++){var r=yt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==bt&&Nt(bt,e),null!==_t&&Nt(_t,e),null!==wt&&Nt(wt,e),Et.forEach(t),xt.forEach(t),n=0;n<St.length;n++)(r=St[n]).blockedOn===e&&(r.blockedOn=null);for(;0<St.length&&null===(n=St[0]).blockedOn;)Ot(n),null===n.blockedOn&&St.shift()}var Ft={},jt=new Map,Bt=new Map,Vt=["abort","abort",He,"animationEnd",Ke,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Qe,"transitionEnd","waiting","waiting"];function Gt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Bt.set(r,t),jt.set(r,o),Ft[i]=o}}Gt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Gt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Gt(Vt,2);for(var Ut="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),qt=0;qt<Ut.length;qt++)Bt.set(Ut[qt],0);var Wt=o.unstable_UserBlockingPriority,zt=o.unstable_runWithPriority,Ht=!0;function Kt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=Bt.get(t);switch(void 0===r?2:r){case 0:r=Qt.bind(null,t,1,e);break;case 1:r=Xt.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Qt(e,t,n,r){j||D();var i=Jt,o=j;j=!0;try{N(i,e,t,n,r)}finally{(j=o)||V()}}function Xt(e,t,n,r){zt(Wt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if(Ht)if(0<yt.length&&-1<Tt.indexOf(e))e=Lt(null,e,t,n,r),yt.push(e);else{var i=Zt(e,t,n,r);if(null===i)Ct(e,r);else if(-1<Tt.indexOf(e))e=Lt(i,e,t,n,r),yt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return bt=Rt(bt,e,t,n,r,i),!0;case"dragenter":return _t=Rt(_t,e,t,n,r,i),!0;case"mouseover":return wt=Rt(wt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Et.set(o,Rt(Et.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,xt.set(o,Rt(xt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Ct(e,r),e=ft(e,r,null,t);try{G(dt,e)}finally{ht(e)}}}}function Zt(e,t,n,r){if(null!==(n=Mn(n=ut(r)))){var i=$e(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=et(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{G(dt,e)}finally{ht(e)}return null}var $t={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];function tn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||$t.hasOwnProperty(e)&&$t[e]?(""+t).trim():t+"px"}function nn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=tn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys($t).forEach((function(e){en.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$t[t]=$t[e]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=ke;function un(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=S[t];for(var r=0;r<t.length;r++)pt(t[r],e,n)}function ln(){}function cn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,r=hn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hn(r)}}function dn(){for(var e=window,t=cn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=cn((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn=null,gn=null;function An(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function vn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var yn="function"===typeof setTimeout?setTimeout:void 0,bn="function"===typeof clearTimeout?clearTimeout:void 0;function _n(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function wn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var En=Math.random().toString(36).slice(2),xn="__reactInternalInstance$"+En,Sn="__reactEventHandlers$"+En,Tn="__reactContainere$"+En;function Mn(e){var t=e[xn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Tn]||n[xn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wn(e);null!==e;){if(n=e[xn])return n;e=wn(e)}return t}n=(e=n).parentNode}return null}function Ln(e){return!(e=e[xn]||e[Tn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Cn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Rn(e){return e[Sn]||null}function On(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function In(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}function Pn(e,t,n){(t=In(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function kn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=On(t);for(t=n.length;0<t--;)Pn(n[t],"captured",e);for(t=0;t<n.length;t++)Pn(n[t],"bubbled",e)}}function Nn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=In(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Dn(e){e&&e.dispatchConfig.registrationName&&Nn(e._targetInst,null,e)}function Fn(e){it(e,kn)}var jn=null,Bn=null,Vn=null;function Gn(){if(Vn)return Vn;var e,t,n=Bn,r=n.length,i="value"in jn?jn.value:jn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Vn=i.slice(e,1<t?1-t:void 0)}function Un(){return!0}function qn(){return!1}function Wn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Un:qn,this.isPropagationStopped=qn,this}function zn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Hn(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Kn(e){e.eventPool=[],e.getPooled=zn,e.release=Hn}i(Wn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){this.isPersistent=Un},isPersistent:qn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=qn,this._dispatchInstances=this._dispatchListeners=null}}),Wn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Wn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Kn(n),n},Kn(Wn);var Yn=Wn.extend({data:null}),Qn=Wn.extend({data:null}),Xn=[9,13,27,32],Jn=M&&"CompositionEvent"in window,Zn=null;M&&"documentMode"in document&&(Zn=document.documentMode);var $n=M&&"TextEvent"in window&&!Zn,er=M&&(!Jn||Zn&&8<Zn&&11>=Zn),tr=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(e,t){switch(e){case"keyup":return-1!==Xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var ar=!1;var sr={eventTypes:nr,extractEvents:function(e,t,n,r){var i;if(Jn)e:{switch(e){case"compositionstart":var o=nr.compositionStart;break e;case"compositionend":o=nr.compositionEnd;break e;case"compositionupdate":o=nr.compositionUpdate;break e}o=void 0}else ar?ir(e,n)&&(o=nr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=nr.compositionStart);return o?(er&&"ko"!==n.locale&&(ar||o!==nr.compositionStart?o===nr.compositionEnd&&ar&&(i=Gn()):(Bn="value"in(jn=r)?jn.value:jn.textContent,ar=!0)),o=Yn.getPooled(o,t,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),Fn(o),i=o):i=null,(e=$n?function(e,t){switch(e){case"compositionend":return or(t);case"keypress":return 32!==t.which?null:(rr=!0,tr);case"textInput":return(e=t.data)===tr&&rr?null:e;default:return null}}(e,n):function(e,t){if(ar)return"compositionend"===e||!Jn&&ir(e,t)?(e=Gn(),Vn=Bn=jn=null,ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return er&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Qn.getPooled(nr.beforeInput,t,n,r)).data=e,Fn(t)):t=null,null===i?t:null===t?i:[i,t]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ur[e.type]:"textarea"===t}var cr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hr(e,t,n){return(e=Wn.getPooled(cr.change,e,t,n)).type="change",I(n),Fn(e),e}var fr=null,dr=null;function pr(e){st(e)}function mr(e){if(_e(Cn(e)))return e}function gr(e,t){if("change"===e)return t}var Ar=!1;function vr(){fr&&(fr.detachEvent("onpropertychange",yr),dr=fr=null)}function yr(e){if("value"===e.propertyName&&mr(dr))if(e=hr(dr,e,ut(e)),j)st(e);else{j=!0;try{k(pr,e)}finally{j=!1,V()}}}function br(e,t,n){"focus"===e?(vr(),dr=n,(fr=t).attachEvent("onpropertychange",yr)):"blur"===e&&vr()}function _r(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return mr(dr)}function wr(e,t){if("click"===e)return mr(t)}function Er(e,t){if("input"===e||"change"===e)return mr(t)}M&&(Ar=lt("input")&&(!document.documentMode||9<document.documentMode));var xr={eventTypes:cr,_isInputEventSupported:Ar,extractEvents:function(e,t,n,r){var i=t?Cn(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=gr;else if(lr(i))if(Ar)a=Er;else{a=_r;var s=br}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=wr);if(a&&(a=a(e,t)))return hr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Me(i,"number",i.value)}},Sr=Wn.extend({view:null,detail:null}),Tr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tr[e])&&!!t[e]}function Lr(){return Mr}var Cr=0,Rr=0,Or=!1,Ir=!1,Pr=Sr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Lr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Cr;return Cr=e.screenX,Or?"mousemove"===e.type?e.screenX-t:0:(Or=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Rr;return Rr=e.screenY,Ir?"mousemove"===e.type?e.screenY-t:0:(Ir=!0,0)}}),kr=Pr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Nr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Dr={eventTypes:Nr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?Mn(t):null)&&(t!==$e(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Pr,u=Nr.mouseLeave,l=Nr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=kr,u=Nr.pointerLeave,l=Nr.pointerEnter,c="pointer");if(e=null==a?o:Cn(a),o=null==t?o:Cn(t),(u=s.getPooled(u,a,n,r)).type=c+"leave",u.target=e,u.relatedTarget=o,(n=s.getPooled(l,t,n,r)).type=c+"enter",n.target=o,n.relatedTarget=e,c=t,(r=a)&&c)e:{for(l=c,a=0,e=s=r;e;e=On(e))a++;for(e=0,t=l;t;t=On(t))e++;for(;0<a-e;)s=On(s),a--;for(;0<e-a;)l=On(l),e--;for(;a--;){if(s===l||s===l.alternate)break e;s=On(s),l=On(l)}s=null}else s=null;for(l=s,s=[];r&&r!==l&&(null===(a=r.alternate)||a!==l);)s.push(r),r=On(r);for(r=[];c&&c!==l&&(null===(a=c.alternate)||a!==l);)r.push(c),c=On(c);for(c=0;c<s.length;c++)Nn(s[c],"bubbled",u);for(c=r.length;0<c--;)Nn(r[c],"captured",n);return 0===(64&i)?[u]:[u,n]}};var Fr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},jr=Object.prototype.hasOwnProperty;function Br(e,t){if(Fr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!jr.call(t,n[r])||!Fr(e[n[r]],t[n[r]]))return!1;return!0}var Vr=M&&"documentMode"in document&&11>=document.documentMode,Gr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ur=null,qr=null,Wr=null,zr=!1;function Hr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return zr||null==Ur||Ur!==cn(n)?null:("selectionStart"in(n=Ur)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Wr&&Br(Wr,n)?null:(Wr=n,(e=Wn.getPooled(Gr.select,qr,e,t)).type="select",e.target=Ur,Fn(e),e))}var Kr={eventTypes:Gr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),o=S.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Cn(t):window,e){case"focus":(lr(i)||"true"===i.contentEditable)&&(Ur=i,qr=t,Wr=null);break;case"blur":Wr=qr=Ur=null;break;case"mousedown":zr=!0;break;case"contextmenu":case"mouseup":case"dragend":return zr=!1,Hr(n,r);case"selectionchange":if(Vr)break;case"keydown":case"keyup":return Hr(n,r)}return null}},Yr=Wn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Qr=Wn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xr=Sr.extend({relatedTarget:null});function Jr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Zr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei=Sr.extend({key:function(e){if(e.key){var t=Zr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?$r[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Lr,charCode:function(e){return"keypress"===e.type?Jr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ti=Pr.extend({dataTransfer:null}),ni=Sr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Lr}),ri=Wn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Pr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Ft,extractEvents:function(e,t,n,r){var i=jt.get(e);if(!i)return null;switch(e){case"keypress":if(0===Jr(n))return null;case"keydown":case"keyup":e=ei;break;case"blur":case"focus":e=Xr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ni;break;case He:case Ke:case Ye:e=Yr;break;case Qe:e=ri;break;case"scroll":e=Sr;break;case"wheel":e=ii;break;case"copy":case"cut":case"paste":e=Qr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=kr;break;default:e=Wn}return Fn(t=e.getPooled(i,t,n,r)),t}};if(v)throw Error(a(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=Rn,m=Ln,g=Cn,T({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Dr,ChangeEventPlugin:xr,SelectEventPlugin:Kr,BeforeInputEventPlugin:sr});var ai=[],si=-1;function ui(e){0>si||(e.current=ai[si],ai[si]=null,si--)}function li(e,t){si++,ai[si]=e.current,e.current=t}var ci={},hi={current:ci},fi={current:!1},di=ci;function pi(e,t){var n=e.type.contextTypes;if(!n)return ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){ui(fi),ui(hi)}function Ai(e,t,n){if(hi.current!==ci)throw Error(a(168));li(hi,t),li(fi,n)}function vi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,ge(t)||"Unknown",o));return i({},n,{},r)}function yi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ci,di=hi.current,li(hi,e),li(fi,fi.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=vi(e,t,di),r.__reactInternalMemoizedMergedChildContext=e,ui(fi),ui(hi),li(hi,e)):ui(fi),li(fi,n)}var _i=o.unstable_runWithPriority,wi=o.unstable_scheduleCallback,Ei=o.unstable_cancelCallback,xi=o.unstable_requestPaint,Si=o.unstable_now,Ti=o.unstable_getCurrentPriorityLevel,Mi=o.unstable_ImmediatePriority,Li=o.unstable_UserBlockingPriority,Ci=o.unstable_NormalPriority,Ri=o.unstable_LowPriority,Oi=o.unstable_IdlePriority,Ii={},Pi=o.unstable_shouldYield,ki=void 0!==xi?xi:function(){},Ni=null,Di=null,Fi=!1,ji=Si(),Bi=1e4>ji?Si:function(){return Si()-ji};function Vi(){switch(Ti()){case Mi:return 99;case Li:return 98;case Ci:return 97;case Ri:return 96;case Oi:return 95;default:throw Error(a(332))}}function Gi(e){switch(e){case 99:return Mi;case 98:return Li;case 97:return Ci;case 96:return Ri;case 95:return Oi;default:throw Error(a(332))}}function Ui(e,t){return e=Gi(e),_i(e,t)}function qi(e,t,n){return e=Gi(e),wi(e,t,n)}function Wi(e){return null===Ni?(Ni=[e],Di=wi(Mi,Hi)):Ni.push(e),Ii}function zi(){if(null!==Di){var e=Di;Di=null,Ei(e)}Hi()}function Hi(){if(!Fi&&null!==Ni){Fi=!0;var e=0;try{var t=Ni;Ui(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ni=null}catch(n){throw null!==Ni&&(Ni=Ni.slice(e+1)),wi(Mi,zi),n}finally{Fi=!1}}}function Ki(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Yi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Qi={current:null},Xi=null,Ji=null,Zi=null;function $i(){Zi=Ji=Xi=null}function eo(e){var t=Qi.current;ui(Qi),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function no(e,t){Xi=e,Zi=Ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ra=!0),e.firstContext=null)}function ro(e,t){if(Zi!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Zi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ji){if(null===Xi)throw Error(a(308));Ji=t,Xi.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ji=Ji.next=t;return e._currentValue}var io=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function so(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function uo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function lo(e,t){var n=e.alternate;null!==n&&ao(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function co(e,t,n,r){var o=e.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=e.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==a){u=a.next;var l=o.baseState,c=0,h=null,f=null,d=null;if(null!==u)for(var p=u;;){if((s=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(f=d=m,h=l):d=d.next=m,s>c&&(c=s)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),ou(s,p.suspenseConfig);e:{var g=e,A=p;switch(s=t,m=n,A.tag){case 1:if("function"===typeof(g=A.payload)){l=g.call(m,l,s);break e}l=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(s="function"===typeof(g=A.payload)?g.call(m,l,s):g)||void 0===s)break e;l=i({},l,s);break e;case 2:io=!0}}null!==p.callback&&(e.effectTag|=32,null===(s=o.effects)?o.effects=[p]:s.push(p))}if(null===(p=p.next)||p===u){if(null===(s=o.shared.pending))break;p=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===d?h=l:d.next=f,o.baseState=h,o.baseQueue=d,au(c),e.expirationTime=c,e.memoizedState=l}}function ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var fo=X.ReactCurrentBatchConfig,po=(new r.Component).refs;function mo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var go={isMounted:function(e){return!!(e=e._reactInternalFiber)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Hs(),i=fo.suspense;(i=so(r=Ks(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),uo(e,i),Ys(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Hs(),i=fo.suspense;(i=so(r=Ks(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),uo(e,i),Ys(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Hs(),r=fo.suspense;(r=so(n=Ks(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),uo(e,r),Ys(e,n)}};function Ao(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Br(n,r)||!Br(i,o))}function vo(e,t,n){var r=!1,i=ci,o=t.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=mi(t)?di:hi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?pi(e,i):ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=go,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function yo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function bo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=po,oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=mi(t)?di:hi.current,i.context=pi(e,o)),co(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(mo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&go.enqueueReplaceState(i,i.state,null),co(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var _o=Array.isArray;function wo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===po&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Eo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function xo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Tu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Cu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=wo(e,t,n),r.return=e,r):((r=Mu(n.type,n.key,n.props,null,e.mode,r)).ref=wo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ru(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Cu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Mu(t.type,t.key,t.props,null,e.mode,n)).ref=wo(e,null,t),n.return=e,n;case te:return(t=Ru(t,e.mode,n)).return=e,t}if(_o(t)||me(t))return(t=Lu(t,e.mode,n,null)).return=e,t;Eo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case te:return n.key===i?c(e,t,n,r):null}if(_o(n)||me(n))return null!==i?null:h(e,t,n,r,null);Eo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_o(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);Eo(t,r)}return null}function m(i,a,s,u){for(var l=null,c=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var A=d(i,h,s[m],u);if(null===A){null===h&&(h=g);break}e&&h&&null===A.alternate&&t(i,h),a=o(A,a,m),null===c?l=A:c.sibling=A,c=A,h=g}if(m===s.length)return n(i,h),l;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],u))&&(a=o(h,a,m),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),l}function g(i,s,u,l){var c=me(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,m=s,g=s=0,A=null,v=u.next();null!==m&&!v.done;g++,v=u.next()){m.index>g?(A=m,m=null):A=m.sibling;var y=d(i,m,v.value,l);if(null===y){null===m&&(m=A);break}e&&m&&null===y.alternate&&t(i,m),s=o(y,s,g),null===h?c=y:h.sibling=y,h=y,m=A}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=u.next())null!==(v=f(i,v.value,l))&&(s=o(v,s,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=r(i,m);!v.done;g++,v=u.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,u){var l="object"===typeof o&&null!==o&&o.type===ne&&null===o.key;l&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case ee:e:{for(c=o.key,l=r;null!==l;){if(l.key===c){switch(l.tag){case 7:if(o.type===ne){n(e,l.sibling),(r=i(l,o.props.children)).return=e,e=r;break e}break;default:if(l.elementType===o.type){n(e,l.sibling),(r=i(l,o.props)).ref=wo(e,l,o),r.return=e,e=r;break e}}n(e,l);break}t(e,l),l=l.sibling}o.type===ne?((r=Lu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Mu(o.type,o.key,o.props,null,e.mode,u)).ref=wo(e,r,o),u.return=e,e=u)}return s(e);case te:e:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ru(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Cu(o,e.mode,u)).return=e,e=r),s(e);if(_o(o))return m(e,r,o,u);if(me(o))return g(e,r,o,u);if(c&&Eo(e,o),"undefined"===typeof o&&!l)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var So=xo(!0),To=xo(!1),Mo={},Lo={current:Mo},Co={current:Mo},Ro={current:Mo};function Oo(e){if(e===Mo)throw Error(a(174));return e}function Io(e,t){switch(li(Ro,t),li(Co,e),li(Lo,Mo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Lo),li(Lo,t)}function Po(){ui(Lo),ui(Co),ui(Ro)}function ko(e){Oo(Ro.current);var t=Oo(Lo.current),n=Fe(t,e.type);t!==n&&(li(Co,e),li(Lo,n))}function No(e){Co.current===e&&(ui(Lo),ui(Co))}var Do={current:0};function Fo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function jo(e,t){return{responder:e,props:t}}var Bo=X.ReactCurrentDispatcher,Vo=X.ReactCurrentBatchConfig,Go=0,Uo=null,qo=null,Wo=null,zo=!1;function Ho(){throw Error(a(321))}function Ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fr(e[n],t[n]))return!1;return!0}function Yo(e,t,n,r,i,o){if(Go=o,Uo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Bo.current=null===e||null===e.memoizedState?Aa:va,e=n(r,i),t.expirationTime===Go){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Wo=qo=null,t.updateQueue=null,Bo.current=ya,e=n(r,i)}while(t.expirationTime===Go)}if(Bo.current=ga,t=null!==qo&&null!==qo.next,Go=0,Wo=qo=Uo=null,zo=!1,t)throw Error(a(300));return e}function Qo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wo?Uo.memoizedState=Wo=e:Wo=Wo.next=e,Wo}function Xo(){if(null===qo){var e=Uo.alternate;e=null!==e?e.memoizedState:null}else e=qo.next;var t=null===Wo?Uo.memoizedState:Wo.next;if(null!==t)Wo=t,qo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(qo=e).memoizedState,baseState:qo.baseState,baseQueue:qo.baseQueue,queue:qo.queue,next:null},null===Wo?Uo.memoizedState=Wo=e:Wo=Wo.next=e}return Wo}function Jo(e,t){return"function"===typeof t?t(e):t}function Zo(e){var t=Xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=qo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,l=i;do{var c=l.expirationTime;if(c<Go){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,c>Uo.expirationTime&&(Uo.expirationTime=c,au(c))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),ou(c,l.suspenseConfig),r=l.eagerReducer===e?l.eagerState:e(r,l.action);l=l.next}while(null!==l&&l!==i);null===u?o=r:u.next=s,Fr(r,t.memoizedState)||(Ra=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function $o(e){var t=Xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Fr(o,t.memoizedState)||(Ra=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ea(e){var t=Qo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:e}).dispatch=ma.bind(null,Uo,e),[t.memoizedState,e]}function ta(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Uo.updateQueue)?(t={lastEffect:null},Uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function na(){return Xo().memoizedState}function ra(e,t,n,r){var i=Qo();Uo.effectTag|=e,i.memoizedState=ta(1|t,n,void 0,void 0===r?null:r)}function ia(e,t,n,r){var i=Xo();r=void 0===r?null:r;var o=void 0;if(null!==qo){var a=qo.memoizedState;if(o=a.destroy,null!==r&&Ko(r,a.deps))return void ta(t,n,o,r)}Uo.effectTag|=e,i.memoizedState=ta(1|t,n,o,r)}function oa(e,t){return ra(516,4,e,t)}function aa(e,t){return ia(516,4,e,t)}function sa(e,t){return ia(4,2,e,t)}function ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function la(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ia(4,2,ua.bind(null,t,e),n)}function ca(){}function ha(e,t){return Qo().memoizedState=[e,void 0===t?null:t],e}function fa(e,t){var n=Xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function da(e,t){var n=Xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function pa(e,t,n){var r=Vi();Ui(98>r?98:r,(function(){e(!0)})),Ui(97<r?97:r,(function(){var r=Vo.suspense;Vo.suspense=void 0===t?null:t;try{e(!1),n()}finally{Vo.suspense=r}}))}function ma(e,t,n){var r=Hs(),i=fo.suspense;i={expirationTime:r=Ks(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Uo||null!==o&&o===Uo)zo=!0,i.expirationTime=Go,Uo.expirationTime=Go;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Fr(s,a))return}catch(u){}Ys(e,r)}}var ga={readContext:ro,useCallback:Ho,useContext:Ho,useEffect:Ho,useImperativeHandle:Ho,useLayoutEffect:Ho,useMemo:Ho,useReducer:Ho,useRef:Ho,useState:Ho,useDebugValue:Ho,useResponder:Ho,useDeferredValue:Ho,useTransition:Ho},Aa={readContext:ro,useCallback:ha,useContext:ro,useEffect:oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ra(4,2,ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var n=Qo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ma.bind(null,Uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Qo().memoizedState=e},useState:ea,useDebugValue:ca,useResponder:jo,useDeferredValue:function(e,t){var n=ea(e),r=n[0],i=n[1];return oa((function(){var n=Vo.suspense;Vo.suspense=void 0===t?null:t;try{i(e)}finally{Vo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ea(!1),n=t[0];return t=t[1],[ha(pa.bind(null,t,e),[t,e]),n]}},va={readContext:ro,useCallback:fa,useContext:ro,useEffect:aa,useImperativeHandle:la,useLayoutEffect:sa,useMemo:da,useReducer:Zo,useRef:na,useState:function(){return Zo(Jo)},useDebugValue:ca,useResponder:jo,useDeferredValue:function(e,t){var n=Zo(Jo),r=n[0],i=n[1];return aa((function(){var n=Vo.suspense;Vo.suspense=void 0===t?null:t;try{i(e)}finally{Vo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Zo(Jo),n=t[0];return t=t[1],[fa(pa.bind(null,t,e),[t,e]),n]}},ya={readContext:ro,useCallback:fa,useContext:ro,useEffect:aa,useImperativeHandle:la,useLayoutEffect:sa,useMemo:da,useReducer:$o,useRef:na,useState:function(){return $o(Jo)},useDebugValue:ca,useResponder:jo,useDeferredValue:function(e,t){var n=$o(Jo),r=n[0],i=n[1];return aa((function(){var n=Vo.suspense;Vo.suspense=void 0===t?null:t;try{i(e)}finally{Vo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=$o(Jo),n=t[0];return t=t[1],[fa(pa.bind(null,t,e),[t,e]),n]}},ba=null,_a=null,wa=!1;function Ea(e,t){var n=xu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function xa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Sa(e){if(wa){var t=_a;if(t){var n=t;if(!xa(e,t)){if(!(t=_n(n.nextSibling))||!xa(e,t))return e.effectTag=-1025&e.effectTag|2,wa=!1,void(ba=e);Ea(ba,n)}ba=e,_a=_n(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,wa=!1,ba=e}}function Ta(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ba=e}function Ma(e){if(e!==ba)return!1;if(!wa)return Ta(e),wa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!vn(t,e.memoizedProps))for(t=_a;t;)Ea(e,t),t=_n(t.nextSibling);if(Ta(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){_a=_n(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}_a=null}}else _a=ba?_n(e.stateNode.nextSibling):null;return!0}function La(){_a=ba=null,wa=!1}var Ca=X.ReactCurrentOwner,Ra=!1;function Oa(e,t,n,r){t.child=null===e?To(t,null,n,r):So(t,e.child,n,r)}function Ia(e,t,n,r,i){n=n.render;var o=t.ref;return no(t,i),r=Yo(e,t,n,r,o,i),null===e||Ra?(t.effectTag|=1,Oa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ya(e,t,i))}function Pa(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Su(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mu(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ka(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Br)(i,r)&&e.ref===t.ref)?Ya(e,t,o):(t.effectTag|=1,(e=Tu(a,r)).ref=t.ref,e.return=t,t.child=e)}function ka(e,t,n,r,i,o){return null!==e&&Br(e.memoizedProps,r)&&e.ref===t.ref&&(Ra=!1,i<o)?(t.expirationTime=e.expirationTime,Ya(e,t,o)):Da(e,t,n,r,o)}function Na(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Da(e,t,n,r,i){var o=mi(n)?di:hi.current;return o=pi(t,o),no(t,i),n=Yo(e,t,n,r,o,i),null===e||Ra?(t.effectTag|=1,Oa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ya(e,t,i))}function Fa(e,t,n,r,i){if(mi(n)){var o=!0;yi(t)}else o=!1;if(no(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),vo(t,n,r),bo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=ro(l):l=pi(t,l=mi(n)?di:hi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&yo(t,a,r,l),io=!1;var f=t.memoizedState;a.state=f,co(t,r,a,i),u=t.memoizedState,s!==r||f!==u||fi.current||io?("function"===typeof c&&(mo(t,n,c,r),u=t.memoizedState),(s=io||Ao(t,n,s,r,f,u,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,ao(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:Yi(t.type,s),u=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ro(l):l=pi(t,l=mi(n)?di:hi.current),(h="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&yo(t,a,r,l),io=!1,u=t.memoizedState,a.state=u,co(t,r,a,i),f=t.memoizedState,s!==r||u!==f||fi.current||io?("function"===typeof c&&(mo(t,n,c,r),f=t.memoizedState),(c=io||Ao(t,n,s,r,u,f,l))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return ja(e,t,n,r,o,i)}function ja(e,t,n,r,i,o){Na(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&bi(t,n,!1),Ya(e,t,o);r=t.stateNode,Ca.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=So(t,e.child,null,o),t.child=So(t,null,s,o)):Oa(e,t,s,o),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function Ba(e){var t=e.stateNode;t.pendingContext?Ai(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ai(0,t.context,!1),Io(e,t.containerInfo)}var Va,Ga,Ua,qa={dehydrated:null,retryTime:0};function Wa(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Do.current,s=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),li(Do,1&a),null===e){if(void 0!==o.fallback&&Sa(t),s){if(s=o.fallback,(o=Lu(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Lu(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=qa,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=To(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Tu(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Tu(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=qa,t.child=n,i}return n=So(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Lu(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Lu(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=qa,t.child=o,n}return t.memoizedState=null,t.child=So(t,e,o.children,n)}function za(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),to(e.return,t)}function Ha(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Ka(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Oa(e,t,r.children,n),0!==(2&(r=Do.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n);else if(19===e.tag)za(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(li(Do,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ha(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ha(t,!0,n,null,o,t.lastEffect);break;case"together":Ha(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ya(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&au(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Tu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Tu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qa(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xa(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mi(t.type)&&gi(),null;case 3:return Po(),ui(fi),ui(hi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Ma(t)||(t.effectTag|=4),null;case 5:No(t),n=Oo(Ro.current);var o=t.type;if(null!==e&&null!=t.stateNode)Ga(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Oo(Lo.current),Ma(t)){r=t.stateNode,o=t.type;var s=t.memoizedProps;switch(r[xn]=t,r[Sn]=s,o){case"iframe":case"object":case"embed":Kt("load",r);break;case"video":case"audio":for(e=0;e<Xe.length;e++)Kt(Xe[e],r);break;case"source":Kt("error",r);break;case"img":case"image":case"link":Kt("error",r),Kt("load",r);break;case"form":Kt("reset",r),Kt("submit",r);break;case"details":Kt("toggle",r);break;case"input":Ee(r,s),Kt("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Kt("invalid",r),un(n,"onChange");break;case"textarea":Oe(r,s),Kt("invalid",r),un(n,"onChange")}for(var u in on(o,s),e=null,s)if(s.hasOwnProperty(u)){var l=s[u];"children"===u?"string"===typeof l?r.textContent!==l&&(e=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(e=["children",""+l]):x.hasOwnProperty(u)&&null!=l&&un(n,u)}switch(o){case"input":be(r),Te(r,s,!0);break;case"textarea":be(r),Pe(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=ln)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,e===sn&&(e=De(o)),e===sn?"script"===o?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(o,{is:r.is}):(e=u.createElement(o),"select"===o&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,o),e[xn]=t,e[Sn]=r,Va(e,t),t.stateNode=e,u=an(o,r),o){case"iframe":case"object":case"embed":Kt("load",e),l=r;break;case"video":case"audio":for(l=0;l<Xe.length;l++)Kt(Xe[l],e);l=r;break;case"source":Kt("error",e),l=r;break;case"img":case"image":case"link":Kt("error",e),Kt("load",e),l=r;break;case"form":Kt("reset",e),Kt("submit",e),l=r;break;case"details":Kt("toggle",e),l=r;break;case"input":Ee(e,r),l=we(e,r),Kt("invalid",e),un(n,"onChange");break;case"option":l=Le(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=i({},r,{value:void 0}),Kt("invalid",e),un(n,"onChange");break;case"textarea":Oe(e,r),l=Re(e,r),Kt("invalid",e),un(n,"onChange");break;default:l=r}on(o,l);var c=l;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?nn(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&Be(e,h):"children"===s?"string"===typeof h?("textarea"!==o||""!==h)&&Ve(e,h):"number"===typeof h&&Ve(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?null!=h&&un(n,s):null!=h&&J(e,s,h,u))}switch(o){case"input":be(e),Te(e,r,!1);break;case"textarea":be(e),Pe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ce(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ce(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof l.onClick&&(e.onclick=ln)}An(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ua(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Oo(Ro.current),Oo(Lo.current),Ma(t)?(n=t.stateNode,r=t.memoizedProps,n[xn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[xn]=t,t.stateNode=n)}return null;case 13:return ui(Do),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Ma(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Do.current)?Ms===bs&&(Ms=_s):(Ms!==bs&&Ms!==_s||(Ms=ws),0!==Is&&null!==xs&&(Pu(xs,Ts),ku(xs,Is)))),(n||r)&&(t.effectTag|=4),null);case 4:return Po(),null;case 10:return eo(t),null;case 17:return mi(t.type)&&gi(),null;case 19:if(ui(Do),null===(r=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(s=r.rendering)){if(o)Qa(r,!1);else if(Ms!==bs||null!==e&&0!==(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=Fo(s))){for(t.effectTag|=64,Qa(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return li(Do,1&Do.current|2),t.child}s=s.sibling}}else{if(!o)if(null!==(e=Fo(s))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Qa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,Qa(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Bi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Do.current,li(Do,o?1&t|2:1&t),n):null}throw Error(a(156,t.tag))}function Ja(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Po(),ui(fi),ui(hi),0!==(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return No(e),null;case 13:return ui(Do),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return ui(Do),null;case 4:return Po(),null;case 10:return eo(e),null;default:return null}}function Za(e,t){return{value:e,source:t,stack:Ae(t)}}Va=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ga=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,u,l=t.stateNode;switch(Oo(Lo.current),e=null,n){case"input":a=we(l,a),r=we(l,r),e=[];break;case"option":a=Le(l,a),r=Le(l,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Re(l,a),r=Re(l,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(l.onclick=ln)}for(s in on(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in l=a[s])l.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var c=r[s];if(l=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&c!==l&&(null!=c||null!=l))if("style"===s)if(l){for(u in l)!l.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in c)c.hasOwnProperty(u)&&l[u]!==c[u]&&(n||(n={}),n[u]=c[u])}else n||(e||(e=[]),e.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(e=e||[]).push(s,c)):"children"===s?l===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(x.hasOwnProperty(s)?(null!=c&&un(o,s),e||l===c||(e=[])):(e=e||[]).push(s,c))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Ua=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var $a="function"===typeof WeakSet?WeakSet:Set;function es(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=Ae(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function ts(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){vu(e,n)}else t.current=null}function ns(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function os(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&ho(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ho(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&An(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Dt(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(e,t,n){switch("function"===typeof wu&&wu(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Ui(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){vu(i,o)}}e=e.next}while(e!==r)}))}break;case 1:ts(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){vu(e,n)}}(t,n);break;case 5:ts(t);break;case 4:cs(e,t,n)}}function ss(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ss(t)}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ls(e){e:{for(var t=e.return;null!==t;){if(us(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Ve(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||us(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=ln));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function cs(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var u=e,l=o,c=n,h=l;;)if(as(u,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===l)break e;for(;null===h.sibling;){if(null===h.return||h.return===l)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,l=o.stateNode,8===u.nodeType?u.parentNode.removeChild(l):u.removeChild(l)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function hs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Sn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&xe(n,r),an(e,i),t=an(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?nn(n,u):"dangerouslySetInnerHTML"===s?Be(n,u):"children"===s?Ve(n,u):J(n,s,u,t)}switch(e){case"input":Se(n,r);break;case"textarea":Ie(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ce(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ce(n,!!r.multiple,r.defaultValue,!0):Ce(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Dt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,ks=Bi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=tn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void fs(t);case 19:return void fs(t);case 17:return}throw Error(a(163))}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ds||(Ds=!0,Fs=r),es(e,t)},n}function ms(e,t,n){(n=so(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return es(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===js?js=new Set([this]):js.add(this),es(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var gs,As=Math.ceil,vs=X.ReactCurrentDispatcher,ys=X.ReactCurrentOwner,bs=0,_s=3,ws=4,Es=0,xs=null,Ss=null,Ts=0,Ms=bs,Ls=null,Cs=1073741823,Rs=1073741823,Os=null,Is=0,Ps=!1,ks=0,Ns=null,Ds=!1,Fs=null,js=null,Bs=!1,Vs=null,Gs=90,Us=null,qs=0,Ws=null,zs=0;function Hs(){return 0!==(48&Es)?1073741821-(Bi()/10|0):0!==zs?zs:zs=1073741821-(Bi()/10|0)}function Ks(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Vi();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(16&Es))return Ts;if(null!==n)e=Ki(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Ki(e,150,100);break;case 97:case 96:e=Ki(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==xs&&e===Ts&&--e,e}function Ys(e,t){if(50<qs)throw qs=0,Ws=null,Error(a(185));if(null!==(e=Qs(e,t))){var n=Vi();1073741823===t?0!==(8&Es)&&0===(48&Es)?$s(e):(Js(e),0===Es&&zi()):Js(e),0===(4&Es)||98!==n&&99!==n||(null===Us?Us=new Map([[e,t]]):(void 0===(n=Us.get(e))||n>t)&&Us.set(e,t))}}function Qs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(xs===i&&(au(t),Ms===ws&&Pu(i,Ts)),ku(i,t)),i}function Xs(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Iu(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Js(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Wi($s.bind(null,e));else{var t=Xs(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Hs();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ii&&Ei(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Wi($s.bind(null,e)):qi(r,Zs.bind(null,e),{timeout:10*(1073741821-t)-Bi()}),e.callbackNode=t}}}function Zs(e,t){if(zs=0,t)return Nu(e,t=Hs()),Js(e),null;var n=Xs(e);if(0!==n){if(t=e.callbackNode,0!==(48&Es))throw Error(a(327));if(mu(),e===xs&&n===Ts||nu(e,n),null!==Ss){var r=Es;Es|=16;for(var i=iu();;)try{uu();break}catch(u){ru(e,u)}if($i(),Es=r,vs.current=i,1===Ms)throw t=Ls,nu(e,n),Pu(e,n),Js(e),t;if(null===Ss)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ms,xs=null,r){case bs:case 1:throw Error(a(345));case 2:Nu(e,2<n?2:n);break;case _s:if(Pu(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=hu(i)),1073741823===Cs&&10<(i=ks+500-Bi())){if(Ps){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,nu(e,n);break}}if(0!==(o=Xs(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=yn(fu.bind(null,e),i);break}fu(e);break;case ws:if(Pu(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=hu(i)),Ps&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,nu(e,n);break}if(0!==(i=Xs(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Rs?r=10*(1073741821-Rs)-Bi():1073741823===Cs?r=0:(r=10*(1073741821-Cs)-5e3,0>(r=(i=Bi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*As(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=yn(fu.bind(null,e),r);break}fu(e);break;case 5:if(1073741823!==Cs&&null!==Os){o=Cs;var s=Os;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Bi()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Pu(e,n),e.timeoutHandle=yn(fu.bind(null,e),r);break}}fu(e);break;default:throw Error(a(329))}if(Js(e),e.callbackNode===t)return Zs.bind(null,e)}}return null}function $s(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Es))throw Error(a(327));if(mu(),e===xs&&t===Ts||nu(e,t),null!==Ss){var n=Es;Es|=16;for(var r=iu();;)try{su();break}catch(i){ru(e,i)}if($i(),Es=n,vs.current=r,1===Ms)throw n=Ls,nu(e,t),Pu(e,t),Js(e),n;if(null!==Ss)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,xs=null,fu(e),Js(e)}return null}function eu(e,t){var n=Es;Es|=1;try{return e(t)}finally{0===(Es=n)&&zi()}}function tu(e,t){var n=Es;Es&=-2,Es|=8;try{return e(t)}finally{0===(Es=n)&&zi()}}function nu(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,bn(n)),null!==Ss)for(n=Ss.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Po(),ui(fi),ui(hi);break;case 5:No(r);break;case 4:Po();break;case 13:case 19:ui(Do);break;case 10:eo(r)}n=n.return}xs=e,Ss=Tu(e.current,null),Ts=t,Ms=bs,Ls=null,Rs=Cs=1073741823,Os=null,Is=0,Ps=!1}function ru(e,t){for(;;){try{if($i(),Bo.current=ga,zo)for(var n=Uo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Go=0,Wo=qo=Uo=null,zo=!1,null===Ss||null===Ss.return)return Ms=1,Ls=t,Ss=null;e:{var i=e,o=Ss.return,a=Ss,s=t;if(t=Ts,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&a.mode)){var l=a.alternate;l?(a.updateQueue=l.updateQueue,a.memoizedState=l.memoizedState,a.expirationTime=l.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!==(1&Do.current),h=o;do{var f;if(f=13===h.tag){var d=h.memoizedState;if(null!==d)f=null!==d.dehydrated;else{var p=h.memoizedProps;f=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(f){var m=h.updateQueue;if(null===m){var g=new Set;g.add(u),h.updateQueue=g}else m.add(u);if(0===(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var A=so(1073741823,null);A.tag=2,uo(a,A)}a.expirationTime=1073741823;break e}s=void 0,a=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new ds,s=new Set,v.set(u,s)):void 0===(s=v.get(u))&&(s=new Set,v.set(u,s)),!s.has(a)){s.add(a);var y=yu.bind(null,i,u,a);u.then(y,y)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);s=Error((ge(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Ae(a))}5!==Ms&&(Ms=2),s=Za(s,a),h=o;do{switch(h.tag){case 3:u=s,h.effectTag|=4096,h.expirationTime=t,lo(h,ps(h,u,t));break e;case 1:u=s;var b=h.type,_=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===js||!js.has(_)))){h.effectTag|=4096,h.expirationTime=t,lo(h,ms(h,u,t));break e}}h=h.return}while(null!==h)}Ss=cu(Ss)}catch(w){t=w;continue}break}}function iu(){var e=vs.current;return vs.current=ga,null===e?ga:e}function ou(e,t){e<Cs&&2<e&&(Cs=e),null!==t&&e<Rs&&2<e&&(Rs=e,Os=t)}function au(e){e>Is&&(Is=e)}function su(){for(;null!==Ss;)Ss=lu(Ss)}function uu(){for(;null!==Ss&&!Pi();)Ss=lu(Ss)}function lu(e){var t=gs(e.alternate,e,Ts);return e.memoizedProps=e.pendingProps,null===t&&(t=cu(e)),ys.current=null,t}function cu(e){Ss=e;do{var t=Ss.alternate;if(e=Ss.return,0===(2048&Ss.effectTag)){if(t=Xa(t,Ss,Ts),1===Ts||1!==Ss.childExpirationTime){for(var n=0,r=Ss.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ss.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ss.firstEffect),null!==Ss.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ss.firstEffect),e.lastEffect=Ss.lastEffect),1<Ss.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ss:e.firstEffect=Ss,e.lastEffect=Ss))}else{if(null!==(t=Ja(Ss)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ss.sibling))return t;Ss=e}while(null!==Ss);return Ms===bs&&(Ms=5),null}function hu(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function fu(e){var t=Vi();return Ui(99,du.bind(null,e,t)),null}function du(e,t){do{mu()}while(null!==Vs);if(0!==(48&Es))throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=hu(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===xs&&(Ss=xs=null,Ts=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Es;Es|=32,ys.current=null,mn=Ht;var s=dn();if(pn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var l=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(l&&0!==l.rangeCount){u=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{u.nodeType,h.nodeType}catch(T){u=null;break e}var f=0,d=-1,p=-1,m=0,g=0,A=s,v=null;t:for(;;){for(var y;A!==u||0!==c&&3!==A.nodeType||(d=f+c),A!==h||0!==l&&3!==A.nodeType||(p=f+l),3===A.nodeType&&(f+=A.nodeValue.length),null!==(y=A.firstChild);)v=A,A=y;for(;;){if(A===s)break t;if(v===u&&++m===c&&(d=f),v===h&&++g===l&&(p=f),null!==(y=A.nextSibling))break;v=(A=v).parentNode}A=y}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;gn={activeElementDetached:null,focusedElem:s,selectionRange:u},Ht=!1,Ns=i;do{try{pu()}catch(T){if(null===Ns)throw Error(a(330));vu(Ns,T),Ns=Ns.nextEffect}}while(null!==Ns);Ns=i;do{try{for(s=e,u=t;null!==Ns;){var b=Ns.effectTag;if(16&b&&Ve(Ns.stateNode,""),128&b){var _=Ns.alternate;if(null!==_){var w=_.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:ls(Ns),Ns.effectTag&=-3;break;case 6:ls(Ns),Ns.effectTag&=-3,hs(Ns.alternate,Ns);break;case 1024:Ns.effectTag&=-1025;break;case 1028:Ns.effectTag&=-1025,hs(Ns.alternate,Ns);break;case 4:hs(Ns.alternate,Ns);break;case 8:cs(s,c=Ns,u),ss(c)}Ns=Ns.nextEffect}}catch(T){if(null===Ns)throw Error(a(330));vu(Ns,T),Ns=Ns.nextEffect}}while(null!==Ns);if(w=gn,_=dn(),b=w.focusedElem,u=w.selectionRange,_!==b&&b&&b.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==u&&pn(b)&&(_=u.start,void 0===(w=u.end)&&(w=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(w,b.value.length)):(w=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),c=b.textContent.length,s=Math.min(u.start,c),u=void 0===u.end?s:Math.min(u.end,c),!w.extend&&s>u&&(c=u,u=s,s=c),c=fn(b,s),h=fn(b,u),c&&h&&(1!==w.rangeCount||w.anchorNode!==c.node||w.anchorOffset!==c.offset||w.focusNode!==h.node||w.focusOffset!==h.offset)&&((_=_.createRange()).setStart(c.node,c.offset),w.removeAllRanges(),s>u?(w.addRange(_),w.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),w.addRange(_))))),_=[];for(w=b;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(w=_[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Ht=!!mn,gn=mn=null,e.current=n,Ns=i;do{try{for(b=e;null!==Ns;){var E=Ns.effectTag;if(36&E&&os(b,Ns.alternate,Ns),128&E){_=void 0;var x=Ns.ref;if(null!==x){var S=Ns.stateNode;switch(Ns.tag){case 5:_=S;break;default:_=S}"function"===typeof x?x(_):x.current=_}}Ns=Ns.nextEffect}}catch(T){if(null===Ns)throw Error(a(330));vu(Ns,T),Ns=Ns.nextEffect}}while(null!==Ns);Ns=null,ki(),Es=o}else e.current=n;if(Bs)Bs=!1,Vs=e,Gs=t;else for(Ns=i;null!==Ns;)t=Ns.nextEffect,Ns.nextEffect=null,Ns=t;if(0===(t=e.firstPendingTime)&&(js=null),1073741823===t?e===Ws?qs++:(qs=0,Ws=e):qs=0,"function"===typeof _u&&_u(n.stateNode,r),Js(e),Ds)throw Ds=!1,e=Fs,Fs=null,e;return 0!==(8&Es)||zi(),null}function pu(){for(;null!==Ns;){var e=Ns.effectTag;0!==(256&e)&&ns(Ns.alternate,Ns),0===(512&e)||Bs||(Bs=!0,qi(97,(function(){return mu(),null}))),Ns=Ns.nextEffect}}function mu(){if(90!==Gs){var e=97<Gs?97:Gs;return Gs=90,Ui(e,gu)}}function gu(){if(null===Vs)return!1;var e=Vs;if(Vs=null,0!==(48&Es))throw Error(a(331));var t=Es;for(Es|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(r){if(null===e)throw Error(a(330));vu(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Es=t,zi(),!0}function Au(e,t,n){uo(e,t=ps(e,t=Za(n,t),1073741823)),null!==(e=Qs(e,1073741823))&&Js(e)}function vu(e,t){if(3===e.tag)Au(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Au(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===js||!js.has(r))){uo(n,e=ms(n,e=Za(t,e),1073741823)),null!==(n=Qs(n,1073741823))&&Js(n);break}}n=n.return}}function yu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),xs===e&&Ts===n?Ms===ws||Ms===_s&&1073741823===Cs&&Bi()-ks<500?nu(e,Ts):Ps=!0:Iu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Js(e)))}function bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=Ks(t=Hs(),e,null)),null!==(e=Qs(e,t))&&Js(e)}gs=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||fi.current)Ra=!0;else{if(r<n){switch(Ra=!1,t.tag){case 3:Ba(t),La();break;case 5:if(ko(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:mi(t.type)&&yi(t);break;case 4:Io(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,li(Qi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Wa(e,t,n):(li(Do,1&Do.current),null!==(t=Ya(e,t,n))?t.sibling:null);li(Do,1&Do.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return Ka(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),li(Do,Do.current),!r)return null}return Ya(e,t,n)}Ra=!1}}else Ra=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=pi(t,hi.current),no(t,n),i=Yo(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var o=!0;yi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&mo(t,r,s,e),i.updater=go,t.stateNode=i,i._reactInternalFiber=t,bo(t,r,e,n),t=ja(null,t,r,!0,o,n)}else t.tag=0,Oa(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return Su(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ue)return 11;if(e===he)return 14}return 2}(i),e=Yi(i,e),o){case 0:t=Da(null,t,i,e,n);break e;case 1:t=Fa(null,t,i,e,n);break e;case 11:t=Ia(null,t,i,e,n);break e;case 14:t=Pa(null,t,i,Yi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Da(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ba(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ao(e,t),co(t,r,null,n),(r=t.memoizedState.element)===i)La(),t=Ya(e,t,n);else{if((i=t.stateNode.hydrate)&&(_a=_n(t.stateNode.containerInfo.firstChild),ba=t,i=wa=!0),i)for(n=To(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Oa(e,t,r,n),La();t=t.child}return t;case 5:return ko(t),null===e&&Sa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,vn(r,i)?s=null:null!==o&&vn(r,o)&&(t.effectTag|=16),Na(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Oa(e,t,s,n),t=t.child),t;case 6:return null===e&&Sa(t),null;case 13:return Wa(e,t,n);case 4:return Io(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=So(t,null,r,n):Oa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Oa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oa(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(li(Qi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=Fr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!fi.current){t=Ya(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===u.tag&&((c=so(n,null)).tag=2,uo(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),to(u.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Oa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,no(t,n),r=r(i=ro(i,o.unstable_observedBits)),t.effectTag|=1,Oa(e,t,r,n),t.child;case 14:return o=Yi(i=t.type,t.pendingProps),Pa(e,t,i,o=Yi(i.type,o),r,n);case 15:return ka(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,mi(r)?(e=!0,yi(t)):e=!1,no(t,n),vo(t,r,i),bo(t,r,i,n),ja(null,t,r,!0,e,n);case 19:return Ka(e,t,n)}throw Error(a(156,t.tag))};var _u=null,wu=null;function Eu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function xu(e,t,n,r){return new Eu(e,t,n,r)}function Su(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tu(e,t){var n=e.alternate;return null===n?((n=xu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Su(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case ne:return Lu(n.children,i,o,t);case se:s=8,i|=7;break;case re:s=8,i|=1;break;case ie:return(e=xu(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case le:return(e=xu(13,n,t,i)).type=le,e.elementType=le,e.expirationTime=o,e;case ce:return(e=xu(19,n,t,i)).elementType=ce,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case oe:s=10;break e;case ae:s=9;break e;case ue:s=11;break e;case he:s=14;break e;case fe:s=16,r=null;break e;case de:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=xu(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Lu(e,t,n,r){return(e=xu(7,e,r,t)).expirationTime=n,e}function Cu(e,t,n){return(e=xu(6,e,null,t)).expirationTime=n,e}function Ru(e,t,n){return(t=xu(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ou(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Iu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Pu(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function ku(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Nu(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Du(e,t,n,r){var i=t.current,o=Hs(),s=fo.suspense;o=Ks(o,i,s);e:if(n){t:{if($e(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var l=n.type;if(mi(l)){n=vi(n,l,u);break e}}n=u}else n=ci;return null===t.context?t.context=n:t.pendingContext=n,(t=so(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),uo(i,t),Ys(i,o),o}function Fu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function ju(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Bu(e,t){ju(e,t),(e=e.alternate)&&ju(e,t)}function Vu(e,t,n){var r=new Ou(e,t,n=null!=n&&!0===n.hydrate),i=xu(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,oo(i),e[Tn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);Tt.forEach((function(e){pt(e,t,n)})),Mt.forEach((function(e){pt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Gu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Uu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Fu(a);s.call(e)}}Du(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Vu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Fu(a);u.call(e)}}tu((function(){Du(t,a,e,i)}))}return Fu(a)}function qu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Wu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gu(t))throw Error(a(200));return qu(e,t,null,n)}Vu.prototype.render=function(e){Du(e,this._internalRoot,null,null)},Vu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Du(null,e,null,(function(){t[Tn]=null}))},mt=function(e){if(13===e.tag){var t=Ki(Hs(),150,100);Ys(e,t),Bu(e,t)}},gt=function(e){13===e.tag&&(Ys(e,3),Bu(e,3))},At=function(e){if(13===e.tag){var t=Hs();Ys(e,t=Ks(t,e,null)),Bu(e,t)}},L=function(e,t,n){switch(t){case"input":if(Se(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Rn(r);if(!i)throw Error(a(90));_e(r),Se(r,i)}}}break;case"textarea":Ie(e,n);break;case"select":null!=(t=n.value)&&Ce(e,!!n.multiple,t,!1)}},k=eu,N=function(e,t,n,r,i){var o=Es;Es|=4;try{return Ui(98,e.bind(null,t,n,r,i))}finally{0===(Es=o)&&zi()}},D=function(){0===(49&Es)&&(function(){if(null!==Us){var e=Us;Us=null,e.forEach((function(e,t){Nu(t,e),Js(t)})),zi()}}(),mu())},F=function(e,t){var n=Es;Es|=2;try{return e(t)}finally{0===(Es=n)&&zi()}};var zu={Events:[Ln,Cn,Rn,T,E,Fn,function(e){it(e,Dn)},I,P,Jt,st,mu,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);_u=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},wu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Mn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zu,t.createPortal=Wu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Es))throw Error(a(187));var n=Es;Es|=1;try{return Ui(99,e.bind(null,t))}finally{Es=n,zi()}},t.hydrate=function(e,t,n){if(!Gu(t))throw Error(a(200));return Uu(null,e,t,!0,n)},t.render=function(e,t,n){if(!Gu(t))throw Error(a(200));return Uu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Gu(e))throw Error(a(40));return!!e._reactRootContainer&&(tu((function(){Uu(null,null,e,!1,(function(){e._reactRootContainer=null,e[Tn]=null}))})),!0)},t.unstable_batchedUpdates=eu,t.unstable_createPortal=function(e,t){return Wu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gu(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Uu(e,t,n,!1,r)},t.version="16.13.1"},function(e,t,n){"use strict";e.exports=n(126)},function(e,t,n){"use strict";var r,i,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,l=null,c=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},h=Date.now();t.unstable_now=function(){return Date.now()-h},r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(c,0))},i=function(e,t){l=setTimeout(e,t)},o=function(){clearTimeout(l)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,d=window.Date,p=window.setTimeout,m=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var A=d.now();t.unstable_now=function(){return d.now()-A}}var v=!1,y=null,b=-1,_=5,w=0;a=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,x=E.port2;E.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();w=e+_;try{y(!0,e)?x.postMessage(null):(v=!1,y=null)}catch(n){throw x.postMessage(null),n}}else v=!1},r=function(e){y=e,v||(v=!0,x.postMessage(null))},i=function(e,n){b=p((function(){e(t.unstable_now())}),n)},o=function(){m(b),b=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<L(i,t)))break e;e[r]=t,e[n]=i,n=r}}function T(e){return void 0===(e=e[0])?null:e}function M(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>L(a,n))void 0!==u&&0>L(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>L(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function L(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],R=[],O=1,I=null,P=3,k=!1,N=!1,D=!1;function F(e){for(var t=T(R);null!==t;){if(null===t.callback)M(R);else{if(!(t.startTime<=e))break;M(R),t.sortIndex=t.expirationTime,S(C,t)}t=T(R)}}function j(e){if(D=!1,F(e),!N)if(null!==T(C))N=!0,r(B);else{var t=T(R);null!==t&&i(j,t.startTime-e)}}function B(e,n){N=!1,D&&(D=!1,o()),k=!0;var r=P;try{for(F(n),I=T(C);null!==I&&(!(I.expirationTime>n)||e&&!a());){var s=I.callback;if(null!==s){I.callback=null,P=I.priorityLevel;var u=s(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?I.callback=u:I===T(C)&&M(C),F(n)}else M(C);I=T(C)}if(null!==I)var l=!0;else{var c=T(R);null!==c&&i(j,c.startTime-n),l=!1}return l}finally{I=null,P=r,k=!1}}function V(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var G=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){N||k||(N=!0,r(B))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return T(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=G,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:V(e)}else a=V(e),u=s;return e={id:O++,callback:n,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(e.sortIndex=u,S(R,e),null===T(C)&&e===T(R)&&(D?o():D=!0,i(j,u-s))):(e.sortIndex=a,S(C,e),N||k||(N=!0,r(B))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();F(e);var n=T(C);return n!==I&&null!==I&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<I.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},,,function(e,t,n){"use strict";n(83)},function(e,t,n){"use strict";n(84)},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",(function(){return tr})),n.d(t,"EventType",(function(){return nr})),n.d(t,"WebChannel",(function(){return rr})),n.d(t,"XhrIo",(function(){return ir})),n.d(t,"createWebChannelTransport",(function(){return er}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,a="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},s=s||{},u=a||self;function l(){}function c(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function h(e){var t=c(e);return"array"==t||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var d="closure_uid_"+(1e9*Math.random()>>>0),p=0;function m(e,t,n){return e.call.apply(e.bind,arguments)}function g(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function A(e,t,n){return(A=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:g).apply(null,arguments)}function v(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var y=Date.now;function b(e,t){function n(){}n.prototype=t.prototype,e.S=t.prototype,e.prototype=new n,e.prototype.constructor=e}function _(){this.j=this.j,this.i=this.i}_.prototype.j=!1,_.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(e){Object.prototype.hasOwnProperty.call(e,d)&&e[d]||(e[d]=++p)})(this)},_.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var w=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},E=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function x(e){return Array.prototype.concat.apply([],arguments)}function S(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function T(e){return/^[\s\xa0]*$/.test(e)}var M,L=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function C(e,t){return-1!=e.indexOf(t)}function R(e,t){return e<t?-1:e>t?1:0}e:{var O=u.navigator;if(O){var I=O.userAgent;if(I){M=I;break e}}M=""}function P(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function k(e){var t={};for(var n in e)t[n]=e[n];return t}var N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<N.length;o++)n=N[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){return F[" "](e),e}F[" "]=l;var j,B=C(M,"Opera"),V=C(M,"Trident")||C(M,"MSIE"),G=C(M,"Edge"),U=G||V,q=C(M,"Gecko")&&!(C(M.toLowerCase(),"webkit")&&!C(M,"Edge"))&&!(C(M,"Trident")||C(M,"MSIE"))&&!C(M,"Edge"),W=C(M.toLowerCase(),"webkit")&&!C(M,"Edge");function z(){var e=u.document;return e?e.documentMode:void 0}e:{var H="",K=function(){var e=M;return q?/rv:([^\);]+)(\)|;)/.exec(e):G?/Edge\/([\d\.]+)/.exec(e):V?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):W?/WebKit\/(\S+)/.exec(e):B?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(K&&(H=K?K[1]:""),V){var Y=z();if(null!=Y&&Y>parseFloat(H)){j=String(Y);break e}}j=H}var Q,X={};function J(e){return function(e,t){var n=X;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=L(String(j)).split("."),r=L(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=R(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||R(0==a[2].length,0==s[2].length)||R(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(u.document&&V){var Z=z();Q=Z||(parseInt(j,10)||void 0)}else Q=void 0;var $=Q,ee=!V||9<=Number($),te=V&&!J("9"),ne=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",l,t),u.removeEventListener("test",l,t)}catch(n){}return e}();function re(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}function ie(e,t){if(re.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(q){e:{try{F(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:oe[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}re.prototype.b=function(){this.defaultPrevented=!0},b(ie,re);var oe={2:"touch",3:"pen",4:"mouse"};ie.prototype.b=function(){ie.S.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,te)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var ae="closure_listenable_"+(1e6*Math.random()|0),se=0;function ue(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++se,this.Y=this.Z=!1}function le(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function ce(e){this.src=e,this.a={},this.b=0}function he(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=w(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(le(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function fe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.Y&&o.listener==t&&o.capture==!!n&&o.ca==r)return i}return-1}ce.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=fe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new ue(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var de="closure_lm_"+(1e6*Math.random()|0),pe={};function me(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Ee(r),t&&t[ae]?t.wa(n,r,f(i)?!!i.capture:!!i,o):ge(t,n,r,!0,i,o)}(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)me(e,t[o],n,r,i);return null}return n=Ee(n),e&&e[ae]?e.va(t,n,f(r)?!!r.capture:!!r,i):ge(e,t,n,!1,r,i)}function ge(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i;if(a&&!ee)return null;var s=_e(e);if(s||(e[de]=s=new ce(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=be,t=ee?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ne||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ve(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ae(e){if("number"!==typeof e&&e&&!e.Y){var t=e.src;if(t&&t[ae])he(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ve(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_e(t))?(he(n,e),0==n.b&&(n.src=null,t[de]=null)):le(e)}}}function ve(e){return e in pe?pe[e]:pe[e]="on"+e}function ye(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&Ae(e),n.call(r,t)}function be(e,t){if(e.Y)return!0;if(!ee){if(!t)e:{t=["window","event"];for(var n=u,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}return ye(e,t=new ie(t,this))}return ye(e,new ie(t,this))}function _e(e){return(e=e[de])instanceof ce?e:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ee(e){return"function"==c(e)?e:(e[we]||(e[we]=function(t){return e.handleEvent(t)}),e[we])}function xe(){_.call(this),this.c=new ce(this),this.J=this,this.C=null}function Se(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&he(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}b(xe,_),xe.prototype[ae]=!0,(o=xe.prototype).addEventListener=function(e,t,n,r){me(this,e,t,n,r)},o.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=f(i)?!!i.capture:!!i,r=Ee(r),t&&t[ae]?(t=t.c,(n=String(n).toString())in t.a&&(-1<(r=fe(a=t.a[n],r,i,o))&&(le(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--)))):t&&(t=_e(t))&&(n=t.a[n.toString()],t=-1,n&&(t=fe(n,r,i,o)),(r=-1<t?n[t]:null)&&Ae(r))}(this,e,t,n,r)},o.dispatchEvent=function(e){var t,n=this.C;if(n)for(t=[];n;n=n.C)t.push(n);n=this.J;var r=e.type||e;if("string"===typeof e)e=new re(e,n);else if(e instanceof re)e.target=e.target||n;else{var i=e;D(e=new re(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Se(a,r,!0,e)&&i}if(i=Se(a=e.a=n,r,!0,e)&&i,i=Se(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Se(a=e.a=t[o],r,!1,e)&&i;return i},o.G=function(){if(xe.S.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)le(n[r]);delete t.a[e],t.b--}}this.C=null},o.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},o.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Te=u.JSON.stringify;function Me(){this.b=this.a=null}var Le,Ce=new(function(){function e(e,t,n){this.f=n,this.c=e,this.g=t,this.b=0,this.a=null}return e.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},e}())((function(){return new Oe}),(function(e){e.reset()}),100);function Re(){var e=Ne,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Oe(){this.next=this.b=this.a=null}function Ie(e){u.setTimeout((function(){throw e}),0)}function Pe(e,t){Le||function(){var e=u.Promise.resolve(void 0);Le=function(){e.then(De)}}(),ke||(Le(),ke=!0),Ne.add(e,t)}Me.prototype.add=function(e,t){var n=Ce.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Oe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Oe.prototype.reset=function(){this.next=this.b=this.a=null};var ke=!1,Ne=new Me;function De(){for(var e;e=Re();){try{e.a.call(e.b)}catch(n){Ie(n)}var t=Ce;t.g(e),t.b<t.f&&(t.b++,e.next=t.a,t.a=e)}ke=!1}function Fe(e,t){xe.call(this),this.b=e||1,this.a=t||u,this.f=A(this.Ya,this),this.g=y()}function je(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}function Be(e,t,n){if("function"==c(e))n&&(e=A(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=A(e.handleEvent,e)}return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function Ve(e){e.a=Be((function(){e.a=null,e.c&&(e.c=!1,Ve(e))}),e.h);var t=e.b;e.b=null,e.g.apply(null,t)}b(Fe,xe),(o=Fe.prototype).aa=!1,o.M=null,o.Ya=function(){if(this.aa){var e=y()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(je(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=y())},o.G=function(){Fe.S.G.call(this),je(this),delete this.a};var Ge=function(e){function t(t,n,r){var i=e.call(this)||this;return i.g=null!=r?t.bind(r):t,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.f=function(e){this.b=arguments,this.a?this.c=!0:Ve(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(_);function Ue(e){_.call(this),this.b=e,this.a={}}b(Ue,_);var qe=[];function We(e,t,n,r){Array.isArray(n)||(n&&(qe[0]=n.toString()),n=qe);for(var i=0;i<n.length;i++){var o=me(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function ze(e){P(e.a,(function(e,t){this.a.hasOwnProperty(t)&&Ae(e)}),e),e.a={}}function He(){this.a=!0}function Ke(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Te(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Ue.prototype.G=function(){Ue.S.G.call(this),ze(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},He.prototype.info=function(){};var Ye=null;function Qe(){return Ye=Ye||new xe}function Xe(e){re.call(this,"serverreachability",e)}function Je(e){var t=Qe();t.dispatchEvent(new Xe(t,e))}function Ze(e){re.call(this,"statevent",e)}function $e(e){var t=Qe();t.dispatchEvent(new Ze(t,e))}function et(e){re.call(this,"timingevent",e)}function tt(e,t){if("function"!=c(e))throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){e()}),t)}b(Xe,re),b(Ze,re),b(et,re);var nt={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},rt={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function it(){}function ot(e){var t;return(t=e.a)||(t=e.a={}),t}function at(){}it.prototype.a=null;var st,ut={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function lt(){re.call(this,"d")}function ct(){re.call(this,"c")}function ht(){}function ft(e,t,n,r){this.g=e,this.c=t,this.f=n,this.T=r||1,this.J=new Ue(this),this.P=dt,e=U?125:void 0,this.R=new Fe(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}b(lt,re),b(ct,re),b(ht,it),st=new ht;var dt=45e3,pt={},mt={};function gt(e,t,n){e.H=1,e.i=jt(It(t)),e.j=n,e.I=!0,At(e,null)}function At(e,t){e.u=y(),bt(e),e.l=It(e.i);var n=e.l,r=e.T;Array.isArray(r)||(r=[String(r)]),Jt(n.b,"t",r),e.D=0,e.a=Hn(e.g,e.g.C?t:null),0<e.O&&(e.F=new Ge(A(e.Ca,e,e.a),e.O)),We(e.J,e.a,"readystatechange",e.Wa),t=e.B?k(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),Je(1),function(e,t,n,r,i,o){e.info((function(){if(e.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+l+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.c,e.m,e.l,e.f,e.T,e.j)}function vt(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=yt(e,n);if(i==mt){4==t&&(e.h=4,$e(14),r=!1),Ke(e.c,e.f,null,"[Incomplete Response]");break}if(i==pt){e.h=4,$e(15),Ke(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}Ke(e.c,e.f,i,null),St(e,i)}4==t&&0==n.length&&(e.h=1,$e(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.W&&(e.W=!0,(t=e.g).a==e&&t.V&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),jn(t),t.F=!0)):(Ke(e.c,e.f,n,"[Invalid Chunked Response]"),xt(e),Et(e))}function yt(e,t){var n=e.D,r=t.indexOf("\n",n);return-1==r?mt:(n=Number(t.substring(n,r)),isNaN(n)?pt:(r+=1)+n>t.length?mt:(t=t.substr(r,n),e.D=r+n,t))}function bt(e){e.U=y()+e.P,_t(e,e.P)}function _t(e,t){if(null!=e.o)throw Error("WatchDog timer not null");e.o=tt(A(e.Ua,e),t)}function wt(e){e.o&&(u.clearTimeout(e.o),e.o=null)}function Et(e){0==e.g.v||e.A||Gn(e.g,e)}function xt(e){wt(e);var t=e.F;t&&"function"==typeof t.ja&&t.ja(),e.F=null,je(e.R),ze(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function St(e,t){try{var n=e.g;if(0!=n.v&&(n.a==e||on(n.b,e)))if(n.I=e.N,!e.C&&on(n.b,e)&&3==n.v){try{var r=n.ka.a.parse(t)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.j){if(n.a){if(!(n.a.u+3e3<e.u))break e;Vn(n),Cn(n)}Fn(n),$e(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=tt(A(n.Ra,n),6e3));if(1>=rn(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else qn(n,11)}else if((e.C||n.a==e)&&Vn(n),!T(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var l=e.a;if(l){var c=l.a?l.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=u.b;!h.a&&(C(c,"spdy")||C(c,"quic")||C(c,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(an(h,h.b),h.b=null))}if(u.A){var f=l.a?l.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ft(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=y()-e.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=e;if((u=n).la=zn(u,u.C?u.ga:null,u.fa),d.C){sn(u.b,d);var p=d,m=u.D;m&&p.setTimeout(m),p.o&&(wt(p),bt(p)),u.a=d}else Dn(u);0<n.g.length&&In(n)}else"stop"!=i[0]&&"close"!=i[0]||qn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?qn(n,7):Ln(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Je(4)}catch(g){}}function Tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"===typeof e)E(e,t,void 0);else{if(e.L&&"function"==typeof e.L)var n=e.L();else if(e.K&&"function"==typeof e.K)n=void 0;else if(h(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.K&&"function"==typeof e.K)return e.K();if("string"===typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Mt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Mt)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Lt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ct(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Ct(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(o=ft.prototype).setTimeout=function(e){this.P=e},o.Wa=function(e){e=e.target;var t=this.F;t&&3==xn(e)?t.f():this.Ca(e)},o.Ca=function(e){try{if(e==this.a)e:{var t=xn(this.a),n=this.a.ua(),r=this.a.X();if(!(3>t||3==t&&!U&&!this.a.$())){this.A||4!=t||7==n||Je(8==n||0>=r?3:2),wt(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.T,t,i),this.b){if(this.V&&!this.C){t:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(a)){var u=a;break t}}u=null}if(!u){this.b=!1,this.h=3,$e(12),xt(this),Et(this);break e}Ke(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,St(this,u)}this.I?(vt(this,t,o),U&&this.b&&3==t&&(We(this.J,this.R,"tick",this.Va),this.R.start())):(Ke(this.c,this.f,o,null),St(this,o)),4==t&&xt(this),this.b&&!this.A&&(4==t?Gn(this.g,this):(this.b=!1,bt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,$e(12)):(this.h=0,$e(13)),xt(this),Et(this)}}}catch(l){}},o.Va=function(){if(this.a){var e=xn(this.a),t=this.a.$();this.D<t.length&&(wt(this),vt(this,e,t),this.b&&4!=e&&bt(this))}},o.cancel=function(){this.A=!0,xt(this)},o.Ua=function(){this.o=null;var e=y();0<=e-this.U?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.c,this.l),2!=this.H&&(Je(3),$e(17)),xt(this),this.h=2,Et(this)):_t(this,this.U-e)},(o=Mt.prototype).K=function(){Lt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},o.L=function(){return Lt(this),this.a.concat()},o.get=function(e,t){return Ct(this.b,e)?this.b[e]:t},o.set=function(e,t){Ct(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},o.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Rt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ot(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof Ot){this.a=void 0!==t?t:e.a,Pt(this,e.f),this.j=e.j,kt(this,e.c),Nt(this,e.h),this.g=e.g,t=e.b;var n=new Kt;n.c=t.c,t.a&&(n.a=new Mt(t.a),n.b=t.b),Dt(this,n),this.i=e.i}else e&&(n=String(e).match(Rt))?(this.a=!!t,Pt(this,n[1]||"",!0),this.j=Bt(n[2]||""),kt(this,n[3]||"",!0),Nt(this,n[4]),this.g=Bt(n[5]||"",!0),Dt(this,n[6]||"",!0),this.i=Bt(n[7]||"")):(this.a=!!t,this.b=new Kt(null,this.a))}function It(e){return new Ot(e)}function Pt(e,t,n){e.f=n?Bt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function kt(e,t,n){e.c=n?Bt(t,!0):t}function Nt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function Dt(e,t,n){t instanceof Kt?(e.b=t,function(e,t){t&&!e.f&&(Yt(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Qt(this,t),Jt(this,n,e))}),e)),e.f=t}(e.b,e.a)):(n||(t=Vt(t,zt)),e.b=new Kt(t,e.a))}function Ft(e,t,n){e.b.set(t,n)}function jt(e){return Ft(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^y()).toString(36)),e}function Bt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ot.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Vt(t,Ut,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Vt(t,Ut,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&e.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vt(n,"/"==n.charAt(0)?Wt:qt,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Vt(n,Ht)),e.join("")};var Ut=/[#\/\?@]/g,qt=/[#\?:]/g,Wt=/[#\?]/g,zt=/[#\?@]/g,Ht=/#/g;function Kt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Yt(e){e.a||(e.a=new Mt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Qt(e,t){Yt(e),t=Zt(e,t),Ct(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Ct((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Lt(e)))}function Xt(e,t){return Yt(e),t=Zt(e,t),Ct(e.a.b,t)}function Jt(e,t,n){Qt(e,t),0<n.length&&(e.c=null,e.a.set(Zt(e,t),S(n)),e.b+=n.length)}function Zt(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function $t(e,t){this.b=e,this.a=t}function en(e){this.g=e||tn,u.PerformanceNavigationTiming?e=0<(e=u.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().qb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(o=Kt.prototype).add=function(e,t){Yt(this),this.c=null,e=Zt(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},o.forEach=function(e,t){Yt(this),this.a.forEach((function(n,r){E(n,(function(n){e.call(t,n,r,this)}),this)}),this)},o.L=function(){Yt(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},o.K=function(e){Yt(this);var t=[];if("string"===typeof e)Xt(this,e)&&(t=x(t,this.a.get(Zt(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=x(t,e[n])}return t},o.set=function(e,t){return Yt(this),this.c=null,Xt(this,e=Zt(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},o.get=function(e,t){return e&&0<(e=this.K(e)).length?String(e[0]):t},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var tn=10;function nn(e){return!!e.b||!!e.a&&e.a.size>=e.f}function rn(e){return e.b?1:e.a?e.a.size:0}function on(e,t){return e.b?e.b==t:!!e.a&&e.a.has(t)}function an(e,t){e.a?e.a.add(t):e.b=t}function sn(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}function un(e){var t,n;if(null!=e.b)return e.c.concat(e.b.s);if(null!=e.a&&0!==e.a.size){var r=e.c;try{for(var o=i(e.a.values()),a=o.next();!a.done;a=o.next()){var s=a.value;r=r.concat(s.s)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}return S(e.c)}function ln(){}function cn(){this.a=new ln}function hn(e,t,n){var r=n||"";try{Tt(e,(function(e,n){var i=e;f(e)&&(i=Te(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function fn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}en.prototype.cancel=function(){var e,t;if(this.c=un(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},ln.prototype.stringify=function(e){return u.JSON.stringify(e,void 0)},ln.prototype.parse=function(e){return u.JSON.parse(e,void 0)};var dn=u.JSON.parse;function pn(e){xe.call(this),this.headers=new Mt,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=mn,this.D=this.F=!1}b(pn,xe);var mn="",gn=/^https?$/i,An=["POST","PUT"];function vn(e){return"content-type"==e.toLowerCase()}function yn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,bn(e),wn(e)}function bn(e){e.u||(e.u=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function _n(e){if(e.b&&"undefined"!=typeof s&&(!e.s[1]||4!=xn(e)||2!=e.X()))if(e.l&&4==xn(e))Be(e.za,0,e);else if(e.dispatchEvent("readystatechange"),4==xn(e)){e.b=!1;try{var t,n=e.X();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.B).match(Rt)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!gn.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var l=2<xn(e)?e.a.statusText:""}catch(c){l=""}e.f=l+" ["+e.X()+"]",bn(e)}}finally{wn(e)}}}function wn(e,t){if(e.a){En(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function En(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(u.clearTimeout(e.m),e.m=null)}function xn(e){return e.a?e.a.readyState:0}function Sn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return P(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ft(e,t,n))}function Tn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Mn(e){this.pa=0,this.g=[],this.c=new He,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Tn("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Tn("baseRetryDelayMs",5e3,e),this.Ma=Tn("retryDelaySeedMs",1e4,e),this.Ja=Tn("forwardChannelMaxRetries",2,e),this.ma=Tn("forwardChannelRequestTimeoutMs",2e4,e),this.Ka=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new en(e&&e.concurrentRequestLimit),this.ka=new cn,this.da=e&&e.fastHandshake||!1,this.Ga=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&e&&e.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Ln(e){if(Rn(e),3==e.v){var t=e.R++,n=It(e.B);Ft(n,"SID",e.J),Ft(n,"RID",t),Ft(n,"TYPE","terminate"),kn(e,n),(t=new ft(e,e.c,t,void 0)).H=2,t.i=jt(It(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(t.i.toString(),"")),!n&&u.Image&&((new Image).src=t.i,n=!0),n||(t.a=Hn(t.g,null),t.a.ba(t.i)),t.u=y(),bt(t)}Wn(e)}function Cn(e){e.a&&(jn(e),e.a.cancel(),e.a=null)}function Rn(e){Cn(e),e.j&&(u.clearTimeout(e.j),e.j=null),Vn(e),e.b.cancel(),e.h&&("number"===typeof e.h&&u.clearTimeout(e.h),e.h=null)}function On(e,t){e.g.push(new $t(e.La++,t)),3==e.v&&In(e)}function In(e){nn(e.b)||e.h||(e.h=!0,Pe(e.Ba,e),e.u=0)}function Pn(e,t){var n;n=t?t.f:e.R++;var r=It(e.B);Ft(r,"SID",e.J),Ft(r,"RID",n),Ft(r,"AID",e.P),kn(e,r),e.i&&e.l&&Sn(r,e.i,e.l),n=new ft(e,e.c,n,e.u+1),null===e.i&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=Nn(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),an(e.b,n),gt(n,r,t)}function kn(e,t){e.f&&Tt({},(function(e,n){Ft(t,n,e)}))}function Nn(e,t,n){n=Math.min(e.g.length,n);var r=e.f?A(e.f.Ha,e.f,e):null;e:for(var i=e.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var l=i[u].b,c=i[u].a;if(0>(l-=o))o=Math.max(0,i[u].b-100),s=!1;else try{hn(c,a,"req"+l+"_")}catch(h){r&&r(c)}}if(s){r=a.join("&");break e}}return e=e.g.splice(0,n),t.s=e,r}function Dn(e){e.a||e.j||(e.U=1,Pe(e.Aa,e),e.o=0)}function Fn(e){return!(e.a||e.j||3<=e.o)&&(e.U++,e.j=tt(A(e.Aa,e),Un(e,e.o)),e.o++,!0)}function jn(e){null!=e.s&&(u.clearTimeout(e.s),e.s=null)}function Bn(e){e.a=new ft(e,e.c,"rpc",e.U),null===e.i&&(e.a.B=e.l),e.a.O=0;var t=It(e.la);Ft(t,"RID","rpc"),Ft(t,"SID",e.J),Ft(t,"CI",e.H?"0":"1"),Ft(t,"AID",e.P),kn(e,t),Ft(t,"TYPE","xmlhttp"),e.i&&e.l&&Sn(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=jt(It(t)),n.j=null,n.I=!0,At(n,e)}function Vn(e){null!=e.m&&(u.clearTimeout(e.m),e.m=null)}function Gn(e,t){var n=null;if(e.a==t){Vn(e),jn(e),e.a=null;var r=2}else{if(!on(e.b,t))return;n=t.s,sn(e.b,t),r=1}if(e.I=t.N,0!=e.v)if(t.b)if(1==r){n=t.j?t.j.length:0,t=y()-t.u;var i=e.u;(r=Qe()).dispatchEvent(new et(r,n,t,i)),In(e)}else Dn(e);else if(3==(i=t.h)||0==i&&0<e.I||!(1==r&&function(e,t){return!(rn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.g=t.s.concat(e.g),!0):!(1==e.v||2==e.v||e.u>=(e.Ia?0:e.Ja))&&(e.h=tt(A(e.Ba,e,t),Un(e,e.u)),e.u++,!0))}(e,t)||2==r&&Fn(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:qn(e,5);break;case 4:qn(e,10);break;case 3:qn(e,6);break;default:qn(e,2)}}function Un(e,t){var n=e.Fa+Math.floor(Math.random()*e.Ma);return e.f||(n*=2),n*t}function qn(e,t){if(e.c.info("Error code "+t),2==t){var n=null;e.f&&(n=null);var r=A(e.Xa,e);n||(n=new Ot("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||Pt(n,"https"),jt(n)),function(e,t){var n=new He;if(u.Image){var r=new Image;r.onload=v(fn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=v(fn,n,r,"TestLoadImage: error",!1,t),r.onabort=v(fn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=v(fn,n,r,"TestLoadImage: timeout",!1,t),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else $e(2);e.v=0,e.f&&e.f.ra(t),Wn(e),Rn(e)}function Wn(e){e.v=0,e.I=-1,e.f&&(0==un(e.b).length&&0==e.g.length||(e.b.c.length=0,S(e.g),e.g.length=0),e.f.qa())}function zn(e,t,n){var r=function(e){return e instanceof Ot?It(e):new Ot(e,void 0)}(n);if(""!=r.c)t&&kt(r,t+"."+r.c),Nt(r,r.h);else{var i=u.location;r=function(e,t,n,r){var i=new Ot(null,void 0);return e&&Pt(i,e),t&&kt(i,t),n&&Nt(i,n),r&&(i.g=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.W&&P(e.W,(function(e,t){Ft(r,t,e)})),t=e.A,n=e.na,t&&n&&Ft(r,t,n),Ft(r,"VER",e.ha),kn(e,r),r}function Hn(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new pn(e.Ka)).F=e.C,t}function Kn(){}function Yn(){if(V&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function Qn(e,t){xe.call(this),this.a=new Mn(t),this.l=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!T(e)&&(this.a.i=e),this.h=t&&t.supportsCrossDomainXhr||!1,this.g=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.a.A=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new Zn(this)}function Xn(e){lt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Jn(){ct.call(this),this.status=1}function Zn(e){this.a=e}(o=pn.prototype).ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ot(this.H):ot(st),this.a.onreadystatechange=A(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(o){return void yn(this,o)}e=n||"";var i=new Mt(this.headers);r&&Tt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=vn,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.L()),n=u.FormData&&e instanceof u.FormData,!(0<=w(An,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{En(this),0<this.o&&((this.D=function(e){return V&&J(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=A(this.xa,this)):this.m=Be(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(o){yn(this,o)}},o.xa=function(){"undefined"!=typeof s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},o.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),wn(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),wn(this,!0)),pn.S.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?_n(this):this.Ta())},o.Ta=function(){_n(this)},o.X=function(){try{return 2<xn(this)?this.a.status:-1}catch(e){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},o.Na=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),dn(t)}},o.ua=function(){return this.h},o.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},(o=Mn.prototype).ha=8,o.v=1,o.Ba=function(e){if(this.h)if(this.h=null,1==this.v){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t,n=new ft(this,this.c,e,void 0),r=this.l;if(this.O&&(r?D(r=k(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)e:{for(var i=t=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"===typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.g.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Nn(this,n,t),Ft(i=It(this.B),"RID",e),Ft(i,"CVER",22),this.A&&Ft(i,"X-HTTP-Session-Id",this.A),kn(this,i),this.i&&r&&Sn(i,this.i,r),an(this.b,n),this.Ga&&Ft(i,"TYPE","init"),this.da?(Ft(i,"$req",t),Ft(i,"SID","null"),n.V=!0,gt(n,i,null)):gt(n,i,t),this.v=2}}else 3==this.v&&(e?Pn(this,e):0==this.g.length||nn(this.b)||Pn(this))},o.Aa=function(){if(this.j=null,Bn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=tt(A(this.Sa,this),e)}},o.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Cn(this),Bn(this))},o.Ra=function(){null!=this.m&&(this.m=null,Cn(this),Fn(this),$e(19))},o.Xa=function(e){e?(this.c.info("Successfully pinged google.com"),$e(2)):(this.c.info("Failed to ping google.com"),$e(1))},(o=Kn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ha=function(){},Yn.prototype.a=function(e,t){return new Qn(e,t)},b(Qn,xe),(o=Qn.prototype).addEventListener=function(e,t,n,r){Qn.S.addEventListener.call(this,e,t,n,r)},o.removeEventListener=function(e,t,n,r){Qn.S.removeEventListener.call(this,e,t,n,r)},o.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var e=this.a,t=this.l,n=this.b||void 0;$e(0),e.fa=t,e.W=n||{},e.H=e.T,e.B=zn(e,null,e.fa),In(e)},o.close=function(){Ln(this.a)},o.Pa=function(e){if("string"===typeof e){var t={};t.__data__=e,On(this.a,t)}else this.g?((t={}).__data__=Te(e),On(this.a,t)):On(this.a,e)},o.G=function(){this.a.f=null,delete this.f,Ln(this.a),delete this.a,Qn.S.G.call(this)},b(Xn,lt),b(Jn,ct),b(Zn,Kn),Zn.prototype.ta=function(){this.a.dispatchEvent("a")},Zn.prototype.sa=function(e){this.a.dispatchEvent(new Xn(e))},Zn.prototype.ra=function(e){this.a.dispatchEvent(new Jn(e))},Zn.prototype.qa=function(){this.a.dispatchEvent("b")},Yn.prototype.createWebChannel=Yn.prototype.a,Qn.prototype.send=Qn.prototype.Pa,Qn.prototype.open=Qn.prototype.Oa,Qn.prototype.close=Qn.prototype.close,nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,rt.COMPLETE="complete",at.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",xe.prototype.listen=xe.prototype.va,pn.prototype.listenOnce=pn.prototype.wa,pn.prototype.getLastError=pn.prototype.Qa,pn.prototype.getLastErrorCode=pn.prototype.ua,pn.prototype.getStatus=pn.prototype.X,pn.prototype.getResponseJson=pn.prototype.Na,pn.prototype.getResponseText=pn.prototype.$,pn.prototype.send=pn.prototype.ba;var $n={createWebChannelTransport:function(){return new Yn},ErrorCode:nt,EventType:rt,WebChannel:at,XhrIo:pn},er=$n.createWebChannelTransport,tr=$n.ErrorCode,nr=$n.EventType,rr=$n.WebChannel,ir=$n.XhrIo;t.default=$n}.call(this,n(55))},function(e,t,n){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0});var i=n(23),o=n(4),a=n(19),s=n(40),u=n(26);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=l(i),h=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),a.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:a.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),f=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return a.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),d=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new h(t)}}catch(n){}return new f},p=d("localStorage"),m=d("sessionStorage"),g=new s.Logger("@firebase/database"),A=function(){var e=1;return function(){return e++}}(),v=function(e){var t=a.stringToByteArray(e),n=new a.Sha1;n.update(t);var r=n.digest();return a.base64.encodeByteArray(r)},y=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=0;i<t.length;i++){var o=t[i];Array.isArray(o)||o&&"object"===typeof o&&"number"===typeof o.length?r+=e.apply(null,o):r+="object"===typeof o?a.stringify(o):o,r+=" "}return r},b=null,_=!0,w=function(e,t){a.assert(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(g.logLevel=s.LogLevel.VERBOSE,b=g.log.bind(g),t&&m.set("logging_enabled",!0)):"function"===typeof e?b=e:(b=null,m.remove("logging_enabled"))},E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===_&&(_=!1,null===b&&!0===m.get("logging_enabled")&&w(!0)),b){var n=y.apply(null,e);b(n)}},x=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];E.apply(void 0,o.__spread([e],t))}},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,o.__spread(e));g.error(n)},T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,o.__spread(e));throw g.error(n),new Error(n)},M=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+y.apply(void 0,o.__spread(e));g.warn(n)},L=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},C="[MIN_NAME]",R="[MAX_NAME]",O=function(e,t){if(e===t)return 0;if(e===C||t===R)return-1;if(t===C||e===R)return 1;var n=B(e),r=B(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},I=function(e,t){return e===t?0:e<t?-1:1},P=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+a.stringify(t))},k=function e(t){if("object"!==typeof t||null===t)return a.stringify(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=a.stringify(n[o]),i+=":",i+=e(t[n[o]]);return i+="}"},N=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function D(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var F=function(e){a.assert(!L(e),"Invalid JSON number");var t,n,r,i,o;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(o=0;o<64;o+=8){var c=parseInt(u.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()},j=new RegExp("^-?(0*)\\d{1,10}$"),B=function(e){if(j.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},V=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw M("Exception was thrown by user callback.",e),t}),Math.floor(0))}},G=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},U=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!1,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=O(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),q=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=a.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=a.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=a.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),W=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=p.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&p.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(a.assert("string"===typeof e,"typeof type must == string"),a.assert("object"===typeof t,"typeof params must == object"),"websocket"===e)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return D(t,(function(e,t){r.push(e+"="+t)})),n+r.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}();var z,H,K=function(e,t){var n=Y(e),r=n.namespace;"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&M("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new W(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new U(n.pathString)}},Y=function(e){var t="",n="",r="",i="",a="",s=!0,u="https",l=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var h=e.indexOf("/");-1===h&&(h=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(h,f)),h<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(h,f)));var d=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=o.__values(e.split("&")),a=i.next();!a.done;a=i.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):M("Invalid query segment '"+s+"' in query '"+e+"'")}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(s="https"===u||"wss"===u,l=parseInt(t.substring(c+1),10)):c=t.length;var p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var m=t.indexOf(".");r=t.substring(0,m).toLowerCase(),n=t.substring(m+1),a=r}"ns"in d&&(a=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:a}},Q=/[\[\].#$\/\u0000-\u001F\u007F]/,X=/[\[\].#$\u0000-\u001F\u007F]/,J=function(e){return"string"===typeof e&&0!==e.length&&!Q.test(e)},Z=function(e){return"string"===typeof e&&0!==e.length&&!X.test(e)},$=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!L(e)||e&&"object"===typeof e&&a.contains(e,".sv")},ee=function(e,t,n,r,i){i&&void 0===n||te(a.errorPrefix(e,t,i),n,r)},te=function e(t,n,r){var i=r instanceof U?new q(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+i.toErrorString());if("function"===typeof n)throw new Error(t+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(L(n))throw new Error(t+"contains "+n.toString()+" "+i.toErrorString());if("string"===typeof n&&n.length>10485760/3&&a.stringLength(n)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var o=!1,s=!1;if(D(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!J(n)))throw new Error(t+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),e(t,r,i),i.pop()})),o&&s)throw new Error(t+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},ne=function(e,t,n,r,i){if(!i||void 0!==n){var o=a.errorPrefix(e,t,i);if(!n||"object"!==typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];D(n,(function(e,t){var n=new U(e);if(te(o,t,r.child(n)),".priority"===n.getBack()&&!$(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!J(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(U.comparePaths);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&a.contains(r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,s)}},re=function(e,t,n,r){if(!r||void 0!==n){if(L(n))throw new Error(a.errorPrefix(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$(n))throw new Error(a.errorPrefix(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ie=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(a.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},oe=function(e,t,n,r){if((!r||void 0!==n)&&!J(n))throw new Error(a.errorPrefix(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ae=function(e,t,n,r){if((!r||void 0!==n)&&!Z(n))throw new Error(a.errorPrefix(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},se=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ae(e,t,n,r)},ue=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},le=function(e,t,n){var r=n.path.toString();if("string"!==typeof n.repoInfo.host||0===n.repoInfo.host.length||!J(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Z(e)}(r))throw new Error(a.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ce=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(a.errorPrefix(e,t,r)+"must be a boolean.")},he=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){a.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),a.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){a.validateArgCount("OnDisconnect.remove",0,1,arguments.length),ue("OnDisconnect.remove",this.path_),a.validateCallback("OnDisconnect.remove",1,e,!0);var t=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){a.validateArgCount("OnDisconnect.set",1,2,arguments.length),ue("OnDisconnect.set",this.path_),ee("OnDisconnect.set",1,e,this.path_,!1),a.validateCallback("OnDisconnect.set",2,t,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){a.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),ue("OnDisconnect.setWithPriority",this.path_),ee("OnDisconnect.setWithPriority",1,e,this.path_,!1),re("OnDisconnect.setWithPriority",2,t,!1),a.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(a.validateArgCount("OnDisconnect.update",1,2,arguments.length),ue("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,M("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ne("OnDisconnect.update",1,e,this.path_,!1),a.validateCallback("OnDisconnect.update",2,t,!0);var i=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},e}(),fe=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return a.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),de=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,n=[];return function(r){var i,o=r===t;t=r;var s=new Array(8);for(i=7;i>=0;i--)s[i]=e.charAt(r%64),r=Math.floor(r/64);a.assert(0===r,"Cannot push at time == 0");var u=s.join("");if(o){for(i=11;i>=0&&63===n[i];i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=e.charAt(n[i]);return a.assert(20===u.length,"nextPushId: Length should be 20."),u}}(),pe=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),me=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new pe(C,e),r=new pe(C,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return pe.MIN},e}(),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return z},set:function(e){z=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return O(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw a.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return pe.MIN},t.prototype.maxPost=function(){return new pe(R,z)},t.prototype.makePost=function(e,t){return a.assert("string"===typeof e,"KeyIndex indexValue must always be a string."),new pe(e,z)},t.prototype.toString=function(){return".key"},t}(me),Ae=new ge;var ve,ye,be,_e=function(e){return"number"===typeof e?"number:"+F(e):"string:"+e},we=function(e){if(e.isLeafNode()){var t=e.val();a.assert("string"===typeof t||"number"===typeof t||"object"===typeof t&&a.contains(t,".sv"),"Priority must be a string or number.")}else a.assert(e===H||e.isEmpty(),"priority of unexpected type.");a.assert(e===H||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ee=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,a.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),we(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return ve},set:function(e){ve=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(a.assert(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+_e(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?F(this.value_):this.value_,this.lazyHash_=v(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(a.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return a.assert(i>=0,"Unknown leaf type: "+n),a.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();var xe,Se,Te=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?O(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return pe.MIN},t.prototype.maxPost=function(){return new pe(R,new Ee("[PRIORITY-POST]",be))},t.prototype.makePost=function(e,t){var n=ye(e);return new pe(t,new Ee("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(me)),Me=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Le=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Re.EMPTY_NODE,this.right=null!=o?o:Re.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Re.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Re.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Ce=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Le(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Re=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Le.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Le.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Me(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Me(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Me(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Me(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Ce,e}(),Oe=Math.log(2),Ie=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Oe,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),Pe=function(e,t,n,r){e.sort(t);var i=function(t){for(var r=null,i=null,o=e.length,a=function(t,r){var i=o-t,a=o;o-=t;var u=function t(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=e[r],a=n?n(o):o,new Le(a,o.node,Le.BLACK,null,null);var u=parseInt(s/2,10)+r,l=t(r,u),c=t(u+1,i);return o=e[u],a=n?n(o):o,new Le(a,o.node,Le.BLACK,l,c)}(i+1,a),l=e[i],c=n?n(l):l;s(new Le(c,l.node,r,null,u))},s=function(e){r?(r.left=e,r=e):(i=e,r=e)},u=0;u<t.count;++u){var l=t.nextBitIsOne(),c=Math.pow(2,t.count-(u+1));l?a(c,Le.BLACK):(a(c,Le.BLACK),a(c,Le.RED))}return i}(new Ie(e.length));return new Re(r||t,i)},ke={},Ne=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return a.assert(ke&&Te,"ChildrenNode.ts has not been loaded"),xe=xe||new e({".priority":ke},{".priority":Te})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=a.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Re?t:null},e.prototype.hasIndex=function(e){return a.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){a.assert(t!==Ae,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],s=!1,u=n.getIterator(pe.Wrap),l=u.getNext();l;)s=s||t.isDefinedOn(l.node),i.push(l),l=u.getNext();r=s?Pe(i,t.getCompare()):ke;var c=t.toString(),h=o.__assign({},this.indexSet_);h[c]=t;var f=o.__assign({},this.indexes_);return f[c]=r,new e(f,h)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(a.map(this.indexes_,(function(e,i){var o=a.safeGet(r.indexSet_,i);if(a.assert(o,"Missing index implementation for "+i),e===ke){if(o.isDefinedOn(t.node)){for(var s=[],u=n.getIterator(pe.Wrap),l=u.getNext();l;)l.name!==t.name&&s.push(l),l=u.getNext();return s.push(t),Pe(s,o.getCompare())}return ke}var c=n.get(t.name),h=e;return c&&(h=h.remove(new pe(t.name,c))),h.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(a.map(this.indexes_,(function(e){if(e===ke)return e;var r=n.get(t.name);return r?e.remove(new pe(t.name,r)):e})),this.indexSet_)},e}();function De(e,t){return O(e.name,t.name)}function Fe(e,t){return O(e,t)}var je=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&we(this.priorityNode_),this.children_.isEmpty()&&a.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Se||(Se=new e(new Re(Fe),null,Ne.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Se},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Se:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(a.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new pe(t,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Se:this.priorityNode_;return new e(i,s,o)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;a.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Te,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+_e(this.getPriority().val())+":"),this.forEachChild(Te,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":v(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new pe(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new pe(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new pe(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,pe.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,pe.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Be?-1:0},e.prototype.withIndex=function(t){if(t===Ae||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Ae||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Te),r=t.getIterator(Te),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Ae?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),Be=new(function(e){function t(){return e.call(this,new Re(Fe),je.EMPTY_NODE,Ne.Default)||this}return o.__extends(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return je.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(je));Object.defineProperties(pe,{MIN:{value:new pe(C,je.EMPTY_NODE)},MAX:{value:new pe(R,Be)}}),ge.__EMPTY_NODE=je.EMPTY_NODE,Ee.__childrenNodeConstructor=je,H=Be,function(e){be=e}(Be);function Ve(e,t){if(void 0===t&&(t=null),null===e)return je.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),a.assert(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new Ee(e,Ve(t));if(e instanceof Array){var n=je.EMPTY_NODE;return D(e,(function(t,r){if(a.contains(e,t)&&"."!==t.substring(0,1)){var i=Ve(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Ve(t))}var r=[],i=!1;if(D(e,(function(e,t){if("."!==e.substring(0,1)){var n=Ve(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new pe(e,n)))}})),0===r.length)return je.EMPTY_NODE;var o=Pe(r,De,(function(e){return e.name}),Fe);if(i){var s=Pe(r,Te.getCompare());return new je(o,Ve(t),new Ne({".priority":s},{".priority":Te}))}return new je(o,Ve(t),Ne.Default)}!function(e){ye=e}(Ve);var Ge,Ue=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?O(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return pe.MIN},t.prototype.maxPost=function(){return pe.MAX},t.prototype.makePost=function(e,t){var n=Ve(e);return new pe(t,n)},t.prototype.toString=function(){return".value"},t}(me)),qe=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,a.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return o.__extends(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?O(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=Ve(e),r=je.EMPTY_NODE.updateChild(this.indexPath_,n);return new pe(t,r)},t.prototype.maxPost=function(){var e=je.EMPTY_NODE.updateChild(this.indexPath_,Be);return new pe(R,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(me),We=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return a.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return a.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return a.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return a.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){a.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),ae("DataSnapshot.child",1,t,!1);var n=new U(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,Te)},e.prototype.hasChild=function(e){a.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),ae("DataSnapshot.hasChild",1,e,!1);var t=new U(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return a.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(a.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),a.validateCallback("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return t(new e(i,n.ref_.child(r),Te))}))},e.prototype.hasChildren=function(){return a.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return a.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return a.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),ze=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+a.stringify(this.snapshot.exportVal())},e}(),He=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Ke=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new ze("value",this,new We(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new He(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Ye=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,a.contains(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new He(this,e,t):null},e.prototype.createEvent=function(e,t){a.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new ze(e.type,this,new We(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return s===a&&(!t.callbacks_[a]||!this.callbacks_[s]||t.callbacks_[a]===this.callbacks_[s])}return i.every((function(e){return t.callbacks_[e]===n.callbacks_[e]}))}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),Qe=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return a.assert(Ge,"Reference.ts has not been loaded"),Ge},set:function(e){Ge=e},enumerable:!1,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Ae){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==C)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==R)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Te){if(null!=t&&!$(t)||null!=n&&!$(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(a.assert(e.getIndex()instanceof qe||e.getIndex()===Ue,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return a.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){a.validateArgCount("Query.on",2,4,arguments.length),ie("Query.on",1,t,!1),a.validateCallback("Query.on",2,n,!1);var o=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[t]=n,this.onChildEvent(s,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new Ke(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new Ye(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){a.validateArgCount("Query.off",0,3,arguments.length),ie("Query.off",1,e,!0),a.validateCallback("Query.off",2,t,!0),a.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===e){var o=t||null;r=new Ke(o,null,n||null)}else e&&(t&&((i={})[e]=t),r=new Ye(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,i){var o=this;a.validateArgCount("Query.once",1,4,arguments.length),ie("Query.once",1,t,!1),a.validateCallback("Query.once",2,n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,i),u=!0,l=new a.Deferred;l.promise.catch((function(){}));var c=function e(r){u&&(u=!1,o.off(t,e),n&&n.bind(s.context)(r),l.resolve(r))};return this.on(t,c,(function(e){o.off(t,c),s.cancel&&s.cancel.bind(s.context)(e),l.reject(e)})),l.promise},e.prototype.limitToFirst=function(t){if(a.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(a.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(a.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ae("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new U(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new qe(n),i=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){a.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Ae);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){a.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Te);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){a.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Ue);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),a.validateArgCount("Query.startAt",0,2,arguments.length),ee("Query.startAt",1,t,this.path,!0),oe("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),a.validateArgCount("Query.endAt",0,2,arguments.length),ee("Query.endAt",1,t,this.path,!0),oe("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(a.validateArgCount("Query.equalTo",1,2,arguments.length),ee("Query.equalTo",1,e,this.path,!1),oe("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return a.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return a.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=k(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(a.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=this.path.equals(t.path),o=this.queryIdentifier()===t.queryIdentifier();return r&&i&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,a.validateCallback(e,3,r.cancel,!0),r.context=n,a.validateContextObject(e,4,r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(a.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Xe=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),Je=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=this.path_.child(t);return new e(this.syncTree_,n)},e.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},e}(),Ze=function(e,t,n){return e&&"object"===typeof e?(a.assert(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?$e(e[".sv"],t,n):"object"===typeof e[".sv"]?et(e[".sv"],t):void a.assert(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},$e=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:a.assert(!1,"Unexpected server value: "+e)}},et=function(e,t,n){e.hasOwnProperty("increment")||a.assert(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&a.assert(!1,"Unexpected increment value: "+r);var i=t.node();if(a.assert(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!==typeof o?r:o+r},tt=function(e,t,n,r){return rt(t,new Je(n,e),r)},nt=function(e,t,n){return rt(e,new Xe(t),n)};function rt(e,t,n){var r,i=e.getPriority().val(),o=Ze(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=Ze(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new Ee(s,Ve(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Ee(o))),u.forEachChild(Te,(function(e,i){var o=rt(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}var it,ot=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&this.children.size>0){var t=e.getFront();return e=e.popFront(),this.children.has(t)?this.children.get(t).find(e):null}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,n);else{var r=t.getFront();this.children.has(r)||this.children.set(r,new e);var i=this.children.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(Te,(function(e,t){n.remember(new U(e),t)})),this.forget(e)}if(this.children.size>0){var r=e.getFront();if(e=e.popFront(),this.children.has(r))this.children.get(r).forget(e)&&this.children.delete(r);return 0===this.children.size}return!0},e.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild((function(n,r){var i=new U(e.toString()+"/"+n);r.forEachTree(i,t)}))},e.prototype.forEachChild=function(e){this.children.forEach((function(t,n){e(n,t)}))},e}();!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(it||(it={}));var at,st,ut=function(){function e(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,a.assert(!r||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),lt=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=it.ACK_USER_WRITE,this.source=ut.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return a.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new U(t));return new e(U.Empty,n,this.revert)}return a.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}(),ct=function(){function e(e,t){void 0===t&&(at||(at=new Re(I)),t=at),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return D(t,(function(e,t){n=n.set(new U(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:U.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=i?{path:new U(n).child(i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=(this.children.get(r)||e.Empty).set(t.popFront(),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r=t.getFront(),i=(this.children.get(r)||e.Empty).setTree(t.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(U.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(e.child(r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,U.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,U.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(t.popFront(),n.child(i),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(U.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(e.child(n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e.Empty=new e(null),e}(),ht=function(){function e(e,t){this.source=e,this.path=t,this.type=it.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,U.Empty):new e(this.source,this.path.popFront())},e}(),ft=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=it.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,U.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),dt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=it.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new U(t));return n.isEmpty()?null:n.value?new ft(this.source,U.Empty,n.value):new e(this.source,U.Empty,n)}return a.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),pt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),mt=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new pt(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new pt(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new pt(je.EMPTY_NODE,!1,!1),new pt(je.EMPTY_NODE,!1,!1)),e}(),gt=function(){function e(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}(),At=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){a.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(gt.childRemovedChange(t,s)):a.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(gt.childAddedChange(t,n)):o.trackChildChange(gt.childChangedChange(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Te,(function(e,r){t.hasChild(e)||n.trackChildChange(gt.childRemovedChange(e,r))})),t.isLeafNode()||t.forEachChild(Te,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(gt.childChangedChange(t,r,i))}else n.trackChildChange(gt.childAddedChange(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?je.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),vt=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;a.assert(t===gt.CHILD_ADDED||t===gt.CHILD_CHANGED||t===gt.CHILD_REMOVED,"Only child changes supported for tracking"),a.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(t===gt.CHILD_ADDED&&i===gt.CHILD_REMOVED)this.changeMap.set(n,gt.childChangedChange(n,e.snapshotNode,r.snapshotNode));else if(t===gt.CHILD_REMOVED&&i===gt.CHILD_ADDED)this.changeMap.delete(n);else if(t===gt.CHILD_REMOVED&&i===gt.CHILD_CHANGED)this.changeMap.set(n,gt.childRemovedChange(n,r.oldSnap));else if(t===gt.CHILD_CHANGED&&i===gt.CHILD_ADDED)this.changeMap.set(n,gt.childAddedChange(n,e.snapshotNode));else{if(t!==gt.CHILD_CHANGED||i!==gt.CHILD_CHANGED)throw a.assertionError("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,gt.childChangedChange(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),yt=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),bt=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new pt(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}(),_t=function(e,t){this.viewCache=e,this.changes=t},wt=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){a.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),a.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,i){var o,s,u=new vt;if(n.type===it.OVERWRITE){var l=n;l.source.fromUser?o=this.applyUserOverwrite_(t,l.path,l.snap,r,i,u):(a.assert(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.getServerCache().isFiltered()&&!l.path.isEmpty(),o=this.applyServerOverwrite_(t,l.path,l.snap,r,i,s,u))}else if(n.type===it.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(t,c.path,c.children,r,i,u):(a.assert(c.source.fromServer,"Unknown source."),s=c.source.tagged||t.getServerCache().isFiltered(),o=this.applyServerMerge_(t,c.path,c.children,r,i,s,u))}else if(n.type===it.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(t,h.path,r,i,u):this.ackUserWrite_(t,h.path,h.affectedTree,r,i,u)}else{if(n.type!==it.LISTEN_COMPLETE)throw a.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(t,n.path,r,u)}var f=u.getChanges();return e.maybeAddValueEvent_(t,o,f),new _t(o,f)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(gt.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var s=void 0,u=void 0;if(t.isEmpty())if(a.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var l=e.getCompleteServerSnap(),c=l instanceof je?l:je.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var f=n.calcCompleteEventCache(e.getCompleteServerSnap());s=this.filter_.updateFullNode(e.getEventCache().getNode(),f,i)}else{var d=t.getFront();if(".priority"===d){a.assert(1===t.getLength(),"Can't have a priority with additional path components");var p=o.getNode();u=e.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(t,p,u);s=null!=m?this.filter_.updatePriority(p,m):o.getNode()}else{var g=t.popFront(),A=void 0;if(o.isCompleteForChild(d)){u=e.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),u);A=null!=v?o.getNode().getImmediateChild(d).updateChild(g,v):o.getNode().getImmediateChild(d)}else A=n.calcCompleteChild(d,e.getServerCache());s=null!=A?this.filter_.updateChild(o.getNode(),d,A,g,r,i):o.getNode()}}return e.updateEventSnap(s,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,a){var s,u=e.getServerCache(),l=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=l.updateFullNode(u.getNode(),n,null);else if(l.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(t,n);s=l.updateFullNode(u.getNode(),c,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&t.getLength()>1)return e;var f=t.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"===h?l.updatePriority(u.getNode(),d):l.updateChild(u.getNode(),h,d,f,yt,null)}var p=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),l.filtersNodes()),m=new bt(r,p,i);return this.generateEventCacheAfterServerEvent_(p,t,r,m,a)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var a,s,u=e.getEventCache(),l=new bt(r,e,i);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),a=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var c=t.getFront();if(".priority"===c)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),f=u.getNode().getImmediateChild(c),d=void 0;if(h.isEmpty())d=n;else{var p=l.getCompleteChild(c);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):je.EMPTY_NODE}if(f.equals(d))a=e;else{var m=this.filter_.updateChild(u.getNode(),c,d,h,l,o);a=e.updateEventSnap(m,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,a){var s=this,u=t;return r.foreach((function(r,l){var c=n.child(r);e.cacheHasChild_(t,c.getFront())&&(u=s.applyUserOverwrite_(u,c,l,i,o,a))})),r.foreach((function(r,l){var c=n.child(r);e.cacheHasChild_(t,c.getFront())||(u=s.applyUserOverwrite_(u,c,l,i,o,a))})),u},e.prototype.applyMerge_=function(e,t){return t.foreach((function(t,n){e=e.updateChild(t,n)})),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,a){var s=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,l=e;u=t.isEmpty()?n:ct.Empty.setTree(t,n);var c=e.getServerCache().getNode();return u.children.inorderTraversal((function(t,n){if(c.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),h=s.applyMerge_(u,n);l=s.applyServerOverwrite_(l,new U(t),h,r,i,o,a)}})),u.children.inorderTraversal((function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!c.hasChild(t)&&!u){var h=e.getServerCache().getNode().getImmediateChild(t),f=s.applyMerge_(h,n);l=s.applyServerOverwrite_(l,new U(t),f,r,i,o,a)}})),l},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),r,i,a,o);if(t.isEmpty()){var u=ct.Empty;return s.getNode().forEachChild(Ae,(function(e,t){u=u.set(new U(e),t)})),this.applyServerMerge_(e,t,u,r,i,a,o)}return e}var l=ct.Empty;return n.foreach((function(e,n){var r=t.child(e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),this.applyServerMerge_(e,t,l,r,i,a,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,yt,r)},e.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var s=new bt(n,e,r),u=e.getEventCache().getNode(),l=void 0;if(t.isEmpty()||".priority"===t.getFront()){var c=void 0;if(e.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var h=e.getServerCache().getNode();a.assert(h instanceof je,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,l=this.filter_.updateFullNode(u,c,i)}else{var f=t.getFront(),d=n.calcCompleteChild(f,e.getServerCache());null==d&&e.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(l=null!=d?this.filter_.updateChild(u,f,d,t.popFront(),s,i):e.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,je.EMPTY_NODE,t.popFront(),s,i):u).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(l=this.filter_.updateFullNode(l,o,i))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(U.Empty),e.updateEventSnap(l,o,this.filter_.filtersNodes())},e}(),Et=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach((function(e){e.type===gt.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(gt.childMovedChange(e.childName,e.snapshotNode))})),this.generateEventsForType_(i,gt.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,gt.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,gt.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,gt.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,gt.VALUE,e,n,t),i},e.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,a=n.filter((function(e){return e.type===t}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(t){var n=o.materializeSingleChange_(t,i);r.forEach((function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))}))}))},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw a.assertionError("Should only compare child_ events.");var n=new pe(e.childName,e.snapshotNode),r=new pe(t.childName,t.snapshotNode);return this.index_.compare(n,r)},e}(),xt=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new At(n.getIndex()),i=n.getNodeFilter();this.processor_=new wt(i);var o=t.getServerCache(),a=t.getEventCache(),s=r.updateFullNode(je.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(je.EMPTY_NODE,a.getNode(),null),l=new pt(s,o.isFullyInitialized(),r.filtersNodes()),c=new pt(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new mt(c,l),this.eventGenerator_=new Et(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){a.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(e){t=t;var i=e.createCancelEvent(t,r);i&&n.push(i)}))}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===it.MERGE&&null!==e.source.queryId&&(a.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),a.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),a.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];t.getNode().isLeafNode()||t.getNode().forEachChild(Te,(function(e,t){n.push(gt.childAddedChange(e,t))}));return t.isFullyInitialized()&&n.push(gt.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},e}(),St=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return a.assert(st,"Reference.ts has not been loaded"),st},set:function(e){a.assert(!st,"__referenceConstructor has already been defined"),st=e},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this.views.size},e.prototype.applyOperation=function(e,t,n){var r,i,s=e.source.queryId;if(null!==s){var u=this.views.get(s);return a.assert(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(e,t,n)}var l=[];try{for(var c=o.__values(this.views.values()),h=c.next();!h.done;h=c.next()){u=h.value;l=l.concat(u.applyOperation(e,t,n))}}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return l},e.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof je?(s=n.calcCompleteEventChildren(r),u=!1):(s=je.EMPTY_NODE,u=!1);var l=new mt(new pt(s,u,!1),new pt(r,i,!1));a=new xt(e,l),this.views.set(o,a)}return a.addEventRegistration(t),a.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var i,a,s=t.queryIdentifier(),u=[],l=[],c=this.hasCompleteView();if("default"===s)try{for(var h=o.__values(this.views.entries()),f=h.next();!f.done;f=h.next()){var d=o.__read(f.value,2),p=d[0],m=d[1];l=l.concat(m.removeEventRegistration(n,r)),m.isEmpty()&&(this.views.delete(p),m.getQuery().getQueryParams().loadsAllData()||u.push(m.getQuery()))}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}else(m=this.views.get(s))&&(l=l.concat(m.removeEventRegistration(n,r)),m.isEmpty()&&(this.views.delete(s),m.getQuery().getQueryParams().loadsAllData()||u.push(m.getQuery())));return c&&!this.hasCompleteView()&&u.push(new e.__referenceConstructor(t.repo,t.path)),{removed:u,events:l}},e.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=o.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var a=i.value;a.getQuery().getQueryParams().loadsAllData()||n.push(a)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.getCompleteServerCache=function(e){var t,n,r=null;try{for(var i=o.__values(this.views.values()),a=i.next();!a.done;a=i.next()){var s=a.value;r=r||s.getCompleteServerCache(e)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){var e,t;try{for(var n=o.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(a){e={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e}(),Tt=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new ct(n));var r=this.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=U.relativePath(i,t);return o=o.updateChild(a,n),new e(this.writeTree_.set(i,o))}var s=new ct(n);return new e(this.writeTree_.setTree(t,s))},e.prototype.addWrites=function(e,t){var n=this;return D(t,(function(t,r){n=n.addWrite(e.child(t),r)})),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,ct.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(U.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Te,(function(t,n){e.push(new pe(t,n))})):this.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new pe(t,n.value))})),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new ct(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(e){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(a.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e(t.child(n),o,r)})),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(t.child(".priority"),i)),r}(U.Empty,this.writeTree_,e)},e.Empty=new e(new ct(null)),e}();var Mt=function(){function e(){this.visibleWrites_=Tt.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new Lt(e,this)},e.prototype.addOverwrite=function(e,t,n,r){a.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){a.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex((function(t){return t.writeId===e}));a.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var u=this.allWrites_[s];u.visible&&(s>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):D(r.children,(function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(r.path.child(e))}));return!0}return!1},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(t);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(U.Empty)){var a=e.layerTree_(this.allWrites_,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))}),t);l=n||je.EMPTY_NODE;return a.apply(l)}return null}var s=this.visibleWrites_.getCompleteNode(t);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(t);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(U.Empty)){var l=n||je.EMPTY_NODE;return u.apply(l)}return null},e.prototype.calcCompleteEventChildren=function(e,t){var n=je.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(Te,(function(e,t){n=n.updateImmediateChild(e,t)})),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(Te,(function(e,t){var r=i.childCompoundWrite(new U(e)).apply(t);n=n.updateImmediateChild(e,r)})),i.getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){a.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(U.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var l=[],c=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&l.length<r;)0!==c(f,n)&&l.push(f),f=h.getNext();return l},e.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,U.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var r=Tt.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var s=o.path,u=void 0;if(o.snap)n.contains(s)?(u=U.relativePath(n,s),r=r.addWrite(u,o.snap)):s.contains(n)&&(u=U.relativePath(s,n),r=r.addWrite(U.Empty,o.snap.getChild(u)));else{if(!o.children)throw a.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))u=U.relativePath(n,s),r=r.addWrites(u,o.children);else if(s.contains(n))if((u=U.relativePath(s,n)).isEmpty())r=r.addWrites(U.Empty,o.children);else{var l=a.safeGet(o.children,u.getFront());if(l){var c=l.getChild(u.popFront());r=r.addWrite(U.Empty,c)}}}}}return r},e}(),Lt=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),Ct=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=ct.Empty,this.pendingWriteTree_=new Mt,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new ft(ut.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=ct.fromObject(t);return this.applyOperationToSyncPoints_(new dt(ut.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=ct.Empty;return null!=n.snap?r=r.set(U.Empty,!0):D(n.children,(function(e,t){r=r.set(new U(e),t)})),this.applyOperationToSyncPoints_(new lt(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new ft(ut.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=ct.fromObject(t);return this.applyOperationToSyncPoints_(new dt(ut.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new ht(ut.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,u=U.relativePath(a,t),l=new ft(ut.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,l)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,u=U.relativePath(a,t),l=ct.fromObject(n),c=new dt(ut.forServerTaggedQuery(s),u,l);return this.applyTaggedOperation_(a,c)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),o=i.path,a=i.queryId,s=U.relativePath(o,t),u=new ht(ut.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(e,t){var n=U.relativePath(e,r);i=i||t.getCompleteServerCache(n),o=o||t.hasCompleteView()}));var s,u=this.syncPointTree_.get(r);(u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache(U.Empty)):(u=new St,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i)?s=!0:(s=!1,i=je.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=t.getCompleteServerCache(U.Empty);n&&(i=i.updateImmediateChild(e,n))})));var l=u.viewExistsForQuery(t);if(!l&&!t.getQueryParams().loadsAllData()){var c=e.makeQueryKey_(t);a.assert(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=e.getNextQueryTag_();this.queryToTagMap.set(c,h),this.tagToQueryMap.set(h,c)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(t,n,f,i,s);if(!l&&!o){var p=u.viewForQuery(t);d=d.concat(this.setupListener_(t,p))}return d},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===t.queryIdentifier()||a.viewExistsForQuery(t))){var u=a.removeEventRegistration(t,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var l=u.removed;s=u.events;var c=-1!==l.findIndex((function(e){return e.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(e,t){return t.hasCompleteView()}));if(c&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var m=d[p],g=m.getQuery(),A=this.createListenerForView_(m);this.listenProvider_.startListening(e.queryForListening_(g),this.tagForQuery_(g),A.hashFn,A.onComplete)}}if(!h&&l.length>0&&!r)if(c){this.listenProvider_.stopListening(e.queryForListening_(t),null)}else l.forEach((function(t){var n=i.queryToTagMap.get(e.makeQueryKey_(t));i.listenProvider_.stopListening(e.queryForListening_(t),n)}));this.removeTags_(l)}return s},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,(function(t,n){var r=U.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold((function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),D(n,(function(e,t){r=r.concat(t)})),r}))},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var r=t.path,i=this.tagForQuery_(t),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(e.queryForListening_(t),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)a.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=u.fold((function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map((function(e){return e.getQuery()})))),D(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<l.length;++c){var h=l[c];this.listenProvider_.stopListening(e.queryForListening_(h),this.tagForQuery_(h))}return s},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||je.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(e,n);return t.removeEventRegistration(n,null,i)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return a.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new U(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);a.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(U.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(U.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(U.Empty));var o=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,l,c))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(U.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(U.Empty));var a=[];return t.children.inorderTraversal((function(t,o){var s=n?n.getImmediateChild(t):null,u=r.child(t),l=e.operationForChild(t);l&&(a=a.concat(i.applyOperationDescendantsHelper_(l,o,s,u)))})),o&&(a=a.concat(o.applyOperation(e,r,n))),a},e.nextQueryTag_=1,e}(),Rt=function(){function e(){this.rootNode_=je.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),Ot=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),a.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return a.deepCopy(this.counters_)},e}(),It=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new Ot),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),Pt=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=o.__assign({},e);return this.last_&&D(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),kt=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Pt(e);var n=1e4+2e4*Math.random();G(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;D(t,(function(t,i){i>0&&a.contains(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),G(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),Nt=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new Dt(i)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.equals(e)}))},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.contains(e)||e.contains(t)}))},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),Dt=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();b&&E("event: "+t.toString()),V(n)}}},e.prototype.getPath=function(){return this.path_},e}(),Ft=function(){function e(e){this.allowedEvents_=e,this.listeners_={},a.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=o.__spread(this.listeners_[e]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){a.assert(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),jt=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return o.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return a.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(Ft),Bt=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||a.isMobileCordova()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return o.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return a.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Ft),Vt=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&V((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),Gt=function(){function e(e,t,n,r,i){this.connId=e,this.repoInfo=t,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=x(e),this.stats_=It.getCollection(t),this.urlFn=function(e){return t.connectionURL("long_polling",e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Vt(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(a.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ut((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.__read(e,5),i=r[0],a=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=a,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.__read(e,2),i=r[0],a=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!a.isNodeSdk()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=a.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=a.base64Encode(t),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!a.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=a.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),Ut=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,a.isNodeSdk())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=A(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))o='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){E("frame writing exception"),u.stack&&E(u.stack),E(u)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||E("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;a.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){E("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),qt="";var Wt=null;"undefined"!==typeof MozWebSocket?Wt=MozWebSocket:"undefined"!==typeof WebSocket&&(Wt=WebSocket);var zt=function(){function e(t,n,r,i,o){this.connId=t,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=x(this.connId),this.stats_=It.getCollection(n),this.connURL=e.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n){var r={v:"5"};return!a.isNodeSdk()&&"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL("websocket",r)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if(a.isNodeSdk()){var i=this.nodeAdmin?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+qt+"/"+r.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),u=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;u&&(o.proxy={origin:u}),this.mySock=new Wt(this.connURL,[],o)}else{o={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Wt(this.connURL,[],o)}}catch(c){this.log_("Error instantiating WebSocket.");var l=c.message||c.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Wt&&!e.forceDisallow_},e.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=a.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(a.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=a.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=N(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Ht=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Gt,zt]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=zt&&zt.isAvailable(),a=i&&!zt.previouslyFailed();if(t.webSocketOnly&&(i||M("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[zt];else{var s=this.transports_=[];try{for(var u=o.__values(e.ALL_TRANSPORTS),l=u.next();!l.done;l=u.next()){var c=l.value;c&&c.isAvailable()&&s.push(c)}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),Kt=function(){function e(e,t,n,r,i,o,a,s){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=x("c:"+this.id+":"),this.transportManager_=new Ht(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=G((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=P("t",e),n=P("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=P("t",e),n=P("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=P("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?S("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&M("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),G((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):G((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),Yt=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),Qt=function(e){function t(n,r,i,o,s,u,l){var c=e.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=s,c.authTokenProvider_=u,c.authOverride_=l,c.id=t.nextPersistentConnectionId_++,c.log_=x("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!a.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),jt.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&Bt.getInstance().on("online",c.onOnline_,c),c}return o.__extends(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(a.stringify(i)),a.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),a.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),a.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r.queryObject(),a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===typeof e&&a.contains(e,"w")){var n=a.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();M("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||a.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=a.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),a.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+a.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):S("Unrecognized action received from server: "+a.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;a.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){var e=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this,u=this.lastSessionId,l=!1,c=null,h=function(){c?c.close():(l=!0,i())};this.realtime_={close:h,sendRequest:function(e){a.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(e){l?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),s.authToken_=e&&e.accessToken,c=new Kt(o,s.repoInfo_,s.applicationId_,n,r,i,(function(e){M(e+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),u))})).then(null,(function(t){s.log_("Failed to get token: "+t),l||(e.repoInfo_.nodeAdmin&&M(t),h())}))}},t.prototype.interrupt=function(e){E("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){E("Resuming connection for reason: "+e),delete this.interruptReasons_[e],a.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return k(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new U(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){E("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=o.__values(this.listens.values()),a=i.next();!a.done;a=i.next()){var s=a.value;try{for(var u=(n=void 0,o.__values(s.values())),l=u.next();!l.done;l=u.next()){var c=l.value;this.sendListen_(c)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";a.isNodeSdk()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+qt.replace(/\./g,"-")]=1,a.isMobileCordova()?e["framework.cordova"]=1:a.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=Bt.getInstance().currentlyOnline();return a.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(Yt),Xt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=x("p:rest:"),i.listens_={},i}return o.__extends(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(a.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,s=e.path.toString();this.log_("Listen called for "+s+" "+e.queryIdentifier());var u=t.getListenId_(e,r),l={};this.listens_[u]=l;var c=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(s,n,!1,r),a.safeGet(o.listens_,u)===l)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(t.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+a.querystring(t);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var e=null;if(u.status>=200&&u.status<300){try{e=a.jsonEval(u.responseText)}catch(t){M("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,e)}else 401!==u.status&&404!==u.status&&M("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},t}(Yt),Jt=function(){function e(e,t,n,r){var i=this;if(this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ot,this.persistentConnection_=null,this.stats_=It.getCollection(e),t||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Xt(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if("undefined"!==typeof o&&null!==o){if("object"!==typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{a.stringify(o)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}this.persistentConnection_=new Qt(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,o),this.server_=this.persistentConnection_}r.addTokenChangeListener((function(e){i.server_.refreshAuthToken(e)})),this.statsReporter_=It.getOrCreateReporter(e,(function(){return new kt(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new Rt,this.infoSyncTree_=new Ct({startListening:function(e,t,n,r){var o=[],a=i.infoData_.getNode(e.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ct({startListening:function(e,t,n,r){return i.server_.listen(e,n,t,(function(t,n){var o=r(t,n);i.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,t){i.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new U(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return(e=(e={timestamp:this.serverTime()})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new U(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var s=a.map(t,(function(e){return Ve(e)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var u=Ve(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var l=a.map(t,(function(e){return Ve(e)}));o=this.serverSyncTree_.applyServerMerge(i,l)}else{var c=Ve(t);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;D(e,(function(e,n){t.updateInfo_(e,n)}))},e.prototype.updateInfo_=function(e,t){var n=new U("/.info/"+e),r=Ve(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,r){var i=this;this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),a=Ve(t,n),s=this.serverSyncTree_.calcCompleteEventCache(e),u=nt(a,s,o),l=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(e,u,l,!0);this.eventQueue_.queueEvents(c),this.server_.put(e.toString(),a.val(!0),(function(t,n){var o="ok"===t;o||M("set at "+e+" failed: "+t);var a=i.serverSyncTree_.ackUserWrite(l,!o);i.eventQueue_.raiseEventsForChangedPath(e,a),i.callOnCompleteCallback(r,t,n)}));var h=this.abortTransactions_(e);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},e.prototype.update=function(e,t,n){var r=this;this.log_("update",{path:e.toString(),value:t});var i=!0,o=this.generateServerValues(),a={};if(D(t,(function(t,n){i=!1,a[t]=tt(e.child(t),Ve(n),r.serverSyncTree_,o)})),i)E("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(e,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(e.toString(),t,(function(t,i){var o="ok"===t;o||M("update at "+e+" failed: "+t);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(e):e;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,t,i)})),D(t,(function(t){var n=r.abortTransactions_(e.child(t));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=new ot;this.onDisconnect_.forEachTree(U.Empty,(function(r,i){var o=tt(r,i,e.serverSyncTree_,t);n.remember(r,o)}));var r=[];n.forEachTree(U.Empty,(function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)})),this.onDisconnect_=new ot,this.eventQueue_.raiseEventsForChangedPath(U.Empty,r)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)}))},e.prototype.onDisconnectSet=function(e,t,n){var r=this,i=Ve(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),(function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)}))},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,o=Ve(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),(function(t,n){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)}))},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(a.isEmpty(t))return E("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,(function(i,o){"ok"===i&&D(t,(function(t,n){var i=Ve(n);r.onDisconnect_.remember(e.child(t),i)})),r.callOnCompleteCallback(n,i,o)}))},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!==typeof console){var t;e?(this.statsListener_||(this.statsListener_=new Pt(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce((function(e,t){return Math.max(t.length,e)}),0);D(t,(function(e,t){for(var r=e,i=e.length;i<n+2;i++)r+=" ";console.log(r+t)}))}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),E.apply(void 0,o.__spread([n],e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&V((function(){if("ok"===t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}}))},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new cn(this))},enumerable:!1,configurable:!0}),e}(),Zt=function(){function e(t){this.indexedFilter_=new At(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new pe(t,n))||(n=je.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=je.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(je.EMPTY_NODE);var i=this;return t.forEachChild(Te,(function(e,t){i.matches(new pe(e,t))||(r=r.updateImmediateChild(e,je.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),$t=function(){function e(e){this.rangedFilter_=new Zt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new pe(t,n))||(n=je.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=je.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=je.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(je.EMPTY_NODE);var s=void 0,u=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();l=function(e,t){return c(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&l(s,a)<=0&&(h=!0),h&&o<this.limit_&&l(a,u)<=0?o++:r=r.updateImmediateChild(a.name,je.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(e,t){return s(t,e)}}else o=this.index_.getCompare();var u=e;a.assert(u.numChildren()===this.limit_,"");var l=new pe(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),d=r.getChildAfterChild(this.index_,c,this.reverse_);null!=d&&(d.name===t||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:o(d,l);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(gt.childChangedChange(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(gt.childRemovedChange(t,f));var m=u.updateImmediateChild(t,je.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(gt.childAddedChange(d.name,d.node)),m.updateImmediateChild(d.name,d.node)):m}return n.isEmpty()?e:h&&o(c,l)>=0?(null!=i&&(i.trackChildChange(gt.childRemovedChange(c.name,c.node)),i.trackChildChange(gt.childAddedChange(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,je.EMPTY_NODE)):e},e}(),en=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Te}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:C},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:R},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return a.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==Te&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Te},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new At(this.getIndex()):this.hasLimit()?new $t(this):new Zt(this)},e.prototype.toRestQueryStringParameters=function(){var t,n=e.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Te?t=n.PRIORITY_INDEX:this.index_===Ue?t=n.VALUE_INDEX:this.index_===Ae?t=n.KEY_INDEX:(a.assert(this.index_ instanceof qe,"Unrecognized index type!"),t=this.index_.toString()),r[n.ORDER_BY]=a.stringify(t),this.startSet_&&(r[n.START_AT]=a.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+a.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=a.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+a.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}(),tn=function(e){function t(t,n){if(!(t instanceof Jt))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,en.DEFAULT,!1)||this}return o.__extends(t,e),t.prototype.getKey=function(){return a.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return a.validateArgCount("Reference.child",1,1,arguments.length),"number"===typeof e?e=String(e):e instanceof U||(null===this.path.getFront()?se("Reference.child",1,e,!1):ae("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){a.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){a.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){a.validateArgCount("Reference.set",1,2,arguments.length),ue("Reference.set",this.path),ee("Reference.set",1,e,this.path,!1),a.validateCallback("Reference.set",2,t,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(a.validateArgCount("Reference.update",1,2,arguments.length),ue("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,M("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ne("Reference.update",1,e,this.path,!1),a.validateCallback("Reference.update",2,t,!0);var i=new a.Deferred;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(a.validateArgCount("Reference.setWithPriority",2,3,arguments.length),ue("Reference.setWithPriority",this.path),ee("Reference.setWithPriority",1,e,this.path,!1),re("Reference.setWithPriority",2,t,!1),a.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new a.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return a.validateArgCount("Reference.remove",0,1,arguments.length),ue("Reference.remove",this.path),a.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(a.validateArgCount("Reference.transaction",1,3,arguments.length),ue("Reference.transaction",this.path),a.validateCallback("Reference.transaction",1,e,!1),a.validateCallback("Reference.transaction",2,t,!0),ce("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new a.Deferred;"function"===typeof t&&r.promise.catch((function(){}));var i=function(e,n,i){e?r.reject(e):r.resolve(new fe(n,i)),"function"===typeof t&&t(e,n,i)};return this.repo.startTransaction(this.path,e,i,n),r.promise},t.prototype.setPriority=function(e,t){a.validateArgCount("Reference.setPriority",1,2,arguments.length),ue("Reference.setPriority",this.path),re("Reference.setPriority",1,e,!1),a.validateCallback("Reference.setPriority",2,t,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){a.validateArgCount("Reference.push",0,2,arguments.length),ue("Reference.push",this.path),ee("Reference.push",1,e,this.path,!0),a.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=de(r),o=this.child(i),s=this.child(i);return n=null!=e?o.set(e,t).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"===typeof t&&n.catch((function(){})),o},t.prototype.onDisconnect=function(){return ue("Reference.onDisconnect",this.path),new he(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Qe);Qe.__referenceConstructor=tn,St.__referenceConstructor=tn;var nn,rn=function(){this.children={},this.childCount=0,this.value=null},on=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new rn),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n=t instanceof U?t:new U(t),r=this,i=n.getFront();null!==i;){r=new e(i,r,a.safeGet(r.node_.children,i)||new rn),i=(n=n.popFront()).getFront()}return r},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){a.assert("undefined"!==typeof e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;D(this.node_.children,(function(r,i){t(new e(r,n,i))}))},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild((function(t){t.forEachDescendant(e,!0,n)})),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild((function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)}))},e.prototype.path=function(){return new U(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=a.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}();!function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(nn||(nn={})),Jt.MAX_TRANSACTION_RETRIES_=25,Jt.prototype.transactionsInit_=function(){this.transactionQueueTree_=new on},Jt.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);var i=function(){},o=new tn(this,e);o.on("value",i);var s={path:e,update:t,onComplete:n,status:null,order:A(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(e);s.currentInputSnapshot=u;var l=s.update(u.val());if(void 0===l){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new We(s.currentInputSnapshot,new tn(this,s.path),Te);s.onComplete(null,!1,c)}}else{te("transaction failed: Data returned ",l,s.path),s.status=nn.RUN;var h=this.transactionQueueTree_.subTree(e),f=h.getValue()||[];f.push(s),h.setValue(f);var d=void 0;if("object"===typeof l&&null!==l&&a.contains(l,".priority"))d=a.safeGet(l,".priority"),a.assert($(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else d=(this.serverSyncTree_.calcCompleteEventCache(e)||je.EMPTY_NODE).getPriority().val();d=d;var p=this.generateServerValues(),m=Ve(l,d),g=nt(m,u,p);s.currentOutputSnapshotRaw=m,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(e,g,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,v),this.sendReadyTransactions_()}},Jt.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||je.EMPTY_NODE},Jt.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);a.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return e.status===nn.RUN}))&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild((function(e){t.sendReadyTransactions_(e)}))},Jt.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map((function(e){return e.currentWriteId})),i=this.getLatestState_(e,r),o=i,s=i.hash(),u=0;u<t.length;u++){var l=t[u];a.assert(l.status===nn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=nn.SENT,l.retryCount++;var c=U.relativePath(e,l.path);o=o.updateChild(c,l.currentOutputSnapshotRaw)}var h=o.val(!0),f=e;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<t.length;a++){if(t[a].status=nn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[a].currentWriteId)),t[a].onComplete){var s=t[a].currentOutputSnapshotResolved,u=new tn(n,t[a].path),l=new We(s,u,Te);o.push(t[a].onComplete.bind(null,null,!0,l))}t[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,i);for(a=0;a<o.length;a++)V(o[a])}else{if("datastale"===r)for(a=0;a<t.length;a++)t[a].status===nn.SENT_NEEDS_ABORT?t[a].status=nn.NEEDS_ABORT:t[a].status=nn.RUN;else{M("transaction at "+f.toString()+" failed: "+r);for(a=0;a<t.length;a++)t[a].status=nn.NEEDS_ABORT,t[a].abortReason=r}n.rerunTransactions_(e)}}),s)},Jt.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},Jt.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n,r=[],i=[],o=e.filter((function(e){return e.status===nn.RUN})).map((function(e){return e.currentWriteId})),s=0;s<e.length;s++){var u=e[s],l=U.relativePath(t,u.path),c=!1,h=void 0;if(a.assert(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===nn.NEEDS_ABORT)c=!0,h=u.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else if(u.status===nn.RUN)if(u.retryCount>=Jt.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else{var f=this.getLatestState_(u.path,o);u.currentInputSnapshot=f;var d=e[s].update(f.val());if(void 0!==d){te("transaction failed: Data returned ",d,u.path);var p=Ve(d);"object"===typeof d&&null!=d&&a.contains(d,".priority")||(p=p.updatePriority(f.getPriority()));var m=u.currentWriteId,g=this.generateServerValues(),A=nt(p,f,g);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=A,u.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(m),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(u.path,A,u.currentWriteId,u.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(m,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,i),i=[],c&&(e[s].status=nn.COMPLETED,n=e[s].unwatcher,setTimeout(n,Math.floor(0)),e[s].onComplete))if("nodata"===h){var v=new tn(this,e[s].path),y=e[s].currentInputSnapshot,b=new We(y,v,Te);r.push(e[s].onComplete.bind(null,null,!1,b))}else r.push(e[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)V(r[s]);this.sendReadyTransactions_()}},Jt.prototype.getAncestorTransactionNode_=function(e){var t,n=this.transactionQueueTree_;for(t=e.getFront();null!==t&&null===n.getValue();)n=n.subTree(t),t=(e=e.popFront()).getFront();return n},Jt.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort((function(e,t){return e.order-t.order})),t},Jt.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild((function(e){n.aggregateTransactionQueuesForNode_(e,t)}))},Jt.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==nn.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(n.length>0?n:null)}e.forEachChild((function(e){t.pruneCompletedTransactionsBelowNode_(e)}))},Jt.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor((function(e){t.abortTransactionsOnNode_(e)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(e){t.abortTransactionsOnNode_(e)})),n},Jt.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)if(t[o].status===nn.SENT_NEEDS_ABORT);else if(t[o].status===nn.SENT)a.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,t[o].status=nn.SENT_NEEDS_ABORT,t[o].abortReason="set";else if(a.assert(t[o].status===nn.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete){n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r);for(o=0;o<n.length;o++)V(n[o])}};var an,sn=function(){function e(e,t){var n=this;this.app_=e,this.authProvider_=t,this.auth_=null,this.auth_=t.getImmediate({optional:!0}),this.auth_||t.get().then((function(e){return n.auth_=e}))}return e.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout((function(){return e(null)}),0),this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)})))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',M(e)},e}(),un=function(){function e(){}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})},e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.EMULATOR_AUTH_TOKEN="owner",e}(),ln=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return an||(an=new e),an},e.prototype.interrupt=function(){var e,t,n,r;try{for(var i=o.__values(Object.keys(this.repos_)),a=i.next();!a.done;a=i.next()){var s=a.value;try{for(var u=(n=void 0,o.__values(Object.keys(this.repos_[s]))),l=u.next();!l.done;l=u.next()){var c=l.value;this.repos_[s][c].interrupt()}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){e={error:f}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.resume=function(){var e,t,n,r;try{for(var i=o.__values(Object.keys(this.repos_)),a=i.next();!a.done;a=i.next()){var s=a.value;try{for(var u=(n=void 0,o.__values(Object.keys(this.repos_[s]))),l=u.next();!l.done;l=u.next()){var c=l.value;this.repos_[s][c].resume()}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){e={error:f}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.databaseFromApp=function(e,t,n,i){var o=n||e.options.databaseURL;void 0===o&&(e.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),E("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=K(o,i),u=s.repoInfo,l=void 0;"undefined"!==typeof r&&(l=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).FIREBASE_DATABASE_EMULATOR_HOST),l?(a=!0,o="http://"+l+"?ns="+u.namespace,u=(s=K(o,i)).repoInfo):a=!s.repoInfo.secure;var c=i&&a?new un:new sn(e,t);return le("Invalid Firebase Database URL",1,s),s.path.isEmpty()||T("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(u,e,c).database},e.prototype.deleteRepo=function(e){var t=a.safeGet(this.repos_,e.app.name);t&&a.safeGet(t,e.repoInfo_.toURLString())===e||T("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t,n){var r=a.safeGet(this.repos_,t.name);r||(r={},this.repos_[t.name]=r);var i=a.safeGet(r,e.toURLString());return i&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Jt(e,this.useRestClient_,t,n),r[e.toURLString()]=i,i},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),cn=function(){function e(e){this.repo_=e,e instanceof Jt||T("Don't call new Database() directly - please use firebase.database()."),this.root_=new tn(e,U.Empty),this.INTERNAL=new hn(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),a.validateArgCount("database.ref",0,1,arguments.length),e instanceof tn?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),a.validateArgCount(t,1,1,arguments.length);var n=K(e,this.repo_.repoInfo_.nodeAdmin);le(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&T(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&T("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){a.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){a.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(e){return{".sv":{increment:e}}}},e}(),hn=function(){function e(e){this.database=e}return e.prototype.delete=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.database.checkDeleted_("delete"),ln.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},e}(),fn=Object.freeze({__proto__:null,forceLongPolling:function(){zt.forceDisallow(),Gt.forceAllow()},forceWebSockets:function(){Gt.forceDisallow()},isWebSocketsAvailable:function(){return zt.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),dn=Qt;Qt.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Qt.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var pn=Kt,mn=W,gn=Object.freeze({__proto__:null,DataConnection:dn,RealTimeConnection:pn,hijackHash:function(e){var t=Qt.prototype.put;return Qt.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){Qt.prototype.put=t}},ConnectionTarget:mn,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){ln.getInstance().forceRestClient(e)}}),An=cn.ServerValue;function vn(t){!function(e){qt=e}(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new u.Component("database",(function(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal");return ln.getInstance().databaseFromApp(n,r,t)}),"PUBLIC").setServiceProps({Reference:tn,Query:Qe,Database:cn,DataSnapshot:We,enableLogging:w,INTERNAL:fn,ServerValue:An,TEST_ACCESS:gn}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.6.13"),a.isNodeSdk()&&(e.exports=n)}vn(c.default),t.DataSnapshot=We,t.Database=cn,t.OnDisconnect=he,t.Query=Qe,t.Reference=tn,t.ServerValue=An,t.enableLogging=w,t.registerDatabase=vn}).call(this,n(56))},function(e,t,n){"use strict";var r=n(23),i=n(4),o=n(26);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=a(r),u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},l=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return i.__extends(t,e),t}(Error);var c=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},e.prototype.getContext=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t;return i.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();function h(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var f=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"===typeof e||"object"===typeof e)return h(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"===typeof e||"object"===typeof e?h(e,(function(e){return t.decode(e)})):e},e}();var d=function(){function e(e,t,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=e,this.fetchImpl=i,this.serializer=new f,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new c(t,n),this.cancelAllRequests=new Promise((function(e){o.deleteService=function(){return e()}}));try{var a=new URL(r);this.customDomain=a.origin,this.region="us-central1"}catch(s){this.customDomain=null,this.region=r}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o;return i.__generator(this,(function(i){switch(i.label){case 0:n["Content-Type"]="application/json",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{status:0,json:null}];case 4:o=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,r.json()];case 6:return o=i.sent(),[3,8];case 7:return i.sent(),[3,8];case 8:return[2,{status:r.status,json:o}]}}))}))},e.prototype.call=function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,a,s,c,h,f,d,m,g,A;return i.__generator(this,(function(i){switch(i.label){case 0:return r=this._url(e),t=this.serializer.encode(t),o={data:t},a={},[4,this.contextProvider.getContext()];case 1:return(s=i.sent()).authToken&&(a.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=s.instanceIdToken),c=n.timeout||7e4,h=function(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new l("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}(c),f=h.timer,d=h.promise,[4,Promise.race([p(f,this.postJSON(r,o,a)),d,p(f,this.cancelAllRequests)])];case 2:if(!(m=i.sent()))throw new l("cancelled","Firebase Functions instance was deleted.");if(g=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"===typeof s){if(!u[s])return new l("internal","internal");r=u[s],i=s}var c=a.message;"string"===typeof c&&(i=c),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(h){}return"ok"===r?null:new l(r,i,o)}(m.status,m.json,this.serializer))throw g;if(!m.json)throw new l("internal","Response is not valid JSON object.");if("undefined"===typeof(A=m.json.data)&&(A=m.json.result),"undefined"===typeof A)throw new l("internal","Response is missing data field.");return[2,{data:this.serializer.decode(A)}]}}))}))},e}();function p(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}!function(e,t){var n={Functions:d};e.INTERNAL.registerComponent(new o.Component("functions",(function(e,n){var r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("messaging");return new d(r,i,o,n,t)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(s.default,fetch),s.default.registerVersion("@firebase/functions","0.5.0")},function(e,t,n){"use strict";n.r(t);n(57);var r,i,o=n(26),a=n(19),s=n(4),u=n(38),l=n(23),c=n.n(l),h=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["permission-default"]="The notification permission was not granted and dismissed instead.",r["permission-blocked"]="The notification permission was not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",r["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",r["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",r["invalid-vapid-key"]="The public VAPID key must be a string.",r["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r),f=new a.ErrorFactory("messaging","Messaging",h),d="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function p(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(s.__spread)(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function m(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(i||(i={}));function g(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r=this;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=i.sent(),!t.map((function(e){return e.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,Object(u.openDb)("fcm_token_details_db",5,(function(t){return Object(s.__awaiter)(r,void 0,void 0,(function(){var r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=t.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(e)]:[2];case 1:return i=s.sent(),[4,r.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:p(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:p(o.auth),p256dh:p(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:p(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,Object(u.deleteDb)("fcm_token_details_db")];case 4:return i.sent(),[4,Object(u.deleteDb)("fcm_vapid_details_db")];case 5:return i.sent(),[4,Object(u.deleteDb)("undefined")];case 6:return i.sent(),[2,A(n)?n:null]}}))}))}function A(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}var v="firebase-messaging-store",y=null;function b(){return y||(y=Object(u.openDb)("firebase-messaging-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(v)}}))),y}function _(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return t=x(e),[4,b()];case 1:return[4,i.sent().transaction(v).objectStore(v).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,g(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,w(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function w(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return n=x(e),[4,b()];case 1:return r=o.sent(),[4,(i=r.transaction(v,"readwrite")).objectStore(v).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function E(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return t=x(e),[4,b()];case 1:return n=i.sent(),[4,(r=n.transaction(v,"readwrite")).objectStore(v).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function x(e){return e.appConfig.appId}function S(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,u;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return[4,C(e)];case 1:n=s.sent(),r=R(t),i={method:"POST",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(L(e.appConfig),i)];case 3:return[4,s.sent().json()];case 4:return o=s.sent(),[3,6];case 5:throw a=s.sent(),f.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw u=o.error.message,f.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw f.create("token-subscribe-no-token");return[2,o.token]}}))}))}function T(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,u;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return[4,C(e)];case 1:n=s.sent(),r=R(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(L(e.appConfig)+"/"+t.token,i)];case 3:return[4,s.sent().json()];case 4:return o=s.sent(),[3,6];case 5:throw a=s.sent(),f.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw u=o.error.message,f.create("token-update-failed",{errorInfo:u});if(!o.token)throw f.create("token-update-no-token");return[2,o.token]}}))}))}function M(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return[4,C(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(L(e.appConfig)+"/"+t,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,f.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),f.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function L(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function C(e){var t=e.appConfig,n=e.installations;return Object(s.__awaiter)(this,void 0,void 0,(function(){var e;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function R(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==d&&(o.web.applicationPubKey=i),o}function O(e,t,n){return Object(s.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw f.create("permission-blocked");return[4,N(t,n)];case 1:return r=s.sent(),[4,_(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:p(r.getKey("auth")),p256dh:p(r.getKey("p256dh"))},i?[3,3]:[2,k(e,o)];case 3:if(function(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&r&&i&&o}(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,M(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,k(e,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,P({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}}))}))}function I(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,_(e)];case 1:return(n=i.sent())?[4,M(e,n.token)]:[3,4];case 2:return i.sent(),[4,E(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function P(e,t,n){return Object(s.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return Object(s.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,T(t,e)];case 1:return r=a.sent(),i=Object(s.__assign)(Object(s.__assign)({},e),{token:r,createTime:Date.now()}),[4,w(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,I(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function k(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,S(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,w(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function N(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:m(t)})]}}))}))}function D(e){return"object"===typeof e&&!!e&&"google.c.a.c_id"in e}var F=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!==typeof e)throw f.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return Object(s.__awaiter)(this,void 0,void 0,(function(){var n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,_(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:d,r.label=2;case 2:return[2,O(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return I(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw f.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw f.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw f.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw f.create("only-available-in-window")},e.prototype.onMessage=function(){throw f.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw f.create("only-available-in-window")},e.prototype.onPush=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(e))?[4,G()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,V(n,t)]:(r=!1,t.notification?[4,U(j(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed||this.bgMessageHandler&&(i=function(e){var t={from:e.from,collapseKey:e.collapse_key};return function(e,t){if(!t.notification)return;e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}(t),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return Object(s.__awaiter)(this,void 0,void 0,(function(){var r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,I(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,_(this.firebaseDependencies)];case 3:return r=i.sent(),[4,I(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,O(this.firebaseDependencies,self.registration,null!==(n=null===(t=null===r||void 0===r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:d)];case 5:return i.sent(),[2]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return Object(s.__awaiter)(this,void 0,void 0,(function(){var r,o,a,u,l;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n.FCM_MSG)?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(o=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return D(e.data)?self.location.origin:null}(r))?(a=new URL(o,self.location.href),u=new URL(self.location.origin),a.host!==u.host?[2]:[4,B(a)]):[2]):[2];case 1:return(l=s.sent())?[3,4]:[4,self.clients.openWindow(o)];case 2:return l=s.sent(),[4,(c=3e3,new Promise((function(e){setTimeout(e,c)})))];case 3:return s.sent(),[3,6];case 4:return[4,l.focus()];case 5:l=s.sent(),s.label=6;case 6:return l?(r.messageType=i.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,l.postMessage(r)]):[2]}var c}))}))},e}();function j(e){var t,n=Object(s.__assign)({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}function B(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,a,u;return Object(s.__generator)(this,(function(l){switch(l.label){case 0:return[4,G()];case 1:t=l.sent();try{for(n=Object(s.__values)(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(c){a={error:c}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function V(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=i.PUSH_RECEIVED;try{for(var o=Object(s.__values)(e),a=o.next();!a.done;a=o.next()){a.value.postMessage(t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function G(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function U(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var q=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===i.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),D(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw f.create("permission-blocked");return[4,this.updateVapidKey(null===e||void 0===e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null===e||void 0===e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,O(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=d),[2]}))}))},e.prototype.updateSwReg=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw f.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),f.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,I(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e;return Object(s.__generator)(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?f.create("permission-blocked"):f.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw f.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw f.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw f.create("invalid-sw-registration");if(this.swRegistration)throw f.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw f.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw f.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case i.NOTIFICATION_CLICKED:return"notification_open";case i.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t["google.c.a.c_id"],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function W(e){return f.create("missing-app-config-values",{valueName:e})}var z={isSupported:H};function H(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}c.a.INTERNAL.registerComponent(new o.Component("messaging",(function(e){var t=e.getProvider("app").getImmediate(),n={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw W("App Configuration Object");if(!e.name)throw W("App Name");var r=e.options;try{for(var i=Object(s.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw W(a)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!H())throw f.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new F(n):new q(n)}),"PUBLIC").setServiceProps(z))},function(e,t,n){"use strict";n.r(t),n.d(t,"registerStorage",(function(){return ft}));var r=n(23),i=n.n(r),o=n(4),a=n(26),s=function(){function e(e,t){this.code_=T(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return T(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),e}(),u="unknown",l="object-not-found",c="quota-exceeded",h="unauthenticated",f="unauthorized",d="retry-limit-exceeded",p="canceled",m="invalid-url",g="invalid-default-bucket",A="cannot-slice-blob",v="server-file-wrong-size",y="no-download-url",b="invalid-argument",_="invalid-argument-count",w="app-deleted",E="invalid-root-operation",x="invalid-format",S="internal-error";function T(e){return"storage/"+e}function M(){return new s(u,"An unknown error occurred, please check the error payload for server response.")}function L(){return new s(p,"User canceled the upload/download.")}function C(){return new s(A,"Cannot slice blob for upload. Please retry the upload.")}function R(){return new s(y,"The given file does not have any download URLs.")}function O(e,t,n){return new s(b,"Invalid argument in `"+t+"` at index "+e+": "+n)}function I(){return new s(w,"The Firebase app was deleted.")}function P(e,t){return new s(x,"String does not match format '"+e+"': "+t)}function k(e){throw new s(S,"Internal error: "+e)}var N={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function D(e){switch(e){case N.RAW:case N.BASE64:case N.BASE64URL:case N.DATA_URL:return;default:throw"Expected one of the event types: ["+N.RAW+", "+N.BASE64+", "+N.BASE64URL+", "+N.DATA_URL+"]."}}var F=function(e,t){this.data=e,this.contentType=t||null};function j(e,t){switch(e){case N.RAW:return new F(B(t));case N.BASE64:case N.BASE64URL:return new F(V(e,t));case N.DATA_URL:return new F(function(e){var t=new G(e);return t.base64?V(N.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw P(N.DATA_URL,"Malformed data URL.")}return B(t)}(t.rest)}(t),new G(t).contentType)}throw M()}function B(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function V(e,t){switch(e){case N.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw P(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case N.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw P(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(l){throw P(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var G=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw P(N.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1);var r,i};var U,q={STATE_CHANGED:"state_changed"},W="running",z="pausing",H="paused",K="success",Y="canceling",Q="canceled",X="error",J={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Z(e){switch(e){case W:case z:case Y:return J.RUNNING;case H:return J.PAUSED;case K:return J.SUCCESS;case Q:return J.CANCELED;case X:default:return J.ERROR}}function $(e){return null!=e}function ee(e){return void 0!==e}function te(e){return"function"===typeof e}function ne(e){return"object"===typeof e}function re(e){return ne(e)&&null!==e}function ie(e){return"string"===typeof e||e instanceof String}function oe(e){return ae(e)&&Number.isInteger(e)}function ae(e){return"number"===typeof e||e instanceof Number}function se(e){return ue()&&e instanceof Blob}function ue(){return"undefined"!==typeof Blob}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(U||(U={}));var le=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=U.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=U.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=U.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw k("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),$(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return $(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw k("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw k("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw k("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){$(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){$(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),ce=function(){function e(){}return e.prototype.createXhrIo=function(){return new le},e}();function he(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function fe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=he();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(ue())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}var de=function(){function e(e,t){var n=0,r="";se(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(se(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(ue()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(fe.apply(null,r))}var i=t.map((function(e){return ie(e)?j(N.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}(),pe=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(r){return new e(t,"")}if(""===n.path)return n;throw new s(g,"Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t){var n=null;var r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],u=0;u<a.length;u++){var l=a[u],c=l.regex.exec(t);if(c){var h=c[l.indices.bucket],f=c[l.indices.path];f||(f=""),n=new e(h,f),l.postModify(n);break}}if(null==n)throw function(e){return new s(m,"Invalid URL '"+e+"'.")}(t);return n},e}();function me(e){var t,n;try{t=JSON.parse(e)}catch(r){return null}return ne(n=t)&&!Array.isArray(n)?t:null}function ge(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}function Ae(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ve(e){return"https://firebasestorage.googleapis.com/v0"+e}function ye(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function be(e,t){return t}var _e=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||be},we=null;function Ee(){if(we)return we;var e=[];e.push(new _e("bucket")),e.push(new _e("generation")),e.push(new _e("metageneration")),e.push(new _e("name","fullPath",!0));var t=new _e("name");t.xform=function(e,t){return function(e){return!ie(e)||e.length<2?e:Ae(e)}(t)},e.push(t);var n=new _e("size");return n.xform=function(e,t){return $(t)?Number(t):t},e.push(n),e.push(new _e("timeCreated")),e.push(new _e("updated")),e.push(new _e("md5Hash",null,!0)),e.push(new _e("cacheControl",null,!0)),e.push(new _e("contentDisposition",null,!0)),e.push(new _e("contentEncoding",null,!0)),e.push(new _e("contentLanguage",null,!0)),e.push(new _e("contentType",null,!0)),e.push(new _e("metadata","customMetadata",!0)),we=e}function xe(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new pe(n,r);return t.makeStorageReference(i)}})}(r,e),r}function Se(e,t,n){var r=me(t);return null===r?null:xe(e,r,n)}function Te(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function Me(e){if(!ne(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("customMetadata"===t){if(!ne(n))throw"Expected object for 'customMetadata' mapping."}else if(re(n))throw"Mapping for '"+t+"' cannot be an object."}}function Le(e,t,n){var r=me(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e.makeStorageReference(new pe(t,a));r.prefixes.push(s)}if(n.items)for(var u=0,l=n.items;u<l.length;u++){var c=l[u];s=e.makeStorageReference(new pe(t,c.name));r.items.push(s)}return r}(e,t,r)}function Ce(e){if(!ne(e)||!e)throw"Expected ListOptions object.";for(var t in e)if("maxResults"===t){if(!oe(e.maxResults)||e.maxResults<=0)throw"Expected maxResults to be a positive number.";if(e.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==t)throw"Unknown option: "+t;if(e.pageToken&&!ie(e.pageToken))throw"Expected pageToken to be string."}}var Re=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Oe(e){if(!e)throw M()}function Ie(e,t){return function(n,r){var i=Se(e,r,t);return Oe(null!==i),i}}function Pe(e,t){return function(n,r){var i=Se(e,r,t);return Oe(null!==i),function(e,t){var n=me(t);if(null===n)return null;if(!ie(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(t){var n=e.bucket,r=e.fullPath;return ve("/b/"+i(n)+"/o/"+i(r))+ye({alt:"media",token:t})}))[0]}(i,r)}}function ke(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=new s(h,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new s(c,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new s(f,"User does not have permission to access '"+i+"'.")):r=n,r.setServerResponseProp(n.serverResponseProp()),r}}function Ne(e){var t=ke(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new s(l,"Object '"+i+"' does not exist.")),o.setServerResponseProp(r.serverResponseProp()),o}}function De(e,t,n){var r=ve(t.fullServerUrl()),i=e.maxOperationRetryTime,o=new Re(r,"GET",Ie(e,n),i);return o.errorHandler=Ne(t),o}function Fe(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=ve(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime,u=new Re(a,"GET",function(e,t){return function(n,r){var i=Le(e,t,r);return Oe(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=ke(t),u}function je(e,t,n){var r=ve(t.fullServerUrl()),i=e.maxOperationRetryTime,o=new Re(r,"GET",Pe(e,n),i);return o.errorHandler=Ne(t),o}function Be(e,t,n,r){var i=ve(t.fullServerUrl()),o=Te(n,r),a=e.maxOperationRetryTime,s=new Re(i,"PATCH",Ie(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Ne(t),s}function Ve(e,t){var n=ve(t.fullServerUrl()),r=e.maxOperationRetryTime;var i=new Re(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Ne(t),i}function Ge(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var Ue=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function qe(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Oe(!1)}return Oe(!!n&&-1!==(t||["active"]).indexOf(n)),n}function We(e,t,n,r,i,o,a,u){var l=new Ue(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new s(v,"Server recorded incorrect upload file size, please retry the upload.");var c=l.total-l.current,h=c;i>0&&(h=Math.min(h,i));var f=l.current,d=f+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},m=r.slice(f,d);if(null===m)throw C();var g=t.maxUploadRetryTime,A=new Re(n,"POST",(function(e,n){var i,a=qe(e,["active","final"]),s=l.current+h,u=r.size();return i="final"===a?Ie(t,o)(e,n):null,new Ue(s,u,"final"===a,i)}),g);return A.headers=p,A.body=m.uploadData(),A.progressCallback=u||null,A.errorHandler=ke(e),A}var ze=function(e,t,n){if(te(e)||$(t)||$(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},He=function(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o};function Ke(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(e,t,n,r){var i,o;return e===t?(i=e,o=1===e?"argument":"arguments"):(i="between "+e+" and "+t,o="arguments"),new s(_,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,e,n.length);for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(a){throw a instanceof Error?O(o,e,a.message):O(o,e,a)}}var Ye=function(e,t){var n=this;this.validator=function(t){n.optional&&!ee(t)||e(t)},this.optional=!!t};function Qe(e,t){function n(e){if(!ie(e))throw"Expected string."}var r,i,o;return e?(i=n,o=e,r=function(e){i(e),o(e)}):r=n,new Ye(r,t)}function Xe(){return new Ye((function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||ue()&&e instanceof Blob))throw"Expected Blob or File."}))}function Je(e){return new Ye(Me,e)}function Ze(e){return new Ye(Ce,e)}function $e(){return new Ye((function(e){if(!(ae(e)&&e>=0))throw"Expected a number 0 or greater."}))}function et(e,t){return new Ye((function(t){if(!(null===t||$(t)&&t instanceof Object))throw"Expected an Object.";void 0!==e&&null!==e&&e(t)}),t)}function tt(e){return new Ye((function(e){if(!(null===e||te(e)))throw"Expected a Function."}),e)}function nt(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var rt=function(){function e(e,t,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.service_=t,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=W,this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals(p)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_(X))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals(p)?a.completeTransitions_():(a.error_=e,a.transition_(X))},this.promise_=new Promise((function(e,t){a.resolve_=e,a.reject_=t,a.start_()})),this.promise_.then(null,(function(){}))}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n){return e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===W&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.service_.getAuthToken().then((function(n){switch(t.state_){case W:e(n);break;case Y:t.transition_(Q);break;case z:t.transition_(H)}}))},e.prototype.createResumable_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=Ge(t,r,i),s={name:a.fullPath},u=ve(o),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},c=Te(a,n),h=e.maxUploadRetryTime,f=new Re(u,"POST",(function(e){var t;qe(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Oe(!1)}return Oe(ie(t)),t}),h);return f.urlParams=s,f.headers=l,f.body=c,f.errorHandler=ke(t),f}(e.service_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.service_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_((function(n){var r=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new Re(n,"POST",(function(e){var t=qe(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Oe(!1)}n||Oe(!1);var i=Number(n);return Oe(!isNaN(i)),new Ue(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=ke(t),o}(e.service_,e.location_,t,e.blob_),i=e.service_.makeRequest(r,n);e.request_=i,i.getPromise().then((function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new Ue(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=We(e.location_,e.service_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(s){return e.error_=s,void e.transition_(X)}var a=e.service_.makeRequest(o,i);e.request_=a,a.getPromise().then((function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(K)):e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_((function(t){var n=De(e.service_,e.location_,e.mappings_),r=e.service_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.transition_(K)}),e.metadataErrorHandler_)}))},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=Ge(t,r,i),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Te(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",c="\r\n--"+s+"--",h=de.getBlob(l,r,c);if(null===h)throw C();var f={name:u.fullPath},d=ve(o),p=e.maxUploadRetryTime,m=new Re(d,"POST",Ie(e,n),p);return m.urlParams=f,m.headers=a,m.body=h.uploadData(),m.errorHandler=ke(t),m}(e.service_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.service_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(K)}),e.errorHandler_)}))},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case Y:case z:this.state_=e,null!==this.request_&&this.request_.cancel();break;case W:var t=this.state_===H;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case H:this.state_=e,this.notifyObservers_();break;case Q:this.error_=L(),this.state_=e,this.notifyObservers_();break;case X:case K:this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case z:this.transition_(H);break;case Y:this.transition_(Q);break;case W:this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=Z(this.state_);return new He(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){function i(){if(e!==q.STATE_CHANGED)throw"Expected one of the event types: ["+q.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=tt(!0).validator,s=et(null,!0).validator;function u(e){try{return void a(e)}catch(t){}try{if(s(e),!(ee(e.next)||ee(e.error)||ee(e.complete)))throw"";return}catch(t){throw o}}var l=[Qe(i),et(u,!0),tt(!0),tt(!0)];Ke("on",l,arguments);var c=this;function h(e){return function(t,n,i){null!==e&&Ke("on",e,arguments);var o=new ze(t,n,r);return c.addObserver_(o),function(){c.removeObserver_(o)}}}function f(e){if(null===e)throw o;u(e)}var d=[et(f),tt(!0),tt(!0)],p=!(ee(t)||ee(n)||ee(r));return p?h(d):h(null)(t,n,r)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach((function(t){e.notifyObserver_(t)}))},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(Z(this.state_)){case J.SUCCESS:nt(this.resolve_.bind(null,this.snapshot))();break;case J.CANCELED:case J.ERROR:nt(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(Z(this.state_)){case J.RUNNING:case J.PAUSED:e.next&&nt(e.next.bind(e,this.snapshot))();break;case J.SUCCESS:e.complete&&nt(e.complete.bind(e))();break;case J.CANCELED:case J.ERROR:e.error&&nt(e.error.bind(e,this.error_))();break;default:e.error&&nt(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){Ke("resume",[],arguments);var e=this.state_===H||this.state_===z;return e&&this.transition_(W),e},e.prototype.pause=function(){Ke("pause",[],arguments);var e=this.state_===W;return e&&this.transition_(z),e},e.prototype.cancel=function(){Ke("cancel",[],arguments);var e=this.state_===W||this.state_===z;return e&&this.transition_(Y),e},e}(),it=function(){function e(e,t){this.service=e,this.location=t instanceof pe?t:pe.makeFromUrl(t)}return e.prototype.toString=function(){return Ke("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return Ee()},e.prototype.child=function(e){Ke("child",[Qe()],arguments);var t=ge(this.location.path,e),n=new pe(this.location.bucket,t);return this.newRef(this.service,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new pe(this.location.bucket,e);return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new pe(this.location.bucket,"");return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Ae(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),Ke("put",[Xe(),Je(!0)],arguments),this.throwIfRoot_("put"),new rt(this,this.service,this.location,this.mappings(),new de(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=N.RAW),Ke("putString",[Qe(),Qe(D,!0),Je(!0)],arguments),this.throwIfRoot_("putString");var r=j(t,e),i=Object.assign({},n);return!$(i.contentType)&&$(r.contentType)&&(i.contentType=r.contentType),new rt(this,this.service,this.location,this.mappings(),new de(r.data,!0),i)},e.prototype.delete=function(){var e=this;return Ke("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(t){var n=Ve(e.service,e.location);return e.service.makeRequest(n,t).getPromise()}))},e.prototype.listAll=function(){Ke("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then((function(){return e}))},e.prototype.listAllHelper=function(e,t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return n={pageToken:t},[4,this.list(n)];case 1:return r=o.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(a=e.items).push.apply(a,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(e,r.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},e.prototype.list=function(e){Ke("list",[Ze(!0)],arguments);var t=this;return this.service.getAuthToken().then((function(n){var r=e||{},i=Fe(t.service,t.location,"/",r.pageToken,r.maxResults);return t.service.makeRequest(i,n).getPromise()}))},e.prototype.getMetadata=function(){var e=this;return Ke("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(t){var n=De(e.service,e.location,e.mappings());return e.service.makeRequest(n,t).getPromise()}))},e.prototype.updateMetadata=function(e){var t=this;return Ke("updateMetadata",[Je()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(n){var r=Be(t.service,t.location,e,t.mappings());return t.service.makeRequest(r,n).getPromise()}))},e.prototype.getDownloadURL=function(){var e=this;return Ke("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(t){var n=je(e.service,e.location,e.mappings());return e.service.makeRequest(n,t).getPromise().then((function(e){if(null===e)throw R();return e}))}))},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new s(E,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},e}(),ot=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();var at=function(){function e(e,t,n,r,i,o,a,s,u,l,c){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=u,this.pool_=c,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.xhr;if(n.wasSuccessCode)try{var u=e.callback_(a,a.getResponseText());ee(u)?i(u):i()}catch(l){o(l)}else null!==a?((r=M()).setServerResponseProp(a.getResponseText()),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?I():L()):o(r=new s(d,"Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new st(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=!1,s=0;function u(){return 2===s}var l=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];l||(l=!0,t.apply(null,e))}function h(t){i=setTimeout((function(){i=null,e(f,u())}),t)}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!l)if(e)c.call.apply(c,Object(o.__spreadArrays)([null,e],t));else{var i,f=u()||a;if(f)c.call.apply(c,Object(o.__spreadArrays)([null,e],t));else r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),h(i)}}var d=!1;function p(e){d||(d=!0,l||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),setTimeout((function(){a=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new st(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===U.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new st(a,n))}else{var s=n.getErrorCode()===U.ABORT;t(!1,new st(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),st=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function ut(e,t,n,r){var o=ye(e.urlParams),a=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e){var t="undefined"!==typeof i.a?i.a.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}(s),new at(a,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}var lt=function(){function e(t,n,r,i){var o;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,this.authProvider_=n,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=r,this.bucket_=null!=i?pe.makeFromBucketSpec(i):e.extractBucket_(null===(o=this.app_)||void 0===o?void 0:o.options),this.internals_=new ct(this)}return e.extractBucket_=function(e){var t=null===e||void 0===e?void 0:e.storageBucket;return null==t?null:pe.makeFromBucketSpec(t)},e.prototype.getAuthToken=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return(e=this.authProvider_.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(e){return e.cancel()})),this.requests_.clear()},e.prototype.makeStorageReference=function(e){return new it(this,e)},e.prototype.makeRequest=function(e,t){var n=this;if(this.deleted_)return new ot(I());var r=ut(e,this.appId_,t,this.pool_);return this.requests_.add(r),r.getPromise().then((function(){return n.requests_.delete(r)}),(function(){return n.requests_.delete(r)})),r},e.prototype.ref=function(e){function t(e){if("string"!==typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(Ke("ref",[Qe(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new it(this,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if("string"!==typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{pe.makeFromUrl(e)}catch(t){throw"Expected valid full URL but got an invalid one."}}return Ke("refFromURL",[Qe(t,!1)],arguments),new it(this,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){Ke("setMaxUploadRetryTime",[$e()],arguments),this.maxUploadRetryTime_=e},Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),e.prototype.setMaxOperationRetryTime=function(e){Ke("setMaxOperationRetryTime",[$e()],arguments),this.maxOperationRetryTime_=e},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),e}(),ct=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},e}();function ht(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal");return new lt(n,r,new ce,t)}function ft(e){var t={TaskState:J,TaskEvent:q,StringFormat:N,Storage:lt,Reference:it};e.INTERNAL.registerComponent(new a.Component("storage",ht,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.3.43")}ft(i.a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23);n(57);var i=n(4),o=n(19),a=n(40),s=n(26);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l,c,h,f=u(r),d=((l={})["trace started"]="Trace {$traceName} was started before.",l["trace stopped"]="Trace {$traceName} is not running.",l["no window"]="Window is not available.",l["no app id"]="App id is not available.",l["no project id"]="Project id is not available.",l["no api key"]="Api key is not available.",l["invalid cc log"]="Attempted to queue invalid cc event",l["FB not default"]="Performance can only start when Firebase app instance is the default one.",l["RC response not ok"]="RC response is not ok",l["invalid attribute name"]="Attribute name {$attributeName} is invalid.",l["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",l["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",l["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",l),p=new o.ErrorFactory("performance","Performance",d),m=new a.Logger("Performance");m.logLevel=a.LogLevel.INFO;var g,A=function(){function e(e){if(this.window=e,!e)throw p.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!o.isIndexedDBAvailable()||(m.info("IndexedDB is not supported by current browswer"),!1):(m.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}})).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===c&&(c=new e(h)),c},e}();function v(e,t){var n=e.length-t.length;if(n<0||n>1)throw p.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var y,b,_=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=v("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=v("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw p.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw p.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw p.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===g&&(g=new e),g},e}();function w(){return y}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(b||(b={}));var E=["firebase_","google_","ga_"],x=new RegExp("^[a-zA-Z]\\w*$");function S(){var e=A.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function T(){switch(A.getInstance().document.visibilityState){case"visible":return b.VISIBLE;case"hidden":return b.HIDDEN;default:return b.UNKNOWN}}function M(){var e=A.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var L=!0;function C(e){var t=function(){var e=A.getInstance().localStorage;if(!e)return;var t=e.getItem("@firebase/performance/configexpire");if(!t||(n=t,!(Number(n)>Date.now())))return;var n;var r=e.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(l){return}}();return t?(R(t),Promise.resolve()):function(e){return function(){var e=_.getInstance().installationsService.getToken();return e.then((function(e){})),e}().then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+_.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+_.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:_.getInstance().getAppId(),app_version:"0.4.1",sdk_version:"0.0.1"})});return fetch(r).then((function(e){if(e.ok)return e.json();throw p.create("RC response not ok")}))})).catch((function(){m.info("Could not fetch config, will use default configs")}))}(e).then(R).then((function(e){return function(e){var t=A.getInstance().localStorage;if(!e||!t)return;t.setItem("@firebase/performance/config",JSON.stringify(e)),t.setItem("@firebase/performance/configexpire",String(Date.now()+60*_.getInstance().configTimeToLive*60*1e3))}(e)}),(function(){}))}function R(e){if(!e)return e;var t=_.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=L,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=O(t.tracesSamplingRate),t.logNetworkAfterSampling=O(t.networkRequestsSamplingRate),e}function O(e){return Math.random()<=e}var I,P=1;function k(){return P=2,I=I||function(){var e=A.getInstance().document;return new Promise((function(t){e&&"complete"!==e.readyState?e.addEventListener("readystatechange",(function n(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())})):t()}))}().then((function(){return function(){var e=_.getInstance().installationsService.getId();return e.then((function(e){y=e})),e}()})).then((function(e){return C(e)})).then((function(){return N()}),(function(){return N()}))}function N(){P=3}var D,F=3,j=[],B=!1;function V(e){setTimeout((function(){if(0!==F)return j.length?void function(){var e=i.__spreadArrays(j);j=[];var t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}));(function(e,t){return function(e){var t=_.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||m.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var o=e.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(j=i.__spreadArrays(t,j),m.info("Retry transport request later.")),F=3,V(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:_.getInstance().logSource,log_event:t},e).catch((function(){j=i.__spreadArrays(e,j),F--,m.info("Tries left: "+F+"."),V(1e4)}))}():V(1e4)}),e)}function G(e){if(!e.eventTime||!e.message)throw p.create("invalid cc log");j=i.__spreadArrays(j,[e])}function U(e,t){D||(D=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);G({message:r,eventTime:Date.now()})}}(z)),D(e,t)}function q(e){var t=_.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&A.getInstance().requiredApisAvailable()&&(e.isAuto&&T()!==b.VISIBLE||t.loggingEnabled&&t.logTraceAfterSampling&&(3===P?W(e):k().then((function(){return W(e)}),(function(){return W(e)}))))}function W(e){w()&&setTimeout((function(){return U(e,1)}),0)}function z(e,t){return 0===t?function(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:H(),network_request_metric:t};return JSON.stringify(n)}(e):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:H(),trace_metric:t};return JSON.stringify(r)}(e)}function H(){return{google_app_id:_.getInstance().getAppId(),app_instance_id:w(),web_app_info:{sdk_version:"0.4.1",page_url:A.getInstance().getUrl(),service_worker_status:S(),visibility_state:T(),effective_connection_type:M()},application_process_state:0}}var K=["_fp","_fcp","_fid"];var Y=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=A.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw p.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw p.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),q(this)},e.prototype.record=function(e,t,n){if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=i.__assign({},n.attributes)),n&&n.metrics)for(var r=0,o=Object.keys(n.metrics);r<o.length;r++){var a=o[r];isNaN(Number(n.metrics[a]))||(this.counters[a]=Number(Math.floor(n.metrics[a])))}q(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(!function(e,t){return!(0===e.length||e.length>100)&&(t&&t.startsWith("_wt_")&&K.indexOf(e)>-1||!e.startsWith("_"))}(e,this.name))throw p.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function(e){var t=Math.floor(e);return t<e&&m.info("Metric value should be an Integer, setting the value as : "+t+"."),t}(t)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n=function(e){return!(0===e.length||e.length>40)&&(!E.some((function(t){return e.startsWith(t)}))&&!!e.match(x))}(e),r=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw p.create("invalid attribute name",{attributeName:e});if(!r)throw p.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return i.__assign({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=A.getInstance().getUrl();if(i){var o=new e("_wt_"+i,!0),a=Math.floor(1e3*A.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){var s=n.find((function(e){return"first-paint"===e.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(e){return"first-contentful-paint"===e.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}q(o)}},e.createUserTimingTrace=function(t){q(new e(t,!1,t))},e}();function Q(e){var t=e;if(t&&void 0!==t.responseStart){var n=A.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=_.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return U(e,0)}),0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function X(){w()&&(setTimeout((function(){return function(){var e=A.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){Y.createOobTrace(t,n),r=void 0}),5e3);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),Y.createOobTrace(t,n,e))}))}else Y.createOobTrace(t,n)}()}),0),setTimeout((function(){return function(){for(var e=A.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){Q(r[n])}e.setupObserver("resource",Q)}()}),0),setTimeout((function(){return function(){for(var e=A.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){J(r[n])}e.setupObserver("measure",J)}()}),0))}function J(e){var t=e.name;"FB-PERF-TRACE-MEASURE"!==t.substring(0,"FB-PERF-TRACE-MEASURE".length)&&Y.createUserTimingTrace(t)}var Z=function(){function e(e){this.app=e,A.getInstance().requiredApisAvailable()&&o.validateIndexedDBOpenable().then((function(e){e&&(B||(V(5500),B=!0),k().then(X,X))})).catch((function(e){m.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new Y(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return _.getInstance().instrumentationEnabled},set:function(e){_.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return _.getInstance().dataCollectionEnabled},set:function(e){_.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}();function $(e){var t=function(e,t){if("[DEFAULT]"!==e.name)throw p.create("FB not default");if("undefined"===typeof window)throw p.create("no window");return function(e){h=e}(window),_.getInstance().firebaseAppInstance=e,_.getInstance().installationsService=t,new Z(e)};e.INTERNAL.registerComponent(new s.Component("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion("@firebase/performance","0.4.1")}$(f.default),t.registerPerformance=$},function(e,t,n){"use strict";n.r(t),n.d(t,"factory",(function(){return F})),n.d(t,"getGlobalVars",(function(){return N})),n.d(t,"registerAnalytics",(function(){return j})),n.d(t,"resetGlobalVars",(function(){return k})),n.d(t,"settings",(function(){return D}));var r,i,o=n(4),a=n(23),s=n.n(a),u=(n(57),n(40)),l=n(19),c=n(26),h="https://www.googletagmanager.com/gtag/js";!function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(r||(r={})),function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(i||(i={}));var f,d=new u.Logger("@firebase/analytics");function p(e,t,n,i,a,s){return Object(o.__awaiter)(this,void 0,void 0,(function(){var u,l,c,h;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:u=i[a],o.label=1;case 1:return o.trys.push([1,7,,8]),u?[4,t[u]]:[3,3];case 2:return o.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return l=o.sent(),(c=l.find((function(e){return e.measurementId===a})))?[4,t[c.appId]]:[3,6];case 5:o.sent(),o.label=6;case 6:return[3,8];case 7:return h=o.sent(),d.error(h),[3,8];case 8:return e(r.CONFIG,a,s),[2]}}))}))}function m(e,t,n,i,a){return Object(o.__awaiter)(this,void 0,void 0,(function(){var s,u,l,c,h,f,p,m;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),s=[],a&&a.send_to?(u=a.send_to,Array.isArray(u)||(u=[u]),[4,Promise.all(n)]):[3,2];case 1:for(l=o.sent(),c=function(e){var n=l.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return s=[],"break";s.push(r)},h=0,f=u;h<f.length&&(p=f[h],"break"!==c(p));h++);o.label=2;case 2:return 0===s.length&&(s=Object.values(t)),[4,Promise.all(s)];case 3:return o.sent(),e(r.EVENT,i,a||{}),[3,5];case 4:return m=o.sent(),d.error(m),[3,5];case 5:return[2]}}))}))}function g(e,t,n,i,a){var s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[i].push(arguments)};return window[a]&&"function"===typeof window[a]&&(s=window[a]),window[a]=function(e,t,n,i){return function(a,s,u){return Object(o.__awaiter)(this,void 0,void 0,(function(){var l;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),a!==r.EVENT?[3,2]:[4,m(e,t,n,s,u)];case 1:return o.sent(),[3,5];case 2:return a!==r.CONFIG?[3,4]:[4,p(e,t,n,i,s,u)];case 3:return o.sent(),[3,5];case 4:e(r.SET,s),o.label=5;case 5:return[3,7];case 6:return l=o.sent(),d.error(l),[3,7];case 7:return[2]}}))}))}}(s,e,t,n),{gtagCore:s,wrappedGtag:window[a]}}var A=((f={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",f["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",f["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",f["indexedDB-unsupported"]="IndexedDB is not supported by current browswer",f["invalid-indexedDB-context"]="Environment doesn't support IndexedDB: {$errorInfo}. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments",f["cookies-not-enabled"]="Cookies are not enabled in this browser environment. Analytics requires cookies to be enabled.",f["invalid-analytics-context"]="Firebase Analytics is not supported in browser extensions.",f["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",f["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",f["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',f["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',f["indexedDB-unsupported"]="IndexedDB is not supported by current browswer",f["invalid-indexedDB-context"]="Environment doesn't support IndexedDB: {$errorInfo}. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments",f["cookies-not-enabled"]="Cookies are not enabled in this browser environment. Analytics requires cookies to be enabled.",f),v=new l.ErrorFactory("analytics","Analytics",A),y=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}());function b(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function _(e){var t;return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u,l;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:b(r)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(a,i)];case 1:if(200===(s=o.sent()).status||304===s.status)return[3,6];u="",o.label=2;case 2:return o.trys.push([2,4,,5]),[4,s.json()];case 3:return l=o.sent(),(null===(t=l.error)||void 0===t?void 0:t.message)&&(u=l.error.message),[3,5];case 4:return o.sent(),[3,5];case 5:throw v.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 6:return[2,s.json()]}}))}))}function w(e,t,n,r){var i=t.throttleEndTimeMillis,a=t.backoffCount;return void 0===r&&(r=y),Object(o.__awaiter)(this,void 0,void 0,(function(){var t,s,u,c,h,f,p;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:t=e.appId,s=e.measurementId,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,E(n,i)];case 2:return o.sent(),[3,4];case 3:if(u=o.sent(),s)return d.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:t,measurementId:s}];throw u;case 4:return o.trys.push([4,6,,7]),[4,_(e)];case 5:return c=o.sent(),r.deleteThrottleMetadata(t),[2,c];case 6:if(!function(e){if(!(e instanceof l.FirebaseError))return!1;var t=Number(e.httpStatus);return 429===t||500===t||503===t||504===t}(h=o.sent())){if(r.deleteThrottleMetadata(t),s)return d.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+h.message+"]"),[2,{appId:t,measurementId:s}];throw h}return f=503===Number(h.httpStatus)?Object(l.calculateBackoffMillis)(a,r.intervalMillis,30):Object(l.calculateBackoffMillis)(a,r.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:a+1},r.setThrottleMetadata(t,p),d.debug("Calling attemptFetch again in "+f+" millis"),[2,w(e,p,n,r)];case 7:return[2]}}))}))}function E(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(v.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var x=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();function S(e,t,n,i,a){return Object(o.__awaiter)(this,void 0,void 0,(function(){var s,u,l,c,h;return Object(o.__generator)(this,(function(f){switch(f.label){case 0:return(s=function(e,t,n){return void 0===t&&(t=y),Object(o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s,u,l,c=this;return Object(o.__generator)(this,(function(h){if(r=e.options,i=r.appId,a=r.apiKey,s=r.measurementId,!i)throw v.create("no-app-id");if(!a){if(s)return[2,{measurementId:s,appId:i}];throw v.create("no-api-key")}return u=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new x,setTimeout((function(){return Object(o.__awaiter)(c,void 0,void 0,(function(){return Object(o.__generator)(this,(function(e){return l.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,w({appId:i,apiKey:a,measurementId:s},u,l,t)]}))}))}(e)).then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&d.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return d.error(e)})),t.push(s),[4,Promise.all([s,i.getId()])];case 1:return u=f.sent(),l=u[0],c=u[1],a("js",new Date),a(r.CONFIG,l.measurementId,((h={}).firebase_id=c,h.origin="firebase",h.update=!0,h)),[2,l.measurementId]}}))}))}var T,M,L={},C=[],R={},O="dataLayer",I="gtag",P=!1;function k(e,t,n){void 0===e&&(e=!1),void 0===t&&(t={}),void 0===n&&(n=[]),P=e,L=t,C=n,O="dataLayer",I="gtag"}function N(){return{initializationPromisesMap:L,dynamicConfigPromisesList:C}}function D(e){if(P)throw v.create("already-initialized");e.dataLayerName&&(O=e.dataLayerName),e.gtagName&&(I=e.gtagName)}function F(e,t){if(Object(l.isBrowserExtension)())throw v.create("invalid-analytics-context");if(!Object(l.areCookiesEnabled)())throw v.create("cookies-not-enabled");if(!Object(l.isIndexedDBAvailable)())throw v.create("indexedDB-unsupported");Object(l.validateIndexedDBOpenable)().catch((function(e){var t=v.create("invalid-indexedDB-context",{errorInfo:e});d.warn(t.message)}));var n=e.options.appId;if(!n)throw v.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw v.create("no-api-key");d.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=L[n])throw v.create("already-exists",{id:n});if(!P){(function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(h))return r}return null})()||function(e){var t=document.createElement("script");t.src=h+"?l="+e,t.async=!0,document.head.appendChild(t)}(O),function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(O);var i=g(L,C,R,O,I),a=i.wrappedGtag,s=i.gtagCore;M=a,T=s,P=!0}return L[n]=S(e,C,R,t,T),{app:e,logEvent:function(e,t,i){(function(e,t,n,i,a){return Object(o.__awaiter)(this,void 0,void 0,(function(){var s,u;return Object(o.__generator)(this,(function(l){switch(l.label){case 0:return a&&a.global?(e(r.EVENT,n,i),[2]):[3,1];case 1:return[4,t];case 2:s=l.sent(),u=Object(o.__assign)(Object(o.__assign)({},i),{send_to:s}),e(r.EVENT,n,u),l.label=3;case 3:return[2]}}))}))})(M,L[n],e,t,i).catch((function(e){return d.error(e)}))},setCurrentScreen:function(e,t){(function(e,t,n,i){return Object(o.__awaiter)(this,void 0,void 0,(function(){var a;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return i&&i.global?(e(r.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:a=o.sent(),e(r.CONFIG,a,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(M,L[n],e,t).catch((function(e){return d.error(e)}))},setUserId:function(e,t){(function(e,t,n,i){return Object(o.__awaiter)(this,void 0,void 0,(function(){var a;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return i&&i.global?(e(r.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:a=o.sent(),e(r.CONFIG,a,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(M,L[n],e,t).catch((function(e){return d.error(e)}))},setUserProperties:function(e,t){(function(e,t,n,i){return Object(o.__awaiter)(this,void 0,void 0,(function(){var a,s,u,l,c;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:if(!i||!i.global)return[3,1];for(a={},s=0,u=Object.keys(n);s<u.length;s++)l=u[s],a["user_properties."+l]=n[l];return e(r.SET,a),[2,Promise.resolve()];case 1:return[4,t];case 2:c=o.sent(),e(r.CONFIG,c,{update:!0,user_properties:n}),o.label=3;case 3:return[2]}}))}))})(M,L[n],e,t).catch((function(e){return d.error(e)}))},setAnalyticsCollectionEnabled:function(e){(function(e,t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n;return Object(o.__generator)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))})(L[n],e).catch((function(e){return d.error(e)}))},INTERNAL:{delete:function(){return delete L[n],Promise.resolve()}}}}function j(e){e.INTERNAL.registerComponent(new c.Component("analytics",(function(e){return F(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:D,EventName:i,isSupported:B})),e.INTERNAL.registerComponent(new c.Component("analytics-internal",(function(e){try{return{logEvent:e.getProvider("analytics").getImmediate().logEvent}}catch(t){throw v.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),e.registerVersion("@firebase/analytics","0.5.0")}function B(){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(e){switch(e.label){case 0:if(Object(l.isBrowserExtension)())return[2,!1];if(!Object(l.areCookiesEnabled)())return[2,!1];if(!Object(l.isIndexedDBAvailable)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Object(l.validateIndexedDBOpenable)()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}j(s.a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23);n(57);var i=n(4),o=n(19),a=n(40),s=n(26);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l,c=u(r),h=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=i.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return o=i.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===o.status&&a.push(this.storage.setLastSuccessfulFetchResponse(o)),[4,Promise.all(a)];case 3:return i.sent(),[2,o]}}))}))},e}(),f=((l={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",l["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",l["registration-api-key"]="Undefined API key. Check Firebase app initialization.",l["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",l["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",l["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",l["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",l["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",l["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",l["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',l["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',l["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",l["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",l),d=new o.ErrorFactory("remoteconfig","Remote Config",f);var p=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,o,a,s,u,l,c,h,f,p,m,g,A,v,y,b,_;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=i.sent(),n=t[0],r=t[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},l={method:"POST",headers:s,body:JSON.stringify(u)},c=fetch(a,l),h=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),i.label=2;case 2:return i.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return i.sent(),[4,c];case 4:return f=i.sent(),[3,6];case 5:throw p=i.sent(),m="fetch-client-network","AbortError"===p.name&&(m="fetch-timeout"),d.create(m,{originalErrorMessage:p.message});case 6:if(g=f.status,A=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,i.label=7;case 7:return i.trys.push([7,9,,10]),[4,f.json()];case 8:return b=i.sent(),[3,10];case 9:throw _=i.sent(),d.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:v=b.entries,y=b.state,i.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?g=500:"NO_CHANGE"===y?g=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(v={}),304!==g&&200!==g)throw d.create("fetch-status",{httpStatus:g});return[2,{status:g,eTag:A,config:v}]}var w}))}))},e}(),m=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),g=["1","true","t","yes","y","on"],A=function(){function e(e,t){void 0===t&&(t=""),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&g.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),v=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=a.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=a.LogLevel.SILENT;break;default:this._logger.logLevel=a.LogLevel.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,n;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,n,r=this;return i.__generator(this,(function(a){switch(a.label){case 0:e=new m,setTimeout((function(){return i.__awaiter(r,void 0,void 0,(function(){return i.__generator(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return a.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return a.sent(),[3,6];case 4:return t=a.sent(),u="fetch-throttle",n=(s=t)instanceof o.FirebaseError&&-1!==s.code.indexOf(u)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw a.sent(),t;case 6:return[2]}var s,u}))}))},e.prototype.fetchAndActivate=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return function(e,t){void 0===e&&(e={});void 0===t&&(t={});return Object.keys(i.__assign(i.__assign({},e),t))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new A("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new A("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new A("static"))},e}();function y(e,t){var n=e.target.error||void 0;return d.create(t,{originalErrorMessage:n&&n.message})}var b=function(){function e(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(y(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(y(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(u){i(d.create("storage-get",{originalErrorMessage:u&&u.message}))}}))]}}))}))},e.prototype.set=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(y(e,"storage-set"))},u.onsuccess=function(){i()}}catch(l){o(d.create("storage-set",{originalErrorMessage:l&&l.message}))}}))]}}))}))},e.prototype.delete=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(y(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(u){i(d.create("storage-delete",{originalErrorMessage:u&&u.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),_=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=i.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(o=i.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,n];case 3:return(a=i.sent())&&(this.activeConfig=a),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();function w(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(d.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var E=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return i.__awaiter(this,void 0,void 0,(function(){var t,a,s;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,w(e.signal,n)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=i.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return i.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof o.FirebaseError))return!1;var t=Number(e.httpStatus);return 429===t||500===t||503===t||504===t}(a=i.sent()))throw a;return s={throttleEndTimeMillis:Date.now()+o.calculateBackoffMillis(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(s)];case 6:return i.sent(),[2,this.attemptFetch(e,s)];case 7:return[2]}}))}))},e}(),x="@firebase/remote-config";function S(e){e.INTERNAL.registerComponent(new s.Component("remoteConfig",(function(t,n){var r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"===typeof window)throw d.create("registration-window");var o=r.options,s=o.projectId,u=o.apiKey,l=o.appId;if(!s)throw d.create("registration-project-id");if(!u)throw d.create("registration-api-key");if(!l)throw d.create("registration-app-id");n=n||"firebase";var c=new b(l,r.name,n),f=new _(c),m=new a.Logger(x);m.logLevel=a.LogLevel.ERROR;var g=new p(i,e.SDK_VERSION,n,s,u,l),A=new E(g,c),y=new h(A,c,f,m),w=new v(r,y,f,c,m);return w.ensureInitialized(),w}),"PUBLIC").setMultipleInstances(!0)),e.registerVersion(x,"0.1.28")}S(c.default),t.registerRemoteConfig=S},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(T){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return S()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=u;var c={};function h(){}function f(){}function d(){}var p={};p[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(x([])));g&&g!==t&&n.call(g,i)&&(p=g);var A=d.prototype=h.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=A.constructor=d,d.constructor=f,f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},v(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new y(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(A),s(A,a,"Generator"),A[i]=function(){return this},A.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t),n.d(t,"constants",(function(){return p})),n.d(t,"propagate",(function(){return T})),n.d(t,"sgp4",(function(){return w})),n.d(t,"twoline2satrec",(function(){return x})),n.d(t,"gstime",(function(){return _})),n.d(t,"jday",(function(){return A})),n.d(t,"invjday",(function(){return v})),n.d(t,"dopplerFactor",(function(){return M})),n.d(t,"radiansToDegrees",(function(){return L})),n.d(t,"degreesToRadians",(function(){return C})),n.d(t,"degreesLat",(function(){return R})),n.d(t,"degreesLong",(function(){return O})),n.d(t,"radiansLat",(function(){return I})),n.d(t,"radiansLong",(function(){return P})),n.d(t,"geodeticToEcf",(function(){return k})),n.d(t,"eciToGeodetic",(function(){return N})),n.d(t,"eciToEcf",(function(){return F})),n.d(t,"ecfToEci",(function(){return D})),n.d(t,"ecfToLookAngles",(function(){return j}));var r=Math.PI,i=2*r,o=r/180,a=180/r,s=60/Math.sqrt(650944.0944816993),u=6378.137*s/60,l=1/s,c=.00108262998905,h=-253215306e-14,f=-161098761e-14,d=h/c,p=Object.freeze({pi:r,twoPi:i,deg2rad:o,rad2deg:a,minutesPerDay:1440,mu:398600.5,earthRadius:6378.137,xke:s,vkmpersec:u,tumin:l,j2:c,j3:h,j4:f,j3oj2:d,x2o3:2/3});function m(e,t){for(var n=[31,e%4===0?29:28,31,30,31,30,31,31,30,31,30,31],r=Math.floor(t),i=1,o=0;r>o+n[i-1]&&i<12;)o+=n[i-1],i+=1;var a=i,s=r-o,u=24*(t-r),l=Math.floor(u);u=60*(u-l);var c=Math.floor(u);return{mon:a,day:s,hr:l,minute:c,sec:60*(u-c)}}function g(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return 367*e-Math.floor(7*(e+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+n+1721013.5+((a/6e4+o/60+i)/60+r)/24}function A(e,t,n,r,i,o,a){if(e instanceof Date){var s=e;return g(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds())}return g(e,t,n,r,i,o,a)}function v(e,t){var n=e-2415019.5,r=n/365.25,i=1900+Math.floor(r),o=Math.floor(.25*(i-1901)),a=n-(365*(i-1900)+o)+1e-11;a<1&&(a=n-(365*((i-=1)-1900)+(o=Math.floor(.25*(i-1901)))));var s=m(i,a),u=s.mon,l=s.day,c=s.hr,h=s.minute,f=s.sec-864e-9;return t?[i,u,l,c,h,Math.floor(f)]:new Date(Date.UTC(i,u-1,l,c,h,Math.floor(f)))}function y(e,t){var n,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w=e.e3,E=e.ee2,x=e.peo,S=e.pgho,T=e.pho,M=e.pinco,L=e.plo,C=e.se2,R=e.se3,O=e.sgh2,I=e.sgh3,P=e.sgh4,k=e.sh2,N=e.sh3,D=e.si2,F=e.si3,j=e.sl2,B=e.sl3,V=e.sl4,G=e.t,U=e.xgh2,q=e.xgh3,W=e.xgh4,z=e.xh2,H=e.xh3,K=e.xi2,Y=e.xi3,Q=e.xl2,X=e.xl3,J=e.xl4,Z=e.zmol,$=e.zmos,ee=t.init,te=t.opsmode,ne=t.ep,re=t.inclp,ie=t.nodep,oe=t.argpp,ae=t.mp;_=$+119459e-10*G,"y"===ee&&(_=$),b=_+.0335*Math.sin(_);var se=C*(c=.5*(A=Math.sin(b))*A-.25)+R*(h=-.5*A*Math.cos(b)),ue=D*c+F*h,le=j*c+B*h+V*A,ce=O*c+I*h+P*A,he=k*c+N*h;return _=Z+.00015835218*G,"y"===ee&&(_=Z),b=_+.1098*Math.sin(_),f=se+(E*(c=.5*(A=Math.sin(b))*A-.25)+w*(h=-.5*A*Math.cos(b))),m=ue+(K*c+Y*h),g=le+(Q*c+X*h+J*A),d=ce+(U*c+q*h+W*A),p=he+(z*c+H*h),"n"===ee&&(g-=L,d-=S,p-=T,re+=m-=M,ne+=f-=x,s=Math.sin(re),a=Math.cos(re),re>=.2?(oe+=d-=a*(p/=s),ie+=p,ae+=g):(n=s*(l=Math.sin(ie)),o=s*(u=Math.cos(ie)),n+=p*u+m*a*l,o+=-p*l+m*a*u,(ie%=i)<0&&"a"===te&&(ie+=i),v=ae+oe+a*ie,v+=g+d-m*ie*s,y=ie,(ie=Math.atan2(n,o))<0&&"a"===te&&(ie+=i),Math.abs(y-ie)>r&&(ie<y?ie+=i:ie-=i),oe=v-(ae+=g)-a*ie)),{ep:ne,inclp:re,nodep:ie,argpp:oe,mp:ae}}function b(e){var t=(e-2451545)/36525,n=-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841;return(n=n*o/240%i)<0&&(n+=i),n}function _(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?b(A.apply(void 0,arguments)):b.apply(void 0,arguments)}function w(e,t){var n,o,a,l,h,f,p,m,g,A,v,b,_,w,E,x,S,T,M,L,C,R,O,I,P,k;e.t=t,e.error=0;var N=e.mo+e.mdot*e.t,D=e.argpo+e.argpdot*e.t,F=e.nodeo+e.nodedot*e.t;m=D,L=N;var j=e.t*e.t;if(R=F+e.nodecf*j,x=1-e.cc1*e.t,S=e.bstar*e.cc4*e.t,T=e.t2cof*j,1!==e.isimp){f=e.omgcof*e.t;var B=1+e.eta*Math.cos(N);L=N+(E=f+e.xmcof*(B*B*B-e.delmo)),m=D-E,b=(v=j*e.t)*e.t,x=x-e.d2*j-e.d3*v-e.d4*b,S+=e.bstar*e.cc5*(Math.sin(L)-e.sinmao),T=T+e.t3cof*v+b*(e.t4cof+e.t*e.t5cof)}C=e.no;var V=e.ecco;if(M=e.inclo,"d"===e.method){_=e.t;var G=function(e){var t,n,r,o,a,s,u,l,c=e.irez,h=e.d2201,f=e.d2211,d=e.d3210,p=e.d3222,m=e.d4410,g=e.d4422,A=e.d5220,v=e.d5232,y=e.d5421,b=e.d5433,_=e.dedt,w=e.del1,E=e.del2,x=e.del3,S=e.didt,T=e.dmdt,M=e.dnodt,L=e.domdt,C=e.argpo,R=e.argpdot,O=e.t,I=e.tc,P=e.gsto,k=e.xfact,N=e.xlamo,D=e.no,F=e.atime,j=e.em,B=e.argpm,V=e.inclm,G=e.xli,U=e.mm,q=e.xni,W=e.nodem,z=e.nm,H=5.7686396,K=.95240898,Y=1.8014998,Q=1.050833,X=4.4108898,J=0,Z=0,$=(P+.0043752690880113*I)%i;if(j+=_*O,V+=S*O,B+=L*O,W+=M*O,U+=T*O,0!==c){(0===F||O*F<=0||Math.abs(O)<Math.abs(F))&&(F=0,q=D,G=N),t=O>0?720:-720;for(var ee=381;381===ee;)2!==c?(u=w*Math.sin(G-.13130908)+E*Math.sin(2*(G-2.8843198))+x*Math.sin(3*(G-.37448087)),a=q+k,s=w*Math.cos(G-.13130908)+2*E*Math.cos(2*(G-2.8843198))+3*x*Math.cos(3*(G-.37448087)),s*=a):(r=(l=C+R*F)+l,n=G+G,u=h*Math.sin(r+G-H)+f*Math.sin(G-H)+d*Math.sin(l+G-K)+p*Math.sin(-l+G-K)+m*Math.sin(r+n-Y)+g*Math.sin(n-Y)+A*Math.sin(l+G-Q)+v*Math.sin(-l+G-Q)+y*Math.sin(l+n-X)+b*Math.sin(-l+n-X),a=q+k,s=h*Math.cos(r+G-H)+f*Math.cos(G-H)+d*Math.cos(l+G-K)+p*Math.cos(-l+G-K)+A*Math.cos(l+G-Q)+v*Math.cos(-l+G-Q)+2*m*Math.cos(r+n-Y)+g*Math.cos(n-Y)+y*Math.cos(l+n-X)+b*Math.cos(-l+n-X),s*=a),Math.abs(O-F)>=720?ee=381:(Z=O-F,ee=0),381===ee&&(G+=a*t+259200*u,q+=u*t+259200*s,F+=t);z=q+u*Z+s*Z*Z*.5,o=G+a*Z+u*Z*Z*.5,1!==c?(U=o-2*W+2*$,J=z-D):(U=o-W-B+$,J=z-D),z=D+J}return{atime:F,em:j,argpm:B,inclm:V,xli:G,mm:U,xni:q,nodem:W,dndt:J,nm:z}}({irez:e.irez,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,del1:e.del1,del2:e.del2,del3:e.del3,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,argpo:e.argpo,argpdot:e.argpdot,t:e.t,tc:_,gsto:e.gsto,xfact:e.xfact,xlamo:e.xlamo,no:e.no,atime:e.atime,em:V,argpm:m,inclm:M,xli:e.xli,mm:L,xni:e.xni,nodem:R,nm:C});V=G.em,m=G.argpm,M=G.inclm,L=G.mm,R=G.nodem,C=G.nm}if(C<=0)return e.error=2,[!1,!1];var U=Math.pow(s/C,2/3)*x*x;if(C=s/Math.pow(U,1.5),(V-=S)>=1||V<-.001)return e.error=1,[!1,!1];V<1e-6&&(V=1e-6),I=(L+=e.no*T)+m+R;var q=V;if(O=M,g=m%=i,k=R%=i,P=L=((I%=i)-m-R)%i,l=Math.sin(M),a=Math.cos(M),"d"===e.method){var W=y(e,{inclo:e.inclo,init:"n",ep:q,inclp:O,nodep:k,argpp:g,mp:P,opsmode:e.operationmode});if(q=W.ep,k=W.nodep,g=W.argpp,P=W.mp,(O=W.inclp)<0&&(O=-O,k+=r,g-=r),q<0||q>1)return e.error=3,[!1,!1]}"d"===e.method&&(l=Math.sin(O),a=Math.cos(O),e.aycof=-.5*d*l,Math.abs(a+1)>15e-13?e.xlcof=-.25*d*l*(3+5*a)/(1+a):e.xlcof=-.25*d*l*(3+5*a)/15e-13);var z=q*Math.cos(g);E=1/(U*(1-q*q));var H=q*Math.sin(g)+E*e.aycof,K=(P+g+k+E*e.xlcof*z-k)%i;p=K,w=9999.9;for(var Y=1;Math.abs(w)>=1e-12&&Y<=10;)o=Math.sin(p),w=(K-H*(n=Math.cos(p))+z*o-p)/(w=1-n*z-o*H),Math.abs(w)>=.95&&(w=w>0?.95:-.95),p+=w,Y+=1;var Q=z*n+H*o,X=z*o-H*n,J=z*z+H*H,Z=U*(1-J);if(Z<0)return e.error=4,[!1,!1];var $=U*(1-Q),ee=Math.sqrt(U)*X/$,te=Math.sqrt(Z)/$,ne=Math.sqrt(1-J),re=U/$*(o-H-z*(E=X/(1+ne))),ie=U/$*(n-z+H*E);A=Math.atan2(re,ie);var oe=(ie+ie)*re,ae=1-2*re*re,se=.5*c*(E=1/Z),ue=se*E;"d"===e.method&&(h=a*a,e.con41=3*h-1,e.x1mth2=1-h,e.x7thm1=7*h-1);var le=$*(1-1.5*ue*ne*e.con41)+.5*se*e.x1mth2*ae;if(le<1)return e.error=6,{position:!1,velocity:!1};A-=.25*ue*e.x7thm1*oe;var ce=k+1.5*ue*a*oe,he=O+1.5*ue*a*l*ae,fe=ee-C*se*e.x1mth2*oe/s,de=te+C*se*(e.x1mth2*ae+1.5*e.con41)/s,pe=Math.sin(A),me=Math.cos(A),ge=Math.sin(ce),Ae=Math.cos(ce),ve=Math.sin(he),ye=Math.cos(he),be=-ge*ye,_e=Ae*ye,we=be*pe+Ae*me,Ee=_e*pe+ge*me,xe=ve*pe;return{position:{x:le*we*6378.137,y:le*Ee*6378.137,z:le*xe*6378.137},velocity:{x:(fe*we+de*(be*me-Ae*pe))*u,y:(fe*Ee+de*(_e*me-ge*pe))*u,z:(fe*xe+de*(ve*me))*u}}}function E(e,t){var n,o,a,u,l,h,p,m,g,A,v,b,E,x,S,T,M,L,C,R,O,I,P,k,N,D,F,j,B,V,G,U,q,W,z,H,K,Y,Q,X,J,Z,$,ee,te,ne,re,ie,oe,ae,se,ue,le=t.opsmode,ce=t.satn,he=t.epoch,fe=t.xbstar,de=t.xecco,pe=t.xargpo,me=t.xinclo,ge=t.xmo,Ae=t.xno,ve=t.xnodeo;e.isimp=0,e.method="n",e.aycof=0,e.con41=0,e.cc1=0,e.cc4=0,e.cc5=0,e.d2=0,e.d3=0,e.d4=0,e.delmo=0,e.eta=0,e.argpdot=0,e.omgcof=0,e.sinmao=0,e.t=0,e.t2cof=0,e.t3cof=0,e.t4cof=0,e.t5cof=0,e.x1mth2=0,e.x7thm1=0,e.mdot=0,e.nodedot=0,e.xlcof=0,e.xmcof=0,e.nodecf=0,e.irez=0,e.d2201=0,e.d2211=0,e.d3210=0,e.d3222=0,e.d4410=0,e.d4422=0,e.d5220=0,e.d5232=0,e.d5421=0,e.d5433=0,e.dedt=0,e.del1=0,e.del2=0,e.del3=0,e.didt=0,e.dmdt=0,e.dnodt=0,e.domdt=0,e.e3=0,e.ee2=0,e.peo=0,e.pgho=0,e.pho=0,e.pinco=0,e.plo=0,e.se2=0,e.se3=0,e.sgh2=0,e.sgh3=0,e.sgh4=0,e.sh2=0,e.sh3=0,e.si2=0,e.si3=0,e.sl2=0,e.sl3=0,e.sl4=0,e.gsto=0,e.xfact=0,e.xgh2=0,e.xgh3=0,e.xgh4=0,e.xh2=0,e.xh3=0,e.xi2=0,e.xi3=0,e.xl2=0,e.xl3=0,e.xl4=0,e.xlamo=0,e.zmol=0,e.zmos=0,e.atime=0,e.xli=0,e.xni=0,e.bstar=fe,e.ecco=de,e.argpo=pe,e.inclo=me,e.mo=ge,e.no=Ae,e.nodeo=ve,e.operationmode=le;e.init="y",e.t=0;var ye=function(e){var t=e.ecco,n=e.epoch,r=e.inclo,o=e.opsmode,a=e.no,u=t*t,l=1-u,h=Math.sqrt(l),f=Math.cos(r),d=f*f,p=Math.pow(s/a,2/3),m=.75*c*(3*d-1)/(h*l),g=m/(p*p),A=p*(1-g*g-g*(1/3+134*g*g/81));a/=1+(g=m/(A*A));var v,y=Math.pow(s/a,2/3),b=Math.sin(r),w=y*l,E=1-5*d,x=-E-d-d,S=1/y,T=w*w,M=y*(1-t);if("a"===o){var L=n-7305,C=Math.floor(L+1e-8),R=.017202791694070362;(v=(1.7321343856509375+R*C+(R+i)*(L-C)+L*L*5075514194322695e-30)%i)<0&&(v+=i)}else v=_(n+2433281.5);return{no:a,method:"n",ainv:S,ao:y,con41:x,con42:E,cosio:f,cosio2:d,eccsq:u,omeosq:l,posq:T,rp:M,rteosq:h,sinio:b,gsto:v}}({satn:ce,ecco:e.ecco,epoch:he,inclo:e.inclo,no:e.no,method:e.method,opsmode:e.operationmode}),be=ye.ao,_e=ye.con42,we=ye.cosio,Ee=ye.cosio2,xe=ye.eccsq,Se=ye.omeosq,Te=ye.posq,Me=ye.rp,Le=ye.rteosq,Ce=ye.sinio;if(e.no=ye.no,e.con41=ye.con41,e.gsto=ye.gsto,e.error=0,Se>=0||e.no>=0){if(e.isimp=0,Me<220/6378.137+1&&(e.isimp=1),k=78/6378.137+1,L=1.8802768006108976e-9,(S=6378.137*(Me-1))<156){k=S-78,S<98&&(k=20);var Re=(120-k)/6378.137;L=Re*Re*Re*Re,k=k/6378.137+1}T=1/Te,Z=1/(be-k),e.eta=be*e.ecco*Z,b=e.eta*e.eta,v=e.ecco*e.eta,M=Math.abs(1-b),u=(p=(h=L*Math.pow(Z,4))/Math.pow(M,3.5))*e.no*(be*(1+1.5*b+v*(4+b))+.375*c*Z/M*e.con41*(8+3*b*(8+b))),e.cc1=e.bstar*u,l=0,e.ecco>1e-4&&(l=-2*h*Z*d*e.no*Ce/e.ecco),e.x1mth2=1-Ee,e.cc4=2*e.no*p*be*Se*(e.eta*(2+.5*b)+e.ecco*(.5+2*b)-c*Z/(be*M)*(-3*e.con41*(1-2*v+b*(1.5-.5*v))+.75*e.x1mth2*(2*b-v*(1+b))*Math.cos(2*e.argpo))),e.cc5=2*p*be*Se*(1+2.75*(b+v)+v*b),m=Ee*Ee,X=.5*(Q=1.5*c*T*e.no)*c*T,J=-.46875*f*T*T*e.no,e.mdot=e.no+.5*Q*Le*e.con41+.0625*X*Le*(13-78*Ee+137*m),e.argpdot=-.5*Q*_e+.0625*X*(7-114*Ee+395*m)+J*(3-36*Ee+49*m),ee=-Q*we,e.nodedot=ee+(.5*X*(4-19*Ee)+2*J*(3-7*Ee))*we,$=e.argpdot+e.nodedot,e.omgcof=e.bstar*l*Math.cos(e.argpo),e.xmcof=0,e.ecco>1e-4&&(e.xmcof=-2/3*h*e.bstar/v),e.nodecf=3.5*Se*ee*e.cc1,e.t2cof=1.5*e.cc1,Math.abs(we+1)>15e-13?e.xlcof=-.25*d*Ce*(3+5*we)/(1+we):e.xlcof=-.25*d*Ce*(3+5*we)/15e-13,e.aycof=-.5*d*Ce;var Oe=1+e.eta*Math.cos(e.mo);if(e.delmo=Oe*Oe*Oe,e.sinmao=Math.sin(e.mo),e.x7thm1=7*Ee-1,2*r/e.no>=225){e.method="d",e.isimp=1,0,E=e.inclo;var Ie=function(e){var t,n,r,o,a,s,u,l,c,h,f,d,p,m,g,A,v,y,b,_,w,E,x,S,T,M,L,C,R,O,I,P,k,N,D,F,j,B,V,G,U,q,W,z,H,K,Y,Q,X,J,Z,$,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,he=e.epoch,fe=e.ep,de=e.argpp,pe=e.tc,me=e.inclp,ge=e.nodep,Ae=e.np,ve=fe,ye=Math.sin(ge),be=Math.cos(ge),_e=Math.sin(de),we=Math.cos(de),Ee=Math.sin(me),xe=Math.cos(me),Se=ve*ve,Te=1-Se,Me=Math.sqrt(Te),Le=he+18261.5+pe/1440,Ce=(4.523602-.00092422029*Le)%i,Re=Math.sin(Ce),Oe=Math.cos(Ce),Ie=.91375164-.03568096*Oe,Pe=Math.sqrt(1-Ie*Ie),ke=.089683511*Re/Pe,Ne=Math.sqrt(1-ke*ke),De=5.8351514+.001944368*Le,Fe=.39785416*Re/Pe,je=Ne*Oe+.91744867*ke*Re;Fe=Math.atan2(Fe,je),Fe+=De-Ce;var Be=Math.cos(Fe),Ve=Math.sin(Fe);_=.1945905,w=-.98088458,S=.91744867,T=.39785416,E=be,x=ye,f=29864797e-13;for(var Ge=1/Ae,Ue=0;Ue<2;)ne=-6*(t=_*E+w*S*x)*(a=-Ee*(u=-_*x+w*S*E)+xe*(l=w*T))+Se*(-24*(d=t*we+(n=xe*u+Ee*l)*_e)*(y=a*we)-6*(m=-t*_e+n*we)*(A=a*_e)),re=-6*(t*(s=-Ee*(c=w*x+_*S*E)+xe*(h=_*T))+(r=-w*E+_*S*x)*a)+Se*(-24*((p=r*we+(o=xe*c+Ee*h)*_e)*y+d*(b=s*we))+-6*(m*(v=s*_e)+(g=-r*_e+o*we)*A)),ie=-6*r*s+Se*(-24*p*b-6*g*v),oe=6*n*a+Se*(24*d*A-6*m*y),ae=6*(o*a+n*s)+Se*(24*(p*A+d*v)-6*(g*y+m*b)),se=6*o*s+Se*(24*p*v-6*g*b),$=($=3*(t*t+n*n)+(ue=12*d*d-3*m*m)*Se)+$+Te*ue,ee=(ee=6*(t*r+n*o)+(le=24*d*p-6*m*g)*Se)+ee+Te*le,te=(te=3*(r*r+o*o)+(ce=12*p*p-3*g*g)*Se)+te+Te*ce,K=-.5*(Y=f*Ge)/Me,H=-15*ve*(Q=Y*Me),X=d*m+p*g,J=p*m+d*g,Z=p*g-d*m,1===(Ue+=1)&&(M=H,L=K,C=Y,R=Q,O=X,I=J,P=Z,k=$,N=ee,D=te,F=ne,j=re,B=ie,V=oe,G=ae,U=se,q=ue,W=le,z=ce,_=Be,w=Ve,S=Ie,T=Pe,E=Ne*be+ke*ye,x=ye*Ne-be*ke,f=4.7968065e-7);return{snodm:ye,cnodm:be,sinim:Ee,cosim:xe,sinomm:_e,cosomm:we,day:Le,e3:2*H*Z,ee2:2*H*J,em:ve,emsq:Se,gam:De,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:Me,se2:2*M*I,se3:2*M*P,sgh2:2*R*W,sgh3:2*R*(z-q),sgh4:-18*R*.01675,sh2:-2*L*G,sh3:-2*L*(U-V),si2:2*L*j,si3:2*L*(B-F),sl2:-2*C*N,sl3:-2*C*(D-k),sl4:-2*C*(-21-9*Se)*.01675,s1:H,s2:K,s3:Y,s4:Q,s5:X,s6:J,s7:Z,ss1:M,ss2:L,ss3:C,ss4:R,ss5:O,ss6:I,ss7:P,sz1:k,sz2:N,sz3:D,sz11:F,sz12:j,sz13:B,sz21:V,sz22:G,sz23:U,sz31:q,sz32:W,sz33:z,xgh2:2*Q*le,xgh3:2*Q*(ce-ue),xgh4:-18*Q*.0549,xh2:-2*K*ae,xh3:-2*K*(se-oe),xi2:2*K*re,xi3:2*K*(ie-ne),xl2:-2*Y*ee,xl3:-2*Y*(te-$),xl4:-2*Y*(-21-9*Se)*.0549,nm:Ae,z1:$,z2:ee,z3:te,z11:ne,z12:re,z13:ie,z21:oe,z22:ae,z23:se,z31:ue,z32:le,z33:ce,zmol:(.2299715*Le-De+4.7199672)%i,zmos:(6.2565837+.017201977*Le)%i}}({epoch:he,ep:e.ecco,argpp:e.argpo,tc:0,inclp:e.inclo,nodep:e.nodeo,np:e.no,e3:e.e3,ee2:e.ee2,peo:e.peo,pgho:e.pgho,pho:e.pho,pinco:e.pinco,plo:e.plo,se2:e.se2,se3:e.se3,sgh2:e.sgh2,sgh3:e.sgh3,sgh4:e.sgh4,sh2:e.sh2,sh3:e.sh3,si2:e.si2,si3:e.si3,sl2:e.sl2,sl3:e.sl3,sl4:e.sl4,xgh2:e.xgh2,xgh3:e.xgh3,xgh4:e.xgh4,xh2:e.xh2,xh3:e.xh3,xi2:e.xi2,xi3:e.xi3,xl2:e.xl2,xl3:e.xl3,xl4:e.xl4,zmol:e.zmol,zmos:e.zmos});e.e3=Ie.e3,e.ee2=Ie.ee2,e.peo=Ie.peo,e.pgho=Ie.pgho,e.pho=Ie.pho,e.pinco=Ie.pinco,e.plo=Ie.plo,e.se2=Ie.se2,e.se3=Ie.se3,e.sgh2=Ie.sgh2,e.sgh3=Ie.sgh3,e.sgh4=Ie.sgh4,e.sh2=Ie.sh2,e.sh3=Ie.sh3,e.si2=Ie.si2,e.si3=Ie.si3,e.sl2=Ie.sl2,e.sl3=Ie.sl3,e.sl4=Ie.sl4,o=Ie.sinim,n=Ie.cosim,g=Ie.em,A=Ie.emsq,C=Ie.s1,R=Ie.s2,O=Ie.s3,I=Ie.s4,P=Ie.s5,N=Ie.ss1,D=Ie.ss2,F=Ie.ss3,j=Ie.ss4,B=Ie.ss5,V=Ie.sz1,G=Ie.sz3,U=Ie.sz11,q=Ie.sz13,W=Ie.sz21,z=Ie.sz23,H=Ie.sz31,K=Ie.sz33,e.xgh2=Ie.xgh2,e.xgh3=Ie.xgh3,e.xgh4=Ie.xgh4,e.xh2=Ie.xh2,e.xh3=Ie.xh3,e.xi2=Ie.xi2,e.xi3=Ie.xi3,e.xl2=Ie.xl2,e.xl3=Ie.xl3,e.xl4=Ie.xl4,e.zmol=Ie.zmol,e.zmos=Ie.zmos,x=Ie.nm,te=Ie.z1,ne=Ie.z3,re=Ie.z11,ie=Ie.z13,oe=Ie.z21,ae=Ie.z23,se=Ie.z31,ue=Ie.z33;var Pe=y(e,{inclo:E,init:e.init,ep:e.ecco,inclp:e.inclo,nodep:e.nodeo,argpp:e.argpo,mp:e.mo,opsmode:e.operationmode});e.ecco=Pe.ep,e.inclo=Pe.inclp,e.nodeo=Pe.nodep,e.argpo=Pe.argpp,e.mo=Pe.mp,0,0,0;var ke=function(e){var t,n,o,a,u,l,c,h,f,d,p,m,g,A,v,y,b,_=e.cosim,w=e.argpo,E=e.s1,x=e.s2,S=e.s3,T=e.s4,M=e.s5,L=e.sinim,C=e.ss1,R=e.ss2,O=e.ss3,I=e.ss4,P=e.ss5,k=e.sz1,N=e.sz3,D=e.sz11,F=e.sz13,j=e.sz21,B=e.sz23,V=e.sz31,G=e.sz33,U=e.t,q=e.tc,W=e.gsto,z=e.mo,H=e.mdot,K=e.no,Y=e.nodeo,Q=e.nodedot,X=e.xpidot,J=e.z1,Z=e.z3,$=e.z11,ee=e.z13,te=e.z21,ne=e.z23,re=e.z31,ie=e.z33,oe=e.ecco,ae=e.eccsq,se=e.emsq,ue=e.em,le=e.argpm,ce=e.inclm,he=e.mm,fe=e.nm,de=e.nodem,pe=e.irez,me=e.atime,ge=e.d2201,Ae=e.d2211,ve=e.d3210,ye=e.d3222,be=e.d4410,_e=e.d4422,we=e.d5220,Ee=e.d5232,xe=e.d5421,Se=e.d5433,Te=e.dedt,Me=e.didt,Le=e.dmdt,Ce=e.dnodt,Re=e.domdt,Oe=e.del1,Ie=e.del2,Pe=e.del3,ke=e.xfact,Ne=e.xlamo,De=e.xli,Fe=e.xni,je=.0043752690880113,Be=.00015835218,Ve=119459e-10;pe=0,fe<.0052359877&&fe>.0034906585&&(pe=1),fe>=.00826&&fe<=.00924&&ue>=.5&&(pe=2);var Ge=-Ve*R*(j+B);(ce<.052359877||ce>r-.052359877)&&(Ge=0),0!==L&&(Ge/=L);var Ue=-Be*x*(te+ne);(ce<.052359877||ce>r-.052359877)&&(Ue=0),Re=I*Ve*(V+G-6)-_*Ge+T*Be*(re+ie-6),Ce=Ge,0!==L&&(Re-=_/L*Ue,Ce+=Ue/L);var qe=(W+q*je)%i;if(ue+=(Te=C*Ve*P+E*Be*M)*U,ce+=(Me=R*Ve*(D+F)+x*Be*($+ee))*U,le+=Re*U,de+=Ce*U,he+=(Le=-Ve*O*(k+N-14-6*se)-Be*S*(J+Z-14-6*se))*U,0!==pe){if(v=Math.pow(fe/s,2/3),2===pe){var We=ue,ze=se;b=(ue=oe)*(se=ae),ue<=.65?(o=3.616-13.247*ue+16.29*se,a=117.39*ue-19.302-228.419*se+156.591*b,u=109.7927*ue-18.9068-214.6334*se+146.5816*b,l=242.694*ue-41.122-471.094*se+313.953*b,c=841.88*ue-146.407-1629.014*se+1083.435*b,h=3017.977*ue-532.114-5740.032*se+3708.276*b):(o=331.819*ue-72.099-508.738*se+266.724*b,a=1582.851*ue-346.844-2415.925*se+1246.113*b,u=1554.908*ue-342.585-2366.899*se+1215.972*b,l=4758.686*ue-1052.797-7193.992*se+3651.957*b,c=16178.11*ue-3581.69-24462.77*se+12422.52*b,h=ue>.715?29936.92*ue-5149.66-54087.36*se+31324.56*b:1464.74-4664.75*ue+3763.64*se),ue<.7?(p=4988.61*ue-919.2277-9064.77*se+5542.21*b,f=4568.6173*ue-822.71072-8491.4146*se+5337.524*b,d=4690.25*ue-853.666-8624.77*se+5341.4*b):(p=161616.52*ue-37995.78-229838.2*se+109377.94*b,f=218913.95*ue-51752.104-309468.16*se+146349.42*b,d=170470.89*ue-40023.88-242699.48*se+115605.82*b),ge=(g=17891679e-13*(A=3*(fe*fe)*(v*v)))*(t=.75*(1+2*_+(y=_*_)))*(-.306-.44*(ue-.64)),Ae=g*(1.5*(m=L*L))*o,ve=(g=3.7393792e-7*(A*=v))*(1.875*L*(1-2*_-3*y))*a,ye=g*(-1.875*L*(1+2*_-3*y))*u,be=(g=2*(A*=v)*7.3636953e-9)*(35*m*t)*l,_e=g*(39.375*m*m)*c,we=(g=1.1428639e-7*(A*=v))*(9.84375*L*(m*(1-2*_-5*y)+.33333333*(4*_-2+6*y)))*h,Ee=g*(L*(4.92187512*m*(-2-4*_+10*y)+6.56250012*(1+2*_-3*y)))*d,xe=(g=2*A*2.1765803e-9)*(29.53125*L*(2-8*_+y*(8*_-12+10*y)))*f,Se=g*(29.53125*L*(-2-8*_+y*(12+8*_-10*y)))*p,Ne=(z+Y+Y-(qe+qe))%i,ke=H+Le+2*(Q+Ce-je)-K,ue=We,se=ze}1===pe&&(n=1+_,Ie=2*(Oe=3*fe*fe*v*v)*(t=.75*(1+_)*(1+_))*(1+se*(.8125*se-2.5))*17891679e-13,Pe=3*Oe*(n*=1.875*n*n)*(1+se*(6.60937*se-6))*2.2123015e-7*v,Oe=Oe*(.9375*L*L*(1+3*_)-.75*(1+_))*(a=1+2*se)*21460748e-13*v,Ne=(z+Y+w-qe)%i,ke=H+X+Le+Re+Ce-(K+je)),De=Ne,Fe=K,me=0,fe=K+0}return{em:ue,argpm:le,inclm:ce,mm:he,nm:fe,nodem:de,irez:pe,atime:me,d2201:ge,d2211:Ae,d3210:ve,d3222:ye,d4410:be,d4422:_e,d5220:we,d5232:Ee,d5421:xe,d5433:Se,dedt:Te,didt:Me,dmdt:Le,dndt:0,dnodt:Ce,domdt:Re,del1:Oe,del2:Ie,del3:Pe,xfact:ke,xlamo:Ne,xli:De,xni:Fe}}({cosim:n,emsq:A,argpo:e.argpo,s1:C,s2:R,s3:O,s4:I,s5:P,sinim:o,ss1:N,ss2:D,ss3:F,ss4:j,ss5:B,sz1:V,sz3:G,sz11:U,sz13:q,sz21:W,sz23:z,sz31:H,sz33:K,t:e.t,tc:0,gsto:e.gsto,mo:e.mo,mdot:e.mdot,no:e.no,nodeo:e.nodeo,nodedot:e.nodedot,xpidot:$,z1:te,z3:ne,z11:re,z13:ie,z21:oe,z23:ae,z31:se,z33:ue,ecco:e.ecco,eccsq:xe,em:g,argpm:0,inclm:E,mm:0,nm:x,nodem:0,irez:e.irez,atime:e.atime,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,del1:e.del1,del2:e.del2,del3:e.del3,xfact:e.xfact,xlamo:e.xlamo,xli:e.xli,xni:e.xni});e.irez=ke.irez,e.atime=ke.atime,e.d2201=ke.d2201,e.d2211=ke.d2211,e.d3210=ke.d3210,e.d3222=ke.d3222,e.d4410=ke.d4410,e.d4422=ke.d4422,e.d5220=ke.d5220,e.d5232=ke.d5232,e.d5421=ke.d5421,e.d5433=ke.d5433,e.dedt=ke.dedt,e.didt=ke.didt,e.dmdt=ke.dmdt,e.dnodt=ke.dnodt,e.domdt=ke.domdt,e.del1=ke.del1,e.del2=ke.del2,e.del3=ke.del3,e.xfact=ke.xfact,e.xlamo=ke.xlamo,e.xli=ke.xli,e.xni=ke.xni}1!==e.isimp&&(a=e.cc1*e.cc1,e.d2=4*be*Z*a,Y=e.d2*Z*e.cc1/3,e.d3=(17*be+k)*Y,e.d4=.5*Y*be*Z*(221*be+31*k)*e.cc1,e.t3cof=e.d2+2*a,e.t4cof=.25*(3*e.d3+e.cc1*(12*e.d2+10*a)),e.t5cof=.2*(3*e.d4+12*e.cc1*e.d3+6*e.d2*e.d2+15*a*(2*e.d2+a)))}w(e,0),e.init="n"}function x(e,t){var n=1440/(2*r),i=0,a={error:0};a.satnum=e.substring(2,7),a.epochyr=parseInt(e.substring(18,20),10),a.epochdays=parseFloat(e.substring(20,32)),a.ndot=parseFloat(e.substring(33,43)),a.nddot=parseFloat(".".concat(parseInt(e.substring(44,50),10),"E").concat(e.substring(50,52))),a.bstar=parseFloat("".concat(e.substring(53,54),".").concat(parseInt(e.substring(54,59),10),"E").concat(e.substring(59,61))),a.inclo=parseFloat(t.substring(8,16)),a.nodeo=parseFloat(t.substring(17,25)),a.ecco=parseFloat(".".concat(t.substring(26,33))),a.argpo=parseFloat(t.substring(34,42)),a.mo=parseFloat(t.substring(43,51)),a.no=parseFloat(t.substring(52,63)),a.no/=n,a.a=Math.pow(a.no*l,-2/3),a.ndot/=1440*n,a.nddot/=1440*n*1440,a.inclo*=o,a.nodeo*=o,a.argpo*=o,a.mo*=o,a.alta=a.a*(1+a.ecco)-1,a.altp=a.a*(1-a.ecco)-1;var s=m(i=a.epochyr<57?a.epochyr+2e3:a.epochyr+1900,a.epochdays),u=s.mon,c=s.day,h=s.hr,f=s.minute,d=s.sec;return a.jdsatepoch=A(i,u,c,h,f,d),E(a,{opsmode:"i",satn:a.satnum,epoch:a.jdsatepoch-2433281.5,xbstar:a.bstar,xecco:a.ecco,xargpo:a.argpo,xinclo:a.inclo,xmo:a.mo,xno:a.no,xnodeo:a.nodeo}),a}function S(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=Array.prototype.slice.call(t,1),o=A.apply(void 0,S(i)),a=1440*(o-r.jdsatepoch);return w(r,a)}function M(e,t,n){var r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2)),i=t.x+n.x,o=t.y+n.y,a=t.z+n.z,s=Math.sqrt(Math.pow(i-e.x,2)+Math.pow(o-e.y,2)+Math.pow(a-e.z,2))-r;return 1+(s*=s>=0?1:-1)/299792.458}function L(e){return e*a}function C(e){return e*o}function R(e){if(e<-r/2||e>r/2)throw new RangeError("Latitude radians must be in range [-pi/2; pi/2].");return L(e)}function O(e){if(e<-r||e>r)throw new RangeError("Longitude radians must be in range [-pi; pi].");return L(e)}function I(e){if(e<-90||e>90)throw new RangeError("Latitude degrees must be in range [-90; 90].");return C(e)}function P(e){if(e<-180||e>180)throw new RangeError("Longitude degrees must be in range [-180; 180].");return C(e)}function k(e){var t=e.longitude,n=e.latitude,r=e.height,i=6378.137,o=(i-6356.7523142)/i,a=2*o-o*o,s=i/Math.sqrt(1-a*(Math.sin(n)*Math.sin(n)));return{x:(s+r)*Math.cos(n)*Math.cos(t),y:(s+r)*Math.cos(n)*Math.sin(t),z:(s*(1-a)+r)*Math.sin(n)}}function N(e,t){for(var n=6378.137,o=Math.sqrt(e.x*e.x+e.y*e.y),a=(n-6356.7523142)/n,s=2*a-a*a,u=Math.atan2(e.y,e.x)-t;u<-r;)u+=i;for(;u>r;)u-=i;for(var l,c=0,h=Math.atan2(e.z,Math.sqrt(e.x*e.x+e.y*e.y));c<20;)l=1/Math.sqrt(1-s*(Math.sin(h)*Math.sin(h))),h=Math.atan2(e.z+n*l*s*Math.sin(h),o),c+=1;return{longitude:u,latitude:h,height:o/Math.cos(h)-n*l}}function D(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t),z:e.z}}function F(e,t){return{x:e.x*Math.cos(t)+e.y*Math.sin(t),y:e.x*-Math.sin(t)+e.y*Math.cos(t),z:e.z}}function j(e,t){return function(e){var t=e.topS,n=e.topE,i=e.topZ,o=Math.sqrt(t*t+n*n+i*i),a=Math.asin(i/o);return{azimuth:Math.atan2(-n,t)+r,elevation:a,rangeSat:o}}(function(e,t){var n=e.longitude,r=e.latitude,i=k(e),o=t.x-i.x,a=t.y-i.y,s=t.z-i.z;return{topS:Math.sin(r)*Math.cos(n)*o+Math.sin(r)*Math.sin(n)*a-Math.cos(r)*s,topE:-Math.sin(n)*o+Math.cos(n)*a,topZ:Math.cos(r)*Math.cos(n)*o+Math.cos(r)*Math.sin(n)*a+Math.sin(r)*s}}(e,t))}},function(e,t,n){var r=n(146),i=n(147),o=n(86),a=n(148);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},function(e,t,n){var r=n(87);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(150);t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function e(t){if(t.length>1&&r.isNumber(t[0])&&r.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,n){if(!t||!n)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,n){if(!e)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,n){if(!e)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=e.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+o.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function i(e,t,n){return void 0===n&&(n={}),r({type:"Point",coordinates:e},t,n)}function o(e,t,n){void 0===n&&(n={});for(var i=0,o=e;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:e},t,n)}function a(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:e},t,n)}function s(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function u(e,t,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:e},t,n)}function l(e,t,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:e},t,n)}function c(e,t,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:e},t,n)}function h(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e*r}function f(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e/r}function d(e){return 180*(e%(2*Math.PI))/Math.PI}function p(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=r,t.geometry=function(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return i(t).geometry;case"LineString":return a(t).geometry;case"Polygon":return o(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return u(t).geometry;case"MultiPolygon":return c(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,n){return void 0===n&&(n={}),s(e.map((function(e){return i(e,t)})),n)},t.polygon=o,t.polygons=function(e,t,n){return void 0===n&&(n={}),s(e.map((function(e){return o(e,t)})),n)},t.lineString=a,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),s(e.map((function(e){return a(e,t)})),n)},t.featureCollection=s,t.multiLineString=u,t.multiPoint=l,t.multiPolygon=c,t.geometryCollection=function(e,t,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:e},t,n)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=h,t.lengthToRadians=f,t.lengthToDegrees=function(e,t){return d(f(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=d,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return h(f(e,t),n)},t.convertArea=function(e,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[n];if(!i)throw new Error("invalid original units");var o=t.areaFactors[r];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=p,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!p(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(e,t,n){"use strict";var r=n(152);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},,function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,A=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,_=r?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case f:case a:case u:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case A:case g:case l:return e;default:return t}}case o:return t}}}function E(e){return w(e)===f}t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=d,t.Fragment=a,t.Lazy=A,t.Memo=g,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return E(e)||w(e)===h},t.isConcurrentMode=E,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===A},t.isMemo=function(e){return w(e)===g},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===s||e===p||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===A||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===_||e.$$typeof===v)},t.typeOf=w},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},,,,,,,function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=n(10),l={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},c=o.forwardRef((function(e,t){var n=e.align,s=void 0===n?"inherit":n,c=e.classes,h=e.className,f=e.color,d=void 0===f?"initial":f,p=e.component,m=e.display,g=void 0===m?"initial":m,A=e.gutterBottom,v=void 0!==A&&A,y=e.noWrap,b=void 0!==y&&y,_=e.paragraph,w=void 0!==_&&_,E=e.variant,x=void 0===E?"body1":E,S=e.variantMapping,T=void 0===S?l:S,M=Object(i.a)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),L=p||(w?"p":T[x]||l[x])||"span";return o.createElement(L,Object(r.a)({className:Object(a.a)(c.root,h,"inherit"!==x&&c[x],"initial"!==d&&c["color".concat(Object(u.a)(d))],b&&c.noWrap,v&&c.gutterBottom,w&&c.paragraph,"inherit"!==s&&c["align".concat(Object(u.a)(s))],"initial"!==g&&c["display".concat(Object(u.a)(g))]),ref:t},M))}));t.a=Object(s.a)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(c)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=n(109),l=o.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,c=e.invisible,h=void 0!==c&&c,f=e.open,d=e.transitionDuration,p=e.TransitionComponent,m=void 0===p?u.a:p,g=Object(i.a)(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return o.createElement(m,Object(r.a)({in:f,timeout:d},g),o.createElement("div",{className:Object(a.a)(s.root,l,h&&s.invisible),"aria-hidden":!0,ref:t},n))}));t.a=Object(s.a)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return fn}));var r=n(5),i=n(2),o=n(0),a=n.n(o),s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="object"===("undefined"===typeof window?"undefined":s(window))&&"object"===("undefined"===typeof document?"undefined":s(document))&&9===document.nodeType;var l=n(47),c=n(35),h=n(42),f=n(36),d={}.constructor;function p(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(p);if(e.constructor!==d)return e;var t={};for(var n in e)t[n]=p(e[n]);return t}function m(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=p(t),o=r.plugins.onCreateRule(e,i,n);return o||(e[0],null)}var g=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n};function A(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=g(e[r]," ");else n=g(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n}function v(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function y(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,o=void 0===i?0:i,a=t.fallbacks;if(e&&o++,a)if(Array.isArray(a))for(var s=0;s<a.length;s++){var u=a[s];for(var l in u){var c=u[l];null!=c&&(r&&(r+="\n"),r+=""+v(l+": "+A(c)+";",o))}}else for(var h in a){var f=a[h];null!=f&&(r&&(r+="\n"),r+=""+v(h+": "+A(f)+";",o))}for(var d in t){var p=t[d];null!=p&&"fallbacks"!==d&&(r&&(r+="\n"),r+=""+v(d+": "+A(p)+";",o))}return(r||n.allowEmpty)&&e?(r&&(r="\n"+r+"\n"),v(e+" {"+r,--o)+v("}",o)):r}var b=/([[\].#*$><+~=|^:(),"'`\s])/g,_="undefined"!==typeof CSS&&CSS.escape,w=function(e){return _?_(e):e.replace(b,"\\$1")},E=function(){function e(e,t,n){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==i||!1===i,a=e in this.style;if(o&&!a&&!r)return this;var s=o&&a;if(s?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var u=this.options.sheet;return u&&u.attached,this},e}(),x=function(e){function t(t,n,r){var i;(i=e.call(this,t,n,r)||this).selectorText=void 0,i.id=void 0,i.renderable=void 0;var o=r.selector,a=r.scoped,s=r.sheet,u=r.generateId;return o?i.selectorText=o:!1!==a&&(i.id=u(Object(h.a)(Object(h.a)(i)),s),i.selectorText="."+w(i.id)),i}Object(c.a)(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=A(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Object(i.a)({},e,{allowEmpty:!0}):e;return y(this.selectorText,this.style,n)},Object(l.a)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(E),S={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new x(e,t,n)}},T={indent:1,children:!0},M=/@([\w-]+)/,L=function(){function e(e,t,n){this.type="conditional",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.query=n.name;var r=e.match(M);for(var o in this.at=r?r[1]:"unknown",this.options=n,this.rules=new J(Object(i.a)({},n,{parent:this})),t)this.rules.add(o,t[o]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.toString=function(e){if(void 0===e&&(e=T),null==e.indent&&(e.indent=T.indent),null==e.children&&(e.children=T.children),!1===e.children)return this.query+" {}";var t=this.rules.toString(e);return t?this.query+" {\n"+t+"\n}":""},e}(),C=/@media|@supports\s+/,R={onCreateRule:function(e,t,n){return C.test(e)?new L(e,t,n):null}},O={indent:1,children:!0},I=/@keyframes\s+([\w-]+)/,P=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var r=e.match(I);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var o=n.scoped,a=n.sheet,s=n.generateId;for(var u in this.id=!1===o?this.name:w(s(this,a)),this.rules=new J(Object(i.a)({},n,{parent:this})),t)this.rules.add(u,t[u],Object(i.a)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){if(void 0===e&&(e=O),null==e.indent&&(e.indent=O.indent),null==e.children&&(e.children=O.children),!1===e.children)return this.at+" "+this.id+" {}";var t=this.rules.toString(e);return t&&(t="\n"+t+"\n"),this.at+" "+this.id+" {"+t+"}"},e}(),k=/@keyframes\s+/,N=/\$([\w-]+)/g,D=function(e,t){return"string"===typeof e?e.replace(N,(function(e,n){return n in t?t[n]:e})):e},F=function(e,t,n){var r=e[t],i=D(r,n);i!==r&&(e[t]=i)},j={onCreateRule:function(e,t,n){return"string"===typeof e&&k.test(e)?new P(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&F(e,"animation-name",n.keyframes),"animation"in e&&F(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return D(e,r.keyframes);default:return e}}},B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).renderable=void 0,t}return Object(c.a)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Object(i.a)({},e,{allowEmpty:!0}):e;return y(this.key,this.style,n)},t}(E),V={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new B(e,t,n):null}},G=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=y(this.at,this.style[n]),this.style[n+1]&&(t+="\n");return t}return y(this.at,this.style,e)},e}(),U=/@font-face/,q={onCreateRule:function(e,t,n){return U.test(e)?new G(e,t,n):null}},W=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return y(this.key,this.style,e)},e}(),z={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new W(e,t,n):null}},H=function(){function e(e,t,n){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),K={"@charset":!0,"@import":!0,"@namespace":!0},Y=[S,R,j,V,q,z,{onCreateRule:function(e,t,n){return e in K?new H(e,t,n):null}}],Q={process:!0},X={force:!0,process:!0},J=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,o=r.parent,a=r.sheet,s=r.jss,u=r.Renderer,l=r.generateId,c=r.scoped,h=Object(i.a)({classes:this.classes,parent:o,sheet:a,jss:s,Renderer:u,generateId:l,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),f=e;e in this.raw&&(f=e+"-d"+this.counter++),this.raw[f]=t,f in this.classes&&(h.selector="."+w(this.classes[f]));var d=m(f,t,h);if(!d)return null;this.register(d);var p=void 0===h.index?this.index.length:h.index;return this.index.splice(p,0,d),d},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof x?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof P&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof x?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof P&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.map[e],t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=Q);var i=this.options,o=i.jss.plugins,a=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t,u=s.style;if(o.onUpdate(n,t,a,r),r.process&&u&&u!==s.style){for(var l in o.onProcessStyle(s.style,s,a),s.style){var c=s.style[l];c!==u[l]&&s.prop(l,c,X)}for(var h in u){var f=s.style[h],d=u[h];null==f&&f!==d&&s.prop(h,null,X)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||r)&&(t&&(t+="\n"),t+=o)}return t},e}(),Z=function(){function e(e,t){for(var n in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Object(i.a)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new J(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!!t&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),$=function(){function e(){this.plugins={internal:[],external:[]},this.registry=void 0}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),ee=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=Object(f.a)(t,["attached"]),i="",o=0;o<this.registry.length;o++){var a=this.registry[o];null!=n&&a.attached!==n||(i&&(i+="\n"),i+=a.toString(r))}return i},Object(l.a)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),te="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),ne="2f1acc6c3a606b082e5eef5e54414ffb";null==te[ne]&&(te[ne]=0);var re=te[ne]++,ie=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(o||"c")+re+i+t:o+n.key+"-"+re+(i?"-"+i:"")+"-"+t}},oe=function(e){var t;return function(){return t||(t=e()),t}};function ae(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}}function se(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=A(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(i){return!1}return!0}function ue(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}}function le(e,t){return e.selectorText=t,e.selectorText===t}var ce=oe((function(){return document.querySelector("head")}));function he(e){var t=ee.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if((n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e))&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=ce(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var fe=oe((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),de=function(e,t,n){var r=e.cssRules.length;(void 0===n||n>r)&&(n=r);try{if("insertRule"in e)e.insertRule(t,n);else if("appendRule"in e){e.appendRule(t)}}catch(i){return!1}return e.cssRules[n]},pe=function(){function e(e){this.getPropertyValue=ae,this.setProperty=se,this.removeProperty=ue,this.setSelector=le,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,e&&ee.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var o=fe();o&&this.element.setAttribute("nonce",o)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=he(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(e,i.nextSibling)}else ce().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){var e=this.element.parentNode;e&&e.removeChild(this.element)},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;return("conditional"!==e.type&&"keyframes"!==e.type||!1!==(i=de(n,r.toString({children:!1}),t)))&&(this.insertRules(r.rules,i),i)}if(e.renderable&&e.renderable.parentStyleSheet===this.element.sheet)return e.renderable;var o=e.toString();if(!o)return!1;var a=de(n,o,t);return!1!==a&&(this.hasInsertedRules=!0,e.renderable=a,a)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),!0)},t.indexOf=function(e){for(var t=this.element.sheet.cssRules,n=0;n<t.length;n++)if(e===t[n])return n;return-1},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),me=0,ge=function(){function e(e){this.id=me++,this.version="10.4.0",this.plugins=new $,this.options={id:{minify:!1},createGenerateId:ie,Renderer:u?pe:null,plugins:[]},this.generateId=ie({minify:!1});for(var t=0;t<Y.length;t++)this.plugins.use(Y[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Object(i.a)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===ee.index?0:ee.index+1);var r=new Z(e,Object(i.a)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),ee.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=Object(i.a)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var o=m(e,t,r);return o&&this.plugins.onProcessRule(o),o},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}();var Ae="undefined"!==typeof CSS&&CSS&&"number"in CSS,ve=function(e){return new ge(e)},ye=(ve(),n(202)),be={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},_e=n(166),we=(n(1),"function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__"),Ee=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var xe=Date.now(),Se="fnValues"+xe,Te="fnStyle"+ ++xe;var Me=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=m(e,{},n);return r[Te]=t,r},onProcessStyle:function(e,t){if(Se in t||Te in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[Se]=n,e},onUpdate:function(e,t,n,r){var i=t,o=i[Te];o&&(i.style=o(e)||{});var a=i[Se];if(a)for(var s in a)i.prop(s,a[s](e),r)}}},Le="@global",Ce=function(){function e(e,t,n){for(var r in this.type="global",this.at=Le,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new J(Object(i.a)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(){return this.rules.toString()},e}(),Re=function(){function e(e,t,n){this.type="global",this.at=Le,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=e,this.options=n;var r=e.substr("@global ".length);this.rule=n.jss.createRule(r,t,Object(i.a)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Oe=/\s*,\s*/g;function Ie(e,t){for(var n=e.split(Oe),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var Pe=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Le)return new Ce(e,t,n);if("@"===e[0]&&"@global "===e.substr(0,"@global ".length))return new Re(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),!1===n.scoped&&(n.selector=e),null},onProcessRule:function(e){"style"===e.type&&(function(e){var t=e.options,n=e.style,r=n?n[Le]:null;if(r){for(var o in r)t.sheet.addRule(o,r[o],Object(i.a)({},t,{selector:Ie(o,e.selector)}));delete n[Le]}}(e),function(e){var t=e.options,n=e.style;for(var r in n)if("@"===r[0]&&r.substr(0,Le.length)===Le){var o=Ie(r.substr(Le.length),e.selector);t.sheet.addRule(o,n[r],Object(i.a)({},t,{selector:o})),delete n[r]}}(e))}}},ke=/\s*,\s*/g,Ne=/&/g,De=/\$([\w-]+)/g;var Fe=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?(i=i).selector:r}}function t(e,t){for(var n=t.split(ke),r=e.split(ke),i="",o=0;o<n.length;o++)for(var a=n[o],s=0;s<r.length;s++){var u=r[s];i&&(i+=", "),i+=-1!==u.indexOf("&")?u.replace(Ne,a):a+" "+u}return i}function n(e,t,n){if(n)return Object(i.a)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var o=Object(i.a)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete o.name,o}return{onProcessStyle:function(r,o,a){if("style"!==o.type)return r;var s,u,l=o,c=l.options.parent;for(var h in r){var f=-1!==h.indexOf("&"),d="@"===h[0];if(f||d){if(s=n(l,c,s),f){var p=t(h,l.selector);u||(u=e(c,a)),p=p.replace(De,u),c.addRule(p,r[h],Object(i.a)({},s,{selector:p}))}else d&&c.addRule(h,{},s).addRule(l.key,r[h],{selector:l.selector});delete r[h]}}return r}}},je=/[A-Z]/g,Be=/^ms-/,Ve={};function Ge(e){return"-"+e.toLowerCase()}var Ue=function(e){if(Ve.hasOwnProperty(e))return Ve[e];var t=e.replace(je,Ge);return Ve[e]=Be.test(t)?"-"+t:t};function qe(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Ue(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(qe):t.fallbacks=qe(e.fallbacks)),t}var We=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=qe(e[t]);return e}return qe(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Ue(t);return t===r?e:(n.prop(r,e),null)}}},ze=Ae&&CSS?CSS.px:"px",He=Ae&&CSS?CSS.ms:"ms",Ke=Ae&&CSS?CSS.percent:"%";function Ye(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var Qe=Ye({"animation-delay":He,"animation-duration":He,"background-position":ze,"background-position-x":ze,"background-position-y":ze,"background-size":ze,border:ze,"border-bottom":ze,"border-bottom-left-radius":ze,"border-bottom-right-radius":ze,"border-bottom-width":ze,"border-left":ze,"border-left-width":ze,"border-radius":ze,"border-right":ze,"border-right-width":ze,"border-top":ze,"border-top-left-radius":ze,"border-top-right-radius":ze,"border-top-width":ze,"border-width":ze,margin:ze,"margin-bottom":ze,"margin-left":ze,"margin-right":ze,"margin-top":ze,padding:ze,"padding-bottom":ze,"padding-left":ze,"padding-right":ze,"padding-top":ze,"mask-position-x":ze,"mask-position-y":ze,"mask-size":ze,height:ze,width:ze,"min-height":ze,"max-height":ze,"min-width":ze,"max-width":ze,bottom:ze,left:ze,top:ze,right:ze,"box-shadow":ze,"text-shadow":ze,"column-gap":ze,"column-rule":ze,"column-rule-width":ze,"column-width":ze,"font-size":ze,"font-size-delta":ze,"letter-spacing":ze,"text-indent":ze,"text-stroke":ze,"text-stroke-width":ze,"word-spacing":ze,motion:ze,"motion-offset":ze,outline:ze,"outline-offset":ze,"outline-width":ze,perspective:ze,"perspective-origin-x":Ke,"perspective-origin-y":Ke,"transform-origin":Ke,"transform-origin-x":Ke,"transform-origin-y":Ke,"transform-origin-z":Ke,"transition-delay":He,"transition-duration":He,"vertical-align":ze,"flex-basis":ze,"shape-margin":ze,size:ze,grid:ze,"grid-gap":ze,"grid-row-gap":ze,"grid-column-gap":ze,"grid-template-rows":ze,"grid-template-columns":ze,"grid-auto-rows":ze,"grid-auto-columns":ze,"box-shadow-x":ze,"box-shadow-y":ze,"box-shadow-blur":ze,"box-shadow-spread":ze,"font-line-height":ze,"text-shadow-x":ze,"text-shadow-y":ze,"text-shadow-blur":ze});function Xe(e,t,n){if(!t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Xe(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=Xe(i,t[i],n);else for(var o in t)t[o]=Xe(e+"-"+o,t[o],n);else if("number"===typeof t){var a=n[e]||Qe[e];return a?"function"===typeof a?a(t).toString():""+t+a:t.toString()}return t}var Je=function(e){void 0===e&&(e={});var t=Ye(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=Xe(r,e[r],t);return e},onChangeValue:function(e,n){return Xe(n,e,t)}}},Ze=n(37),$e="",et="",tt="",nt="",rt=u&&"ontouchstart"in document.documentElement;if(u){var it={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},ot=document.createElement("p").style;for(var at in it)if(at+"Transform"in ot){$e=at,et=it[at];break}"Webkit"===$e&&"msHyphens"in ot&&($e="ms",et=it.ms,nt="edge"),"Webkit"===$e&&"-apple-trailing-word"in ot&&(tt="apple")}var st=$e,ut=et,lt=tt,ct=nt,ht=rt;var ft={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===st?"-webkit-"+e:ut+e)}},dt={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===st?ut+"print-"+e:e)}},pt=/[-\s]+(.)?/g;function mt(e,t){return t?t.toUpperCase():""}function gt(e){return e.replace(pt,mt)}function At(e){return gt("-"+e)}var vt,yt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===st){if(gt("mask-image")in t)return e;if(st+At("mask-image")in t)return ut+e}return e}},bt={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==lt||ht?e:ut+e)}},_t={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:ut+e)}},wt={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:ut+e)}},Et={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===st||"ms"===st&&"edge"!==ct?ut+e:e)}},xt={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===st||"ms"===st||"apple"===lt?ut+e:e)}},St={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===st?"WebkitColumn"+At(e)in t&&ut+"column-"+e:"Moz"===st&&("page"+At(e)in t&&"page-"+e))}},Tt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===st)return e;var n=e.replace("-inline","");return st+At(n)in t&&ut+n}},Mt={supportedProperty:function(e,t){return gt(e)in t&&e}},Lt={supportedProperty:function(e,t){var n=At(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:st+n in t?ut+e:"Webkit"!==st&&"Webkit"+n in t&&"-webkit-"+e}},Ct={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===st?""+ut+e:e)}},Rt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===st?ut+"scroll-chaining":e)}},Ot={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},It={supportedProperty:function(e,t){var n=Ot[e];return!!n&&(st+At(n)in t&&ut+n)}},Pt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},kt=Object.keys(Pt),Nt=function(e){return ut+e},Dt=[ft,dt,yt,bt,_t,wt,Et,xt,St,Tt,Mt,Lt,Ct,Rt,It,{supportedProperty:function(e,t,n){var r=n.multiple;if(kt.indexOf(e)>-1){var i=Pt[e];if(!Array.isArray(i))return st+At(i)in t&&ut+i;if(!r)return!1;for(var o=0;o<i.length;o++)if(!(st+At(i[0])in t))return!1;return i.map(Nt)}return!1}}],Ft=Dt.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),jt=Dt.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Object(Ze.a)(t.noPrefill)),e}),[]),Bt={};if(u){vt=document.createElement("p");var Vt=window.getComputedStyle(document.documentElement,"");for(var Gt in Vt)isNaN(Gt)||(Bt[Vt[Gt]]=Vt[Gt]);jt.forEach((function(e){return delete Bt[e]}))}function Ut(e,t){if(void 0===t&&(t={}),!vt)return e;if(null!=Bt[e])return Bt[e];"transition"!==e&&"transform"!==e||(t[e]=e in vt.style);for(var n=0;n<Ft.length&&(Bt[e]=Ft[n](e,vt.style,t),!Bt[e]);n++);try{vt.style[e]=""}catch(r){return!1}return Bt[e]}var qt,Wt={},zt={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Ht=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Kt(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Ut(t):", "+Ut(n);return r||(t||n)}function Yt(e,t){var n=t;if(!qt||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=Wt[r])return Wt[r];try{qt.style[e]=n}catch(i){return Wt[r]=!1,!1}if(zt[e])n=n.replace(Ht,Kt);else if(""===qt.style[e]&&("-ms-flex"===(n=ut+n)&&(qt.style[e]="-ms-flexbox"),qt.style[e]=n,""===qt.style[e]))return Wt[r]=!1,!1;return qt.style[e]="",Wt[r]=n,Wt[r]}u&&(qt=document.createElement("p"));var Qt=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,o=Ut(n);o&&o!==n&&(i=!0);var a=!1,s=Yt(o,A(r));s&&s!==r&&(a=!0),(i||a)&&(i&&delete t[n],t[o||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at="-"===(n=t.at)[1]||"ms"===st?n:"@"+ut+"keyframes"+n.substr(10)}var n},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return Yt(t,A(e))||e}}};var Xt=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),o=0;o<i.length;o++)r[i[o]]=t[i[o]];return r}}};function Jt(){return{plugins:[Me(),Pe(),Fe(),We(),Je(),"undefined"===typeof window?null:Qt(),Xt()]}}var Zt=ve(Jt()),$t={disableGeneration:!1,generateClassName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,o=e.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),u=0,l=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Ee.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[we]&&""===a?"".concat(o,"-").concat(l()):o}return"".concat(s).concat(i).concat(l())}}(),jss:Zt,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},en=a.a.createContext($t);var tn=-1e9;function nn(){return tn+=1}n(41);var rn=n(203);function on(e){var t="function"===typeof e;return{create:function(n,r){var o;try{o=t?e(n):e}catch(u){throw u}if(!r||!n.overrides||!n.overrides[r])return o;var a=n.overrides[r],s=Object(i.a)({},o);return Object.keys(a).forEach((function(e){s[e]=Object(rn.a)(s[e],a[e])})),s},options:{}}}var an={};function sn(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=Object(ye.a)({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function un(e,t){var n=e.state,r=e.theme,o=e.stylesOptions,a=e.stylesCreator,s=e.name;if(!o.disableGeneration){var u=be.get(o.sheetsManager,a,r);u||(u={refs:0,staticSheet:null,dynamicStyles:null},be.set(o.sheetsManager,a,r,u));var l=Object(i.a)(Object(i.a)(Object(i.a)({},a.options),o),{},{theme:r,flip:"boolean"===typeof o.flip?o.flip:"rtl"===r.direction});l.generateId=l.serverGenerateClassName||l.generateClassName;var c=o.sheetsRegistry;if(0===u.refs){var h;o.sheetsCache&&(h=be.get(o.sheetsCache,a,r));var f=a.create(r,s);h||((h=o.jss.createStyleSheet(f,Object(i.a)({link:!1},l))).attach(),o.sheetsCache&&be.set(o.sheetsCache,a,r,h)),c&&c.add(h),u.staticSheet=h,u.dynamicStyles=function e(t){var n=null;for(var r in t){var i=t[r],o=typeof i;if("function"===o)n||(n={}),n[r]=i;else if("object"===o&&null!==i&&!Array.isArray(i)){var a=e(i);a&&(n||(n={}),n[r]=a)}}return n}(f)}if(u.dynamicStyles){var d=o.jss.createStyleSheet(u.dynamicStyles,Object(i.a)({link:!0},l));d.update(t),d.attach(),n.dynamicSheet=d,n.classes=Object(ye.a)({baseClasses:u.staticSheet.classes,newClasses:d.classes}),c&&c.add(d)}else n.classes=u.staticSheet.classes;u.refs+=1}}function ln(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function cn(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var o=be.get(r.sheetsManager,i,n);o.refs-=1;var a=r.sheetsRegistry;0===o.refs&&(be.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),a&&a.remove(t.dynamicSheet))}}function hn(e,t){var n,r=a.a.useRef([]),i=a.a.useMemo((function(){return{}}),t);r.current!==i&&(r.current=i,n=e()),a.a.useEffect((function(){return function(){n&&n()}}),[i])}function fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,o=t.classNamePrefix,s=t.Component,u=t.defaultTheme,l=void 0===u?an:u,c=Object(r.a)(t,["name","classNamePrefix","Component","defaultTheme"]),h=on(e),f=n||o||"makeStyles";h.options={index:nn(),name:n,meta:f,classNamePrefix:f};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(_e.a)()||l,r=Object(i.a)(Object(i.a)({},a.a.useContext(en)),c),o=a.a.useRef(),u=a.a.useRef();hn((function(){var i={name:n,state:{},stylesCreator:h,stylesOptions:r,theme:t};return un(i,e),u.current=!1,o.current=i,function(){cn(i)}}),[t,h]),a.a.useEffect((function(){u.current&&ln(o.current,e),u.current=!0}));var f=sn(o.current,e.classes,s);return f};return d}},function(e,t,n){"use strict";var r=n(5),i=n(2),o=n(0),a=n(16),s=(n(1),n(166)),u=n(207),l=n(22),c=n(209),h=n(31),f=n(11),d=n(27),p=n(62);var m=n(47),g=n(37),A=n(69),v=n(68);function y(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function b(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function _(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[t,n].concat(Object(g.a)(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===o.indexOf(e)&&-1===a.indexOf(e.tagName)&&y(e,i)}))}function w(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function E(e,t){var n,r=[],i=[],o=e.container;if(!t.disableScrollLock){if(function(e){var t=Object(l.a)(e);return t.body===e?Object(v.a)(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(o)){var a=Object(A.a)();r.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(b(o)+a,"px"),n=Object(l.a)(o).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){i.push(e.style.paddingRight),e.style.paddingRight="".concat(b(e)+a,"px")}))}var s=o.parentElement,u="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:o;r.push({value:u.style.overflow,key:"overflow",el:u}),u.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){i[t]?e.style.paddingRight=i[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modals=[],this.containers=[]}return Object(m.a)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&y(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);_(t,e.mountNode,e.modalRef,r,!0);var i=w(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=w(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=E(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=w(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&y(e.modalRef,!0),_(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&y(i.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var S=function(e){var t=e.children,n=e.disableAutoFocus,r=void 0!==n&&n,i=e.disableEnforceFocus,s=void 0!==i&&i,u=e.disableRestoreFocus,c=void 0!==u&&u,h=e.getDoc,d=e.isEnabled,p=e.open,m=o.useRef(),g=o.useRef(null),A=o.useRef(null),v=o.useRef(),y=o.useRef(null),b=o.useCallback((function(e){y.current=a.findDOMNode(e)}),[]),_=Object(f.a)(t.ref,b),w=o.useRef();return o.useEffect((function(){w.current=p}),[p]),!w.current&&p&&"undefined"!==typeof window&&(v.current=h().activeElement),o.useEffect((function(){if(p){var e=Object(l.a)(y.current);r||!y.current||y.current.contains(e.activeElement)||(y.current.hasAttribute("tabIndex")||y.current.setAttribute("tabIndex",-1),y.current.focus());var t=function(){e.hasFocus()&&!s&&d()&&!m.current?y.current&&!y.current.contains(e.activeElement)&&y.current.focus():m.current=!1},n=function(t){!s&&d()&&9===t.keyCode&&e.activeElement===y.current&&(m.current=!0,t.shiftKey?A.current.focus():g.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var i=setInterval((function(){t()}),50);return function(){clearInterval(i),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),c||(v.current&&v.current.focus&&v.current.focus(),v.current=null)}}}),[r,s,c,d,p]),o.createElement(o.Fragment,null,o.createElement("div",{tabIndex:0,ref:g,"data-test":"sentinelStart"}),o.cloneElement(t,{ref:_}),o.createElement("div",{tabIndex:0,ref:A,"data-test":"sentinelEnd"}))},T={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},M=o.forwardRef((function(e,t){var n=e.invisible,a=void 0!==n&&n,s=e.open,u=Object(r.a)(e,["invisible","open"]);return s?o.createElement("div",Object(i.a)({"aria-hidden":!0,ref:t},u,{style:Object(i.a)({},T.root,a?T.invisible:{},u.style)})):null}));var L=new x,C=o.forwardRef((function(e,t){var n=Object(s.a)(),m=Object(u.a)({name:"MuiModal",props:Object(i.a)({},e),theme:n}),g=m.BackdropComponent,A=void 0===g?M:g,v=m.BackdropProps,b=m.children,_=m.closeAfterTransition,w=void 0!==_&&_,E=m.container,x=m.disableAutoFocus,T=void 0!==x&&x,C=m.disableBackdropClick,R=void 0!==C&&C,O=m.disableEnforceFocus,I=void 0!==O&&O,P=m.disableEscapeKeyDown,k=void 0!==P&&P,N=m.disablePortal,D=void 0!==N&&N,F=m.disableRestoreFocus,j=void 0!==F&&F,B=m.disableScrollLock,V=void 0!==B&&B,G=m.hideBackdrop,U=void 0!==G&&G,q=m.keepMounted,W=void 0!==q&&q,z=m.manager,H=void 0===z?L:z,K=m.onBackdropClick,Y=m.onClose,Q=m.onEscapeKeyDown,X=m.onRendered,J=m.open,Z=Object(r.a)(m,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),$=o.useState(!0),ee=$[0],te=$[1],ne=o.useRef({}),re=o.useRef(null),ie=o.useRef(null),oe=Object(f.a)(ie,t),ae=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(m),se=function(){return Object(l.a)(re.current)},ue=function(){return ne.current.modalRef=ie.current,ne.current.mountNode=re.current,ne.current},le=function(){H.mount(ue(),{disableScrollLock:V}),ie.current.scrollTop=0},ce=Object(d.a)((function(){var e=function(e){return e="function"===typeof e?e():e,a.findDOMNode(e)}(E)||se().body;H.add(ue(),e),ie.current&&le()})),he=o.useCallback((function(){return H.isTopModal(ue())}),[H]),fe=Object(d.a)((function(e){re.current=e,e&&(X&&X(),J&&he()?le():y(ie.current,!0))})),de=o.useCallback((function(){H.remove(ue())}),[H]);if(o.useEffect((function(){return function(){de()}}),[de]),o.useEffect((function(){J?ce():ae&&w||de()}),[J,de,ae,w,ce]),!W&&!J&&(!ae||ee))return null;var pe=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:p.a}),me={};return void 0===b.props.tabIndex&&(me.tabIndex=b.props.tabIndex||"-1"),ae&&(me.onEnter=Object(h.a)((function(){te(!1)}),b.props.onEnter),me.onExited=Object(h.a)((function(){te(!0),w&&de()}),b.props.onExited)),o.createElement(c.a,{ref:fe,container:E,disablePortal:D},o.createElement("div",Object(i.a)({ref:oe,onKeyDown:function(e){"Escape"===e.key&&he()&&(Q&&Q(e),k||(e.stopPropagation(),Y&&Y(e,"escapeKeyDown")))},role:"presentation"},Z,{style:Object(i.a)({},pe.root,!J&&ee?pe.hidden:{},Z.style)}),U?null:o.createElement(A,Object(i.a)({open:J,onClick:function(e){e.target===e.currentTarget&&(K&&K(e),!R&&Y&&Y(e,"backdropClick"))}},v)),o.createElement(S,{disableEnforceFocus:I,disableAutoFocus:T,disableRestoreFocus:j,getDoc:se,isEnabled:he,open:J},o.cloneElement(b,me))))}));t.a=C},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n.n(r);var o=i.a.createContext(null);function a(){return i.a.useContext(o)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(2),i=n(164),o=n(46);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(e,Object(r.a)({defaultTheme:o.a},t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var i=Object(r.a)({},t);return Object.keys(n).forEach((function(e){n[e]&&(i[e]="".concat(t[e]," ").concat(n[e]))})),i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n(41);function o(e){return e&&"object"===Object(i.a)(e)&&e.constructor===Object}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},i=n.clone?Object(r.a)({},e):e;return o(e)&&o(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(o(t[r])&&r in e?i[r]=a(e[r],t[r],n):i[r]=t[r])})),i}},function(e,t,n){"use strict";t.a={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"}},function(e,t,n){"use strict";t.a={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"}},function(e,t,n){"use strict";var r=n(5),i=n(2),o=n(0),a=(n(1),n(6)),s=n(8),u=n(17),l=n(71),c=n(10),h=o.forwardRef((function(e,t){var n=e.children,s=e.classes,u=e.className,h=e.color,f=void 0===h?"default":h,d=e.component,p=void 0===d?"button":d,m=e.disabled,g=void 0!==m&&m,A=e.disableElevation,v=void 0!==A&&A,y=e.disableFocusRipple,b=void 0!==y&&y,_=e.endIcon,w=e.focusVisibleClassName,E=e.fullWidth,x=void 0!==E&&E,S=e.size,T=void 0===S?"medium":S,M=e.startIcon,L=e.type,C=void 0===L?"button":L,R=e.variant,O=void 0===R?"text":R,I=Object(r.a)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),P=M&&o.createElement("span",{className:Object(a.a)(s.startIcon,s["iconSize".concat(Object(c.a)(T))])},M),k=_&&o.createElement("span",{className:Object(a.a)(s.endIcon,s["iconSize".concat(Object(c.a)(T))])},_);return o.createElement(l.a,Object(i.a)({className:Object(a.a)(s.root,s[O],u,"inherit"===f?s.colorInherit:"default"!==f&&s["".concat(O).concat(Object(c.a)(f))],"medium"!==T&&[s["".concat(O,"Size").concat(Object(c.a)(T))],s["size".concat(Object(c.a)(T))]],v&&s.disableElevation,g&&s.disabled,x&&s.fullWidth),component:p,disabled:g,focusRipple:!b,focusVisibleClassName:Object(a.a)(s.focusVisible,w),ref:t,type:C},I),o.createElement("span",{className:s.label},P,n,k))}));t.a=Object(s.a)((function(e){return{root:Object(i.a)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:Object(u.c)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(u.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(u.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(Object(u.c)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:Object(u.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(Object(u.c)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:Object(u.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(h)},function(e,t,n){"use strict";function r(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,o=t.props[n];for(i in o)void 0===r[i]&&(r[i]=o[i]);return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(5),i=n(2),o=n(0),a=(n(1),n(6)),s=n(17),u=n(8),l=n(71),c=n(10),h=o.forwardRef((function(e,t){var n=e.children,s=e.classes,u=e.className,h=e.disabled,f=void 0!==h&&h,d=e.disableFocusRipple,p=void 0!==d&&d,m=e.onChange,g=e.onClick,A=e.selected,v=e.size,y=void 0===v?"medium":v,b=e.value,_=Object(r.a)(e,["children","classes","className","disabled","disableFocusRipple","onChange","onClick","selected","size","value"]);return o.createElement(l.a,Object(i.a)({className:Object(a.a)(s.root,u,f&&s.disabled,A&&s.selected,"medium"!==y&&s["size".concat(Object(c.a)(y))]),disabled:f,focusRipple:!p,ref:t,onClick:function(e){g&&(g(e,b),e.isDefaultPrevented())||m&&m(e,b)},onChange:m,value:b,"aria-pressed":A},_),o.createElement("span",{className:s.label},n))}));t.a=Object(u.a)((function(e){return{root:Object(i.a)({},e.typography.button,{boxSizing:"border-box",borderRadius:e.shape.borderRadius,padding:11,border:"1px solid ".concat(Object(s.c)(e.palette.action.active,.12)),color:Object(s.c)(e.palette.action.active,.38),"&$selected":{color:e.palette.action.active,backgroundColor:Object(s.c)(e.palette.action.active,.12),"&:hover":{backgroundColor:Object(s.c)(e.palette.action.active,.15)},"& + &":{borderLeft:0,marginLeft:0}},"&$disabled":{color:Object(s.c)(e.palette.action.disabled,.12)},"&:hover":{textDecoration:"none",backgroundColor:Object(s.c)(e.palette.text.primary,.05),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),disabled:{},selected:{},label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},sizeSmall:{padding:7,fontSize:e.typography.pxToRem(13)},sizeLarge:{padding:15,fontSize:e.typography.pxToRem(15)}}}),{name:"MuiToggleButton"})(h)},function(e,t,n){"use strict";var r=n(0),i=n(16),o=(n(1),n(28)),a=n(11);var s="undefined"!==typeof window?r.useLayoutEffect:r.useEffect,u=r.forwardRef((function(e,t){var n=e.children,u=e.container,l=e.disablePortal,c=void 0!==l&&l,h=e.onRendered,f=r.useState(null),d=f[0],p=f[1],m=Object(a.a)(r.isValidElement(n)?n.ref:null,t);return s((function(){c||p(function(e){return e="function"===typeof e?e():e,i.findDOMNode(e)}(u)||document.body)}),[u,c]),s((function(){if(d&&!c)return Object(o.a)(t,d),function(){Object(o.a)(t,null)}}),[t,d,c]),s((function(){h&&(d||c)&&h()}),[h,d,c]),c?r.isValidElement(n)?r.cloneElement(n,{ref:m}):n:d?i.createPortal(n,d):d}));t.a=u},function(e,t,n){"use strict";var r=n(2),i=n(34),o=n(5),a=n(0),s=(n(1),n(110)),u=n(21),l=n(29),c=n(11);function h(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var f={entering:{opacity:1,transform:h(1)},entered:{opacity:1,transform:"none"}},d=a.forwardRef((function(e,t){var n=e.children,d=e.disableStrictModeCompat,p=void 0!==d&&d,m=e.in,g=e.onEnter,A=e.onEntered,v=e.onEntering,y=e.onExit,b=e.onExited,_=e.onExiting,w=e.style,E=e.timeout,x=void 0===E?"auto":E,S=e.TransitionComponent,T=void 0===S?s.a:S,M=Object(o.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),L=a.useRef(),C=a.useRef(),R=Object(u.a)(),O=R.unstable_strictMode&&!p,I=a.useRef(null),P=Object(c.a)(n.ref,t),k=Object(c.a)(O?I:void 0,P),N=function(e){return function(t,n){if(e){var r=O?[I.current,t]:[t,n],o=Object(i.a)(r,2),a=o[0],s=o[1];void 0===s?e(a):e(a,s)}}},D=N(v),F=N((function(e,t){Object(l.b)(e);var n,r=Object(l.a)({style:w,timeout:x},{mode:"enter"}),i=r.duration,o=r.delay;"auto"===x?(n=R.transitions.getAutoHeightDuration(e.clientHeight),C.current=n):n=i,e.style.transition=[R.transitions.create("opacity",{duration:n,delay:o}),R.transitions.create("transform",{duration:.666*n,delay:o})].join(","),g&&g(e,t)})),j=N(A),B=N(_),V=N((function(e){var t,n=Object(l.a)({style:w,timeout:x},{mode:"exit"}),r=n.duration,i=n.delay;"auto"===x?(t=R.transitions.getAutoHeightDuration(e.clientHeight),C.current=t):t=r,e.style.transition=[R.transitions.create("opacity",{duration:t,delay:i}),R.transitions.create("transform",{duration:.666*t,delay:i||.333*t})].join(","),e.style.opacity="0",e.style.transform=h(.75),y&&y(e)})),G=N(b);return a.useEffect((function(){return function(){clearTimeout(L.current)}}),[]),a.createElement(T,Object(r.a)({appear:!0,in:m,nodeRef:O?I:void 0,onEnter:F,onEntered:j,onEntering:D,onExit:V,onExited:G,onExiting:B,addEndListener:function(e,t){var n=O?e:t;"auto"===x&&(L.current=setTimeout(n,C.current||0))},timeout:"auto"===x?null:x},M),(function(e,t){return a.cloneElement(n,Object(r.a)({style:Object(r.a)({opacity:0,transform:h(.75),visibility:"exited"!==e||m?void 0:"hidden"},f[e],w,n.props.style),ref:k},t))}))}));d.muiSupportAuto=!0,t.a=d},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=n(51),l=o.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,c=e.component,h=void 0===c?"ul":c,f=e.dense,d=void 0!==f&&f,p=e.disablePadding,m=void 0!==p&&p,g=e.subheader,A=Object(i.a)(e,["children","classes","className","component","dense","disablePadding","subheader"]),v=o.useMemo((function(){return{dense:d}}),[d]);return o.createElement(u.a.Provider,{value:v},o.createElement(h,Object(r.a)({className:Object(a.a)(s.root,l,d&&s.dense,!m&&s.padding,g&&s.subheader),ref:t},A),g,n))}));t.a=Object(s.a)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(l)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=n(17),l=o.forwardRef((function(e,t){var n=e.absolute,s=void 0!==n&&n,u=e.classes,l=e.className,c=e.component,h=void 0===c?"hr":c,f=e.flexItem,d=void 0!==f&&f,p=e.light,m=void 0!==p&&p,g=e.orientation,A=void 0===g?"horizontal":g,v=e.role,y=void 0===v?"hr"!==h?"separator":void 0:v,b=e.variant,_=void 0===b?"fullWidth":b,w=Object(i.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return o.createElement(h,Object(r.a)({className:Object(a.a)(u.root,l,"fullWidth"!==_&&u[_],s&&u.absolute,d&&u.flexItem,m&&u.light,"vertical"===A&&u.vertical),role:y,ref:t},w))}));t.a=Object(s.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(u.c)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(l)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=n(71),l=n(50),c=n(11),h=n(51),f=n(16),d="undefined"===typeof window?o.useEffect:o.useLayoutEffect,p=o.forwardRef((function(e,t){var n=e.alignItems,s=void 0===n?"center":n,p=e.autoFocus,m=void 0!==p&&p,g=e.button,A=void 0!==g&&g,v=e.children,y=e.classes,b=e.className,_=e.component,w=e.ContainerComponent,E=void 0===w?"li":w,x=e.ContainerProps,S=(x=void 0===x?{}:x).className,T=Object(i.a)(x,["className"]),M=e.dense,L=void 0!==M&&M,C=e.disabled,R=void 0!==C&&C,O=e.disableGutters,I=void 0!==O&&O,P=e.divider,k=void 0!==P&&P,N=e.focusVisibleClassName,D=e.selected,F=void 0!==D&&D,j=Object(i.a)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),B=o.useContext(h.a),V={dense:L||B.dense||!1,alignItems:s},G=o.useRef(null);d((function(){m&&G.current&&G.current.focus()}),[m]);var U=o.Children.toArray(v),q=U.length&&Object(l.a)(U[U.length-1],["ListItemSecondaryAction"]),W=o.useCallback((function(e){G.current=f.findDOMNode(e)}),[]),z=Object(c.a)(W,t),H=Object(r.a)({className:Object(a.a)(y.root,b,V.dense&&y.dense,!I&&y.gutters,k&&y.divider,R&&y.disabled,A&&y.button,"center"!==s&&y.alignItemsFlexStart,q&&y.secondaryAction,F&&y.selected),disabled:R},j),K=_||"li";return A&&(H.component=_||"div",H.focusVisibleClassName=Object(a.a)(y.focusVisible,N),K=u.a),q?(K=H.component||_?K:"div","li"===E&&("li"===K?K="div":"li"===H.component&&(H.component="div")),o.createElement(h.a.Provider,{value:V},o.createElement(E,Object(r.a)({className:Object(a.a)(y.container,S),ref:z},T),o.createElement(K,H,U),U.pop()))):o.createElement(h.a.Provider,{value:V},o.createElement(K,Object(r.a)({ref:z},H),U))}));t.a=Object(s.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(p)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(15),a=n(0),s=(n(1),n(6)),u=n(8),l=n(10),c=n(165),h=n(163),f=n(109),d=n(24),p=n(108),m={enter:d.b.enteringScreen,exit:d.b.leavingScreen},g=a.forwardRef((function(e,t){var n=e.BackdropProps,o=e.children,u=e.classes,d=e.className,g=e.disableBackdropClick,A=void 0!==g&&g,v=e.disableEscapeKeyDown,y=void 0!==v&&v,b=e.fullScreen,_=void 0!==b&&b,w=e.fullWidth,E=void 0!==w&&w,x=e.maxWidth,S=void 0===x?"sm":x,T=e.onBackdropClick,M=e.onClose,L=e.onEnter,C=e.onEntered,R=e.onEntering,O=e.onEscapeKeyDown,I=e.onExit,P=e.onExited,k=e.onExiting,N=e.open,D=e.PaperComponent,F=void 0===D?p.a:D,j=e.PaperProps,B=void 0===j?{}:j,V=e.scroll,G=void 0===V?"paper":V,U=e.TransitionComponent,q=void 0===U?f.a:U,W=e.transitionDuration,z=void 0===W?m:W,H=e.TransitionProps,K=e["aria-describedby"],Y=e["aria-labelledby"],Q=Object(i.a)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),X=a.useRef();return a.createElement(c.a,Object(r.a)({className:Object(s.a)(u.root,d),BackdropComponent:h.a,BackdropProps:Object(r.a)({transitionDuration:z},n),closeAfterTransition:!0,disableBackdropClick:A,disableEscapeKeyDown:y,onEscapeKeyDown:O,onClose:M,open:N,ref:t},Q),a.createElement(q,Object(r.a)({appear:!0,in:N,timeout:z,onEnter:L,onEntering:R,onEntered:C,onExit:I,onExiting:k,onExited:P,role:"none presentation"},H),a.createElement("div",{className:Object(s.a)(u.container,u["scroll".concat(Object(l.a)(G))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===X.current&&(X.current=null,T&&T(e),!A&&M&&M(e,"backdropClick"))},onMouseDown:function(e){X.current=e.target}},a.createElement(F,Object(r.a)({elevation:24,role:"dialog","aria-describedby":K,"aria-labelledby":Y},B,{className:Object(s.a)(u.paper,u["paperScroll".concat(Object(l.a)(G))],u["paperWidth".concat(Object(l.a)(String(S)))],B.className,_&&u.paperFullScreen,E&&u.paperFullWidth)}),o))))}));t.a=Object(u.a)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Object(o.a)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Object(o.a)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Object(o.a)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Object(o.a)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Object(o.a)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(g)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=n(162),l=o.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,c=e.disableTypography,h=void 0!==c&&c,f=Object(i.a)(e,["children","classes","className","disableTypography"]);return o.createElement("div",Object(r.a)({className:Object(a.a)(s.root,l),ref:t},f),h?n:o.createElement(u.a,{component:"h2",variant:"h6"},n))}));t.a=Object(s.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(l)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=o.forwardRef((function(e,t){var n=e.classes,s=e.className,u=e.dividers,l=void 0!==u&&u,c=Object(i.a)(e,["classes","className","dividers"]);return o.createElement("div",Object(r.a)({className:Object(a.a)(n.root,s,l&&n.dividers),ref:t},c))}));t.a=Object(s.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(u)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=o.forwardRef((function(e,t){var n=e.disableSpacing,s=void 0!==n&&n,u=e.classes,l=e.className,c=Object(i.a)(e,["disableSpacing","classes","className"]);return o.createElement("div",Object(r.a)({className:Object(a.a)(u.root,l,!s&&u.spacing),ref:t},c))}));t.a=Object(s.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(u)},function(e,t,n){"use strict";var r=n(2),i=n(0),o=(n(1),n(8)),a={WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box"},s=function(e){return Object(r.a)({color:e.palette.text.primary},e.typography.body2,{backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}})};t.a=Object(o.a)((function(e){return{"@global":{html:a,"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:Object(r.a)({margin:0},s(e),{"&::backdrop":{backgroundColor:e.palette.background.default}})}}}),{name:"MuiCssBaseline"})((function(e){var t=e.children,n=void 0===t?null:t;return e.classes,i.createElement(i.Fragment,null,n)}))},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=n(10),l=n(108),c=o.forwardRef((function(e,t){var n=e.classes,s=e.className,c=e.color,h=void 0===c?"primary":c,f=e.position,d=void 0===f?"fixed":f,p=Object(i.a)(e,["classes","className","color","position"]);return o.createElement(l.a,Object(r.a)({square:!0,component:"header",elevation:4,className:Object(a.a)(n.root,n["position".concat(Object(u.a)(d))],n["color".concat(Object(u.a)(h))],s,"fixed"===d&&"mui-fixed"),ref:t},p))}));t.a=Object(s.a)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(c)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(15),a=n(0),s=(n(1),n(6)),u=n(8),l=a.forwardRef((function(e,t){var n=e.classes,o=e.className,u=e.component,l=void 0===u?"div":u,c=e.disableGutters,h=void 0!==c&&c,f=e.variant,d=void 0===f?"regular":f,p=Object(i.a)(e,["classes","className","component","disableGutters","variant"]);return a.createElement(l,Object(r.a)({className:Object(s.a)(n.root,n[d],o,!h&&n.gutters),ref:t},p))}));t.a=Object(u.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:Object(o.a)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),regular:e.mixins.toolbar,dense:{minHeight:48}}}),{name:"MuiToolbar"})(l)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=n(17),l=n(71),c=n(10),h=o.forwardRef((function(e,t){var n=e.edge,s=void 0!==n&&n,u=e.children,h=e.classes,f=e.className,d=e.color,p=void 0===d?"default":d,m=e.disabled,g=void 0!==m&&m,A=e.disableFocusRipple,v=void 0!==A&&A,y=e.size,b=void 0===y?"medium":y,_=Object(i.a)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return o.createElement(l.a,Object(r.a)({className:Object(a.a)(h.root,f,"default"!==p&&h["color".concat(Object(c.a)(p))],g&&h.disabled,"small"===b&&h["size".concat(Object(c.a)(b))],{start:h.edgeStart,end:h.edgeEnd}[s]),centerRipple:!0,focusRipple:!v,disabled:g,ref:t},_),o.createElement("span",{className:h.label},u))}));t.a=Object(s.a)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(u.c)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(u.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(u.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(h)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(107);function u(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var l=o.createContext();var c=l,h=n(8),f=n(10),d=n(11),p=n(45);function m(e,t){return parseInt(e[t],10)||0}var g="undefined"!==typeof window?o.useLayoutEffect:o.useEffect,A={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},v=o.forwardRef((function(e,t){var n=e.onChange,a=e.rows,s=e.rowsMax,u=e.rowsMin,l=void 0===u?1:u,c=e.style,h=e.value,f=Object(i.a)(e,["onChange","rows","rowsMax","rowsMin","style","value"]),v=a||l,y=o.useRef(null!=h).current,b=o.useRef(null),_=Object(d.a)(t,b),w=o.useRef(null),E=o.useRef(0),x=o.useState({}),S=x[0],T=x[1],M=o.useCallback((function(){var t=b.current,n=window.getComputedStyle(t),r=w.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],o=m(n,"padding-bottom")+m(n,"padding-top"),a=m(n,"border-bottom-width")+m(n,"border-top-width"),u=r.scrollHeight-o;r.value="x";var l=r.scrollHeight-o,c=u;v&&(c=Math.max(Number(v)*l,c)),s&&(c=Math.min(Number(s)*l,c));var h=(c=Math.max(c,l))+("border-box"===i?o+a:0),f=Math.abs(c-u)<=1;T((function(e){return E.current<20&&(h>0&&Math.abs((e.outerHeightStyle||0)-h)>1||e.overflow!==f)?(E.current+=1,{overflow:f,outerHeightStyle:h}):e}))}),[s,v,e.placeholder]);o.useEffect((function(){var e=Object(p.a)((function(){E.current=0,M()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[M]),g((function(){M()})),o.useEffect((function(){E.current=0}),[h]);return o.createElement(o.Fragment,null,o.createElement("textarea",Object(r.a)({value:h,onChange:function(e){E.current=0,y||M(),n&&n(e)},ref:_,rows:v,style:Object(r.a)({height:S.outerHeightStyle,overflow:S.overflow?"hidden":null},c)},f)),o.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:w,tabIndex:-1,style:Object(r.a)({},A,c)}))}));function y(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(y(e.value)&&""!==e.value||t&&y(e.defaultValue)&&""!==e.defaultValue)}var _="undefined"===typeof window?o.useEffect:o.useLayoutEffect,w=o.forwardRef((function(e,t){var n=e["aria-describedby"],h=e.autoComplete,p=e.autoFocus,m=e.classes,g=e.className,A=(e.color,e.defaultValue),y=e.disabled,w=e.endAdornment,E=(e.error,e.fullWidth),x=void 0!==E&&E,S=e.id,T=e.inputComponent,M=void 0===T?"input":T,L=e.inputProps,C=void 0===L?{}:L,R=e.inputRef,O=(e.margin,e.multiline),I=void 0!==O&&O,P=e.name,k=e.onBlur,N=e.onChange,D=e.onClick,F=e.onFocus,j=e.onKeyDown,B=e.onKeyUp,V=e.placeholder,G=e.readOnly,U=e.renderSuffix,q=e.rows,W=e.rowsMax,z=e.rowsMin,H=e.startAdornment,K=e.type,Y=void 0===K?"text":K,Q=e.value,X=Object(i.a)(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","startAdornment","type","value"]),J=null!=C.value?C.value:Q,Z=o.useRef(null!=J).current,$=o.useRef(),ee=o.useCallback((function(e){0}),[]),te=Object(d.a)(C.ref,ee),ne=Object(d.a)(R,te),re=Object(d.a)($,ne),ie=o.useState(!1),oe=ie[0],ae=ie[1],se=o.useContext(l);var ue=u({props:e,muiFormControl:se,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});ue.focused=se?se.focused:oe,o.useEffect((function(){!se&&y&&oe&&(ae(!1),k&&k())}),[se,y,oe,k]);var le=se&&se.onFilled,ce=se&&se.onEmpty,he=o.useCallback((function(e){b(e)?le&&le():ce&&ce()}),[le,ce]);_((function(){Z&&he({value:J})}),[J,he,Z]);o.useEffect((function(){he($.current)}),[]);var fe=M,de=Object(r.a)({},C,{ref:re});"string"!==typeof fe?de=Object(r.a)({inputRef:re,type:Y},de,{ref:null}):I?!q||W||z?(de=Object(r.a)({rows:q,rowsMax:W},de),fe=v):fe="textarea":de=Object(r.a)({type:Y},de);return o.useEffect((function(){se&&se.setAdornedStart(Boolean(H))}),[se,H]),o.createElement("div",Object(r.a)({className:Object(a.a)(m.root,m["color".concat(Object(f.a)(ue.color||"primary"))],g,ue.disabled&&m.disabled,ue.error&&m.error,x&&m.fullWidth,ue.focused&&m.focused,se&&m.formControl,I&&m.multiline,H&&m.adornedStart,w&&m.adornedEnd,"dense"===ue.margin&&m.marginDense),onClick:function(e){$.current&&e.currentTarget===e.target&&$.current.focus(),D&&D(e)},ref:t},X),H,o.createElement(c.Provider,{value:null},o.createElement(fe,Object(r.a)({"aria-invalid":ue.error,"aria-describedby":n,autoComplete:h,autoFocus:p,defaultValue:A,disabled:ue.disabled,id:S,onAnimationStart:function(e){he("mui-auto-fill-cancel"===e.animationName?$.current:{value:"x"})},name:P,placeholder:V,readOnly:G,required:ue.required,rows:q,value:J,onKeyDown:j,onKeyUp:B},de,{className:Object(a.a)(m.input,C.className,ue.disabled&&m.disabled,I&&m.inputMultiline,ue.hiddenLabel&&m.inputHiddenLabel,H&&m.inputAdornedStart,w&&m.inputAdornedEnd,"search"===Y&&m.inputTypeSearch,"dense"===ue.margin&&m.inputMarginDense),onBlur:function(e){k&&k(e),C.onBlur&&C.onBlur(e),se&&se.onBlur?se.onBlur(e):ae(!1)},onChange:function(e){if(!Z){var t=e.target||$.current;if(null==t)throw new Error(Object(s.a)(1));he({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];C.onChange&&C.onChange.apply(C,[e].concat(r)),N&&N.apply(void 0,[e].concat(r))},onFocus:function(e){ue.disabled?e.stopPropagation():(F&&F(e),C.onFocus&&C.onFocus(e),se&&se.onFocus?se.onFocus(e):ae(!0))}}))),w,U?U(Object(r.a)({},ue,{startAdornment:H})):null)})),E=Object(h.a)((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},i={opacity:"0 !important"},o={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:Object(r.a)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(w),x=o.forwardRef((function(e,t){var n=e.disableUnderline,s=e.classes,u=e.fullWidth,l=void 0!==u&&u,c=e.inputComponent,h=void 0===c?"input":c,f=e.multiline,d=void 0!==f&&f,p=e.type,m=void 0===p?"text":p,g=Object(i.a)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return o.createElement(E,Object(r.a)({classes:Object(r.a)({},s,{root:Object(a.a)(s.root,!n&&s.underline),underline:null}),fullWidth:l,inputComponent:h,multiline:d,ref:t,type:m},g))}));x.muiName="Input";var S=Object(h.a)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(x),T=o.forwardRef((function(e,t){var n=e.disableUnderline,s=e.classes,u=e.fullWidth,l=void 0!==u&&u,c=e.inputComponent,h=void 0===c?"input":c,f=e.multiline,d=void 0!==f&&f,p=e.type,m=void 0===p?"text":p,g=Object(i.a)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return o.createElement(E,Object(r.a)({classes:Object(r.a)({},s,{root:Object(a.a)(s.root,!n&&s.underline),underline:null}),fullWidth:l,inputComponent:h,multiline:d,ref:t,type:m},g))}));T.muiName="Input";var M=Object(h.a)((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(T),L=n(15),C=n(21),R=o.forwardRef((function(e,t){e.children;var n=e.classes,s=e.className,u=e.label,l=e.labelWidth,c=e.notched,h=e.style,d=Object(i.a)(e,["children","classes","className","label","labelWidth","notched","style"]),p="rtl"===Object(C.a)().direction?"right":"left";if(void 0!==u)return o.createElement("fieldset",Object(r.a)({"aria-hidden":!0,className:Object(a.a)(n.root,s),ref:t,style:h},d),o.createElement("legend",{className:Object(a.a)(n.legendLabelled,c&&n.legendNotched)},u?o.createElement("span",null,u):o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var m=l>0?.75*l+8:.01;return o.createElement("fieldset",Object(r.a)({"aria-hidden":!0,style:Object(r.a)(Object(L.a)({},"padding".concat(Object(f.a)(p)),8),h),className:Object(a.a)(n.root,s),ref:t},d),o.createElement("legend",{className:n.legend,style:{width:c?m:.01}},o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),O=Object(h.a)((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(R),I=o.forwardRef((function(e,t){var n=e.classes,s=e.fullWidth,u=void 0!==s&&s,l=e.inputComponent,c=void 0===l?"input":l,h=e.label,f=e.labelWidth,d=void 0===f?0:f,p=e.multiline,m=void 0!==p&&p,g=e.notched,A=e.type,v=void 0===A?"text":A,y=Object(i.a)(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return o.createElement(E,Object(r.a)({renderSuffix:function(e){return o.createElement(O,{className:n.notchedOutline,label:h,labelWidth:d,notched:"undefined"!==typeof g?g:Boolean(e.startAdornment||e.filled||e.focused)})},classes:Object(r.a)({},n,{root:Object(a.a)(n.root,n.underline),notchedOutline:null}),fullWidth:u,inputComponent:c,multiline:m,ref:t,type:v},y))}));I.muiName="Input";var P=Object(h.a)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(I);function k(){return o.useContext(c)}var N=o.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,c=(e.color,e.component),h=void 0===c?"label":c,d=(e.disabled,e.error,e.filled,e.focused,e.required,Object(i.a)(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),p=u({props:e,muiFormControl:k(),states:["color","required","focused","disabled","error","filled"]});return o.createElement(h,Object(r.a)({className:Object(a.a)(s.root,s["color".concat(Object(f.a)(p.color||"primary"))],l,p.disabled&&s.disabled,p.error&&s.error,p.filled&&s.filled,p.focused&&s.focused,p.required&&s.required),ref:t},d),n,p.required&&o.createElement("span",{"aria-hidden":!0,className:Object(a.a)(s.asterisk,p.error&&s.error)},"\u2009","*"))})),D=Object(h.a)((function(e){return{root:Object(r.a)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(N),F=o.forwardRef((function(e,t){var n=e.classes,s=e.className,l=e.disableAnimation,c=void 0!==l&&l,h=(e.margin,e.shrink),f=(e.variant,Object(i.a)(e,["classes","className","disableAnimation","margin","shrink","variant"])),d=k(),p=h;"undefined"===typeof p&&d&&(p=d.filled||d.focused||d.adornedStart);var m=u({props:e,muiFormControl:d,states:["margin","variant"]});return o.createElement(D,Object(r.a)({"data-shrink":p,className:Object(a.a)(n.root,s,d&&n.formControl,!c&&n.animated,p&&n.shrink,"dense"===m.margin&&n.marginDense,{filled:n.filled,outlined:n.outlined}[m.variant]),classes:{focused:n.focused,disabled:n.disabled,error:n.error,required:n.required,asterisk:n.asterisk},ref:t},f))})),j=Object(h.a)((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(F),B=n(50),V=o.forwardRef((function(e,t){var n=e.children,s=e.classes,u=e.className,l=e.color,h=void 0===l?"primary":l,d=e.component,p=void 0===d?"div":d,m=e.disabled,g=void 0!==m&&m,A=e.error,v=void 0!==A&&A,y=e.fullWidth,_=void 0!==y&&y,w=e.focused,E=e.hiddenLabel,x=void 0!==E&&E,S=e.margin,T=void 0===S?"none":S,M=e.required,L=void 0!==M&&M,C=e.size,R=e.variant,O=void 0===R?"standard":R,I=Object(i.a)(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),P=o.useState((function(){var e=!1;return n&&o.Children.forEach(n,(function(t){if(Object(B.a)(t,["Input","Select"])){var n=Object(B.a)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),k=P[0],N=P[1],D=o.useState((function(){var e=!1;return n&&o.Children.forEach(n,(function(t){Object(B.a)(t,["Input","Select"])&&b(t.props,!0)&&(e=!0)})),e})),F=D[0],j=D[1],V=o.useState(!1),G=V[0],U=V[1],q=void 0!==w?w:G;g&&q&&U(!1);var W=o.useCallback((function(){j(!0)}),[]),z={adornedStart:k,setAdornedStart:N,color:h,disabled:g,error:v,filled:F,focused:q,fullWidth:_,hiddenLabel:x,margin:("small"===C?"dense":void 0)||T,onBlur:function(){U(!1)},onEmpty:o.useCallback((function(){j(!1)}),[]),onFilled:W,onFocus:function(){U(!0)},registerEffect:void 0,required:L,variant:O};return o.createElement(c.Provider,{value:z},o.createElement(p,Object(r.a)({className:Object(a.a)(s.root,u,"none"!==T&&s["margin".concat(Object(f.a)(T))],_&&s.fullWidth),ref:t},I),n))})),G=Object(h.a)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(V),U=o.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,c=e.component,h=void 0===c?"p":c,f=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,Object(i.a)(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),d=u({props:e,muiFormControl:k(),states:["variant","margin","disabled","error","filled","focused","required"]});return o.createElement(h,Object(r.a)({className:Object(a.a)(s.root,("filled"===d.variant||"outlined"===d.variant)&&s.contained,l,d.disabled&&s.disabled,d.error&&s.error,d.filled&&s.filled,d.focused&&s.focused,d.required&&s.required,"dense"===d.margin&&s.marginDense),ref:t},f)," "===n?o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):n)})),q=Object(h.a)((function(e){return{root:Object(r.a)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(U),W=n(202),z=n(34),H=n(41),K=(n(52),n(22)),Y=n(16),Q=n(68),X=n(31),J=n(165),Z=n(210),$=n(108);function ee(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function te(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function ne(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function re(e){return"function"===typeof e?e():e}var ie=o.forwardRef((function(e,t){var n=e.action,s=e.anchorEl,u=e.anchorOrigin,l=void 0===u?{vertical:"top",horizontal:"left"}:u,c=e.anchorPosition,h=e.anchorReference,f=void 0===h?"anchorEl":h,d=e.children,m=e.classes,g=e.className,A=e.container,v=e.elevation,y=void 0===v?8:v,b=e.getContentAnchorEl,_=e.marginThreshold,w=void 0===_?16:_,E=e.onEnter,x=e.onEntered,S=e.onEntering,T=e.onExit,M=e.onExited,L=e.onExiting,C=e.open,R=e.PaperProps,O=void 0===R?{}:R,I=e.transformOrigin,P=void 0===I?{vertical:"top",horizontal:"left"}:I,k=e.TransitionComponent,N=void 0===k?Z.a:k,D=e.transitionDuration,F=void 0===D?"auto":D,j=e.TransitionProps,B=void 0===j?{}:j,V=Object(i.a)(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),G=o.useRef(),U=o.useCallback((function(e){if("anchorPosition"===f)return c;var t=re(s),n=(t&&1===t.nodeType?t:Object(K.a)(G.current).body).getBoundingClientRect(),r=0===e?l.vertical:"center";return{top:n.top+ee(n,r),left:n.left+te(n,l.horizontal)}}),[s,l.horizontal,l.vertical,c,f]),q=o.useCallback((function(e){var t=0;if(b&&"anchorEl"===f){var n=b(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}0}return t}),[l.vertical,f,b]),W=o.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:ee(e,P.vertical)+t,horizontal:te(e,P.horizontal)}}),[P.horizontal,P.vertical]),z=o.useCallback((function(e){var t=q(e),n={width:e.offsetWidth,height:e.offsetHeight},r=W(n,t);if("none"===f)return{top:null,left:null,transformOrigin:ne(r)};var i=U(t),o=i.top-r.vertical,a=i.left-r.horizontal,u=o+n.height,l=a+n.width,c=Object(Q.a)(re(s)),h=c.innerHeight-w,d=c.innerWidth-w;if(o<w){var p=o-w;o-=p,r.vertical+=p}else if(u>h){var m=u-h;o-=m,r.vertical+=m}if(a<w){var g=a-w;a-=g,r.horizontal+=g}else if(l>d){var A=l-d;a-=A,r.horizontal+=A}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:ne(r)}}),[s,f,U,q,W,w]),H=o.useCallback((function(){var e=G.current;if(e){var t=z(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[z]),ie=o.useCallback((function(e){G.current=Y.findDOMNode(e)}),[]);o.useEffect((function(){C&&H()})),o.useImperativeHandle(n,(function(){return C?{updatePosition:function(){H()}}:null}),[C,H]),o.useEffect((function(){if(C){var e=Object(p.a)((function(){H()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[C,H]);var oe=F;"auto"!==F||N.muiSupportAuto||(oe=void 0);var ae=A||(s?Object(K.a)(re(s)).body:void 0);return o.createElement(J.a,Object(r.a)({container:ae,open:C,ref:t,BackdropProps:{invisible:!0},className:Object(a.a)(m.root,g)},V),o.createElement(N,Object(r.a)({appear:!0,in:C,onEnter:E,onEntered:x,onExit:T,onExited:M,onExiting:L,timeout:oe},B,{onEntering:Object(X.a)((function(e,t){S&&S(e,t),H()}),B.onEntering)}),o.createElement($.a,Object(r.a)({elevation:y,ref:ie},O,{className:Object(a.a)(m.paper,O.className)}),d)))})),oe=Object(h.a)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(ie),ae=n(211),se=n(69);function ue(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function le(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function ce(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function he(e,t,n,r,i,o){for(var a=!1,s=i(e,t,!!t&&n);s;){if(s===e.firstChild){if(a)return;a=!0}var u=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&ce(s,o)&&!u)return void s.focus();s=i(e,s,n)}}var fe="undefined"===typeof window?o.useEffect:o.useLayoutEffect,de=o.forwardRef((function(e,t){var n=e.actions,a=e.autoFocus,s=void 0!==a&&a,u=e.autoFocusItem,l=void 0!==u&&u,c=e.children,h=e.className,f=e.disabledItemsFocusable,p=void 0!==f&&f,m=e.disableListWrap,g=void 0!==m&&m,A=e.onKeyDown,v=e.variant,y=void 0===v?"selectedMenu":v,b=Object(i.a)(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),_=o.useRef(null),w=o.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});fe((function(){s&&_.current.focus()}),[s]),o.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!_.current.style.width;if(e.clientHeight<_.current.clientHeight&&n){var r="".concat(Object(se.a)(!0),"px");_.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,_.current.style.width="calc(100% + ".concat(r,")")}return _.current}}}),[]);var E=o.useCallback((function(e){_.current=Y.findDOMNode(e)}),[]),x=Object(d.a)(E,t),S=-1;o.Children.forEach(c,(function(e,t){o.isValidElement(e)&&(e.props.disabled||("selectedMenu"===y&&e.props.selected||-1===S)&&(S=t))}));var T=o.Children.map(c,(function(e,t){if(t===S){var n={};return l&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===y&&(n.tabIndex=0),o.cloneElement(e,n)}return e}));return o.createElement(ae.a,Object(r.a)({role:"menu",ref:x,className:h,onKeyDown:function(e){var t=_.current,n=e.key,r=Object(K.a)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),he(t,r,g,p,ue);else if("ArrowUp"===n)e.preventDefault(),he(t,r,g,p,le);else if("Home"===n)e.preventDefault(),he(t,null,g,p,ue);else if("End"===n)e.preventDefault(),he(t,null,g,p,le);else if(1===n.length){var i=w.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);var s=r&&!i.repeating&&ce(r,i);i.previousKeyMatched&&(s||he(t,r,!1,p,ue,i))?e.preventDefault():i.previousKeyMatched=!1}A&&A(e)},tabIndex:s?0:-1},b),T)})),pe=n(28),me={vertical:"top",horizontal:"right"},ge={vertical:"top",horizontal:"left"},Ae=o.forwardRef((function(e,t){var n=e.autoFocus,s=void 0===n||n,u=e.children,l=e.classes,c=e.disableAutoFocusItem,h=void 0!==c&&c,f=e.MenuListProps,d=void 0===f?{}:f,p=e.onClose,m=e.onEntering,g=e.open,A=e.PaperProps,v=void 0===A?{}:A,y=e.PopoverClasses,b=e.transitionDuration,_=void 0===b?"auto":b,w=e.variant,E=void 0===w?"selectedMenu":w,x=Object(i.a)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","variant"]),S=Object(C.a)(),T=s&&!h&&g,M=o.useRef(null),L=o.useRef(null),R=-1;o.Children.map(u,(function(e,t){o.isValidElement(e)&&(e.props.disabled||("menu"!==E&&e.props.selected||-1===R)&&(R=t))}));var O=o.Children.map(u,(function(e,t){return t===R?o.cloneElement(e,{ref:function(t){L.current=Y.findDOMNode(t),Object(pe.a)(e.ref,t)}}):e}));return o.createElement(oe,Object(r.a)({getContentAnchorEl:function(){return L.current},classes:y,onClose:p,onEntering:function(e,t){M.current&&M.current.adjustStyleForScrollbar(e,S),m&&m(e,t)},anchorOrigin:"rtl"===S.direction?me:ge,transformOrigin:"rtl"===S.direction?me:ge,PaperProps:Object(r.a)({},v,{classes:Object(r.a)({},v.classes,{root:l.paper})}),open:g,ref:t,transitionDuration:_},x),o.createElement(de,Object(r.a)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),p&&p(e,"tabKeyDown"))},actions:M,autoFocus:s&&(-1===R||h),autoFocusItem:T,variant:E},d,{className:Object(a.a)(l.list,d.className)}),O))})),ve=Object(h.a)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(Ae),ye=n(65);function be(e,t){return"object"===Object(H.a)(t)&&null!==t?e===t:String(e)===String(t)}var _e=o.forwardRef((function(e,t){var n=e["aria-label"],u=e.autoFocus,l=e.autoWidth,c=e.children,h=e.classes,p=e.className,m=e.defaultValue,g=e.disabled,A=e.displayEmpty,v=e.IconComponent,y=e.inputRef,_=e.labelId,w=e.MenuProps,E=void 0===w?{}:w,x=e.multiple,S=e.name,T=e.onBlur,M=e.onChange,L=e.onClose,C=e.onFocus,R=e.onOpen,O=e.open,I=e.readOnly,P=e.renderValue,k=e.SelectDisplayProps,N=void 0===k?{}:k,D=e.tabIndex,F=(e.type,e.value),j=e.variant,B=void 0===j?"standard":j,V=Object(i.a)(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),G=Object(ye.a)({controlled:F,default:m,name:"Select"}),U=Object(z.a)(G,2),q=U[0],W=U[1],H=o.useRef(null),Y=o.useState(null),Q=Y[0],X=Y[1],J=o.useRef(null!=O).current,Z=o.useState(),$=Z[0],ee=Z[1],te=o.useState(!1),ne=te[0],re=te[1],ie=Object(d.a)(t,y);o.useImperativeHandle(ie,(function(){return{focus:function(){Q.focus()},node:H.current,value:q}}),[Q,q]),o.useEffect((function(){u&&Q&&Q.focus()}),[u,Q]),o.useEffect((function(){if(Q){var e=Object(K.a)(Q).getElementById(_);if(e){var t=function(){getSelection().isCollapsed&&Q.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[_,Q]);var oe,ae,se=function(e,t){e?R&&R(t):L&&L(t),J||(ee(l?null:Q.clientWidth),re(e))},ue=o.Children.toArray(c),le=function(e){return function(t){var n;if(x||se(!1,t),x){n=Array.isArray(q)?q.slice():[];var r=q.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;e.props.onClick&&e.props.onClick(t),q!==n&&(W(n),M&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:S}}),M(t,e)))}},ce=null!==Q&&(J?O:ne);delete V["aria-invalid"];var he=[],fe=!1;(b({value:q})||A)&&(P?oe=P(q):fe=!0);var de=ue.map((function(e){if(!o.isValidElement(e))return null;var t;if(x){if(!Array.isArray(q))throw new Error(Object(s.a)(2));(t=q.some((function(t){return be(t,e.props.value)})))&&fe&&he.push(e.props.children)}else(t=be(q,e.props.value))&&fe&&(ae=e.props.children);return t&&!0,o.cloneElement(e,{"aria-selected":t?"true":void 0,onClick:le(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));fe&&(oe=x?he.join(", "):ae);var pe,me=$;!l&&J&&Q&&(me=Q.clientWidth),pe="undefined"!==typeof D?D:g?null:0;var ge=N.id||(S?"mui-component-select-".concat(S):void 0);return o.createElement(o.Fragment,null,o.createElement("div",Object(r.a)({className:Object(a.a)(h.root,h.select,h.selectMenu,h[B],p,g&&h.disabled),ref:X,tabIndex:pe,role:"button","aria-disabled":g?"true":void 0,"aria-expanded":ce?"true":void 0,"aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[_,ge].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!I){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),se(!0,e))}},onMouseDown:g||I?null:function(e){0===e.button&&(e.preventDefault(),Q.focus(),se(!0,e))},onBlur:function(e){!ce&&T&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:q,name:S}}),T(e))},onFocus:C},N,{id:ge}),function(e){return null==e||"string"===typeof e&&!e.trim()}(oe)?o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):oe),o.createElement("input",Object(r.a)({value:Array.isArray(q)?q.join(","):q,name:S,ref:H,"aria-hidden":!0,onChange:function(e){var t=ue.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=ue[t];W(n.props.value),M&&M(e,n)}},tabIndex:-1,className:h.nativeInput,autoFocus:u},V)),o.createElement(v,{className:Object(a.a)(h.icon,h["icon".concat(Object(f.a)(B))],ce&&h.iconOpen,g&&h.disabled)}),o.createElement(ve,Object(r.a)({id:"menu-".concat(S||""),anchorEl:Q,open:ce,onClose:function(e){se(!1,e)}},E,{MenuListProps:Object(r.a)({"aria-labelledby":_,role:"listbox",disableListWrap:!0},E.MenuListProps),PaperProps:Object(r.a)({},E.PaperProps,{style:Object(r.a)({minWidth:me},null!=E.PaperProps?E.PaperProps.style:null)})}),de))})),we=n(67),Ee=Object(we.a)(o.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),xe=o.forwardRef((function(e,t){var n=e.classes,s=e.className,u=e.disabled,l=e.IconComponent,c=e.inputRef,h=e.variant,d=void 0===h?"standard":h,p=Object(i.a)(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return o.createElement(o.Fragment,null,o.createElement("select",Object(r.a)({className:Object(a.a)(n.root,n.select,n[d],s,u&&n.disabled),disabled:u,ref:c||t},p)),e.multiple?null:o.createElement(l,{className:Object(a.a)(n.icon,n["icon".concat(Object(f.a)(d))],u&&n.disabled)}))})),Se=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},Te=o.createElement(S,null),Me=o.forwardRef((function(e,t){var n=e.children,a=e.classes,s=e.IconComponent,l=void 0===s?Ee:s,c=e.input,h=void 0===c?Te:c,f=e.inputProps,d=(e.variant,Object(i.a)(e,["children","classes","IconComponent","input","inputProps","variant"])),p=u({props:e,muiFormControl:k(),states:["variant"]});return o.cloneElement(h,Object(r.a)({inputComponent:xe,inputProps:Object(r.a)({children:n,classes:a,IconComponent:l,variant:p.variant,type:void 0},f,h?h.props.inputProps:{}),ref:t},d))}));Me.muiName="Select";Object(h.a)(Se,{name:"MuiNativeSelect"})(Me);var Le=Se,Ce=o.createElement(S,null),Re=o.createElement(M,null),Oe=o.forwardRef((function e(t,n){var a=t.autoWidth,s=void 0!==a&&a,l=t.children,c=t.classes,h=t.displayEmpty,f=void 0!==h&&h,d=t.IconComponent,p=void 0===d?Ee:d,m=t.id,g=t.input,A=t.inputProps,v=t.label,y=t.labelId,b=t.labelWidth,_=void 0===b?0:b,w=t.MenuProps,E=t.multiple,x=void 0!==E&&E,S=t.native,T=void 0!==S&&S,M=t.onClose,L=t.onOpen,C=t.open,R=t.renderValue,O=t.SelectDisplayProps,I=t.variant,N=void 0===I?"standard":I,D=Object(i.a)(t,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),F=T?xe:_e,j=u({props:t,muiFormControl:k(),states:["variant"]}).variant||N,B=g||{standard:Ce,outlined:o.createElement(P,{label:v,labelWidth:_}),filled:Re}[j];return o.cloneElement(B,Object(r.a)({inputComponent:F,inputProps:Object(r.a)({children:l,IconComponent:p,variant:j,type:void 0,multiple:x},T?{id:m}:{autoWidth:s,displayEmpty:f,labelId:y,MenuProps:w,onClose:M,onOpen:L,open:C,renderValue:R,SelectDisplayProps:Object(r.a)({id:m},O)},A,{classes:A?Object(W.a)({baseClasses:c,newClasses:A.classes,Component:e}):c},g?g.props.inputProps:{}),ref:n},D))}));Oe.muiName="Select";var Ie=Object(h.a)(Le,{name:"MuiSelect"})(Oe),Pe={standard:S,filled:M,outlined:P},ke=o.forwardRef((function(e,t){var n=e.autoComplete,s=e.autoFocus,u=void 0!==s&&s,l=e.children,c=e.classes,h=e.className,f=e.color,d=void 0===f?"primary":f,p=e.defaultValue,m=e.disabled,g=void 0!==m&&m,A=e.error,v=void 0!==A&&A,y=e.FormHelperTextProps,b=e.fullWidth,_=void 0!==b&&b,w=e.helperText,E=e.hiddenLabel,x=e.id,S=e.InputLabelProps,T=e.inputProps,M=e.InputProps,L=e.inputRef,C=e.label,R=e.multiline,O=void 0!==R&&R,I=e.name,P=e.onBlur,k=e.onChange,N=e.onFocus,D=e.placeholder,F=e.required,B=void 0!==F&&F,V=e.rows,U=e.rowsMax,W=e.select,z=void 0!==W&&W,H=e.SelectProps,K=e.type,Y=e.value,Q=e.variant,X=void 0===Q?"standard":Q,J=Object(i.a)(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","select","SelectProps","type","value","variant"]);var Z={};if("outlined"===X&&(S&&"undefined"!==typeof S.shrink&&(Z.notched=S.shrink),C)){var $,ee=null!==($=null===S||void 0===S?void 0:S.required)&&void 0!==$?$:B;Z.label=o.createElement(o.Fragment,null,C,ee&&"\xa0*")}z&&(H&&H.native||(Z.id=void 0),Z["aria-describedby"]=void 0);var te=w&&x?"".concat(x,"-helper-text"):void 0,ne=C&&x?"".concat(x,"-label"):void 0,re=Pe[X],ie=o.createElement(re,Object(r.a)({"aria-describedby":te,autoComplete:n,autoFocus:u,defaultValue:p,fullWidth:_,multiline:O,name:I,rows:V,rowsMax:U,type:K,value:Y,id:x,inputRef:L,onBlur:P,onChange:k,onFocus:N,placeholder:D,inputProps:T},Z,M));return o.createElement(G,Object(r.a)({className:Object(a.a)(c.root,h),disabled:g,error:v,fullWidth:_,hiddenLabel:E,ref:t,required:B,color:d,variant:X},J),C&&o.createElement(j,Object(r.a)({htmlFor:x,id:ne},S),C),z?o.createElement(Ie,Object(r.a)({"aria-describedby":te,id:x,labelId:ne,value:Y,input:ie},H),l):ie,w&&o.createElement(q,Object(r.a)({id:te},y),w))}));t.a=Object(h.a)({root:{}},{name:"MuiTextField"})(ke)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=n(1),s=n.n(a),u=n(207),l=n(64),c=n.n(l),h=n(21),f=n(32),d=n(166);function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(d.a)(),i=Object(u.a)({theme:n,name:"MuiUseMediaQuery",props:{}});var a="function"===typeof e?e(n):e;a=a.replace(/^@media( ?)/m,"");var s="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,l=Object(r.a)({},i,t),c=l.defaultMatches,h=void 0!==c&&c,f=l.matchMedia,p=void 0===f?s?window.matchMedia:null:f,m=l.noSsr,g=void 0!==m&&m,A=l.ssrMatchMedia,v=void 0===A?null:A,y=o.useState((function(){return g&&s?p(a).matches:v?v(a).matches:h})),b=y[0],_=y[1];return o.useEffect((function(){var e=!0;if(s){var t=p(a),n=function(){e&&_(t.matches)};return n(),t.addListener(n),function(){e=!1,t.removeListener(n)}}}),[a,p,s]),b}var m=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?f.b.indexOf(e)<=f.b.indexOf(t):f.b.indexOf(e)<f.b.indexOf(t)},g=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?f.b.indexOf(t)<=f.b.indexOf(e):f.b.indexOf(t)<f.b.indexOf(e)},A="undefined"===typeof window?o.useEffect:o.useLayoutEffect,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.withTheme,a=void 0!==n&&n,s=e.noSSR,l=void 0!==s&&s,f=e.initialWidth;function d(e){var n=Object(h.a)(),s=e.theme||n,c=Object(u.a)({theme:s,name:"MuiWithWidth",props:Object(r.a)({},e)}),d=c.initialWidth,m=c.width,g=Object(i.a)(c,["initialWidth","width"]),v=o.useState(!1),y=v[0],b=v[1];A((function(){b(!0)}),[]);var _=s.breakpoints.keys.slice().reverse().reduce((function(e,t){var n=p(s.breakpoints.up(t));return!e&&n?t:e}),null),w=Object(r.a)({width:m||(y||l?_:void 0)||d||f},a?{theme:s}:{},g);return void 0===w.width?null:o.createElement(t,w)}return c()(d,t),d}};function y(e){var t=e.children,n=e.only,r=e.width,i=Object(h.a)(),o=!0;if(n)if(Array.isArray(n))for(var a=0;a<n.length;a+=1){if(r===n[a]){o=!1;break}}else n&&r===n&&(o=!1);if(o)for(var s=0;s<i.breakpoints.keys.length;s+=1){var u=i.breakpoints.keys[s],l=e["".concat(u,"Up")],c=e["".concat(u,"Down")];if(l&&m(u,r)||c&&g(u,r)){o=!1;break}}return o?t:null}y.propTypes={children:s.a.node,className:s.a.string,implementation:s.a.oneOf(["js","css"]),initialWidth:s.a.oneOf(["xs","sm","md","lg","xl"]),lgDown:s.a.bool,lgUp:s.a.bool,mdDown:s.a.bool,mdUp:s.a.bool,only:s.a.oneOfType([s.a.oneOf(["xs","sm","md","lg","xl"]),s.a.arrayOf(s.a.oneOf(["xs","sm","md","lg","xl"]))]),smDown:s.a.bool,smUp:s.a.bool,width:s.a.string.isRequired,xlDown:s.a.bool,xlUp:s.a.bool,xsDown:s.a.bool,xsUp:s.a.bool};var b=v()(y),_=n(15),w=n(10),E=n(8);var x=Object(E.a)((function(e){var t={display:"none"};return e.breakpoints.keys.reduce((function(n,r){return n["only".concat(Object(w.a)(r))]=Object(_.a)({},e.breakpoints.only(r),t),n["".concat(r,"Up")]=Object(_.a)({},e.breakpoints.up(r),t),n["".concat(r,"Down")]=Object(_.a)({},e.breakpoints.down(r),t),n}),{})}),{name:"PrivateHiddenCss"})((function(e){var t=e.children,n=e.classes,r=e.className,a=e.only,s=(Object(i.a)(e,["children","classes","className","only"]),Object(h.a)()),u=[];r&&u.push(r);for(var l=0;l<s.breakpoints.keys.length;l+=1){var c=s.breakpoints.keys[l],f=e["".concat(c,"Up")],d=e["".concat(c,"Down")];f&&u.push(n["".concat(c,"Up")]),d&&u.push(n["".concat(c,"Down")])}return a&&(Array.isArray(a)?a:[a]).forEach((function(e){u.push(n["only".concat(Object(w.a)(e))])})),o.createElement("div",{className:u.join(" ")},t)}));t.a=function(e){var t=e.implementation,n=void 0===t?"js":t,a=e.lgDown,s=void 0!==a&&a,u=e.lgUp,l=void 0!==u&&u,c=e.mdDown,h=void 0!==c&&c,f=e.mdUp,d=void 0!==f&&f,p=e.smDown,m=void 0!==p&&p,g=e.smUp,A=void 0!==g&&g,v=e.xlDown,y=void 0!==v&&v,_=e.xlUp,w=void 0!==_&&_,E=e.xsDown,S=void 0!==E&&E,T=e.xsUp,M=void 0!==T&&T,L=Object(i.a)(e,["implementation","lgDown","lgUp","mdDown","mdUp","smDown","smUp","xlDown","xlUp","xsDown","xsUp"]);return"js"===n?o.createElement(b,Object(r.a)({lgDown:s,lgUp:l,mdDown:h,mdUp:d,smDown:m,smUp:A,xlDown:y,xlUp:w,xsDown:S,xsUp:M},L)):o.createElement(x,Object(r.a)({lgDown:s,lgUp:l,mdDown:h,mdUp:d,smDown:m,smUp:A,xlDown:y,xlUp:w,xsDown:S,xsUp:M},L))}},function(e,t,n){"use strict";var r=n(2),i=n(34),o=n(5),a=n(15),s=n(0),u=n(16),l=(n(1),n(6)),c=n(203),h=n(17),f=n(8),d=n(10),p=n(210),m=n(95),g=n(166),A=n(209),v=n(31),y=n(28),b=n(11);function _(e){return"function"===typeof e?e():e}var w="undefined"!==typeof window?s.useLayoutEffect:s.useEffect,E={},x=s.forwardRef((function(e,t){var n=e.anchorEl,i=e.children,a=e.container,u=e.disablePortal,l=void 0!==u&&u,c=e.keepMounted,h=void 0!==c&&c,f=e.modifiers,d=e.open,p=e.placement,x=void 0===p?"bottom":p,S=e.popperOptions,T=void 0===S?E:S,M=e.popperRef,L=e.style,C=e.transition,R=void 0!==C&&C,O=Object(o.a)(e,["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"]),I=s.useRef(null),P=Object(b.a)(I,t),k=s.useRef(null),N=Object(b.a)(k,M),D=s.useRef(N);w((function(){D.current=N}),[N]),s.useImperativeHandle(M,(function(){return k.current}),[]);var F=s.useState(!0),j=F[0],B=F[1],V=function(e,t){if("ltr"===(t&&t.direction||"ltr"))return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(x,Object(g.a)()),G=s.useState(V),U=G[0],q=G[1];s.useEffect((function(){k.current&&k.current.update()}));var W=s.useCallback((function(){if(I.current&&n&&d){k.current&&(k.current.destroy(),D.current(null));var e=function(e){q(e.placement)},t=(_(n),new m.a(_(n),I.current,Object(r.a)({placement:V},T,{modifiers:Object(r.a)({},l?{}:{preventOverflow:{boundariesElement:"window"}},f,T.modifiers),onCreate:Object(v.a)(e,T.onCreate),onUpdate:Object(v.a)(e,T.onUpdate)})));D.current(t)}}),[n,l,f,d,V,T]),z=s.useCallback((function(e){Object(y.a)(P,e),W()}),[P,W]),H=function(){k.current&&(k.current.destroy(),D.current(null))};if(s.useEffect((function(){return function(){H()}}),[]),s.useEffect((function(){d||R||H()}),[d,R]),!h&&!d&&(!R||j))return null;var K={placement:U};return R&&(K.TransitionProps={in:d,onEnter:function(){B(!1)},onExited:function(){B(!0),H()}}),s.createElement(A.a,{disablePortal:l,container:a},s.createElement("div",Object(r.a)({ref:z,role:"tooltip"},O,{style:Object(r.a)({position:"fixed",top:0,left:0,display:d||!h||R?null:"none"},L)}),"function"===typeof i?i(K):i))}));var S=n(63),T=n(65),M=n(21);function L(e){return Math.round(1e5*e)/1e5}var C=!1,R=null;var O=s.forwardRef((function(e,t){var n=e.arrow,a=void 0!==n&&n,h=e.children,f=e.classes,m=e.disableFocusListener,g=void 0!==m&&m,A=e.disableHoverListener,v=void 0!==A&&A,_=e.disableTouchListener,w=void 0!==_&&_,E=e.enterDelay,L=void 0===E?100:E,O=e.enterNextDelay,I=void 0===O?0:O,P=e.enterTouchDelay,k=void 0===P?700:P,N=e.id,D=e.interactive,F=void 0!==D&&D,j=e.leaveDelay,B=void 0===j?0:j,V=e.leaveTouchDelay,G=void 0===V?1500:V,U=e.onClose,q=e.onOpen,W=e.open,z=e.placement,H=void 0===z?"bottom":z,K=e.PopperComponent,Y=void 0===K?x:K,Q=e.PopperProps,X=e.title,J=e.TransitionComponent,Z=void 0===J?p.a:J,$=e.TransitionProps,ee=Object(o.a)(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),te=Object(M.a)(),ne=s.useState(),re=ne[0],ie=ne[1],oe=s.useState(null),ae=oe[0],se=oe[1],ue=s.useRef(!1),le=s.useRef(),ce=s.useRef(),he=s.useRef(),fe=s.useRef(),de=Object(T.a)({controlled:W,default:!1,name:"Tooltip",state:"open"}),pe=Object(i.a)(de,2),me=pe[0],ge=pe[1],Ae=me,ve=function(e){var t=s.useState(e),n=t[0],r=t[1],i=e||n;return s.useEffect((function(){null==n&&r("mui-".concat(Math.round(1e5*Math.random())))}),[n]),i}(N);s.useEffect((function(){return function(){clearTimeout(le.current),clearTimeout(ce.current),clearTimeout(he.current),clearTimeout(fe.current)}}),[]);var ye=function(e){clearTimeout(R),C=!0,ge(!0),q&&q(e)},be=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var n=h.props;"mouseover"===t.type&&n.onMouseOver&&e&&n.onMouseOver(t),ue.current&&"touchstart"!==t.type||(re&&re.removeAttribute("title"),clearTimeout(ce.current),clearTimeout(he.current),L||C&&I?(t.persist(),ce.current=setTimeout((function(){ye(t)}),C?I:L)):ye(t))}},_e=Object(S.a)(),we=_e.isFocusVisible,Ee=_e.onBlurVisible,xe=_e.ref,Se=s.useState(!1),Te=Se[0],Me=Se[1],Le=function(){Te&&(Me(!1),Ee())},Ce=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){re||ie(t.currentTarget),we(t)&&(Me(!0),be()(t));var n=h.props;n.onFocus&&e&&n.onFocus(t)}},Re=function(e){clearTimeout(R),R=setTimeout((function(){C=!1}),800+B),ge(!1),U&&U(e),clearTimeout(le.current),le.current=setTimeout((function(){ue.current=!1}),te.transitions.duration.shortest)},Oe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var n=h.props;"blur"===t.type&&(n.onBlur&&e&&n.onBlur(t),Le()),"mouseleave"===t.type&&n.onMouseLeave&&t.currentTarget===re&&n.onMouseLeave(t),clearTimeout(ce.current),clearTimeout(he.current),t.persist(),he.current=setTimeout((function(){Re(t)}),B)}},Ie=function(e){ue.current=!0;var t=h.props;t.onTouchStart&&t.onTouchStart(e)},Pe=Object(b.a)(ie,t),ke=Object(b.a)(xe,Pe),Ne=s.useCallback((function(e){Object(y.a)(ke,u.findDOMNode(e))}),[ke]),De=Object(b.a)(h.ref,Ne);""===X&&(Ae=!1);var Fe=!Ae&&!v,je=Object(r.a)({"aria-describedby":Ae?ve:null,title:Fe&&"string"===typeof X?X:null},ee,h.props,{className:Object(l.a)(ee.className,h.props.className),onTouchStart:Ie,ref:De}),Be={};w||(je.onTouchStart=function(e){Ie(e),clearTimeout(he.current),clearTimeout(le.current),clearTimeout(fe.current),e.persist(),fe.current=setTimeout((function(){be()(e)}),k)},je.onTouchEnd=function(e){h.props.onTouchEnd&&h.props.onTouchEnd(e),clearTimeout(fe.current),clearTimeout(he.current),e.persist(),he.current=setTimeout((function(){Re(e)}),G)}),v||(je.onMouseOver=be(),je.onMouseLeave=Oe(),F&&(Be.onMouseOver=be(!1),Be.onMouseLeave=Oe(!1))),g||(je.onFocus=Ce(),je.onBlur=Oe(),F&&(Be.onFocus=Ce(!1),Be.onBlur=Oe(!1)));var Ve=s.useMemo((function(){return Object(c.a)({popperOptions:{modifiers:{arrow:{enabled:Boolean(ae),element:ae}}}},Q)}),[ae,Q]);return s.createElement(s.Fragment,null,s.cloneElement(h,je),s.createElement(Y,Object(r.a)({className:Object(l.a)(f.popper,F&&f.popperInteractive,a&&f.popperArrow),placement:H,anchorEl:re,open:!!re&&Ae,id:je["aria-describedby"],transition:!0},Be,Ve),(function(e){var t=e.placement,n=e.TransitionProps;return s.createElement(Z,Object(r.a)({timeout:te.transitions.duration.shorter},n,$),s.createElement("div",{className:Object(l.a)(f.tooltip,f["tooltipPlacement".concat(Object(d.a)(t.split("-")[0]))],ue.current&&f.touch,a&&f.tooltipArrow)},X,a?s.createElement("span",{className:f.arrow,ref:se}):null))})))}));t.a=Object(f.a)((function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}},tooltip:{backgroundColor:Object(h.c)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat(L(1.4),"em"),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:Object(h.c)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(L(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:Object(a.a)({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:Object(a.a)({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:Object(a.a)({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:Object(a.a)({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}}),{name:"MuiTooltip",flip:!1})(O)},function(e,t,n){"use strict";var r=n(5),i=n(15),o=n(2),a=n(0),s=(n(1),n(6)),u=n(8),l=n(24),c=n(16),h=n(22),f=n(11),d=n(27);function p(e){return e.substring(2).toLowerCase()}var m=function(e){var t=e.children,n=e.disableReactTree,r=void 0!==n&&n,i=e.mouseEvent,o=void 0===i?"onClick":i,s=e.onClickAway,u=e.touchEvent,l=void 0===u?"onTouchEnd":u,m=a.useRef(!1),g=a.useRef(null),A=a.useRef(!1),v=a.useRef(!1);a.useEffect((function(){return A.current=!0,function(){A.current=!1}}),[]);var y=a.useCallback((function(e){g.current=c.findDOMNode(e)}),[]),b=Object(f.a)(t.ref,y),_=Object(d.a)((function(e){var t=v.current;if(v.current=!1,A.current&&g.current&&!function(e){return document.documentElement.clientWidth<e.clientX||document.documentElement.clientHeight<e.clientY}(e))if(m.current)m.current=!1;else{var n;if(e.composedPath)n=e.composedPath().indexOf(g.current)>-1;else n=!Object(h.a)(g.current).documentElement.contains(e.target)||g.current.contains(e.target);n||!r&&t||s(e)}})),w=function(e){return function(n){v.current=!0;var r=t.props[e];r&&r(n)}},E={ref:b};return!1!==l&&(E[l]=w(l)),a.useEffect((function(){if(!1!==l){var e=p(l),t=Object(h.a)(g.current),n=function(){m.current=!0};return t.addEventListener(e,_),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,_),t.removeEventListener("touchmove",n)}}}),[_,l]),!1!==o&&(E[o]=w(o)),a.useEffect((function(){if(!1!==o){var e=p(o),t=Object(h.a)(g.current);return t.addEventListener(e,_),function(){t.removeEventListener(e,_)}}}),[_,o]),a.createElement(a.Fragment,null,a.cloneElement(t,E))},g=n(10),A=n(31),v=n(210),y=n(108),b=n(17),_=a.forwardRef((function(e,t){var n=e.action,i=e.classes,u=e.className,l=e.message,c=e.role,h=void 0===c?"alert":c,f=Object(r.a)(e,["action","classes","className","message","role"]);return a.createElement(y.a,Object(o.a)({role:h,square:!0,elevation:6,className:Object(s.a)(i.root,u),ref:t},f),a.createElement("div",{className:i.message},l),n?a.createElement("div",{className:i.action},n):null)})),w=Object(u.a)((function(e){var t="light"===e.palette.type?.8:.98,n=Object(b.b)(e.palette.background.default,t);return{root:Object(o.a)({},e.typography.body2,Object(i.a)({color:e.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288})),message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiSnackbarContent"})(_),E=a.forwardRef((function(e,t){var n=e.action,i=e.anchorOrigin,u=(i=void 0===i?{vertical:"bottom",horizontal:"center"}:i).vertical,c=i.horizontal,h=e.autoHideDuration,f=void 0===h?null:h,p=e.children,y=e.classes,b=e.className,_=e.ClickAwayListenerProps,E=e.ContentProps,x=e.disableWindowBlurListener,S=void 0!==x&&x,T=e.message,M=e.onClose,L=e.onEnter,C=e.onEntered,R=e.onEntering,O=e.onExit,I=e.onExited,P=e.onExiting,k=e.onMouseEnter,N=e.onMouseLeave,D=e.open,F=e.resumeHideDuration,j=e.TransitionComponent,B=void 0===j?v.a:j,V=e.transitionDuration,G=void 0===V?{enter:l.b.enteringScreen,exit:l.b.leavingScreen}:V,U=e.TransitionProps,q=Object(r.a)(e,["action","anchorOrigin","autoHideDuration","children","classes","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onEnter","onEntered","onEntering","onExit","onExited","onExiting","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"]),W=a.useRef(),z=a.useState(!0),H=z[0],K=z[1],Y=Object(d.a)((function(){M&&M.apply(void 0,arguments)})),Q=Object(d.a)((function(e){M&&null!=e&&(clearTimeout(W.current),W.current=setTimeout((function(){Y(null,"timeout")}),e))}));a.useEffect((function(){return D&&Q(f),function(){clearTimeout(W.current)}}),[D,f,Q]);var X=function(){clearTimeout(W.current)},J=a.useCallback((function(){null!=f&&Q(null!=F?F:.5*f)}),[f,F,Q]);return a.useEffect((function(){if(!S&&D)return window.addEventListener("focus",J),window.addEventListener("blur",X),function(){window.removeEventListener("focus",J),window.removeEventListener("blur",X)}}),[S,J,D]),!D&&H?null:a.createElement(m,Object(o.a)({onClickAway:function(e){M&&M(e,"clickaway")}},_),a.createElement("div",Object(o.a)({className:Object(s.a)(y.root,y["anchorOrigin".concat(Object(g.a)(u)).concat(Object(g.a)(c))],b),onMouseEnter:function(e){k&&k(e),X()},onMouseLeave:function(e){N&&N(e),J()},ref:t},q),a.createElement(B,Object(o.a)({appear:!0,in:D,onEnter:Object(A.a)((function(){K(!1)}),L),onEntered:C,onEntering:R,onExit:O,onExited:Object(A.a)((function(){K(!0)}),I),onExiting:P,timeout:G,direction:"top"===u?"down":"up"},U),p||a.createElement(w,Object(o.a)({message:T,action:n},E)))))}));t.a=Object(u.a)((function(e){var t={top:8},n={bottom:8},r={justifyContent:"flex-end"},a={justifyContent:"flex-start"},s={top:24},u={bottom:24},l={right:24},c={left:24},h={left:"50%",right:"auto",transform:"translateX(-50%)"};return{root:{zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},anchorOriginTopCenter:Object(o.a)({},t,Object(i.a)({},e.breakpoints.up("sm"),Object(o.a)({},s,h))),anchorOriginBottomCenter:Object(o.a)({},n,Object(i.a)({},e.breakpoints.up("sm"),Object(o.a)({},u,h))),anchorOriginTopRight:Object(o.a)({},t,r,Object(i.a)({},e.breakpoints.up("sm"),Object(o.a)({left:"auto"},s,l))),anchorOriginBottomRight:Object(o.a)({},n,r,Object(i.a)({},e.breakpoints.up("sm"),Object(o.a)({left:"auto"},u,l))),anchorOriginTopLeft:Object(o.a)({},t,a,Object(i.a)({},e.breakpoints.up("sm"),Object(o.a)({right:"auto"},s,c))),anchorOriginBottomLeft:Object(o.a)({},n,a,Object(i.a)({},e.breakpoints.up("sm"),Object(o.a)({right:"auto"},u,c)))}}),{flip:!1,name:"MuiSnackbar"})(E)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(52),n(1),n(6));function s(e,t){return void 0!==t&&void 0!==e&&(Array.isArray(t)?t.indexOf(e)>=0:e===t)}var u=n(8),l=n(10),c=o.forwardRef((function(e,t){var n=e.children,u=e.classes,c=e.className,h=e.exclusive,f=void 0!==h&&h,d=e.onChange,p=e.orientation,m=void 0===p?"horizontal":p,g=e.size,A=void 0===g?"medium":g,v=e.value,y=Object(i.a)(e,["children","classes","className","exclusive","onChange","orientation","size","value"]),b=function(e,t){if(d){var n,r=v&&v.indexOf(t);v&&r>=0?(n=v.slice()).splice(r,1):n=v?v.concat(t):[t],d(e,n)}},_=function(e,t){d&&d(e,v===t?null:t)};return o.createElement("div",Object(r.a)({role:"group",className:Object(a.a)(u.root,c,"vertical"===m&&u.vertical),ref:t},y),o.Children.map(n,(function(e){return o.isValidElement(e)?o.cloneElement(e,{className:Object(a.a)(u.grouped,u["grouped".concat(Object(l.a)(m))],e.props.className),onChange:f?_:b,selected:void 0===e.props.selected?s(e.props.value,v):e.props.selected,size:e.props.size||A}):null})))}));t.a=Object(u.a)((function(e){return{root:{display:"inline-flex",borderRadius:e.shape.borderRadius},vertical:{flexDirection:"column"},grouped:{},groupedHorizontal:{"&:not(:first-child)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}},groupedVertical:{"&:not(:first-child)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-child)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}}),{name:"MuiToggleButtonGroup"})(c)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(8),u=n(67),l=Object(u.a)(o.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var c=o.forwardRef((function(e,t){var n=e.alt,s=e.children,u=e.classes,c=e.className,h=e.component,f=void 0===h?"div":h,d=e.imgProps,p=e.sizes,m=e.src,g=e.srcSet,A=e.variant,v=void 0===A?"circle":A,y=Object(i.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),b=null,_=function(e){var t=e.src,n=e.srcSet,r=o.useState(!1),i=r[0],a=r[1];return o.useEffect((function(){if(t||n){a(!1);var e=!0,r=new Image;return r.src=t,r.srcSet=n,r.onload=function(){e&&a("loaded")},r.onerror=function(){e&&a("error")},function(){e=!1}}}),[t,n]),i}({src:m,srcSet:g}),w=m||g,E=w&&"error"!==_;return b=E?o.createElement("img",Object(r.a)({alt:n,src:m,srcSet:g,sizes:p,className:u.img},d)):null!=s?s:w&&n?n[0]:o.createElement(l,{className:u.fallback}),o.createElement(f,Object(r.a)({className:Object(a.a)(u.root,u.system,u[v],c,!E&&u.colorDefault),ref:t},y),b)}));t.a=Object(s.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(c)},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(0),a=(n(1),n(6)),s=n(165),u=n(163),l=n(8),c=n(16),h=n(45),f=n(110),d=n(11),p=n(21),m=n(24),g=n(29);function A(e,t){var n=function(e,t){var n,r=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var i=window.getComputedStyle(t);n=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform")}var o=0,a=0;if(n&&"none"!==n&&"string"===typeof n){var s=n.split("(")[1].split(")")[0].split(",");o=parseInt(s[4],10),a=parseInt(s[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(o-r.left,"px)"):"right"===e?"translateX(-".concat(r.left+r.width-o,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(a-r.top,"px)"):"translateY(-".concat(r.top+r.height-a,"px)")}(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var v={enter:m.b.enteringScreen,exit:m.b.leavingScreen},y=o.forwardRef((function(e,t){var n=e.children,a=e.direction,s=void 0===a?"down":a,u=e.in,l=e.onEnter,m=e.onEntered,y=e.onEntering,b=e.onExit,_=e.onExited,w=e.onExiting,E=e.style,x=e.timeout,S=void 0===x?v:x,T=e.TransitionComponent,M=void 0===T?f.a:T,L=Object(i.a)(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),C=Object(p.a)(),R=o.useRef(null),O=o.useCallback((function(e){R.current=c.findDOMNode(e)}),[]),I=Object(d.a)(n.ref,O),P=Object(d.a)(I,t),k=function(e){return function(t){e&&(void 0===t?e(R.current):e(R.current,t))}},N=k((function(e,t){A(s,e),Object(g.b)(e),l&&l(e,t)})),D=k((function(e,t){var n=Object(g.a)({timeout:S,style:E},{mode:"enter"});e.style.webkitTransition=C.transitions.create("-webkit-transform",Object(r.a)({},n,{easing:C.transitions.easing.easeOut})),e.style.transition=C.transitions.create("transform",Object(r.a)({},n,{easing:C.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",y&&y(e,t)})),F=k(m),j=k(w),B=k((function(e){var t=Object(g.a)({timeout:S,style:E},{mode:"exit"});e.style.webkitTransition=C.transitions.create("-webkit-transform",Object(r.a)({},t,{easing:C.transitions.easing.sharp})),e.style.transition=C.transitions.create("transform",Object(r.a)({},t,{easing:C.transitions.easing.sharp})),A(s,e),b&&b(e)})),V=k((function(e){e.style.webkitTransition="",e.style.transition="",_&&_(e)})),G=o.useCallback((function(){R.current&&A(s,R.current)}),[s]);return o.useEffect((function(){if(!u&&"down"!==s&&"right"!==s){var e=Object(h.a)((function(){R.current&&A(s,R.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[s,u]),o.useEffect((function(){u||G()}),[u,G]),o.createElement(M,Object(r.a)({nodeRef:R,onEnter:N,onEntered:F,onEntering:D,onExit:B,onExited:V,onExiting:j,appear:!0,in:u,timeout:S},L),(function(e,t){return o.cloneElement(n,Object(r.a)({ref:P,style:Object(r.a)({visibility:"exited"!==e||u?void 0:"hidden"},E,n.props.style)},t))}))})),b=n(108),_=n(10),w={left:"right",right:"left",top:"down",bottom:"up"};var E={enter:m.b.enteringScreen,exit:m.b.leavingScreen},x=o.forwardRef((function(e,t){var n=e.anchor,l=void 0===n?"left":n,c=e.BackdropProps,h=e.children,f=e.classes,d=e.className,m=e.elevation,g=void 0===m?16:m,A=e.ModalProps,v=(A=void 0===A?{}:A).BackdropProps,x=Object(i.a)(A,["BackdropProps"]),S=e.onClose,T=e.open,M=void 0!==T&&T,L=e.PaperProps,C=void 0===L?{}:L,R=e.SlideProps,O=e.TransitionComponent,I=void 0===O?y:O,P=e.transitionDuration,k=void 0===P?E:P,N=e.variant,D=void 0===N?"temporary":N,F=Object(i.a)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"]),j=Object(p.a)(),B=o.useRef(!1);o.useEffect((function(){B.current=!0}),[]);var V=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?w[t]:t}(j,l),G=o.createElement(b.a,Object(r.a)({elevation:"temporary"===D?g:0,square:!0},C,{className:Object(a.a)(f.paper,f["paperAnchor".concat(Object(_.a)(V))],C.className,"temporary"!==D&&f["paperAnchorDocked".concat(Object(_.a)(V))])}),h);if("permanent"===D)return o.createElement("div",Object(r.a)({className:Object(a.a)(f.root,f.docked,d),ref:t},F),G);var U=o.createElement(I,Object(r.a)({in:M,direction:w[V],timeout:k,appear:B.current},R),G);return"persistent"===D?o.createElement("div",Object(r.a)({className:Object(a.a)(f.root,f.docked,d),ref:t},F),U):o.createElement(s.a,Object(r.a)({BackdropProps:Object(r.a)({},c,v,{transitionDuration:k}),BackdropComponent:u.a,className:Object(a.a)(f.root,f.modal,d),open:M,onClose:S,ref:t},F,x),U)}));t.a=Object(l.a)((function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}}),{name:"MuiDrawer",flip:!1})(x)}]]);
//# sourceMappingURL=2.fe2f12ee.chunk.js.map